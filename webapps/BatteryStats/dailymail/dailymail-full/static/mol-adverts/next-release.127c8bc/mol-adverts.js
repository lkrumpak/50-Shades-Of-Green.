/*! For license information please see mol-adverts.js.LICENSE.txt */
(()=>{var __webpack_modules__={4097:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>l});var i=n(9796);const r={},a=(e,t)=>{let n=(e.match(t)||[])[1]||"";return n=n.split(/[._]/g),{build:parseInt(n[2]||-1,10),major:parseInt(n[0]||-1,10),minor:parseInt(n[1]||-1,10)}},o=()=>{const e=navigator.userAgent;r.ua=e,r.isWindows=Boolean(e.match(/Windows Phone|iemobile|WPDesktop/i));try{r.isIPad=(Boolean(e.match(/iPad/i))||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&"ontouchend"in document)&&!r.isWindows}catch(e){r.isIPad=!1}r.isIDevice=(Boolean(e.match(/(iPad|iPhone|iPod)/i))||r.isIPad)&&!r.isWindows,r.isIPhone=Boolean(e.match(/iPhone/i))&&!r.isWindows,r.isAndroid=Boolean(e.match(/Android/i))&&!r.isWindows,r.isChrome=Boolean(e.match(/Chrome/i)),r.isFirefox=Boolean(e.match(/Firefox/i)),r.isKindleSilk=Boolean(e.match(/Silk|Kindle/i)),r.isAndroidPhone=r.isAndroid&&Boolean(e.match(/Mobile/i)),r.isAndroidTablet=r.isAndroid&&!Boolean(e.match(/Mobile/i)),r.isMobile=r.isIDevice||r.isAndroid||r.isWindows,r.isAndroidStock=r.isAndroid&&!r.isChrome&&!r.isFirefox&&!r.isKindleSilk;try{r.isIDevice?(r.mobileName=e.match(/(iPad|iPhone|iPod)/i)?e.match(/(iPad|iPhone|iPod)/i)[0]:"iPad",r.mobileVersion=a(e,/OS ((?:\d+[._]?)+)/i)):r.isAndroid?(r.mobileName="Android",r.mobileVersion=a(e,/Android ((?:\d+[._]?)+)/i)):r.isWindows?(r.mobileName="Windows Phone",r.mobileVersion=a(e,/Windows Phone ((?:\d+[._]?)+)/i)):(r.mobileName=null,r.mobileVersion={build:-1,major:-1,minor:-1})}catch(e){i.logger.error("Failed to parse mobile name and version",e),r.mobileName="unknown"}},s=()=>(i.logger.warn('"getZoom" function has been deprecated as it does not provide reliable values'),screen.deviceXDPI&&screen.logicalXDPI?screen.deviceXDPI/screen.logicalXDPI:document.width?document.width/window.innerWidth:screen.width&&window.innerWidth?screen.width/window.innerWidth:Math.max(document.documentElement.clientWidth,document.body.offsetWidth,document.body.scrollWidth)/(window.innerWidth||document.documentElement.clientWidth)),d=()=>window.matchMedia?window.matchMedia("(orientation:landscape)").matches:(window.innerWidth||document.documentElement.clientWidth)>(window.innerHeight||document.documentElement.clientHeight);try{o(),r.isAndroidStock&&(i.logger.debug("Executing Android Stock browser Orientation bug fix"),window.addEventListener("orientationchange",(()=>{const e=document.querySelector("meta[name=viewport]");if(e){const t=e.getAttribute("content");e.setAttribute("content","width=10000, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0"),setTimeout((()=>{e.setAttribute("content",t)}),0)}})))}catch(e){i.logger.error("Error parsing user agent",e)}const l={deviceData:r,disableScroll:()=>{document.body.style.overflow="hidden",document.ontouchmove=e=>e.preventDefault()},enableScroll:()=>{document.body.style.overflow="auto",document.ontouchmove=()=>!0},getMobileVersion:()=>r.mobileVersion,getZoom:s,isAndroid:()=>r.isAndroid,isAndroidPhone:()=>r.isAndroidPhone,isAndroidStock:()=>r.isAndroidStock,isAndroidTablet:()=>r.isAndroidTablet,isChrome:()=>r.isChrome,isFirefox:()=>r.isFirefox,isIDevice:()=>r.isIDevice,isIPad:()=>r.isIPad,isIPhone:()=>r.isIPhone,isKindleSilk:()=>r.isKindleSilk,isLandscape:d,isMobile:()=>r.isMobile,isPortrait:()=>!d(),isWindows:()=>r.isWindows,isZoomed:()=>s()>1,onTouchEnd:e=>(setTimeout(e,400),e()),parseUserAgent:o,setupMobileClass:()=>{if(i.logger.warn('"setupMobileClass" has been deprecated and "features detection" should be prefered over "device detection"'),r.mobileName){const e=r.mobileName.toLowerCase().replace(/ /,"-");document.body.classList.add(e)}}}},9818:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AD_ATTRIBUTE:()=>d,TAGS_ATTRIBUTE:()=>l,addLoadListener:()=>c,onAdLoaded:()=>T,parse:()=>f,refreshAdvert:()=>v,refreshAdvertsWithNewTags:()=>y,requestAdvert:()=>m,requestDelayedAdvert:()=>_,reset:()=>S,stringify:()=>h});var i=n(4990),r=n(6079),a=n(2153),o=n(2423);const s=n(5494),d="data-adverts-ad",l="data-adverts-tags",u=n(8905),c=n(5249),p=(0,o.x)("AdsRenderer"),h=s.stringify,f=s.parse;function g(){return a}function m(e){if(p("requestAdvert",e.pos,e),["gpt","oop"].some((t=>e.slotTypes.includes(t)))){if(e.id){const t=document.getElementById(e.id);t&&(t.setAttribute(d,s.stringify(e)),t.matches(".adHolder *")||t.classList.add("adHolder"))}return g().requestAd(e)}p("unsupported slot type, bailing",e.pos,e.slotTypes)}function v(e){g().refreshAdvert(e)}function y(e,t){const n=e.map(b).filter(Boolean).map((e=>e.ad));g().refreshAdvertsWithNewTags(n,t)}function b(e){const t=document.getElementById(e);if(t){const e=t.getAttribute(d),n=t.getAttribute(l);let i,a,o;if(e)return a=s.parse(e),i=(0,r.get)(a.pos)||a,o=n?s.parse(n):null,{ad:i,tags:o,container:t}}return null}async function _(e){}function T(e){for(let t=0,n=u.length;t<n;t++)u[t](e)}const w=i.ZP.broker("AdsRenderer");function S(){u.length=0}w.on("slot ready",m),w.on("ad rendered",((e,t)=>T(t))),w.on("refresh ads",(e=>{let{ids:t,plugins:n}=e;return y(t,n)}))},5249:(e,t,n)=>{const i=n(8905);e.exports=function(e){"function"==typeof e&&i.push(e)}},8905:e=>{e.exports=[]},2153:(e,t,n)=>{"use strict";n.r(t),n.d(t,{name:()=>y,refreshAdvert:()=>g,refreshAdvertsWithNewTags:()=>m,requestAd:()=>f,reset:()=>v});var i=n(4990),r=n(6212),a=n(4252),o=n(2423),s=n(4485);function d(e,t){t("formTags",e);const n=e.flat().map((e=>e?e.tags?e.tags:e:{}));return(0,s.Yb)(n.reduce(((e,t)=>({...e,...Array.isArray(t)&&t.reduce(((e,t)=>({...e,...t})),{})||t})),{}))}async function l(e,t,n){const i=await((e,t)=>new Promise(((n,i)=>{const a=(0,r.U2)("auction.maxTime",2e3),o=[];e.openStream({message:["get tags",{slot:t,timeout:a-100}],timeout:a,controlHandler:n=>{let{type:i,...r}=n;e.emit("auction event",t.pos,i,r)}}).on("data",(e=>{o.push(e)})).on("end",(()=>{e.emit("auction event",t.pos,"end"),n(o)})).on("error",(e=>i(e)))})))(e,n),a=await e.invokeAll("get tags based on tags",i);return[{...d(i,t),...a.reduce(((e,t)=>({...e,...t})),{})}]}const u=i.ZP.broker("DfpServer"),c=(0,o.x)("DfpServer");let p={};u.on("destroy slot",(e=>{delete p[e]}));let h=Promise.resolve();async function f(e){if(p[e.pos])return p[e.pos];u.emit("start bidding",e.pos);let t=[];if(e.skipHeaderBiders)c("skipping header biders for",e.pos);else{c("starting auction for",e.pos);const n=(0,r.U2)("auction.maxTime",2e3),[i]=await Promise.all([l(u,c,e),(0,a.Ye)(n,[h])]);t=i,c("auction ended for",e.pos,t),u.emit("bidding ended",e.pos)}return u.emit("slot ready for ad",e,t),p[e.pos]={tags:t},{tags:t}}function g(e){u.emit("bidding ended",e.pos),u.emit("gpt refreshAdvert",e.pos)}function m(e,t){const n=[];e.forEach((async t=>{c("starting auction for",t.pos);const i=await l(u,c,t);n.push({ad:t,tags:i}),u.emit("bidding ended",t.pos),n.length===e.length&&u.emit("slot ready to refresh",n)}))}function v(){p={}}u.on("set page level targeting",(e=>{c("new page level targeting:",e),h=h.then((()=>e)).then((()=>{}))}));const y="DfpServer"},9496:(e,t,n)=>{"use strict";n.r(t);var i=n(4990),r=n(9347),a=n(6079),o=n(1978),s=n(1430),d=n(6212),l=n(2423);function u(e,t){if(Array.isArray(e))e.forEach(t);else{if("object"!=typeof e||null===e)throw new Error(`dont know how to iterate on ${e}`);for(const[n,i]of Object.entries(e))t(i,n)}}const{onBodyAvailable:c}=n(1191),p=i.ZP.broker("DfpAsyncHandler"),h=(0,l.x)("dfpAsyncHandler"),f={},g={},m=["sky_right_top","sky_left_top","mpu_top","billboard","sticky_banner"],v=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]);function y(e,t){if(e&&e.slots&&e.slots.length)return e.slots.forEach((function(i){const r=document.getElementById(i.slot.getSlotElementId()),a=!!r&&!r.classList.contains("watermark");var o;i.slot.addService(googletag.pubads()).setTargeting("pos",e.dfpPos||e.pos).setCollapseEmptyDiv(a,a&&function(e){const t="billboard"===e&&"home"===(n.g.PageCriteria.channel||"").slice(-4);return!m.includes(e)&&!t}(e.pos)),e.targeting&&u(e.targeting,((e,t)=>{i.slot.setTargeting(t,e)})),e.custom&&e.custom.length&&(o=i.slot,e.custom,u((function(e){Object.keys(e).forEach((function(t){o.setTargeting(t,e[t])}))}))),"number"==typeof window.orientation&&i.slot.setTargeting("orientation",MobileUtils.isLandscape()?"landscape":"portrait"),MobileUtils.isMobile()&&i.slot.setTargeting("lat",PageCriteria.latitude||"").setTargeting("lon",PageCriteria.longitude||""),h(`setting targeting for pos: ${e.pos}`,t),function(e,t){t.forEach((function(t){t&&"object"==typeof t&&Object.keys(t).forEach((function(n){e.setTargeting(n,t[n]+"")}))}))}(i.slot,t)})),e}p.on("api message","metadata",(e=>{h("metadata api call:",e);const{ico:t,...n}=e;t&&(n.referrer=t),p.emit("set page level targeting",n)})),p.on({message:"prepare to refresh ads",sync:!0},(e=>{const t=googletag.pubads().getSlots().reduce(((e,t)=>{const n=t.getTargeting("pos")[0];return e[n]=e[n]||t,e}),{});e.map((e=>({pos:e,slot:t[e]}))).forEach((e=>{let{pos:t,slot:n}=e;n?n.clearTargeting?n.clearTargeting():console.warn("-----\x3e NO slot.clearTargeting when refreshing ads",t):console.warn("-----\x3e NO SLOT to clear targeting when refreshing ads",t)}))})),p.on("slot ready for ad",((e,t)=>{!function(e,t){e.parentId=e.parentId||e.id,e.slots=e.slots||[],e.slots.forEach((function(t){t.parentId=t.parentId||t.id||e.parentId})),b((function(){!function(e){const t=(0,a.get)(e.pos)||e;t&&t.slots&&t.slots.length?e.slots=t.slots:T(e)}(e),y(e,t)})),b((function(){e.slots.forEach((t=>{p.emit("request slot",{pos:e.pos,slotType:t.type,type:e.type,parentId:t.parentId,adUnit:e.adUnit,slot:t.slot})}))}))}(e,t)}));const b=e=>googletag.cmd.push(e);p.on("set slot state",((e,t)=>{const n=g[e];n?n.molAd.state=t:f[e]=t})),p.on("request slot",(e=>{"gptSlot"===e.slotType&&(g[e.pos]=e.slot),e.slot.molAd={pos:e.pos,type:e.type,slotType:e.slotType,parentId:e.parentId,adUnit:e.adUnit,state:f[e.pos]},delete f[e.pos],p.invoke("googletag.display",e.parentId),p.emit("ad requested",e.pos)})),p.on("slot ready to refresh",(function(e){e.forEach((e=>y(e.ad,e.tags))),k(e.map((e=>e.ad)))})),p.on("destroy slot",(e=>{const t=(0,a.get)(e);t.slots&&(googletag.destroySlots(t.slots.map((e=>e.slot))),delete t.slots)}));const _={gpt:function(e){const t=(0,o.t2)(e),n=e.sizeMapping,i=e.id,r=e.adUnit,a=(0,d.U2)("dfp.networkCode");h("define slot for",e.pos,{sizes:t,sizeMapping:n,adUnit:r,id:i});const s=googletag.defineSlot("/"+a+"/"+r,t,i);if(!s)throw new C(e);e.sizeMapping&&function(e,t){const n=t.reduce(((e,t)=>{let[n,i]=t;return e.addSize(n,i)}),googletag.sizeMapping());e.defineSizeMapping(n.build())}(s,e.sizeMapping),e.slots.push({type:"gptSlot",slot:s,parentId:e.id}),p.emit("slot created",e,s)},gptOOP:function(e){const t=e.slotTypes.includes("gpt")?function(e){const t=e.parentId+"-oop",n=document.getElementById(e.parentId),i=document.createElement("div");return i.id=t,n?n.parentNode.insertBefore(i,n.nextSibling):c((function(){document.body.appendChild(i)})),t}(e):e.parentId,n=(0,o.t2)(e),i=e.sizeMapping,r=e.adUnit,a=(0,d.U2)("dfp.networkCode");h("define oop slot for",e.pos,{sizes:n,sizeMapping:i,adUnit:r,id:t});const s=googletag.defineOutOfPageSlot("/"+a+"/"+r,t);if(!s)throw new C(e);e.slots.push({type:"oopGptSlot",slot:s,parentId:t})}};function T(e){return e.adUnit=e.adUnit||(0,r.Z)(e.pos),e.slots=e.slots||[],h(`${e.pos}: creating slots using slotTypes definition`),e.slotTypes.forEach((t=>{const n=_[t];n&&n(e)})),p.emit("update description",e.pos,e),e.slots.length&&y(e,[]),e}const w=e=>{let{slot:{molAd:{pos:t,parentId:n}}}=e;return n&&"string"==typeof n&&n.includes("-oop")?`${t}-oop`:t};function S(e){v.has(e)||b((function(){const t=(0,a.get)(e);t&&!t.gptSlot&&!t.oopGptSlot&&t.earlyBidding&&T(t)}))}function k(e){const t=e.map((function(e){return I(e.pos)}));p.invoke("googletag.pubads.refresh",t)}function I(e){return g[e]}p.on("slots initialized",(e=>{var t;t=e,b((function(){const e=googletag.pubads();e.set("page_url",location.hostname+location.pathname).setTargeting("article",adArticleId).setTargeting("environment",adEnvironment).setTargeting("country",PageCriteria.geo.toLowerCase()).addEventListener("slotRequested",(e=>e.slot.molAd&&p.emit("dfp slot requested",w(e),e))).addEventListener("slotRenderEnded",(e=>e.slot.molAd&&p.emit("ad rendered",w(e),e))).addEventListener("slotOnload",(e=>e.slot.molAd&&p.emit("ad loaded",e,w(e)))).addEventListener("impressionViewable",(e=>e.slot.molAd&&p.emit("ad viewable",w(e),e))).addEventListener("slotVisibilityChanged",(e=>e.slot.molAd&&p.emit("slot visibility changed",w(e),e))).addEventListener("slotResponseReceived",(e=>e.slot.molAd&&p.emit("slot response received",w(e),e))).setCentering(PageCriteria.isMobile&&!PageCriteria.isTablet),s.SP.testmode&&e.setTargeting("testmode",s.SP.testmode),p.emit("gpt initialized",googletag)})),t.forEach(S),b((function(){googletag.pubads().enableAsyncRendering(),googletag.enableServices()}))})),p.on("gpt refreshAdvert",(e=>{!function(e){const t=I(e);t&&(t.setTargeting("refresh","true"),p.invoke("googletag.pubads.refresh",[t]))}(e)})),p.on("gpt refreshAdverts",(e=>{k(e)}));class C extends Error{constructor(e){super(`Could not create a slot. googletag.defineSlot returned null. Probably because it has already been defined. Pos: ${e.pos}. ID: ${e.id}`)}}},5494:module=>{const omit=function(e,t){const n={};if(t=t||[],"object"==typeof e)for(const i in e)e.hasOwnProperty(i)&&-1===t.indexOf(i)&&(n[i]=DM.molFeMiniLodash.clone(e[i]));return n},stringify=function(e){return jsonStringify(omit(e,["slots"]))};var jsonStringify=JSON&&"function"==typeof JSON.stringify?JSON.stringify:function(e){switch(typeof e){case"string":return'"'+e.replace(/("|\\)/g,"\\$1")+'"';case"boolean":case"number":return e.toString();case"object":if("[object Array]"===Object.prototype.toString.call(e))return"["+e.map(stringify).join(",")+"]";if(e)return"{"+Object.keys(e).map((function(t){return stringify(t)+":"+stringify(e[t])})).join(",")+"}";case"undefined":case"function":return"null"}};const parse=JSON&&"function"==typeof JSON.parse?JSON.parse:function(value){return eval("data="+value)};module.exports={stringify,parse}},422:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CANCEL_ABD:()=>I,decode:()=>d,displayAdblockerDialog:()=>m,getAdIFrames:()=>l,getAdIframeAccounts:()=>c,getBlockerDepth:()=>w,incrementAdBlockerDepth:()=>k,insertDummyAd:()=>p,listenToPosRendered:()=>_,onPosHasRendered:()=>b,onPosRequest:()=>y,registerDetection:()=>S,testWithDummyAd:()=>f,testWithGamAbeAd:()=>h,testWithPeel:()=>g,thereAreNoAdsOnPage:()=>s,verifyDisplayedAdblockerDialog:()=>v});var i=n(1191),r=n(4582),a=n(4252),o=n(2423);function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return!l(e).length&&!e.querySelector(d("/npm.bet.tljo.fobcmfe"))}function d(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)-1);return t}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;return e.querySelectorAll(d("jgsbnf\\je_>#hpphmf`bet`jgsbnf`0#^"))}const u=new RegExp(d("_hpphmf`bet`jgsbnf`0)]e,*0"));function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;const t=l(e),n=[];for(let e=0;e<t.length;e++){const i=u.exec(t[e].id),r=i&&i[1]||"unknown";n.includes(r)||n.push(r)}return n}function p(e){let{dummyId:t="tlz.sjhiu",useNextFrame:n=!1,simplerDummy:i=!1}=e;const r=document.createElement("div");return r.id=d(t),r.innerHTML=d("bewfsujtfnfou"),r.style.display=d("cmpdl"),r.style.fontSize=d("1/2fn"),i?(r.style.width="300px",r.style.height="250px"):(r.style.color=d("usbotqbsfou"),r.style.position=d("bctpmvuf"),r.style.bottom="0",r.style.left=d(".211qy")),document.body.appendChild(r),new Promise((e=>{const t=()=>{e(r)};n?requestAnimationFrame(t):setTimeout(t,200)}))}function h(e){let{maxGAMAdRenderTime:t}=e;const n=(0,o.x)("creative-detection"),i=new Promise((e=>{const t=d("`en`bcf\v"),n=(0,r.Oo)(window,"message",(i=>{var r,a;null!==(r=i.data)&&void 0!==r&&null!==(a=r.startsWith)&&void 0!==a&&a.call(r,t)&&(n(),e(i.data.slice(t.length)))}))}));n("awaiting for body"),n("body found");const s=document.createElement("iframe");return s.src=d("iuuqt;00tfdvsfqvcbet/h/epvcmfdmjdl/ofu0hbnqbe0bey@jv>068760ebjmznbjm/vl0bcf't{>2y2'd>9473638475'u>qpt&4Ebcf"),s.style.height="1px",s.style.width="1px",document.body.appendChild(s),n("waiting for iframe..."),(0,a.Ye)(t,[i]).then((e=>{let{results:t}=e;const i=!t.length;return n(d(i?"be!cmpdlfs!efufdufe":"op!be!cmpdlfs!efufdufe")),[i]})).finally((()=>{document.body.removeChild(s)}))}function f(e){return p(e).then((e=>{const t=getComputedStyle(e),n=s()&&"none"===t.display;return e.remove(),[n]}))}function g(e){let{peelTimeout:t}=e;const n=document.createElement("script"),i=new Promise((e=>{n.addEventListener("load",(()=>{e(!document.getElementById(d("set3k4553dC3wTfe")))})),n.addEventListener("error",(()=>{e(!0)}))}));n.src=d("0qffm/kt");const r=Date.now();return document.head.appendChild(n),i.then((e=>(document.head.removeChild(n),Date.now()-r>t?[!1,{late:!0}]:[e,{late:!1}])))}function m(){return new Promise((e=>{const{DM:t}=n.g;null==t||t.later("bundle",(()=>{t[d("npmGfBecmpdlfsEjbmph")].init(),e()}))})).then(v)}function v(){return(0,a.gb)((()=>(0,i.getVisibleText)(document.body).indexOf(d("Xf!tff!uibu!zpv(sf!vtjoh!bo!be!cmpdlfs"))>-1),300,2e3)}function y(e){let t=!1;n.g.adverts.queue.push({scope:d("poBeSfrvftu"),data:()=>{t||(t=!0,e())}})}function b(e){let t=!1;n.g.adverts.queue.push({scope:d("poBeSfoefsfe"),data:n=>{t||(t=!0,e(n))}})}function _(){let e=!1;return b((t=>{e=t})),()=>e}const T="bcfefqui";function w(){return Number(localStorage.getItem(T))}function S(e){const t=Number(localStorage.getItem(T)||"0"),n=e?t+1:0;return localStorage.setItem(T,n.toString()),n}function k(){S(!0)}const I=Symbol("dbodfm!bce")},907:(e,t,n)=>{const i=n(931),r=function(e,t){this.eventsMap={},this.eventName=e,this.getDomCallback=t,this.domElement={};const n=this;DM.later("DOM_READY",(function(){s.call(n)}))};function a(e){const t=this.eventsMap[e];this.domElement[e]=this.getDomCallback(e),null!==this.domElement[e]&&this.on(this.domElement[e],this.eventName,(function(e){e.stopPropagation();const n=MobileUtils.isLandscape()?"landscape":"portrait";t.call(this,n)}))}function o(e){i.getElementById(e)?e in this.eventsMap&&a.call(this,e):delete this.eventsMap[e]}function s(){for(const e in this.eventsMap)o.call(this,e)}r.on=function(e,t,n){e.addEventListener(t,n)},r.fireEvent=document.createEvent?function(e,t){const n=e.ownerDocument.createEvent("HTMLEvents");n.initEvent(t,!0,!0),e.dispatchEvent(n)}:function(e,t){const n=e.ownerDocument.createEventObject();n.eventType=t,e.fireEvent("on"+n.eventType,n)},r.prototype={constructor:r,registerEvent:function(e,t){this.eventsMap[e]=t,o.call(this,e)},getEvent:function(e){return this.eventsMap[e]},on:r.on,fireEvent:r.fireEvent},e.exports=r},308:(e,t,n)=>{const i=n(907),r=n(931),a="data-impression-url",o="data-ted-tracking",s=new i("onImpression",(function(e){return function(e){return r.getElementById(e)}(e)}));e.exports={DATA_IMPRESSION_URL:a,onImpression:function(){s.registerEvent.apply(s,arguments)},registerImpression:function(e,t){const n=Array.prototype.filter.call(r.getAdContainer(e).getElementsByTagName("div"),(function(e){return e.getAttribute(a)}));n.length&&(function(e){const t=e.getAttribute(a);(new Image).src=t,e.getAttribute(o)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"dfp-impression"}))}(n[0]),function(e){setTimeout((function(){!function(){s.fireEvent.apply(s,arguments)}(e,"onImpression"),e.getAttribute(o)&&(DM.later?DM.later("bundle",(function(){DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"})})):DM.pageEvents.fireEvent(DM.pageEvents.PAGE_AD_DISPLAYED,{type:"3rd-party-impression"}))}),0)}(n[0]),t.call(this,e))}}},8043:(e,t,n)=>{"use strict";n.d(t,{$R:()=>u,DZ:()=>i,M7:()=>c,Ps:()=>a,TV:()=>l,Z$:()=>o,cl:()=>r,jj:()=>d,pj:()=>s,zu:()=>p});const i=(e,t,n)=>{const i=new Array(n.length);let r=0;for(let a=0,{length:o}=n;a<o;a++){const o=n[a];e(o)&&(i[r++]=t(o))}return i.length=r,i},r=(e,t)=>{const n=t.indexOf(e);return-1===n?t:[...t.slice(0,n),...t.slice(n+1)]},a=e=>e[0],o=e=>e[e.length-1],s=e=>void 0===e?[]:Array.isArray(e)?e:[e],d=e=>{const t=new Set(e);return Array.from(t)},l=e=>{let t=e.length;const n=[...e];for(;t;){const e=Math.floor(Math.random()*t--),i=n[t];n[t]=n[e],n[e]=i}return n};function u(e,t){return e.map(((e,n)=>[e,t[n]]))}function c(e,t){const n=[...e];return n.sort(((e,n)=>e[t]-n[t])),n}function p(e,t){const n=new Set(t);return e.filter((e=>!n.has(e)))}},4252:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>o,PQ:()=>p,S1:()=>a,Vs:()=>r,Ye:()=>l,gb:()=>u,yq:()=>d});class i extends Error{constructor(e){super(`Exceeded ${e}`)}}const r=e=>new Promise((t=>setTimeout(t,e))),a=e=>new Promise((t=>0===e?t(c(void 0,10)):setTimeout(t,e))),o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i(e);throw await a(e),t},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i(e);throw await r(e),t},d=(e,t,n)=>Promise.race([t,s(e,n)]),l=async(e,t)=>{const n=[],i=[];return await Promise.race([r(e),Promise.all(t.map((e=>e.then((e=>n.push(e))).catch((e=>i.push(e))))))]),{errors:i,results:n}};function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.MAX_SAFE_INTEGER;const a=Date.now(),o=s=>Promise.resolve(e()).then((e=>{if(e)return e;if(Date.now()-a<n){const e=Math.min(1e3,2**s/2);return r(t+e).then((()=>o(s+1)))}throw new i(n)}));return o(0)}const c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return new Promise((n=>{n(t?c(e,t-1):e)}))};function p(){let e,t,n=!1;return{promise:new Promise(((n,i)=>{e=i,t=n})),reject(t){n||(n=!0,e(t))},resolve(e){n||(n=!0,t(e))}}}},4582:(e,t,n)=>{"use strict";n.d(t,{JT:()=>u,Oo:()=>d,Vl:()=>s,vE:()=>o});var i=n(8043);function r(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,a(e,t,"get"))}function a(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const o=e=>{if("function"==typeof Event)return new e.constructor(e.type,e);{const t=document.createEvent("Event");return t.initEvent(e.type,e.bubbles,e.cancelable),t}};function s(e,t,n){return e.on(t,n),()=>e.off(t,n)}function d(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}var l=new WeakMap;class u{constructor(){var e,t,n;n={writable:!0,value:[]},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e=this,t=l),t.set(e,n)}on(e,t,n){return this.add(s(e,t,n))}one(e,t,n){return this.add(function(e,t,n){return e.one(t,n),()=>e.off(t,n)}(e,t,n))}addEventListener(e,t,n,i){return this.add(d(e,t,n,i))}add(e){return r(this,l).push(e),e}remove(e){var t,n,o;t=this,n=l,o=(0,i.cl)(e,r(this,l)),function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(t,a(t,n,"set"),o)}dispose(){for(const e of r(this,l))e()}}},816:(e,t,n)=>{"use strict";function i(e,t){let n,i=0,r=!1;const a=o=>{if(r){i=o,clearTimeout(n),r=!1;const s=!n;n=setTimeout(a,t),e(s)}else n=void 0};return()=>{r=!0;const e=Date.now&&Date.now()||(new Date).getTime();(!n||e-i>=t)&&a(e)}}function r(e){let t=!1;return function(){if(!t){t=!0;try{return e(...arguments)}finally{t=!1}}}}n.d(t,{Ds:()=>o,FU:()=>i,ri:()=>a,yS:()=>r});const a=e=>{let t,n=!1;return function(){return n||(n=!0,t=e(...arguments)),t}},o=(e,t)=>{let n,i;const r=function(){for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];i=a,n&&clearTimeout(n),n=setTimeout((()=>{n=void 0,e(...i),i=void 0}),t)};return r.callNow=function(){n&&(clearTimeout(n),n=void 0);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];e(...r||i||[]),i=void 0},r}},4990:(e,t,n)=>{"use strict";n.d(t,{Jj:()=>d,ZP:()=>c});var i=n(4252),r=n(8043),a=n(82),o=n(8981),s=n.n(o);class d{constructor(e,t){var n,i,r=this;i=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return r.bus.intercept(r,e,...n)},(n="intercept")in this?Object.defineProperty(this,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):this[n]=i,this.bus=e,this.id=t,this.options={}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.emit(this,e,...n)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.on(this,e,...n)}once(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.pop();let a=!1;const o=[...n,function(){a||(s.cancel(),a=!0,r(...arguments))}],s=this.on(e,...o);return s}until(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise((t=>{const i=[...n,function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return t(n)}];this.once(e,...i)}))}register(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.register(this,e,...n)}hasSubscriber(e){return this.bus.hasSubscriber(e)}interceptOnce(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.interceptOnce(this,e,...n)}invoke(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.invoke(this,e,...n)}invokeAll(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.bus.invokeAll(this,e,...n)}registerStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerStream(this,...t)}registerUnboundedStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.registerUnboundedStream(this,...t)}openStream(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.openStream(this,...t)}createReadObjectStream(){return this.bus.createReadObjectStream()}createTransformObjectStream(e){return this.bus.createTransformObjectStream(e)}collectStreamAsPromise(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.collectStreamAsPromise(this,...t)}invokeChainMutable(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.bus.invokeChainMutable(this,...t)}}class l extends Error{}class u extends l{constructor(e){super("No end point registered: "+JSON.stringify(e)),this.endpoint=e}}const c=new class{constructor(){this.subscriptions=[],this.interceptors=[],this.queued=[],this.started=!1,this.dispatcher=e=>e(),this.firedMessages=new Set,this.system=this.broker("MessageBus"),this.emitImmediately=this.emitImmediately.bind(this),this.showUncaughtErrors=!0,this.globalTimeoutOverride=void 0,this.logCall=()=>{}}queuePublish(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];const{promise:o,resolve:s}=(0,i.PQ)();return this.queued.push((()=>s(e(t,...r)))),o}queueStream(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const[o,s]=a.Ju();return this.queued.push((()=>{e(t,...i).pipe(s)})),o}broker(e){return new d(this,e)}emit(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.started?this.emitWithInterceptors(e,t.toString(),...i):this.queuePublish(this.emitWithInterceptors.bind(this),e,t,...i)}doesMessageMatch(e,t){let n=0;for(;n<e.length;n++)if(e[n]!==t[n])return!1;return n}emitWithInterceptors(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.callInterceptors(e,"emit",this.emitImmediately,...n)}callInterceptors(e,t,n){for(var i=this,r=arguments.length,a=new Array(r>3?r-3:0),o=3;o<r;o++)a[o-3]=arguments[o];return new Promise(((r,o)=>{try{if(this.interceptors.length){const o=this.interceptors.filter((e=>!1!==this.doesMessageMatch(e.msg,a)));let s=!1;const d=function(){const r=o.shift();for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return a=u.length>0?u:a,r?(s=!0,i.logCall(e,t,r.broker,a,!0),i.callInterceptor(r.callback,a,d,r.broker)):(s&&i.logCall(e,t,void 0,a,!0,!0),n(e,t,a))};r(d())}else r(n(e,t,a))}catch(e){o(e)}}))}callInterceptor(e,t,n,i){return e(t,n)}emitImmediately(e,t,n){return Promise.all(this.subscriptions.reduce(((i,r)=>{const a=this.doesMessageMatch(r.msg,n);return!1!==a&&i.push(this.callSubscriber(e,t,r,a,n)),i}),[]))}callSubscriber(e,t,n,i,r){const a=r.slice(i);return new Promise(((i,o)=>{const s=()=>{try{this.logCall(e,t,n.broker,r),i(n.callback.apply(n.broker,a))}catch(e){"error"===r[0]?(console.error("Exception thrown while handling error for",r,e),o(e)):(this.system.emit("error",...r,e),o(e))}};n.sync?s():this.dispatcher(s)}))}addSubscription(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=t[t.length-1],o=t.splice(0,t.length-1);return this.subscribe(e,o,a,n,i,r)}on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.addSubscription(e,n,!1)}register(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return this.addSubscription(e,[t,...i],!0)}getOptions(e){let t=e&&e.options||{};for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const a=i[0];return"object"==typeof a?t={...t,...a}:t.message=i,Array.isArray(t.message)||(t.message=[t.message]),t.timeout=this.localTimeout(t.timeout),t}getSubscriptionsInterestedIn(e){return this.subscriptions.map((t=>({subscription:t,matchCount:this.doesMessageMatch(t.msg,e.message)}))).filter((e=>!1!==e.matchCount))}callFilteredSubscription(e,t,n,i){let{message:r,map:a}=n,{matchCount:o,subscription:s}=i;const d=this.callSubscriber(e,t,s,o,r);return a&&s.expectReturn?a(d,s):d}callFilteredSubscriptions(e,t,n,i){return i.reduce(((i,r)=>{const a=this.callFilteredSubscription(e,t,n,r);return r.subscription.expectReturn&&i.push(a),i}),[])}async invoke(e,t){var n=this;const r=async function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];const o=n.getOptions(e,...r),[s,...d]=n.getSubscriptionsInterestedIn(o).filter((e=>e.subscription.expectReturn));if(!s)return Promise.reject(new u(r));d.length>0&&console.warn("Total of",d.length+1,"endpoints registered for message",r);const l=n.callInterceptors(e,"invoke",((e,t,i)=>n.callFilteredSubscription(e,t,{...o,message:i},s)),...o.message);return void 0!==o.timeout?Promise.race([l,(0,i.Gv)(o.timeout)]):l};for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return this.started?r(e,t,...o):this.queuePublish(r.bind(this),e,t,...o)}localTimeout(e){var t;return null!==(t=this.globalTimeoutOverride)&&void 0!==t?t:e}async invokeAll(e,t){var n=this;const r=async function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];const o=n.getOptions(e,...r),s=(e,t,i)=>{const r={...o,message:i},a=n.getSubscriptionsInterestedIn(r);o.controlHandler&&o.controlHandler({type:"interested endpoint",endpoints:a.reduce(((e,t)=>{let{subscription:{broker:{id:n},expectReturn:i,unbounded:r}}=t;return i&&!r?[...e,n]:e}),[])});const s=n.callFilteredSubscriptions(e,t,r,a);return o.subscriptionsCalledCallback&&o.subscriptionsCalledCallback(a),s},d=await n.callInterceptors(e,"invokeAll",s,...o.message);let l=d?d.filter((e=>e)):[];const u=[];l=l.map((e=>e.then((e=>{u.push(e)}),(e=>{if(o.catch)try{o.catch(e)}catch(e){n.system.emit("error",e)}n.system.emit("error",e)}))));let c=Promise.all(l).then((e=>e.filter((e=>e))));return void 0!==o.timeout&&(c=Promise.race([c,(0,i.S1)(o.timeout)])),c.then((()=>u))};for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return this.started?r(e,t,...o):this.queuePublish(r.bind(this),e,t,...o)}subscribe(e,t,n,i){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=t[0],d="object"==typeof s?(0,r.pj)(s.message):t,l="object"==typeof s&&!!s.sync;if(n&&"function"!=typeof n)throw new Error(`Callback has to be a function, but a "${typeof n}" was passed`);const u={broker:e,msg:d,callback:n,sync:l,expectReturn:i,isStream:a,unbounded:o,cancel:()=>{this.subscriptions=(0,r.cl)(u,this.subscriptions)}};return this.subscriptions.push(u),u}hasSubscriber(e){return-1!==this.subscriptions.findIndex((t=>{let{msg:[n]}=t;return n===e}))}interceptOnce(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];const a=i.pop();let o=!1;const s=[...i,function(){o||(d(),o=!0,a(...arguments))}],d=this.intercept(e,t,...s);return d}intercept(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];const o=[t,...i],s=o.pop(),d={msg:o,callback:s,broker:e};return this.interceptors.push(d),()=>{this.interceptors=(0,r.cl)(d,this.interceptors)}}start(){var e,t,i,r=this;for(this.system.on("error",(function(){r.showUncaughtErrors&&console.error(...arguments)})),this.started=!0;this.queued.length;){var a;null===(a=this.queued.shift())||void 0===a||a()}this.system.emit("system ready"),null===(e=n.g.DM)||void 0===e||null===(t=e.later)||void 0===t||null===(i=t.go)||void 0===i||i.call(t,"mol-adverts")}setDispatcher(e){this.dispatcher=e}registerStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.addSubscription(e,n,!0,!0)}registerUnboundedStream(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.addSubscription(e,n,!0,!0,!0)}openStream(e){var t=this;const n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];const d=t.getOptions(e,...r),l=a.KC();let u=!1,c=0;const p=()=>{u||0!=--c||(u=!0,l.push(null))},h=(e,n)=>{let{broker:i,unbounded:o}=n;return o||c++,e.then((e=>{const t=e instanceof s().Readable?e:a.nI(e?[e]:[]);t.on("data",(e=>!u&&l.push(e))),o||t.on("end",(()=>{d.controlHandler&&d.controlHandler({type:"stream done",endpoint:i.id}),p()}))}),(e=>{d.emitErrors?l.emit("error",e):t.system.emit("error",...r,e),o||p()}))};void 0!==d.timeout&&((0,i.S1)(d.timeout).then((()=>{!u&&l.push(null),u=!0})),delete d.timeout);const f=()=>{u||0!==c||(u=!0,l.push(null))};return t.invokeAll(e,{...d,map:h,subscriptionsCalledCallback:f}),l};for(var r=arguments.length,o=new Array(r>1?r-1:0),d=1;d<r;d++)o[d-1]=arguments[d];return this.started?n(e,...o):this.queueStream(n.bind(this),e,...o)}createReadObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.KC(e)}createTransformObjectStream(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return a.U0(e)}collectStreamAsPromise(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return a.$4(this.openStream(e,...n))}invokeChainMutable(e){var t=this;const n=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];const o=t.getOptions(e,...r),s=t.getSubscriptionsInterestedIn(o).filter((e=>e.subscription.expectReturn)),d=t.callInterceptors(e,"invokeChainMutable",((e,n,i)=>new Promise((a=>{const d=[...i],l=d.pop();a(s.reduce((async(i,a)=>{const s=await i,{matchCount:l,subscription:u}=a;return t.callSubscriber(e,n,u,l,[...d,s]).catch((e=>(o.onError&&o.onError(e,r),t.system.emit("error",...r,e),s)))}),Promise.resolve(l)))}))),...o.message);return void 0!==o.timeout?Promise.race([d,(0,i.Gv)(o.timeout)]):d};for(var r=arguments.length,a=new Array(r>1?r-1:0),o=1;o<r;o++)a[o-1]=arguments[o];return this.started?n(e,...a):this.queuePublish(n.bind(this),e,...a)}}},8778:(e,t,n)=>{"use strict";function i(){const e="x-loc=",t=document.cookie.indexOf(e);if(-1===t)return;const n=document.cookie.indexOf(";",t);if(-1===n)return;const i=document.cookie.substring(t+e.length,n);return i.length>0&&"none"!==i.toLowerCase()?i:void 0}n.d(t,{K:()=>i})},4485:(e,t,n)=>{"use strict";function i(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function r(e,t){return Object.entries(t).reduce(((t,n)=>{let[i,r]=n;return t[i]=e[r],t}),{})}function a(e){for(const t in e)return!1;return!0}n.d(t,{$Z:()=>f,Ev:()=>r,T$:()=>h,Yb:()=>c,ar:()=>s,ei:()=>i,jF:()=>u,nr:()=>g,ns:()=>o,sE:()=>l,xb:()=>a});const o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g,i=t;for(const t of e)void 0===i[t]&&(i[t]={}),i=i[t];return i},s=e=>t=>{for(const n in e)if("function"==typeof e[n]&&!e[n](t[n]))return!1;return!0};function d(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function l(e,t){for(const n in e)if(d(e,n)&&t(e[n],n))return e[n]}function u(e,t,n){if(!d(e,t))return e;const i={...e,[n]:e[t]};return delete i[t],i}function c(e){const t={};return Object.keys(e).forEach((n=>{const i=e[n];p(i)?t[n]=c(i):void 0!==i&&(t[n]=i)})),t}function p(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function h(e){return e instanceof HTMLElement||e instanceof WeakMap||e instanceof Function||e instanceof Error||p(e)&&"function"==typeof e.then}function f(e){let t=0;const n="___MARK_",i={};return JSON.parse(JSON.stringify(e,(function(e,r){if(h(r)){const e=t++;return i[e]=r,`${n}${e}`}return r})),(function(e,t){return"string"==typeof t&&t.startsWith(n)?i[t.substr(n.length)]:t}))}function g(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},82:(e,t,n)=>{"use strict";n.d(t,{$4:()=>a,Ju:()=>o,KC:()=>d,TS:()=>c,U0:()=>l,UI:()=>p,c:()=>f,dE:()=>s,hX:()=>h,nI:()=>u});var i=n(8981),r=n.n(i);const a=e=>new Promise(((t,n)=>{const i=[];e.on("data",(e=>i.push(e))),e.on("end",(()=>t(i))),e.on("error",(e=>n(e)))})),o=()=>{const e=new(r().Readable)({objectMode:!0,read(){}}),t=new(r().Writable)({objectMode:!0,write(t,n,i){e.push(t),i()},final(t){e.push(null),t()}});return[e,t]},s=(e,t)=>d({start(){e.on("data",(e=>this.push(e))).on("end",(()=>{this.push(null),t()})).on("error",(e=>{console.log("------\x3e STREAM Error",e),this.destroy(e),t(e)}))}}),d=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new(r().Readable)({objectMode:!0,read(){}});return e.start&&e.start.apply(t),t},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new(r().Transform)({objectMode:!0,...e})},u=e=>{let t=0;return new(r().Readable)({objectMode:!0,read(){e.length&&this.push(e[t++]),t===e.length&&this.push(null)}})},c=e=>{const t=d();let n=e.length;return n?(e.forEach((e=>{const i=e=>t.push(e),r=()=>{0==--n&&t.push(null)},a=e=>t.emit("error",e);e.on("data",i).on("end",r).on("error",a);const o=(e.off||e.removeListener).bind(e);t.on("close",(()=>{o("data",i),o("end",r),o("error",a)}))})),t):(t.push(null),t)},p=(e,t)=>d({start(){e.on("data",(e=>this.push(t(e)))).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),h=(e,t)=>d({start(){e.on("data",(e=>{t(e)&&this.push(e)})).on("end",(()=>{this.push(null)})).on("error",(e=>this.destroy(e)))}}),f=(e,t)=>{const n=d(),i=e=>n.push(e);t.on("data",i);let r=!1;const a=(t.off||t.removeListener).bind(t);e.on("end",(()=>{r||(a("data",i),r=!0),n.push(null)}));const o=c([e,n]);return o.on("close",(()=>{r||(a("data",i),r=!0)})),o}},4403:(e,t,n)=>{"use strict";function i(e){const t=r(new URL(e).search.substring(1));return t?{specific:r(t.prev_scp),cust_params:r(t.cust_params)}:{}}function r(e){return e&&Object.fromEntries(e.split("&").map((e=>e.split("=").map(decodeURIComponent))))||void 0}function a(e,t){const n=e.startsWith("?"),i=e.substr(n?1:0).split("&").filter((e=>e.split("=")[0]!==t)).join("&");return i?`${n?"?":""}${i}`:""}n.d(t,{Gi:()=>i,gY:()=>a})},1978:(e,t,n)=>{"use strict";n.d(t,{T3:()=>r,e$:()=>o,fb:()=>a,np:()=>s,t2:()=>i});const i=e=>e.size||DM.molFeMiniLodash.map((e.type||"").split(","),(e=>DM.molFeMiniLodash.map(e.split("x"),Number)));function r(e,t,n){const i=e=>Array.isArray(e)&&2===e.length;if(!((r=e)&&Array.isArray(e)&&e.length&&r.every((e=>e&&i(e)&&i(e[0])&&Array.isArray(e[1])&&(0===e[1].length||e[1].every(i))))))return t;var r;const a=(e=>e.sort(((e,t)=>t[0][0]-e[0][0])))([...e]),[o,s]=n,d=a.find((e=>{let[[t,n]]=e;return o>=t&&s>=n}));return d&&d[1]||t}function a(e){return t=e,Array.isArray(t)&&Array.isArray(t[0])?e.reduce(((e,t)=>{let[n,i]=e;return Array.isArray(t)?[Math.max(n,t[0]),Math.max(i,t[1])]:[n,i]}),[0,0]):e;var t}function o(e,t){return t.reduce(((t,n)=>{const i=new RegExp(n.replace(/\*/g,".*"));return t.push(...Object.keys(e).filter((e=>i.exec(e)))),t}),[])}function s(e){const t=e.slot&&"function"==typeof e.slot.getResponseInformation&&e.slot.getResponseInformation();return t&&{creativeId:t.creativeId||t.sourceAgnosticCreativeId,lineItemId:t.lineItemId||t.sourceAgnosticLineItemId,advertiserId:t.advertiser,campaignId:t.campaignId,companyId:t.companyIds}}},9347:(e,t,n)=>{"use strict";function i(e){const t=n.g.dartSiteId,i=n.g.PageCriteria.sponsored?"dm_dmnative":`${n.g.adAreaSiteId}_${n.g.adAreaSiteId}${n.g.adAreaId}_${n.g.adSubareaId}${n.g.adPageType}`;return"native_"===e.slice(0,7)?`dailymail.uk/dm_native/${e}`:"video"===e?`dm.video/dm_video_${n.g.adAreaId}`:`${t}/${i}/${e}`}n.d(t,{Z:()=>i})},1430:(e,t,n)=>{"use strict";n.d(t,{D1:()=>y,G9:()=>v,JW:()=>f,P0:()=>b,SP:()=>o,WH:()=>T,ap:()=>a,bP:()=>h,cj:()=>m,ej:()=>d,kT:()=>p,oK:()=>_,r7:()=>w,s$:()=>g,zP:()=>c});var i=n(4403);function r(e){return window["inner"+e]||document.documentElement["client"+e]||document.body["client"+e]}function a(){let{usePixelRatio:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e&&window.devicePixelRatio||1;return{width:r("Width")*t,height:r("Height")*t}}const o=(()=>{let e={};try{e=window.location.search.substr(1).split("&").reduce(((e,t)=>{let[n,i]=t.split("=");switch(n=decodeURIComponent(n),!0){case n.startsWith("!"):e[n.substr(1)]=!1;break;case n.endsWith("[]"):n=n.substr(0,n.length-2),e[n]=!i||decodeURIComponent(i).split(",");break;case n.endsWith("[0]"):n=n.substr(0,n.length-3),e[n]=!i||decodeURIComponent(i).split(",");break;case/\[[-+]\]$/.test(n):e[n]=[...e[n]||[],...(i||"").split(",").map(decodeURIComponent)];break;default:e[n]=i?decodeURIComponent(i):"string"!=typeof i||i}return e}),{})}catch(t){console.error("ads",t),e={}}return e})(),s=/(%[0-9A-Z]{2})+/g,d=e=>{let t;const n=`; ${document.cookie}`.split(`; ${e}=`);if(n.length>1){const e=n.pop().split(";").shift();t='"'===e.charAt(0)?e.slice(1,-1):e,t=t.replace(s,decodeURIComponent)}return t},l=e=>{const t=new Date;switch(typeof e){case"undefined":return t.setMonth(t.getMonth()+1),t;case"number":return t.setDate(t.getDate()+e),t;case"string":return new Date(e);case"function":return l(e());case"object":if(e instanceof Date)return e;if(null===e)return l();default:throw new Error("Invalid expire time when setting cookie")}},u=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",r=arguments.length>4?arguments[4]:void 0;const a=l(n);let o=`${e}=${t};expires=${a.toUTCString()};path=${i}`;r&&(o+=`;domain=${r}`),document.cookie=o},c=(e,t)=>{const n=`${e}Expire`,i=l(d(n)).toUTCString();u(e,t,i),u(n,i,i)},p=e=>{u(e,"","Thu, 01 Jan 1970 00:00:01 GMT")};function h(){const e=/(Windows\s*[a-zA-Z]*)\s+([^;\s)]+)/i.exec(navigator.userAgent);return e&&"windows nt"===e[1].toLowerCase()&&parseFloat(e[2])>=6.4}const f="Microsoft Internet Explorer"===navigator.appName||!(!navigator.userAgent.match(/Trident/)&&!navigator.userAgent.match(/rv:11/)),g=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),m=/(?:iPod|iPhone|iPad).*(?:OS)/i.test(navigator.userAgent),v=/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/.test(navigator.userAgent),y=/Firefox\/([0-9.]+)(?:\s|$)/.test(navigator.userAgent),b=/Edge\/([0-9._]+)/.test(navigator.userAgent);function _(){try{if(/iP(hone|od|ad)/.test(navigator.platform)){const e=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3]||0,10)]}}catch(e){console.error(e)}return[-1,-1,-1]}function T(e){const{origin:t,pathname:r,search:a}=n.g.location,o=`${t}${r}${(0,i.gY)(a,e)}`;window.history.pushState(null,"",o)}function w(e){const t=e.getBoundingClientRect(),n=document.body,i=document.documentElement,r=window.pageYOffset||i.scrollTop||n.scrollTop,a=window.pageXOffset||i.scrollLeft||n.scrollLeft,o=i.clientTop||n.clientTop||0,s=i.clientLeft||n.clientLeft||0,d=t.top+r-o,l=t.left+a-s;return{top:Math.round(d),left:Math.round(l)}}},4692:(e,t,n)=>{"use strict";n.r(t);var i=n(816),r=n(1430),a=n(4990),o=n(2310),s=n(4843),d=n.n(s);const l=a.ZP.broker("debug-output"),u=window.PageCriteria&&window.PageCriteria.pageViewId||(0,o.kb)(),c=r.SP.adsDebugRemote||r.SP["ac.adsDebugRemote"]||n.g.adverts.config&&n.g.adverts.config.adsDebugRemoteV2,p=r.SP.adsBugReport||r.SP["ac.adsBugReport"]||n.g.adverts.config&&n.g.adverts.config.adsBugReportV2,h="boolean"!=typeof c&&c;let f=[],g=0;const m=(0,i.Ds)((()=>{l.emit("send to bidmax",{_:{topic:"debug"},type:"multi",pvid:u,label:h,eventId:g++,payload:f}),f=[]}),1e3);function v(e){const t=new Set;return JSON.stringify(e,((e,n)=>{if("object"==typeof n&&null!==n){if(n instanceof Error)return{type:"Error",message:n.message,stack:n.stack};if(t.has(n))return"[circular reference]";t.add(n)}return"string"==typeof n&&n.length>4048?"[string too long: "+n.length+"]":function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}(n)?"[DOM Node]":n}))}const y=(e,t)=>{f.push({type:e,timestamp:(new Date).toISOString(),payload:t}),f.length>=100?m.callNow():m()},b=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];y("log",{level:e,log:n.map(v).map((e=>{if(void 0===e)return e;if(e.length>1e4)return"[object too long: "+e.length+"]";try{return JSON.parse(e)}catch(t){_.error("Error parsing",e,t)}}))}),_[e](...n)},_={log:console.log,warn:console.warn,error:console.error,info:console.info};c&&(console.log=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b("log",...t)},console.info=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b("info",...t)},console.warn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b("warn",...t)},console.error=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b("error",...t)},window.onerror=function(e,t,n,i,r){return console.error("[UNCAUGHT]",{message:e,source:t,lineno:n,colno:i,error:r}),!1},window.addEventListener("unhandledrejection",(e=>{let{reason:t}=e;console.error("[PromiseRejectionUncaught]",{reason:t})})),l.on("send remote debug",y),l.on("system ready",(()=>{const{config:e}=n.g.adverts;y("config",{config:e})})),l.once("dom ready",(()=>{n.g.PageCriteria&&y("PageCriteria",n.g.PageCriteria),n.g.pagemeta&&y("pagemeta",n.g.pagemeta),l.invoke("get page level analytics").then((e=>y("bidmax",e)))}))),p&&l.once("dom ready",(()=>{const e=document.createElement("div");e.innerHTML=d()(),document.body.appendChild(e);const t=e.querySelector("#debugRemoteButtonText"),n=t.querySelector("textarea"),i=t.querySelector("button");e.querySelector("#debugRemoteButton").addEventListener("click",(e=>{e.preventDefault(),t.style.display="block"})),i.addEventListener("click",(e=>{e.preventDefault(),y("bugreport",{log:[n.value]}),console.info("bugreport",n.value),n.value="",t.style.display="none"}))}))},2423:(e,t,n)=>{"use strict";n.d(t,{x:()=>d});var i=n(1430),r=n(8043);const a=function(){let e=new Set;if(i.SP.adsDebug)e=new Set(((!0===i.SP.adsDebug?"all":i.SP.adsDebug)||"").toLowerCase().split(","));else{const t=i.SP["ac.adsDebug"]||n.g.adverts.config&&n.g.adverts.config.adsDebug;"boolean"==typeof t?e=new Set(["all"]):Array.isArray(t)&&(e=new Set(t.map((e=>e.toLowerCase()))))}return e}(),o=a.has("all"),s=()=>{};function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[`%c${e}`,l()],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=o||a.has(e.toLowerCase()),u=i?console.log.bind(console,...(0,r.pj)(t)):s;return u.debugName=e,u.label=t,u.enabled=i,u.log=c("log"),u.trace=c("trace"),u.debug=c("debug"),u.info=c("info"),u.warn=c("warn"),u.error=c("error",!0),u.table=i?p:s,u.extend=i=>{const[a,...o]=(0,r.pj)(t),s=n+1;return d(e,[`${a} %c${i}`,...o,l(s)],s)},u;function c(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return n&&"function"==typeof console[e]?console[e].bind(console,...(0,r.pj)(t)):s}function p(){u("Table:"),console.table(...arguments)}}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return`display: inline-block; color: #fff; background: hsl(214deg 100% ${35+10*e}%); padding: 1px 4px; border-radius: 3px;`}},2310:(e,t,n)=>{"use strict";n.d(t,{MX:()=>r,RD:()=>i,_b:()=>d,kb:()=>a});const i=2147483647;function r(e,t){const n=t-e+1+e;return Math.floor(Math.random()*n)}function a(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){return function(e){const t=16*Math.random()|0;return"x"===e?t:3&t|8}(e).toString(16)}))}function o(e,t){if(null==e)return;let n=e/(t/100);return n>99&&(n=99),n<0&&(n=0),Math.round(n)}const s=/(.*)P(\d+)(s|k|m|gb|ms)$/;function d(e,t){const{cap:n}=function(e){const[,t,n,i]=e.match(s),r=function(e,t){return{m:e=>60*e*1e3,s:e=>1e3*e,k:e=>1e3*e,gb:e=>1e9*e,ms:e=>e}[t](e)}(n,i);return{fieldName:t,period:n,unit:i,cap:r}}(e);return{[e]:o(t,n)}}},4859:(e,t,n)=>{"use strict";function i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const i=n=>String.prototype.split.call(t,n).filter(Boolean).reduce(((e,t)=>null!=e?e[t]:e),e),r=i(/[,[\]]+?/)||i(/[,[\].]+?/);return void 0===r||r===e?n:r}n.d(t,{Z:()=>i})},6933:(e,t,n)=>{"use strict";function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(((e,t)=>r(e,t)))}function r(e,t){if(e===t)return e;const n=typeof t;if("undefined"===n)return e;const i=Array.isArray(t);if(null===t||"string"===n||"number"===n||"boolean"===n||"function"===n||!i&&"object"===n&&null!==t&&t.constructor!==Object)return t;if(null===e)return r(void 0,t);const a=typeof e,o=Array.isArray(e);if(n!==a)return o?e:"function"===a&&"object"===n?(Object.entries(t).forEach((t=>{let[n,i]=t;e[n]=i})),e):"undefined"===a?i?r([],t):"object"===n?r({},t):t:"undefined"===n?e:t;if(o){const n=e.length,i=t.length;let a;for(a=0;a<n&&a<i;a++)e[a]=r(e[a],t[a]);for(a=n;a<i;a++)e[a]=r(void 0,t[a]);return e}if(i)return[...t];const s=Object.entries(t).sort(((e,t)=>{let[n]=e,[i]=t;return n.localeCompare(i)})),d=s.length,l=Object.entries(e).sort(((e,t)=>{let[n]=e,[i]=t;return n.localeCompare(i)}));let u=0;for(const[t,n]of l){let i,a,o=-1;for(;o<0&&u<d;)[i,a]=s[u],o=i.localeCompare(t),o<0&&(e[i]=r(void 0,a),u++);0===o&&(e[t]=r(n,a),u++)}for(;u<d;){const[t,n]=s[u++];e[t]=r(void 0,n)}return e}n.d(t,{Z:()=>i})},1003:(e,t,n)=>{"use strict";function i(e,t,n){const i=Array.isArray(t)?t:t.match(/([^[.\]])+/g);i.reduce(((e,t,r)=>(void 0===e[t]&&(e[t]={}),r===i.length-1&&(e[t]=n),e[t])),e)}n.d(t,{Z:()=>i})},4264:(e,t,n)=>{"use strict";var i=n(2423),r=n(1430);(r.SP.adsDebugRemote||r.SP["ac.adsDebugRemote"]||n.g.adverts.config&&n.g.adverts.config.adsDebugRemote)&&n(4692),(0,i.x)("bootstrap").log("loading",window.location.href)},6212:(e,t,n)=>{"use strict";n.d(t,{S1:()=>f,U2:()=>p,_D:()=>g,t8:()=>h});var i=n(4859),r=n(1003),a=n(1430),o=n(8043),s=n(7269),d=n(2423),l=n(6933);n.g.adverts.config=n.g.adverts.config||{};const u=(0,d.x)("config"),c={},p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=(0,i.Z)(c,...t);return"object"==typeof r?JSON.parse(JSON.stringify(r)):r},h=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r.Z)(c,...t)};function f(){Object.entries(n.g.adverts.config).forEach((e=>{let[t,n]=e;try{if((0,s.j)(n)){const e=(0,s.H)(n);void 0!==e&&h(t,e)}else h(t,n)}catch(e){console.error(e)}})),n.g.adverts.config=c,function(){const e=JSON.parse(localStorage.getItem("mol-ads-control-panel-config")||"null");"object"==typeof e&&null!==e&&(0,l.Z)(c,e)}(),g(),function(e){if("string"!=typeof e.setPlugin)return;const t=e=>["on","true","1","enabled"].includes(e),[n,i,r]=e.setPlugin.split(",").reduce(((e,n)=>{let[i,r,a]=e;const[o,s]=n.split(":");if(void 0===s)return[i,r,a];if(o.includes("*")){const[e,n]=o.split("*");!t(s)&&""===n&&a.push(e)}else t(s)?i.add(o):r.add(o);return[i,r,a]}),[new Set([]),new Set([]),[]]),a=p("plugins.enabled",[]).filter((e=>!((e=>r.some((t=>e.includes(t)))&&!n.has(e))(e)||i.has(e)))),s=(0,o.jj)([...a,...n]);h("plugins.enabled",s)}(a.SP)}const g=()=>{Object.entries(a.SP).forEach((e=>{let[t,n]=e;if(t.startsWith("ac."))if(t.endsWith("[+]")){const e=t.substring(3,t.length-3);h(e,(0,o.jj)(p(e,[]).concat(n)))}else if(t.endsWith("[-]")){const e=t.substring(3,t.length-3);h(e,p(e,[]).filter((e=>!n.includes(e))))}else if(t.endsWith("{}")){const e=t.substring(3,t.length-2);h(e,(e=>{try{return JSON.parse(e)}catch(e){return u.error(e),{}}})(n))}else h(t.slice(3),(e=>""===e||"boolean"==typeof e?e:isNaN(e)?(e=>{const t="true"===e;return"false"===e||t?t:e})(e):parseFloat(e))(n))}))}},5622:(e,t,n)=>{"use strict";(0,n(6212).S1)()},7269:(e,t,n)=>{"use strict";n.d(t,{H:()=>d,j:()=>l});var i=n(1430),r=n(4485),a=n(8043),o=n(4859),s=n(4097);function d(e){let{__targeting:t}=e;return((0,a.pj)(t).find(u)||{}).payload}function l(e){return"object"==typeof e&&!(null==e||!e.__targeting)}const u=(0,r.ar)({browser:c((function(e){switch(e){case"chrome":return i.G9;case"edge":return i.P0;case"ie":return i.JW;case"firefox":return i.D1;case"safari":return i.s$;default:return!1}})),cookie:c((function(e){return Object.entries(e).some((e=>{let[t,n]=e;return n.includes((0,i.ej)(t)||"")}))})),device:c((function(e){switch(e){case"tablet":return s.ZP.isIPad()||s.ZP.isAndroidTablet();case"desktop":return!s.ZP.isMobile()}})),iOSVersion:c((function(e){let{min:t,max:n}=e;const[r]=(0,i.oK)();return(void 0===t||t<=r)&&(void 0===n||n>=r)})),timeRange:c((function(e){let{end:t,start:n}=e;const i=new Date,r=t&&p(t)<=i,a=n&&p(n)>i;return!r&&!a})),globalContext:c((function(e){let{prop:t,op:i,value:r}=e;const s=(0,o.Z)(n.g,t);switch(i){case"includes":return"string"==typeof s?s.includes(r):(0,a.pj)(s).includes(r);case"startsWith":return"string"==typeof s&&s.startsWith(r)}})),topWindow:c((function(e){return e?window.top===window:window.top!==window}))});function c(e){return t=>void 0===t||(Array.isArray(t)?t.some(e):e(t))}function p(e){const[t,n,i]=e.split(":").map(Number),r=new Date;return r.setHours(t),r.setMinutes(n),r.setSeconds(i),r}},1191:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyle:()=>m,closest:()=>f,contains:()=>v,createIframe:()=>S,elementReady:()=>a,getElementBottomOffset:()=>d,getElementComputedHeight:()=>T,getElementComputedWidth:()=>_,getElementScaledHeight:()=>b,getElementWidthScale:()=>w,getOffset:()=>s,getPageSize:()=>p,getParent:()=>y,getRelativeContainer:()=>u,getVisibleText:()=>k,getWindow:()=>c,insertAfter:()=>I,isElement:()=>g,loaded:()=>o,onBodyAvailable:()=>i,untilBodyAvailable:()=>r,walk:()=>h});const i=e=>{document.body?e():n.g.requestAnimationFrame((()=>{i(e)}))},r=()=>new Promise(i),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;return new Promise(((i,r)=>{let a=!1;setTimeout((()=>{a=!0}),t);const o=()=>{const s=document.querySelector(e);s?i(s):a?r(new Error(`Element "${e}" not found after ${t}ms`)):setTimeout((()=>o()),n)};o()}))},o=()=>new Promise((e=>{["complete","loaded","interactive"].includes(document.readyState)?e():document.addEventListener("DOMContentLoaded",e)})),s=e=>{let t,n,i={top:0,left:0};const r=e&&e.ownerDocument;if(r)return t=r.documentElement,e.getBoundingClientRect&&(i=e.getBoundingClientRect()),n=c(r),{top:i.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:i.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}};function d(e){return s(e).top+T(e)}const l=e=>{const t=getComputedStyle(e).getPropertyValue("position");return["relative","absolute"].includes(t)},u=e=>h(e,l,(e=>e.parentNode)),c=e=>{let t=null;return e&&(e===e.window?t=e:9===e.nodeType?t=e.defaultView||e.parentWindow:e.ownerDocument&&(t=e.ownerDocument.defaultView||e.ownerDocument.parentWindow)),t},p=()=>[document.body.scrollWidth,window.innerHeight+window.scrollMaxY,window.innerWidth,window.innerHeight],h=(e,t,n)=>{for(;e;){if(t(e))return e;e=n(e)}},f=(e,t)=>h(e,t,(e=>{let{parentNode:t}=e;return t!==document&&t})),g=e=>e&&1===e.nodeType,m=e=>{if(!e)return;const t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.innerText=e,(document.body||document.head).appendChild(t)},v=(e,t)=>e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY,y=(e,t)=>h(e,(e=>e.matches(t)),(e=>e.parentNode)),b=e=>(e=>{const t=getComputedStyle(e),n=t.getPropertyValue("transform");if(n&&"none"!==n){const e=n.split("(")[1].split(")")[0].split(",");return parseFloat(e[3])}const i=t.getPropertyValue("zoom");return parseFloat(i||1)})(e)*T(e),_=e=>parseInt(getComputedStyle(e).getPropertyValue("width")),T=e=>parseInt(getComputedStyle(e).getPropertyValue("height")),w=e=>{const t=_(e);return _(document.body)/t};function S(e){let{content:t,insertMethod:n=(e=>{document.body.appendChild(e)}),width:i=0,height:r=0,log:a=(()=>{})}=e;const o=document.createElement("iframe");return o.border="0",o.style.width=`${i}px`,o.style.height=`${r}px`,o.style.border="none",a("inserting iframe"),n(o),a("writing iframe content",o),o.contentDocument.open(),o.contentDocument.domain=document.domain,o.contentDocument.write(t),o.contentDocument.close(),o}function k(e){window.getSelection().removeAllRanges();const t=document.createRange();t.selectNode(e),window.getSelection().addRange(t);const n=window.getSelection().toString().trim();return window.getSelection().removeAllRanges(),n}function I(e,t){t.parentNode.insertBefore(e,t.nextSibling)}},6716:(e,t,n)=>{"use strict";n.d(t,{H:()=>u,j:()=>l});var i=n(4252),r=n(1430),a=n(8778),o=n(6212);const s=(0,i.gb)((()=>{var e;return null===(e=window.RTA)||void 0===e?void 0:e.ids}),300,3e3).then((e=>e.user||e.visit?{rta:{user:e.user,visit:e.visit}}:{})).catch((()=>({}))).then((e=>{var t,i;const{PageCriteria:s={},pagemeta:d={}}=window;return{account:"mol",adsFreeUser:null===(t=(i=n.g).isAdFreeEntitled)||void 0===t?void 0:t.call(i),articleId:s.articleId,channel:s.channel,configVersion:(0,o.U2)("__generated.commit.sha"),bundle:"facade",cmVersion:(0,o.U2)("__generated.rulesJs.version"),cmCluster:(0,o.U2)("__generated.rulesJs.cluster"),device:s.device,embed:!0,event_type:"bidmax",geo:s.geo,isMobile:s.isMobile,isTablet:s.isTablet,office:(0,a.K)(),pageType:s.pageType,pageViewId:s.pageViewId,referrer:document.referrer,sponsored:s.sponsored,subchannel:s.subchannel,timeAtSend:0,type_version:2,url:location.href,version:r.SP.bidmax||d.adsBundleVersion||"absent",...e}}));let d={};function l(e){d={...d,...e}}function u(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=!!(0,o.U2)("bidmax.dispatcher.useCurrentUrl");return s.then((i=>new Promise(((r,a)=>{const s=new XMLHttpRequest,l=t?`${n.g.location.origin}${n.g.location.pathname}`:(0,o.U2)("bidmax.dispatcher.url","//crta.dailymail.co.uk");s.open("POST",l,!0),s.addEventListener("abort",a),s.addEventListener("error",a),s.addEventListener("load",r),s.setRequestHeader("Content-Type","text/plain"),s.send(JSON.stringify({...i,...d,...e,timestamp:Date.now()}))})))).catch((e=>console.error(e)))}},8728:(e,t,n)=>{void 0===n.g.adverts&&(n.g.adverts={})},168:(e,t,n)=>{"use strict";n.d(t,{fo:()=>a,uM:()=>o});const i=(0,n(2423).x)("plugin-registry"),r={};function a(e,t){i("registering plugin:",e),r[e]=t}function o(){return{...r}}},2381:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DELAYED:()=>d,IMMEDIATE:()=>o,LAZY:()=>s,getEnabledRenderedSlots:()=>m,getEnabledSlots:()=>v,getLoadingSettings:()=>g,initEmergencyRules:()=>w,initSlots:()=>_,isAdEnabled:()=>h,resetSlots:()=>b,setSupportedSlots:()=>T});var i=n(1430),r=n(4485);(0,n(168).fo)("adListLoader",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:i,setConfig:o}=e;const s=(b=i("slots.enabled",{}),!(_=y)||_&&(0,r.xb)(_)?b:Object.entries(_).reduce(((e,t)=>{let[n,i]=t;return i?e[n]={}:delete e[n],e}),b)),d=Object.keys(s),h=new Set(d),g=c.filter((e=>!h.has(e))),m=d.reduce(((e,t)=>({...e,[t]:f(s[t])})),{}),v=i("slotDescription",{});var b,_;l=d.filter((e=>!v[e]||!!v[e].id)),u=g,a=m,o("slots.enabled",m),t.emit("slots initialized",l),p(u,!1),p(l,!0),t.on("system ready",(()=>{n.g.DM.later("DOM_READY",(()=>{document.write=document.writeln=e=>{try{throw new Error(e)}catch(e){n.g.DM.log("ads","Error: there was an attempt to document.write in a rendered page: ",e)}}}))})),t.on("set slots enabled",((e,t)=>{p(e,t)}))}});let a={};const o="immediate",s="lazy",d="delayed";let l=[],u=[];const c=["adx_page_skins","adx_tracking","banner_top","billboard","bvp_puff_26","bvp_puff_29","fff","fff_overlay","half_mpu_top","inread_player","inread_player_mw","inread_player_top","intro_ad","leader_bottom","leader_lower_middle","leader_middle","leader_top","leader_very_bottom","leader_wide","mpu_bottom","mpu_bottom_right","mpu_channel","mpu_comments_1","mpu_comments_2","mpu_home","mpu_middle","mpu_mobile","mpu_mobile_bottom","mpu_mobile_lower_middle","mpu_mobile_top","mpu_mobile_upper_middle","mpu_puff_10","mpu_puff_15","mpu_puff_20","mpu_puff_30","mpu_puff_45","mpu_puff_5","mpu_top","native_fff_accessorise","native_fff_overlay_accessorise","network_banner","para_top","puff_ad_3","puff_ad_6","puff_ad_9","sky_left_bottom","sky_left_top","sky_right_bottom","sky_right_top","sticky_banner","video_ad","video_carousel"],p=function(e,t){e.forEach((e=>{const n=`molads_${e}_on`,i=`molads_${e}_off`;document.documentElement.classList.add(t?n:i),document.documentElement.classList.remove(t?i:n)}))},h=e=>{const t=e&&(e.dfpPos||e.pos);return!(window.disableAds&&!i.SP.ignoreDisableAds)&&(!t||!c.includes(t)||l.includes(t))},f=e=>{let{loadingOffset:t,loadingTrigger:i,loadingType:r=o}=e;const a={type:r||o,trigger:i,offset:isNaN(t)?0:Number(t)};return a.type===o||a.type===d||a.type===s&&a.trigger||(n.g.DM.log("ads","Unknown loading type or invalid loading trigger, falling back to immediate loading :",a),a.type=o),a},g=e=>a[e]||{type:o,trigger:void 0,offset:0},m=()=>l.slice(),v=m,y=(i.SP.setSlot&&i.SP.setSlot.split(",")||[]).reduce(((e,t)=>{const[n,i]=t.split(":").map((e=>e.trim()));return e[n]="on,true,1,enabled".includes(i||"true"),e}),{}),b=()=>{l=[],u=[]},_=()=>{},T=e=>{},w=()=>{}},7337:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>init});var uuid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(3591);const showThankYouMessage=(getConfig,log)=>{try{log("Showing thank you message"),eval(getConfig("abe.thankYouMessage.js","DM.later('bundle', function(){window.top.DM.molFeAdblockerDialog.thanks()})"))}catch(e){console.error(e)}};function init(e){let{broker:t,getConfig:n,log:i}=e;const r=JSON.parse(localStorage.getItem("mol.abe.data")||"{}"),a=new Promise((e=>{t.once("ad block detection result",(a=>{let{adblocker:o}=a;o&&(void 0===r.v&&(r.i=(new Date).toISOString(),r.v=2,r.u=(0,uuid__WEBPACK_IMPORTED_MODULE_0__.Z)(),r.n=!0),r.v++,r.l=(new Date).toISOString(),localStorage.setItem("mol.abe.data",JSON.stringify(r))),r.i&&(i(o?"Ad blocker detected":"No ad blocker detected"),o||r.c&&!(r.c<r.l)||(r.c=(new Date).toISOString(),r.n=!0,i("First page load with no ad blocker, saving:",r),localStorage.setItem("mol.abe.data",JSON.stringify(r)),showThankYouMessage(n,i)),t.emit("ex ad blocker user",o,!!r.c),r.c?e({exabd:!o}):e({}))}))}));if(!r.i)return;i("ABE ran at last once, waiting for to ad blocker detection");let o={};void 0!==r.c&&(o.exabd=r.c>r.l),a.then((e=>o=e));const s=e=>({[r.n?"exabd2":"exabd"]:!!e});t.emit("set page level targeting",s(o.exabd)),t.emit("set page level targeting",a.then((e=>{let{exabd:t}=e;return s(t)}))),t.register("call for page analytics",(()=>o))}init.ccpa={enabledIfDissent:!0},init.gdpr={enabledIfDissent:!0}},931:(e,t,n)=>{"use strict";n.r(t),n.d(t,{appendStyles:()=>L,default:()=>V,enableSlot:()=>O,getAdContainer:()=>N,getElementById:()=>M,getElementContainerById:()=>P,getElementOrIframeById:()=>I,isEmpty:()=>A,log:()=>R,nativeLoaded:()=>D,openAd:()=>B});var i=n(9818),r=n(2381),a=n(4990);const o=n(5249),s=n(5494),d=n(931);let l;a.ZP.broker("NativeRenderer").on("system ready",(()=>{const e=window.location.href.match(/[&?]enable_native=([^&]+)/),t=e&&e[1];if(t){const e=r.initSlots;r.initSlots=function(n){n[t]={enabled:!0,state:"on"},e.apply(r,arguments)}}l=t,o((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}))}));const u="\f\t",c=u.length;function p(e){const t=document.getElementById(e.parentId),n=d.getAdContainer(t);let i=!1;function r(){if(!i){i=!0;try{!function(e,t,n){const i=document.createElement("div");i.innerHTML=n;const r=i.childNodes;if("none"!==t.style.display){t.style.display="none";let n,i=t;const a=t.parentNode,o=e.pos.replace(/_dfp$/,"");for(let e=r.length;e--;)n=r[e],1===n.nodeType&&"SCRIPT"!==n.nodeName&&(a.insertBefore(n,t),i=n);const s=i,d=i;switch(e.pos){case"native_fff_overlay_accessorise":a.style.display="none";case"native_fff_accessorise":document.body.classList.add("fff-has-accessorise")}d&&s.hasAttribute("data-track-module")&&DM&&DM.externalLinkTracker&&(d.setAttribute("data-track-type","cl"),DM.externalLinkTracker(s.id,"cl")),l&&window.opener&&window.opener!==window&&window.opener.postMessage&&(window.addEventListener("message",h.bind(null,i,o)),f(window.opener,"isLoaded",!0,o))}}(e,t,n.body.innerHTML)}catch(e){console.error("Error moving native article: ",e)}}}n.body&&((n.defaultView||n.parentWindow).addEventListener("load",r),setTimeout(r,2e3))}function h(e,t,n){if(n.data.slice(0,c)===u){const i="data-native-ad-field";let r;try{r=s.parse(n.data.slice(c))}catch(e){console.error("Invalid message",e)}if(r&&r.type){const a=[].slice.call(e.querySelectorAll("["+i+"]"));let o;switch(r.type){case"getValues":o=a.map((function(e){return{name:e.getAttribute(i),value:e.textContent}}));break;case"setValues":a.forEach((function(e){const t=e.getAttribute(i);t in r.values&&(e.textContent=r.values[t])}))}o&&f(n.source,r.type,o,t,n.origin)}}}function f(e,t,n,i,r){const a={type:"response",query:t,position:i,value:n};e.postMessage(u+s.stringify(a),r||"*")}o((function(e){if(!e.isEmpty){const t=e.slot,n=t&&t.molAd;"native_"===n.pos.slice(0,7)&&"_dfp"===n.pos.slice(-4)&&p(n)}}));var g=n(1191),m=n(2423);function v(e){return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e]}class y{constructor(){this.subscriptions={}}clone(){return{emit:this.emit.bind(this),off:this.off.bind(this),on:this.on.bind(this),once:this.once.bind(this)}}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];v.call(this,e).slice().forEach((e=>e(...n)))}off(e,t){const n=v.call(this,e);if(t){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}else n.length=0}on(e,t){v.call(this,e).push(t)}once(e,t){var n=this;const i=function(){n.off(e,i),t(...arguments)};this.on(e,i)}}var b=n(6079),_=n(1978),T=n(8043);const w=(e,t)=>{let n;try{n=e.contentDocument||e.contentWindow.document}catch(e){}return n||t},S=e=>t=>{const n=t&&w(t);return n&&n.getElementById(e)},k=e=>{const t=(e||document).getElementsByTagName("iframe");return Array.prototype.filter.call(t,C)},I=e=>{const t=S(e);return E(k(),(e=>t(e)&&e))},C=e=>e.id&&"google_ads_iframe_"===e.id.slice(0,18),E=(e,t)=>{for(let n=0,i=e.length;n<i;n++)if(t(e[n]))return e[n]},A=e=>{const t=document.getElementById(e),n=["a","iframe","object","img","video"];let i=!0;if(t)for(let e=n.length;i&&e--;)i=!t.getElementsByTagName(n[e]).length;return i},P=e=>{const t=I(e),n=/\badHolder\b/;if(!t)return;let i=t;for(;i&&!n.test(i.className||"");)i=i.parentNode;return i||(i=t),i},x=(e,t)=>{R("Disabling",t);const n=document.documentElement,i="molads_"+t;if("billboard"===t){F("billboard",R.extend("watermark")),e.emit("unstick position","billboard");const{DM:t}=window;t&&t.Rotator&&t.Rotator.initMiniCarousel()}n.classList.add(`collapse-${t}`),n.classList.remove(i+"_on"),n.classList.add(i+"_off")},O=e=>{const t="molads_"+e,n=document.documentElement;n.classList.remove(t+"_off"),n.classList.add(t+"_on")},D=(e,t,n)=>{const r=E(k(),(t=>t.contentWindow.name===e.name));if(r){const e=(0,g.closest)(r,(e=>e.hasAttribute(i.AD_ATTRIBUTE)));if(e){const t=i.parse(e.getAttribute(i.AD_ATTRIBUTE)||"{}");t&&p(t)}}},R=(0,m.x)("ad-integrator"),L=e=>{const t=e.match(/<style[^>]*\sclass="?integrate"?[^>]*>[^\f]*?<\/style>/gi);for(let e=0,n=t?t.length:0;e<n;e++)(0,g.appendStyle)(t[e].slice(t[e].indexOf(">")+1,-8))},M=e=>{let t=null;const n=k(),i=S(e);for(let e=0;!t&&e<n.length;e++)t=i(n[e]);return t},U=(e,t)=>{R(`collapseAd("#${t}")`);const n=(0,b.getById)(t);if(n)return void x(e,n.pos);R.warn("collapseAd - cannot find description of slot with id:",t);const r=P(t);if(r){R("collapsing",t);const n=i.parse(r.getAttribute(i.AD_ATTRIBUTE)||"{}");n&&n.pos?x(e,n.pos):r.style.display="none"}else R.warn("collapseAd: id",t,"is unknown")};function j(e,t){for(const n of(0,_.e$)((0,b.allDescriptions)(),(0,T.pj)(t)))R(`collapseAd({ pos: "${n}" })`),x(e,n)}const N=e=>{const t=k(e)[0];return t?w(t,document):e},B=e=>{const t=P(e),n=i.parse(t.getAttribute(i.AD_ATTRIBUTE)||"{}");n&&n.pos?O(n.pos):(t.style.height="auto",t.style.display="block")};function F(e,t){const n=(0,b.get)(e);if(!n)return void t.warn("Cannot find description");const i=document.getElementById(n.id);if(!i)return void t.warn("Cannot find element");const r=(0,g.closest)(i,(e=>e.classList.contains("watermark")));r?(t("removing watermark",r),r.classList.remove("watermark")):t.warn("Couldn't find an watermarked element")}const q=e=>{let{broker:t}=e;n.g.addEventListener("message",(e=>{let{data:n}=e;if("object"==typeof n&&"string"==typeof n.func)switch(R("received message",n),n.func){case"molads.addSkinToPage":return t.emit("add skin to page",n);case"molads.addSkinLabel":return t.emit("add skin label to page");case"molads.disableSticky":return t.emit("disable sticky position",n.pos);case"molads.disableForceView":return t.emit("disable force view when viewed",n.pos)}}));const i=new y;let r=[];t.on("external subscription",(function(){return i.on(...arguments)})),n.g.adverts.getRendered=()=>r,n.g.AdIntegrator=n.g.AdIntegrator||{},n.g.adverts.collapseAd=n.g.AdIntegrator.collapseAd=U.bind(null,t),n.g.adverts.collapseAdByPos=n.g.AdIntegrator.collapseAdByPos=j.bind(null,t),n.g.AdIntegrator.disableSlot=x.bind(null,t),t.on("ad rendered",((e,t)=>{t.isEmpty||(r.push(t.slot.molAd),i.emit("rendered",t),i.emit("rendered."+e,t))})),t.on("destroy slot",(e=>{r=r.filter((t=>t.pos!==e))})),t.on("remove watermark",(e=>{F(e,R.extend("remove watermark").extend(e))})),t.on("collapseAdByPos",(e=>j(t,e)))},V=q;q.isAdsFreeSupported=!0,q.ccpa={enabledIfDissent:!0},q.gdpr={enabledIfDissent:!0}},5966:(e,t,n)=>{"use strict";n.d(t,{m:()=>r});const i=(0,n(2423).x)("mvt"),r=(e,t,n)=>{const r=(e=>e.map((e=>(i(`From scenario "${e.name}", loading config:`,e.config||{}),e.config||[]))).reduce(((e,t)=>e.concat(t)),[]).filter((e=>e)).reduce(((e,t)=>(Object.entries(t).forEach((t=>{let[n,i]=t;e[n]=i})),e)),{}))(n);Object.entries(r).forEach((e=>{let[n,i]=e;t(n,i)}))}},3838:(e,t,n)=>{"use strict";n.d(t,{s:()=>s});const i=e=>{let[t,n]=e;return{...n,name:t}},r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const t=e.match(/^(-?[0-9.]+)\s*(%?)$/);if(t){let e=parseFloat(t[1]);return"%"===t[2]&&(e/=100),e}return 0},a=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=`mol.ads.mvt.tests.${t.name}.probabilityDraw`,a=t.size||t.scenarios.reduce(((e,t)=>{let{size:n}=t;return e+r(String(n))}),0),s=o(Math.min(Math.max(0,r(String(a))),1));let d=Number(n[i]);return isNaN(d)&&(d=Math.random(),n[i]=d.toString()),d<s};function o(e){return Math.round(1e4*e)/1e4}function s(e,t){if(!n.g.adsMVTResults){const r={},s={},d=Object.entries(t).map(i).filter((e=>e.scenarios)).map((e=>({...e,scenarios:Object.entries(e.scenarios).map(i)}))),l=d.reduce(((t,n)=>{const i=n.scope||"page",d="page"===i?r:"session"===i?sessionStorage:localStorage,l=function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=`mol.ads.mvt.tests.${t.name}.selected`,s=i[r],d=t.scenarios.find((e=>e.name===s));if(a(e,t,i)){if(d)n=d;else{const a=t.scenarios.filter((e=>{let{size:t}=e;return t}));if(t.scenarios.length===a.length){const e=Math.random();let i=0;n=t.scenarios.find((t=>{let{size:n}=t;return i+=n,o(i)>e}))}else a.length&&e.warn(`Test "${t.name}" has some scenarios with size and some without, falling back to global scope size`),n=t.scenarios[Math.floor(Math.random()*t.scenarios.length)];i[r]=n.name}return n}}(e,n,d);return l?(s[n.name]=l.name,[...t,l]):t}),[]);n.g.adsMVTResults={pageStorage:r,selectedScenarios:s,scenarios:l,tests:d}}return n.g.adsMVTResults}},7134:(e,t,n)=>{"use strict";n.d(t,{d:()=>a});var i=n(6212),r=n(2423);function a(){let{getConfig:e=i.U2,setConfig:t=i.t8,log:n=(0,r.x)("reconfigureSlotsEnabled")}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=e("reconfigureSlotsEnabled",{remove:[]}).remove;if(n("slots to remove",a),a.length){const i=e("slots.enabled",{});for(const e of a)delete i[e];n("slots.enabled",i),t("slots.enabled",i)}}(0,n(168).fo)("reconfigureSlotsEnabled",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:a})},6079:(e,t,n)=>{"use strict";n.r(t),n.d(t,{allDescriptions:()=>c,get:()=>l,getById:()=>u});var i=n(1430),r=n(9347),a=n(4485);(0,n(168).fo)("slots.descriptions",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,init:function(e){let{getConfig:t,setConfig:n,log:i}=e;const a=Object.entries(t("slotDescription",{})).reduce(((e,n)=>{let[a,o]=n;const s=t(`slotDescription.${a}.earlyBidding`,!0);return o.conditionalSizes&&(i("conditionalSizes found",a,o),function(e){var t,n;null!==(t=e.conditionalSizes)&&void 0!==t&&t.wideSkies&&null!==(n=e.conditionalSizes)&&void 0!==n&&n.sizes&&d&&(e.size=e.conditionalSizes.sizes)}(o)),{...e,[a]:["openweb","taboola","googleAdSense","amazon","widgets"].some((e=>{var t;return null==o||null===(t=o.slotTypes)||void 0===t?void 0:t.includes(e)}))?{id:a,pos:a,...o}:{type:(l=o.size,l.map((e=>{let[t,n]=e;return`${t}x${n}`})).join(",")),adUnit:(0,r.Z)(o.unit||a),pos:a,parentId:o.id,slots:[],slotTypes:["gpt"],earlyBidding:s,...o}};var l}),{});i("descriptionsFromSlotDescription",a),o={...o,...a},n("slotDescriptions.initial",o)},run:function(e){let{broker:t,getConfig:n}=e;o=n("slotDescriptions.initial"),t.on("update description",((e,n)=>{o[e]=n,t.emit("slot descriptions updated",o)})),t.emit("slot descriptions updated",o)}});let o={};const{width:s}=(0,i.ap)(),d=s>1580,l=e=>{const t=o[e];return t&&!t.pos&&(t.pos=e),t};function u(e){return(0,a.sE)(o,(t=>t.id===e))}const c=()=>o},6663:(e,t,n)=>{"use strict";n.d(t,{LK:()=>T,hd:()=>_,oP:()=>y});const i="mol.ads.cmp.tcf.cache",r=["getTCData","hasUserConsentedToAll","hasUserDissentedToAll","getPurposesByVendorMap","getConsentDegree","getValidTCData","consentedVendors","getNonRegisteredVendorsConsents","getStoredRepromptVersion"],a=location.search.match(/adsDebug=[^&]*tcfv2/)?function(){return console.info(...arguments)}:()=>{},o=[],s=window;let d=!1;function l(){const e=s.document;if(!s.frames.__tcfapiLocator)if("interactive"===e.readyState||"complete"===e.readyState){const t=e.createElement("iframe");t.style.display="none",t.name="__tcfapiLocator",e.body.appendChild(t),d&&(e.removeEventListener("readystatechange",l),d=!1)}else"function"==typeof e.addEventListener?(e.addEventListener("readystatechange",l),d=!0):setTimeout(l,5)}a("creating");const u=localStorage.getItem(i);let c={};u&&(c=JSON.parse(u));let p=0;const h={},f=(e,t)=>{const n=c.getTCData,i=p++;a("adding provisional listener:",i),h[i]={},o.push(["addEventListener",2,(e,n)=>{const r=e.listenerId;h[i]?(h[i].realListenerId=r,h[i].listenerId=r,t({...e,listenerId:i},n)):a("ignoring event coz already removed listener:",{listenerId:i,realListenerId:r})}]),n&&t({...n,listenerId:i,eventStatus:"tcloaded",cached:!0},!0)},g=(e,t)=>{const n=e[3];a("removing provisional listener:",n);const i=h[n];if(!i)return a("unknown listener:",n),void t(!1);const r=i.realListenerId;delete h[n],r&&o.push(["removeEventListener",2,e=>t(e),r]),t(!0)};function m(){let e;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(!n.length)return o;const s=n[2],d=n[0];switch(d){case"setGdprApplies":n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof s&&s("set",!0));break;case"ping":"function"==typeof s&&s({gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"});break;default:if(r.length){if("addEventListener"===d)return f(0,s);if("removeEventListener"===d)return g(n,s)}if(~r.indexOf(d)){n[3]&&a("cache method called with argument:",n[3]);const e=c[d];if(void 0!==e)return a("returning cached value for",d),void s(e,!0)}a("queueing",d),o.push(n)}}function v(e){const t=e&&e.source;if(!t||"function"!=typeof t.postMessage)return void(t&&"function"!=typeof t.postMessage&&a("Message event.source.postMessage is not a function, bailing"));const n="string"==typeof e.data;let i=e.data;if(n)try{i=JSON.parse(e.data)}catch(e){return}if("object"==typeof i&&i.__tcfapiCall){const e=i.__tcfapiCall;window.__tcfapi(e.command,e.version,((i,r)=>{const a={__tcfapiReturn:{returnValue:i,success:r,callId:e.callId}};t.postMessage(n?JSON.stringify(a):a,"*")}),e.parameter)}}function y(){n.g.adverts.tcfv2Installed||(n.g.adverts.tcfv2Installed=!0,l(),s.__tcfapi=m,s.addEventListener("message",v,!1),n.g.adverts.updateCache=b)}async function b(e,t){if(e.tcString.length){const e=r.map((e=>new Promise((r=>{n.g.__tcfapi(e,2,((n,a)=>{if(t("caching",e),a){const t=JSON.parse(localStorage.getItem(i))||{};t[e]=n,localStorage.setItem(i,JSON.stringify(t))}else t("error caching method:",e);r()}))}))));await Promise.all(e)}}const _=()=>!!localStorage.getItem(i);function T(){localStorage.removeItem(i)}},7861:(e,t,n)=>{"use strict";n.d(t,{B:()=>i});const i=Date.now()},500:(e,t,n)=>{"use strict";const i=n(6666),r=n(9258),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=d,t.SlowBuffer=function(e){return+e!=e&&(e=0),d.alloc(+e)},t.INSPECT_MAX_BYTES=50;const o=2147483647;function s(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,d.prototype),t}function d(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,n)}function l(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!d.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|g(e,t);let i=s(n);const r=i.write(e,t);return r!==n&&(i=i.slice(0,r)),i}(e,t);if(ArrayBuffer.isView(e))return function(e){if(X(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return p(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(X(e,ArrayBuffer)||e&&X(e.buffer,ArrayBuffer))return h(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(X(e,SharedArrayBuffer)||e&&X(e.buffer,SharedArrayBuffer)))return h(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const i=e.valueOf&&e.valueOf();if(null!=i&&i!==e)return d.from(i,t,n);const r=function(e){if(d.isBuffer(e)){const t=0|f(e.length),n=s(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?s(0):p(e):"Buffer"===e.type&&Array.isArray(e.data)?p(e.data):void 0}(e);if(r)return r;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return d.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),s(e<0?0:0|f(e))}function p(e){const t=e.length<0?0:0|f(e.length),n=s(t);for(let i=0;i<t;i+=1)n[i]=255&e[i];return n}function h(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let i;return i=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(i,d.prototype),i}function f(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function g(e,t){if(d.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||X(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;let r=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return i?-1:$(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){let i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return x(this,t,n);case"utf8":case"utf-8":return C(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return P(this,t,n);case"base64":return I(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function v(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function y(e,t,n,i,r){if(0===e.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=r?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(r)return-1;n=e.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof t&&(t=d.from(t,i)),d.isBuffer(t))return 0===t.length?-1:b(e,t,n,i,r);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,i,r);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,i,r){let a,o=1,s=e.length,d=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;o=2,s/=2,d/=2,n/=2}function l(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(r){let i=-1;for(a=n;a<s;a++)if(l(e,a)===l(t,-1===i?0:a-i)){if(-1===i&&(i=a),a-i+1===d)return i*o}else-1!==i&&(a-=a-i),i=-1}else for(n+d>s&&(n=s-d),a=n;a>=0;a--){let n=!0;for(let i=0;i<d;i++)if(l(e,a+i)!==l(t,i)){n=!1;break}if(n)return a}return-1}function _(e,t,n,i){n=Number(n)||0;const r=e.length-n;i?(i=Number(i))>r&&(i=r):i=r;const a=t.length;let o;for(i>a/2&&(i=a/2),o=0;o<i;++o){const i=parseInt(t.substr(2*o,2),16);if(Z(i))return o;e[n+o]=i}return o}function T(e,t,n,i){return K($(t,e.length-n),e,n,i)}function w(e,t,n,i){return K(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,i)}function S(e,t,n,i){return K(G(t),e,n,i)}function k(e,t,n,i){return K(function(e,t){let n,i,r;const a=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),i=n>>8,r=n%256,a.push(r),a.push(i);return a}(t,e.length-n),e,n,i)}function I(e,t,n){return 0===t&&n===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,n))}function C(e,t,n){n=Math.min(e.length,n);const i=[];let r=t;for(;r<n;){const t=e[r];let a=null,o=t>239?4:t>223?3:t>191?2:1;if(r+o<=n){let n,i,s,d;switch(o){case 1:t<128&&(a=t);break;case 2:n=e[r+1],128==(192&n)&&(d=(31&t)<<6|63&n,d>127&&(a=d));break;case 3:n=e[r+1],i=e[r+2],128==(192&n)&&128==(192&i)&&(d=(15&t)<<12|(63&n)<<6|63&i,d>2047&&(d<55296||d>57343)&&(a=d));break;case 4:n=e[r+1],i=e[r+2],s=e[r+3],128==(192&n)&&128==(192&i)&&128==(192&s)&&(d=(15&t)<<18|(63&n)<<12|(63&i)<<6|63&s,d>65535&&d<1114112&&(a=d))}}null===a?(a=65533,o=1):a>65535&&(a-=65536,i.push(a>>>10&1023|55296),a=56320|1023&a),i.push(a),r+=o}return function(e){const t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);let n="",i=0;for(;i<t;)n+=String.fromCharCode.apply(String,e.slice(i,i+=E));return n}(i)}t.kMaxLength=o,d.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),d.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(d.prototype,"parent",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.buffer}}),Object.defineProperty(d.prototype,"offset",{enumerable:!0,get:function(){if(d.isBuffer(this))return this.byteOffset}}),d.poolSize=8192,d.from=function(e,t,n){return l(e,t,n)},Object.setPrototypeOf(d.prototype,Uint8Array.prototype),Object.setPrototypeOf(d,Uint8Array),d.alloc=function(e,t,n){return function(e,t,n){return u(e),e<=0?s(e):void 0!==t?"string"==typeof n?s(e).fill(t,n):s(e).fill(t):s(e)}(e,t,n)},d.allocUnsafe=function(e){return c(e)},d.allocUnsafeSlow=function(e){return c(e)},d.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==d.prototype},d.compare=function(e,t){if(X(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),X(t,Uint8Array)&&(t=d.from(t,t.offset,t.byteLength)),!d.isBuffer(e)||!d.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,i=t.length;for(let r=0,a=Math.min(n,i);r<a;++r)if(e[r]!==t[r]){n=e[r],i=t[r];break}return n<i?-1:i<n?1:0},d.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},d.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return d.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const i=d.allocUnsafe(t);let r=0;for(n=0;n<e.length;++n){let t=e[n];if(X(t,Uint8Array))r+t.length>i.length?(d.isBuffer(t)||(t=d.from(t)),t.copy(i,r)):Uint8Array.prototype.set.call(i,t,r);else{if(!d.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(i,r)}r+=t.length}return i},d.byteLength=g,d.prototype._isBuffer=!0,d.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)v(this,t,t+1);return this},d.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},d.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},d.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?C(this,0,e):m.apply(this,arguments)},d.prototype.toLocaleString=d.prototype.toString,d.prototype.equals=function(e){if(!d.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===d.compare(this,e)},d.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},a&&(d.prototype[a]=d.prototype.inspect),d.prototype.compare=function(e,t,n,i,r){if(X(e,Uint8Array)&&(e=d.from(e,e.offset,e.byteLength)),!d.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),t<0||n>e.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&t>=n)return 0;if(i>=r)return-1;if(t>=n)return 1;if(this===e)return 0;let a=(r>>>=0)-(i>>>=0),o=(n>>>=0)-(t>>>=0);const s=Math.min(a,o),l=this.slice(i,r),u=e.slice(t,n);for(let e=0;e<s;++e)if(l[e]!==u[e]){a=l[e],o=u[e];break}return a<o?-1:o<a?1:0},d.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},d.prototype.indexOf=function(e,t,n){return y(this,e,t,n,!0)},d.prototype.lastIndexOf=function(e,t,n){return y(this,e,t,n,!1)},d.prototype.write=function(e,t,n,i){if(void 0===t)i="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)i=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}const r=this.length-t;if((void 0===n||n>r)&&(n=r),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let a=!1;for(;;)switch(i){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return T(this,e,t,n);case"ascii":case"latin1":case"binary":return w(this,e,t,n);case"base64":return S(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const E=4096;function A(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(127&e[r]);return i}function P(e,t,n){let i="";n=Math.min(e.length,n);for(let r=t;r<n;++r)i+=String.fromCharCode(e[r]);return i}function x(e,t,n){const i=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>i)&&(n=i);let r="";for(let i=t;i<n;++i)r+=Y[e[i]];return r}function O(e,t,n){const i=e.slice(t,n);let r="";for(let e=0;e<i.length-1;e+=2)r+=String.fromCharCode(i[e]+256*i[e+1]);return r}function D(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,n,i,r,a){if(!d.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>r||t<a)throw new RangeError('"value" argument is out of bounds');if(n+i>e.length)throw new RangeError("Index out of range")}function L(e,t,n,i,r){V(t,i,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a,a>>=8,e[n++]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,o>>=8,e[n++]=o,n}function M(e,t,n,i,r){V(t,i,r,e,n,7);let a=Number(t&BigInt(4294967295));e[n+7]=a,a>>=8,e[n+6]=a,a>>=8,e[n+5]=a,a>>=8,e[n+4]=a;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=o,o>>=8,e[n+2]=o,o>>=8,e[n+1]=o,o>>=8,e[n]=o,n+8}function U(e,t,n,i,r,a){if(n+i>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function j(e,t,n,i,a){return t=+t,n>>>=0,a||U(e,0,n,4),r.write(e,t,n,i,23,4),n+4}function N(e,t,n,i,a){return t=+t,n>>>=0,a||U(e,0,n,8),r.write(e,t,n,i,52,8),n+8}d.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const i=this.subarray(e,t);return Object.setPrototypeOf(i,d.prototype),i},d.prototype.readUintLE=d.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let i=this[e],r=1,a=0;for(;++a<t&&(r*=256);)i+=this[e+a]*r;return i},d.prototype.readUintBE=d.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let i=this[e+--t],r=1;for(;t>0&&(r*=256);)i+=this[e+--t]*r;return i},d.prototype.readUint8=d.prototype.readUInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),this[e]},d.prototype.readUint16LE=d.prototype.readUInt16LE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]|this[e+1]<<8},d.prototype.readUint16BE=d.prototype.readUInt16BE=function(e,t){return e>>>=0,t||D(e,2,this.length),this[e]<<8|this[e+1]},d.prototype.readUint32LE=d.prototype.readUInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},d.prototype.readUint32BE=d.prototype.readUInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},d.prototype.readBigUInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,r=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(i)+(BigInt(r)<<BigInt(32))})),d.prototype.readBigUInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=t*2**24+65536*this[++e]+256*this[++e]+this[++e],r=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(i)<<BigInt(32))+BigInt(r)})),d.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let i=this[e],r=1,a=0;for(;++a<t&&(r*=256);)i+=this[e+a]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*t)),i},d.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||D(e,t,this.length);let i=t,r=1,a=this[e+--i];for(;i>0&&(r*=256);)a+=this[e+--i]*r;return r*=128,a>=r&&(a-=Math.pow(2,8*t)),a},d.prototype.readInt8=function(e,t){return e>>>=0,t||D(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},d.prototype.readInt16LE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt16BE=function(e,t){e>>>=0,t||D(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},d.prototype.readInt32LE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},d.prototype.readInt32BE=function(e,t){return e>>>=0,t||D(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},d.prototype.readBigInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),d.prototype.readBigInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const i=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),d.prototype.readFloatLE=function(e,t){return e>>>=0,t||D(e,4,this.length),r.read(this,e,!0,23,4)},d.prototype.readFloatBE=function(e,t){return e>>>=0,t||D(e,4,this.length),r.read(this,e,!1,23,4)},d.prototype.readDoubleLE=function(e,t){return e>>>=0,t||D(e,8,this.length),r.read(this,e,!0,52,8)},d.prototype.readDoubleBE=function(e,t){return e>>>=0,t||D(e,8,this.length),r.read(this,e,!1,52,8)},d.prototype.writeUintLE=d.prototype.writeUIntLE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);let r=1,a=0;for(this[t]=255&e;++a<n&&(r*=256);)this[t+a]=e/r&255;return t+n},d.prototype.writeUintBE=d.prototype.writeUIntBE=function(e,t,n,i){e=+e,t>>>=0,n>>>=0,i||R(this,e,t,n,Math.pow(2,8*n)-1,0);let r=n-1,a=1;for(this[t+r]=255&e;--r>=0&&(a*=256);)this[t+r]=e/a&255;return t+n},d.prototype.writeUint8=d.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,255,0),this[t]=255&e,t+1},d.prototype.writeUint16LE=d.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeUint16BE=d.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeUint32LE=d.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},d.prototype.writeUint32BE=d.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigUInt64LE=J((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return L(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeBigUInt64BE=J((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),d.prototype.writeIntLE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=0,a=1,o=0;for(this[t]=255&e;++r<n&&(a*=256);)e<0&&0===o&&0!==this[t+r-1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},d.prototype.writeIntBE=function(e,t,n,i){if(e=+e,t>>>=0,!i){const i=Math.pow(2,8*n-1);R(this,e,t,n,i-1,-i)}let r=n-1,a=1,o=0;for(this[t+r]=255&e;--r>=0&&(a*=256);)e<0&&0===o&&0!==this[t+r+1]&&(o=1),this[t+r]=(e/a>>0)-o&255;return t+n},d.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},d.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},d.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},d.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},d.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},d.prototype.writeBigInt64LE=J((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return L(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeBigInt64BE=J((function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),d.prototype.writeFloatLE=function(e,t,n){return j(this,e,t,!0,n)},d.prototype.writeFloatBE=function(e,t,n){return j(this,e,t,!1,n)},d.prototype.writeDoubleLE=function(e,t,n){return N(this,e,t,!0,n)},d.prototype.writeDoubleBE=function(e,t,n){return N(this,e,t,!1,n)},d.prototype.copy=function(e,t,n,i){if(!d.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-n&&(i=e.length-t+n);const r=i-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),t),r},d.prototype.fill=function(e,t,n,i){if("string"==typeof e){if("string"==typeof t?(i=t,t=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!d.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===e.length){const t=e.charCodeAt(0);("utf8"===i&&t<128||"latin1"===i)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let r;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(r=t;r<n;++r)this[r]=e;else{const a=d.isBuffer(e)?e:d.from(e,i),o=a.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(r=0;r<n-t;++r)this[r+t]=a[r%o]}return this};const B={};function F(e,t,n){B[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",n=e.length;const i="-"===e[0]?1:0;for(;n>=i+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function V(e,t,n,i,r,a){if(e>n||e<t){const i="bigint"==typeof t?"n":"";let r;throw r=a>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${8*(a+1)}${i}`:`>= -(2${i} ** ${8*(a+1)-1}${i}) and < 2 ** ${8*(a+1)-1}${i}`:`>= ${t}${i} and <= ${n}${i}`,new B.ERR_OUT_OF_RANGE("value",r,e)}!function(e,t,n){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||z(t,e.length-(n+1))}(i,r,a)}function H(e,t){if("number"!=typeof e)throw new B.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,n){if(Math.floor(e)!==e)throw H(e,n),new B.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new B.ERR_BUFFER_OUT_OF_BOUNDS;throw new B.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,n){let i=`The value of "${e}" is out of range.`,r=n;return Number.isInteger(n)&&Math.abs(n)>2**32?r=q(String(n)):"bigint"==typeof n&&(r=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(r=q(r)),r+="n"),i+=` It must be ${t}. Received ${r}`,i}),RangeError);const W=/[^+/0-9A-Za-z-_]/g;function $(e,t){let n;t=t||1/0;const i=e.length;let r=null;const a=[];for(let o=0;o<i;++o){if(n=e.charCodeAt(o),n>55295&&n<57344){if(!r){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===i){(t-=3)>-1&&a.push(239,191,189);continue}r=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(t-=3)>-1&&a.push(239,191,189);if(r=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function G(e){return i.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(W,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,n,i){let r;for(r=0;r<i&&!(r+n>=t.length||r>=e.length);++r)t[r+n]=e[r];return r}function X(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const i=16*n;for(let r=0;r<16;++r)t[i+r]=e[n]+e[r]}return t}();function J(e){return"undefined"==typeof BigInt?Q:e}function Q(){throw new Error("BigInt not supported")}},1921:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";var _src_utils_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4880),_src_utils_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5446),_src_adloader_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(8838),_src_adapters_bidderFactory_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(8393),_src_config_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(753),_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(3794),_src_polyfill_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6222),criteo_direct_rsa_validate_build_verify_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4651),_src_storageManager_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4447);function _extends(){return _extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_extends.apply(this,arguments)}var GVLID=91,ADAPTER_VERSION=34,BIDDER_CODE="criteo",CDB_ENDPOINT="https://bidder.criteo.com/cdb",PROFILE_ID_INLINE=207,PROFILE_ID_PUBLISHERTAG=185,storage=(0,_src_storageManager_js__WEBPACK_IMPORTED_MODULE_1__.df)({gvlid:GVLID,bidderCode:BIDDER_CODE}),LOG_PREFIX="Criteo: ",FAST_BID_VERSION_PLACEHOLDER="%FAST_BID_VERSION%",FAST_BID_VERSION_CURRENT=117,FAST_BID_VERSION_LATEST="latest",FAST_BID_VERSION_NONE="none",PUBLISHER_TAG_URL_TEMPLATE="https://static.criteo.net/js/ld/publishertag.prebid"+FAST_BID_VERSION_PLACEHOLDER+".js",FAST_BID_PUBKEY_E=65537,FAST_BID_PUBKEY_N="ztQYwCE5BU7T9CDM5he6rKoabstXRmkzx54zFPZkWbK530dwtLBDeaWBMxHBUT55CYyboR/EZ4efghPi3CoNGfGWezpjko9P6p2EwGArtHEeS4slhu/SpSIFMjG6fdrpRoNuIAMhq1Z+Pr/+HOd1pThFKeGFr2/NhtAg+TXAzaU=",spec={code:BIDDER_CODE,gvlid:GVLID,supportedMediaTypes:[_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.Mk,_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX,_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5],isBidRequestValid:function(e){return!(!e||!e.params||!e.params.zoneId&&!e.params.networkId||hasVideoMediaType(e)&&!hasValidVideoMediaType(e))},buildRequests:function(e,t){var n,i,r,a,o=_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("ortb2")||{};_extends(t,{publisherExt:null===(n=o.site)||void 0===n?void 0:n.ext,userExt:null===(i=o.user)||void 0===i?void 0:i.ext,ceh:_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.ceh")});var s=_src_config_js__WEBPACK_IMPORTED_MODULE_3__.vc.getConfig("criteo.fastBidVersion"),d=canFastBid(s);if(!publisherTagAvailable()&&d){window.Criteo=window.Criteo||{},window.Criteo.usePrebidEvents=!1,tryGetCriteoFastBid();var l=getFastBidUrl(s);setTimeout((function(){(0,_src_adloader_js__WEBPACK_IMPORTED_MODULE_4__.B)(l,BIDDER_CODE)}),t.timeout)}if(publisherTagAvailable()){var u=new Criteo.PubTag.Adapters.Prebid(PROFILE_ID_PUBLISHERTAG,ADAPTER_VERSION,e,t,"6.24.1");r=u.buildCdbUrl(),a=u.buildCdbRequest()}else{var c=buildContext(e,t);r=buildCdbUrl(c),a=buildCdbRequest(c,e,t)}if(a)return{method:"POST",url:r,data:a,bidRequests:e}},interpretResponse:function(e,t){var n=e.body||e;if(publisherTagAvailable()){var i=Criteo.PubTag.Adapters.Prebid.GetAdapter(t);if(i)return i.interpretResponse(n,t)}var r=[];return n&&n.slots&&(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.kJ)(n.slots)&&n.slots.forEach((function(i){var a,o,s,d,l=(0,_src_polyfill_js__WEBPACK_IMPORTED_MODULE_6__.sE)(t.bidRequests,(function(e){return e.adUnitCode===i.impid&&(!e.params.zoneId||parseInt(e.params.zoneId)===i.zoneid)})),u=l.bidId,c={requestId:u,adId:i.bidId||(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__._d)(),cpm:i.cpm,currency:i.currency,netRevenue:!0,ttl:i.ttl||60,creativeId:i.creativecode,width:i.width,height:i.height,dealId:i.dealCode};if(null!==(a=n.ext)&&void 0!==a&&null!==(o=a.paf)&&void 0!==o&&o.transmission&&null!==(s=i.ext)&&void 0!==s&&null!==(d=s.paf)&&void 0!==d&&d.content_id){var p={content_id:i.ext.paf.content_id,transmission:e.ext.paf.transmission};c.meta=_extends({},c.meta,{paf:p})}i.adomain&&(c.meta=_extends({},c.meta,{advertiserDomains:i.adomain})),i.native?l.params.nativeCallback?c.ad=createNativeAd(u,i.native,l.params.nativeCallback):(c.native=createPrebidNativeAd(i.native),c.mediaType=_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5):i.video?(c.vastUrl=i.displayurl,c.mediaType=_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.pX):c.ad=i.creative,r.push(c)})),r},onTimeout:function(e){if(publisherTagAvailable()&&Array.isArray(e)){var t=[];e.forEach((function(e){-1===t.indexOf(e.auctionId)&&(t.push(e.auctionId),Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidTimeout())}))}},onBidWon:function(e){publisherTagAvailable()&&e&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleBidWon(e)},onSetTargeting:function(e){publisherTagAvailable()&&Criteo.PubTag.Adapters.Prebid.GetAdapter(e.auctionId).handleSetTargeting(e)}};function publisherTagAvailable(){return"undefined"!=typeof Criteo&&Criteo.PubTag&&Criteo.PubTag.Adapters&&Criteo.PubTag.Adapters.Prebid}function buildContext(e,t){var n="";t&&t.refererInfo&&(n=t.refererInfo.referer);var i=(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.en)(n).search,r={url:n,debug:"1"===i.pbt_debug,noLog:"1"===i.pbt_nolog,amp:!1};return e.forEach((function(e){"amp"===e.params.integrationMode&&(r.amp=!0)})),r}function buildCdbUrl(e){var t=CDB_ENDPOINT;return t+="?profileId="+PROFILE_ID_INLINE,t+="&av="+String(ADAPTER_VERSION),t+="&wv="+encodeURIComponent("6.24.1"),t+="&cb="+String(Math.floor(99999999999*Math.random())),e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1"),t}function checkNativeSendId(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}function buildCdbRequest(e,t,n){var i,r,a={publisher:{url:e.url,ext:n.publisherExt},slots:t.map((function(e){i=e.params.networkId||i,r=e.schain||r;var t={impid:e.adUnitCode,transactionid:e.transactionId,auctionId:e.auctionId};if(e.params.zoneId&&(t.zoneid=e.params.zoneId),(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"ortb2Imp.ext")&&(t.ext=e.ortb2Imp.ext),e.params.ext&&(t.ext=_extends({},t.ext,e.params.ext)),e.params.publisherSubId&&(t.publishersubid=e.params.publisherSubId),e.params.nativeCallback||(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"mediaTypes.".concat(_src_mediaTypes_js__WEBPACK_IMPORTED_MODULE_2__.B5))?(t.native=!0,checkNativeSendId(e)||(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.yN)(LOG_PREFIX+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)"),t.sizes=parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"mediaTypes.banner.sizes"),parseNativeSize)):t.sizes=parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"mediaTypes.banner.sizes"),parseSize),hasVideoMediaType(e)){var n={playersizes:parseSizes((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"mediaTypes.video.playerSize"),parseSize),mimes:e.mediaTypes.video.mimes,protocols:e.mediaTypes.video.protocols,maxduration:e.mediaTypes.video.maxduration,api:e.mediaTypes.video.api,skip:e.mediaTypes.video.skip,placement:e.mediaTypes.video.placement,minduration:e.mediaTypes.video.minduration,playbackmethod:e.mediaTypes.video.playbackmethod,startdelay:e.mediaTypes.video.startdelay},a=e.params.video;void 0!==a&&(n.skip=n.skip||a.skip||0,n.placement=n.placement||a.placement,n.minduration=n.minduration||a.minduration,n.playbackmethod=n.playbackmethod||a.playbackmethod,n.startdelay=n.startdelay||a.startdelay||0),t.video=n}return t}))};return i&&(a.publisher.networkid=i),r&&(a.source={ext:{schain:r}}),a.user={ext:n.userExt},n&&n.ceh&&(a.user.ceh=n.ceh),n&&n.gdprConsent&&(a.gdprConsent={},void 0!==n.gdprConsent.gdprApplies&&(a.gdprConsent.gdprApplies=!!n.gdprConsent.gdprApplies),a.gdprConsent.version=n.gdprConsent.apiVersion,void 0!==n.gdprConsent.consentString&&(a.gdprConsent.consentData=n.gdprConsent.consentString)),n&&n.uspConsent&&(a.user.uspIab=n.uspConsent),a}function parseSizes(e,t){return null==e?[]:Array.isArray(e[0])?e.map((function(e){return t(e)})):[t(e)]}function parseSize(e){return e[0]+"x"+e[1]}function parseNativeSize(e){return void 0===e[0]&&void 0===e[1]?"2x2":e[0]+"x"+e[1]}function hasVideoMediaType(e){return void 0!==(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"mediaTypes.video")}function hasValidVideoMediaType(e){var t=!0;if(["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach((function(n){void 0===(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"mediaTypes.video."+n)&&void 0===(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_7__.Z)(e,"params.video."+n)&&(t=!1,(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.H)("Criteo Bid Adapter: mediaTypes.video."+n+" is required"))})),t){var n=e.mediaTypes.video.placement||e.params.video.placement;if("instream"==e.mediaTypes.video.context&&1===n)return!0;if("outstream"==e.mediaTypes.video.context&&1!==n)return!0}return!1}function createPrebidNativeAd(e){return{sendTargetingKeys:!1,title:e.products[0].title,body:e.products[0].description,sponsoredBy:e.advertiser.description,icon:e.advertiser.logo,image:e.products[0].image,clickUrl:e.products[0].click_url,privacyLink:e.privacy.optout_click_url,privacyIcon:e.privacy.optout_image_url,cta:e.products[0].call_to_action,price:e.products[0].price,impressionTrackers:e.impression_pixels.map((function(e){return e.url}))}}function createNativeAd(e,t,n){var i="criteo_prebid_native_slots";return window[i]=window[i]||{},window[i][e]={callback:n,payload:t},'\n<script type="text/javascript">\nfor (var i = 0; i < 10; ++i) {\n var slots = window.parent.'.concat(i,';\n  if(!slots){continue;}\n  var responseSlot = slots["').concat(e,'"];\n  responseSlot.callback(responseSlot.payload);\n  break;\n}\n<\/script>')}function canFastBid(e){return e!==FAST_BID_VERSION_NONE}function getFastBidUrl(e){var t;return e===FAST_BID_VERSION_LATEST?t="":e?(String(e).split(".")[0]<102&&(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.yN)("Specifying a Fastbid version which is not supporting version selection."),t="."+e):t="."+FAST_BID_VERSION_CURRENT,PUBLISHER_TAG_URL_TEMPLATE.replace(FAST_BID_VERSION_PLACEHOLDER,t)}function tryGetCriteoFastBid(){try{var fastBidStorageKey="criteo_fast_bid",hashPrefix="// Hash: ",fastBidFromStorage=storage.getDataFromLocalStorage(fastBidStorageKey);if(null!==fastBidFromStorage){var firstLineEndPosition=fastBidFromStorage.indexOf("\n"),firstLine=fastBidFromStorage.substr(0,firstLineEndPosition).trim();if(firstLine.substr(0,hashPrefix.length)!==hashPrefix)(0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.yN)("No hash found in FastBid"),storage.removeDataFromLocalStorage(fastBidStorageKey);else{var publisherTagHash=firstLine.substr(hashPrefix.length),publisherTag=fastBidFromStorage.substr(firstLineEndPosition+1);(0,criteo_direct_rsa_validate_build_verify_js__WEBPACK_IMPORTED_MODULE_0__.T)(publisherTag,publisherTagHash,FAST_BID_PUBKEY_N,FAST_BID_PUBKEY_E)?((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.PN)("Using Criteo FastBid"),eval(publisherTag)):((0,_src_utils_js__WEBPACK_IMPORTED_MODULE_5__.yN)("Invalid Criteo FastBid found"),storage.removeDataFromLocalStorage(fastBidStorageKey))}}}catch(e){}}(0,_src_adapters_bidderFactory_js__WEBPACK_IMPORTED_MODULE_8__.dX)(spec),window.pbjs.installedModules.push("criteoBidAdapter")},7730:(e,t,n)=>{"use strict";n.d(t,{Pd:()=>l,Th:()=>d,_U:()=>u});var i=n(8838),r=n(4880),a=n(5446),o=n(6222),s="outstream";function d(e){var t=this,n=e.url,a=e.config,o=e.id,d=e.callback,l=e.loaded,u=e.adUnitCode;this.url=n,this.config=a,this.handlers={},this.id=o,this.loaded=l,this.cmd=[],this.push=function(e){"function"==typeof e?t.loaded?e.call():t.cmd.push(e):(0,r.H)("Commands given to Renderer.push must be wrapped in a function")},this.callback=d||function(){t.loaded=!0,t.process()},this.render=function(){var e=this,t=arguments,a=function(){e._render?e._render.apply(e,t):(0,r.yN)("No render function was provided, please use .setRender on the renderer")};c(u)?((0,r.yN)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(u)),a()):(this.cmd.unshift(a),(0,i.B)(n,s,this.callback,this.documentContext))}.bind(this)}function l(e){return!(!e||!e.url)}function u(e,t,n){var i=null;e.config&&e.config.documentResolver&&(i=e.config.documentResolver(t,document,n)),i||(i=document),e.documentContext=i,e.render(t,e.documentContext)}function c(e){var t=pbjs.adUnits,n=(0,o.sE)(t,(function(t){return t.code===e}));if(!n)return!1;var i=(0,a.Z)(n,"renderer"),r=!!(i&&i.url&&i.render),s=(0,a.Z)(n,"mediaTypes.video.renderer"),d=!!(s&&s.url&&s.render);return!!(r&&!0!==i.backupOnly||d&&!0!==s.backupOnly)}d.install=function(e){return new d({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode})},d.prototype.getConfig=function(){return this.config},d.prototype.setRender=function(e){this._render=e},d.prototype.setEventHandlers=function(e){this.handlers=e},d.prototype.handleVideoEvent=function(e){var t=e.id,n=e.eventName;"function"==typeof this.handlers[n]&&this.handlers[n](),(0,r.ji)("Prebid Renderer event for id ".concat(t," type ").concat(n))},d.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,r.H)("Error processing Renderer command: ",e)}}},3083:(e,t,n)=>{"use strict";n.d(t,{f:()=>o});var i=n(5446),r={};function a(e,t,n){var i=function(e,t){var n=r[e]=r[e]||{bidders:{}};return t?n.bidders[t]=n.bidders[t]||{}:n}(e,n);return i[t]=(i[t]||0)+1,i[t]}var o={incrementRequestsCounter:function(e){return a(e,"requestsCounter")},incrementBidderRequestsCounter:function(e,t){return a(e,"requestsCounter",t)},incrementBidderWinsCounter:function(e,t){return a(e,"winsCounter",t)},getRequestsCounter:function(e){return(0,i.Z)(r,"".concat(e,".requestsCounter"))||0},getBidderRequestsCounter:function(e,t){return(0,i.Z)(r,"".concat(e,".bidders.").concat(t,".requestsCounter"))||0},getBidderWinsCounter:function(e,t){return(0,i.Z)(r,"".concat(e,".bidders.").concat(t,".winsCounter"))||0}}},2435:(e,t,n)=>{"use strict";function i(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}n.d(t,{Z:()=>i})},9584:(e,t,n)=>{"use strict";n.d(t,{VP:()=>Q,ZP:()=>re,rp:()=>Y,uV:()=>te,nX:()=>J});var i=n(4880),r=n(5446),a=n(9994),o=n(4018),s=n(8393),d=n(9287),l=n(753),u=n(7273),c=n(6222),p=n(3083),h=n(4611);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=b(e);if(t){var r=b(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function w(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function S(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function k(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,C(e,t,"get"))}function I(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,C(e,t,"set"),n),n}function C(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var E=new WeakMap,A=new WeakMap,P=new WeakMap,x=new WeakMap,O=new WeakMap,D=function(){function e(){var t,n;_(this,e),S(this,E,{writable:!0,value:void 0}),S(this,A,{writable:!0,value:void 0}),S(this,P,{writable:!0,value:void 0}),S(this,x,{writable:!0,value:void 0}),S(this,O,{writable:!0,value:void 0}),n=void 0,(t="generatedTime")in this?Object.defineProperty(this,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):this[t]=n,this.reset()}return w(e,[{key:"reset",value:function(){var e=this;I(this,P,new Promise((function(t){I(e,x,(function(n){I(e,O,!0),I(e,A,n),t(n)}))}))),I(this,E,!1),I(this,A,null),I(this,O,!1),this.generatedTime=null}},{key:"enable",value:function(){I(this,E,!0)}},{key:"enabled",get:function(){return k(this,E)}},{key:"ready",get:function(){return k(this,O)}},{key:"promise",get:function(){return k(this,O)?Promise.resolve(k(this,A)):(k(this,E)||k(this,x).call(this,null),k(this,P))}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,i.AB)();this.generatedTime=t,k(this,x).call(this,e)}},{key:"getConsentData",value:function(){return k(this,A)}}]),e}(),R=function(e){g(n,e);var t=v(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&this.generatedTime)return{usp:e,generatedAt:this.generatedTime}}}]),n}(D),L=function(e){g(n,e);var t=v(n);function n(){return _(this,n),t.apply(this,arguments)}return w(n,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,i.d8)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}]),n}(D),M=n(6959),U=n(7926);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},q.apply(this,arguments)}var V="client",H="server",z={},W=z.bidderRegistry={},$=z.aliasRegistry={},G=[];l.vc.getConfig("s2sConfig",(function(e){e&&e.s2sConfig&&(G=(0,i.kJ)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])}));var K={},X=(0,u.z3)("sync",(function(e){var t=e.bidderCode,n=e.auctionId,a=e.bidderRequestId,o=e.adUnits,s=e.src;return o.reduce((function(e,o){return e.push(o.bids.filter((function(e){return e.bidder===t})).reduce((function(e,t){var d=null==(t=q({},t,(0,i.iG)(o,["nativeParams","ortb2Imp","mediaType","renderer","storedAuctionResponse"]))).mediaTypes?o.mediaTypes:t.mediaTypes;return(0,i.FS)(d)?t=q({},t,{mediaTypes:d}):(0,i.H)("mediaTypes is not correctly configured for adunit ".concat(o.code)),e.push(q({},t,{adUnitCode:o.code,transactionId:o.transactionId,sizes:(0,r.Z)(d,"banner.sizes")||(0,r.Z)(d,"video.playerSize")||[],bidId:t.bid_id||(0,i._d)(),bidderRequestId:a,auctionId:n,src:s,bidRequestsCount:p.f.getRequestsCounter(o.code),bidderRequestsCount:p.f.getBidderRequestsCounter(o.code,t.bidder),bidderWinsCount:p.f.getBidderWinsCounter(o.code,t.bidder)})),e}),[])),e}),[]).reduce(i.xH,[]).filter((function(e){return""!==e}))}),"getBids"),Z=(0,u.z3)("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.getS2SBidders,r=void 0===i?te:i;if(null==t)return e;var a=r(t);return e.filter((function(e){return a.has(e.bidder)}))}),"filterBidsForAdUnit"),Y=new L,J=new R,Q={getCoppa:function(){return!!l.vc.getConfig("coppa")}},ee=(0,u.z3)("sync",(function(e,t){return(0,a.UB)(e,t)}),"setupAdUnitMediaTypes");function te(e){(0,i.kJ)(e)||(e=[e]);var t=new Set([null]);return e.filter((function(e){return e&&e.enabled})).flatMap((function(e){return e.bidders})).forEach((function(e){return t.add(e)})),t}var ne=(0,u.z3)("sync",(function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=r.getS2SBidders,o=void 0===a?te:a,s=o(t);return(0,i.pP)(e).reduce((function(e,t){return e[s.has(t)?H:V].push(t),e}),(F(n={},V,[]),F(n,H,[]),n))}),"partitionBidders");function ie(e,t,n){try{var r=W[e].getSpec();r&&r[t]&&"function"==typeof r[t]&&((0,i.PN)("Invoking ".concat(e,".").concat(t)),l.vc.runWithBidder(e,i.ak.call(r[t],r,n)))}catch(n){(0,i.yN)("Error calling ".concat(t," of ").concat(e))}}z.makeBidRequests=(0,u.z3)("sync",(function(e,t,n,r,a){M.j8(U.FP.BEFORE_REQUEST_BIDS,e),(0,o.Fb)(e),e=ee(e,a);var s=ne(e,G),d=s.client,u=s.server;l.vc.getConfig("bidderSequence")===l.FD&&(d=(0,i.TV)(d));var p=(0,h.n)(),f=[];G.forEach((function(r){if(r&&r.enabled){var a=function(e,t){var n=(0,i.I8)(e);return n.forEach((function(e){e.bids=Z(e.bids,t).map((function(e){return e.bid_id=(0,i._d)(),e}))})),n.filter((function(e){return 0!==e.bids.length}))}(e,r),o=(0,i.DO)();u.forEach((function(e){var s=(0,i._d)(),d={bidderCode:e,auctionId:n,bidderRequestId:s,uniquePbsTid:o,bids:X({bidderCode:e,auctionId:n,bidderRequestId:s,adUnits:(0,i.I8)(a),src:U.os.YZ}),auctionStart:t,timeout:r.timeout,src:U.os.YZ,refererInfo:p};0!==d.bids.length&&f.push(d)})),a.forEach((function(e){var t=e.bids.filter((function(e){return(0,c.sE)(f,(function(t){return(0,c.sE)(t.bids,(function(t){return t.bidId===e.bid_id}))}))}));e.bids=t})),f.forEach((function(e){void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=a.filter((function(e){return e.bids.length>0})))}))}}));var g=function(e){var t=(0,i.I8)(e);return t.forEach((function(e){e.bids=Z(e.bids,null)})),t.filter((function(e){return 0!==e.bids.length}))}(e);return d.forEach((function(e){var o=(0,i._d)(),s={bidderCode:e,auctionId:n,bidderRequestId:o,bids:X({bidderCode:e,auctionId:n,bidderRequestId:o,adUnits:(0,i.I8)(g),labels:a,src:"client"}),auctionStart:t,timeout:r,refererInfo:p},d=W[e];d||(0,i.H)("Trying to make a request for bidder that does not exist: ".concat(e)),d&&s.bids&&0!==s.bids.length&&f.push(s)})),Y.getConsentData()&&f.forEach((function(e){e.gdprConsent=Y.getConsentData()})),J.getConsentData()&&f.forEach((function(e){e.uspConsent=J.getConsentData()})),f}),"makeBidRequests"),z.callBids=function(e,t,n,r,a,o,s){if(t.length){var u=(m=t.reduce((function(e,t){return e[Number(void 0!==t.src&&t.src===U.os.YZ)].push(t),e}),[[],[]]),v=2,function(e){if(Array.isArray(e))return e}(m)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(m,v)||function(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}(m,v)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=u[0],p=u[1],h=[];p.forEach((function(e){for(var t=-1,n=0;n<h.length;++n)if(e.uniquePbsTid===h[n].uniquePbsTid){t=n;break}t<=-1&&h.push(e)}));var f=0,g=(0,i.DO)();G.forEach((function(e){if(e&&h[f]&&te(e).has(h[f].bidderCode)){var t=(0,d.O)(o,a?{request:a.request.bind(null,"s2s"),done:a.done}:void 0),s=e.bidders,l=W[e.adapter],u=h[f].uniquePbsTid,c=h[f].adUnitsS2SCopy,m=p.filter((function(e){return e.uniquePbsTid===u}));if(l){var v={tid:g,ad_units:c,s2sConfig:e};if(v.ad_units.length){var y=m.map((function(e){return e.start=(0,i.AB)(),r.bind(e)})),b=(0,i.pP)(v.ad_units).filter((function(e){return s.includes(e)}));(0,i.ji)("CALLING S2S HEADER BIDDERS ==== ".concat(b.length>0?b.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),m.forEach((function(e){M.j8(U.FP.BID_REQUESTED,N(N({},e),{},{tid:g}))})),l.callBids(v,p,n,(function(){return y.forEach((function(e){return e()}))}),t)}}else(0,i.H)("missing "+e.adapter);f++}})),c.forEach((function(e){e.start=(0,i.AB)();var t=W[e.bidderCode];l.vc.runWithBidder(e.bidderCode,(function(){(0,i.ji)("CALLING BIDDER"),M.j8(U.FP.BID_REQUESTED,e)}));var u=(0,d.O)(o,a?{request:a.request.bind(null,e.bidderCode),done:a.done}:void 0),c=r.bind(e);try{l.vc.runWithBidder(e.bidderCode,i.ak.call(t.callBids,t,e,n,c,u,s,l.vc.callbackWithBidder(e.bidderCode)))}catch(t){(0,i.H)("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),c()}}))}else(0,i.yN)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");var m,v},z.videoAdapters=[],z.registerBidAdapter=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.supportedMediaTypes,a=void 0===r?[]:r;e&&t?"function"==typeof e.callBids?(W[t]=e,(0,c.q9)(a,"video")&&z.videoAdapters.push(t),(0,c.q9)(a,"native")&&o.Sg.push(t)):(0,i.H)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,i.H)("bidAdapter or bidderCode not specified")},z.aliasBidAdapter=function(e,t,n){if(void 0===W[t]){var r=W[e];if(void 0===r){var a=[];G.forEach((function(n){if(n.bidders&&n.bidders.length){var i=n&&n.bidders;n&&(0,c.q9)(i,t)?$[t]=e:a.push(e)}})),a.forEach((function(e){(0,i.H)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")}))}else try{var d,l=function(e){var t=[];return(0,c.q9)(z.videoAdapters,e)&&t.push("video"),(0,c.q9)(o.Sg,e)&&t.push("native"),t}(e);if(r.constructor.prototype!=Object.prototype)(d=new r.constructor).setBidderCode(t);else{var u=r.getSpec(),p=n&&n.gvlid,h=n&&n.skipPbsAliasing;d=(0,s.PZ)(q({},u,{code:t,gvlid:p,skipPbsAliasing:h})),$[t]=e}z.registerBidAdapter(d,t,{supportedMediaTypes:l})}catch(t){(0,i.H)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,i.ji)('alias name "'+t+'" has been already specified.')},z.registerAnalyticsAdapter=function(e){var t=e.adapter,n=e.code,r=e.gvlid;t&&n?"function"==typeof t.enableAnalytics?(t.code=n,K[n]={adapter:t,gvlid:r}):(0,i.H)('Prebid Error: Analytics adaptor error for analytics "'.concat(n,'"\n        analytics adapter must implement an enableAnalytics() function')):(0,i.H)("Prebid Error: analyticsAdapter or analyticsCode not specified")},z.enableAnalytics=function(e){(0,i.kJ)(e)||(e=[e]),(0,i.yi)(e,(function(e){var t=K[e.provider];t&&t.adapter?t.adapter.enableAnalytics(e):(0,i.H)("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))}))},z.getBidAdapter=function(e){return W[e]},z.getAnalyticsAdapter=function(e){return K[e]},z.callTimedOutBidders=function(e,t,n){t=t.map((function(t){return t.params=(0,i.S0)(e,t.adUnitCode,t.bidder),t.timeout=n,t})),t=(0,i.vM)(t,"bidder"),Object.keys(t).forEach((function(e){ie(e,"onTimeout",t[e])}))},z.callBidWonBidder=function(e,t,n){t.params=(0,i.S0)(n,t.adUnitCode,t.bidder),p.f.incrementBidderWinsCounter(t.adUnitCode,t.bidder),ie(e,"onBidWon",t)},z.callSetTargetingBidder=function(e,t){ie(e,"onSetTargeting",t)},z.callBidViewableBidder=function(e,t){ie(e,"onBidViewable",t)},z.callBidderError=function(e,t,n){ie(e,"onBidderError",{error:t,bidderRequest:n})};const re=z},8393:(e,t,n)=>{"use strict";n.d(t,{JY:()=>R,PZ:()=>A,Q1:()=>O,dX:()=>E});var i=n(2435),r=n(9584),a=n(753),o=n(4202),s=n(8098),d=n(4018),l=n(1539),u=n(7926),c=n(6959),p=n(6222),h=n(9287),f=n(4880),g=n(5446),m=n(3794),v=n(7273),y=n(4447),b=n(1047),_=n(4039);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function k(){return k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},k.apply(this,arguments)}var I=(0,y.eA)("bidderFactory"),C=["cpm","ttl","creativeId","netRevenue","currency"];function E(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function n(e){var n=A(e);r.ZP.registerBidAdapter(n,e.code,t)}n(e),Array.isArray(e.aliases)&&e.aliases.forEach((function(t){var i,a,o=t;(0,f.PO)(t)&&(o=t.code,i=t.gvlid,a=t.skipPbsAliasing),r.ZP.aliasRegistry[o]=e.code,n(k({},e,{code:o,gvlid:i,skipPbsAliasing:a}))}))}function A(e){return k(new i.Z(e.code),{getSpec:function(){return Object.freeze(e)},registerSyncs:t,callBids:function(i,s,d,l,p,h){if(Array.isArray(i.bids)){var g={},m=[],v=i.bids.filter(n);if(0!==v.length){var y={};v.forEach((function(e){y[e.bidId]=e,e.adUnitCode||(e.adUnitCode=e.placementCode)})),P(e,v,i,l,h,{onRequest:function(e){return c.j8(u.FP.BEFORE_BIDDER_HTTP,i,e)},onResponse:function(t){p(e.code),m.push(t)},onError:function(t,n){p(e.code),r.ZP.callBidderError(e.code,n,i),c.j8(u.FP.BIDDER_ERROR,{error:n,bidderRequest:i}),(0,f.H)("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."))},onBid:function(t){var n,i,r,a,d=y[t.requestId];if(d){if(t.adapterCode=d.bidder,n=t.bidderCode,i=d.bidder,r=_.S.get(i,"allowAlternateBidderCodes"),a=_.S.get(i,"allowedAlternateBidderCodes"),n&&i&&i!==n&&(void 0!==r&&!r||(0,f.kJ)(a)&&"*"!==a[0]&&!a.includes(n)))return void(0,f.yN)("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(d.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings."));t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||k({},t[d.bidder]);var l=k((0,o.m)(u.Q_.Q,d),t);!function(e,t){g[e]=!0,R(e,t)&&s(e,t)}(d.adUnitCode,l)}else(0,f.yN)("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring."))},onCompletion:b})}else b()}function b(){d(),a.vc.runWithBidder(e.code,(function(){c.j8(u.FP.BIDDER_DONE,i),t(m,i.gdprConsent,i.uspConsent)}))}}});function t(t,n,i){x(e,t,n,i)}function n(t){return!!e.isBidRequestValid(t)||((0,f.yN)("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1)}}var P=(0,v.z3)("sync",(function(e,t,n,i,r,a){var o=a.onRequest,s=a.onResponse,d=a.onError,l=a.onBid,u=a.onCompletion,c=e.buildRequests(t,n);if(c&&0!==c.length){Array.isArray(c)||(c=[c]);var p=(0,f.yx)(u,c.length);c.forEach((function(t){var n,a=r((function(n,i){try{n=JSON.parse(n)}catch(e){}var r;n={body:n,headers:{get:i.getResponseHeader.bind(i)}},s(n);try{r=e.interpretResponse(n,t)}catch(t){return(0,f.H)("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),void p()}r&&((0,f.kJ)(r)?r.forEach(l):l(r)),p()})),u=r((function(e,t){d(e,t),p()}));switch(o(t),t.method){case"GET":i("".concat(t.url).concat((n=t.data)?"?".concat("object"===S(n)?(0,f.Re)(n):n):""),{success:a,error:u},void 0,k({method:"GET",withCredentials:!0},t.options));break;case"POST":i(t.url,{success:a,error:u},"string"==typeof t.data?t.data:JSON.stringify(t.data),k({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:(0,f.yN)("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),p()}}))}else u()}),"processBidderRequests"),x=(0,v.z3)("async",(function(e,t,n,i){var o=a.vc.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!r.ZP.aliasRegistry[e.code])){var d=a.vc.getConfig("userSync.filterSettings"),l=e.getUserSyncs({iframeEnabled:!(!d||!d.iframe&&!d.all),pixelEnabled:!(!d||!d.image&&!d.all)},t,n,i);l&&(Array.isArray(l)||(l=[l]),l.forEach((function(t){s.k_.registerSync(t.type,e.code,t.url)})))}}),"registerSyncs");function O(e,t){var n=r.ZP.getBidAdapter(e);if(n.getSpec().getMappingFileInfo){var i=n.getSpec().getMappingFileInfo(),a=i.localStorageKey?i.localStorageKey:n.getBidderCode(),o=I.getDataFromLocalStorage(a);if(o){try{o=JSON.parse(o)}catch(t){(0,f.H)("Failed to parse ".concat(e," mapping data stored in local storage"))}return o.mapping[t]?o.mapping[t]:null}}}function D(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,r=void 0===i?b.K.index:i;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var a=r.getBidRequest(t),o=r.getMediaTypes(t),s=a&&a.sizes||o&&o.banner&&o.banner.sizes,d=(0,f.sF)(s);if(1===d.length){var l=d[0].split("x"),u=T(l,2),c=u[0],p=u[1];return t.width=parseInt(c,10),t.height=parseInt(p,10),!0}return!1}function R(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,r=void 0===i?b.K.index:i;function a(){var e=Object.keys(t);return C.every((function(n){return(0,p.q9)(e,n)&&!(0,p.q9)([void 0,null],t[n])}))}function o(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}return e?t?a()?"native"!==t.mediaType||(0,d.r4)(t,{index:r})?"video"!==t.mediaType||(0,l.Dn)(t,{index:r})?!("banner"===t.mediaType&&!D(e,t,{index:r})&&((0,f.H)(o("Banner bids require a width and height")),1)):((0,f.H)(o("Video bid does not have required vastUrl or renderer property")),!1):((0,f.H)(o("Native bid missing some required properties.")),!1):((0,f.H)(o("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1):((0,f.yN)("Some adapter tried to add an undefined bid for ".concat(e,".")),!1):((0,f.yN)("No adUnitCode was supplied to addBidResponse."),!1)}(0,v.v5)("checkAdUnitSetup").before((function(e,t){if(!a.vc.getConfig("adpod.brandCategoryExclusion"))return e.call(this,t);t.filter((function(e){return(0,g.Z)(e,"mediaTypes.video.context")===m.Oh})).map((function(e){return e.bids.map((function(e){return e.bidder}))})).reduce(f.xH,[]).filter(f.tT).forEach((function(e){var t=r.ZP.getBidAdapter(e);if(t.getSpec().getMappingFileInfo){var n=t.getSpec().getMappingFileInfo(),i=n.refreshInDays?n.refreshInDays:1,a=n.localStorageKey?n.localStorageKey:t.getSpec().code,o=I.getDataFromLocalStorage(a);try{(!(o=o?JSON.parse(o):void 0)||(0,f.AB)()>o.lastUpdated+24*i*60*60*1e3)&&(0,h.h)(n.url,{success:function(t){try{t=JSON.parse(t);var n={lastUpdated:(0,f.AB)(),mapping:t.mapping};I.setDataInLocalStorage(a,JSON.stringify(n))}catch(t){(0,f.H)("Failed to parse ".concat(e," bidder translation mapping file"))}},error:function(){(0,f.H)("Failed to load ".concat(e," bidder translation file"))}})}catch(t){(0,f.H)("Failed to parse ".concat(e," bidder translation mapping file"))}}})),e.call(this,t)}))},8838:(e,t,n)=>{"use strict";n.d(t,{B:()=>s});var i=n(6222),r=n(4880),a=new WeakMap,o=["adloox","criteo","outstream","adagio","browsi","brandmetrics","justtag"];function s(e,t,n,s){if(t&&e){if((0,i.q9)(o,t)){s||(s=document);var d=c(s,e);if(d)return n&&"function"==typeof n&&(d.loaded?n():d.callbacks.push(n)),d.tag;var l=a.get(s)||{},u={loaded:!1,tag:null,callbacks:[]};return l[e]=u,a.set(s,l),n&&"function"==typeof n&&u.callbacks.push(n),(0,r.yN)("module ".concat(t," is loading external JavaScript")),function(t,n,i){i||(i=document);var a=i.createElement("script");a.type="text/javascript",a.async=!0;var o=c(i,e);return o&&(o.tag=a),a.readyState?a.onreadystatechange=function(){"loaded"!==a.readyState&&"complete"!==a.readyState||(a.onreadystatechange=null,n())}:a.onload=function(){n()},a.src=t,(0,r.jC)(a,i),a}(e,(function(){u.loaded=!0;try{for(var e=0;e<u.callbacks.length;e++)u.callbacks[e]()}catch(e){(0,r.H)("Error executing callback","adloader.js:loadExternalScript",e)}}),s)}(0,r.H)("".concat(t," not whitelisted for loading external JavaScript"))}else(0,r.H)("cannot load external script without url and moduleCode");function c(e,t){var n=a.get(e);return n&&n[t]?n[t]:null}}},9287:(e,t,n)=>{"use strict";n.d(t,{O:()=>d,h:()=>s});var i=n(753),r=n(4880);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var s=d();function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.request,s=t.done;return function(t,d,l){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var c,p=u.method||(l?"POST":"GET"),h=document.createElement("a");h.href=t;var f="object"===o(d)&&null!==d?d:{success:function(){(0,r.ji)("xhr success")},error:function(e){(0,r.H)("xhr error",null,e)}};if("function"==typeof d&&(f.success=d),(c=new window.XMLHttpRequest).onreadystatechange=function(){if(4===c.readyState){"function"==typeof s&&s(h.origin);var e=c.status;e>=200&&e<300||304===e?f.success(c.responseText,c):f.error(c.statusText,c)}},i.vc.getConfig("disableAjaxTimeout")||(c.ontimeout=function(){(0,r.H)("  xhr timeout after ",c.timeout,"ms")}),"GET"===p&&l){var g=(0,r.en)(t,u);a(g.search,l),t=(0,r.Q2)(g)}c.open(p,t,!0),i.vc.getConfig("disableAjaxTimeout")||(c.timeout=e),u.withCredentials&&(c.withCredentials=!0),(0,r.yi)(u.customHeaders,(function(e,t){c.setRequestHeader(t,e)})),u.preflight&&c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.setRequestHeader("Content-Type",u.contentType||"text/plain"),"function"==typeof n&&n(h.origin),"POST"===p&&l?c.send(l):c.send()}catch(e){(0,r.H)("xhr construction",e),"object"===o(d)&&null!==d&&d.error(e)}}}},2198:(e,t,n)=>{"use strict";n.d(t,{mv:()=>I,Yt:()=>x,e0:()=>O,dg:()=>B,LX:()=>q,vO:()=>P});var i=n(4880),r=n(5446),a=n(3536),o=n(4018),s=n(9287),d=n(753),l=n(1047);function u(e,t){var n=t?"<![CDATA[".concat(t,"]]>"):"";return'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(e,"]]></VASTAdTagURI>\n        <Impression>").concat(n,"</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,i=void 0===n?l.K.index:n,r=e.vastXml?e.vastXml:u(e.vastUrl,e.vastImpUrl),a=i.getAuction(e),o={type:"xml",value:r,ttlseconds:Number(e.ttl)};return d.vc.getConfig("cache.vasttrack")&&(o.bidder=e.bidder,o.bidid=e.requestId,o.aid=e.auctionId),null!=a&&(o.timestamp=a.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(o.key=e.customCacheKey),o}var p=n(7730),h=n(8098),f=n(7273),g=n(6222),m=n(1539),v=n(3794),y=n(4039),b=n(6959),_=n(9584),T=n(7926);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function S(){return S=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},S.apply(this,arguments)}var k=h.k_.syncUsers,I="completed";b.on(T.FP.BID_ADJUSTMENT,(function(e){!function(e){var t=e.bidderCode,n=e.cpm,r=y.S.get(t||null,"bidCpmAdjustment");if(r&&"function"==typeof r)try{n=r(e.cpm,S({},e))}catch(e){(0,i.H)("Error during bid adjustment","bidmanager.js",e)}n>=0&&(e.cpm=n)}(e)}));var C={},E={},A=[];function P(e){var t,n,r,a,o=e.adUnits,s=e.adUnitCodes,u=e.callback,c=e.cbTimeout,p=e.labels,h=e.auctionId,f=o,m=p,v=s,y=[],w=[],S=[],P=h||(0,i.DO)(),R=u,U=c,N=[],B=new Set;function F(){return{auctionId:P,timestamp:t,auctionEnd:n,auctionStatus:r,adUnits:f,adUnitCodes:v,labels:m,bidderRequests:y,noBids:S,bidsReceived:w,winningBids:N,timeout:U}}function q(e,t){if(t&&clearTimeout(a),void 0===n){var s=[];e&&((0,i.ji)("Auction ".concat(P," timedOut")),l=B,(s=y.map((function(e){return(e.bids||[]).filter((function(e){return!l.has(e.bidder)}))})).reduce(i.xH,[])).length&&b.j8(T.FP.BID_TIMEOUT,s)),r=I,n=Date.now(),b.j8(T.FP.AUCTION_END,F()),D(f,(function(){try{if(null!=R){var t=v,n=w.filter(i.ak.call(i.IK,this,t)).reduce(H,{});R.apply(pbjs,[n,e,P]),R=null}}catch(e){(0,i.H)("Error executing bidsBackHandler",null,e)}finally{s.length&&_.ZP.callTimedOutBidders(o,s,U);var r=d.vc.getConfig("userSync")||{};r.enableOverride||k(r.syncDelay)}}))}var l}function V(){d.vc.resetBidder(),(0,i.PN)("Bids Received for Auction with id: ".concat(P),w),r=I,q(!1,!0)}function z(e){B.add(e)}function W(e){var t=this;e.forEach((function(e){var t;t=e,y=y.concat(t)}));var n={},o={bidRequests:e,run:function(){var o,c;o=q.bind(null,!0),c=setTimeout(o,U),a=c,r="inProgress",b.j8(T.FP.AUCTION_INIT,F());var p=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,r=void 0===n?l.K.index:n,a=0,o=!1,s=new Set,u={},c={};function p(e,t){null==c[e]&&(c[e]=Promise.resolve()),c[e]=c[e].then((function(){return Promise.resolve(t).catch((function(){}))}))}function h(e,n){var i=e.timeout;(null==i||i>t.getTimeout())&&(i=t.getTimeout());var r=t.getAuctionStart()+i-Date.now(),a=c[e.bidderRequestId],o=c[""];(null!=a||null!=o)&&r>0?Promise.race([new Promise((function(e){return setTimeout(e,r)})),Promise.resolve(o).then((function(){return a}))]).then(n):n()}function f(){a--,o&&0===a&&e()}function m(e,n){u[n.requestId]=!0,a++;var i=j({adUnitCode:e,bid:n,auctionId:t.getAuctionId()});"video"===i.mediaType?M(t,i,f):(L(t,i),f())}function v(){var n=t.getBidRequests(),r=d.vc.getConfig("auctionOptions");if(s.add(this),r&&!(0,i.xb)(r)){var l=r.secondaryBidders;l&&!n.every((function(e){return(0,g.q9)(l,e.bidderCode)}))&&(n=n.filter((function(e){return!(0,g.q9)(l,e.bidderCode)})))}o=n.every((function(e){return s.has(e)})),this.bids.forEach((function(e){u[e.bidId]||(t.addNoBid(e),b.j8(T.FP.NO_BID,e))})),o&&0===a&&e()}return{addBidResponse:function(e,t){var n=r.getBidderRequest(t);p(n&&n.bidderRequestId||"",x.call({dispatch:m},e,t))},adapterDone:function(){h(this,v.bind(this))}}}(V,t);_.ZP.callBids(f,e,p.addBidResponse,p.adapterDone,{request:function(e,t){u(C,t),u(n,e),E[e]||(E[e]={SRA:!0,origin:t}),n[e]>1&&(E[e].SRA=!1)},done:function(e){C[e]--,A[0]&&s(A[0])&&A.shift()}},U,z)}};function s(e){var t=!0,n=d.vc.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some((function(e){var i=1,r=void 0!==e.src&&e.src===T.os.YZ?"s2s":e.bidderCode;return E[r]&&(!1===E[r].SRA&&(i=Math.min(e.bids.length,n)),C[E[r].origin]+i>n&&(t=!1)),!t})),t&&e.run(),t}function u(e,t){void 0===e[t]?e[t]=1:e[t]++}s(o)||((0,i.yN)("queueing auction due to limited endpoint capacity"),A.push(o))}return{addBidReceived:function(e){w=w.concat(e)},addNoBid:function(e){S=S.concat(e)},executeCallback:q,callBids:function(){r="started",t=Date.now();var e=_.ZP.makeBidRequests(f,t,P,U,m);(0,i.PN)("Bids Requested for Auction with id: ".concat(P),e),e.length<1?((0,i.yN)("No valid bid requests returned for auction"),V()):O.call({dispatch:W,context:this},e)},addWinningBid:function(e){N=N.concat(e),_.ZP.callBidWonBidder(e.bidder,e,o)},setBidTargeting:function(e){_.ZP.callSetTargetingBidder(e.bidder,e)},getWinningBids:function(){return N},getAuctionStart:function(){return t},getTimeout:function(){return U},getAuctionId:function(){return P},getAuctionStatus:function(){return r},getAdUnits:function(){return f},getAdUnitCodes:function(){return v},getBidRequests:function(){return y},getBidsReceived:function(){return w},getNoBids:function(){return S}}}var x=(0,f.z3)("sync",(function(e,t){this.dispatch.call(null,e,t)}),"addBidResponse"),O=(0,f.z3)("sync",(function(e){this.dispatch.call(this.context,e)}),"addBidderRequests"),D=(0,f.z3)("async",(function(e,t){t&&t()}),"bidsBackCallback");function R(e,t){t.timeToRespond>e.getTimeout()+d.vc.getConfig("timeoutBuffer")&&e.executeCallback(!0)}function L(e,t){var n,i,r;n=t,r=!0===y.S.get(n.bidderCode,"allowZeroCpmBids")?n.cpm>=0:n.cpm>0,n.bidderCode&&(r||n.dealId)&&(i=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).index,i=void 0===n?l.K.index:n;if(!t)return{};var r=i.getBidRequest(t),a={},s=q(t.mediaType,e);return V(a,s,t,r),e&&y.S.getOwn(e,T.k2.xn)&&(V(a,y.S.ownSettingsFor(e),t,r),t.sendStandardTargeting=y.S.get(e,"sendStandardTargeting")),t.native&&(a=S({},a,(0,o.Ur)(t))),a}(n.bidderCode,n)),n.adserverTargeting=S(n.adserverTargeting||{},i),b.j8(T.FP.BID_RESPONSE,t),e.addBidReceived(t),R(e,t)}function M(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a.index,s=void 0===o?l.K.index:o,u=!0,c=(0,r.Z)(s.getMediaTypes({requestId:t.originalRequestId||t.requestId,transactionId:t.transactionId}),"video"),p=c&&(0,r.Z)(c,"context");d.vc.getConfig("cache.url")&&p!==m.gZ&&(!t.videoCacheKey||d.vc.getConfig("cache.ignoreBidderCacheKey")?(u=!1,U(e,t,n,c)):t.vastUrl||((0,i.H)("videoCacheKey specified but not required vastUrl for video bid"),u=!1)),u&&(L(e,t),n())}var U=(0,f.z3)("async",(function(e,t,n,r){var a,o;a=function(r,a){r?((0,i.yN)("Failed to save to the video cache: ".concat(r,". Video bid must be discarded.")),R(e,t)):""===a[0].uuid?((0,i.yN)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."),R(e,t)):(t.videoCacheKey=a[0].uuid,t.vastUrl||(t.vastUrl=function(e){return"".concat(d.vc.getConfig("cache.url"),"?uuid=").concat(e)}(t.videoCacheKey)),L(e,t),n())},o={puts:[t].map(c)},(0,s.h)(d.vc.getConfig("cache.url"),function(e){return{success:function(t){var n;try{n=JSON.parse(t).responses}catch(t){return void e(t,[])}n?e(null,n):e(new Error("The cache server didn't respond with a responses property."),[])},error:function(t,n){e(new Error("Error storing video ad in the cache: ".concat(t,": ").concat(JSON.stringify(n))),[])}}}(a),JSON.stringify(o),{contentType:"text/plain",withCredentials:!0})}),"callPrebidCache");function j(e){var t=e.adUnitCode,n=e.bid,r=e.auctionId,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=o.index,u=void 0===s?l.K.index:s,c=u.getBidderRequest(n),h=c&&c.start||n.requestTimestamp,f=S({},n,{auctionId:r,responseTimestamp:(0,i.AB)(),requestTimestamp:h,cpm:parseFloat(n.cpm)||0,bidder:n.bidderCode,adUnitCode:t});f.timeToRespond=f.responseTimestamp-f.requestTimestamp,b.j8(T.FP.BID_ADJUSTMENT,f);var g=u.getAdUnit(f).renderer,m=f.mediaType,v=u.getMediaTypes(f),y=v&&v[m],_=y&&y.renderer,k=null;_&&_.url&&_.render&&(!0!==_.backupOnly||!n.renderer)?k=_:g&&g.url&&g.render&&(!0!==g.backupOnly||!n.renderer)&&(k=g),k&&(f.renderer=p.Th.install({url:k.url,config:k.options}),f.renderer.setRender(k.render));var I=N(n.mediaType,v,d.vc.getConfig("mediaTypePriceGranularity")),C=(0,a.D)(f.cpm,"object"===w(I)?I:d.vc.getConfig("customPriceBucket"),d.vc.getConfig("currency.granularityMultiplier"));return f.pbLg=C.low,f.pbMg=C.med,f.pbHg=C.high,f.pbAg=C.auto,f.pbDg=C.dense,f.pbCg=C.custom,f}function N(e,t,n){if(e&&n){if(e===v.pX){var i=(0,r.Z)(t,"".concat(v.pX,".context"),"instream");if(n["".concat(v.pX,"-").concat(i)])return n["".concat(v.pX,"-").concat(i)]}return n[e]}}var B=function(e){return function(t){var n=e||function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).index,n=void 0===t?l.K.index:t,i=N(e.mediaType,n.getMediaTypes(e),d.vc.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&i?"string"==typeof i?i:"custom":d.vc.getConfig("priceGranularity")}(t);return n===T.Ql.B7?t.pbAg:n===T.Ql.uN?t.pbDg:n===T.Ql.yE?t.pbLg:n===T.Ql.M2?t.pbMg:n===T.Ql.lj?t.pbHg:n===T.Ql.qN?t.pbCg:void 0}};function F(e,t){return{key:e,val:"function"==typeof t?function(e,n){return t(e,n)}:function(e){return(0,i.NA)(e,t)}}}function q(e,t){var n=T.TD,a=S({},y.S.settingsFor(null));if(a[T.k2.xn]||(a[T.k2.xn]=function(){var e=T.TD;return[F(e.BIDDER,"bidderCode"),F(e.AD_ID,"adId"),F(e.PRICE_BUCKET,B()),F(e.SIZE,"size"),F(e.DEAL,"dealId"),F(e.SOURCE,"source"),F(e.FORMAT,"mediaType"),F(e.ADOMAIN,(function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?e.meta.advertiserDomains[0]:""}))]}()),"video"===e){var o=a[T.k2.xn].slice();if(a[T.k2.xn]=o,[n.UUID,n.CACHE_ID].forEach((function(e){void 0===(0,g.sE)(o,(function(t){return t.key===e}))&&o.push(F(e,"videoCacheKey"))})),d.vc.getConfig("cache.url")&&(!t||!1!==y.S.get(t,"sendStandardTargeting"))){var s=(0,i.en)(d.vc.getConfig("cache.url"));void 0===(0,g.sE)(o,(function(e){return e.key===n.CACHE_HOST}))&&o.push(F(n.CACHE_HOST,(function(e){return(0,r.Z)(e,"adserverTargeting.".concat(n.CACHE_HOST))?e.adserverTargeting[n.CACHE_HOST]:s.hostname})))}}return a}function V(e,t,n,r){var a=t[T.k2.xn];return n.size=n.getSize(),(0,i.yi)(a,(function(a){var o=a.key,s=a.val;if(e[o]&&(0,i.yN)("The key: "+o+" is being overwritten"),(0,i.LQ)(s))try{s=s(n,r)}catch(e){(0,i.H)("bidmanager","ERROR",e)}(void 0===t.suppressEmptyKeys||!0!==t.suppressEmptyKeys)&&o!==T.TD.DEAL||!(0,i.jH)(s)&&null!=s?e[o]=s:(0,i.PN)("suppressing empty key '"+o+"' from adserver targeting")})),e}function H(e,t){return e[t.adUnitCode]||(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}},1047:(e,t,n)=>{"use strict";n.d(t,{K:()=>l});var i=n(4880),r=n(2198),a=n(6222);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o.apply(this,arguments)}function s(e){o(this,{getAuction:function(t){var n=t.auctionId;if(null!=n)return e().find((function(e){return e.getAuctionId()===n}))},getAdUnit:function(t){var n=t.transactionId;if(null!=n)return e().flatMap((function(e){return e.getAdUnits()})).find((function(e){return e.transactionId===n}))},getMediaTypes:function(e){var t=e.transactionId,n=e.requestId;if(null!=n){var i=this.getBidRequest({requestId:n});if(null!=i&&(null==t||i.transactionId===t))return i.mediaTypes}else if(null!=t){var r=this.getAdUnit({transactionId:t});if(null!=r)return r.mediaTypes}},getBidderRequest:function(t){var n=t.requestId,i=t.bidderRequestId;if(null!=n||null!=i){var r=e().flatMap((function(e){return e.getBidRequests()}));return null!=i&&(r=r.filter((function(e){return e.bidderRequestId===i}))),null==n?r[0]:r.find((function(e){return e.bids&&null!=e.bids.find((function(e){return e.bidId===n}))}))}},getBidRequest:function(t){var n=t.requestId;if(null!=n)return e().flatMap((function(e){return e.getBidRequests()})).flatMap((function(e){return e.bids})).find((function(e){return e&&e.bidId===n}))}})}var d=n(7926),l=function(){var e=[],t={addWinningBid:function(t){var n=(0,a.sE)(e,(function(e){return e.getAuctionId()===t.auctionId}));n?(t.status=d.UE.fe,n.addWinningBid(t)):(0,i.yN)("Auction not found when adding winning bid")},getAllWinningBids:function(){return e.map((function(e){return e.getWinningBids()})).reduce(i.xH,[])},getBidsRequested:function(){return e.map((function(e){return e.getBidRequests()})).reduce(i.xH,[])},getNoBids:function(){return e.map((function(e){return e.getNoBids()})).reduce(i.xH,[])},getBidsReceived:function(){return e.map((function(e){if(e.getAuctionStatus()===r.mv)return e.getBidsReceived()})).reduce(i.xH,[]).filter((function(e){return e}))},getAllBidsForAdUnitCode:function(t){return e.map((function(e){return e.getBidsReceived()})).reduce(i.xH,[]).filter((function(e){return e&&e.adUnitCode===t}))},getAdUnits:function(){return e.map((function(e){return e.getAdUnits()})).reduce(i.xH,[])},getAdUnitCodes:function(){return e.map((function(e){return e.getAdUnitCodes()})).reduce(i.xH,[]).filter(i.tT)},createAuction:function(t){var n=t.adUnits,i=t.adUnitCodes,a=t.callback,o=t.cbTimeout,s=t.labels,d=t.auctionId,l=(0,r.vO)({adUnits:n,adUnitCodes:i,callback:a,cbTimeout:o,labels:s,auctionId:d});return function(t){e.push(t)}(l),l},findBidByAdId:function(t){return(0,a.sE)(e.map((function(e){return e.getBidsReceived()})).reduce(i.xH,[]),(function(e){return e.adId===t}))},getStandardBidderAdServerTargeting:function(){return(0,r.LX)()[d.k2.xn]},setStatusForBids:function(n,i){var r=t.findBidByAdId(n);if(r&&(r.status=i),r&&i===d.UE.CK){var o=(0,a.sE)(e,(function(e){return e.getAuctionId()===r.auctionId}));o&&o.setBidTargeting(r)}},getLastAuctionId:function(){return e.length&&e[e.length-1].getAuctionId()},clearAllAuctions:function(){e.length=0}};return t.index=new s((function(){return e})),t}()},4039:(e,t,n)=>{"use strict";n.d(t,{S:()=>c});var i=n(5446),r=n(4880),a=n(1303),o=n(7926);function s(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function d(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var l=new WeakSet;function u(e){return null==e?this.defaultScope:e}var c=new(function(){function e(t,n){var i,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(i=this,r=l),r.add(i),this.getSettings=t,this.defaultScope=n}var t,n;return t=e,(n=[{key:"get",value:function(e,t){var n=this.getOwn(e,t);return void 0===n&&(n=this.getOwn(null,t)),n}},{key:"getOwn",value:function(e,t){return e=d(this,l,u).call(this,e),(0,i.Z)(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter((function(t){return t!==e.defaultScope}))}},{key:"settingsFor",value:function(e){return(0,r.Ee)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=d(this,l,u).call(this,e),this.getSettings()[e]||{}}}])&&s(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}())((function(){return(0,a.R)().bidderSettings||{}}),o.k2.zF)},4202:(e,t,n)=>{"use strict";n.d(t,{m:()=>a});var i=n(4880);function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.src,r=void 0===n?"client":n,a=t.bidder,o=void 0===a?"":a,s=t.bidId,d=t.transactionId,l=t.auctionId,u=r,c=e||0;function p(){switch(c){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}this.bidderCode=o,this.width=0,this.height=0,this.statusMessage=p(),this.adId=(0,i._d)(),this.requestId=s,this.transactionId=d,this.auctionId=l,this.mediaType="banner",this.source=u,this.getStatusCode=function(){return c},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,auctionId:this.auctionId}}}function a(e,t){return new r(e,t)}},753:(e,t,n)=>{"use strict";n.d(t,{FD:()=>g,vc:()=>b});var i=n(3536),r=n(6222),a=n(4880),o=n(5446),s=n(7926),d=["fpd"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}var h="TRUE"===(0,a.rD)(s.f).toUpperCase(),f=window.location.origin,g="random",m={};m[g]=!0,m.fixed=!0;var v=g,y={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},b=function(){var e,t,n,s=[],g=null;function b(){e={};var o={_debug:h,get debug(){return this._debug},set debug(e){this._debug=e},_bidderTimeout:3e3,get bidderTimeout(){return this._bidderTimeout},set bidderTimeout(e){this._bidderTimeout=e},_publisherDomain:f,get publisherDomain(){return this._publisherDomain},set publisherDomain(e){this._publisherDomain=e},_priceGranularity:y.MEDIUM,set priceGranularity(e){d(e)&&("string"==typeof e?this._priceGranularity=s(e)?e:y.MEDIUM:(0,a.PO)(e)&&(this._customPriceBucket=e,this._priceGranularity=y.CUSTOM,(0,a.ji)("Using custom price granularity")))},get priceGranularity(){return this._priceGranularity},_customPriceBucket:{},get customPriceBucket(){return this._customPriceBucket},_mediaTypePriceGranularity:{},get mediaTypePriceGranularity(){return this._mediaTypePriceGranularity},set mediaTypePriceGranularity(e){var t=this;this._mediaTypePriceGranularity=Object.keys(e).reduce((function(n,i){return d(e[i])?"string"==typeof e?n[i]=s(e[i])?e[i]:t._priceGranularity:(0,a.PO)(e)&&(n[i]=e[i],(0,a.ji)("Using custom price granularity for ".concat(i))):(0,a.yN)("Invalid price granularity for media type: ".concat(i)),n}),{})},_sendAllBids:!0,get enableSendAllBids(){return this._sendAllBids},set enableSendAllBids(e){this._sendAllBids=e},_useBidCache:!1,get useBidCache(){return this._useBidCache},set useBidCache(e){this._useBidCache=e},_deviceAccess:!0,get deviceAccess(){return this._deviceAccess},set deviceAccess(e){this._deviceAccess=e},_bidderSequence:v,get bidderSequence(){return this._bidderSequence},set bidderSequence(e){m[e]?this._bidderSequence=e:(0,a.yN)("Invalid order: ".concat(e,". Bidder Sequence was not set."))},_timeoutBuffer:400,get timeoutBuffer(){return this._timeoutBuffer},set timeoutBuffer(e){this._timeoutBuffer=e},_disableAjaxTimeout:!1,get disableAjaxTimeout(){return this._disableAjaxTimeout},set disableAjaxTimeout(e){this._disableAjaxTimeout=e},_maxNestedIframes:10,get maxNestedIframes(){return this._maxNestedIframes},set maxNestedIframes(e){this._maxNestedIframes=e},_auctionOptions:{},get auctionOptions(){return this._auctionOptions},set auctionOptions(e){(function(e){if(!(0,a.PO)(e))return(0,a.yN)("Auction Options must be an object"),!1;for(var t=0,n=Object.keys(e);t<n.length;t++){var i=n[t];if("secondaryBidders"!==i&&"suppressStaleRender"!==i)return(0,a.yN)("Auction Options given an incorrect param: ".concat(i)),!1;if("secondaryBidders"===i){if(!(0,a.kJ)(e[i]))return(0,a.yN)("Auction Options ".concat(i," must be of type Array")),!1;if(!e[i].every(a.d8))return(0,a.yN)("Auction Options ".concat(i," must be only string")),!1}else if("suppressStaleRender"===i&&!(0,a.jn)(e[i]))return(0,a.yN)("Auction Options ".concat(i," must be of type boolean")),!1}return!0})(e)&&(this._auctionOptions=e)}};function s(e){return(0,r.sE)(Object.keys(y),(function(t){return e===y[t]}))}function d(e){if(!e)return(0,a.H)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)s(e)||(0,a.yN)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,a.PO)(e)&&!(0,i.t)(e))return(0,a.H)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}t&&I(Object.keys(t).reduce((function(e,n){return t[n]!==o[n]&&(e[n]=o[n]||{}),e}),{})),t=o,n={}}function _(){if(g&&n&&(0,a.PO)(n[g])){var e=n[g],i=new Set(Object.keys(t).concat(Object.keys(e)));return(0,r.Oc)(i).reduce((function(n,i){return void 0===e[i]?n[i]=t[i]:void 0===t[i]?n[i]=e[i]:(0,a.PO)(e[i])?n[i]=(0,a.Ee)({},t[i],e[i]):n[i]=e[i],n}),{})}return p({},t)}function T(e){var t={};return Object.keys(e).forEach((function(n){var i="context"===n?"site":n;t[i]="site"===i||"user"===i?Object.keys(e[n]).reduce((function(t,i){return"data"===i?(0,a.Ee)(t,{ext:{data:e[n][i]}}):(0,a.Ee)(t,u({},i,e[n][i])),t}),{}):e[n]})),t}function w(e){var t={};return Object.keys(e).filter((function(e){return"context"===e})).forEach((function(n){Object.keys(e[n]).forEach((function(i){"data"===i?(0,a.Ee)(t,{ext:{data:e[n][i]}}):"object"!==c(e[n][i])||Array.isArray(e[n][i])?(0,a.Ee)(t,{ext:{data:u({},i.toLowerCase(),e[n][i])}}):Object.keys(e[n][i]).forEach((function(r){(0,a.Ee)(t,{ext:{data:u({},i.toLowerCase(),u({},r.toLowerCase(),e[n][i][r]))}})}))}))})),t}function S(n){if((0,a.PO)(n)){var i=Object.keys(n),r={};i.forEach((function(i){var o="fpd"===i?"ortb2":i,s="fpd"===i?T(n[i]):n[i];(0,a.PO)(e[o])&&(0,a.PO)(s)&&(s=p({},e[o],s)),r[o]=t[o]=s})),I(r)}else(0,a.H)("setConfig options must be an object")}function k(e,t){var n=t;if("string"!=typeof e&&(n=e,e="*"),"function"==typeof n){var i={topic:e,callback:n};return s.push(i),function(){s.splice(s.indexOf(i),1)}}(0,a.H)("listener must be a function")}function I(e){var t=Object.keys(e);s.filter((function(e){return(0,r.q9)(t,e.topic)})).forEach((function(t){t.callback(u({},t.topic,e[t.topic]))})),s.filter((function(e){return"*"===e.topic})).forEach((function(t){return t.callback(e)}))}function C(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{i(e),e.bidders.forEach((function(i){n[i]||(n[i]={}),Object.keys(e.config).forEach((function(r){var o="fpd"===r?"ortb2":r,s="fpd"===r?T(e.config[r]):e.config[r];if((0,a.PO)(s)){var d=t?a.Ee:Object.assign;n[i][o]=d({},n[i][o]||{},s)}else n[i][o]=s}))}))}catch(e){(0,a.H)(e)}function i(e){if(!(0,a.PO)(e))throw"setBidderConfig bidder options must be an object";if(!Array.isArray(e.bidders)||!e.bidders.length)throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,a.PO)(e.config))throw"setBidderConfig bidder options must contain a config object"}}function E(e,t){g=e;try{return t()}finally{A()}}function A(){g=null}return b(),{getCurrentBidder:function(){return g},resetBidder:A,getConfig:function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var e=arguments.length<=0?void 0:arguments[0];return e?(0,o.Z)(_(),e):_()}return k.apply(void 0,arguments)},readConfig:function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var e=arguments.length<=0?void 0:arguments[0],t=(0,a.I8)(_());return e?(0,o.Z)(t,e):t}return k.apply(void 0,arguments)},setConfig:S,mergeConfig:function(e){if((0,a.PO)(e)){var t=Object.keys(e).reduce((function(t,n){var i=_()[n]||{};return t[n]=(0,a.Ee)(i,e[n]),t}),{});return S(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t)),t}(0,a.H)("mergeConfig input must be an object")},setDefaults:function(n){(0,a.PO)(e)?(p(e,n),p(t,n)):(0,a.H)("defaults must be an object")},resetConfig:b,runWithBidder:E,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return E(e,a.ak.call.apply(a.ak,[t,this].concat(i)))}(0,a.yN)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:C,getBidderConfig:function(){return n},mergeBidderConfig:function(e){return C(e,!0)},convertAdUnitFpd:function(e){var t=[];return e.forEach((function(e){var n;e.fpd?(e.ortb2Imp?(0,a.Ee)(e.ortb2Imp,w(e.fpd)):e.ortb2Imp=w(e.fpd),t.push(((n=e).fpd,function(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(n,d)))):t.push(e)})),t},getLegacyFpd:function(e){if("object"===c(e)){var t={};return Object.keys(e).forEach((function(n){var i="site"===n?"context":n;t[i]="context"===i||"user"===i?Object.keys(e[n]).filter((function(e){return"data"!==e})).reduce((function(t,i){return"ext"===i?(0,a.Ee)(t,e[n][i]):(0,a.Ee)(t,u({},i,e[n][i])),t}),{}):e[n]})),t}},getLegacyImpFpd:function(e){if("object"===c(e)){var t={};return(0,o.Z)(e,"ext.data")&&Object.keys(e.ext.data).forEach((function(n){"pbadslot"===n?(0,a.Ee)(t,{context:{pbAdSlot:e.ext.data[n]}}):"adserver"===n?(0,a.Ee)(t,{context:{adServer:e.ext.data[n]}}):(0,a.Ee)(t,{context:{data:u({},n,e.ext.data[n])}})})),t}}}}()},3536:(e,t,n)=>{"use strict";n.d(t,{D:()=>u,t:()=>p});var i=n(6222),r=n(4880),a={buckets:[{max:5,increment:.5}]},o={buckets:[{max:20,increment:.1}]},s={buckets:[{max:20,increment:.01}]},d={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},l={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=parseFloat(e);return isNaN(i)&&(i=""),{low:""===i?"":c(e,a,n),med:""===i?"":c(e,o,n),high:""===i?"":c(e,s,n),auto:""===i?"":c(e,l,n),dense:""===i?"":c(e,d,n),custom:""===i?"":c(e,t,n)}}function c(e,t,n){var r="";if(!p(t))return r;var a=t.buckets.reduce((function(e,t){return e.max>t.max?e:t}),{max:0}),o=0,s=(0,i.sE)(t.buckets,(function(t){if(e>a.max*n){var i=t.precision;void 0===i&&(i=2),r=(t.max*n).toFixed(i)}else{if(e<=t.max*n&&e>=o*n)return t.min=o,t;o=t.max}}));return s&&(r=function(e,t,n){var i=void 0!==t.precision?t.precision:2,r=t.increment*n,a=t.min*n,o=Math.pow(10,i+2),s=(e*o-a*o)/(r*o),d=Math.floor(s)*r+a;return(d=Number(d.toFixed(10))).toFixed(i)}(e,s,n)),r}function p(e){if((0,r.xb)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach((function(e){e.max&&e.increment||(t=!1)})),t}},6959:(e,t,n)=>{"use strict";n.d(t,{S1:()=>h,j8:()=>g,on:()=>p,vw:()=>f});var i=n(4880),r=n(7926);function a(){return a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a.apply(this,arguments)}var o=Array.prototype.slice,s=Array.prototype.push,d=i.HA(r.FP,(function(e){return e})),l=r.aI,u=[],c=function(){var e={},t={};function n(t,n){i.ji("Emitting event for: "+t);var r=n[0]||{},a=r[l[t]],o=e[t]||{que:[]},d=i.HA(o,(function(e,t){return t})),c=[];u.push({eventType:t,args:r,id:a,elapsedTime:i.bd()}),a&&i.r3(d,a)&&s.apply(c,o[a].que),s.apply(c,o.que),i.yi(c,(function(e){if(e)try{e.apply(null,n)}catch(e){i.H("Error executing handler:","events.js",e)}}))}return t.on=function(t,n,r){if(function(e){return i.r3(d,e)}(t)){var a=e[t]||{que:[]};r?(a[r]=a[r]||{que:[]},a[r].que.push(n)):a.que.push(n),e[t]=a}else i.H("Wrong event name : "+t+" Valid event names :"+d)},t.emit=function(e){var t=o.call(arguments,1);n(e,t)},t.off=function(t,n,r){var a=e[t];i.xb(a)||i.xb(a.que)&&i.xb(a[r])||r&&(i.xb(a[r])||i.xb(a[r].que))||(r?i.yi(a[r].que,(function(e){var t=a[r].que;e===n&&t.splice(t.indexOf(e),1)})):i.yi(a.que,(function(e){var t=a.que;e===n&&t.splice(t.indexOf(e),1)})),e[t]=a)},t.get=function(){return e},t.getEvents=function(){var e=[];return i.yi(u,(function(t){var n=a({},t);e.push(n)})),e},t}();i.u2(c.emit.bind(c));var p=c.on,h=c.off,f=(c.get,c.getEvents),g=c.emit},7273:(e,t,n)=>{"use strict";n.d(t,{Bx:()=>c,bA:()=>u,v5:()=>d,z3:()=>s});var i=n(1242),r=n.n(i);function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var s=r()({ready:r().SYNC|r().ASYNC|r().QUEUE}),d=s.get,l={};function u(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.postInstallAllowed,r=void 0!==i&&i;s("async",(function(n){n.forEach((function(e){return t.apply(void 0,a(e))})),r&&(l[e]=t)}),e)([])}function c(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=l[e];if(r)return r.apply(void 0,n);d(e).before((function(e,t){t.push(n),e(t)}))}},3794:(e,t,n)=>{"use strict";n.d(t,{B5:()=>i,Mk:()=>a,Oh:()=>o,pX:()=>r});var i="native",r="video",a="banner",o="adpod"},4018:(e,t,n)=>{"use strict";n.d(t,{Fb:()=>g,JL:()=>_,Sg:()=>p,Ur:()=>y,e6:()=>v,eK:()=>b,r4:()=>m,xc:()=>h});var i=n(5446),r=n(4880),a=n(6222),o=n(1047),s=n(7926);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=[],h=Object.keys(s.FY).map((function(e){return s.FY[e]})),f={image:{image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}};function g(e){e.forEach((function(e){var t,n,o=e.nativeParams||(0,i.Z)(e,"mediaTypes.native");o&&(e.nativeParams=(t=o)&&t.type&&((n=t.type)&&(0,a.q9)(Object.keys(f),n)||((0,r.H)("".concat(n," nativeParam is not supported")),0))?f[t.type]:t)}))}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?o.K.index:n;if(!(0,i.Z)(e,"native.clickUrl"))return!1;var s=r.getAdUnit(e).nativeParams;if(!s)return!0;var d=Object.keys(s).filter((function(e){return s[e].required})),l=Object.keys(e.native).filter((function(t){return e.native[t]}));return d.every((function(e){return(0,a.q9)(l,e)}))}function v(e,t){var n;return"click"===e.action?n=t.native&&t.native.clickTrackers:(n=t.native&&t.native.impressionTrackers,t.native&&t.native.javascriptTrackers&&(0,r.$8)(t.native.javascriptTrackers)),(n||[]).forEach(r.hq),e.action}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?o.K.index:n,a={},s=r.getAdUnit(e);(0,i.Z)(s,"nativeParams.rendererUrl")?e.native.rendererUrl=T(s.nativeParams.rendererUrl):(0,i.Z)(s,"nativeParams.adTemplate")&&(e.native.adTemplate=T(s.nativeParams.adTemplate));var d=!1!==(0,i.Z)(s,"nativeParams.sendTargetingKeys"),l=w(s),c=u(u({},e.native),e.native.ext);return delete c.ext,Object.keys(c).forEach((function(t){var n=l[t],r=T(e.native[t])||T((0,i.Z)(e,"native.ext.".concat(t)));if("adTemplate"!==t&&n&&r){var o=(0,i.Z)(s,"nativeParams.".concat(t,".sendId"));"boolean"!=typeof o&&(o=(0,i.Z)(s,"nativeParams.ext.".concat(t,".sendId"))),o&&(r="".concat(n,":").concat(e.adId));var u=(0,i.Z)(s,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof u&&(u=(0,i.Z)(s,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof u?u:d)&&(a[n]=r)}})),a}function b(e,t){var n={message:"assetResponse",adId:e.adId,assets:[]};return t.native.hasOwnProperty("adTemplate")&&(n.adTemplate=T(t.native.adTemplate)),t.native.hasOwnProperty("rendererUrl")&&(n.rendererUrl=T(t.native.rendererUrl)),e.assets.forEach((function(e){var i=(0,r.V9)(s.FY,e),a=T(t.native[i]);n.assets.push({key:i,value:a})})),n}function _(e,t){var n={message:"assetResponse",adId:e.adId,assets:[]};return Object.keys(t.native).forEach((function(e,i){if("adTemplate"===e&&t.native[e])n.adTemplate=T(t.native[e]);else if("rendererUrl"===e&&t.native[e])n.rendererUrl=T(t.native[e]);else if("ext"===e)Object.keys(t.native[e]).forEach((function(i){if(t.native[e][i]){var r=T(t.native[e][i]);n.assets.push({key:i,value:r})}}));else if(t.native[e]&&s.FY.hasOwnProperty(e)){var r=T(t.native[e]);n.assets.push({key:e,value:r})}})),n}function T(e){return"object"===d(e)&&e.url?e.url:e}function w(e){var t={};return(0,i.Z)(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach((function(e){t[e]="hb_native_".concat(e)})),u(u({},s.FY),t)}},6222:(e,t,n)=>{"use strict";function i(e,t,n){return e&&e.includes(t,n)||!1}function r(){return Array.from.apply(Array,arguments)}function a(e,t,n){return e&&e.find(t,n)}n.d(t,{Oc:()=>r,q9:()=>i,sE:()=>a})},1303:(e,t,n)=>{"use strict";function i(){return window.pbjs}n.d(t,{R:()=>i}),window.pbjs=window.pbjs||{},window.pbjs.cmd=window.pbjs.cmd||[],window.pbjs.que=window.pbjs.que||[],window._pbjsGlobals=window._pbjsGlobals||[],window._pbjsGlobals.push("pbjs")},4611:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var i=n(753),r=n(4880),a=function(e){function t(e){var t=i.vc.getConfig("pageUrl");if(t)return t;try{var n=e.querySelector("link[rel='canonical']");if(null!==n)return n.href}catch(e){}return null}return function(){var n,a,o,s=[],d=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(e),l=i.vc.getConfig("maxNestedIframes"),u=!1,c=0,p=!1,h=!1;do{var f=n,g=h,m=void 0,v=!1,y=null;h=!1,n=n?n.parent:e;try{m=n.location.href||null}catch(e){v=!0}if(v)if(g){var b=f.context;try{a=y=b.sourceUrl,p=!0,n===e.top&&(u=!0),b.canonicalUrl&&(o=b.canonicalUrl)}catch(e){}}else{(0,r.yN)("Trying to access cross domain iframe. Continuing without referrer and location");try{var _=f.document.referrer;_&&(y=_,n===e.top&&(u=!0))}catch(e){}!y&&d&&d[c-1]&&(y=d[c-1]),y&&!p&&(a=y)}else{if(m&&(a=y=m,p=!1,n===e.top)){u=!0;var T=t(n.document);T&&(o=T)}n.context&&n.context.sourceUrl&&(h=!0)}s.push(y),c++}while(n!==e.top&&c<l);return s.reverse(),{referer:a||null,reachedTop:u,isAmp:p,numIframes:c-1,stack:s,canonicalUrl:o||null}}}(window)},9994:(e,t,n)=>{"use strict";n.d(t,{UB:()=>h,lO:()=>u});var i=n(753),r=n(4880),a=n(5446),o=n(6222);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}var d=[];function l(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n=p(t);return!n.shouldFilter||!!n.sizesSupported[e]}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,n=void 0===t?[]:t,i=e.labelAll,s=void 0!==i&&i,l=e.activeLabels,u=void 0===l?[]:l,c=arguments.length>1?arguments[1]:void 0,h=arguments.length>2?arguments[2]:void 0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d,g=p(f);c=(0,r.PO)(c)?(0,r.I8)(c):h?{banner:{sizes:h}}:{};var m=(0,a.Z)(c,"banner.sizes");g.shouldFilter&&m&&(c.banner.sizes=m.filter((function(e){return g.sizesSupported[e]})));var v=Object.keys(c),y={active:v.every((function(e){return"banner"!==e}))||v.some((function(e){return"banner"===e}))&&(0,a.Z)(c,"banner.sizes.length")>0&&(0===n.length||!s&&(n.some((function(e){return g.labels[e]}))||n.some((function(e){return(0,o.q9)(u,e)})))||s&&n.reduce((function(e,t){return e?g.labels[t]||(0,o.q9)(u,t):e}),!0)),mediaTypes:c};return m&&m.length!==c.banner.sizes.length&&(y.filterResults={before:m,after:c.banner.sizes}),y}function p(e){return e.reduce((function(e,t){if("object"===s(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var n=!1;try{n=(0,r.Zy)().matchMedia(t.mediaQuery).matches}catch(e){(0,r.yN)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),n=matchMedia(t.mediaQuery).matches}n&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach((function(n){return(t[n]||[]).forEach((function(t){return e[n][t]=!0}))})))}else(0,r.yN)('sizeConfig rule missing required property "mediaQuery"');return e}),{labels:{},sizesSupported:{},shouldFilter:!1})}function h(e,t){return e.reduce((function(e,n){var i=c(l(n,t),n.mediaTypes,n.sizes),a=i.active,o=i.mediaTypes,s=i.filterResults;return a?(s&&(0,r.PN)('Size mapping filtered adUnit "'.concat(n.code,'" banner sizes from '),s.before,"to ",s.after),n.mediaTypes=o,n.bids=n.bids.reduce((function(e,i){var a=c(l(i,t),n.mediaTypes),o=a.active,s=a.mediaTypes,d=a.filterResults;return o?(d&&((0,r.PN)('Size mapping filtered adUnit "'.concat(n.code,'" bidder "').concat(i.bidder,'" banner sizes from '),d.before,"to ",d.after),i.mediaTypes=s),e.push(i)):(0,r.PN)('Size mapping deactivated adUnit "'.concat(n.code,'" bidder "').concat(i.bidder,'"')),e}),[]),e.push(n)):(0,r.PN)('Size mapping disabled adUnit "'.concat(n.code,'"')),e}),[])}i.vc.getConfig("sizeConfig",(function(e){return function(e){d=e}(e.sizeConfig)}))},4447:(e,t,n)=>{"use strict";n.d(t,{Ld:()=>d,S6:()=>u,df:()=>p,eA:()=>c});var i=n(7273),r=n(4880),a=n(6222),o=n(4039),s=["core","prebid-module"],d=[];function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gvlid,n=e.moduleName,i=e.bidderCode,l=e.moduleType,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=c.bidderSettings,h=void 0===p?o.S:p;function f(){if(null==i)return!1;var e=h.get(i,"storageAllowed");return null!=e&&!e}function g(e){return(0,a.q9)(s,l)?e({valid:!0}):f()?((0,r.PN)("bidderSettings denied access to device storage for bidder '".concat(i,"'")),e({valid:!1})):(u(t,i||n,{hasEnforcementHook:!1},(function(t){if(t&&t.hasEnforcementHook)o=e(t);else{var n={hasEnforcementHook:!1,valid:(0,r.wn)()};o=e(n)}})),o);var o}var m=function(e,t,n,i,r,a){var o=function(a){if(a&&a.valid){var o=r&&""!==r?" ;domain=".concat(encodeURIComponent(r)):"",s=n&&""!==n?" ;expires=".concat(n):"",d=null!=i&&"none"==i.toLowerCase()?"; Secure":"";document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(o).concat(i?"; SameSite=".concat(i):"").concat(d)}};if(!a||"function"!=typeof a)return g(o);d.push((function(){var e=g(o);a(e)}))},v=function(e,t){var n=function(t){if(t&&t.valid){var n=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return n?decodeURIComponent(n[2]):null}return null};if(!t||"function"!=typeof t)return g(n);d.push((function(){var e=g(n);t(e)}))},y=function(e){var t=function(e){if(e&&e.valid)try{return localStorage.setItem("prebid.cookieTest","1"),"1"===localStorage.getItem("prebid.cookieTest")}catch(e){}finally{try{localStorage.removeItem("prebid.cookieTest")}catch(e){}}return!1};if(!e||"function"!=typeof e)return g(t);d.push((function(){var n=g(t);e(n)}))},b=function(e){var t=function(e){return!(!e||!e.valid||!(0,r.IG)()&&(window.document.cookie="prebid.cookieTest",-1===window.document.cookie.indexOf("prebid.cookieTest")))};if(!e||"function"!=typeof e)return g(t);d.push((function(){var n=g(t);e(n)}))},_=function(e,t,n){var i=function(n){n&&n.valid&&S()&&window.localStorage.setItem(e,t)};if(!n||"function"!=typeof n)return g(i);d.push((function(){var e=g(i);n(e)}))},T=function(e,t){var n=function(t){return t&&t.valid&&S()?window.localStorage.getItem(e):null};if(!t||"function"!=typeof t)return g(n);d.push((function(){var e=g(n);t(e)}))},w=function(e,t){var n=function(t){t&&t.valid&&S()&&window.localStorage.removeItem(e)};if(!t||"function"!=typeof t)return g(n);d.push((function(){var e=g(n);t(e)}))},S=function(e){var t=function(e){if(e&&e.valid)try{return!!window.localStorage}catch(e){(0,r.H)("Local storage api disabled")}return!1};if(!e||"function"!=typeof e)return g(t);d.push((function(){var n=g(t);e(n)}))},k=function(e,t){var n=function(t){if(t&&t.valid){var n=[];if((0,r.wn)())for(var i=document.cookie.split(";");i.length;){var a=i.pop(),o=a.indexOf("=");o=o<0?a.length:o,decodeURIComponent(a.slice(0,o).replace(/^\s+/,"")).indexOf(e)>=0&&n.push(decodeURIComponent(a.slice(o+1)))}return n}};if(!t||"function"!=typeof t)return g(n);d.push((function(){var e=g(n);t(e)}))};return{setCookie:m,getCookie:v,localStorageIsEnabled:y,cookiesAreEnabled:b,setDataInLocalStorage:_,getDataFromLocalStorage:T,removeDataFromLocalStorage:w,hasLocalStorage:S,findSimilarCookies:k}}var u=(0,i.z3)("async",(function(e,t,n,i){i(n)}),"validateStorageEnforcement");function c(e){return l({moduleName:e,moduleType:"core"})}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gvlid,n=e.moduleName,i=e.bidderCode;if(arguments.length>1||arguments.length>0&&!(0,r.PO)(arguments[0]))throw new Error("Invalid invocation for getStorageManager");return l({gvlid:t,moduleName:n,bidderCode:i})}},8098:(e,t,n)=>{"use strict";n.d(t,{k_:()=>p});var i=n(4880),r=n(753),a=n(6222),o=n(4447);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l.apply(this,arguments)}r.vc.setDefaults({userSync:(0,i.I8)({syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:0})});var u=(0,o.eA)("usersync"),c=!(0,i.fr)()&&u.cookiesAreEnabled(),p=function(e){var t={},n={image:[],iframe:[]},o=new Set,d={},u={image:!0,iframe:!1},c=e.config;function p(){if(c.syncEnabled&&e.browserSupportsCookies){try{u.iframe&&h(n.iframe,(function(e){var t=s(e,2),r=t[0],a=t[1];(0,i.ji)("Invoking iframe user sync for bidder: ".concat(r)),(0,i.Vs)(a),function(e,t){e.image=e.image.filter((function(e){return e[0]!==t}))}(n,r)})),u.image&&h(n.image,(function(e){var t=s(e,2),n=t[0],r=t[1];(0,i.ji)("Invoking image pixel user sync for bidder: ".concat(n)),(0,i.hq)(r)}))}catch(e){return(0,i.H)("Error firing user syncs",e)}n={image:[],iframe:[]}}}function h(e,t){(0,i.TV)(e).forEach((function(e){t(e),o.add(e[0])}))}return r.vc.getConfig("userSync",(function(e){if(e.userSync){var t=e.userSync.filterSettings;(0,i.PO)(t)&&(t.image||t.all||(e.userSync.filterSettings.image={bidders:"*",filter:"include"}))}c=l(c,e.userSync)})),t.registerSync=function(e,r,a){return o.has(r)?(0,i.ji)('already fired syncs for "'.concat(r,'", ignoring registerSync call')):c.syncEnabled&&(0,i.kJ)(n[e])?r?0!==c.syncsPerBidder&&Number(d[r])>=c.syncsPerBidder?(0,i.yN)('Number of user syncs exceeded for "'.concat(r,'"')):t.canBidderRegisterSync(e,r)?(n[e].push([r,a]),void(d=function(e,t){return e[t]?e[t]+=1:e[t]=1,e}(d,r))):(0,i.yN)('Bidder "'.concat(r,'" not permitted to register their "').concat(e,'" userSync pixels.')):(0,i.yN)("Bidder is required for registering sync"):(0,i.yN)('User sync type "'.concat(e,'" not supported'))},t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(p,Number(e));p()},t.triggerUserSyncs=function(){c.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!c.filterSettings||!function(e,t){var n=c.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,i.yN)('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var n=e.all?e.all:e[t],r=e.all?"all":t;if(!n)return!1;var a=n.filter,o=n.bidders;return a&&"include"!==a&&"exclude"!==a?((0,i.yN)('UserSync "filterSettings.'.concat(r,".filter\" setting '").concat(a,"' is not a valid option; use either 'include' or 'exclude'.")),!1):!!("*"===o||Array.isArray(o)&&o.length>0&&o.every((function(e){return(0,i.d8)(e)&&"*"!==e})))||((0,i.yN)('Detected an invalid setup in userSync "filterSettings.'.concat(r,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(n,e)){u[e]=!0;var r=n.all?n.all:n[e],o="*"===r.bidders?[t]:r.bidders,s={include:function(e,t){return!(0,a.q9)(e,t)},exclude:function(e,t){return(0,a.q9)(e,t)}};return s[r.filter||"include"](o,t)}return!u[e]}(e,t)},t}({config:r.vc.getConfig("userSync"),browserSupportsCookies:c})},4880:(e,t,n)=>{"use strict";n.d(t,{$8:()=>ge,$u:()=>Y,AB:()=>je,An:()=>D,Bq:()=>tt,CS:()=>Xe,DO:()=>O,EE:()=>I,Ee:()=>ht,FS:()=>ze,G2:()=>Je,H:()=>G,HA:()=>ue,HC:()=>it,I8:()=>De,IG:()=>Fe,IK:()=>Oe,K$:()=>Ae,LQ:()=>ee,NA:()=>we,NI:()=>B,Ob:()=>M,PN:()=>W,PO:()=>re,Q2:()=>ct,R_:()=>fe,Re:()=>L,S0:()=>We,SG:()=>ve,T9:()=>Ie,TV:()=>xe,U:()=>Ye,V9:()=>Se,Vs:()=>me,W$:()=>gt,X4:()=>Ce,XV:()=>ot,Yp:()=>lt,ZH:()=>Ee,Zy:()=>q,_R:()=>ft,_d:()=>x,ak:()=>A,bd:()=>Ne,d5:()=>st,d8:()=>te,dj:()=>mt,e7:()=>V,ei:()=>et,en:()=>ut,ew:()=>Me,fr:()=>Le,fz:()=>Qe,hj:()=>ie,hl:()=>rt,hq:()=>he,iG:()=>He,jC:()=>ce,jH:()=>se,ji:()=>z,jn:()=>ae,kJ:()=>ne,oV:()=>$e,or:()=>Ze,pP:()=>ke,pw:()=>U,qp:()=>K,r3:()=>le,rD:()=>J,s:()=>N,sF:()=>j,t0:()=>R,tT:()=>be,u2:()=>T,uh:()=>nt,vM:()=>Ve,wn:()=>Be,xH:()=>_e,x_:()=>Ue,xb:()=>oe,yL:()=>Re,yN:()=>$,yi:()=>de,yo:()=>at,yx:()=>qe,zE:()=>Te,zV:()=>Ke});var i=n(753),r=n(1269),a=n.n(r),o=n(6222),s=n(7926);function d(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},p.apply(this,arguments)}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}var f,g=Object.prototype.toString,m=Boolean(window.console),v=Boolean(m&&window.console.log),y=Boolean(m&&window.console.info),b=Boolean(m&&window.console.warn),_=Boolean(m&&window.console.error);function T(e){f=e}function w(){null!=f&&f.apply(void 0,arguments)}var S={checkCookieSupport:Fe,createTrackPixelIframeHtml:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?(t&&(e=encodeURI(e)),n&&(n='sandbox="'.concat(n,'"')),"<iframe ".concat(n,' id="').concat(x(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""},getWindowSelf:V,getWindowTop:q,getWindowLocation:H,insertUserSyncIframe:me,insertElement:ce,isFn:ee,triggerPixel:he,logError:G,logWarn:$,logMessage:z,logInfo:W,parseQS:dt,formatQS:lt,deepEqual:pt},k={};function I(){return k}var C,E={},A=function(e,t){return t}.bind(null,1,E)()===E?Function.prototype.bind:function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))}},P=(C=0,function(){return++C});function x(){return P()+Math.random().toString(16).substr(2)}function O(e){return e?(e^(window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random())>>e/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,O)}function D(e,t){return t&&t[e]?t[e]:""}function R(e,t,n){return n?e+t+"="+encodeURIComponent(n)+"&":e}function L(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+"="+encodeURIComponent(e[n])+"&");return t.replace(/&$/,"")}function M(e){return e&&Object.getOwnPropertyNames(e).length>0?(t=e,Object.keys(t)).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(we(e,t)))})).join("&"):"";var t}function U(e){if(e){var t=[];if(e.mediaTypes&&e.mediaTypes.banner&&Array.isArray(e.mediaTypes.banner.sizes)){var n=e.mediaTypes.banner.sizes;Array.isArray(n[0])?t=n:t.push(n)}else Array.isArray(e.sizes)&&(Array.isArray(e.sizes[0])?t=e.sizes:t.push(e.sizes));return t}}function j(e){var t,n,i=[];if("string"==typeof e){var r=e.split(","),a=/^(\d)+x(\d)+$/i;if(r)for(var o in r)n=o,((t=r).hasOwnProperty?t.hasOwnProperty(n):void 0!==t[n]&&t.constructor.prototype[n]!==t[n])&&r[o].match(a)&&i.push(r[o])}else if("object"===h(e)){var s=e.length;if(s>0)if(2===s&&"number"==typeof e[0]&&"number"==typeof e[1])i.push(N(e));else for(var d=0;d<s;d++)i.push(N(e[d]))}return i}function N(e){if(F(e))return e[0]+"x"+e[1]}function B(e){if(F(e))return{w:e[0],h:e[1]}}function F(e){return ne(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function q(){return window.top}function V(){return window.self}function H(){return window.location}function z(){Z()&&v&&console.log.apply(console,X(arguments,"MESSAGE:"))}function W(){Z()&&y&&console.info.apply(console,X(arguments,"INFO:"))}function $(){Z()&&b&&console.warn.apply(console,X(arguments,"WARNING:")),w(s.FP.AUCTION_DEBUG,{type:"WARNING",arguments})}function G(){Z()&&_&&console.error.apply(console,X(arguments,"ERROR:")),w(s.FP.AUCTION_DEBUG,{type:"ERROR",arguments})}function K(e){function t(t){return function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];t.apply(void 0,[e].concat(i))}}return{logError:t(G),logWarn:t($),logMessage:t(z),logInfo:t(W)}}function X(e,t){e=[].slice.call(e);var n=i.vc.getCurrentBidder();return t&&e.unshift(t),n&&e.unshift(r("#aaa")),e.unshift(r("#3b88c3")),e.unshift("%cPrebid"+(n?"%c".concat(n):"")),e;function r(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function Z(){return!!i.vc.getConfig("debug")}function Y(){var e=document.createElement("iframe");return e.id=x(),e.height=0,e.width=0,e.border="0px",e.hspace="0",e.vspace="0",e.marginWidth="0",e.marginHeight="0",e.style.border="0",e.scrolling="no",e.frameBorder="0",e.src="about:blank",e.style.display="none",e}function J(e){return dt(H().search)[e]||""}function Q(e,t){return g.call(e)==="[object "+t+"]"}function ee(e){return Q(e,"Function")}function te(e){return Q(e,"String")}function ne(e){return Q(e,"Array")}function ie(e){return Q(e,"Number")}function re(e){return Q(e,"Object")}function ae(e){return Q(e,"Boolean")}function oe(e){if(!e)return!0;if(ne(e)||te(e))return!(e.length>0);for(var t in e)if(hasOwnProperty.call(e,t))return!1;return!0}function se(e){return te(e)&&(!e||0===e.length)}function de(e,t){if(!oe(e)){if(ee(e.forEach))return e.forEach(t,this);var n=0,i=e.length;if(i>0)for(;n<i;n++)t(e[n],n,e);else for(n in e)hasOwnProperty.call(e,n)&&t.call(this,e[n],n)}}function le(e,t){if(oe(e))return!1;if(ee(e.indexOf))return-1!==e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}function ue(e,t){if(oe(e))return[];if(ee(e.map))return e.map(t);var n=[];return de(e,(function(i,r){n.push(t(i,r,e))})),n}function ce(e,t,n,i){var r;t=t||document,r=n?t.getElementsByTagName(n):t.getElementsByTagName("head");try{if((r=r.length?r:t.getElementsByTagName("body")).length){r=r[0];var a=i?null:r.firstChild;return r.insertBefore(e,a)}}catch(e){}}function pe(e,t){var n=null;return new Promise((function(i){var r=function t(){e.removeEventListener("load",t),e.removeEventListener("error",t),null!=n&&window.clearTimeout(n),i()};e.addEventListener("load",r),e.addEventListener("error",r),null!=t&&(n=window.setTimeout(r,t))}))}function he(e,t,n){var i=new Image;t&&S.isFn(t)&&pe(i,n).then(t),i.src=e}function fe(e){var t=e.source,n=e.burl;t===s.os.YZ&&n&&S.triggerPixel(n)}function ge(e){if(e){var t=document.createElement("iframe");t.id=x(),t.width=0,t.height=0,t.hspace="0",t.vspace="0",t.marginWidth="0",t.marginHeight="0",t.style.display="none",t.style.height="0px",t.style.width="0px",t.scrolling="no",t.frameBorder="0",t.allowtransparency="true",S.insertElement(t,document,"body"),t.contentWindow.document.open(),t.contentWindow.document.write(e),t.contentWindow.document.close()}}function me(e,t,n){var i=S.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),r=document.createElement("div");r.innerHTML=i;var a=r.firstChild;t&&S.isFn(t)&&pe(a,n).then(t),S.insertElement(a,document,"html",!0)}function ve(e){return e?'<div style="position:absolute;left:0px;top:0px;visibility:hidden;">'+'<img src="'+encodeURI(e)+'"></div>':""}function ye(e,t,n){return null==t?n:te(t)?t:ie(t)?t.toString():void S.logWarn("Unsuported type for param: "+e+" required type: String")}function be(e,t,n){return n.indexOf(e)===t}function _e(e,t){return e.concat(t)}function Te(e,t){var n;if(e)return t.some((function(t){var i=(0,o.sE)(t.bids,(function(t){return["bidId","adId","bid_id"].some((function(n){return t[n]===e}))}));return i&&(n=i),i})),n}function we(e,t){return e[t]}function Se(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===t)return n}function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pbjs.adUnits;return e.map((function(e){return e.bids.map((function(e){return e.bidder})).reduce(_e,[])})).reduce(_e,[]).filter(be)}function Ie(){if(window.googletag&&ee(window.googletag.pubads)&&ee(window.googletag.pubads().getSlots))return!0}function Ce(){if(window.apntag&&ee(window.apntag.getTag))return!0}var Ee=Pe("timeToRespond",(function(e,t){return e>t})),Ae=Pe("responseTimestamp",(function(e,t){return e>t}));function Pe(e,t){return function(n,i){return n.cpm===i.cpm?t(n[e],i[e])?i:n:n.cpm<i.cpm?i:n}}function xe(e){for(var t=e.length;t>0;){var n=Math.floor(Math.random()*t),i=e[--t];e[t]=e[n],e[n]=i}return e}function Oe(e,t){return(0,o.q9)(e,t&&t.adUnitCode)}function De(e){return a()(e)}function Re(){try{return S.getWindowSelf()!==S.getWindowTop()}catch(e){return!0}}function Le(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)}function Me(e,t){if(e)return e.replace(/\$\{AUCTION_PRICE\}/g,t)}function Ue(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)}function je(){return(new Date).getTime()}function Ne(){return window.performance&&window.performance.now&&window.performance.now()||0}function Be(){return!1!==i.vc.getConfig("deviceAccess")}function Fe(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}function qe(e,t){if(t<1)throw new Error("numRequiredCalls must be a positive number. Got ".concat(t));var n=0;return function(){++n===t&&e.apply(this,arguments)}}function Ve(e,t){return e.reduce((function(e,n){return(e[n[t]]=e[n[t]]||[]).push(n),e}),{})}function He(e,t){return t.filter((function(t){return e[t]})).reduce((function(t,n){return p(t,c({},n,e[n]))}),{})}function ze(e){var t=["banner","native","video"];return!!Object.keys(e).every((function(e){return(0,o.q9)(t,e)}))&&(!e.video||!e.video.context||(0,o.q9)(["instream","outstream","adpod"],e.video.context))}function We(e,t,n){return e.filter((function(e){return e.code===t})).map((function(e){return e.bids})).reduce(_e,[]).filter((function(e){return e.bidder===n})).map((function(e){return e.params||{}}))}function $e(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack}Pe("responseTimestamp",(function(e,t){return e<t}));var Ge=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t};function Ke(e){return function(t){return Ge(e,t)}}function Xe(e){return function(t){return Ge(t,e)}}function Ze(e,t){var n=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(n," ad unit\n    containing bidders that don't support ").concat(n,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")}function Ye(e){return Number.isInteger?Number.isInteger(e):"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}function Je(e){return e.replace(/(?:^|\.?)([A-Z])/g,(function(e,t){return"_"+t.toLowerCase()})).replace(/^_/,"")}function Qe(e){return Object.keys(e).reduce((function(t,n){return void 0!==e[n]&&(t[n]=e[n]),t}),{})}function et(e,t){return"object"!==h(e)?{}:t.reduce((function(n,i,r){if("function"==typeof i)return n;var a=i,o=i.match(/^(.+?)\sas\s(.+?)$/i);o&&(i=o[1],a=o[2]);var s=e[i];return"function"==typeof t[r+1]&&(s=t[r+1](s,n)),void 0!==s&&(n[a]=s),n}),{})}function tt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",n=[];return de(e,(function(e,i){if(ne(e)){var r=[];de(e,(function(e){((e=ye(t+"."+i,e))||""===e)&&r.push(e)})),e=r}else{if(!te(e=ye(t+"."+i,e)))return;e=[e]}n.push({key:i,value:e})})),n}function nt(e,t){return Object.keys(e).forEach((function(n){var i,r;t[n]&&(ee(e[n])?t[n]=e[n](t[n]):t[n]=(i=e[n],r=t[n],"string"===i?r&&r.toString():"number"===i?Number(r):r),isNaN(t[n])&&delete t.key)})),t}function it(e,t){return ne(e)&&(!t||e.length===t)&&e.every((function(e){return Ye(e)}))}function rt(e,t){for(var n=[],i=0;i<t;i++){var r=re(e)?De(e):e;n.push(r)}return n}function at(e,t){for(var n=[],i=0;i<Math.ceil(e.length/t);i++){var r=i*t,a=r+t;n.push(e.slice(r,a))}return n}function ot(e){return Math.min.apply(Math,d(e))}function st(e){return Math.max.apply(Math,d(e))}function dt(e){return e?e.replace(/^\?/,"").split("&").reduce((function(e,t){var n,i,r=(n=t.split("="),i=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(n,i)||l(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=r[0],o=r[1];return/\[\]$/.test(a)?(e[a=a.replace("[]","")]=e[a]||[],e[a].push(o)):e[a]=o||"",e}),{}):{}}function lt(e){return Object.keys(e).map((function(t){return Array.isArray(e[t])?e[t].map((function(e){return"".concat(t,"[]=").concat(e)})).join("&"):"".concat(t,"=").concat(e[t])})).join("&")}function ut(e,t){var n=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?n.href=e:n.href=decodeURIComponent(e);var i=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:n.href,protocol:(n.protocol||"").replace(/:$/,""),hostname:n.hostname,port:+n.port,pathname:n.pathname.replace(/^(?!\/)/,"/"),search:i?n.search:S.parseQS(n.search||""),hash:(n.hash||"").replace(/^#/,""),host:n.host||window.location.host}}function ct(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(S.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")}function pt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.checkTypes,r=void 0!==i&&i;if(e===t)return!0;if("object"!==h(e)||null===e||"object"!==h(t)||null===t||r&&e.constructor!==t.constructor)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var a in e){if(!t.hasOwnProperty(a))return!1;if(!pt(e[a],t[a],{checkTypes:r}))return!1}return!0}function ht(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(!n.length)return e;var r=n.shift();if(re(e)&&re(r)){var a=function(t){re(r[t])?(e[t]||p(e,c({},t,{})),ht(e[t],r[t])):ne(r[t])?e[t]?ne(e[t])&&r[t].forEach((function(n){for(var i=1,r=0;r<e[t].length;r++)if(pt(e[t][r],n)){i=0;break}i&&e[t].push(n)})):p(e,c({},t,d(r[t]))):p(e,c({},t,r[t]))};for(var o in r)a(o)}return ht.apply(void 0,[e].concat(n))}function ft(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=function(e,t){if(ee(Math.imul))return Math.imul(e,t);var n=(4194303&e)*(t|=0);return 4290772992&e&&(n+=(4290772992&e)*t|0),0|n},r=3735928559^n,a=1103547991^n,o=0;o<e.length;o++)r=i(r^(t=e.charCodeAt(o)),2654435761),a=i(a^t,1597334677);return r=i(r^r>>>16,2246822507)^i(a^a>>>13,3266489909),(4294967296*(2097151&(a=i(a^a>>>16,2246822507)^i(r^r>>>13,3266489909)))+(r>>>0)).toString()}function gt(e){return e?e.defaultView:null}function mt(e){try{return JSON.parse(e)}catch(e){}}},1539:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>u,LD:()=>l,gZ:()=>d});var i=n(5446),r=n(4880),a=n(753),o=n(7273),s=n(1047),d="outstream",l="instream";function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index,r=void 0===n?s.K.index:n,a=(0,i.Z)(r.getMediaTypes(e),"video"),o=a&&(0,i.Z)(a,"context"),d=r.getAdUnit(e);return c(e,d,a,o)}var c=(0,o.z3)("sync",(function(e,t,n,i){return n&&i!==d?a.vc.getConfig("cache.url")||!e.vastXml||e.vastUrl?!(!e.vastUrl&&!e.vastXml):((0,r.H)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1):i!==d||!!(e.renderer||t&&t.renderer||n.renderer)}),"checkVideoBidSetup")},3994:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t,n="",r=e||{};return function(e,r,a,o,s,d,l,u){n=n+'<div class="branded-content"><div class="branded-content__title">'+i.escape(null==(t=l)?"":t)+'</div><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+i.attr("id",s,!0,!0)+i.attr("controls",!0,!0,!0)+' preload="false"'+i.attr("width",u,!0,!0)+i.attr("height",o,!0,!0)+i.attr("data-opts",r,!0,!0)+"><source"+i.attr("src",d,!0,!0)+' type="video/mp4"></video></div><div class="branded-content__description"><a'+i.attr("href",e,!0,!0)+' rel="nofollow" target="_blank">'+i.escape(null==(t=a)?"":t)+"</a></div></div>"}.call(this,"click"in r?r.click:"undefined"!=typeof click?click:void 0,"dataOpts"in r?r.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"description"in r?r.description:"undefined"!=typeof description?description:void 0,"height"in r?r.height:"undefined"!=typeof height?height:void 0,"id"in r?r.id:"undefined"!=typeof id?id:void 0,"src"in r?r.src:"undefined"!=typeof src?src:void 0,"title"in r?r.title:"undefined"!=typeof title?title:void 0,"width"in r?r.width:"undefined"!=typeof width?width:void 0),n}},5802:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n,r,a,o){t=t+'<div class="branded-content"><div class="branded-content__player vjs-video-container vjs-responsive"><video class="video-js vjs-default-skin"'+i.attr("id",r,!0,!0)+i.attr("controls",!0,!0,!0)+' preload="false"'+i.attr("width",o,!0,!0)+i.attr("height",n,!0,!0)+i.attr("data-opts",e,!0,!0)+"><source"+i.attr("src",a,!0,!0)+' type="video/mp4"></video></div></div>'}.call(this,"dataOpts"in n?n.dataOpts:"undefined"!=typeof dataOpts?dataOpts:void 0,"height"in n?n.height:"undefined"!=typeof height?height:void 0,"id"in n?n.id:"undefined"!=typeof id?id:void 0,"src"in n?n.src:"undefined"!=typeof src?src:void 0,"width"in n?n.width:"undefined"!=typeof width?width:void 0),t}},4843:(e,t,n)=>{n(6856),e.exports=function(e){return""+'<div style="position:fixed; z-index:999999; top:20px; left:20px;"><button id="debugRemoteButton" style="background-color:red; color:white; border:1px solid darkred; padding:10px;">Mark as buggy</button><div id="debugRemoteButtonText" style="display:none;"><textarea style="display:block;"></textarea><button style="background-color:red; color:white; display:block; border:1px solid darkred; padding:10px;">Send</button></div></div>'}},7430:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n){t=t+'<video class="video-js"'+i.attr("controls",!0,!0,!0)+' data-setup="{}" height="250"'+i.attr("id",n,!0,!0)+i.attr("poster",e,!0,!0)+' preload="auto" width="445"><p class="vjs-no-js">To view this video please enable JavaScript, \nand consider upgrading to a web browser that <a href="https://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p></video><div id="mpu_player_wrapper"><div class="adHolder" id="mpu_player"></div></div>'}.call(this,"poster"in n?n.poster:"undefined"!=typeof poster?poster:void 0,"videoId"in n?n.videoId:"undefined"!=typeof videoId?videoId:void 0),t}},6570:(e,t,n)=>{var i=n(6856);e.exports=function(e){var t="",n=e||{};return function(e,n,r,a){t=t+"<script>window.dataLayer = window.dataLayer || []\nwindow.dataLayer.push({\n  'gtm.start': new Date().getTime(),\n  event: 'gtm.js'\n})\nconst analytics = window['$$mm-analytics'] = window['$$mm-analytics'] || {}\nif (typeof analytics.firstEmbed === 'undefined') {\n  analytics.firstEmbed = Date.now()\n}\n<\/script><script"+i.attr("src",r,!0,!0)+'><\/script><iframe height="0" width="0"'+i.attr("src",n,!0,!0)+"></iframe><script"+(i.attr("async",!0,!0,!0)+i.attr("src",e,!0,!0))+"><\/script><script"+(i.attr("async",!0,!0,!0)+i.attr("src",a,!0,!0))+"><\/script>"}.call(this,"configScript"in n?n.configScript:"undefined"!=typeof configScript?configScript:void 0,"googleTagManagerIframeScript"in n?n.googleTagManagerIframeScript:"undefined"!=typeof googleTagManagerIframeScript?googleTagManagerIframeScript:void 0,"googleTagManagerScript"in n?n.googleTagManagerScript:"undefined"!=typeof googleTagManagerScript?googleTagManagerScript:void 0,"injectorScript"in n?n.injectorScript:"undefined"!=typeof injectorScript?injectorScript:void 0),t}},1580:e=>{function t(){return e.exports=t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},9475:function(e,t){var n,i,r;!function(a,o){"use strict";i=[],void 0===(r="function"==typeof(n=function(){return function(){var e,t=navigator,n=t.connection||t.mozConnection||t.webkitConnection||{downlinkMax:1/0};if(!("downlinkMax"in n))if("bandwidth"in n)n.downlinkMax=8*n.bandwidth;else{switch(n.type){case"none":e=0;break;case"2g":e=.134;break;case"bluetooth":case"cellular":e=2;break;case"3g":e=8.95;break;case"4g":e=100;break;case"ethernet":e=550;break;case"wifi":e=600;break;default:e=1/0}n.downlinkMax=e}return n.downlinkMax}})?n.apply(t,i):n)||(e.exports=r)}()},3595:(e,t,n)=>{"use strict";var i=n(1667);e.exports=function(e,t){return void 0===t&&(t=!1),function(n,r,a){if(n)e(n);else if(r.statusCode>=400&&r.statusCode<=599){var o=a;if(t)if(i.TextDecoder){var s=(void 0===(d=r.headers&&r.headers["content-type"])&&(d=""),d.toLowerCase().split(";").reduce((function(e,t){var n=t.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():e}),"utf-8"));try{o=new TextDecoder(s).decode(a)}catch(e){}}else o=String.fromCharCode.apply(null,new Uint8Array(a));e({cause:o})}else e(null,a);var d}}},1731:(e,t,n)=>{"use strict";var i=n(1667),r=n(1580),a=n(8495);function o(e,t,n){var i=e;return a(t)?(n=t,"string"==typeof e&&(i={uri:e})):i=r({},t,{uri:e}),i.callback=n,i}function s(e,t,n){return d(t=o(e,t,n))}function d(e){if(void 0===e.callback)throw new Error("callback argument missing");var t=!1,n=function(n,i,r){t||(t=!0,e.callback(n,i,r))};function i(){var e=void 0;if(e=l.response?l.response:l.responseText||function(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}(l),m)try{e=JSON.parse(e)}catch(e){}return e}function r(e){return clearTimeout(u),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,n(e,v)}function a(){if(!d){var t;clearTimeout(u),t=e.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=v,a=null;return 0!==t?(r={body:i(),statusCode:t,method:p,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(r.headers=function(e){var t={};return e?(e.trim().split("\n").forEach((function(e){var n=e.indexOf(":"),i=e.slice(0,n).trim().toLowerCase(),r=e.slice(n+1).trim();void 0===t[i]?t[i]=r:Array.isArray(t[i])?t[i].push(r):t[i]=[t[i],r]})),t):t}(l.getAllResponseHeaders()))):a=new Error("Internal XMLHttpRequest Error"),n(a,r,r.body)}}var o,d,l=e.xhr||null;l||(l=e.cors||e.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var u,c=l.url=e.uri||e.url,p=l.method=e.method||"GET",h=e.body||e.data,f=l.headers=e.headers||{},g=!!e.sync,m=!1,v={body:void 0,headers:{},statusCode:0,method:p,url:c,rawRequest:l};if("json"in e&&!1!==e.json&&(m=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==p&&"HEAD"!==p&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),h=JSON.stringify(!0===e.json?h:e.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(a,0)},l.onload=a,l.onerror=r,l.onprogress=function(){},l.onabort=function(){d=!0},l.ontimeout=r,l.open(p,c,!g,e.username,e.password),g||(l.withCredentials=!!e.withCredentials),!g&&e.timeout>0&&(u=setTimeout((function(){if(!d){d=!0,l.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",r(e)}}),e.timeout)),l.setRequestHeader)for(o in f)f.hasOwnProperty(o)&&l.setRequestHeader(o,f[o]);else if(e.headers&&!function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(l.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(l),l.send(h||null),l}s.httpHandler=n(3595),e.exports=s,e.exports.default=s,s.XMLHttpRequest=i.XMLHttpRequest||function(){},s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:i.XDomainRequest,function(e,t){for(var n=0;n<e.length;n++)t(e[n])}(["get","put","post","patch","head","delete"],(function(e){s["delete"===e?"del":e]=function(t,n,i){return(n=o(t,n,i)).method=e.toUpperCase(),d(n)}}))},7564:(e,t)=>{"use strict";function n(e,t){return void 0===t&&(t=Object),t&&"function"==typeof t.freeze?t.freeze(e):e}var i=n({HTML:"text/html",isHTML:function(e){return e===i.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),r=n({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(e){return e===r.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});t.freeze=n,t.MIME_TYPE=i,t.NAMESPACE=r},193:(e,t,n)=>{var i=n(7564),r=n(965),a=n(3182),o=n(6809),s=r.DOMImplementation,d=i.NAMESPACE,l=o.ParseError,u=o.XMLReader;function c(e){this.options=e||{locator:{}}}function p(){this.cdata=!1}function h(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function f(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function g(e,t,n){return"string"==typeof e?e.substr(t,n):e.length>=t+n||t?new java.lang.String(e,t,n)+"":e}function m(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}c.prototype.parseFromString=function(e,t){var n=this.options,i=new u,r=n.domBuilder||new p,o=n.errorHandler,s=n.locator,l=n.xmlns||{},c=/\/x?html?$/.test(t),h=c?a.HTML_ENTITIES:a.XML_ENTITIES;return s&&r.setDocumentLocator(s),i.errorHandler=function(e,t,n){if(!e){if(t instanceof p)return t;e=t}var i={},r=e instanceof Function;function a(t){var a=e[t];!a&&r&&(a=2==e.length?function(n){e(t,n)}:e),i[t]=a&&function(e){a("[xmldom "+t+"]\t"+e+f(n))}||function(){}}return n=n||{},a("warning"),a("error"),a("fatalError"),i}(o,r,s),i.domBuilder=n.domBuilder||r,c&&(l[""]=d.HTML),l.xml=l.xml||d.XML,e&&"string"==typeof e?i.parse(e,l,h):i.errorHandler.error("invalid doc source"),r.doc},p.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,n,i){var r=this.doc,a=r.createElementNS(e,n||t),o=i.length;m(this,a),this.currentElement=a,this.locator&&h(this.locator,a);for(var s=0;s<o;s++){e=i.getURI(s);var d=i.getValue(s),l=(n=i.getQName(s),r.createAttributeNS(e,n));this.locator&&h(i.getLocator(s),l),l.value=l.nodeValue=d,a.setAttributeNode(l)}},endElement:function(e,t,n){var i=this.currentElement;i.tagName,this.currentElement=i.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var n=this.doc.createProcessingInstruction(e,t);this.locator&&h(this.locator,n),m(this,n)},ignorableWhitespace:function(e,t,n){},characters:function(e,t,n){if(e=g.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(e);else i=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(e)&&this.doc.appendChild(i),this.locator&&h(this.locator,i)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,n){e=g.apply(this,arguments);var i=this.doc.createComment(e);this.locator&&h(this.locator,i),m(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(e,t,n);this.locator&&h(this.locator,r),m(this,r),this.doc.doctype=r}},warning:function(e){console.warn("[xmldom warning]\t"+e,f(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,f(this.locator))},fatalError:function(e){throw new l(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){p.prototype[e]=function(){return null}})),t.DOMParser=c,r.DOMImplementation,r.XMLSerializer},965:(e,t,n)=>{var i=n(7564).NAMESPACE;function r(e){return""!==e}function a(e,t){return e.hasOwnProperty(t)||(e[t]=!0),e}function o(e){if(!e)return[];var t=function(e){return e?e.split(/[\t\n\f\r ]+/).filter(r):[]}(e);return Object.keys(t.reduce(a,{}))}function s(e,t){for(var n in e)t[n]=e[n]}function d(e,t){var n=e.prototype;if(!(n instanceof t)){function i(){}i.prototype=t.prototype,s(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknown Class:"+e),n.constructor=e)}var l={},u=l.ELEMENT_NODE=1,c=l.ATTRIBUTE_NODE=2,p=l.TEXT_NODE=3,h=l.CDATA_SECTION_NODE=4,f=l.ENTITY_REFERENCE_NODE=5,g=l.ENTITY_NODE=6,m=l.PROCESSING_INSTRUCTION_NODE=7,v=l.COMMENT_NODE=8,y=l.DOCUMENT_NODE=9,b=l.DOCUMENT_TYPE_NODE=10,_=l.DOCUMENT_FRAGMENT_NODE=11,T=l.NOTATION_NODE=12,w={},S={},k=(w.INDEX_SIZE_ERR=(S[1]="Index size error",1),w.DOMSTRING_SIZE_ERR=(S[2]="DOMString size error",2),w.HIERARCHY_REQUEST_ERR=(S[3]="Hierarchy request error",3)),I=(w.WRONG_DOCUMENT_ERR=(S[4]="Wrong document",4),w.INVALID_CHARACTER_ERR=(S[5]="Invalid character",5),w.NO_DATA_ALLOWED_ERR=(S[6]="No data allowed",6),w.NO_MODIFICATION_ALLOWED_ERR=(S[7]="No modification allowed",7),w.NOT_FOUND_ERR=(S[8]="Not found",8)),C=(w.NOT_SUPPORTED_ERR=(S[9]="Not supported",9),w.INUSE_ATTRIBUTE_ERR=(S[10]="Attribute in use",10));function E(e,t){if(t instanceof Error)var n=t;else n=this,Error.call(this,S[e]),this.message=S[e],Error.captureStackTrace&&Error.captureStackTrace(this,E);return n.code=e,t&&(this.message=this.message+": "+t),n}function A(){}function P(e,t){this._node=e,this._refresh=t,x(this)}function x(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);le(e,"length",n.length),s(n,e),e._inc=t}}function O(){}function D(e,t){for(var n=e.length;n--;)if(e[n]===t)return n}function R(e,t,n,r){if(r?t[D(t,r)]=n:t[t.length++]=n,e){n.ownerElement=e;var a=e.ownerDocument;a&&(r&&F(a,e,r),function(e,t,n){e&&e._inc++,n.namespaceURI===i.XMLNS&&(t._nsMap[n.prefix?n.localName:""]=n.value)}(a,e,n))}}function L(e,t,n){var i=D(t,n);if(!(i>=0))throw E(I,new Error(e.tagName+"@"+n));for(var r=t.length-1;i<r;)t[i]=t[++i];if(t.length=r,e){var a=e.ownerDocument;a&&(F(a,e,n),n.ownerElement=null)}}function M(){}function U(){}function j(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function N(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(N(e,t))return!0}while(e=e.nextSibling)}function B(){}function F(e,t,n,r){e&&e._inc++,n.namespaceURI===i.XMLNS&&delete t._nsMap[n.prefix?n.localName:""]}function q(e,t,n){if(e&&e._inc){e._inc++;var i=t.childNodes;if(n)i[i.length++]=n;else{for(var r=t.firstChild,a=0;r;)i[a++]=r,r=r.nextSibling;i.length=a}}}function V(e,t){var n=t.previousSibling,i=t.nextSibling;return n?n.nextSibling=i:e.firstChild=i,i?i.previousSibling=n:e.lastChild=n,q(e.ownerDocument,e),t}function H(e,t,n){var i=t.parentNode;if(i&&i.removeChild(t),t.nodeType===_){var r=t.firstChild;if(null==r)return t;var a=t.lastChild}else r=a=t;var o=n?n.previousSibling:e.lastChild;r.previousSibling=o,a.nextSibling=n,o?o.nextSibling=r:e.firstChild=r,null==n?e.lastChild=a:n.previousSibling=a;do{r.parentNode=e}while(r!==a&&(r=r.nextSibling));return q(e.ownerDocument||e,e),t.nodeType==_&&(t.firstChild=t.lastChild=null),t}function z(){this._nsMap={}}function W(){}function $(){}function G(){}function K(){}function X(){}function Z(){}function Y(){}function J(){}function Q(){}function ee(){}function te(){}function ne(){}function ie(e,t){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,a=i.namespaceURI;if(a&&null==r&&null==(r=i.lookupPrefix(a)))var o=[{namespace:a,prefix:null}];return oe(this,n,e,t,o),n.join("")}function re(e,t,n){var r=e.prefix||"",a=e.namespaceURI;if(!a)return!1;if("xml"===r&&a===i.XML||a===i.XMLNS)return!1;for(var o=n.length;o--;){var s=n[o];if(s.prefix===r)return s.namespace!==a}return!0}function ae(e,t,n){e.push(" ",t,'="',n.replace(/[<&"]/g,j),'"')}function oe(e,t,n,r,a){if(a||(a=[]),r){if(!(e=r(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case u:var o=e.attributes,s=o.length,d=e.firstChild,l=e.tagName,g=l;if(!(n=i.isHTML(e.namespaceURI)||n)&&!e.prefix&&e.namespaceURI){for(var T,w=0;w<o.length;w++)if("xmlns"===o.item(w).name){T=o.item(w).value;break}if(!T)for(var S=a.length-1;S>=0;S--)if(""===(k=a[S]).prefix&&k.namespace===e.namespaceURI){T=k.namespace;break}if(T!==e.namespaceURI)for(S=a.length-1;S>=0;S--){var k;if((k=a[S]).namespace===e.namespaceURI){k.prefix&&(g=k.prefix+":"+l);break}}}t.push("<",g);for(var I=0;I<s;I++)"xmlns"==(C=o.item(I)).prefix?a.push({prefix:C.localName,namespace:C.value}):"xmlns"==C.nodeName&&a.push({prefix:"",namespace:C.value});for(I=0;I<s;I++){var C,E,A;re(C=o.item(I),0,a)&&(ae(t,(E=C.prefix||"")?"xmlns:"+E:"xmlns",A=C.namespaceURI),a.push({prefix:E,namespace:A})),oe(C,t,n,r,a)}if(l===g&&re(e,0,a)&&(ae(t,(E=e.prefix||"")?"xmlns:"+E:"xmlns",A=e.namespaceURI),a.push({prefix:E,namespace:A})),d||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(t.push(">"),n&&/^script$/i.test(l))for(;d;)d.data?t.push(d.data):oe(d,t,n,r,a.slice()),d=d.nextSibling;else for(;d;)oe(d,t,n,r,a.slice()),d=d.nextSibling;t.push("</",g,">")}else t.push("/>");return;case y:case _:for(d=e.firstChild;d;)oe(d,t,n,r,a.slice()),d=d.nextSibling;return;case c:return ae(t,e.name,e.value);case p:return t.push(e.data.replace(/[<&]/g,j).replace(/]]>/g,"]]&gt;"));case h:return t.push("<![CDATA[",e.data,"]]>");case v:return t.push("\x3c!--",e.data,"--\x3e");case b:var P=e.publicId,x=e.systemId;if(t.push("<!DOCTYPE ",e.name),P)t.push(" PUBLIC ",P),x&&"."!=x&&t.push(" ",x),t.push(">");else if(x&&"."!=x)t.push(" SYSTEM ",x,">");else{var O=e.internalSubset;O&&t.push(" [",O,"]"),t.push(">")}return;case m:return t.push("<?",e.target," ",e.data,"?>");case f:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function se(e,t,n){var i;switch(t.nodeType){case u:(i=t.cloneNode(!1)).ownerDocument=e;case _:break;case c:n=!0}if(i||(i=t.cloneNode(!1)),i.ownerDocument=e,i.parentNode=null,n)for(var r=t.firstChild;r;)i.appendChild(se(e,r,n)),r=r.nextSibling;return i}function de(e,t,n){var i=new t.constructor;for(var r in t){var a=t[r];"object"!=typeof a&&a!=i[r]&&(i[r]=a)}switch(t.childNodes&&(i.childNodes=new A),i.ownerDocument=e,i.nodeType){case u:var o=t.attributes,s=i.attributes=new O,d=o.length;s._ownerElement=i;for(var l=0;l<d;l++)i.setAttributeNode(de(e,o.item(l),!0));break;case c:n=!0}if(n)for(var p=t.firstChild;p;)i.appendChild(de(e,p,n)),p=p.nextSibling;return i}function le(e,t,n){e[t]=n}w.INVALID_STATE_ERR=(S[11]="Invalid state",11),w.SYNTAX_ERR=(S[12]="Syntax error",12),w.INVALID_MODIFICATION_ERR=(S[13]="Invalid modification",13),w.NAMESPACE_ERR=(S[14]="Invalid namespace",14),w.INVALID_ACCESS_ERR=(S[15]="Invalid access",15),E.prototype=Error.prototype,s(w,E),A.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var n=[],i=0;i<this.length;i++)oe(this[i],n,e,t);return n.join("")}},P.prototype.item=function(e){return x(this),this[e]},d(P,A),O.prototype={length:0,item:A.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var n=this[t];if(n.nodeName==e)return n}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new E(C);var n=this.getNamedItem(e.nodeName);return R(this._ownerElement,this,e,n),n},setNamedItemNS:function(e){var t,n=e.ownerElement;if(n&&n!=this._ownerElement)throw new E(C);return t=this.getNamedItemNS(e.namespaceURI,e.localName),R(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return L(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var n=this.getNamedItemNS(e,t);return L(this._ownerElement,this,n),n},getNamedItemNS:function(e,t){for(var n=this.length;n--;){var i=this[n];if(i.localName==t&&i.namespaceURI==e)return i}return null}},M.prototype={hasFeature:function(e,t){return!0},createDocument:function(e,t,n){var i=new B;if(i.implementation=this,i.childNodes=new A,i.doctype=n||null,n&&i.appendChild(n),t){var r=i.createElementNS(e,t);i.appendChild(r)}return i},createDocumentType:function(e,t,n){var i=new Z;return i.name=e,i.nodeName=e,i.publicId=t||"",i.systemId=n||"",i}},U.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return H(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return V(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return de(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==p&&e.nodeType==p?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var n=t._nsMap;if(n)for(var i in n)if(n[i]==e)return i;t=t.nodeType==c?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var n=t._nsMap;if(n&&e in n)return n[e];t=t.nodeType==c?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},s(l,U),s(l,U.prototype),B.prototype={nodeName:"#document",nodeType:y,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==_){for(var n=e.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,t),n=i}return e}return null==this.documentElement&&e.nodeType==u&&(this.documentElement=e),H(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),V(this,e)},importNode:function(e,t){return se(this,e,t)},getElementById:function(e){var t=null;return N(this.documentElement,(function(n){if(n.nodeType==u&&n.getAttribute("id")==e)return t=n,!0})),t},getElementsByClassName:function(e){var t=o(e);return new P(this,(function(n){var i=[];return t.length>0&&N(n.documentElement,(function(r){if(r!==n&&r.nodeType===u){var a=r.getAttribute("class");if(a){var s=e===a;if(!s){var d=o(a);s=t.every((l=d,function(e){return l&&-1!==l.indexOf(e)}))}s&&i.push(r)}}var l})),i}))},createElement:function(e){var t=new z;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.localName=e,t.childNodes=new A,(t.attributes=new O)._ownerElement=t,t},createDocumentFragment:function(){var e=new ee;return e.ownerDocument=this,e.childNodes=new A,e},createTextNode:function(e){var t=new G;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new K;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new X;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var n=new te;return n.ownerDocument=this,n.tagName=n.target=e,n.nodeValue=n.data=t,n},createAttribute:function(e){var t=new W;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Q;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var n=new z,i=t.split(":"),r=n.attributes=new O;return n.childNodes=new A,n.ownerDocument=this,n.nodeName=t,n.tagName=t,n.namespaceURI=e,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,r._ownerElement=n,n},createAttributeNS:function(e,t){var n=new W,i=t.split(":");return n.ownerDocument=this,n.nodeName=t,n.name=t,n.namespaceURI=e,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=t,n}},d(B,U),z.prototype={nodeType:u,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var n=this.ownerDocument.createAttribute(e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===_?this.insertBefore(e,null):function(e,t){var n=t.parentNode;if(n){var i=e.lastChild;n.removeChild(t),i=e.lastChild}return i=e.lastChild,t.parentNode=e,t.previousSibling=i,t.nextSibling=null,i?i.nextSibling=t:e.firstChild=t,e.lastChild=t,q(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);n&&this.removeAttributeNode(n)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var n=this.getAttributeNodeNS(e,t);return n&&n.value||""},setAttributeNS:function(e,t,n){var i=this.ownerDocument.createAttributeNS(e,t);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new P(this,(function(t){var n=[];return N(t,(function(i){i===t||i.nodeType!=u||"*"!==e&&i.tagName!=e||n.push(i)})),n}))},getElementsByTagNameNS:function(e,t){return new P(this,(function(n){var i=[];return N(n,(function(r){r===n||r.nodeType!==u||"*"!==e&&r.namespaceURI!==e||"*"!==t&&r.localName!=t||i.push(r)})),i}))}},B.prototype.getElementsByTagName=z.prototype.getElementsByTagName,B.prototype.getElementsByTagNameNS=z.prototype.getElementsByTagNameNS,d(z,U),W.prototype.nodeType=c,d(W,U),$.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(S[k])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,n){n=this.data.substring(0,e)+n+this.data.substring(e+t),this.nodeValue=this.data=n,this.length=n.length}},d($,U),G.prototype={nodeName:"#text",nodeType:p,splitText:function(e){var t=this.data,n=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},d(G,$),K.prototype={nodeName:"#comment",nodeType:v},d(K,$),X.prototype={nodeName:"#cdata-section",nodeType:h},d(X,$),Z.prototype.nodeType=b,d(Z,U),Y.prototype.nodeType=T,d(Y,U),J.prototype.nodeType=g,d(J,U),Q.prototype.nodeType=f,d(Q,U),ee.prototype.nodeName="#document-fragment",ee.prototype.nodeType=_,d(ee,U),te.prototype.nodeType=m,d(te,U),ne.prototype.serializeToString=function(e,t,n){return ie.call(e,t,n)},U.prototype.toString=ie;try{if(Object.defineProperty){function ue(e){switch(e.nodeType){case u:case _:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(ue(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(P.prototype,"length",{get:function(){return x(this),this.$$length}}),Object.defineProperty(U.prototype,"textContent",{get:function(){return ue(this)},set:function(e){switch(this.nodeType){case u:case _:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),le=function(e,t,n){e["$$"+t]=n}}}catch(ce){}t.DocumentType=Z,t.DOMException=E,t.DOMImplementation=M,t.Element=z,t.Node=U,t.NodeList=A,t.XMLSerializer=ne},3182:(e,t,n)=>{var i=n(7564).freeze;t.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),t.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),t.entityMap=t.HTML_ENTITIES},5364:(e,t,n)=>{var i=n(965);i.DOMImplementation,i.XMLSerializer,t.DOMParser=n(193).DOMParser},6809:(e,t,n)=>{var i=n(7564).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,a=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+a.source+"*(?::"+r.source+a.source+"*)?$");function s(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function d(){}function l(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function u(e,t,n,r,a,o){function s(e,t,i){n.attributeNames.hasOwnProperty(e)&&o.fatalError("Attribute "+e+" redefined"),n.addValue(e,t,i)}for(var d,l=++t,u=0;;){var c=e.charAt(l);switch(c){case"=":if(1===u)d=e.slice(t,l),u=3;else{if(2!==u)throw new Error("attribute equal must after attrName");u=3}break;case"'":case'"':if(3===u||1===u){if(1===u&&(o.warning('attribute value must after "="'),d=e.slice(t,l)),t=l+1,!((l=e.indexOf(c,t))>0))throw new Error("attribute value no end '"+c+"' match");s(d,p=e.slice(t,l).replace(/&#?\w+;/g,a),t-1),u=5}else{if(4!=u)throw new Error('attribute value must after "="');s(d,p=e.slice(t,l).replace(/&#?\w+;/g,a),t),o.warning('attribute "'+d+'" missed start quot('+c+")!!"),t=l+1,u=5}break;case"/":switch(u){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:u=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return o.error("unexpected end of input"),0==u&&n.setTagName(e.slice(t,l)),l;case">":switch(u){case 0:n.setTagName(e.slice(t,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(p=e.slice(t,l)).slice(-1)&&(n.closed=!0,p=p.slice(0,-1));case 2:2===u&&(p=d),4==u?(o.warning('attribute "'+p+'" missed quot(")!'),s(d,p.replace(/&#?\w+;/g,a),t)):(i.isHTML(r[""])&&p.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),s(p,p,t));break;case 3:throw new Error("attribute value missed!!")}return l;case"":c=" ";default:if(c<=" ")switch(u){case 0:n.setTagName(e.slice(t,l)),u=6;break;case 1:d=e.slice(t,l),u=2;break;case 4:var p=e.slice(t,l).replace(/&#?\w+;/g,a);o.warning('attribute "'+p+'" missed quot(")!!'),s(d,p,t);case 5:u=6}else switch(u){case 2:n.tagName,i.isHTML(r[""])&&d.match(/^(?:disabled|checked|selected)$/i)||o.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),s(d,d,t),t=l,u=1;break;case 5:o.warning('attribute space is required"'+d+'"!!');case 6:u=1,t=l;break;case 3:u=4,t=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function c(e,t,n){for(var r=e.tagName,a=null,o=e.length;o--;){var s=e[o],d=s.qName,l=s.value;if((h=d.indexOf(":"))>0)var u=s.prefix=d.slice(0,h),c=d.slice(h+1),p="xmlns"===u&&c;else c=d,u=null,p="xmlns"===d&&"";s.localName=c,!1!==p&&(null==a&&(a={},f(n,n={})),n[p]=a[p]=l,s.uri=i.XMLNS,t.startPrefixMapping(p,l))}for(o=e.length;o--;)(u=(s=e[o]).prefix)&&("xml"===u&&(s.uri=i.XML),"xmlns"!==u&&(s.uri=n[u||""]));var h;(h=r.indexOf(":"))>0?(u=e.prefix=r.slice(0,h),c=e.localName=r.slice(h+1)):(u=null,c=e.localName=r);var g=e.uri=n[u||""];if(t.startElement(g,c,r,e),!e.closed)return e.currentNSMap=n,e.localNSMap=a,!0;if(t.endElement(g,c,r),a)for(u in a)t.endPrefixMapping(u)}function p(e,t,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var a=e.indexOf("</"+n+">",t),o=e.substring(t+1,a);if(/[&<]/.test(o))return/^script$/i.test(n)?(r.characters(o,0,o.length),a):(o=o.replace(/&#?\w+;/g,i),r.characters(o,0,o.length),a)}return t+1}function h(e,t,n,i){var r=i[n];return null==r&&((r=e.lastIndexOf("</"+n+">"))<t&&(r=e.lastIndexOf("</"+n)),i[n]=r),r<t}function f(e,t){for(var n in e)t[n]=e[n]}function g(e,t,n,i){if("-"===e.charAt(t+2))return"-"===e.charAt(t+3)?(r=e.indexOf("--\x3e",t+4))>t?(n.comment(e,t+4,r-t-4),r+3):(i.error("Unclosed comment"),-1):-1;if("CDATA["==e.substr(t+3,6)){var r=e.indexOf("]]>",t+9);return n.startCDATA(),n.characters(e,t+9,r-t-9),n.endCDATA(),r+3}var a=function(e,t){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=t,r.exec(e);n=r.exec(e);)if(i.push(n),n[1])return i}(e,t),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var s=a[1][0],d=!1,l=!1;o>3&&(/^public$/i.test(a[2][0])?(d=a[3][0],l=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(l=a[3][0]));var u=a[o-1];return n.startDTD(s,d,l),n.endDTD(),u.index+u[0].length}return-1}function m(e,t,n){var i=e.indexOf("?>",t);if(i){var r=e.substring(t,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,n.processingInstruction(r[1],r[2]),i+2):-1}return-1}function v(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,d.prototype={parse:function(e,t,n){var r=this.domBuilder;r.startDocument(),f(t,t={}),function(e,t,n,r,a){function o(e){var t=e.slice(1,-1);return t in n?n[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),n=56320+(1023&e);return String.fromCharCode(t,n)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(a.error("entity not found:"+e),e)}function d(t){if(t>k){var n=e.substring(k,t).replace(/&#?\w+;/g,o);T&&f(k),r.characters(n,0,t-k),k=t}}function f(t,n){for(;t>=b&&(n=_.exec(e));)y=n.index,b=y+n[0].length,T.lineNumber++;T.columnNumber=t-y+1}for(var y=0,b=0,_=/.*(?:\r\n?|\n)|.*$/g,T=r.locator,w=[{currentNSMap:t}],S={},k=0;;){try{var I=e.indexOf("<",k);if(I<0){if(!e.substr(k).match(/^\s*$/)){var C=r.doc,E=C.createTextNode(e.substr(k));C.appendChild(E),r.currentElement=E}return}switch(I>k&&d(I),e.charAt(I+1)){case"/":var A=e.indexOf(">",I+3),P=e.substring(I+2,A).replace(/[ \t\n\r]+$/g,""),x=w.pop();A<0?(P=e.substring(I+2).replace(/[\s<].*/,""),a.error("end tag name: "+P+" is not complete:"+x.tagName),A=I+1+P.length):P.match(/\s</)&&(P=P.replace(/[\s<].*/,""),a.error("end tag name: "+P+" maybe not complete"),A=I+1+P.length);var O=x.localNSMap,D=x.tagName==P;if(D||x.tagName&&x.tagName.toLowerCase()==P.toLowerCase()){if(r.endElement(x.uri,x.localName,P),O)for(var R in O)r.endPrefixMapping(R);D||a.fatalError("end tag name: "+P+" is not match the current start tagName:"+x.tagName)}else w.push(x);A++;break;case"?":T&&f(I),A=m(e,I,r);break;case"!":T&&f(I),A=g(e,I,r,a);break;default:T&&f(I);var L=new v,M=w[w.length-1].currentNSMap,U=(A=u(e,I,L,M,o,a),L.length);if(!L.closed&&h(e,A,L.tagName,S)&&(L.closed=!0,n.nbsp||a.warning("unclosed xml attribute")),T&&U){for(var j=l(T,{}),N=0;N<U;N++){var B=L[N];f(B.offset),B.locator=l(T,{})}r.locator=j,c(L,r,M)&&w.push(L),r.locator=T}else c(L,r,M)&&w.push(L);i.isHTML(L.uri)&&!L.closed?A=p(e,A,L.tagName,o,r):A++}}catch(e){if(e instanceof s)throw e;a.error("element parse error: "+e),A=-1}A>k?k=A:d(Math.max(I,k)+1)}}(e,t,n,r,this.errorHandler),r.endDocument()}},v.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,n){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:n}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=d,t.ParseError=s},6666:(e,t)=>{"use strict";t.byteLength=function(e){var t=d(e),n=t[0],i=t[1];return 3*(n+i)/4-i},t.toByteArray=function(e){var t,n,a=d(e),o=a[0],s=a[1],l=new r(function(e,t,n){return 3*(t+n)/4-n}(0,o,s)),u=0,c=s>0?o-4:o;for(n=0;n<c;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],l[u++]=t>>16&255,l[u++]=t>>8&255,l[u++]=255&t;return 2===s&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,l[u++]=255&t),1===s&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,l[u++]=t>>8&255,l[u++]=255&t),l},t.fromByteArray=function(e){for(var t,i=e.length,r=i%3,a=[],o=16383,s=0,d=i-r;s<d;s+=o)a.push(l(e,s,s+o>d?d:s+o));return 1===r?(t=e[i-1],a.push(n[t>>2]+n[t<<4&63]+"==")):2===r&&(t=(e[i-2]<<8)+e[i-1],a.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),a.join("")};for(var n=[],i=[],r="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=a.length;o<s;++o)n[o]=a[o],i[a.charCodeAt(o)]=o;function d(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,i){for(var r,a,o=[],s=t;s<i;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),o.push(n[(a=r)>>18&63]+n[a>>12&63]+n[a>>6&63]+n[63&a]);return o.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},9945:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){null!==e&&this.fromHexString(e)}return e.prototype.toHexString=function(){if(this.s<0)return"-"+this.negate().toHexString();var e,t=!1,n="",i=this.t,r=this.DB-i*this.DB%4;if(i-- >0)for(r<this.DB&&(e=this[i]>>r)>0&&(t=!0,n=u(e));i>=0;)r<4?(e=(this[i]&(1<<r)-1)<<4-r,e|=this[--i]>>(r+=this.DB-4)):(e=this[i]>>(r-=4)&15,r<=0&&(r+=this.DB,--i)),e>0&&(t=!0),t&&(n+=u(e));return t?n:"0"},e.prototype.fromHexString=function(t){if(null!==t){this.t=0,this.s=0;for(var n=t.length,i=!1,r=0;--n>=0;){var a=l(t,n);a<0?"-"==t.charAt(n)&&(i=!0):(i=!1,0==r?this[this.t++]=a:r+4>this.DB?(this[this.t-1]|=(a&(1<<this.DB-r)-1)<<r,this[this.t++]=a>>this.DB-r):this[this.t-1]|=a<<r,(r+=4)>=this.DB&&(r-=this.DB))}this.clamp(),i&&e.ZERO.subTo(this,this)}},e.prototype.negate=function(){var t=r();return e.ZERO.subTo(this,t),t},e.prototype.abs=function(){return this.s<0?this.negate():this},e.prototype.mod=function(t){var n=r();return this.abs().divRemTo(t,null,n),this.s<0&&n.compareTo(e.ZERO)>0&&t.subTo(n,n),n},e.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},e.prototype.lShiftTo=function(e,t){for(var n=e%this.DB,i=this.DB-n,r=(1<<i)-1,a=Math.floor(e/this.DB),o=this.s<<n&this.DM,s=this.t-1;s>=0;--s)t[s+a+1]=this[s]>>i|o,o=(this[s]&r)<<n;for(s=a-1;s>=0;--s)t[s]=0;t[a]=o,t.t=this.t+a+1,t.s=this.s,t.clamp()},e.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},e.prototype.dlShiftTo=function(e,t){var n;for(n=this.t-1;n>=0;--n)t[n+e]=this[n];for(n=e-1;n>=0;--n)t[n]=0;t.t=this.t+e,t.s=this.s},e.prototype.squareTo=function(e){for(var t=this.abs(),n=e.t=2*t.t;--n>=0;)e[n]=0;for(n=0;n<t.t-1;++n){var i=t.am(n,t[n],e,2*n,0,1);(e[n+t.t]+=t.am(n+1,2*t[n],e,2*n+1,i,t.t-n-1))>=t.DV&&(e[n+t.t]-=t.DV,e[n+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(n,t[n],e,2*n,0,1)),e.s=0,e.clamp()},e.prototype.multiplyTo=function(t,n){var i=this.abs(),r=t.abs(),a=i.t;for(n.t=a+r.t;--a>=0;)n[a]=0;for(a=0;a<r.t;++a)n[a+i.t]=i.am(0,r[a],n,a,0,i.t);n.s=0,n.clamp(),this.s!=t.s&&e.ZERO.subTo(n,n)},e.prototype.divRemTo=function(t,n,i){var o=t.abs();if(!(o.t<=0)){var s=this.abs();if(s.t<o.t)return null!=n&&n.fromHexString("0"),void(null!=i&&this.copyTo(i));null==i&&(i=r());var d=r(),l=this.s,u=t.s,c=this.DB-a(o[o.t-1]);c>0?(o.lShiftTo(c,d),s.lShiftTo(c,i)):(o.copyTo(d),s.copyTo(i));var p=d.t,h=d[p-1];if(0!=h){var f=h*(1<<this.F1)+(p>1?d[p-2]>>this.F2:0),g=this.FV/f,m=(1<<this.F1)/f,v=1<<this.F2,y=i.t,b=y-p,_=null==n?r():n;for(d.dlShiftTo(b,_),i.compareTo(_)>=0&&(i[i.t++]=1,i.subTo(_,i)),e.ONE.dlShiftTo(p,_),_.subTo(d,d);d.t<p;)d[d.t++]=0;for(;--b>=0;){var T=i[--y]==h?this.DM:Math.floor(i[y]*g+(i[y-1]+v)*m);if((i[y]+=d.am(0,T,i,b,0,p))<T)for(d.dlShiftTo(b,_),i.subTo(_,i);i[y]<--T;)i.subTo(_,i)}null!=n&&(i.drShiftTo(p,n),l!=u&&e.ZERO.subTo(n,n)),i.t=p,i.clamp(),c>0&&i.rShiftTo(c,i),l<0&&e.ZERO.subTo(i,i)}}},e.prototype.rShiftTo=function(e,t){t.s=this.s;var n=Math.floor(e/this.DB);if(n>=this.t)t.t=0;else{var i=e%this.DB,r=this.DB-i,a=(1<<i)-1;t[0]=this[n]>>i;for(var o=n+1;o<this.t;++o)t[o-n-1]|=(this[o]&a)<<r,t[o-n]=this[o]>>i;i>0&&(t[this.t-n-1]|=(this.s&a)<<r),t.t=this.t-n,t.clamp()}},e.prototype.drShiftTo=function(e,t){for(var n=e;n<this.t;++n)t[n-e]=this[n];t.t=Math.max(this.t-e,0),t.s=this.s},e.prototype.subTo=function(e,t){for(var n=0,i=0,r=Math.min(e.t,this.t);n<r;)i+=this[n]-e[n],t[n++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;n<this.t;)i+=this[n],t[n++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;n<e.t;)i-=e[n],t[n++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[n++]=this.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()},e.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},e.prototype.modPowInt=function(e,t){var n;return n=e<256||t.isEven()?new c(t):new p(t),this.exp(e,n)},e.prototype.exp=function(t,n){if(t>4294967295||t<1)return e.ONE;var i=r(),o=r(),s=n.convert(this),d=a(t)-1;for(s.copyTo(i);--d>=0;)if(n.sqrTo(i,o),(t&1<<d)>0)n.mulTo(o,s,i);else{var l=i;i=o,o=l}return n.revert(i)},e.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},e.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var n=this.t;if(0!=(t=n-e.t))return this.s<0?-t:t;for(;--n>=0;)if(0!=(t=this[n]-e[n]))return t;return 0},e.prototype.am1=function(e,t,n,i,r,a){for(;--a>=0;){var o=t*this[e++]+n[i]+r;r=Math.floor(o/67108864),n[i++]=67108863&o}return r},e.prototype.am2=function(e,t,n,i,r,a){for(var o=32767&t,s=t>>15;--a>=0;){var d=32767&this[e],l=this[e++]>>15,u=s*d+l*o;r=((d=o*d+((32767&u)<<15)+n[i]+(1073741823&r))>>>30)+(u>>>15)+s*l+(r>>>30),n[i++]=1073741823&d}return r},e.prototype.am3=function(e,t,n,i,r,a){for(var o=16383&t,s=t>>14;--a>=0;){var d=16383&this[e],l=this[e++]>>14,u=s*d+l*o;r=((d=o*d+((16383&u)<<14)+n[i]+r)>>28)+(u>>14)+s*l,n[i++]=268435455&d}return r},e}();function r(){return new i(null)}function a(e){var t,n=1;return 0!=(t=e>>>16)&&(e=t,n+=16),0!=(t=e>>8)&&(e=t,n+=8),0!=(t=e>>4)&&(e=t,n+=4),0!=(t=e>>2)&&(e=t,n+=2),0!=(t=e>>1)&&(e=t,n+=1),n}t.BigInteger=i,t.nbi=r,t.nbits=a;var o,s,d=[];for(o="0".charCodeAt(0),s=0;s<=9;++s)d[o++]=s;for(o="a".charCodeAt(0),s=10;s<36;++s)d[o++]=s;for(o="A".charCodeAt(0),s=10;s<36;++s)d[o++]=s;function l(e,t){var n=d[e.charCodeAt(t)];return null==n?-1:n}function u(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}t.intAt=l,t.int2char=u,t.b64toHex=function(e){var t,n="",i=0,r=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t));a<0||(0==i?(n+=u(a>>2),r=3&a,i=1):1==i?(n+=u(r<<2|a>>4),r=15&a,i=2):2==i?(n+=u(r),n+=u(a>>2),r=3&a,i=3):(n+=u(r<<2|a>>4),n+=u(15&a),i=0))}return 1==i&&(n+=u(r<<2)),n},t.removeExtraSymbols=function(e){return e.replace(/^1f+00/,"").replace("3031300d060960864801650304020105000420","")};var c=function(){function e(e){this.m=e}return e.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},e.prototype.revert=function(e){return e},e.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}(),p=function(){function e(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}return e.prototype.convert=function(e){var t=r();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(i.ZERO)>0&&this.m.subTo(t,t),t},e.prototype.revert=function(e){var t=r();return e.copyTo(t),this.reduce(t),t},e.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var n=32767&e[t],i=n*this.mpl+((n*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[n=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[n]>=e.DV;)e[n]-=e.DV,e[++n]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},e.prototype.mulTo=function(e,t,n){e.multiplyTo(t,n),this.reduce(n)},e.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},e}();function h(e){var t=r();return t.fromHexString(e.toString()),t}t.nbv=h,i.ZERO=h(0),i.ONE=h(1),"Microsoft Internet Explorer"==navigator.appName?(i.prototype.am=i.prototype.am2,n=30):"Netscape"!=navigator.appName?(i.prototype.am=i.prototype.am1,n=26):(i.prototype.am=i.prototype.am3,n=28),i.prototype.DB=n,i.prototype.DM=(1<<n)-1,i.prototype.DV=1<<n,i.prototype.FV=Math.pow(2,52),i.prototype.F1=52-n,i.prototype.F2=2*n-52},2529:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.hash=function(t){t=e.utf8Encode(t||"");for(var n=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],r=(t+=String.fromCharCode(128)).length/4+2,a=Math.ceil(r/16),o=new Array(a),s=0;s<a;s++){o[s]=new Array(16);for(var d=0;d<16;d++)o[s][d]=t.charCodeAt(64*s+4*d)<<24|t.charCodeAt(64*s+4*d+1)<<16|t.charCodeAt(64*s+4*d+2)<<8|t.charCodeAt(64*s+4*d+3)<<0}var l=8*(t.length-1)/Math.pow(2,32),u=8*(t.length-1)>>>0;for(o[a-1][14]=Math.floor(l),o[a-1][15]=u,s=0;s<a;s++){for(var c=new Array(64),p=0;p<16;p++)c[p]=o[s][p];for(p=16;p<64;p++)c[p]=e.q1(c[p-2])+c[p-7]+e.q0(c[p-15])+c[p-16]>>>0;var h=i[0],f=i[1],g=i[2],m=i[3],v=i[4],y=i[5],b=i[6],_=i[7];for(p=0;p<64;p++){var T=_+e.z1(v)+e.Ch(v,y,b)+n[p]+c[p],w=e.z0(h)+e.Maj(h,f,g);_=b,b=y,y=v,v=m+T>>>0,m=g,g=f,f=h,h=T+w>>>0}i[0]=i[0]+h>>>0,i[1]=i[1]+f>>>0,i[2]=i[2]+g>>>0,i[3]=i[3]+m>>>0,i[4]=i[4]+v>>>0,i[5]=i[5]+y>>>0,i[6]=i[6]+b>>>0,i[7]=i[7]+_>>>0}var S=new Array(i.length);for(_=0;_<i.length;_++)S[_]=("00000000"+i[_].toString(16)).slice(-8);return S.join("")},e.utf8Encode=function(e){try{return(new TextEncoder).encode(e).reduce((function(e,t){return e+String.fromCharCode(t)}),"")}catch(t){return unescape(encodeURIComponent(e))}},e.ROTR=function(e,t){return t>>>e|t<<32-e},e.z0=function(t){return e.ROTR(2,t)^e.ROTR(13,t)^e.ROTR(22,t)},e.z1=function(t){return e.ROTR(6,t)^e.ROTR(11,t)^e.ROTR(25,t)},e.q0=function(t){return e.ROTR(7,t)^e.ROTR(18,t)^t>>>3},e.q1=function(t){return e.ROTR(17,t)^e.ROTR(19,t)^t>>>10},e.Ch=function(e,t,n){return e&t^~e&n},e.Maj=function(e,t,n){return e&t^e&n^t&n},e}();t.Sha256=n},4651:(e,t,n)=>{"use strict";var i=n(9945),r=n(2529);t.T=function(e,t,n,a){var o=new i.BigInteger(i.b64toHex(t)),s=new i.BigInteger(i.b64toHex(n)),d=o.modPowInt(a,s);return i.removeExtraSymbols(d.toHexString())===r.Sha256.hash(e)}},5446:(e,t,n)=>{"use strict";function i(e,t,n,i,r){for(t=t.split?t.split("."):t,i=0;i<t.length;i++)e=e?e[t[i]]:r;return e===r?n:e}n.d(t,{Z:()=>i})},3346:e=>{"use strict";var t,n="object"==typeof Reflect?Reflect:null,i=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var r=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,a),i(n)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}g(e,t,a,{once:!0}),"error"!==t&&function(e,t,n){"function"==typeof e.on&&g(e,"error",t,{once:!0})}(e,r)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,a,o,l;if(s(n),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),a=e._events),o=a[t]),void 0===o)o=a[t]=n,++e._eventsCount;else if("function"==typeof o?o=a[t]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),(r=d(e))>0&&o.length>r&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=o.length,l=u,console&&console.warn&&console.warn(l)}return e}function u(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function c(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=u.bind(i);return r.listener=n,i.wrapFn=r,r}function p(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"==typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):f(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function g(e,t,n,i){if("function"==typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(a){i.once&&e.removeEventListener(t,r),n(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||r(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return d(this)},a.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var o;if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var s=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var d=a[e];if(void 0===d)return!1;if("function"==typeof d)i(d,this,t);else{var l=d.length,u=f(d,l);for(n=0;n<l;++n)i(u[n],this,t)}return!0},a.prototype.addListener=function(e,t){return l(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return l(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,c(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,c(this,e,t)),this},a.prototype.removeListener=function(e,t){var n,i,r,a,o;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===t||n[a].listener===t){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,o||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,a=Object.keys(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},1242:e=>{o.SYNC=1,o.ASYNC=2,o.QUEUE=4;var t=Object.freeze({useProxy:!0,ready:0}),n=new WeakMap,i="2,1,0"===[1].reduce((function(e,t,n){return[e,t,n]}),2).toString()?Array.prototype.reduce:function(e,t){var n,i=Object(this),r=i.length>>>0,a=0;if(t)n=t;else{for(;a<r&&!(a in i);)a++;n=i[a++]}for(;a<r;)a in i&&(n=e(n,i[a],a,i)),a++;return n};function r(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(r(arguments,1),(function(e,t){return t&&Object.keys(t).forEach((function(n){e[n]=t[n]})),e}),e)};function o(e){var s,d={},l=[];function u(e,t){return"function"==typeof e?f.call(null,"sync",e,t):"string"==typeof e&&"function"==typeof t?f.apply(null,arguments):"object"==typeof e?c.apply(null,arguments):void 0}function c(e,t,n){var i=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),i=!1);var r={},a=["constructor"];do{(t=t.filter((function(t){return!("function"!=typeof e[t]||-1!==a.indexOf(t)||t.match(/^_/))}))).forEach((function(t){var i=t.split(":"),a=i[0],o=i[1]||"sync";if(!r[a]){var s=e[a];r[a]=e[a]=f(o,s,n?[n,a]:void 0)}})),e=Object.getPrototypeOf(e)}while(i&&e);return r}function p(e){var t=Array.isArray(e)?e:e.split(".");return i.call(t,(function(n,i,r){var a=n[i],o=!1;return a||(r===t.length-1?(s||l.push((function(){o||console.warn("fun-hooks: referenced '"+e+"' but it was never created")})),n[i]=h((function(e){n[i]=e,o=!0}))):n[i]={})}),d)}function h(e){var t=[],i=[],r=function(){},o={before:function(e,n){return d.call(this,t,"before",e,n)},after:function(e,t){return d.call(this,i,"after",e,t)},getHooks:function(e){var n=t.concat(i);"object"==typeof e&&(n=n.filter((function(t){return Object.keys(e).every((function(n){return t[n]===e[n]}))})));try{a(n,{remove:function(){return n.forEach((function(e){e.remove()})),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return n},removeAll:function(){return this.getHooks().remove()}},s={install:function(n,a,o){this.type=n,r=o,o(t,i),e&&e(a)}};return n.set(o.after,s),o;function d(e,n,a,o){var s={hook:a,type:n,priority:o||10,remove:function(){var n=e.indexOf(s);-1!==n&&(e.splice(n,1),r(t,i))}};return e.push(s),e.sort((function(e,t){return t.priority-e.priority})),r(t,i),this}}function f(t,i,d){var u=i.after&&n.get(i.after);if(u){if(u.type!==t)throw"fun-hooks: recreated hookable with different type";return i}var c,f,g=d?p(d):h(),m={get:function(e,t){return g[t]||Reflect.get.apply(Reflect,arguments)}};return s||l.push(v),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?f=new Proxy(i,m):(f=function(){return m.apply?m.apply(i,this,r(arguments)):i.apply(this,arguments)},a(f,g)),n.get(f.after).install(t,f,(function(e,n){var i,a=[];function o(e){a.push(e.hook)}e.length||n.length?(e.forEach(o),i=a.push(void 0)-1,n.forEach(o),c=function(e,n,o){var s,d=0,l="async"===t&&"function"==typeof o[o.length-1]&&o.pop();function u(e){"sync"===t?s=e:l&&l.apply(null,arguments)}function c(e){if(a[d]){var i=r(arguments);return c.bail=u,i.unshift(c),a[d++].apply(n,i)}"sync"===t?s=e:l&&l.apply(null,arguments)}return a[i]=function(){var i=r(arguments,1);"async"===t&&l&&(delete c.bail,i.push(c));var a=e.apply(n,i);"sync"===t&&c(a)},c.apply(null,o),s}):c=void 0,v()})),f;function v(){!s&&("sync"!==t||e.ready&o.SYNC)&&("async"!==t||e.ready&o.ASYNC)?"sync"!==t&&e.ready&o.QUEUE?m.apply=function(){var e=arguments;l.push((function(){f.apply(e[1],e[2])}))}:m.apply=function(){throw"fun-hooks: hooked function not ready"}:m.apply=c}}return(e=a({},t,e)).ready?u.ready=function(){s=!0,function(e){for(var t;t=e.shift();)t()}(l)}:s=!0,u.get=p,u}e.exports=o},1709:(e,t,n)=>{var i,r=void 0!==n.g?n.g:"undefined"!=typeof window?window:{},a=n(4760);"undefined"!=typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=a),e.exports=i},1667:(e,t,n)=>{var i;i="undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},e.exports=i},9258:(e,t)=>{t.read=function(e,t,n,i,r){var a,o,s=8*r-i-1,d=(1<<s)-1,l=d>>1,u=-7,c=n?r-1:0,p=n?-1:1,h=e[t+c];for(c+=p,a=h&(1<<-u)-1,h>>=-u,u+=s;u>0;a=256*a+e[t+c],c+=p,u-=8);for(o=a&(1<<-u)-1,a>>=-u,u+=i;u>0;o=256*o+e[t+c],c+=p,u-=8);if(0===a)a=1-l;else{if(a===d)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,i),a-=l}return(h?-1:1)*o*Math.pow(2,a-i)},t.write=function(e,t,n,i,r,a){var o,s,d,l=8*a-r-1,u=(1<<l)-1,c=u>>1,p=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:a-1,f=i?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(d=Math.pow(2,-o))<1&&(o--,d*=2),(t+=o+c>=1?p/d:p*Math.pow(2,1-c))*d>=2&&(o++,d/=2),o+c>=u?(s=0,o=u):o+c>=1?(s=(t*d-1)*Math.pow(2,r),o+=c):(s=t*Math.pow(2,c-1)*Math.pow(2,r),o=0));r>=8;e[n+h]=255&s,h+=f,s/=256,r-=8);for(o=o<<r|s,l+=r;l>0;e[n+h]=255&o,h+=f,o/=256,l-=8);e[n+h-f]|=128*g}},3730:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}},8495:e=>{e.exports=function(e){if(!e)return!1;var n=t.call(e);return"[object Function]"===n||"function"==typeof e&&"[object RegExp]"!==n||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)};var t=Object.prototype.toString},1269:e=>{e.exports=function e(t){var n=Array.isArray(t)?[]:{};for(var i in t){var r=t[i];n[i]=r&&"object"==typeof r?e(r):r}return n}},5827:(e,t)=>{function n(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var n,a=String(e);return(n=i[a.toLowerCase()])?n:(n=r[a.toLowerCase()])||(1===a.length?a.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"==typeof e){var n=e.which||e.keyCode||e.charCode;if(null==n)return!1;if("string"==typeof t){var a;if(a=i[t.toLowerCase()])return a===n;if(a=r[t.toLowerCase()])return a===n}else if("number"==typeof t)return t===n;return!1}};var i=(t=e.exports=n).code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)i[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)i[a-48]=a;for(a=1;a<13;a++)i["f"+a]=a+111;for(a=0;a<10;a++)i["numpad "+a]=a+96;var o=t.names=t.title={};for(a in i)o[i[a]]=a;for(var s in r)i[s]=r[s]},9288:(e,t,n)=>{var i,r="__lodash_hash_undefined__",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,s=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,u=/^\[object .+?Constructor\]$/,c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,h=c||p||Function("return this")(),f=Array.prototype,g=Function.prototype,m=Object.prototype,v=h["__core-js_shared__"],y=(i=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",b=g.toString,_=m.hasOwnProperty,T=m.toString,w=RegExp("^"+b.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=h.Symbol,k=f.splice,I=L(h,"Map"),C=L(Object,"create"),E=S?S.prototype:void 0,A=E?E.toString:void 0;function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function D(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function R(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function L(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!B(e)||y&&y in e)return!1;var t=function(e){var t=B(e)?T.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?w:u;return t.test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}P.prototype.clear=function(){this.__data__=C?C(null):{}},P.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},P.prototype.get=function(e){var t=this.__data__;if(C){var n=t[e];return n===r?void 0:n}return _.call(t,e)?t[e]:void 0},P.prototype.has=function(e){var t=this.__data__;return C?void 0!==t[e]:_.call(t,e)},P.prototype.set=function(e,t){return this.__data__[e]=C&&void 0===t?r:t,this},x.prototype.clear=function(){this.__data__=[]},x.prototype.delete=function(e){var t=this.__data__,n=D(t,e);return!(n<0||(n==t.length-1?t.pop():k.call(t,n,1),0))},x.prototype.get=function(e){var t=this.__data__,n=D(t,e);return n<0?void 0:t[n][1]},x.prototype.has=function(e){return D(this.__data__,e)>-1},x.prototype.set=function(e,t){var n=this.__data__,i=D(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},O.prototype.clear=function(){this.__data__={hash:new P,map:new(I||x),string:new P}},O.prototype.delete=function(e){return R(this,e).delete(e)},O.prototype.get=function(e){return R(this,e).get(e)},O.prototype.has=function(e){return R(this,e).has(e)},O.prototype.set=function(e,t){return R(this,e).set(e,t),this};var M=j((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(F(e))return A?A.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return s.test(e)&&n.push(""),e.replace(d,(function(e,t,i,r){n.push(i?r.replace(l,"$1"):t||e)})),n}));function U(e){if("string"==typeof e||F(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function j(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(j.Cache||O),n}j.Cache=O;var N=Array.isArray;function B(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function F(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==T.call(e)}e.exports=function(e,t,n){var i=null==e?void 0:function(e,t){var n;t=function(e,t){if(N(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!F(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:N(n=t)?n:M(n);for(var i=0,r=t.length;null!=e&&i<r;)e=e[U(t[i++])];return i&&i==r?e:void 0}(e,t);return void 0===i?n:i}},7019:(e,t,n)=>{var i="__lodash_hash_undefined__",r=/^\[object .+?Constructor\]$/,a="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,o="object"==typeof self&&self&&self.Object===Object&&self,s=a||o||Function("return this")();function d(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function l(e,t){return!(!e||!e.length)&&function(e,t,n){if(t!=t)return function(e,t,n,i){for(var r=e.length,a=-1;++a<r;)if(t(e[a],a,e))return a;return-1}(e,c);for(var i=-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}(e,t)>-1}function u(e,t){for(var n=-1,i=e?e.length:0,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}function c(e){return e!=e}function p(e,t){return e.has(t)}var h,f=Array.prototype,g=Function.prototype,m=Object.prototype,v=s["__core-js_shared__"],y=(h=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",b=g.toString,_=m.hasOwnProperty,T=m.toString,w=RegExp("^"+b.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),S=f.splice,k=Math.max,I=Math.min,C=M(s,"Map"),E=M(Object,"create");function A(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function P(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.__data__=new x;++t<n;)this.add(e[t])}function D(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function R(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!B(e)}(e)}(e)?e:[]}function L(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function M(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!F(e)||y&&y in e)return!1;var t=B(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?w:r;return t.test(function(e){if(null!=e){try{return b.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}A.prototype.clear=function(){this.__data__=E?E(null):{}},A.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},A.prototype.get=function(e){var t=this.__data__;if(E){var n=t[e];return n===i?void 0:n}return _.call(t,e)?t[e]:void 0},A.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:_.call(t,e)},A.prototype.set=function(e,t){return this.__data__[e]=E&&void 0===t?i:t,this},P.prototype.clear=function(){this.__data__=[]},P.prototype.delete=function(e){var t=this.__data__,n=D(t,e);return!(n<0||(n==t.length-1?t.pop():S.call(t,n,1),0))},P.prototype.get=function(e){var t=this.__data__,n=D(t,e);return n<0?void 0:t[n][1]},P.prototype.has=function(e){return D(this.__data__,e)>-1},P.prototype.set=function(e,t){var n=this.__data__,i=D(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},x.prototype.clear=function(){this.__data__={hash:new A,map:new(C||P),string:new A}},x.prototype.delete=function(e){return L(this,e).delete(e)},x.prototype.get=function(e){return L(this,e).get(e)},x.prototype.has=function(e){return L(this,e).has(e)},x.prototype.set=function(e,t){return L(this,e).set(e,t),this},O.prototype.add=O.prototype.push=function(e){return this.__data__.set(e,i),this},O.prototype.has=function(e){return this.__data__.has(e)};var U,j,N=(U=function(e){var t=u(e,R);return t.length&&t[0]===e[0]?function(e,t,n){for(var i=l,r=e[0].length,a=e.length,o=a,s=Array(a),d=1/0,u=[];o--;){var c=e[o];d=I(c.length,d),s[o]=r>=120&&c.length>=120?new O(o&&c):void 0}c=e[0];var h=-1,f=s[0];e:for(;++h<r&&u.length<d;){var g=c[h],m=g;if(g=0!==g?g:0,!(f?p(f,m):i(u,m,n))){for(o=a;--o;){var v=s[o];if(!(v?p(v,m):i(e[o],m,n)))continue e}f&&f.push(m),u.push(g)}}return u}(t):[]},j=k(void 0===j?U.length-1:j,0),function(){for(var e=arguments,t=-1,n=k(e.length-j,0),i=Array(n);++t<n;)i[t]=e[j+t];t=-1;for(var r=Array(j+1);++t<j;)r[t]=e[t];return r[j]=i,d(U,this,r)});function B(e){var t=F(e)?T.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}function F(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=N},8909:(e,t,n)=>{var i,r="__lodash_hash_undefined__",a=/^\[object .+?Constructor\]$/,o="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,s="object"==typeof self&&self&&self.Object===Object&&self,d=o||s||Function("return this")(),l=Array.prototype,u=Function.prototype,c=Object.prototype,p=d["__core-js_shared__"],h=(i=/[^.]+$/.exec(p&&p.keys&&p.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",f=u.toString,g=c.hasOwnProperty,m=c.toString,v=RegExp("^"+f.call(g).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),y=l.splice,b=C(d,"Map"),_=C(Object,"create");function T(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function w(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function S(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function k(e,t){for(var n,i,r=e.length;r--;)if((n=e[r][0])===(i=t)||n!=n&&i!=i)return r;return-1}function I(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function C(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!A(e)||h&&h in e)return!1;var t=function(e){var t=A(e)?m.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?v:a;return t.test(function(e){if(null!=e){try{return f.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function E(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(E.Cache||S),n}function A(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}T.prototype.clear=function(){this.__data__=_?_(null):{}},T.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},T.prototype.get=function(e){var t=this.__data__;if(_){var n=t[e];return n===r?void 0:n}return g.call(t,e)?t[e]:void 0},T.prototype.has=function(e){var t=this.__data__;return _?void 0!==t[e]:g.call(t,e)},T.prototype.set=function(e,t){return this.__data__[e]=_&&void 0===t?r:t,this},w.prototype.clear=function(){this.__data__=[]},w.prototype.delete=function(e){var t=this.__data__,n=k(t,e);return!(n<0||(n==t.length-1?t.pop():y.call(t,n,1),0))},w.prototype.get=function(e){var t=this.__data__,n=k(t,e);return n<0?void 0:t[n][1]},w.prototype.has=function(e){return k(this.__data__,e)>-1},w.prototype.set=function(e,t){var n=this.__data__,i=k(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},S.prototype.clear=function(){this.__data__={hash:new T,map:new(b||w),string:new T}},S.prototype.delete=function(e){return I(this,e).delete(e)},S.prototype.get=function(e){return I(this,e).get(e)},S.prototype.has=function(e){return I(this,e).has(e)},S.prototype.set=function(e,t){return I(this,e).set(e,t),this},E.Cache=S,e.exports=E},6247:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",o="[object Function]",s="[object Object]",d=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[a]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[o]=u["[object Map]"]=u["[object Number]"]=u[s]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,h=c||p||Function("return this")(),f=t&&!t.nodeType&&t,g=f&&e&&!e.nodeType&&e,m=g&&g.exports===f,v=m&&c.process,y=function(){try{return g&&g.require&&g.require("util").types||v&&v.binding&&v.binding("util")}catch(e){}}(),b=y&&y.isTypedArray;function _(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var T,w,S,k=Array.prototype,I=Function.prototype,C=Object.prototype,E=h["__core-js_shared__"],A=I.toString,P=C.hasOwnProperty,x=(T=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"",O=C.toString,D=A.call(Object),R=RegExp("^"+A.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=m?h.Buffer:void 0,M=h.Symbol,U=h.Uint8Array,j=(L&&L.allocUnsafe,w=Object.getPrototypeOf,S=Object,function(e){return w(S(e))}),N=Object.create,B=C.propertyIsEnumerable,F=k.splice,q=M?M.toStringTag:void 0,V=function(){try{var e=de(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),H=L?L.isBuffer:void 0,z=Math.max,W=Date.now,$=de(h,"Map"),G=de(Object,"create"),K=function(){function e(){}return function(t){if(!_e(t))return{};if(N)return N(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function X(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function J(e){var t=this.__data__=new Z(e);this.size=t.size}function Q(e,t,n){(void 0!==n&&!he(e[t],n)||void 0===n&&!(t in e))&&ne(e,t,n)}function ee(e,t,n){var i=e[t];P.call(e,t)&&he(i,n)&&(void 0!==n||t in e)||ne(e,t,n)}function te(e,t){for(var n=e.length;n--;)if(he(e[n][0],t))return n;return-1}function ne(e,t,n){"__proto__"==t&&V?V(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}X.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},X.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X.prototype.get=function(e){var t=this.__data__;if(G){var n=t[e];return n===i?void 0:n}return P.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return G?void 0!==t[e]:P.call(t,e)},X.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=G&&void 0===t?i:t,this},Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(e){var t=this.__data__,n=te(t,e);return!(n<0||(n==t.length-1?t.pop():F.call(t,n,1),--this.size,0))},Z.prototype.get=function(e){var t=this.__data__,n=te(t,e);return n<0?void 0:t[n][1]},Z.prototype.has=function(e){return te(this.__data__,e)>-1},Z.prototype.set=function(e,t){var n=this.__data__,i=te(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new X,map:new($||Z),string:new X}},Y.prototype.delete=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return se(this,e).get(e)},Y.prototype.has=function(e){return se(this,e).has(e)},Y.prototype.set=function(e,t){var n=se(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},J.prototype.clear=function(){this.__data__=new Z,this.size=0},J.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},J.prototype.get=function(e){return this.__data__.get(e)},J.prototype.has=function(e){return this.__data__.has(e)},J.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Z){var i=n.__data__;if(!$||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Y(i)}return n.set(e,t),this.size=n.size,this};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":q&&q in Object(e)?function(e){var t=P.call(e,q),n=e[q];try{e[q]=void 0;var i=!0}catch(e){}var r=O.call(e);return i&&(t?e[q]=n:delete e[q]),r}(e):function(e){return O.call(e)}(e)}function re(e){return Te(e)&&ie(e)==a}function ae(e,t,n,i,r){e!==t&&function(e,t,n){for(var i=-1,r=Object(e),a=n(e),o=a.length;o--;){var s=a[++i];if(!1===t(r[s],s,r))break}}(t,(function(a,o){if(r||(r=new J),_e(a))!function(e,t,n,i,r,a,o){var d=ce(e,n),l=ce(t,n),u=o.get(l);if(u)Q(e,n,u);else{var c,p,h,f,g,m=a?a(d,l,n+"",e,t,o):void 0,v=void 0===m;if(v){var y=ge(l),b=!y&&ve(l),_=!y&&!b&&we(l);m=l,y||b||_?ge(d)?m=d:Te(g=d)&&me(g)?m=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(d):b?(v=!1,m=function(e,t){return e.slice()}(l)):_?(v=!1,f=new(h=(c=l).buffer).constructor(h.byteLength),new U(f).set(new U(h)),p=f,m=new c.constructor(p,c.byteOffset,c.length)):m=[]:function(e){if(!Te(e)||ie(e)!=s)return!1;var t=j(e);if(null===t)return!0;var n=P.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&A.call(n)==D}(l)||fe(l)?(m=d,fe(d)?m=function(e){return function(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],d=void 0;void 0===d&&(d=e[s]),r?ne(n,s,d):ee(n,s,d)}return n}(e,Se(e))}(d):_e(d)&&!ye(d)||(m=function(e){return"function"!=typeof e.constructor||ue(e)?{}:K(j(e))}(l))):v=!1}v&&(o.set(l,m),r(m,l,i,a,o),o.delete(l)),Q(e,n,m)}}(e,t,o,n,ae,i,r);else{var d=i?i(ce(e,o),a,o+"",e,t,r):void 0;void 0===d&&(d=a),Q(e,o,d)}}),Se)}var oe=V?function(e,t){return V(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ce;function se(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function de(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!_e(e)||function(e){return!!x&&x in e}(e))&&(ye(e)?R:d).test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function le(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&l.test(e))&&e>-1&&e%1==0&&e<t}function ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||C)}function ce(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pe=function(e){var t=0,n=0;return function(){var i=W(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(oe);function he(e,t){return e===t||e!=e&&t!=t}var fe=re(function(){return arguments}())?re:function(e){return Te(e)&&P.call(e,"callee")&&!B.call(e,"callee")},ge=Array.isArray;function me(e){return null!=e&&be(e.length)&&!ye(e)}var ve=H||function(){return!1};function ye(e){if(!_e(e))return!1;var t=ie(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function _e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Te(e){return null!=e&&"object"==typeof e}var we=b?function(e){return function(t){return e(t)}}(b):function(e){return Te(e)&&be(e.length)&&!!u[ie(e)]};function Se(e){return me(e)?function(e,t){var n=ge(e),i=!n&&fe(e),r=!n&&!i&&ve(e),a=!n&&!i&&!r&&we(e),o=n||i||r||a,s=o?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],d=s.length;for(var l in e)!t&&!P.call(e,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||le(l,d))||s.push(l);return s}(e,!0):function(e){if(!_e(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ue(e),n=[];for(var i in e)("constructor"!=i||!t&&P.call(e,i))&&n.push(i);return n}(e)}var ke,Ie=(ke=function(e,t,n){ae(e,t,n)},function(e,t){return pe(function(e,t,n){return t=z(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=z(i.length-t,0),o=Array(a);++r<a;)o[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(o),_(e,this,s)}}(e,t,Ce),e+"")}((function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(r=ke.length>3&&"function"==typeof r?(i--,r):void 0,a&&function(e,t,n){if(!_e(n))return!1;var i=typeof t;return!!("number"==i?me(n)&&le(t,n.length):"string"==i&&t in n)&&he(n[t],e)}(t[0],t[1],a)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var o=t[n];o&&ke(e,o,n)}return e})));function Ce(e){return e}e.exports=Ie},1211:(e,t,n)=>{e=n.nmd(e);var i="__lodash_hash_undefined__",r=9007199254740991,a="[object Arguments]",o="[object Function]",s="[object Object]",d=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,u={};u["[object Float32Array]"]=u["[object Float64Array]"]=u["[object Int8Array]"]=u["[object Int16Array]"]=u["[object Int32Array]"]=u["[object Uint8Array]"]=u["[object Uint8ClampedArray]"]=u["[object Uint16Array]"]=u["[object Uint32Array]"]=!0,u[a]=u["[object Array]"]=u["[object ArrayBuffer]"]=u["[object Boolean]"]=u["[object DataView]"]=u["[object Date]"]=u["[object Error]"]=u[o]=u["[object Map]"]=u["[object Number]"]=u[s]=u["[object RegExp]"]=u["[object Set]"]=u["[object String]"]=u["[object WeakMap]"]=!1;var c="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,p="object"==typeof self&&self&&self.Object===Object&&self,h=c||p||Function("return this")(),f=t&&!t.nodeType&&t,g=f&&e&&!e.nodeType&&e,m=g&&g.exports===f,v=m&&c.process,y=function(){try{return g&&g.require&&g.require("util").types||v&&v.binding&&v.binding("util")}catch(e){}}(),b=y&&y.isTypedArray;function _(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var T,w,S,k=Array.prototype,I=Function.prototype,C=Object.prototype,E=h["__core-js_shared__"],A=I.toString,P=C.hasOwnProperty,x=(T=/[^.]+$/.exec(E&&E.keys&&E.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"",O=C.toString,D=A.call(Object),R=RegExp("^"+A.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),L=m?h.Buffer:void 0,M=h.Symbol,U=h.Uint8Array,j=(L&&L.allocUnsafe,w=Object.getPrototypeOf,S=Object,function(e){return w(S(e))}),N=Object.create,B=C.propertyIsEnumerable,F=k.splice,q=M?M.toStringTag:void 0,V=function(){try{var e=de(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),H=L?L.isBuffer:void 0,z=Math.max,W=Date.now,$=de(h,"Map"),G=de(Object,"create"),K=function(){function e(){}return function(t){if(!_e(t))return{};if(N)return N(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function X(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Z(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function Y(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function J(e){var t=this.__data__=new Z(e);this.size=t.size}function Q(e,t,n){(void 0!==n&&!he(e[t],n)||void 0===n&&!(t in e))&&ne(e,t,n)}function ee(e,t,n){var i=e[t];P.call(e,t)&&he(i,n)&&(void 0!==n||t in e)||ne(e,t,n)}function te(e,t){for(var n=e.length;n--;)if(he(e[n][0],t))return n;return-1}function ne(e,t,n){"__proto__"==t&&V?V(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}X.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},X.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},X.prototype.get=function(e){var t=this.__data__;if(G){var n=t[e];return n===i?void 0:n}return P.call(t,e)?t[e]:void 0},X.prototype.has=function(e){var t=this.__data__;return G?void 0!==t[e]:P.call(t,e)},X.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=G&&void 0===t?i:t,this},Z.prototype.clear=function(){this.__data__=[],this.size=0},Z.prototype.delete=function(e){var t=this.__data__,n=te(t,e);return!(n<0||(n==t.length-1?t.pop():F.call(t,n,1),--this.size,0))},Z.prototype.get=function(e){var t=this.__data__,n=te(t,e);return n<0?void 0:t[n][1]},Z.prototype.has=function(e){return te(this.__data__,e)>-1},Z.prototype.set=function(e,t){var n=this.__data__,i=te(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},Y.prototype.clear=function(){this.size=0,this.__data__={hash:new X,map:new($||Z),string:new X}},Y.prototype.delete=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t},Y.prototype.get=function(e){return se(this,e).get(e)},Y.prototype.has=function(e){return se(this,e).has(e)},Y.prototype.set=function(e,t){var n=se(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},J.prototype.clear=function(){this.__data__=new Z,this.size=0},J.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},J.prototype.get=function(e){return this.__data__.get(e)},J.prototype.has=function(e){return this.__data__.has(e)},J.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Z){var i=n.__data__;if(!$||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Y(i)}return n.set(e,t),this.size=n.size,this};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":q&&q in Object(e)?function(e){var t=P.call(e,q),n=e[q];try{e[q]=void 0;var i=!0}catch(e){}var r=O.call(e);return i&&(t?e[q]=n:delete e[q]),r}(e):function(e){return O.call(e)}(e)}function re(e){return Te(e)&&ie(e)==a}function ae(e,t,n,i,r){e!==t&&function(e,t,n){for(var i=-1,r=Object(e),a=n(e),o=a.length;o--;){var s=a[++i];if(!1===t(r[s],s,r))break}}(t,(function(a,o){if(r||(r=new J),_e(a))!function(e,t,n,i,r,a,o){var d=ce(e,n),l=ce(t,n),u=o.get(l);if(u)Q(e,n,u);else{var c,p,h,f,g,m=a?a(d,l,n+"",e,t,o):void 0,v=void 0===m;if(v){var y=ge(l),b=!y&&ve(l),_=!y&&!b&&we(l);m=l,y||b||_?ge(d)?m=d:Te(g=d)&&me(g)?m=function(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}(d):b?(v=!1,m=function(e,t){return e.slice()}(l)):_?(v=!1,f=new(h=(c=l).buffer).constructor(h.byteLength),new U(f).set(new U(h)),p=f,m=new c.constructor(p,c.byteOffset,c.length)):m=[]:function(e){if(!Te(e)||ie(e)!=s)return!1;var t=j(e);if(null===t)return!0;var n=P.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&A.call(n)==D}(l)||fe(l)?(m=d,fe(d)?m=function(e){return function(e,t,n,i){var r=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],d=void 0;void 0===d&&(d=e[s]),r?ne(n,s,d):ee(n,s,d)}return n}(e,Se(e))}(d):_e(d)&&!ye(d)||(m=function(e){return"function"!=typeof e.constructor||ue(e)?{}:K(j(e))}(l))):v=!1}v&&(o.set(l,m),r(m,l,i,a,o),o.delete(l)),Q(e,n,m)}}(e,t,o,n,ae,i,r);else{var d=i?i(ce(e,o),a,o+"",e,t,r):void 0;void 0===d&&(d=a),Q(e,o,d)}}),Se)}var oe=V?function(e,t){return V(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ce;function se(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function de(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!_e(e)||function(e){return!!x&&x in e}(e))&&(ye(e)?R:d).test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function le(e,t){var n=typeof e;return!!(t=null==t?r:t)&&("number"==n||"symbol"!=n&&l.test(e))&&e>-1&&e%1==0&&e<t}function ue(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||C)}function ce(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pe=function(e){var t=0,n=0;return function(){var i=W(),r=16-(i-n);if(n=i,r>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(oe);function he(e,t){return e===t||e!=e&&t!=t}var fe=re(function(){return arguments}())?re:function(e){return Te(e)&&P.call(e,"callee")&&!B.call(e,"callee")},ge=Array.isArray;function me(e){return null!=e&&be(e.length)&&!ye(e)}var ve=H||function(){return!1};function ye(e){if(!_e(e))return!1;var t=ie(e);return t==o||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function be(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}function _e(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Te(e){return null!=e&&"object"==typeof e}var we=b?function(e){return function(t){return e(t)}}(b):function(e){return Te(e)&&be(e.length)&&!!u[ie(e)]};function Se(e){return me(e)?function(e,t){var n=ge(e),i=!n&&fe(e),r=!n&&!i&&ve(e),a=!n&&!i&&!r&&we(e),o=n||i||r||a,s=o?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],d=s.length;for(var l in e)!t&&!P.call(e,l)||o&&("length"==l||r&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||le(l,d))||s.push(l);return s}(e,!0):function(e){if(!_e(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=ue(e),n=[];for(var i in e)("constructor"!=i||!t&&P.call(e,i))&&n.push(i);return n}(e)}var ke,Ie=(ke=function(e,t,n,i){ae(e,t,n,i)},function(e,t){return pe(function(e,t,n){return t=z(void 0===t?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=z(i.length-t,0),o=Array(a);++r<a;)o[r]=i[t+r];r=-1;for(var s=Array(t+1);++r<t;)s[r]=i[r];return s[t]=n(o),_(e,this,s)}}(e,t,Ce),e+"")}((function(e,t){var n=-1,i=t.length,r=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(r=ke.length>3&&"function"==typeof r?(i--,r):void 0,a&&function(e,t,n){if(!_e(n))return!1;var i=typeof t;return!!("number"==i?me(n)&&le(t,n.length):"string"==i&&t in n)&&he(n[t],e)}(t[0],t[1],a)&&(r=i<3?void 0:r,i=1),e=Object(e);++n<i;){var o=t[n];o&&ke(e,o,n,r)}return e})));function Ce(e){return e}e.exports=Ie},8622:(e,t,n)=>{var i,r="__lodash_hash_undefined__",a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/,s=/^\./,d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,l=/\\(\\)?/g,u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,p="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,h="object"==typeof self&&self&&self.Object===Object&&self,f=p||h||Function("return this")(),g=Array.prototype,m=Function.prototype,v=Object.prototype,y=f["__core-js_shared__"],b=(i=/[^.]+$/.exec(y&&y.keys&&y.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",_=m.toString,T=v.hasOwnProperty,w=v.toString,S=RegExp("^"+_.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=f.Symbol,I=g.splice,C=U(f,"Map"),E=U(Object,"create"),A=k?k.prototype:void 0,P=A?A.toString:void 0;function x(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function O(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function D(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}function R(e,t,n){var i=e[t];T.call(e,t)&&q(i,n)&&(void 0!==n||t in e)||(e[t]=n)}function L(e,t){for(var n=e.length;n--;)if(q(e[n][0],t))return n;return-1}function M(e,t){var n,i,r=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function U(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){if(!H(e)||b&&b in e)return!1;var t=function(e){var t=H(e)?w.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?S:u;return t.test(function(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(n)?n:void 0}function j(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}x.prototype.clear=function(){this.__data__=E?E(null):{}},x.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},x.prototype.get=function(e){var t=this.__data__;if(E){var n=t[e];return n===r?void 0:n}return T.call(t,e)?t[e]:void 0},x.prototype.has=function(e){var t=this.__data__;return E?void 0!==t[e]:T.call(t,e)},x.prototype.set=function(e,t){return this.__data__[e]=E&&void 0===t?r:t,this},O.prototype.clear=function(){this.__data__=[]},O.prototype.delete=function(e){var t=this.__data__,n=L(t,e);return!(n<0||(n==t.length-1?t.pop():I.call(t,n,1),0))},O.prototype.get=function(e){var t=this.__data__,n=L(t,e);return n<0?void 0:t[n][1]},O.prototype.has=function(e){return L(this.__data__,e)>-1},O.prototype.set=function(e,t){var n=this.__data__,i=L(n,e);return i<0?n.push([e,t]):n[i][1]=t,this},D.prototype.clear=function(){this.__data__={hash:new x,map:new(C||O),string:new x}},D.prototype.delete=function(e){return M(this,e).delete(e)},D.prototype.get=function(e){return M(this,e).get(e)},D.prototype.has=function(e){return M(this,e).has(e)},D.prototype.set=function(e,t){return M(this,e).set(e,t),this};var N=F((function(e){var t;e=null==(t=e)?"":function(e){if("string"==typeof e)return e;if(z(e))return P?P.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(t);var n=[];return s.test(e)&&n.push(""),e.replace(d,(function(e,t,i,r){n.push(i?r.replace(l,"$1"):t||e)})),n}));function B(e){if("string"==typeof e||z(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function F(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=e.apply(this,i);return n.cache=a.set(r,o),o};return n.cache=new(F.Cache||D),n}function q(e,t){return e===t||e!=e&&t!=t}F.Cache=D;var V=Array.isArray;function H(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function z(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==w.call(e)}e.exports=function(e,t,n){return null==e?e:function(e,t,n,i){if(!H(e))return e;t=function(e,t){if(V(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!z(e))||o.test(e)||!a.test(e)||null!=t&&e in Object(t)}(t,e)?[t]:function(e){return V(e)?e:N(e)}(t);for(var r=-1,s=t.length,d=s-1,l=e;null!=l&&++r<s;){var u=B(t[r]),c=n;if(r!=d){var p=l[u];void 0===(c=i?i(p,u,l):void 0)&&(c=H(p)?p:j(t[r+1])?[]:{})}R(l,u,c),l=l[u]}return e}(e,t,n)}},4441:(e,t,n)=>{var i=n(8694).getUint64;e.exports=function(e){var t=new DataView(e.buffer,e.byteOffset,e.byteLength),n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;0===n.version?(n.earliestPresentationTime=t.getUint32(r),n.firstOffset=t.getUint32(r+4),r+=8):(n.earliestPresentationTime=i(e.subarray(r)),n.firstOffset=i(e.subarray(r+8)),r+=16),r+=2;var a=t.getUint16(r);for(r+=2;a>0;r+=12,a--)n.references.push({referenceType:(128&e[r])>>>7,referencedSize:2147483647&t.getUint32(r),subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(128&e[r+8]),sapType:(112&e[r+8])>>>4,sapDeltaTime:268435455&t.getUint32(r+8)});return n}},9750:e=>{var t,n,i,r,a,o,s,d=9e4;t=function(e){return e*d},n=function(e,t){return e*t},i=function(e){return e/d},r=function(e,t){return e/t},a=function(e,n){return t(r(e,n))},o=function(e,t){return n(i(e),t)},s=function(e,t,n){return i(n?e:e-t)},e.exports={ONE_SECOND_IN_TS:d,secondsToVideoTs:t,secondsToAudioTs:n,videoTsToSeconds:i,audioTsToSeconds:r,audioTsToVideoTs:a,videoTsToAudioTs:o,metadataTsToSeconds:s}},8694:e=>{var t=Math.pow(2,32);e.exports={getUint64:function(e){var n,i=new DataView(e.buffer,e.byteOffset,e.byteLength);return i.getBigUint64?(n=i.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(n):n:i.getUint32(0)*t+i.getUint32(4)},MAX_UINT32:t}},2695:e=>{var t,n,i=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(e){t=r}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var s,d=[],l=!1,u=-1;function c(){l&&s&&(l=!1,s.length?d=s.concat(d):u=-1,d.length&&p())}function p(){if(!l){var e=o(c);l=!0;for(var t=d.length;t;){for(s=d,d=[];++u<t;)s&&s[u].run();u=-1,t=d.length}s=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function f(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];d.push(new h(e,t)),1!==d.length||l||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=f,i.addListener=f,i.once=f,i.off=f,i.removeListener=f,i.removeAllListeners=f,i.emit=f,i.prependListener=f,i.prependOnceListener=f,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},6856:(e,t,n)=>{"use strict";var i=Object.prototype.hasOwnProperty;function r(e,t){return Array.isArray(e)?function(e,t){for(var n,i="",a="",o=Array.isArray(t),s=0;s<e.length;s++)(n=r(e[s]))&&(o&&t[s]&&(n=d(n)),i=i+a+n,a=" ");return i}(e,t):e&&"object"==typeof e?function(e){var t="",n="";for(var r in e)r&&e[r]&&i.call(e,r)&&(t=t+n+r,n=" ");return t}(e):e||""}function a(e){if(!e)return"";if("object"==typeof e){var t="";for(var n in e)i.call(e,n)&&(t=t+n+":"+e[n]+";");return t}return e+""}function o(e,t,n,i){if(!1===t||null==t||!t&&("class"===e||"style"===e))return"";if(!0===t)return" "+(i?e:e+'="'+e+'"');var r=typeof t;return"object"!==r&&"function"!==r||"function"!=typeof t.toJSON||(t=t.toJSON()),"string"==typeof t||(t=JSON.stringify(t),n||-1===t.indexOf('"'))?(n&&(t=d(t))," "+e+'="'+t+'"'):" "+e+"='"+t.replace(/'/g,"&#39;")+"'"}t.merge=function e(t,n){if(1===arguments.length){for(var i=t[0],r=1;r<t.length;r++)i=e(i,t[r]);return i}for(var o in n)if("class"===o){var s=t[o]||[];t[o]=(Array.isArray(s)?s:[s]).concat(n[o]||[])}else if("style"===o){s=(s=a(t[o]))&&";"!==s[s.length-1]?s+";":s;var d=a(n[o]);d=d&&";"!==d[d.length-1]?d+";":d,t[o]=s+d}else t[o]=n[o];return t},t.classes=r,t.style=a,t.attr=o,t.attrs=function(e,t){var n="";for(var s in e)if(i.call(e,s)){var d=e[s];if("class"===s){n=o(s,d=r(d),!1,t)+n;continue}"style"===s&&(d=a(d)),n+=o(s,d,!1,t)}return n};var s=/["&<>]/;function d(e){var t=""+e,n=s.exec(t);if(!n)return e;var i,r,a,o="";for(i=n.index,r=0;i<t.length;i++){switch(t.charCodeAt(i)){case 34:a="&quot;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}r!==i&&(o+=t.substring(r,i)),r=i+1,o+=a}return r!==i?o+t.substring(r,i):o}t.escape=d,t.rethrow=function e(t,i,r,a){if(!(t instanceof Error))throw t;if(!("undefined"==typeof window&&i||a))throw t.message+=" on line "+r,t;var o,s,d,l;try{a=a||n(7044).readFileSync(i,{encoding:"utf8"}),o=3,s=a.split("\n"),d=Math.max(r-o,0),l=Math.min(s.length,r+o)}catch(n){return t.message+=" - could not read from "+i+" ("+n.message+")",void e(t,null,r)}o=s.slice(d,l).map((function(e,t){var n=t+d+1;return(n==r?"  > ":"    ")+n+"| "+e})).join("\n"),t.path=i;try{t.message=(i||"Pug")+":"+r+"\n"+o+"\n\n"+t.message}catch(e){}throw t}},553:e=>{"use strict";var t={};function n(e,n,i){i||(i=Error);var r=function(e){var t,i;function r(t,i,r){return e.call(this,function(e,t,i){return"string"==typeof n?n:n(e,t,i)}(t,i,r))||this}return i=e,(t=r).prototype=Object.create(i.prototype),t.prototype.constructor=t,t.__proto__=i,r}(i);r.prototype.name=i.name,r.prototype.code=e,t[e]=r}function i(e,t){if(Array.isArray(e)){var n=e.length;return e=e.map((function(e){return String(e)})),n>2?"one of ".concat(t," ").concat(e.slice(0,n-1).join(", "),", or ")+e[n-1]:2===n?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}n("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),n("ERR_INVALID_ARG_TYPE",(function(e,t,n){var r,a,o,s,d;if("string"==typeof t&&(a="not ",t.substr(0,a.length)===a)?(r="must not be",t=t.replace(/^not /,"")):r="must be",function(e,t,n){return(void 0===n||n>e.length)&&(n=e.length),e.substring(n-t.length,n)===t}(e," argument"))o="The ".concat(e," ").concat(r," ").concat(i(t,"type"));else{var l=("number"!=typeof d&&(d=0),d+".".length>(s=e).length||-1===s.indexOf(".",d)?"argument":"property");o='The "'.concat(e,'" ').concat(l," ").concat(r," ").concat(i(t,"type"))}return o+". Received type ".concat(typeof n)}),TypeError),n("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),n("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),n("ERR_STREAM_PREMATURE_CLOSE","Premature close"),n("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),n("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),n("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),n("ERR_STREAM_WRITE_AFTER_END","write after end"),n("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),n("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),n("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},673:(e,t,n)=>{"use strict";var i=n(2695),r=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};e.exports=u;var a=n(5006),o=n(8719);n(3730)(u,a);for(var s=r(o.prototype),d=0;d<s.length;d++){var l=s[d];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(e){if(!(this instanceof u))return new u(e);a.call(this,e),o.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||i.nextTick(p,this)}function p(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},4343:(e,t,n)=>{"use strict";e.exports=r;var i=n(8597);function r(e){if(!(this instanceof r))return new r(e);i.call(this,e)}n(3730)(r,i),r.prototype._transform=function(e,t,n){n(null,e)}},5006:(e,t,n)=>{"use strict";var i,r=n(2695);e.exports=I,I.ReadableState=k,n(3346).EventEmitter;var a,o=function(e,t){return e.listeners(t).length},s=n(8208),d=n(500).Buffer,l=n.g.Uint8Array||function(){},u=n(6029);a=u&&u.debuglog?u.debuglog("stream"):function(){};var c,p,h,f=n(4506),g=n(3390),m=n(1111).getHighWaterMark,v=n(553).q,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,_=v.ERR_METHOD_NOT_IMPLEMENTED,T=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;n(3730)(I,s);var w=g.errorOrDestroy,S=["error","close","destroy","pause","resume"];function k(e,t,r){i=i||n(673),e=e||{},"boolean"!=typeof r&&(r=t instanceof i),this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=m(this,e,"readableHighWaterMark",r),this.buffer=new f,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(c||(c=n(7361).s),this.decoder=new c(e.encoding),this.encoding=e.encoding)}function I(e){if(i=i||n(673),!(this instanceof I))return new I(e);var t=this instanceof i;this._readableState=new k(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function C(e,t,n,i,r){a("readableAddChunk",t);var o,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(a("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?x(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,O(e)))}}(e,s);else if(r||(o=function(e,t){var n,i;return i=t,d.isBuffer(i)||i instanceof l||"string"==typeof t||void 0===t||e.objectMode||(n=new y("chunk",["string","Buffer","Uint8Array"],t)),n}(s,t)),o)w(e,o);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=function(e){return d.from(e)}(t)),i)s.endEmitted?w(e,new T):E(e,s,t,!0);else if(s.ended)w(e,new b);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!n?(t=s.decoder.write(t),s.objectMode||0!==t.length?E(e,s,t,!1):D(e,s)):E(e,s,t,!1)}else i||(s.reading=!1,D(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function E(e,t,n,i){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&x(e)),D(e,t)}Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),I.prototype.destroy=g.destroy,I.prototype._undestroy=g.undestroy,I.prototype._destroy=function(e,t){t(e)},I.prototype.push=function(e,t){var n,i=this._readableState;return i.objectMode?n=!0:"string"==typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=d.from(e,t),t=""),n=!0),C(this,e,t,!1,n)},I.prototype.unshift=function(e){return C(this,e,null,!0,!1)},I.prototype.isPaused=function(){return!1===this._readableState.flowing},I.prototype.setEncoding=function(e){c||(c=n(7361).s);var t=new c(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var i=this._readableState.buffer.head,r="";null!==i;)r+=t.write(i.data),i=i.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var A=1073741824;function P(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=A?e=A:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function x(e){var t=e._readableState;a("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(a("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(O,e))}function O(e){var t=e._readableState;a("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,j(e)}function D(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(R,e,t))}function R(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(a("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function L(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function M(e){a("readable nexttick read 0"),e.read(0)}function U(e,t){a("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),j(e),t.flowing&&!t.reading&&e.read(0)}function j(e){var t=e._readableState;for(a("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function B(e){var t=e._readableState;a("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(F,t,e))}function F(e,t){if(a("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function q(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1}I.prototype.read=function(e){a("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return a("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):x(this),null;if(0===(e=P(e,t))&&t.ended)return 0===t.length&&B(this),null;var i,r=t.needReadable;return a("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&a("length less than watermark",r=!0),t.ended||t.reading?a("reading or ended",r=!1):r&&(a("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=P(n,t))),null===(i=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&B(this)),null!==i&&this.emit("data",i),i},I.prototype._read=function(e){w(this,new _("_read()"))},I.prototype.pipe=function(e,t){var n=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e)}i.pipesCount+=1,a("pipe count=%d opts=%j",i.pipesCount,t);var s=t&&!1===t.end||e===r.stdout||e===r.stderr?g:d;function d(){a("onend"),e.end()}i.endEmitted?r.nextTick(s):n.once("end",s),e.on("unpipe",(function t(r,o){a("onunpipe"),r===n&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,a("cleanup"),e.removeListener("close",h),e.removeListener("finish",f),e.removeListener("drain",l),e.removeListener("error",p),e.removeListener("unpipe",t),n.removeListener("end",d),n.removeListener("end",g),n.removeListener("data",c),u=!0,!i.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}));var l=function(e){return function(){var t=e._readableState;a("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,j(e))}}(n);e.on("drain",l);var u=!1;function c(t){a("ondata");var r=e.write(t);a("dest.write",r),!1===r&&((1===i.pipesCount&&i.pipes===e||i.pipesCount>1&&-1!==q(i.pipes,e))&&!u&&(a("false write response, pause",i.awaitDrain),i.awaitDrain++),n.pause())}function p(t){a("onerror",t),g(),e.removeListener("error",p),0===o(e,"error")&&w(e,t)}function h(){e.removeListener("finish",f),g()}function f(){a("onfinish"),e.removeListener("close",h),g()}function g(){a("unpipe"),n.unpipe(e)}return n.on("data",c),function(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(n):e._events.error=[n,e._events.error]:e.on(t,n)}(e,"error",p),e.once("close",h),e.once("finish",f),e.emit("pipe",n),i.flowing||(a("pipe resume"),n.resume()),e},I.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n)),this;if(!e){var i=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<r;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var o=q(t.pipes,e);return-1===o||(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n)),this},I.prototype.on=function(e,t){var n=s.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,a("on readable",i.length,i.reading),i.length?x(this):i.reading||r.nextTick(M,this))),n},I.prototype.addListener=I.prototype.on,I.prototype.removeListener=function(e,t){var n=s.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(L,this),n},I.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||r.nextTick(L,this),t},I.prototype.resume=function(){var e=this._readableState;return e.flowing||(a("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(U,e,t))}(this,e)),e.paused=!1,this},I.prototype.pause=function(){return a("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(a("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},I.prototype.wrap=function(e){var t=this,n=this._readableState,i=!1;for(var r in e.on("end",(function(){if(a("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(r){a("wrapped data"),n.decoder&&(r=n.decoder.write(r)),n.objectMode&&null==r||(n.objectMode||r&&r.length)&&(t.push(r)||(i=!0,e.pause()))})),e)void 0===this[r]&&"function"==typeof e[r]&&(this[r]=function(t){return function(){return e[t].apply(e,arguments)}}(r));for(var o=0;o<S.length;o++)e.on(S[o],this.emit.bind(this,S[o]));return this._read=function(t){a("wrapped _read",t),i&&(i=!1,e.resume())},this},"function"==typeof Symbol&&(I.prototype[Symbol.asyncIterator]=function(){return void 0===p&&(p=n(8187)),p(this)}),Object.defineProperty(I.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(I.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(I.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),I._fromList=N,Object.defineProperty(I.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(I.from=function(e,t){return void 0===h&&(h=n(3733)),h(I,e,t)})},8597:(e,t,n)=>{"use strict";e.exports=u;var i=n(553).q,r=i.ERR_METHOD_NOT_IMPLEMENTED,a=i.ERR_MULTIPLE_CALLBACK,o=i.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=i.ERR_TRANSFORM_WITH_LENGTH_0,d=n(673);function l(e,t){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new a);n.writechunk=null,n.writecb=null,null!=t&&this.push(t),i(e);var r=this._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);d.call(this,e),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",c)}function c(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?p(this,null,null):this._flush((function(t,n){p(e,t,n)}))}function p(e,t,n){if(t)return e.emit("error",t);if(null!=n&&e.push(n),e._writableState.length)throw new s;if(e._transformState.transforming)throw new o;return e.push(null)}n(3730)(u,d),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,d.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,n){n(new r("_transform()"))},u.prototype._write=function(e,t,n){var i=this._transformState;if(i.writecb=n,i.writechunk=e,i.writeencoding=t,!i.transforming){var r=this._readableState;(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){d.prototype._destroy.call(this,e,(function(e){t(e)}))}},8719:(e,t,n)=>{"use strict";var i,r=n(2695);function a(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,n){var i=e.entry;for(e.entry=null;i;){var r=i.callback;t.pendingcb--,r(undefined),i=i.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=I,I.WritableState=k;var o,s={deprecate:n(72)},d=n(8208),l=n(500).Buffer,u=n.g.Uint8Array||function(){},c=n(3390),p=n(1111).getHighWaterMark,h=n(553).q,f=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,m=h.ERR_MULTIPLE_CALLBACK,v=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,b=h.ERR_STREAM_NULL_VALUES,_=h.ERR_STREAM_WRITE_AFTER_END,T=h.ERR_UNKNOWN_ENCODING,w=c.errorOrDestroy;function S(){}function k(e,t,o){i=i||n(673),e=e||{},"boolean"!=typeof o&&(o=t instanceof i),this.objectMode=!!e.objectMode,o&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=p(this,e,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var n=e._writableState,i=n.sync,a=n.writecb;if("function"!=typeof a)throw new m;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(n),t)!function(e,t,n,i,a){--t.pendingcb,n?(r.nextTick(a,i),r.nextTick(O,e,t),e._writableState.errorEmitted=!0,w(e,i)):(a(i),e._writableState.errorEmitted=!0,w(e,i),O(e,t))}(e,n,i,t,a);else{var o=P(n)||e.destroyed;o||n.corked||n.bufferProcessing||!n.bufferedRequest||A(e,n),i?r.nextTick(E,e,n,o,a):E(e,n,o,a)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function I(e){var t=this instanceof(i=i||n(673));if(!t&&!o.call(I,this))return new I(e);this._writableState=new k(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),d.call(this)}function C(e,t,n,i,r,a,o){t.writelen=i,t.writecb=o,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):n?e._writev(r,t.onwrite):e._write(r,a,t.onwrite),t.sync=!1}function E(e,t,n,i){n||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),O(e,t)}function A(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var i=t.bufferedRequestCount,r=new Array(i),o=t.corkedRequestsFree;o.entry=n;for(var s=0,d=!0;n;)r[s]=n,n.isBuf||(d=!1),n=n.next,s+=1;r.allBuffers=d,C(e,t,!0,t.length,r,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new a(t),t.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(C(e,t,!1,t.objectMode?1:l.length,l,u,c),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function P(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function x(e,t){e._final((function(n){t.pendingcb--,n&&w(e,n),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var n=P(t);if(n&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(x,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var i=e._readableState;(!i||i.autoDestroy&&i.endEmitted)&&e.destroy()}return n}n(3730)(I,d),k.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(k.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(I,Symbol.hasInstance,{value:function(e){return!!o.call(this,e)||this===I&&e&&e._writableState instanceof k}})):o=function(e){return e instanceof this},I.prototype.pipe=function(){w(this,new v)},I.prototype.write=function(e,t,n){var i,a=this._writableState,o=!1,s=!a.objectMode&&(i=e,l.isBuffer(i)||i instanceof u);return s&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"==typeof t&&(n=t,t=null),s?t="buffer":t||(t=a.defaultEncoding),"function"!=typeof n&&(n=S),a.ending?function(e,t){var n=new _;w(e,n),r.nextTick(t,n)}(this,n):(s||function(e,t,n,i){var a;return null===n?a=new b:"string"==typeof n||t.objectMode||(a=new f("chunk",["string","Buffer"],n)),!a||(w(e,a),r.nextTick(i,a),!1)}(this,a,e,n))&&(a.pendingcb++,o=function(e,t,n,i,r,a){if(!n){var o=function(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=l.from(t,n)),t}(t,i,r);i!==o&&(n=!0,r="buffer",i=o)}var s=t.objectMode?1:i.length;t.length+=s;var d=t.length<t.highWaterMark;if(d||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:r,isBuf:n,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else C(e,t,!1,s,i,r,a);return d}(this,a,s,e,t,n)),o},I.prototype.cork=function(){this._writableState.corked++},I.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||A(this,e))},I.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new T(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(I.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(I.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),I.prototype._write=function(e,t,n){n(new g("_write()"))},I.prototype._writev=null,I.prototype.end=function(e,t,n){var i=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||function(e,t,n){t.ending=!0,O(e,t),n&&(t.finished?r.nextTick(n):e.once("finish",n)),t.ended=!0,e.writable=!1}(this,i,n),this},Object.defineProperty(I.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(I.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),I.prototype.destroy=c.destroy,I.prototype._undestroy=c.undestroy,I.prototype._destroy=function(e,t){t(e)}},8187:(e,t,n)=>{"use strict";var i,r=n(2695);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(2426),s=Symbol("lastResolve"),d=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),p=Symbol("handlePromise"),h=Symbol("stream");function f(e,t){return{value:e,done:t}}function g(e){var t=e[s];if(null!==t){var n=e[h].read();null!==n&&(e[c]=null,e[s]=null,e[d]=null,t(f(n,!1)))}}function m(e){r.nextTick(g,e)}var v=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((a(i={get stream(){return this[h]},next:function(){var e=this,t=this[l];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(f(void 0,!0));if(this[h].destroyed)return new Promise((function(t,n){r.nextTick((function(){e[l]?n(e[l]):t(f(void 0,!0))}))}));var n,i=this[c];if(i)n=new Promise(function(e,t){return function(n,i){e.then((function(){t[u]?n(f(void 0,!0)):t[p](n,i)}),i)}}(i,this));else{var a=this[h].read();if(null!==a)return Promise.resolve(f(a,!1));n=new Promise(this[p])}return this[c]=n,n}},Symbol.asyncIterator,(function(){return this})),a(i,"return",(function(){var e=this;return new Promise((function(t,n){e[h].destroy(null,(function(e){e?n(e):t(f(void 0,!0))}))}))})),i),v);e.exports=function(e){var t,n=Object.create(y,(a(t={},h,{value:e,writable:!0}),a(t,s,{value:null,writable:!0}),a(t,d,{value:null,writable:!0}),a(t,l,{value:null,writable:!0}),a(t,u,{value:e._readableState.endEmitted,writable:!0}),a(t,p,{value:function(e,t){var i=n[h].read();i?(n[c]=null,n[s]=null,n[d]=null,e(f(i,!1))):(n[s]=e,n[d]=t)},writable:!0}),t));return n[c]=null,o(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=n[d];return null!==t&&(n[c]=null,n[s]=null,n[d]=null,t(e)),void(n[l]=e)}var i=n[s];null!==i&&(n[c]=null,n[s]=null,n[d]=null,i(f(void 0,!0))),n[u]=!0})),e.on("readable",m.bind(null,n)),n}},4506:(e,t,n)=>{"use strict";function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var o=n(500).Buffer,s=n(462).inspect,d=s&&s.custom||"inspect";function l(e,t,n){o.prototype.copy.call(e,t,n)}e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,n;return t=e,n=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n}},{key:"concat",value:function(e){if(0===this.length)return o.alloc(0);for(var t=o.allocUnsafe(e>>>0),n=this.head,i=0;n;)l(n.data,t,i),i+=n.data.length,n=n.next;return t}},{key:"consume",value:function(e,t){var n;return e<this.head.data.length?(n=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):n=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var r=t.data,a=e>r.length?r.length:e;if(a===r.length?i+=r:i+=r.slice(0,e),0==(e-=a)){a===r.length?(++n,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=r.slice(a));break}++n}return this.length-=n,i}},{key:"_getBuffer",value:function(e){var t=o.allocUnsafe(e),n=this.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var r=n.data,a=e>r.length?r.length:e;if(r.copy(t,t.length-e,0,a),0==(e-=a)){a===r.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=r.slice(a));break}++i}return this.length-=i,t}},{key:d,value:function(e,t){return s(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{depth:0,customInspect:!1}))}}],n&&a(t.prototype,n),e}()},3390:(e,t,n)=>{"use strict";var i=n(2695);function r(e,t){o(e,t),a(e)}function a(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function o(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var n=this,s=this._readableState&&this._readableState.destroyed,d=this._writableState&&this._writableState.destroyed;return s||d?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,i.nextTick(o,this,e)):i.nextTick(o,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?n._writableState?n._writableState.errorEmitted?i.nextTick(a,n):(n._writableState.errorEmitted=!0,i.nextTick(r,n,e)):i.nextTick(r,n,e):t?(i.nextTick(a,n),t(e)):i.nextTick(a,n)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var n=e._readableState,i=e._writableState;n&&n.autoDestroy||i&&i.autoDestroy?e.destroy(t):e.emit("error",t)}}},2426:(e,t,n)=>{"use strict";var i=n(553).q.ERR_STREAM_PREMATURE_CLOSE;function r(){}e.exports=function e(t,n,a){if("function"==typeof n)return e(t,null,n);n||(n={}),a=function(e){var t=!1;return function(){if(!t){t=!0;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i)}}}(a||r);var o=n.readable||!1!==n.readable&&t.readable,s=n.writable||!1!==n.writable&&t.writable,d=function(){t.writable||u()},l=t._writableState&&t._writableState.finished,u=function(){s=!1,l=!0,o||a.call(t)},c=t._readableState&&t._readableState.endEmitted,p=function(){o=!1,c=!0,s||a.call(t)},h=function(e){a.call(t,e)},f=function(){var e;return o&&!c?(t._readableState&&t._readableState.ended||(e=new i),a.call(t,e)):s&&!l?(t._writableState&&t._writableState.ended||(e=new i),a.call(t,e)):void 0},g=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",f),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",d),t.on("close",d)),t.on("end",p),t.on("finish",u),!1!==n.error&&t.on("error",h),t.on("close",f),function(){t.removeListener("complete",u),t.removeListener("abort",f),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",d),t.removeListener("close",d),t.removeListener("finish",u),t.removeListener("end",p),t.removeListener("error",h),t.removeListener("close",f)}}},3733:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},2970:(e,t,n)=>{"use strict";var i,r=n(553).q,a=r.ERR_MISSING_ARGS,o=r.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function d(e,t,r,a){a=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(a);var s=!1;e.on("close",(function(){s=!0})),void 0===i&&(i=n(2426)),i(e,{readable:t,writable:r},(function(e){if(e)return a(e);s=!0,a()}));var d=!1;return function(t){if(!s&&!d)return d=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void a(t||new o("pipe"))}}function l(e){e()}function u(e,t){return e.pipe(t)}function c(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i,r=c(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new a("streams");var o=t.map((function(e,n){var a=n<t.length-1;return d(e,a,n>0,(function(e){i||(i=e),e&&o.forEach(l),a||(o.forEach(l),r(i))}))}));return t.reduce(u)}},1111:(e,t,n)=>{"use strict";var i=n(553).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,n,r){var a=function(e,t,n){return null!=e.highWaterMark?e.highWaterMark:t?e[n]:null}(t,r,n);if(null!=a){if(!isFinite(a)||Math.floor(a)!==a||a<0)throw new i(r?n:"highWaterMark",a);return Math.floor(a)}return e.objectMode?16:16384}}},8208:(e,t,n)=>{e.exports=n(3346).EventEmitter},9685:(e,t,n)=>{var i=n(500),r=i.Buffer;function a(e,t){for(var n in e)t[n]=e[n]}function o(e,t,n){return r(e,t,n)}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=o),o.prototype=Object.create(r.prototype),a(r,o),o.from=function(e,t,n){if("number"==typeof e)throw new TypeError("Argument must not be a number");return r(e,t,n)},o.alloc=function(e,t,n){if("number"!=typeof e)throw new TypeError("Argument must be a number");var i=r(e);return void 0!==t?"string"==typeof n?i.fill(t,n):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},5891:e=>{e.exports=function(e,t){var n,i=null;try{n=JSON.parse(e,t)}catch(e){i=e}return[i,n]}},8981:(e,t,n)=>{e.exports=r;var i=n(3346).EventEmitter;function r(){i.call(this)}n(3730)(r,i),r.Readable=n(5006),r.Writable=n(8719),r.Duplex=n(673),r.Transform=n(8597),r.PassThrough=n(4343),r.finished=n(2426),r.pipeline=n(2970),r.Stream=r,r.prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function a(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",a),e._isStdio||t&&!1===t.end||(n.on("end",s),n.on("close",d));var o=!1;function s(){o||(o=!0,e.end())}function d(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(e){if(u(),0===i.listenerCount(this,"error"))throw e}function u(){n.removeListener("data",r),e.removeListener("drain",a),n.removeListener("end",s),n.removeListener("close",d),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},7361:(e,t,n)=>{"use strict";var i=n(9685).Buffer,r=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!=typeof t&&(i.isEncoding===r||!r(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=d,this.end=l,t=4;break;case"utf8":this.fillLast=s,t=4;break;case"base64":this.text=u,this.end=c,t=3;break;default:return this.write=p,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function o(e){return e<=127?0:e>>5==6?2:e>>4==14?3:e>>3==30?4:e>>6==2?-1:-2}function s(e){var t=this.lastTotal-this.lastNeed,n=function(e,t,n){if(128!=(192&t[0]))return e.lastNeed=0,"";if(e.lastNeed>1&&t.length>1){if(128!=(192&t[1]))return e.lastNeed=1,"";if(e.lastNeed>2&&t.length>2&&128!=(192&t[2]))return e.lastNeed=2,""}}(this,e);return void 0!==n?n:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function d(e,t){if((e.length-t)%2==0){var n=e.toString("utf16le",t);if(n){var i=n.charCodeAt(n.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function l(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,n)}return t}function u(e,t){var n=(e.length-t)%3;return 0===n?e.toString("base64",t):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-n))}function c(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function p(e){return e.toString(this.encoding)}function h(e){return e&&e.length?this.write(e):""}t.s=a,a.prototype.write=function(e){if(0===e.length)return"";var t,n;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<e.length?t?t+this.text(e,n):this.text(e,n):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"":t},a.prototype.text=function(e,t){var n=function(e,t,n){var i=t.length-1;if(i<n)return 0;var r=o(t[i]);return r>=0?(r>0&&(e.lastNeed=r-1),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(e.lastNeed=r-2),r):--i<n||-2===r?0:(r=o(t[i]))>=0?(r>0&&(2===r?r=0:e.lastNeed=r-3),r):0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=n;var i=e.length-(n-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},4316:function(e){var t,n,i,r,a;t=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,n=/^(?=([^\/?#]*))\1([^]*)$/,i=/(?:\/|^)\.(?=\/)/g,r=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(e,t,i){if(i=i||{},e=e.trim(),!(t=t.trim())){if(!i.alwaysNormalize)return e;var r=a.parseURL(e);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return i.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var d=n.exec(s.path);s.netLoc=d[1],s.path=d[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var u=s.path,c=u.substring(0,u.lastIndexOf("/")+1)+o.path;l.path=a.normalizePath(c)}else l.path=s.path,o.params||(l.params=s.params,o.query||(l.query=s.query));return null===l.path&&(l.path=i.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(l)},parseURL:function(e){var n=t.exec(e);return n?{scheme:n[1]||"",netLoc:n[2]||"",path:n[3]||"",params:n[4]||"",query:n[5]||"",fragment:n[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(r,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}},e.exports=a},72:(e,t,n)=>{function i(e){try{if(!n.g.localStorage)return!1}catch(e){return!1}var t=n.g.localStorage[e];return null!=t&&"true"===String(t).toLowerCase()}e.exports=function(e,t){if(i("noDeprecation"))return e;var n=!1;return function(){if(!n){if(i("throwDeprecation"))throw new Error(t);i("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return e.apply(this,arguments)}}},6945:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i},1316:(e,t,n)=>{"use strict";var i;n.d(t,{Z:()=>a});var r=new Uint8Array(16);function a(){if(!i&&!(i="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return i(r)}},7632:(e,t,n)=>{"use strict";n.d(t,{Z:()=>o});for(var i=n(9710),r=[],a=0;a<256;++a)r.push((a+256).toString(16).substr(1));const o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(r[e[t+0]]+r[e[t+1]]+r[e[t+2]]+r[e[t+3]]+"-"+r[e[t+4]]+r[e[t+5]]+"-"+r[e[t+6]]+r[e[t+7]]+"-"+r[e[t+8]]+r[e[t+9]]+"-"+r[e[t+10]]+r[e[t+11]]+r[e[t+12]]+r[e[t+13]]+r[e[t+14]]+r[e[t+15]]).toLowerCase();if(!(0,i.Z)(n))throw TypeError("Stringified UUID is invalid");return n}},3591:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var i=n(1316),r=n(7632);const a=function(e,t,n){var a=(e=e||{}).random||(e.rng||i.Z)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){n=n||0;for(var o=0;o<16;++o)t[n+o]=a[o];return t}return(0,r.Z)(a)}},9710:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var i=n(6945);const r=function(e){return"string"==typeof e&&i.Z.test(e)}},4829:(e,t,n)=>{var i=n(1667),r=e.exports={WebVTT:n(5229),VTTCue:n(4491),VTTRegion:n(5616)};i.vttjs=r,i.WebVTT=r.WebVTT;var a=r.VTTCue,o=r.VTTRegion,s=i.VTTCue,d=i.VTTRegion;r.shim=function(){i.VTTCue=a,i.VTTRegion=o},r.restore=function(){i.VTTCue=s,i.VTTRegion=d},i.VTTCue||r.shim()},5229:(e,t,n)=>{var i=n(1709),r=Object.create||function(){function e(){}return function(t){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return e.prototype=t,new e}}();function a(e,t){this.name="ParsingError",this.code=e.code,this.message=t||e.message}function o(e){function t(e,t,n,i){return 3600*(0|e)+60*(0|t)+(0|n)+(0|i)/1e3}var n=e.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?t(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?t(n[1],n[2],0,n[4]):t(0,n[1],n[2],n[4]):null}function s(){this.values=r(null)}function d(e,t,n,i){var r=i?e.split(i):[e];for(var a in r)if("string"==typeof r[a]){var o=r[a].split(n);2===o.length&&t(o[0],o[1])}}function l(e,t,n){var i=e;function r(){var t=o(e);if(null===t)throw new a(a.Errors.BadTimeStamp,"Malformed timestamp: "+i);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function l(){e=e.replace(/^\s+/,"")}if(l(),t.startTime=r(),l(),"--\x3e"!==e.substr(0,3))throw new a(a.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);e=e.substr(3),l(),t.endTime=r(),l(),function(e,t){var i=new s;d(e,(function(e,t){switch(e){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===t){i.set(e,n[r].region);break}break;case"vertical":i.alt(e,t,["rl","lr"]);break;case"line":var a=t.split(","),o=a[0];i.integer(e,o),i.percent(e,o)&&i.set("snapToLines",!1),i.alt(e,o,["auto"]),2===a.length&&i.alt("lineAlign",a[1],["start","center","end"]);break;case"position":a=t.split(","),i.percent(e,a[0]),2===a.length&&i.alt("positionAlign",a[1],["start","center","end"]);break;case"size":i.percent(e,t);break;case"align":i.alt(e,t,["start","center","end","left","right"])}}),/:/,/\s/),t.region=i.get("region",null),t.vertical=i.get("vertical","");try{t.line=i.get("line","auto")}catch(e){}t.lineAlign=i.get("lineAlign","start"),t.snapToLines=i.get("snapToLines",!0),t.size=i.get("size",100);try{t.align=i.get("align","center")}catch(e){t.align=i.get("align","middle")}try{t.position=i.get("position","auto")}catch(e){t.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},t.align)}t.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},t.align)}(e,t)}a.prototype=r(Error.prototype),a.prototype.constructor=a,a.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,n){for(var i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var u=i.createElement&&i.createElement("textarea"),c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},p={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},h={v:"title",lang:"lang"},f={rt:"ruby"};function g(e,t){function n(){if(!t)return null;var e,n=t.match(/^([^<]*)(<[^>]*>?)?/);return e=n[1]?n[1]:n[2],t=t.substr(e.length),e}function i(e,t){return!f[t.localName]||f[t.localName]===e.localName}function r(t,n){var i=c[t];if(!i)return null;var r=e.document.createElement(i),a=h[t];return a&&n&&(r[a]=n.trim()),r}for(var a,s,d=e.document.createElement("div"),l=d,g=[];null!==(a=n());)if("<"!==a[0])l.appendChild(e.document.createTextNode((s=a,u.innerHTML=s,s=u.textContent,u.textContent="",s)));else{if("/"===a[1]){g.length&&g[g.length-1]===a.substr(2).replace(">","")&&(g.pop(),l=l.parentNode);continue}var m,v=o(a.substr(1,a.length-2));if(v){m=e.document.createProcessingInstruction("timestamp",v),l.appendChild(m);continue}var y=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y)continue;if(!(m=r(y[1],y[3])))continue;if(!i(l,m))continue;if(y[2]){var b=y[2].split(".");b.forEach((function(e){var t=/^bg_/.test(e),n=t?e.slice(3):e;if(p.hasOwnProperty(n)){var i=t?"background-color":"color",r=p[n];m.style[i]=r}})),m.className=b.join(" ")}g.push(y[1]),l.appendChild(m),l=m}return d}var m=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function v(e){for(var t=0;t<m.length;t++){var n=m[t];if(e>=n[0]&&e<=n[1])return!0}return!1}function y(e){var t=[],n="";if(!e||!e.childNodes)return"ltr";function i(e,t){for(var n=t.childNodes.length-1;n>=0;n--)e.push(t.childNodes[n])}function r(e){if(!e||!e.length)return null;var t=e.pop(),n=t.textContent||t.innerText;if(n){var a=n.match(/^.*(\n|\r)/);return a?(e.length=0,a[0]):n}return"ruby"===t.tagName?r(e):t.childNodes?(i(e,t),r(e)):void 0}for(i(t,e);n=r(t);)for(var a=0;a<n.length;a++)if(v(n.charCodeAt(a)))return"rtl";return"ltr"}function b(){}function _(e,t,n){b.call(this),this.cue=t,this.cueDiv=g(e,t.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=e.document.createElement("div"),i={direction:y(this.cueDiv),writingMode:""===t.vertical?"horizontal-tb":"lr"===t.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===t.align?"center":t.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(t.positionAlign){case"start":r=t.position;break;case"center":r=t.position-t.size/2;break;case"end":r=t.position-t.size}""===t.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function T(e){var t,n,i,r;if(e.div){n=e.div.offsetHeight,i=e.div.offsetWidth,r=e.div.offsetTop;var a=(a=e.div.childNodes)&&(a=a[0])&&a.getClientRects&&a.getClientRects();e=e.div.getBoundingClientRect(),t=a?Math.max(a[0]&&a[0].height||0,e.height/a.length):0}this.left=e.left,this.right=e.right,this.top=e.top||r,this.height=e.height||n,this.bottom=e.bottom||r+(e.height||n),this.width=e.width||i,this.lineHeight=void 0!==t?t:e.lineHeight}function w(e,t,n,i){var r=new T(t),a=t.cue,o=function(e){if("number"==typeof e.line&&(e.snapToLines||e.line>=0&&e.line<=100))return e.line;if(!e.track||!e.track.textTrackList||!e.track.textTrackList.mediaElement)return-1;for(var t=e.track,n=t.textTrackList,i=0,r=0;r<n.length&&n[r]!==t;r++)"showing"===n[r].mode&&i++;return-1*++i}(a),s=[];if(a.snapToLines){var d;switch(a.vertical){case"":s=["+y","-y"],d="height";break;case"rl":s=["+x","-x"],d="width";break;case"lr":s=["-x","+x"],d="width"}var l=r.lineHeight,u=l*Math.round(o),c=n[d]+l,p=s[0];Math.abs(u)>c&&(u=u<0?-1:1,u*=Math.ceil(c/l)*l),o<0&&(u+=""===a.vertical?n.height:n.width,s=s.reverse()),r.move(p,u)}else{var h=r.lineHeight/n.height*100;switch(a.lineAlign){case"center":o-=h/2;break;case"end":o-=h}switch(a.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")})}s=["+y","-x","+x","-y"],r=new T(t)}var f=function(e,t){for(var r,a=new T(e),o=1,s=0;s<t.length;s++){for(;e.overlapsOppositeAxis(n,t[s])||e.within(n)&&e.overlapsAny(i);)e.move(t[s]);if(e.within(n))return e;var d=e.intersectPercentage(n);o>d&&(r=new T(e),o=d),e=new T(a)}return r||a}(r,s);t.move(f.toCSSCompatValues(n))}function S(){}b.prototype.applyStyles=function(e,t){for(var n in t=t||this.div,e)e.hasOwnProperty(n)&&(t.style[n]=e[n])},b.prototype.formatStyle=function(e,t){return 0===e?0:e+t},_.prototype=r(b.prototype),_.prototype.constructor=_,T.prototype.move=function(e,t){switch(t=void 0!==t?t:this.lineHeight,e){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t}},T.prototype.overlaps=function(e){return this.left<e.right&&this.right>e.left&&this.top<e.bottom&&this.bottom>e.top},T.prototype.overlapsAny=function(e){for(var t=0;t<e.length;t++)if(this.overlaps(e[t]))return!0;return!1},T.prototype.within=function(e){return this.top>=e.top&&this.bottom<=e.bottom&&this.left>=e.left&&this.right<=e.right},T.prototype.overlapsOppositeAxis=function(e,t){switch(t){case"+x":return this.left<e.left;case"-x":return this.right>e.right;case"+y":return this.top<e.top;case"-y":return this.bottom>e.bottom}},T.prototype.intersectPercentage=function(e){return Math.max(0,Math.min(this.right,e.right)-Math.max(this.left,e.left))*Math.max(0,Math.min(this.bottom,e.bottom)-Math.max(this.top,e.top))/(this.height*this.width)},T.prototype.toCSSCompatValues=function(e){return{top:this.top-e.top,bottom:e.bottom-this.bottom,left:this.left-e.left,right:e.right-this.right,height:this.height,width:this.width}},T.getSimpleBoxPosition=function(e){var t=e.div?e.div.offsetHeight:e.tagName?e.offsetHeight:0,n=e.div?e.div.offsetWidth:e.tagName?e.offsetWidth:0,i=e.div?e.div.offsetTop:e.tagName?e.offsetTop:0;return{left:(e=e.div?e.div.getBoundingClientRect():e.tagName?e.getBoundingClientRect():e).left,right:e.right,top:e.top||i,height:e.height||t,bottom:e.bottom||i+(e.height||t),width:e.width||n}},S.StringDecoder=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}},S.convertCueToDOMTree=function(e,t){return e&&t?g(e,t):null},S.processCues=function(e,t,n){if(!e||!t||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=e.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(e){for(var t=0;t<e.length;t++)if(e[t].hasBeenReset||!e[t].displayState)return!0;return!1}(t)){var r=[],a=T.getSimpleBoxPosition(i),o={font:Math.round(.05*a.height*100)/100+"px sans-serif"};!function(){for(var n,s,d=0;d<t.length;d++)s=t[d],n=new _(e,s,o),i.appendChild(n.div),w(0,n,a,r),s.displayState=n.div,r.push(T.getSimpleBoxPosition(n))}()}else for(var s=0;s<t.length;s++)i.appendChild(t[s].displayState)},S.Parser=function(e,t,n){n||(n=t,t={}),t||(t={}),this.window=e,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},S.Parser.prototype={reportOrThrowError:function(e){if(!(e instanceof a))throw e;this.onparsingerror&&this.onparsingerror(e)},parse:function(e){var t,n=this;function i(){for(var e=n.buffer,t=0;t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var i=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,n.buffer=e.substr(t),i}e&&(n.buffer+=n.decoder.decode(e,{stream:!0}));try{var r;if("INITIAL"===n.state){if(!/\r\n|\n/.test(n.buffer))return this;var u=(r=i()).match(/^WEBVTT([ \t].*)?$/);if(!u||!u[0])throw new a(a.Errors.BadSignature);n.state="HEADER"}for(var c=!1;n.buffer;){if(!/\r\n|\n/.test(n.buffer))return this;switch(c?c=!1:r=i(),n.state){case"HEADER":/:/.test(r)?(t=r).match(/X-TIMESTAMP-MAP/)?d(t,(function(e,t){"X-TIMESTAMP-MAP"===e&&function(e){var t=new s;d(e,(function(e,n){switch(e){case"MPEGT":t.integer(e+"S",n);break;case"LOCA":t.set(e+"L",o(n))}}),/[^\d]:/,/,/),n.ontimestampmap&&n.ontimestampmap({MPEGTS:t.get("MPEGTS"),LOCAL:t.get("LOCAL")})}(t)}),/=/):d(t,(function(e,t){"Region"===e&&function(e){var t=new s;if(d(e,(function(e,n){switch(e){case"id":t.set(e,n);break;case"width":t.percent(e,n);break;case"lines":t.integer(e,n);break;case"regionanchor":case"viewportanchor":var i=n.split(",");if(2!==i.length)break;var r=new s;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;t.set(e+"X",r.get("x")),t.set(e+"Y",r.get("y"));break;case"scroll":t.alt(e,n,["up"])}}),/=/,/\s/),t.has("id")){var i=new(n.vttjs.VTTRegion||n.window.VTTRegion);i.width=t.get("width",100),i.lines=t.get("lines",3),i.regionAnchorX=t.get("regionanchorX",0),i.regionAnchorY=t.get("regionanchorY",100),i.viewportAnchorX=t.get("viewportanchorX",0),i.viewportAnchorY=t.get("viewportanchorY",100),i.scroll=t.get("scroll",""),n.onregion&&n.onregion(i),n.regionList.push({id:t.get("id"),region:i})}}(t)}),/:/):r||(n.state="ID");continue;case"NOTE":r||(n.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){n.state="NOTE";break}if(!r)continue;n.cue=new(n.vttjs.VTTCue||n.window.VTTCue)(0,0,"");try{n.cue.align="center"}catch(e){n.cue.align="middle"}if(n.state="CUE",-1===r.indexOf("--\x3e")){n.cue.id=r;continue}case"CUE":try{l(r,n.cue,n.regionList)}catch(e){n.reportOrThrowError(e),n.cue=null,n.state="BADCUE";continue}n.state="CUETEXT";continue;case"CUETEXT":var p=-1!==r.indexOf("--\x3e");if(!r||p&&(c=!0)){n.oncue&&n.oncue(n.cue),n.cue=null,n.state="ID";continue}n.cue.text&&(n.cue.text+="\n"),n.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(n.state="ID");continue}}}catch(e){n.reportOrThrowError(e),"CUETEXT"===n.state&&n.cue&&n.oncue&&n.oncue(n.cue),n.cue=null,n.state="INITIAL"===n.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new a(a.Errors.BadSignature)}catch(t){e.reportOrThrowError(t)}return e.onflush&&e.onflush(),this}},e.exports=S},4491:e=>{var t={"":1,lr:1,rl:1},n={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function i(e){return"string"==typeof e&&!!n[e.toLowerCase()]&&e.toLowerCase()}function r(e,n,r){this.hasBeenReset=!1;var a="",o=!1,s=e,d=n,l=r,u=null,c="",p=!0,h="auto",f="start",g="auto",m="auto",v=100,y="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return a},set:function(e){a=""+e}},pauseOnExit:{enumerable:!0,get:function(){return o},set:function(e){o=!!e}},startTime:{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");s=e,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(e){l=""+e,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return u},set:function(e){u=e,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return c},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);if(!1===n)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");c=n,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return p},set:function(e){p=!!e,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return h},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("Line: an invalid number or illegal string was specified.");h=e,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(e){var t=i(e);t?(f=t,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return g},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");g=e,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return m},set:function(e){var t=i(e);t?(m=t,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return v},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");v=e,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return y},set:function(e){var t=i(e);if(!t)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");y=t,this.hasBeenReset=!0}}}),this.displayState=void 0}r.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},e.exports=r},5616:e=>{var t={"":!0,up:!0};function n(e){return"number"==typeof e&&e>=0&&e<=100}e.exports=function(){var e=100,i=3,r=0,a=100,o=0,s=100,d="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return e},set:function(t){if(!n(t))throw new Error("Width must be between 0 and 100.");e=t}},lines:{enumerable:!0,get:function(){return i},set:function(e){if("number"!=typeof e)throw new TypeError("Lines must be set to a number.");i=e}},regionAnchorY:{enumerable:!0,get:function(){return a},set:function(e){if(!n(e))throw new Error("RegionAnchorX must be between 0 and 100.");a=e}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(e){if(!n(e))throw new Error("RegionAnchorY must be between 0 and 100.");r=e}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(e){if(!n(e))throw new Error("ViewportAnchorY must be between 0 and 100.");s=e}},viewportAnchorX:{enumerable:!0,get:function(){return o},set:function(e){if(!n(e))throw new Error("ViewportAnchorX must be between 0 and 100.");o=e}},scroll:{enumerable:!0,get:function(){return d},set:function(e){var n=function(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}(e);!1===n?console.warn("Scroll: an invalid or illegal string was specified."):d=n}}})}},6372:(e,t,n)=>{"use strict";var i={};n.r(i),n.d(i,{addFBRemarketingPixel:()=>we,addTaboolaPosition:()=>Te,addToArray:()=>ge,appendToInfiniteList:()=>me,forceRefreshAds:()=>fe,getBannerFallbackPromise:()=>Ie,getRequestedAds:()=>Ee,getRtaReport:()=>ke,getScriptContainer:()=>ue,getSyncVideoTags:()=>Pe,getVideoAdsSetup:()=>oe,getVideoTags:()=>Ae,init:()=>ye,initEmergencyRules:()=>se.initEmergencyRules,initSlots:()=>se.initSlots,on:()=>Oe,openControlPanel:()=>xe,q:()=>_e,reg:()=>ve,removeWatermark:()=>Re,setStickyBannerZoomThresholds:()=>pe,setSupportedSlots:()=>se.setSupportedSlots,stopRefreshingAds:()=>he,unstick:()=>De});var r={};n.r(r),n.d(r,{isClickThrough:()=>We,onClick:()=>He,onDeactivate:()=>ze,onInteraction:()=>$e});var a={};n.r(a),n.d(a,{article:()=>bt,brandedVideoPlayer:()=>Et,gpt:()=>Pt,sessionDepth:()=>Nt,taboola:()=>Ft});var o={};n.r(o),n.d(o,{conversion:()=>on.Z,errorDetection:()=>dn,rtaTracking:()=>ln});var s={};n.r(s),n.d(s,{abtest:()=>hn,bidmax:()=>In,bidmaxSendBeacon:()=>Cn,bidmaxSendBeaconMigration:()=>En,cacheIndication:()=>xn,cmp:()=>On,connection:()=>fi,customTracking:()=>Ln,entryPoint:()=>Bn,externalData:()=>$n,headerbidderWinner:()=>Gn,inputDelays:()=>Kn,memory:()=>Zn,pageCriteria:()=>Jn,pageLoadEvent:()=>Qn,rtaIds:()=>ei,storage:()=>ti,timing:()=>si,viewability:()=>li});var d={};n.r(d),n.d(d,{adyoulike:()=>tr,brightroll:()=>nr,collective564:()=>ir,criteoV2:()=>rr,groupmSkin:()=>ar,inskin:()=>or,konduit:()=>Ir,mediagridVideo:()=>vr,openx:()=>sr,openxVideo:()=>yr,pxyz:()=>dr,rubiMM:()=>hr,rubiTTD:()=>fr,rubicon:()=>cr,rubiconSkin:()=>pr,spotx2:()=>wr,teads:()=>gr,telariaVideo:()=>Sr,triplelift:()=>mr});var l={};n.r(l),n.d(l,{dmplayer:()=>za});var u={};n.r(u),n.d(u,{availabilityNotification:()=>Qa,hackyDelayer:()=>eo,reprompt:()=>oo,rtaTracking:()=>so});var c={};n.r(c),n.d(c,{forceTags:()=>uo});var p={};n.r(p),n.d(p,{indexedDBUsage:()=>go,targeting:()=>ho,video:()=>fo});var h={};n.r(h),n.d(h,{permutive:()=>p});var f={};n.r(f),n.d(f,{dmplayer:()=>wo,flyoutManager:()=>ls,onlyOneActivePlayer:()=>ss,perform:()=>Bo,visibility:()=>jo});var g={};n.r(g),n.d(g,{leaderTop:()=>Os,puffAdOthers:()=>Rs,refreshInfo:()=>Us});var m={};n.r(m),n.d(m,{banner:()=>Wd,mpus:()=>Gd});var v={};n.r(v),n.d(v,{load:()=>Iu});var y={};n.r(y),n.d(y,{adxChannel:()=>Bu,device:()=>Fu,id5:()=>qu,impid:()=>Vu,ixIdentity:()=>zu,smartclip:()=>Wu,taboola:()=>$u,unifiedid:()=>Ku,universalid:()=>Zu,viewability:()=>sc});var b={};n.r(b),n.d(b,{abe:()=>o,adIntegrator:()=>je.default,adsRefresherV2:()=>pp,adxChannelPlugin:()=>Bu,analytics:()=>s,arrowKeysScroll:()=>fp,bidders:()=>d,billboardAdjustments:()=>gp,chromelessv2:()=>l,cmp:()=>u,cmpAvailabilityNotification:()=>Qa,cmpRtaTracking:()=>so,debug:()=>c,devicePlugin:()=>Fu,dmp:()=>h,fff:()=>mp,impIDPlugin:()=>Vu,irisTv:()=>bp,messagePluginsFromCreatives:()=>Tp,nativo:()=>Sp,nonAdServable:()=>kp,nonPersonalizedAds:()=>Ip,pageVisibility:()=>Ep,paidSessions:()=>xp,performPlayer:()=>Bo,performance:()=>Op,permutive:()=>ho,pixelSync:()=>Dp,players:()=>f,prebidUserSync:()=>Mp,programmaticCampaign:()=>Kp,quantcast:()=>Xp,revenueReporter:()=>Zp,rtaPageEventDispatcher:()=>Jp,runtimeMessages:()=>Qp,skins:()=>rh,slots:()=>g,smartBanner:()=>lh,smartScheduler:()=>dh,sticky:()=>m,tcfv2:()=>v,trackers:()=>y,version:()=>uh,videoEvents:()=>ch});var _=n(7861),T=(n(8728),n(5622),n(4264),n(6212)),w=n(4990),S=n(2423),k=n(422);function I(e,t,n){C(e,t),t.set(e,n)}function C(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function E(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,n)}const A=["after_article","before_article","channel_feed","mobile_bottom","mobile_top","smart_feed","under_article"],P={taboola:e=>{let{id:t}=e;return`<div id="${t}" class="taboola"></div>`},googleAdSense:e=>{let{getConfig:t}=e;const{width:n,adSlot:i}=t("pos.underArticle.googleAdsense",{adSlot:1219268175,width:636});return`\n  <ins class="adsbygoogle" id="under-article" style="display:inline-block; width:${n}px; height:250px;" data-ad-client="ca-pub-6274168003790870" data-ad-slot="${i}" data-safe="high"></ins>\n  `},amazon:e=>{let{getConfig:t}=e;return`<div id="amzn-assoc-ad-${t("pos.underArticle.amazon.id","df745670-1d9e-4f8c-890c-b2e54a92586a")}"></div>`},widgets:()=>{const{pathname:e,protocol:t}=n.g.location;return`\n    <aside><div class="${"PVUCSBJO",(0,k.decode)("PVUCSBJO")}" data-src="${t}//www.dailymail.co.uk${e}" data-widget-id="AR_1"></div></aside>\n  `}};var x=new WeakMap,O=new WeakMap,D=new WeakMap,R=new WeakSet;class L extends HTMLElement{constructor(){super(...arguments),function(e,t){C(e,t),t.add(e)}(this,R),I(this,x,{writable:!0,value:w.ZP.broker(this.constructor.name)}),I(this,O,{writable:!0,value:A}),I(this,D,{writable:!0,value:(0,S.x)("adSlot")})}getTemplate(e,t,n){return(P[e]||P[t])({id:n,getConfig:T.U2})}connectedCallback(){const e=this.getAttribute("position")||"";E(this,D).call(this,"position",e);const t=(0,T.U2)(`slotDescription.${e}`);if(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,R,M).call(this,e)&&t){const{slotTypes:n,id:i}=t;this.innerHTML=this.getTemplate(e,n[0],i),E(this,D).call(this,"mounting",e),E(this,x).emit("slot mounted",{pos:e})}else E(this,D).call(this,"unsupported pos",e)}}function M(e){return E(this,O).includes(e)}function U(e,t,n){j(e,t),t.set(e,n)}function j(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function N(e,t){var n=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,n)}const B="puff_list";var F=new WeakMap,q=new WeakMap,V=new WeakMap,H=new WeakSet;class z extends HTMLUListElement{constructor(){super(...arguments),function(e,t){j(e,t),t.add(e)}(this,H),U(this,F,{writable:!0,value:w.ZP.broker(this.constructor.name)}),U(this,q,{writable:!0,value:(0,S.x)("adPufflistSlot")}),U(this,V,{writable:!0,value:[B]})}connectedCallback(){const e=this.getAttribute("id")||"";(0,T.U2)("slotDescription.puff_list")&&function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,H,W).call(this,B)?(N(this,q).call(this,"mounting",B),N(this,F).emit("slot mounted",{pos:B,id:e})):N(this,q).call(this,"unsupported pos",B)}}function W(e){return N(this,V).includes(e)}const $=w.ZP.broker("components"),G=(0,S.x)("components");$.on("plugins initialized",(()=>{G("setting up custom elements"),customElements.define("ad-slot",L),customElements.define("ad-pufflist-slot",z,{extends:"ul"})}));var K=n(1430),X=n(6247),Z=n.n(X),Y=n(4485);const J=w.ZP.broker("player.tags");function Q(e){let{args:t={},observable:n,broker:i,log:r}=e,a={cust_params:{}};i.emit("collect video tags",t,((e,t)=>{const i=t&&t.tags?t.tags:t;if(!i)return r("Video targeting ended with:",a),void n(i);a=(0,Y.Yb)({...a,...i,cust_params:{...a.cust_params,...i.cust_params}}),n(e,a)}))}let ee={};function te(){return ee}J.on("sync video tags update",(e=>{ee=Z()({},ee,e)}));var ne=n(8043);const ie=(0,S.x)("videoBidding"),re=(0,S.x)("videoPlayer"),ae=(e,t,n)=>({videoAdServerUrl:n.replace(/(&iu=[^&]*)/,`$1/${e}`),cust_params:{pos:e},...t}),oe=(e,t)=>{var i,r;ie("request for video options");const a=(0,T.U2)("plugins.enabled",[]).includes("adsFree")&&(null===(i=(r=n.g).isAdFreeEntitled)||void 0===i?void 0:i.call(r));ie("isAdFreeUser",a);const o=(0,T.U2)("players.editorial.v2",{}),s=(0,T.U2)("plugins.forceFlyawayPlayerConfiguration.styleVariant","letterbox"),d=(0,T.U2)("player.setup.flyoutFromParagraph"),[l]=(0,K.oK)(),u=(0,T.U2)("players.setup.earlyAdFactoryInit",!0),c=-1!==l&&(0,T.U2)("players.setup.userActionTimeout"),p=-1!==l&&(0,T.U2)("players.setup.earlyBidding"),h=new Set((0,T.U2)("plugins.enabled",[])),f=e=>{const t=(0,T.U2)(`players.setup.${e}`);return void 0!==t&&t||Boolean(h.has(e))},g=f("mobileFlyawayPlayer"),{tracking:m={},"ads-setup":v={}}=t.plugins||{},y=v.schedule||!m.sponsored&&v.adsEnabled&&((e,t)=>{if((0,Y.xb)(e))return[];const n=t.duration/1e3,{preRoll:i,midRollRepeat:r}=e,a=[],o=t.plugins["ads-setup"].videoAdServerUrl;if(i&&a.push(ae("preroll",{offset:0},o)),r){const{each:e,videoDurationExceeds:t}=r;let i=e,s=i+t;for(;s<n;)a.push(ae("midroll",{offset:i,minVideoDuration:s},o)),i+=e,s=i+t}return a.sort(((e,t)=>e.offset-t.offset))})(o,t)||[];ie("schedule",y);const b=f("players.flyoutManager"),_=!b&&f("videoFlyout"),w=!b&&f("videoForceFlyout"),S=a?{adsEnabled:!1,earlyAdFactoryInit:!1,earlyBidding:!1,schedule:[],useIMASDK:!1,userActionTimeout:!1,vpaidEnabled:!1}:{schedule:y,vpaidEnabled:f("vpaid"),useIMASDK:f("imaSDK"),earlyAdFactoryInit:!!u,userActionTimeout:c,earlyBidding:p},k={"ads-setup":{...v,...S,bidmax:!0},flyout:{enabled:_,active:_,forceFlyout:{enabled:w,active:w}},flyawayPlayer:{enabled:g,fromParagraph:d,...g?{adhesiveStyleVariant:s}:{}},debugOn:re.enabled};return ie("new opts:",k),k};var se=n(2381);const de=(0,S.x)("AdsManager"),le=[],ue=()=>n.g.DM.molFeMiniLodash.filter(n.g.document.documentElement.childNodes,(e=>1===e.nodeType))[0]||document.body,ce=w.ZP.broker("AdsManager"),pe=()=>{},he=e=>{ce.emit("stop refreshing ads",e)},fe=()=>ce.emit("force ads refresh"),ge=e=>{const{id:t}=function(e){const t=document.currentScript||(0,ne.Z$)(document.querySelectorAll(`*[id^=${e.pos}] script`))||(0,ne.Z$)(document.scripts);return null==t?void 0:t.parentNode}(e)||{},n={...e,containerId:t};ce.emit("api message","adSlotMount",n)},me=e=>{ce.emit("infinite-list append",e)},ve=e=>le.push(e),ye=()=>{if(document.getElementById("content"))for(const e of le){const t=document.getElementById(e),n=document.getElementById(e),i=n.getAttribute("style");t.className=n.className,i&&t.setAttribute("style",n.getAttribute("style"))}},be=ce.until("gpt loaded"),_e=e=>be.then(e),Te=e=>{ce.emit("add taboola",e.position,e)},we=()=>{ce.emit("add fb-marketing-pixel")};ce.on("error",(function(){return console.error(...arguments)}));let Se={version:1};ce.on("send with rta page unload",(e=>{de("will send to rta on page unload:",e),Se={...Se,...e}}));const ke=()=>Se;try{const e=()=>!!Object.keys(K.SP).some((e=>e.includes("debug")));"production"!==n.g.adEnvironment||e()||(w.ZP.showUncaughtErrors=!1)}catch(e){console.error(e)}const Ie=e=>Object.keys((0,T.U2)("slots.enabled",{})).includes("mpu_player")?(ce.emit("chromeless player event","bannerFallbackAd",e),ce.until("bannerFallbackAd destroyed")):(de("fallback banner ad disabled, resolving"),Promise.resolve());let Ce=[];function Ee(){return Ce}function Ae(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ce;Q({args:e,observable:t,broker:n,log:de})}ce.on("ads rendered update",(e=>{Ce=e}));const Pe=te;function xe(){ce.emit("open control panel")}function Oe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];ce.emit("external subscription",e,...n)}function De(e){ce.emit("unstick position",e)}function Re(e){ce.emit("remove watermark",e)}var Le=n(6079),Me=n(9818),Ue=n(2153),je=n(931),Ne=n(1191);const Be=n(907),Fe=n(931),qe=new Be("click",(function(e){const t=Fe.getElementOrIframeById(e),n=t.classList.contains("slide")?t:(0,Ne.closest)(t,(function(e){return e.classList.contains("slide")}));let i;return document.querySelectorAll?i=n.querySelectorAll(".adLinkLabel a"):(i=n.getElementsByTagName("a"),i=Array.prototype.filter.call(i,(function(e){return(0,Ne.closest)(e,(function(e){return e.classList.contains("adLinkLabel")}))}))),i[0]})),Ve=new Be("adDeactivate",(function(e){return(0,Ne.closest)(Fe.getElementOrIframeById(e),(function(e){return"mobileGalleryModal"===e.id}))}));function He(){const e=Array.prototype.slice.call(arguments),t=e[1];e[1]=function(){window.open(t,"_blank")},qe.registerEvent.apply(qe,e)}function ze(e,t){Ve.registerEvent(e,t)}function We(e){"string"==typeof e?e=Fe.getElementById(e):(0,Ne.isElement)(e)||(e=e[0]);let t=(e=Fe.getAdContainer(e)).getElementsByTagName("div");return t=Array.prototype.filter.call(t,(function(e){const t=qe.getEvent(e.id);return t&&-1!==t.toString().indexOf("window.open")})),t.length>0}function $e(){qe.registerEvent.apply(qe,arguments)}var Ge=n(308),Ke=n.n(Ge),Xe=n(907),Ze=n.n(Xe);const Ye={},Je=e=>{if(e in Ye)return Ye[e];let t=!0,n=(0,T.U2)("headerBidders",{});"string"==typeof n&&(n=JSON.parse(n));const i=n[window.location.hostname];return i&&(i.blacklist&&i.blacklist.includes(e)&&(t=!1),i.whitelist&&!i.whitelist.includes(e)&&(t=!1)),Ye[e]=t,t};function Qe(){return(0,T.U2)("plugins.enabled",[]).filter((e=>Je(e)))}var et=n(4252),tt=n(168);const nt=(0,S.x)("plugin-manager");let it,rt,at,ot={},st=[];const dt=e=>{nt("adding plugins:",e);const t=new Set([...(0,T.U2)("plugins.enabled",[]),...e]);(0,T.t8)("plugins.enabled",[...t])},lt=e=>{nt("removing plugins:",e);const t=new Set((0,T.U2)("plugins.enabled",[]));e.forEach((e=>{t.delete(e)})),(0,T.t8)("plugins.enabled",[...t])},ut=[],ct=e=>ut.push(e),pt=async(e,t)=>(await Promise.all(ut.map((n=>n(e,t))))).every((e=>e)),ht=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{addPlugins:dt,broker:it.broker(e),doc:document,getConfig:T.U2,setConfig:T.t8,log:(0,S.x)(e),removePlugins:lt,registerPluginBouncer:ct,checkPluginBouncer:pt,ownName:e,win:window,...t}},ft=e=>"object"==typeof e&&e.default?e.default:e,gt=(e,t,n)=>{if(!Je(t))return;if(at.includes(t))return;let i=ft(e[t]);if("function"!=typeof i&&(i=ft(e[t])),at.push(t),"function"==typeof i)try{i(ht(t,n))}catch(e){console.error(`Error initializing plugin "${t}":`,e)}};function mt(e){return Object.fromEntries(Object.entries(e).map((e=>{let[t,{run:n,init:i,initTimeout:r,...a}]=e;const o=n||(()=>{});return o.pluginSetup=i,o.plugiSetupTimeout=r||5e3,Object.entries(a).forEach((e=>{let[t,n]=e;return o[t]=n})),[t,o]})))}function vt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.g.document;return new Promise(((n,r)=>{var a;const o=i.createElement("script"),s=i.head;o.async=null===(a=t.async)||void 0===a||a,o.src=e,Object.entries(t).forEach((e=>{let[t,n]=e;return o.setAttribute(t,n)})),o.addEventListener("load",n),o.addEventListener("error",r),s.appendChild(o)}))}(0,tt.fo)("adzouk",{run:function(e){let{broker:t}=e;const{top:i}=n.g;if(i.location.hostname.includes("combotag.com"))return;const r=encodeURIComponent(location.href),a=i.ct_t_init;t.invoke("load script",`//serve.combotag.com/show_ad?id=994&url=${r}&t=${a}`,null,{},(()=>!0))},vendorIds:{gdpr:!1}}),(0,tt.fo)("scriptLoader",{run:function(e){let{broker:t,getConfig:n,log:i}=e;const r={};t.register("load script",((e,t,n,a)=>new Promise(((o,s)=>{i("load script:",e,t,n,a);const d=a||(()=>window[t]);t&&d()&&(i("variable already defined:",t),o(d()));const l=t||e;if(r[l]||(i("adding script tag to load",e),vt(e,n).then((()=>{i("script loaded:",e);const t=r[l];i("calling",t.length,"listeners");const n=e=>e();r[l]={push:n},t.forEach(n)}),s),r[l]=[]),t||a)try{(0,et.gb)((()=>d())).then((e=>{i("tracking variable found:",t,a,e),o(e)}))}catch(n){i("error while loading",e,":",n),s(new Error(`Error loading ${e} (trackingVariable: ${t}): ${n}`))}else i("no tracking variable given for",e,"waiting on script load"),r[l].push(o)})))),t.register("import script",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{document:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window;return vt(e,t,n)})),t.register("import script in iframe",(e=>{let{url:t}=e;return new Promise(((e,n)=>{const i=document.createElement("iframe");i.display="none",i.onload=()=>vt(t,{},i.contentWindow.document).then(e,n),document.head.appendChild(i)}))})),t.register("import stylesheet",(e=>{const t=document.createElement("link"),{head:n}=document;t.href=e,t.setAttribute("rel","stylesheet"),n.appendChild(t)}))},isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});const yt=()=>({articlewithvideo:""+n.g.PageCriteria.containsVideo,style:n.g.PageCriteria.articleStyle});async function bt(e){let{broker:t}=e;t.emit("set page level targeting",yt()),t.emit("set page level targeting",new Promise((async e=>{await(0,Ne.untilBodyAvailable)(),e(yt())})))}bt.ccpa={enabledIfDissent:!0},bt.gdpr={enabledIfDissent:!0};var _t=n(3994),Tt=n.n(_t),wt=n(5802),St=n.n(wt);const kt=e=>{let t,n,i="GET",r=3e3,a={};"string"==typeof e?t=e:({method:i="GET",url:t,timeout:r=3e3,headers:a={},data:n}=e);const o=new XMLHttpRequest,s=new Promise(((e,r)=>{o.onreadystatechange=function(){4===this.readyState&&(this.status>199&&this.status<300?e(this.responseText):r(new Error(`Error status ${this.status}: ${this.statusText}`)))},o.open(i,t,!0),Object.entries(a).forEach((e=>{let[t,n]=e;return o.setRequestHeader(t,n)})),n?o.send(n):o.send()}));return r?(0,et.yq)(r,s):s},It={purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[95]}};async function Ct(){let e,t=`/api/player/${PageCriteria.pageType}/${PageCriteria.channel}`;"article"===PageCriteria.pageType&&(t+=`/article-${PageCriteria.articleId}`),t+="/player-config.json";try{e=await kt({url:t,timeout:5e3})}catch(e){console.error(e)}return e}function Et(e){let{broker:t,checkPluginBouncer:i}=e;const r=(0,T.U2)("pos.bvp_puff_26.editorialVideoURL","//video.dailymail.co.uk/video/mol/test/2017/10/17/8934813711130511437/1024x576_MP4_8934813711130511437.mp4");function a(e,n,i,r,a,o){const s=document.getElementById(e),d=e+"_player",l={id:d,width:640,height:264,dataOpts:n,src:i,click:o,description:a,title:(0,T.U2)("pos.bvp_puff_26.title","SPONSORED")},u=document.createElement("div"),c=r(l);u.innerHTML=c,function(e){for(;e.hasChildNodes();)e.removeChild(e.lastChild)}(s),s.appendChild(u.firstElementChild),"none"===s.style.display&&(s.style.display="");const p=DM.molFeVideoplayer.init(document.getElementById(d));t.emit("video player inited",e,p)}n.g.addEventListener("message",(async function(e){if(!e.data||"function"!=typeof e.data.indexOf)return;const n="_dm\n",i=e.data.indexOf(n);if(0===i){let o;const s=e.data.substring(i+n.length),d=JSON.parse(s);K.SP["bvp-force-editorial"]&&(o=await Ct())?(console.log("Forcing editorial instead of campaign in BVP"),a(d.targeting.pos[0],o,r,St(),"","")):t.emit("video",d.type,d)}}),!1),t.on("ad rendered",(async(e,t)=>{if(t.isEmpty&&e.startsWith("bvp_")&&(0,T.U2)("pos.bvp_puff_26.editorialFallback")){const t=await Ct();t&&a(e,t,r,St(),"","")}})),t.on("video","playBrandedVideo",(e=>{const n=e.targeting.pos[0];if(!document.getElementById(n))return void t.emit("log","BVP",`Element #${n} not found`);const r=e.videoObject;let o=[];i("brandedVideoPlayer",It)&&(o=[...o,...e.lotome.filter((e=>e.id&&e.id.length)).map((e=>({time:e.time,uri:`//bcp.crwdcntrl.net/5/c=991/b=${e.id}`})))]),e.impTracker&&e.impTracker.length&&o.push({time:9,uri:e.impTracker});const s=`${e.clickPrefix}${r.clickThroughUrl}`,d={title:r.pageTitle,poster:r.stillImageUrl,isMobile:PageCriteria.isMobile,playerId:"default",videoId:r.videoId,preload:"none",referenceId:r.referenceId,linkBaseURL:"",initialVideo:!1,plugins:{"branded-content":{clickThroughUri:s,endStatePoster:r.endStateImageUrl,trackingPixels:o},"ads-setup":{adsEnabled:!1},tracking:{channelShortName:PageCriteria.channel,sponsored:!0,referenceId:r.referenceId,trackingType:"commercialVideoPlayer"}}};a(n,JSON.stringify(d),r.videoUrl,Tt(),r.description,s)}))}Et.ccpa={enabledIfDissent:!0},Et.gdpr={enabledIfDissent:!0};const At=()=>{const e=document.createTextNode((0,T.U2)("label.text","ADVERTISEMENT")),t=document.createElement("span");t.classList.add("mol-ads-label"),t.appendChild(e);const n=document.createElement("span");return n.classList.add("mol-ads-label-container"),n.appendChild(t),n};function Pt(e){let{broker:t,log:i,getConfig:r}=e;n(9496);const a=n.g.googletag=n.g.googletag||{};a.cmd=a.cmd||[];const o=new Promise((e=>a.cmd.push((()=>e()))));t.emit("import script","//www.googletagservices.com/tag/js/gpt.js"),t.on("system ready",(async()=>{await o,t.emit("gpt loaded",a)}));const s=new Set,d=e=>{let{slot:t}=e;const n=document.getElementById(t.getSlotElementId());n&&n.classList.contains("noAdLabel")||s.delete(t)&&n&&n.appendChild(At())};o.then((()=>a.pubads().addEventListener("slotRenderEnded",d))),t.register("googletag.pubads.refresh",(async(e,t)=>{await o,e.forEach((e=>{s.add(e),i.enable&&i("refresh",e.molAd.pos,"targeting",e.getTargetingMap())})),a.pubads().refresh(e,t)})).sync=!0,t.register("googletag.display",(async e=>{if(await o,i.enabled)try{const t=a.pubads().getSlots().find((t=>t.getSlotElementId()===e)),n=t&&t.getTargetingMap()||void 0;i("display",e,"targeting",n)}catch(e){i.warn(e)}return a.display(e)})).sync=!0;const l=e=>(Array.isArray(e)?e:[e]).map((e=>String(e)));t.on("set page level targeting",(async e=>{const t=await e;await o,Object.entries(t||{}).map((e=>{let[t,n]=e;return[t,l(n)]})).forEach((e=>{let[t,n]=e;i("page level targeting:",t,"=",n),a.pubads().setTargeting(t,n)}))}))}Pt.ccpa={enabledIfDissent:!0},Pt.gdpr={enabledIfDissent:!0};const xt=e=>n.g.sessionStorage.getItem(e),Ot=(e,t)=>{n.g.sessionStorage.setItem(e,t),Dt()},Dt=()=>{n.g.localStorage.setItem("mol.ads.session.publish",JSON.stringify(sessionStorage)),n.g.localStorage.removeItem("mol.ads.session.publish")},Rt=e=>{for(const t in e)n.g.sessionStorage.setItem(t,e[t])},Lt=e=>{let{key:t,newValue:i}=e;if(i)switch(t){case"mol.ads.session.request":n.g.localStorage.setItem("mol.ads.session.response",JSON.stringify(n.g.sessionStorage)),n.g.localStorage.removeItem("mol.ads.session.response");break;case"mol.ads.session.publish":Rt(JSON.parse(i))}};let Mt;const Ut=()=>(Mt||(n.g.addEventListener("storage",Lt),Mt=new Promise((e=>{const t=i=>{let{key:r,newValue:a}=i;if("mol.ads.session.response"!==r)return;n.g.removeEventListener("storage",t);const o=a?JSON.parse(a):{};e(o)};n.g.addEventListener("storage",t),n.g.localStorage.setItem("mol.ads.session.request","mol.ads.session.request"),n.g.localStorage.removeItem("mol.ads.session.request")})).then(Rt)),Mt),jt=()=>{let e=parseInt(xt("mol.ads.sessionDepth")||0);return isNaN(e)&&(e=0),e++,Ot("mol.ads.sessionDepth",e),e};async function Nt(e){let{broker:t}=e;t.emit("set page level targeting",(async()=>{const e=Ut();return await Promise.race([e,(0,et.Vs)(1)]),{session:await jt()}})())}Nt.isAdsFreeSupported=!0,Nt.ccpa={enabledIfDissent:!0},Nt.gdpr={enabledIfDissent:!0};const Bt=()=>!!xt("mol.ads.taboolaSessionStarted");async function Ft(e,t){let{broker:n}=e;n.emit("set page level targeting",(async e=>{const t=Promise.race([Ut(),(0,et.Vs)(1)]);await t;const n=Bt()?{referred_by:"taboola"}:{},i=(e=>{let t=parseInt((0,K.ej)("mol.ads.taboolaReferrals"));isNaN(t)&&(t=0);const n=Bt(),{ito:i}=K.SP;return("taboola-uk"===i||"taboola-us"===i||"taboola-au"===i||e)&&!n&&(Ot("mol.ads.taboolaSessionStarted",!0),(0,K.zP)("mol.ads.taboolaReferrals",++t)),t})(e);return i&&Object.assign(n,{taboola_referrals:i}),n})(t))}Ft.ccpa={enabledIfDissent:!0},Ft.gdpr={enabledIfDissent:!0},n(7134);var qt=n(8778);function Vt(e,t,n){Ht(e,t),t.set(e,n)}function Ht(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function zt(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,$t(e,t,"get"))}function Wt(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,$t(e,t,"set"),n),n}function $t(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Gt=new WeakMap,Kt=new WeakMap,Xt=new WeakMap,Zt=new WeakMap,Yt=new WeakMap,Jt=new WeakSet;class Qt{constructor(e,t,n){!function(e,t){Ht(e,t),t.add(e)}(this,Jt),Vt(this,Gt,{writable:!0,value:!1}),Vt(this,Kt,{writable:!0,value:[]}),Vt(this,Xt,{writable:!0,value:void 0}),Vt(this,Zt,{writable:!0,value:void 0}),Vt(this,Yt,{writable:!0,value:!1}),Wt(this,Xt,n),Wt(this,Zt,e),this.state=Object.freeze(t)}deinit(){this.dispatch({type:"__DEINIT__"}),Wt(this,Yt,!1)}init(){Wt(this,Yt,!0),this.dispatch({type:"__INIT__"})}dispatch(e){if(!zt(this,Yt))return void zt(this,Xt).warn("Cannot dispatch actions before store has been initiated.");if(zt(this,Gt))throw new Error("You shouldnt dispatch actions from a reducer");Wt(this,Gt,!0);const t=zt(this,Zt).call(this,e,this.state);Wt(this,Gt,!1),t===this.state?zt(this,Xt).call(this,e,"NO_CHANGE"):(this.state=Object.freeze(t),zt(this,Xt).call(this,e,this.state),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,Jt,en).call(this,e))}subscribe(e){return zt(this,Kt).push(e),setTimeout((()=>e({type:"__INIT__"},this.state))),()=>{Wt(this,Kt,(0,ne.cl)(e,zt(this,Kt)))}}}function en(e){for(const t of zt(this,Kt))t(e,this.state)}var tn=n(4582),nn=n(816);const rn=(0,nn.ri)((()=>{try{const{_vars_:e}=googletag;return JSON.stringify(e).length}catch(e){return void console.warn(e)}}));function an(e,t,n){const i=e[t];e[t]=function(){i.apply(this,arguments),n(t,...arguments)}}(0,tt.fo)("abe.analytics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},async run(e){let{broker:t,doc:n,getConfig:i,log:r,win:a}=e;const o=i("abe.verifier",!1),s=function(e,t){const n=new Qt(((e,t)=>{switch(e.type){case"adRendered":return null!==t.gamdv?t:{...t,gamdv:!1};case"abdResult":return{...t,adblocker:e.adblocker,abdReason:e.abdReason,abdLate:e.late,abdVerifier:e.abdVerifier};case"gptLoaded":return{...t,gptLoaded:!0};case"renderedGAMAd":return{...t,gamdv:!0};case"error":return{...t,abdError:!0,abdVerifier:t.abdVerifier||e.abdVerifier};default:return t}}),{adblocker:null,abdEnabled:!!e("abe.detection.enabled"),abdReason:null,gamdv:null,gptLoaded:!1,office:(0,qt.K)(),abdLate:null},t);return n}(i,r.extend("store"));s.init(),t.register("call for page analytics",(()=>{const{abdError:e,adblocker:t}=s.state;let i={...s.state};if(t){const e=(0,k.getAdIFrames)(n).length;i={...i,adblockerDepth:(0,k.getBlockerDepth)(),adIframes:e,adIframeAccounts:(0,k.getAdIframeAccounts)(n)}}return i})),t.once("adblocker detection error",(()=>{s.dispatch({type:"error",abdVerifier:rn()})})),t.once("gpt loaded",(()=>s.dispatch({type:"gptLoaded"}))),t.on("ad rendered",(()=>s.dispatch({type:"adRendered"})));const d=(0,tn.Oo)(a,"message",(e=>{var t,n;0===(null===(t=e.data)||void 0===t||null===(n=t.indexOf)||void 0===n?void 0:n.call(t,"_dm_abe\n"))&&(d(),s.dispatch({type:"renderedGAMAd"}))}));t.once("ad block detection result",(e=>{let t,{adblocker:n,reason:i,late:r}=e;o&&(t=rn()),s.dispatch({type:"abdResult",adblocker:n,abdReason:i,late:r,abdVerifier:t})}))}}),(0,tt.fo)("scriptTagsMonitor",{init:function(e){let{broker:t,log:n}=e;n("loading");let i=0,r=0;const a=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){i++,this.addEventListener("error",(()=>r++)),a.apply(this,arguments)},an(Element.prototype,"append",d),an(Element.prototype,"appendChild",d),an(Element.prototype,"insertBefore",d),an(Element.prototype,"insertAfter",d);let o=0,s=0;function d(e,t){"SCRIPT"===t.tagName&&t.src&&(o++,t.addEventListener("error",(()=>{s++,n.warn("error loading:",t.src)})),n("intercepting",e,t.src))}t.register("call for page-unload",(()=>(n("reporting:",{scriptTags:o,scriptTagErrors:s,xhrOpens:i,xhrErrors:r}),{stm:{st:o,se:s,xo:i,xe:r}})))},isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0}});var on=n(7337),sn=n(1978);function dn(e){let{broker:t,getConfig:i,log:r}=e;r("starting");let a=!1;t.once("gpt loaded",(()=>a=!0));let o=!1;t.once("system ready",(()=>n.g.permutive&&n.g.permutive.ready((()=>o=!0)))),function(e){r("awaiting for",e);const i=t.until(e);t.once("ad block detection result",(async s=>{var d;let{adblocker:l,reason:u,reset:c,...p}=s;if(!l&&!c)return;r("adblocker detection result:",{adblocker:l,reset:c});const h=Date.now(),[f,g]=await i;let m={eventName:e,gptLoaded:a,adsDisabled:!!n.g.disableAds,imaLoaded:!(null===(d=n.g.google)||void 0===d||!d.ima),permutiveReady:o,abdReason:u,reset:c,elapsed:Date.now()-h,pos:f,...p};const v=(0,sn.np)(g);v&&(m={...m,ri:v}),r("sending:",m),t.emit("adblocker detection error"),t.emit("send event to bidmax",{type:"abd-error",payload:m}),(0,k.registerDetection)(!1)}))}("ad rendered")}function ln(e){let{broker:t}=e;t.on("abe rendered",(()=>t.emit("send to rta","abe","rendered"))),t.on("ex ad blocker user",((e,n)=>{n&&t.emit("send to rta","exabd",e?"was":"yes")})),t.on("ad block detection result",(async e=>{t.emit("send to rta","abd",e.adblocker?"yes":"no")}))}dn.ccpa={enabledIfDissent:!0},dn.gdpr={enabledIfDissent:!0},ln.ccpa={enabledIfDissent:!0},ln.gdpr={enabledIfDissent:!0},(0,tt.fo)("analytics.bidsHunting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=new Set(n("analytics.bidsHunting.positions",[])),a=new Set(n("analytics.bidsHunting.bidders",[]));t.on("bid",((e,n)=>{!n.cpm||r.size>0&&!r.has(e)||a.size>0&&!a.has(n.bidder)||(i(" adding bid to stack",e,n),t.emit("send event to bidmax",{type:"custom",payload:{...n,event:"bid-hunt",pos:e}}))}))}}),(0,tt.fo)("analytics.coreMetrics",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){var t,i,r,a,o,s;let{broker:d}=e;const l=null===(t=n.g.performance)||void 0===t||null===(i=t.getEntries())||void 0===i||null===(r=i[0])||void 0===r||null===(a=r.serverTiming)||void 0===a||null===(o=a.find((e=>"cdn-cache"===e.name)))||void 0===o||null===(s=o.description)||void 0===s?void 0:s.toLowerCase();d.register("call for page analytics",(()=>{const{width:e,height:t}=(0,K.ap)();return{ss:{w:e,h:t},pageCache:l}}))}});var un=n(2310);(0,tt.fo)("analytics.cwv",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:i}=e;function r(){const e=n.g.DM.molFeWebVitals.getStandard(),{CLS:t,FCP:i,FID:r,LCP:a,TTFB:s}=e;return o({cls:1e3*(t||0),fcp:i,fid:r,lcp:a,ttfb:s})}function a(){const e=n.g.DM.molFeWebVitals.getUpdated(),{CLS:t,FCP:i,FID:r,LCP:a,TTFB:s}=e;return o({cls:1e3*(t||0),fcp:i,fid:r,lcp:a,ttfb:s})}function o(e){return Object.fromEntries(Object.entries(e).filter((e=>{let[,t]=e;return null!=t})).map((e=>{let[t,n]=e;return[t,Math.round(n)]})))}n.g.DM&&n.g.DM.molFeWebVitals?(t.register("call for page analytics",(()=>({cwv:r()}))),n.g.DM.molFeWebVitals.getUpdated&&t.register("call for page-unload",(()=>({cwv:a()}))),n.g.DM.later("mol-fe-web-vitals-standard",(()=>{const e=function(){const e=r(),{cls:t,fcp:n,fid:i,lcp:a,ttfb:o}=e;return{...(0,un._b)("clsP1k",t),...(0,un._b)("fcpP10s",n),...(0,un._b)("fidP1s",i),...(0,un._b)("lcpP10s",a),...(0,un._b)("ttfbP10s",o)}}();i("mol-fe-web-vitals-standard fired, cwv:",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"cwv",...e}})}))):i.warn("cwv metrics cannot be used because window.DM.molFeWebVitals is unavailable")}}),(0,tt.fo)("analytics.pageUnload",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:i,setConfig:r}=e;const a={capture:!0,passive:!0},o=n.g.performance&&n.g.performance.timing&&n.g.performance.timing.navigationStart||n.g.adverts.startTime;i("Starting at:",n.g.adverts.startTime-o);let s=!1;const d=async()=>{if(s)return;s=!0,i("force sync dispatcher"),t.bus.setDispatcher((e=>e())),t.bus.globalTimeoutOverride=0,i("about to call for page-unload");const e=(await t.invokeAll("call for page-unload")).reduce(((e,t)=>({...e,...t})),{t:Date.now()-o,autorefresh:!!(0,K.ej)("autorefresh")});i("got:",e),t.emit("send event to bidmax",{type:"page-unload",payload:e})};window.addEventListener("pagehide",d,a),window.addEventListener("beforeunload",d,a),window.addEventListener("unload",d,a)}}),(0,tt.fo)("analytics.partners",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;t.once("permutive ready",(()=>o({event:"permutive-load"}))),t.once("new minute media player",(()=>o({event:"mm-load"}))),t.once("admantx loaded",(()=>o({event:"admantx-load"}))),document.addEventListener("spot-im-api-ready",(()=>o({event:"openweb-load"}))),document.addEventListener("spot-im-conversation-loaded",(()=>o({event:"openweb-conv-loaded"}))),document.addEventListener("spot-im-conversation-viewed",(()=>o({event:"openweb-conv-viewed"}))),document.addEventListener("spot-im-current-user-sent-message",(()=>a("powms"))),cn.forEach((e=>document.addEventListener(e,(()=>a("powui"))))),t.once("taboola render",(()=>o({event:"taboola-first-render"}))),t.on("taboola render",(()=>a("pti"))),t.once("taboola visible",(()=>o({event:"taboola-first-view"}))),t.on("taboola visible",(()=>a("ptv"))),t.on("taboola nocontent",(()=>a("ptnc"))),t.on("taboola failed to load",(()=>a("ptftl"))),t.on("taboola click",(()=>a("ptc"))),t.once("outbrain container render",(()=>o({event:"outbrain-container-render"}))),t.once("outbrain render",(()=>o({event:"outbrain-first-widget-render"}))),t.on("outbrain render",(()=>a("poi"))),t.once("outbrain visible",(()=>o({event:"outbrain-first-view"}))),t.on("outbrain visible",(()=>a("pov"))),t.on("outbrain nocontent",(()=>a("ponc"))),t.on("outbrain failed to load",(()=>a("poftl"))),t.on("outbrain click",(()=>a("poc"))),t.on("outbrain issue",(()=>a("pop")));let i=0;t.on("new perform player",((e,n)=>{0===i&&o({event:"dazn-load"});const r="peformPlayer-"+i++;t.emit("track viewability",r,n),t.once("ad viewable",r,(()=>a("pdv")))}));const r={};function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!pn[e])throw new Error(`Metric '${e}' not registered in 'knownMetric'. Please do so.`);n("inc counter:",e);const i=r[e]||0;r[e]=i+t}function o(e){n("sending event:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}t.register("call for page-unload",(()=>r))}});const cn=["spot-im-clicked-delete-message","spot-im-clicked-edit-message","spot-im-clicked-flag","spot-im-clicked-message-context-menu","spot-im-clicked-mute-user","spot-im-share-drop-down","spot-im-share-type","spot-im-hover-like-details","spot-im-show-more-comments-clicked","spot-im-show-more-replies-clicked","spot-im-user-down-vote-click","spot-im-user-up-vote-click","spot-im-login-start","spot-im-post-login","spot-im-notification-drop-down-link","spot-im-user-notifications-click","spot-im-clicked-cog-menu","spot-im-clicked-privacy","spot-im-clicked-settings","spot-im-profile-drop-down","spot-im-sort-by-drop-down","spot-im-sort-by-select","spot-im-clicked-article-link-profile","spot-im-open-user-profile"],pn={pti:"taboola impression",ptv:"taboola view",ptnc:"taboola no content",ptftl:"taboola failed to load",ptc:"taboola click",poi:"outbrain impression",pov:"outbrain view",ponc:"outbrain no content",poftl:"outbrain failed to load",poc:"outbrain click",pop:"outbrain issue",powui:"openWeb user interaction",powms:"openWeb message sent",pdv:"dazn view"};function hn(e){let{broker:t}=e;t.register("call for page analytics",(()=>({abtest:n.g.molABTest})))}(0,tt.fo)("analytics.reportPlugins",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const i=new Set(n("bidmax.reportPlugins",[]));i.size>0&&t.register("call for page analytics",(()=>({plugins:n("plugins.enabled").filter((e=>i.has(e)))})))}}),(0,tt.fo)("analytics.scrollDepth",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t}=e,n=0;function i(){n=Math.max(n,Math.round(window.pageYOffset+window.innerHeight))}document.addEventListener("scroll",(0,nn.FU)(i,300),{passive:!0,capture:!1}),t.register("call for page-unload",(()=>(i(),{sd:n})))}}),(0,tt.fo)("analytics.takeover",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:i}=e,r=!1;n.g.addEventListener("message",(function e(a){!r&&a.data&&"function"==typeof a.data.indexOf&&0===a.data.indexOf("_dm_ads_takeover")&&(i("Marking page as containing takeover"),t.register("call for page analytics",(()=>({takeover:!0}))),t.emit("send event to bidmax",{type:"custom",payload:{event:"takeover"}}),r=!0,"function"==typeof n.g.removeEventListener&&n.g.removeEventListener("message",e,!1))}),!1)}}),(0,tt.fo)("analytics.timeSpent",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,log:i,getConfig:r}=e;const a={capture:!0,passive:!0},o=r("bidmax.inactiveTime",1e4),s=n.g.performance&&n.g.performance.timing&&n.g.performance.timing.navigationStart||n.g.adverts.startTime;i("Starting at:",n.g.adverts.startTime-s);let d=0,l=0,u=0,c=s,p=s;const h=function(){const e=Date.now(),t=e-p-o;t>0&&(i("Adding inactive time:",t),l+=t,p=e)},f=()=>{const e=Date.now(),t=e-c;u+=t,i("Adding hidden time:",t),c=e};t.on("ad rendered",(()=>d++));const g=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],m=(0,nn.FU)((e=>{const t=Date.now();e&&h(),p=t}),1e3);for(const[e,t]of g)t.forEach((t=>e.addEventListener(t,m,a)));t.register("call for page-unload",(()=>(h(),y()&&f(),{imp:d,i:l,h:u})));const v=()=>void 0!==document.hidden?"visibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychanged":"",y=()=>{try{return n.g.top.document.hidden||n.g.top.document.msHidden||n.g.top.document.webkitHidden||!1}catch(e){return!!v()}};let b=y();document.addEventListener(v(),(e=>{y()!==b&&(b=y(),b?c=Date.now():f())}),!1)}}),(0,tt.fo)("analytics.videoFailures",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){var t,i;let{broker:r,log:a}=e;a("Starting");const o=function(){let{videoId:e,adErrorCode:t,autoplay:n,errorMessage:i,offset:o,trackingType:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d={videoId:e,adErrorCode:t,autoplay:n,errorMessage:i,offset:o,trackingType:s};a("Error detected:",e,d),r.emit("send event to bidmax",{type:"video-ad-error",payload:d}),a("error:",d)},s=()=>{a("subscribing to 'video.advert-failed' events"),n.g.DM.pageEvents.subscribe("video.advert-failed",(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o(t)}))};r.on("video.advert-failed",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(e)})),(null===(t=n.g)||void 0===t||null===(i=t.DM)||void 0===i?void 0:i.pageEvents)&&s()||(a("waiting for chromeless player to load"),r.on("mol-fe-sync bundle loaded",(()=>{var e,t;a("mol-fe-sync bundle loaded"),null!==(e=n.g)&&void 0!==e&&null!==(t=e.DM)&&void 0!==t&&t.pageEvents&&s()})))}}),hn.isAdsFreeSupported=!0,hn.ccpa={enabledIfDissent:!0},hn.gdpr={enabledIfDissent:!0};var fn=n(4403);let gn,mn,vn,yn;const bn=["advertiserId","campaignId","creativeId","isEmpty","lineItemId","serviceName"],_n=["adDurationSecs","adSystem","adTitle","advertiserId","autoplay","contentType","creativeId","isEmpty","lineItemId","mediaUrl","offset","platform","play","skippable","targeting","timeAtRender","timeSinceStartOfPlayer","videoHeight","videoWidth","winner","winningCPM"],Tn=()=>Date.now()-n.g.adverts.startTime,wn=e=>{if(e.slot&&e.slot.molAd&&void 0!==e.slot.molAd.state)return e.slot.molAd.state};function Sn(e){if(Array.isArray(e.size)&&2===e.size.length){const{size:[t,n]}=e;return`${t}x${n}`}}const kn=async()=>{const e=(await gn.invokeAll({message:["call for page analytics"],timeout:vn("bidmax.pageTimeout",3e3)})).reduce(((e,t)=>({...e,...t})),{});return{...mn,...e}};function In(e){let{broker:t,getConfig:i,log:r}=e;yn=r,gn=t,vn=i,mn={timestamp:n.g.adverts.startTime,referrer:document.referrer,url:window.location.href},n.g.performance&&n.g.performance.timing&&n.g.performance.timing.navigationStart&&(mn.adsStart=n.g.adverts.startTime-n.g.performance.timing.navigationStart),gn.register("get page level analytics",(()=>kn())),function(){const e=vn("bidmax.debounceTime",1e3);let t=[];const n=(0,nn.Ds)((async function(){let e={...await kn()};if(t.length){if(yn.enabled){const e=t.find((e=>"page-unload"===e.type))?JSON.stringify(t):t;yn("dispatching",t.length,"events:",e)}e=1===t.length?{...e,...t[0]}:{...e,type:"events",payload:t},gn.emit("send to bidmax",e),t=[]}}),e);gn.on("send event to bidmax",(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.push({...e,timeAtSend:Tn()}),e.type&&"page-unload"!==e.type?n():n.callNow()}))}(),gn.on("send to bidmax",(e=>{try{const t={...e,event_type:"bidmax",type_version:2,timeAtSend:Tn(),version:K.SP.bidmax||"next-release.127c8bc"},n={"Content-type":"text/plain"};gn.emit("dispatch to bidmax",{headers:n,body:t})}catch(e){console.warn(e)}}));const a=window.mol_ads_famab;gn.on("plugins enabled",(async()=>gn.emit("send event to bidmax",{type:"page",famab:a}))),(()=>{const e={};let t;const i={};let r=0;const a=async function(n){let{auction:r,pos:a,adImpressionData:o,offset:s}=n,d=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!d)return delete e[a][s],i[a]&&delete i[a][s],delete r.pendingImpressions,delete r.lastPosTime,void(t=void 0);const l=r.slots[a];if(l.impression=o,void 0!==s?(r.pendingImpressions.delete(a+s),l.bids=i[a][s]?[...i[a][s]]:[],delete e[a][s],delete i[a][s]):(r.pendingImpressions.delete(a),l.bids=i[a],delete e[a],delete i[a]),!(r.pendingImpressions.size>0)&&(delete r.pendingImpressions,delete r.lastPosTime,t=void 0,d)){const e={...await kn(),auction:r};gn.emit("send to bidmax",e)}},o=e=>({auctionTime:e,startTime:Tn(),auctionId:r++,slots:{},pendingImpressions:new Set}),s=(t,n,i)=>{n.lastPosTime=Tn(),n.pendingImpressions.add(t+(void 0!==i?i:"")),n.slots[t]={},void 0!==i?(n.offset=i,e[t]||(e[t]={}),e[t][i]=n):e[t]=n},d=(e,n)=>((!t||t.lastPosTime<Tn()-2e3)&&(t=o(e)),s(n,t),t.slots[n].auctionStart=Tn(),t);gn.on("get tags",(t=>{let{slot:{pos:n},timeout:i}=t;e[n]?yn(`Auction is pending for ${n}`):d(i,n)})),gn.on("bidding ended",(t=>{yn("bidding ended",t);const n=e[t];n.slots?n.slots[t].biddingEnded=Tn():Object.keys(n).forEach((e=>{n[e].slots[t].biddingEnded=Tn()}))})),gn.on("get video tags",(t=>{let{platform:n="dmplayer",offset:r=0,slot:{pos:a},timeout:d}=t;e[a]&&e[a][r]&&(e[a][r].pendingImpressions.delete(a+r),delete e[a][r],delete i[a][r]),s(a,o(d),r),i[a]||(i[a]={}),i[a][r]=[]})),gn.on("bid",((t,n)=>{let r,{platform:a,offset:d,bidder:l,cpm:u,cached:c,requestSizes:p}=n;if(yn("on bid",t),a="jwplayer"===t&&"dmplayer"===a?"chromeless":a,void 0!==d?(i[t]||(i[t]={}),r=i[t][d]=i[t][d]||[]):r=i[t]=i[t]||[],!r)return void yn.warn("Got a bid after auction finished:",{pos:t,bidder:l,cpm:u,platform:a,offset:d,cached:c});void 0===d||e[t][d]||s(t,o(5e3),d);const h={bidder:l,cpm:Math.round(u),time:Tn(),platform:a,offset:d,cached:c,requestSizes:p};r.push(h)})),gn.on("ad requested",(t=>{const n=e[t];n&&(n.slots[t].adRequestTime=Tn())})),gn.on("ad loaded",(t=>{const n=e[t];n&&(n.slots[t].adLoadedTime=Tn())})),gn.on("headerbidder winner",((t,n)=>{const i=e[t];i&&(i.slots[t].winner=n)}));const l=n.g.DM&&n.g.DM.molFeTracking&&n.g.DM.molFeTracking.pageEvents,u=(t,n)=>{var r;const d=n.playerId||(n.targeting&&n.targeting.pos?n.targeting.pos[0]:"video");let l=n.platform||(null==n||null===(r=n.adImpression)||void 0===r?void 0:r.platform);l="jwplayer"===d&&"dmplayer"===l?"chromeless":l;const u="preroll"===n.offset?0:"midroll"===n.offset?20:n.offset,c=n.tag&&(0,fn.Gi)(n.tag)||{cust_params:{}},p=Object.fromEntries(Object.entries(c.cust_params).filter((e=>{let[t,n]=e;return!t.startsWith("gdpr")&&!t.startsWith("hb_")&&(null==n?void 0:n.length)<=20}))),h=n.adImpression;let f,g,m;var v,y,b,_,T;h&&!(0,Y.xb)(h)&&(i[d]=i[d]||{},i[d][u]=i[d][u]||[],gn.emit("video ad viewable",{pos:d,bids:i[d][u],videoId:n.videoId}),g=(e=>{let t="undetermined";return!e.adWrapperIds||!e.adWrapperIds[0]||e&&e.adWrapperSystems&&"DCM"===e.adWrapperSystems[0]?t="Other":e.traffickingParameters&&e.traffickingParameters.vu?t="tia":e.traffickingParameters&&e.traffickingParameters.channel_id&&(t="spotx"),t})(h),m={}[g]||0,f={adDurationSecs:null==h||null===(v=h.adPodInfo)||void 0===v?void 0:v.maxDuration,adSystem:null==h?void 0:h.adWrapperSystems,adTitle:h.title,advertiserId:h.adSystem,autoplay:n.autoplay,contentType:h.contentType,creativeId:null==h||null===(y=h.adWrapperCreativeIds)||void 0===y?void 0:y[null==h||null===(b=h.adWrapperSystems)||void 0===b?void 0:b.indexOf("GDFP")],isEmpty:!1,lineItemId:null==h||null===(_=h.adWrapperIds)||void 0===_?void 0:_[null==h||null===(T=h.adWrapperSystems)||void 0===T?void 0:T.indexOf("GDFP")],mediaUrl:h.mediaUrl,play:n.play,skippable:h.skippable,targeting:{...p,...h.targeting||{pos:[d]}},timeSinceStartOfPlayer:n.timeSinceStartOfPlayer,videoHeight:h.vastMediaHeight,videoWidth:h.vastMediaWidth,winner:g,winningCPM:m},l&&(f.platform=l),void 0!==u&&(f.offset=u)),void 0===u||e[d]&&e[d][u]||s(d,o(5e3),u);const w={...e[d][u]};let S;delete e[d][u],w?(w.platform=l,w.offset=u,f&&!(0,Y.xb)(f)?(S=(0,Y.ei)(f,_n),S.timeAtRender=Tn(),a({auction:w,pos:d,adImpressionData:S,offset:u})):a({auction:w,pos:d,offset:u},!1)):yn(`Current auction not found for ${d}${u}`)};l&&(gn.on("dom ready",(()=>{l.subscribe("video.ad-impression",u),l.subscribe("video.no-ad-shown",u)})),gn.on("video.ad-impression",(e=>u(0,e))),gn.on("video.no-ad-shown",(e=>u(0,e)))),gn.on("ad rendered",((t,n)=>{if(t.endsWith("-oop"))return;const i=(e=>({...(0,Y.ei)(e,bn),...e.isEmpty?{}:{creativeId:e.creativeId||e.sourceAgnosticCreativeId,lineItemId:e.lineItemId||e.sourceAgnosticLineItemId,advertiserId:e.advertiser,campaignId:e.campaignId,companyId:e.companyIds},targeting:e.slot?{...e.slot.getTargetingMap()}:{},timeAtRender:Tn(),slotState:wn(e),size:Sn(e)}))(n),r=e[t]||d(0,t);yn("ad rendered, processImpression",t,r),a({auction:r,pos:t,adImpressionData:i})}))})()}function Cn(e){let{broker:t,getConfig:n,log:i}=e,r=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);const a=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk"),o=(0,K.oK)()[0];o<13&&o>0&&(i("force disabling beacon for iOS < 13"),r=!1),t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(r)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(a,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",a,!0),Object.entries(n).forEach((t=>{let[n,i]=t;return e.setRequestHeader(n,i)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}function En(e){let{broker:t,getConfig:n}=e;const i=n("bidmax.migrationChance",0);if(Math.random()>=i)return;const r=navigator.sendBeacon&&n("bidmax.dispatcher.useBeacon",!0);let a=n("bidmax.dispatcher.useCurrentUrl",!1)?window.location.href:n("bidmax.dispatcher.url","//crta.dailymail.co.uk");a.endsWith("/")||(a+="/"),a+="migration",t.on("dispatch to bidmax",(e=>{let{body:t,headers:n}=e;if(t){if(r)try{t={...t,reqType:"beacon"};const e=new Blob([JSON.stringify(t)],{...n,type:"text/plain"});if(navigator.sendBeacon(a,e))return}catch(e){console.error(e)}try{t={...t,reqType:"xhr"};const e=new XMLHttpRequest;e.open("POST",a,!0),Object.entries(n).forEach((t=>{let[n,i]=t;return e.setRequestHeader(n,i)})),e.send(JSON.stringify(t))}catch(e){console.error(e)}}else console.warn("Ignoring BidMax message with no body")}))}In.isAdsFreeSupported=!0,In.ccpa={enabledIfDissent:!0},In.gdpr={enabledIfDissent:!0},Cn.isAdsFreeSupported=!0,Cn.ccpa={enabledIfDissent:!0},Cn.gdpr={enabledIfDissent:!0},En.isAdsFreeSupported=!0,En.ccpa={enabledIfDissent:!0},En.gdpr={enabledIfDissent:!0};const An=e=>{let[t,n]=e;return n>Date.now()-2628e6},Pn=(e,t)=>{let[n,i]=t;return{...e,[n]:i}};function xn(e){let{broker:t}=e;const n="mol.ads.knownBundles",i=JSON.parse(localStorage.getItem(n)||"{}"),r=Object.entries(i).filter(An).reduce(Pn,{}),a=!!r["next-release.127c8bc"];r["next-release.127c8bc"]=Date.now(),localStorage.setItem(n,JSON.stringify(r)),t.register("call for page analytics",(()=>({abcache:a})))}function On(e){let{broker:t,getConfig:i,log:r}=e;const a="ccpa"===i("cmp.model"),o=i("ccpa.scriptBase"),s={cmpVersion:o&&o.split("/").pop()||void 0};n.g[i("cmp.apiHandler")]("getUSPData",null,((e,t)=>{t&&(r("encoded data:",e),(e=>{let{uspString:t}=e;s.uspString=t})(e))})),t.register("call for page analytics",(()=>(s.consent=localStorage.getItem("mol.ads.cmp.consent"),s.cmp=a?"ccpa":void 0,r("sending",s),s)))}xn.isAdsFreeSupported=!0,xn.ccpa={enabledIfDissent:!0},xn.gdpr={enabledIfDissent:!0},On.isAdsFreeSupported=!0,On.ccpa={enabledIfDissent:!0};const Dn="__bidmax\n",Rn=(0,S.x)("custom-tracking");async function Ln(e){let{broker:t,getConfig:n}=e;const i=n("bidmax.customTracking.max",1024);Rn("MAX:",i),window.addEventListener("message",(async e=>{let{data:n}=e;if("string"!=typeof n||!n.startsWith(Dn))return;const r=n.substring(Dn.length);Rn("message received size:",r.length),r.length>i&&Rn("message too long, max",i);try{const e=JSON.parse(r);Rn("message:",e),t.emit("send event to bidmax",{type:"custom",payload:e})}catch(e){Rn("Error parsing:",r),console.error(e)}}))}Ln.isAdsFreeSupported=!0,Ln.ccpa={enabledIfDissent:!0},Ln.gdpr={enabledIfDissent:!0};const Mn="mol.ads.entryPoint.sessionId",Un="mol.ads.entryPoint.data",jn=function(){return{id:(0,un.kb)(),lastVisit:Date.now()}},Nn=(0,S.x)("entry-point");async function Bn(e){let{broker:t,getConfig:i}=e;const r=i("bidmax.entryPoint.sessionDurationInMins",28),a=(async()=>{let e=JSON.parse(localStorage.getItem(Un)||"{}");const t=await(async()=>await(async()=>{if(n.g.RTA&&n.g.RTA.ids&&n.g.RTA.ids.then){const{visit:e}=await n.g.RTA.ids;if("string"==typeof e){const t=e.split(".");return Nn("Using RTA visit id"),t[0]}}})()||(async e=>{Nn("Using own session");let t=JSON.parse(localStorage.getItem(Mn)||"{}");return t.id?t.lastVisit<Date.now()-60*e*1e3&&(Nn("Session found in storage but it is too old:",new Date(t.lastVisit).toISOString(),"and max session is",e,"mins"),t=jn()):(Nn("No session found in storage, creating a new one"),t=jn()),t.lastVisit=Date.now(),localStorage.setItem(Mn,JSON.stringify(t)),t.id})(r))();if(Nn("Id",t),e.sessionId!==t){Nn("Entry Point new or too old. Creating another.");const i=n.g.PageCriteria;e={sessionId:t,ep:{pt:i.pageType,c:i.channel,s:i.subchannel,r:document.referrer}},localStorage.setItem(Un,JSON.stringify(e))}return Nn("Entry Point:",e.ep),{ep:e.ep}})();t.register("call for page analytics",(()=>a))}Bn.isAdsFreeSupported=!0,Bn.ccpa={enabledIfDissent:!0},Bn.gdpr={enabledIfDissent:!0};const Fn=async()=>{const e=(0,et.gb)((()=>n.g.pagemeta)),t=await e;return{bundle:t.bundleVersion,sync:t.syncBundleVersion,async:t.asyncBundleVersion,video:t.videoBundleVersion}},qn=e=>{let{broker:t}=e;return new Promise((e=>{t.once("gpt initialized",(t=>{e({gpt:t.getVersion()})}))}))},Vn=e=>{let{broker:t}=e;return new Promise((e=>{t.once("prebid loaded",(t=>{e({prebid:t.version})}))}))},Hn=async()=>{const e=(0,et.gb)((()=>n.g.google&&n.g.google.ima&&n.g.google.ima.VERSION));return{ima:await e}},zn=async()=>(0,et.gb)((()=>{if(!n.g.permutive||!n.g.permutive.config||!n.g.permutive.config.apiVersion)return!1;const{apiVersion:e,sdkType:t}=n.g.permutive.config;return{permutiveApi:e,permutiveSdkType:t}})),Wn=e=>{const{broker:t,getConfig:n,log:i}=e,r={},a={pageMeta:Fn,gpt:qn,prebid:Vn,ima:Hn,permutive:zn},o=n("analytics.external.bundleVersions",[]);i("finding versions for",o),o.forEach((t=>{const n=a[t]&&a[t](e);n?n.then((e=>{i(`assigning ${t} version`,e),Object.assign(r,e)}),(()=>i("error waiting for",t))):i.error(`unable to find handler for ${t} version`)})),t.register("call for page analytics",(()=>({externals:{versions:r}})))};Wn.isAdsFreeSupported=!0,Wn.ccpa={enabledIfDissent:!0},Wn.gdpr={enabledIfDissent:!0};const $n=Wn;async function Gn(e){let{broker:t}=e;const i={};await t.until("prebid loaded");const r=n.g.pbjs.renderAd;n.g.pbjs.renderAd=function(){for(var e=arguments.length,a=new Array(e),o=0;o<e;o++)a[o]=arguments[o];const[,s]=a,{pos:d,bidder:l}=i[s];t.emit("headerbidder winner",d,l),r.apply(n.g.pbjs,a)},n.g.pbjs.onEvent("bidResponse",(e=>{i[e.adserverTargeting.hb_adid]={pos:e.adUnitCode,bidder:e.bidderCode}}))}function Kn(e){let{broker:t,getConfig:n}=e;const i={},r=n("bidmax.inputDelay.monitorMax",!1),a=e=>{const t=n=>{const a=(n.timeStamp>=1e12?(new Date).getTime():performance.now())-n.timeStamp|0;if(a){r||e.removeEventListener(n.type,t,o);const s="f"+n.type[0],d="m"+n.type[0];i[s]?r&&i[d]<a&&(i[d]=a):(i[s]=a,r&&(i[d]=a))}};return t},o={capture:!0,passive:!0};window.addEventListener("scroll",a(window),o),document.addEventListener("mousemove",a(document),o),document.addEventListener("click",a(document),o),t.register("call for page analytics",(()=>({latency:i})))}Gn.ccpa={enabledIfDissent:!0},Gn.gdpr={enabledIfDissent:!0},Kn.isAdsFreeSupported=!0,Kn.ccpa={enabledIfDissent:!0},Kn.gdpr={enabledIfDissent:!0};const Xn=["jsHeapSizeLimit","totalJSHeapSize","usedJSHeapSize"];function Zn(e){let{broker:t}=e;n.g.performance&&n.g.performance.memory&&t.register("call for page analytics",(()=>Promise.resolve({memory:Xn.reduce(((e,t)=>(e[t]=n.g.performance.memory[t],e)),{})})))}Zn.isAdsFreeSupported=!0,Zn.ccpa={enabledIfDissent:!0},Zn.gdpr={enabledIfDissent:!0};const Yn=["pageViewId","articleId","channel","device","geo","isMobile","isTablet","pageType","sponsored","subchannel","cljVersion","cljNode"];function Jn(e){let{broker:t}=e;t.register("call for page analytics",(()=>(0,Y.ei)(n.g.PageCriteria,Yn)))}function Qn(e){let{broker:t}=e;t.on("page load",(()=>t.emit("send event to bidmax",{type:"page-load"})))}function ei(e){let{broker:t}=e;t.register("call for page analytics",(async()=>{if(!n.g.RTA||!n.g.RTA.ids||!n.g.RTA.ids.then)return{};try{const{user:e,visit:t}=await(0,et.yq)(3e3,n.g.RTA.ids,new Error),i={rta:{user:e}};if("string"==typeof t){const e=t.split(".");5===e.length&&(i.rta.visit=e[0])}return i}catch(e){return console.error("RTA.ids not available"),{}}}))}function ti(e){let{broker:t}=e;t.register("call for page analytics",(()=>Promise.resolve({localStorage:{total:Object.keys(localStorage).map((e=>localStorage.getItem(e))).reduce(((e,t)=>e+t.length),0),top10:Object.keys(localStorage).map((e=>[e,localStorage.getItem(e).length])).sort(((e,t)=>t[1]-e[1])).slice(0,10)}})))}Jn.isAdsFreeSupported=!0,Jn.ccpa={enabledIfDissent:!0},Jn.gdpr={enabledIfDissent:!0},Qn.isAdsFreeSupported=!0,Qn.ccpa={enabledIfDissent:!0},Qn.gdpr={enabledIfDissent:!0},ei.isAdsFreeSupported=!0,ei.ccpa={enabledIfDissent:!0},ei.gdpr={enabledIfDissent:!0},ti.isAdsFreeSupported=!0,ti.ccpa={enabledIfDissent:!0},ti.gdpr={enabledIfDissent:!0};const ni=(0,S.x)("timing"),ii=["navigationStart","responseEnd","domInteractive","domContentLoadedEventStart","domComplete","fetchStart"],ri={"first-paint":"paint","first-contentful-paint":"firstContentfulPaint"},ai=()=>{if(performance.getEntriesByType){const e=performance.getEntriesByType("paint").filter((e=>ri[e.name])).map((e=>[ri[e.name],Math.round(e.startTime)]));return Object.fromEntries(e)}},oi=()=>{if(!n.g.performance||!n.g.performance.timing||!n.g.performance.timing.navigationStart)return{};const e=[...ii.map((e=>[e,n.g.performance.timing[e]])).filter((e=>0!==e[1])),["adsBundleStart",adverts.startTime]].sort(((e,t)=>e[1]-t[1])),t=e[0],i=e.map((e=>[e[0],e[1]-t[1]])).reduce(((e,t)=>{let[n,i]=t;return{...e,[n]:i}}),{});return i[t[0]]=t[1],i};function si(e){let{broker:t}=e;const n=t.until("page network data").then((e=>{let[t]=e;return t.network}));t.on("page load",(async()=>{ni("page load happened, sending timing data to bidmax");const e=await(0,et.yq)(1e3,n).catch((()=>({}))),i={...oi(),...ai(),...e};ni("sending:",i),t.emit("send event to bidmax",{type:"page-load",payload:i})}))}si.isAdsFreeSupported=!0,si.ccpa={enabledIfDissent:!0},si.gdpr={enabledIfDissent:!0};class di{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"__ads_viewability";this.startTimestamp=e,this.key=t;const i=JSON.parse(n.g.localStorage.getItem(t)||"{}"),r=Object.keys(i.pending||{}).reduce(((e,t)=>({...e,[t]:{misses:((i.ready[t]||{}).misses||0)+1}})),{});this.state={ready:Object.keys(i.ready||{}).reduce(((e,t)=>({...e,[t]:{...i.ready[t],...e[t]}})),r),pending:{}}}save(){n.g.localStorage.setItem(this.key,JSON.stringify(this.state))}adRendered(e){if(this.state.pending[e]){const t=this.state.ready[e]||(this.state.ready[e]={});t.misses=(t.misses||0)+1}this.state.pending[e]=1,this.save()}adViewed(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();delete this.state.pending[e];const n=this.state.ready[e]||(this.state.ready[e]={});(n.views||(n.views=[])).push(t-this.startTimestamp),this.save()}snapshot(){const e=this.state.ready;return this.state.ready={},this.save(),e}}function li(e){let{broker:t,getConfig:i}=e;if(!n.g.localStorage)return;const r=i("viewability.waitBeforeForcing",3e3),a=new di(Date.now());let o;const s=function(){o&&(clearTimeout(o),o=void 0)},d=()=>{s(),o=setTimeout(l,r)},l=()=>{t.emit("send event to bidmax",{type:"ping"}),o=void 0},u=new Set;let c;t.on("ad rendered",(e=>a.adRendered(e))),t.on("ad viewable",(e=>{a.adViewed(e,Date.now()),"billboard"!==e&&!e.startsWith("sky_")||u.has(e)||(u.add(e),d())})),t.once("ad viewable",(e=>{c=!0,d()})),t.intercept("send to bidmax",((e,t)=>{let[n,i]=e;s();const r=a.snapshot();if((0,Y.xb)(r))return t();t(n,{...i,viewability:r,first:c}),c=void 0}))}li.ccpa={enabledIfDissent:!0},li.gdpr={enabledIfDissent:!0};var ui=n(9288),ci=n.n(ui);const pi=(0,S.x)("connection-type"),hi=async e=>{let{broker:t}=e;const n=ci()(navigator,"connection.type");pi("fetching edgedata from akamai");const i=await((e,t,n)=>{const i=new Headers;Object.keys(t).forEach((e=>{i.append(e,t[e])}));const r={method:"get",headers:i};return window.fetch("https://www.dailymail.co.uk/geo/edgedata.html",r)})(0,{pragma:"no-cache","cache-control":"no-cache"}).then((e=>e.text())).then((e=>e)),r={};i.match(/>(.*?)</g).forEach((e=>{const[t,n]=e.replace(/>|<|\s+/g,"").split(":");r[t]=n}));const a={connection:n,akamaiConnectionType:r.network_type,akamaiThroughput:r.throughput,akamaiNetwork:r.network};pi(a),t.emit("page network data",{network:a})};hi.isAdsFreeSupported=!0,hi.ccpa={enabledIfDissent:!0},hi.gdpr={enabledIfDissent:!0};const fi=hi;function gi(e){const{getConfig:t,log:n}=e;if(!t("plugins.enabled",[]).includes("trackers.pubcommon")||!t("amazon.pubcommon.enabled",!1))return n("PubCommonId is disabled"),{addPubcommonId:e=>e};(function(e){let{broker:t,getConfig:n}=e;window.pubcid_options={type:"cookie",create:!1};const i=n("amazon.pubcommon.pubcidScript","//www.dailymail.co.uk/static/mol-adverts/demo/mol-21682/dist/pubcid.min.js");return t.invoke("import script",i)})(e).catch(n.error);const i=(0,et.gb)((()=>(0,K.ej)("_pubcid")),300,t("amazon.pubcommon.loadTimeout",3e3)).then((e=>({"pubcid.org":e}))).catch((()=>({})));return{async addPubcommonId(e){const t=await i;return e.map((e=>({...e,slotParams:{...e.slotParams||{},...t}})))}}}(0,tt.fo)("bidders.33across",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.33across.display",{adUnits:{}}),r=n("slotDescriptions.initial",{}),a=(0,ne.DZ)((e=>{let[t,n]=e;return!!(n.sizes||r[t]&&r[t].size)}),(e=>{let[t,n]=e;return{code:t,siteId:n.siteId,sizes:n.sizes||r[t]&&r[t].size}}),Object.entries(i.adUnits)).map((e=>{let{code:t,siteId:n,sizes:i}=e;return{code:t,bids:[{bidder:"33across",params:{siteId:n,productId:"siab"}}],mediaTypes:{banner:{sizes:i}}}}));t.register("provide prebid adUnits",(()=>a))}}),(0,tt.fo)("bidders.adform.v2.display",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.adform.adxDomain","adx.adform.net"),a=Object.entries(n("plugins.bidders.adform.v2.display.adUnits",{})).map((e=>{let[t,{mid:i,sizes:a}]=e;return{code:t,bids:[{bidder:"adf",params:{adxDomain:r,mid:i}}],mediaTypes:{banner:{sizes:a||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(a),t.register("provide prebid adUnits",(()=>a))},vendorIds:{gdpr:[50]}});const mi="mol.ads.cmp.consent",vi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise(((n,i)=>{Si()(e,t,((r,a)=>{a?n(r):i(new Error(`Failed to call __cmp(${e}, ${t})`))}))}))},yi=(0,nn.ri)((()=>vi("hasConsentedToAll"))),bi=(0,nn.ri)((()=>vi("hasChoiceBeenMade"))),_i=()=>Ii()&&(0,T.U2)("plugins.enabled").includes("cmp")&&(0,T.U2)("cmp.enable.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))),Ti=()=>"US"===PageCriteria.geo,wi=()=>"CA"===n.g.PageCriteria.region,Si=()=>n.g.__uspapi,ki=()=>null!==localStorage.getItem("mol.ads.cmp.consent"),Ii=()=>(0,T.U2)(Ti()?"ccpa.scriptBase":"cmp.scriptBase"),Ci={},Ei={},Ai={sticky_banner_gallery_top:"sticky_banner_gallery_top",sticky_banner_gallery_bottom:"sticky_banner_gallery_bottom",jw_video_desktop:"jwplayer",jw_video_tablet:"jwplayer",jw_video_mobile:"jwplayer",ctp_video_desktop:"video",ctp_video_tablet:"video",ctp_video_mobile:"video",ap_video_desktop:"video",ap_video_tablet:"video",ap_video_mobile:"video"},Pi=e=>{const{width:t,height:n}=(0,K.ap)(),i=e.sizeMapping?(0,sn.T3)(e.sizeMapping,e.sizes,[t,n]):e.sizes,{slotID:r}=e;return{slotID:r,sizes:i}};async function xi(e,t){const{log:i,getConfig:r,broker:a,pApstagInitialised:o,addPubcommonId:s}=e,d=r("amazon.priceLookup","/abe/a9/price"),l=r("auction.maxTime",2e3);i("requesting bids for:",t.map((e=>{let{slotID:t}=e;return t})).join(", "));const u={};let c=t.filter((e=>e));c.forEach((e=>{let{slotID:t}=e;(Ci[t]||(Ci[t]=[])).push(new Promise((async e=>{u[t]=e})))})),c=await s(c),o.then((()=>{n.g.apstag.fetchBids({slots:c,timeout:l},(async e=>{i("bids response for:",e.map((e=>e.slotID)),e);let{noBids:t,realBids:n}=e.reduce(((e,t)=>{let{noBids:n,realBids:i}=e;return function(e){const t=e.amznbid&&!("1"===e.amznbid||"2"===e.amznbid),n=e.targeting&&e.targeting.amznbid&&!("1"===e.targeting.amznbid||"2"===e.targeting.amznbid);return t||n}(t)?i.push(t):n.push(t),{realBids:i,noBids:n}}),{noBids:[],realBids:[]});n&&n[0]&&n[0].targeting&&(n=n.map((e=>{const{targeting:t,...n}=e;return{...n,...t}}))),n&&n[0]&&i("bids targeting unwrapped:",n);const r=(await Promise.all(n.map((e=>e.amznbid?kt({url:`${d}/${e.amznbid}`}):0)))).map(Number.parseFloat);await function(e,t){const{broker:n,log:i}=e;t.map((async e=>{try{const{cpm:t,bid:r,...a}=e,{sizes:o=[]}=a;if(t>=0){const e=Ai[r.slotID]||r.slotID,s=!!r.amzndeals,d=o.map((e=>{let[t,n]=e;return`${t}x${n}`})),l={bidder:"tia",cpm:Math.floor(100*t),amazonDeal:s,requestSizes:d,...a};i("broadcast bid received",e,l),n.emit("bid",e,l)}else i.warn(`Invalid lookup value ${t} for code ${r.amznbid}`)}catch(t){i.error("error broadcasting slot:",e,t)}}))}({broker:a,log:i},n.map(((e,t)=>({...c.find((t=>{let{slotID:n}=t;return n===e.slotID})),cpm:r[t],bid:e})))),n.forEach(((e,t)=>{const n={cpm:r[t],bid:e};return i(`bid for ${e.slotID}:`,n),(0,u[e.slotID])(n)})),t.forEach((e=>(i(`no bid for ${e.slotID}`),(0,u[e.slotID])({}))))}))}))}async function Oi(e,t){let{pos:n,id:i}=t;const{log:r}=e;let a=Ci[i]&&Ci[i].shift();if(!a){if(r(`No available bid for '${i}', requesting new one`),xi(e,[Pi(Ei[i]||Ei[n])]),!Ci[i])return r("no bid promise for id",i),Promise.resolve({});a=Ci[i].shift()}return r(`Taking bid for '${i}':`,a),a}function Di(e){let{pos:t,dfpPos:n,isTemplate:i,id:r,size:a}=e;Ei[t]={...Ei[t],slotID:r,sizes:a},i&&(Ei[t].slotName=n)}async function Ri(e,t){const{broker:n,log:i}=e;try{var r,a;const e=(0,Y.Ev)(await(0,et.yq)(1e3,n.invoke("get IrisTV tags",t),`Failed to get IrisTV tags for videoId ${t} in 1000ms`),{irisid:"iris_id",iriscat:"categories"});return e.iriscat=null===(r=(a=e.iriscat).join)||void 0===r?void 0:r.call(a,","),e}catch(e){return i.error(e),{}}}function Li(e){if(!e||!e.bid)return{};const t=e.bid.helpers.qsParams();return t?t.replace(/^&/,"").split("&").reduce(((e,t)=>{const[n,i]=t.split("=");return e[n]=i,e}),{}):{}}(0,tt.fo)("bidders.amazon",{run:function(e){!async function(e){const{broker:t,getConfig:n,log:i}=e,r=n("slots.enabled",{}),a=n("plugins.enabled").includes("irisTv"),o=n("slotDescriptions.initial",{}),s=Object.entries(r).filter((e=>{let[t,n]=e;return"immediate"===n.type})).map((e=>{let[t,n]=e;return t})),d=(0,Y.ei)(o,s.filter((e=>o[e]&&o[e].earlyBidding))),l=function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("amazon.deal",!0);let a;return Ti()&&(i("In CCPA"),a=vi("getUSPData")),t.invoke("load script","//c.amazon-adsystem.com/aax2/apstag.js","apstag").then((async e=>{if(!e)return void i.warn("Could not load apstag");const t={pubID:"3065",adServer:"googletag",videoAdServer:"DFP",deals:r};try{a&&(t.params={us_privacy:(await(0,et.yq)(n("amazon.millisWaitForUspData",1500),a)).uspString},i(t))}catch(e){i.warn("Error while calling getUSPData, us_privacy will be omitted",e)}e.init(t)}))}(e);e.pApstagInitialised=l,[{pos:"jwplayer",configItem:"amazonPreroll.jwplayer"},{pos:"video.ap",configItem:"amazonPreroll.auto-play"},{pos:"video.ctp",configItem:"amazonPreroll"}].forEach((e=>{let{pos:t,configItem:i}=e;const{slotId:r}=n(i);r&&(Ei[t]={slotID:r,mediaType:"video"})})),Object.values(d).forEach((e=>{i("creating slot for",e.id,e.pos),Di(e)})),t.register("get tags",(async t=>{let{slot:n}=t;const r=n.dfpPos||n.pos,a=n.id;Ei[r]||(i("creating slot for",n.id,n.pos),Di(n)),Ai[a]=r;try{const t=await Oi(e,{id:a,pos:r}),n=Li(t);return i(`display params for ${r}`,n),(0,Y.xb)(n)?{}:{type:"bid",pos:r,cpm:Math.round(100*t.cpm)/100,bidderCode:"tia",tags:n}}catch(e){i.error(e)}})),t.on("prepare to refresh ads",(t=>{const n=t.map((e=>Ei[e]));i("preparing to refresh:",n),xi(e,n)})),t.register("get video tags",(async t=>{let{slot:{pos:n},autoplay:r,platform:o="dmplayer",offset:s=0,videoId:d,auctionId:l}=t;const u="jwplayer"===n?n:r?"video.ap":"video.ctp",c={...Ei[u],platform:o,offset:s,slotParams:d&&a?await Ri(e,d):{}};i(`get video tags, auctionId: ${l}, offset: ${s}, slotId: ${c.slotID}`),xi(e,[c]);const p=await Oi(e,{pos:u,id:c.slotID});i(`bid response auctionId: ${l}, offset: ${s}, slotId: ${c.slotID}`,p);const h=Li(p);return i(`video params, auctionId: ${l}, offset: ${s}, slotId: ${c.slotID}`,h),(0,Y.xb)(h)?{}:{type:"bid",pos:u,offset:s,auctionId:l,cpm:Math.round(100*p.cpm)/100,bidderCode:"tia",tags:{cust_params:h}}})),function(e,t){const{log:n}=e,i=t.map((e=>[e,Ei[e]])).filter((e=>{let[,t]=e;return t})).filter((e=>{let[,t]=e;return!Ci[t.slotID]}));i.length?(n("early bidding for",i.map((e=>{let[t,n]=e;return`pos: ${t}, id: ${n.slotID}`}))),i.forEach((e=>{let[t,n]=e;Ai[n.slotID]=t})),xi(e,i.map((e=>{let[t,n]=e;return n})))):n("no early bidding")}(e,Object.keys(d))}({...e,...gi({...e,log:e.log.extend("pubcommon")})})},vendorIds:{gdpr:[793]},purposeIds:{gdpr:[1]}});const Mi=e=>e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>{const[t,n]=e.split("x",2);return[parseInt(t),parseInt(n)]}));(0,tt.fo)("bidders.appnexusPSP",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},async run(e){let{broker:t,getConfig:i,log:r}=e;const a=Object.entries(i("plugins.bidders.appnexus.display.adUnits",{})).filter((e=>{let[t]=e;return!!i(`slotDescription.${t}`)})).map((e=>{let[t,n]=e;return{code:t,bids:[{bidder:"appnexus",params:{placementId:n.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:Mi(n)}}}}));r.extend("display ad units")(a),t.register("provide prebid adUnits",(()=>a));const o=i("plugins.bidders.appnexus.video.adUnits",{}),s={area:[n.g.adAreaId]};t.register("provide video adUnits",(async(e,t)=>{const n="object"==typeof o[e]&&o[e][t?"autoplay":"ctp"]?o[e][t?"autoplay":"ctp"]:"string"==typeof o[e]?o[e]:"";if(!n)return{};const[i,r]=n.trim().split(/\s+/);return{bids:[{bidder:"appnexus",params:{accountId:i,placementId:r,keywords:s,video:{skipable:!1,playback_methods:t?["auto_play_sound_off"]:["click_to_play"]}}}]}}))}});const Ui=(K.SP.debugBidder||"").split(",").map((e=>e.trim()))||[];function ji(e){return e.match(/(\d+x\d+,?\s*)+$/g)[0].trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}const Ni=(e,t)=>{const{width:n}=(0,K.ap)(),{adUnits:i={},wideSkiesAdUnits:r}=e(t,{adUnits:{}});let a=i;return n>=1580&&r&&(a={...i,...r}),a};function Bi(e,t,n){const i=[],r=(t,r)=>i.push({code:t,bids:[{bidder:e,params:n(r,t)}],mediaTypes:{banner:{sizes:ji(r)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>r(e,t))):r(e,n)})),i}function Fi(e,t,n){const i=[],r=(t,r)=>i.push({code:t,bids:[{bidder:e,params:n(r.split(" ").filter((e=>e)),t)}],mediaTypes:{banner:{sizes:ji(r)}}});return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>r(e,t.trim()))):r(e,n)})),i}function qi(e){if(function(e){const t=t=>{throw new Error(`providePrebidDisplayConfig error for '${e.bidder}': ${t}`)};("object"!=typeof e||Array.isArray(e))&&t("`config` must be an object."),["broker","getConfig","configKeys","bidder"].forEach((n=>{e[n]||t(`'config' must contain mandatory key '${n}'.`)}));const n={adapterName:n=>{"string"!=typeof n&&t("`adapterName` must be a string."),e.aliasedName||t("with `adapterName`, `aliasedName` is mandatory.")},aliasedName:n=>{"string"!=typeof n&&t("`aliasedName` must be a string."),e.adapterName||t("with `aliasedName`, `adapterName` is mandatory.")},broker:e=>{e instanceof w.Jj||t("`broker` must be an instance of the class `Broker`.")},getConfig:e=>{"function"!=typeof e&&t("`getConfig` error: must be a function.")},configKeys:e=>{("string"!=typeof e&&!Array.isArray(e)||Array.isArray(e)&&e.find((e=>"string"!=typeof e)))&&t("`configKeys` must be a string or an array of strings.")},configKey:e=>{"string"!=typeof e&&t("`configKey` must be a string.")},bidder:e=>{"string"!=typeof e&&t("`bidder` must be a string.")},chance:e=>{isNaN(e)&&t("`chance` must be a number.")},getBidsParams:e=>{"function"!=typeof e&&t("`getBidParams` must be a function.")},bidderSettings:e=>{const n="`bidderSettings` must be an Object or an array of Objects { key : <String>, val: <Function> }.";"object"==typeof e||Array.isArray(e)||t(n);const i=e=>{const i=["key","val"];Object.entries(e).forEach((e=>{let[r,a]=e;i.find((e=>e===r))||t(n),"key"===r&&"string"!=typeof a&&t(n),"val"===r&&"function"!=typeof a&&t(n)}))};"object"!=typeof e||Array.isArray(e)||i(e),Array.isArray(e)&&e.forEach((e=>i(e)))}};Object.entries(e).forEach((e=>{let[t,i]=e;n[t]&&n[t](i)}))}(e),e.chance&&e.chance<=Math.random())return;const{broker:t,getConfig:n,configKeys:i,bidder:r,paramsPerSize:a,getBidsParams:o}=e,s=a?Vi:Fi;let d=null;const l={};if(Array.isArray(i)){if(d=[],d=i.map((e=>(l[e]=Ni(n,e),d.concat(s(r,l[e],o))))),!d.length)return!1}else{if(l[i]=Ni(n,i),(0,Y.xb)(l[i]))return!1;d=s(r,l[i],o)}return function(e,t,n,i){const{bidder:r}=t;Ui.find((e=>"*"===e||e===r))&&(console.log(`--------------\x3e ${r} configs <--------------`),[...t.configKeys||t.configKey].forEach((t=>{console.log(`-> ${t}:`,e(t))})),console.log(`--------------\x3e ${r} adUnits <--------------`),Object.entries(n).forEach((e=>{let[t,n]=e;console.log(`-> ${t}:`,n)})),console.log(`--------------\x3e ${r} prebid config <--------------`),console.log("->",i))}(n,e,l,d),t.register("provide prebid adUnits",(()=>d)),function(e){let{adapterName:t,aliasedName:n,broker:i}=e;t&&n&&i.register("provide bidder alias",(()=>({adapterName:t,aliasedName:n})))}(e),function(e){let{broker:t,bidderSettings:n,bidder:i,adapterName:r,aliasedName:a}=e;if(n){const e=r&&a||i;t.register("prebid reduce bidderSettings",(t=>(t[e]=t[e]||{},t[e].adserverTargeting=t[e].adserverTargeting||[],Array.isArray(n)?t[e].adserverTargeting.concat(n):t[e].adserverTargeting.push(n),t)))}}(e),function(e){let{bidder:t,asyncUpdate:n,broker:i}=e;n&&i.emit("prebid config async update",{[t]:n})}(e),!0}function Vi(e,t,n){const i=[],r=(t,r)=>{const a=ji(r);i.push({code:t,bids:a.map((i=>({bidder:e,params:n(r.split(" ").filter((e=>e)),i,t)}))),mediaTypes:{banner:{sizes:a}}})};return Object.keys(t).forEach((e=>{const n=t[e];Array.isArray(n)?n.forEach((t=>r(e,t))):r(e,n)})),i}(0,tt.fo)("bidders.appnexusOutstream",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[32]},run(e){let{broker:t,getConfig:i,queryParams:r}=e;const a=r["mol.ads.appNexus.debug"],o=r.testmode,s={area:[n.g.adAreaId],...o?{testmode:o.split(",")}:void 0},{adUnits:d}=i("plugins.bidders.appnexus.outstream",{adUnits:[]});(0,Y.xb)(d)||t.register("provide prebid adUnits",(()=>function(e,t,n,i){const r=[],o=(t,n)=>{return r.push({code:t,bids:[{bidder:"appnexus",params:(i=n.split(" ").filter((e=>e)),o=t,{placementId:i[0],keywords:{...a?{pos:o}:void 0,...s}})}],mediaTypes:{video:{...e("plugins.slots.outstream.default.mediaTypes.video",{}),playerSize:ji(n)[0]}}});var i,o};return Object.keys(n).forEach((e=>{const t=n[e];Array.isArray(t)?t.forEach((t=>o(e,t.trim()))):o(e,t)})),r}(i,0,d)))}});const Hi={admantx:e=>({"ias-bps":e.map(String)}),airgrid:e=>({perid:e.slice(0,100).map(String)})};function zi(e){return e.reduce(((e,t)=>{let[n,i]=t;const r=Hi[n];return r?{...e,...r(i)}:e}),{})}(0,tt.fo)("bidders.appnexus",{run:function(e){let{broker:t,getConfig:i,log:r}=e,{adUnits:a,wideSkiesAdUnits:o}=i("plugins.bidders.appnexus.display",{adUnits:[]});const s=i("plugins.appnexus.dependenciesTimeout",2e3),d=i("plugins.bidders.appnexus.dmps",["airgrid","admantx"]);(0,Y.xb)(a)||t.register("provide prebid adUnits",(async()=>{r("providing prebid adUnits");const e=zi((d.length?await Promise.all(d.map((async e=>{const n=(await t.invokeAll({message:["dmp",e],timeout:s}))[0];return n&&[e,n]}))):[]).filter((e=>e)));r("dmpData",e);const i={area:[n.g.adAreaId],...e};$i&&o&&(a={...a,...o});const l=Object.entries(a).map((e=>{let[t,n]=e;return(Array.isArray(n)?n:[n]).map((e=>((e,t,n)=>({code:t,bids:[{bidder:"appnexus",params:{keywords:e,placementId:n.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:Gi(n)}}}))(i,t,e)))})).flat();return r("adUnits",l),l}))},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}});const{width:Wi}=(0,K.ap)(),$i=Wi>1580,Gi=e=>e.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))));(0,tt.fo)("bidders.appnexusSkin",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("plugins.appnexus.minWidth",1224),o=i("plugins.appnexus.skin",Ki);if(r("config:",{minWidth:a,adUnits:o}),n.g.innerWidth<a)return void r("bailing, viewport width too small:",n.g.innerWidth);const s=o.map((e=>{let{bids:t}=e;return t.map((e=>{let{params:{placementId:t}}=e;return t}))})).flat();r("known skins:",s);const d=new Set(s);t.register("provide prebid adUnits",(()=>o));const l={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"appnexus"===t&&n.forEach((e=>{let{bidId:t,params:{placementId:n}}=e;l[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.appnexus||(e.appnexus={}),e.appnexus.adserverTargeting||(e.appnexus.adserverTargeting=[]),e.appnexus.adserverTargeting.push({key:"hb_skin",val:e=>{const t=l[e.requestId];return d.has(t)}}),e)))},vendorIds:{gdpr:[32]}});const Ki=[{code:"billboard",mediaTypes:{banner:{sizes:[[970,250],[728,90]]}},bids:[{bidder:"appnexus",params:{placementId:19451012}}]}];(0,tt.fo)("bidders.groupm.v2.display",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Math.random(),a=n("plugins.bidders.groupm.v3.chance",.1);if(i(`groupm chance: ${r}, 'request? ${r<a}`),a<=r)return void i("chance condition not met, bailing");const o=Object.entries(n("plugins.bidders.groupm.v3.adUnits",{})).map((e=>{let[t,{placementId:i,sizes:r}]=e;return{code:t,bids:[{bidder:"groupm",params:{placementId:i.toString()}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(o),t.register("provide prebid adUnits",(()=>o)),t.register("prebid reduce bidderSettings",(e=>(e.groupm||(e.groupm={}),e.groupm.adserverTargeting||(e.groupm.adserverTargeting=[]),e.groupm.adserverTargeting.push({key:"hb_deal_groupm"}),e)))},vendorIds:{gdpr:[98]}}),(0,tt.fo)("bidders.collectiveImprove",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.collectiveImprove.display",{adUnits:{}});if((0,Y.xb)(i))return;const r=Bi("collectiveImprove",i,(e=>({placementId:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>r)),t.register("provide bidder alias",(()=>({adapterName:"improvedigital",aliasedName:"collectiveImprove"}))),t.register("prebid reduce bidderSettings",(e=>(e.collectiveImprove=e.collectiveImprove||{},e.collectiveImprove.adserverTargeting=e.collectiveImprove.adserverTargeting||[],e.collectiveImprove.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[179]}}),(0,tt.fo)("bidders.improveDisplay",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[179]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.improveDisplay",[]).map((e=>{var t;return{code:e.code,mediaTypes:{banner:{sizes:e.sizes||(null===(t=(0,Le.get)(e.code))||void 0===t?void 0:t.size)}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId}}]}}));i.extend("adUnits")(r),t.register("provide prebid adUnits",(()=>r))}}),(0,tt.fo)("bidders.improveSkins",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[179]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.improveSkins",[]).map((e=>{var t;return{code:e.code,mediaTypes:{banner:{sizes:e.sizes||(null===(t=(0,Le.get)(e.code))||void 0===t?void 0:t.size)}},bids:[{bidder:"improvedigital",params:{placementId:e.placementId}}]}}));i.extend("adUnits")(r),t.register("provide prebid adUnits",(()=>r)),t.register("prebid reduce bidderSettings",(e=>{var t;return{...e,improvedigital:{...e.improvedigital||{},adserverTargeting:[...(null===(t=e.improvedigital)||void 0===t?void 0:t.adserverTargeting)||[],{key:"hb_skin",val:()=>!0}]}}}))}}),(0,tt.fo)("bidders.ix.v2.display",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Object.entries(n("plugins.bidders.ix.v2.display.adUnits",{})).map((e=>{let[t,{siteId:i,sizes:r}]=e;return{code:t,bids:[{bidder:"ix",params:{siteId:i}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(r),t.register("provide prebid adUnits",(()=>r))},vendorIds:{gdpr:[10]}}),(0,tt.fo)("bidders.justPremium",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.justpremium.display",{adUnits:{}});if((0,Y.xb)(i))return;const r=Bi("justpremium",i,(e=>({zone:e.split(" ")[0]})));t.register("provide prebid adUnits",(()=>r)),t.register("prebid reduce bidderSettings",(e=>(e.justpremium=e.justpremium||{},e.justpremium.adserverTargeting=e.justpremium.adserverTargeting||[],e.justpremium.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e)))},vendorIds:{gdpr:[62]}}),(0,tt.fo)("bidders.kargo",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.kargo.display",{adUnits:[]}),r=e=>({code:e,bids:[{bidder:"kargo",params:{placementId:i[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:i[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(t.invoke("load script","https://storage.cloud.kargo.com/ad/network/klick/klick-dailymail.js",null,{},(()=>!0)),!(0,Y.xb)(i)){const e=Object.keys(i).map(r);t.register("provide prebid adUnits",(()=>e))}},vendorIds:{gdpr:[972]}}),(0,tt.fo)("bidders.mediagrid.v2.display",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Object.entries(n("plugins.bidders.mediagrid.v2.display.adUnits",{})).map((e=>{let[t,{sizes:i,uid:r}]=e;return{code:t,bids:[{bidder:"grid",params:{uid:r}}],mediaTypes:{banner:{sizes:i||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(r),t.register("provide prebid adUnits",(()=>r))},vendorIds:{gdpr:[32]}});const Xi=e=>Array.isArray(e)&&2===e.length;class Zi{constructor(e){this.adsDescriptions=e;const{width:t,height:n}=(0,K.ap)();this.browserWidth=t,this.browserHeight=n}getSizes(e){const t=this.adsDescriptions[e];if(t)return t.sizeMapping?(0,sn.T3)(t.sizeMapping,t.size,[this.browserWidth,this.browserHeight]):t.size.filter(Xi)}}const Yi=MobileUtils.isMobile()?{sticky_banner:1420432285}:{billboard:1420432282,sky_right_top:1420432283,sky_left_top:1420432284};(0,tt.fo)("bidders.ozone",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[524]},run(e){let{broker:t,getConfig:n,pageCriteria:i={},log:r}=e;const a=new Zi(n("slotDescriptions.initial",{})),o=n("plugins.bidders.ozone.publisherId","OZONEDMGT002"),s=n("plugins.bidders.ozone.siteId","4204204250"),d=Object.entries(n("plugins.bidders.ozone.display.adUnits",Yi)).map((e=>{let[t,r]=e;return{code:t,mediaTypes:{banner:{sizes:n(`slotDescription.${t}.size`,a.getSizes(t))}},bids:[{bidder:"ozone",params:{placementId:r,publisherId:o,siteId:s,customData:[{settings:{},targeting:{page:`${i.pageType}:${i.channel}`}}]}}]}}));t.register("provide prebid adUnits",(()=>(r.info("adUnits",d),d)))}}),(0,tt.fo)("bidders.pubmatic",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:i,log:r}=e;const{width:a}=(0,K.ap)(),o=a>1580;let{adUnits:s,wideSkiesAdUnits:d,publisherId:l}=i("plugins.bidders.pubmatic.display.v2",{adUnits:{},wideSkiesAdUnits:[]});if(o&&d&&(s={...s,...d}),r.extend("ad units")(s),(0,Y.xb)(s))return;const u=Bi("pubmatic",s,(e=>({publisherId:`${l}`,adSlot:e.split(" ")[0],dctr:`area=${n.g.adAreaId}`})));t.register("provide prebid adUnits",(()=>u)),t.register("prebid reduce bidderSettings",(e=>{const t=i("plugins.bidders.pubmatic.display.netMultiplier",.93);return e.pubmatic||(e.pubmatic={}),e.pubmatic.bidCpmAdjustment=(e,n)=>e*t,e}))}}),(0,tt.fo)("bidders.rhythmOne",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.rhythmOne.adUnits",{}),a=new Zi(n("slotDescriptions.initial",{})),o=Object.entries(r).map((e=>{let[t,{placementId:n,sizes:r}]=e;const o=r||a.getSizes(t);if(o)return{code:t,sizes:o,mediaTypes:{banner:{sizes:o}},bids:[{bidder:"rhythmone",params:{placementId:n}}]};i(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>o))},vendorIds:{gdpr:[36,162]}}),(0,tt.fo)("bidders.rubiMM2",{purposeIds:{gdpr:[1]},run:function(e){let{getConfig:t,broker:i,log:r}=e;const{width:a}=(0,K.ap)(),o=a>1580;let{accountId:s,siteId:d,adUnits:l,wideSkiesAdUnits:u}=t("plugins.bidders.rubiMM2.display",{adUnits:{},wideSkiesAdUnits:[]});if(r("adUnits",l),(0,Y.xb)(l))return;o&&u&&(l={...l,...u});const c=Bi("rubi_mm2",l,(e=>{const t={area:[n.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:d.toString(),accountId:s.toString()}}));r("transformed",c),i.register("provide prebid adUnits",(()=>c)),i.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm2"}))),i.emit("prebid config async update",{rubi_mm2:{singleRequest:!0}})},vendorIds:{gdpr:[52]}}),(0,tt.fo)("bidders.sharethrough.v2.display",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=Object.entries(n("plugins.bidders.sharethrough.v2.display.adUnits",{}));i("adUnitConfig",r);const a=r.filter((e=>{let[t]=e;return n(`slotDescriptions.initial.${t}`)})).map((e=>{let[t,{pkey:i,sizes:r}]=e;return{code:t,bids:[{bidder:"sharethrough",params:{pkey:i}}],mediaTypes:{banner:{sizes:r||n(`slotDescriptions.initial.${t}.size`,[])}}}}));i.extend("adUnitTemplates")(a),t.register("provide prebid adUnits",(()=>a));const o=a.reduce(((e,t)=>{let{code:n,mediaTypes:{banner:{sizes:i}}}=t;return{...e,[n]:Ji(i).join("x")}}),{});i("largestSizeForPos",o),t.register("prebid reduce bidderSettings",(e=>(e.sharethrough||(e.sharethrough={}),e.sharethrough.adserverTargeting||(e.sharethrough.adserverTargeting=[]),e.sharethrough.adserverTargeting.push({key:"hb_size",val:e=>(null==o?void 0:o[e.adUnitCode])||e.size}),e)))},vendorIds:{gdpr:[80]}});const Ji=e=>e.sort(((e,t)=>{let[n,i]=e,[r,a]=t;return r*a-n*i}))[0];(0,tt.fo)("bidders.smartAdServer",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.smartAdServer.adUnits",{}),a=new Zi(n("slotDescriptions.initial",{})),o=n("plugins.bidders.smartAdServer.siteId",395440),s=n("plugins.bidders.smartAdServer.pageId",1352205),d=Object.entries(r).map((e=>{let[t,{formatId:n,sizes:r}]=e;const d=r||a.getSizes(t);if(d)return{code:t,sizes:d,mediaTypes:{banner:{sizes:d}},bids:[{bidder:"smartadserver",params:{formatId:n,pageId:s,siteId:o}}]};i(`no adDescription for pos: ${t}`)})).filter((e=>e));t.register("provide prebid adUnits",(()=>d))},vendorIds:{gdpr:[45]}}),(0,tt.fo)("teads-cookieless",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[132]},run:function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("plugins.bidders.teads.tagId","PUB_7442");r("tagId:",a),n.g.teads_analytics=n.g.teads_analytics||{},n.g.teads_analytics.analytics_tag_id=a,n.g.teads_analytics.share=n.g.teads_analytics.share||function(){const e=n.g.teads_analytics.shared_data=n.g.teads_analytics.shared_data||[];r("share current:",e),r("share adding:",arguments),e.push(arguments)},t.emit("import script","//a.teads.tv/analytics/tag.js",{async:!0})}});const{width:Qi}=(0,K.ap)(),er=Qi>1580;function tr(e){let{broker:t,getConfig:n}=e,{adUnits:i,wideSkiesAdUnits:r}=n("plugins.bidders.adyoulike.display",{adUnits:[]});const a=e=>({code:e,bids:[{bidder:"adyoulike",params:{placement:i[e].split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:i[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(er&&r&&(i={...i,...r}),!(0,Y.xb)(i)){const e=Object.keys(i).map(a);t.register("provide prebid adUnits",(()=>e))}}function nr(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.verizon.display",{}),r=i.adUnits&&Object.entries(i.adUnits).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"brightroll",params:{publisher:"dailymail"}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));r&&r.length>0&&t.register("provide prebid adUnits",(()=>r))}function ir(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.collective564.display",{adUnits:{}}).adUnits,r=[];(0,Y.xb)(i)||(Object.keys(i).map((e=>{r.push(((e,t)=>({code:e,bids:[{bidder:"collective564",params:{placementId:t.split(" ")[0].trim(),usePaymentRule:!0}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}}))(e,i[e]))})),t.register("provide prebid adUnits",(()=>r)),t.register("provide bidder alias",(()=>({adapterName:"appnexus",aliasedName:"collective564"}))),t.register("prebid reduce bidderSettings",(e=>(e.collective564=e.collective564||{},e.collective564.adserverTargeting=e.collective564.adserverTargeting||[],e.collective564.adserverTargeting.push({key:"hb_skin",val:e=>!0}),e))))}function rr(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.criteo.v2.networkId",10352);let r=n("plugins.bidders.criteo.v2.display",{});const{width:a}=(0,K.ap)();r=a>1580&&r.wideSkiesAdUnits?{...r.adUnits,...r.wideSkiesAdUnits}:r.adUnits;const o=Object.entries(r).map((e=>{let[t,n]=e;return((e,t)=>({code:e,bids:[{bidder:"criteo",params:{networkId:i,publisherSubId:e}}],mediaTypes:{banner:{sizes:t}}}))(t,n)}));t.register("provide prebid adUnits",(()=>o))}function ar(e){let{broker:t,getConfig:n}=e;if(n("plugins.bidders.groupm.skin.chance",.1)<=Math.random())return;const i=n("plugins.bidders.groupm.skin.adUnits",[]);i.length&&t.register("provide prebid adUnits",(()=>i))}function or(e){let{broker:t,getConfig:i}=e;(new n.g.Image).src="https://e.serverbid.com/udb/9969/match?redir=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fpool%2Fset%2Fi.gif%3FpoolId%3D9969%26poolKey%3D";const r=document.createElement("iframe");r.style.display="none";const a=document.cookie.match("(^|;)\\s*MFADUser\\s*=\\s*([^;]+)"),o=a?a.pop():"",s="https://mfad.inskinad.com/udb/9874/sync/i.gif?partnerId=1"+(o&&"&userKey="+o||"")+"&userId=";var d;let l,u;r.src="https://ssum-sec.casalemedia.com/usermatch?s=184665&cb="+encodeURIComponent(s),d=function(){document.body.appendChild(r)},(document.attachEvent?"complete"===document.readyState:"loading"!==document.readyState)?d():document.addEventListener("DOMContentLoaded",d);try{l=n.g.top.screen.width,u=n.g.top.screen.height}catch(e){}if(!l||!u)return;const{adUnits:c}=i("plugins.bidders.inskin.display",{adUnits:null});if(!c)return;const p=e=>({code:e,bids:[{bidder:"inskin",params:{networkId:c[e].split(" ")[0].trim(),siteId:c[e].replace(/^[^\s]+\s+([^\s]+) .+$/,"$1").trim(),keywords:"",properties:{screenWidth:l,screenHeight:u,target:1244}}}],mediaTypes:{banner:{sizes:c[e].replace(/^[^\s]+\s*[^\s]+\s*(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(!(0,Y.xb)(c)){const e=Object.keys(c).map(p);t.register("provide prebid adUnits",(()=>e))}}function sr(e){let{broker:t,getConfig:n}=e;const{adUnits:i,delDomain:r}=n("plugins.bidders.openx.display.v2",{adUnits:[]}),a=e=>({code:e,bids:[{bidder:"openx",params:{unit:i[e].split(" ")[0].trim(),delDomain:r}}],mediaTypes:{banner:{sizes:i[e].replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(r&&!(0,Y.xb)(i)){const e=Object.keys(i).map(a);t.register("provide prebid adUnits",(()=>e))}}function dr(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.pxyz.display",{adUnits:{}}),r=(e,t)=>({code:e,bids:[{bidder:"pxyz",params:{placementId:t.split(" ")[0].trim()}}],mediaTypes:{banner:{sizes:t.replace(/^[^\s]+\s(.+)$/,"$1").trim().split(",").map((e=>e.split("x").map((e=>parseInt(e)))))}}});if(!(0,Y.xb)(i)){const e=[];Object.entries(i).map((t=>{let[n,i]=t;"string"==typeof i?e.push(r(n,i)):i.forEach((t=>{e.push(r(n,t))}))})),t.register("provide prebid adUnits",(()=>e))}}tr.vendorIds={gdpr:[259]},tr.purposeIds={gdpr:[1]},nr.vendorIds={gdpr:[25]},nr.purposeIds={gdpr:[1]},ir.vendorIds={gdpr:[179]},ir.purposeIds={gdpr:[1]},rr.vendorIds={gdpr:[91]},rr.purposeIds={gdpr:[1]},ar.vendorIds={gdpr:[98]},ar.purposeIds={gdpr:[1]},or.vendorIds={gdpr:[150]},or.purposeIds={gdpr:[1]},sr.vendorIds={gdpr:[69]},sr.purposeIds={gdpr:[1]},dr.vendorIds={gdpr:[490]},dr.purposeIds={gdpr:[1]};const{width:lr}=(0,K.ap)(),ur=lr>1580;function cr(e){let{broker:t,getConfig:i}=e,{accountId:r,siteId:a,adUnits:o,wideSkiesAdUnits:s,atf:d}=i("plugins.bidders.rubicon.display.v2",{adUnits:{},wideSkiesAdUnits:{},atf:[]});if(d=new Set(d),(0,Y.xb)(o))return;ur&&s&&(o={...o,...s});const l=Bi("rubicon",o,((e,t)=>{const i={area:[n.g.adAreaId]},o={zoneId:e.split(" ")[0],inventory:i,siteId:a.toString(),accountId:r.toString()};return d.has(t)&&(o.position="atf"),o}));t.register("provide prebid adUnits",(()=>l)),t.emit("prebid config async update",{rubicon:{singleRequest:!0}})}function pr(e){let{broker:t,getConfig:i}=e,r=new Set;const a=i("plugins.rubicon.skin",{});a.adUnits&&a.adUnits.length&&((e=>{for(const t of e)for(const e of t.bids)"rubicon"===e.bidder&&((0,Y.ns)(["params","inventory"],e).area=[n.g.adAreaId])})(a.adUnits),r=new Set((e=>e.adUnits.reduce(((e,t)=>(t.bids&&t.bids.forEach((t=>{t.params&&t.params.zoneId&&e.push(t.params.zoneId)})),e)),[]))(a)),t.register("provide prebid adUnits",(()=>a.adUnits)));const o={};t.on("prebid loaded",(e=>{e.onEvent("bidRequested",(e=>{let{bidderCode:t,bids:n}=e;"rubicon"===t&&n.forEach((e=>{let{bidId:t,params:{zoneId:n}}=e;o[t]=n}))}))})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_skin",val:e=>{const t=o[e.requestId];return r.has(t)}}),e)))}function hr(e){let{getConfig:t,broker:i}=e;const{width:r}=(0,K.ap)(),a=r>1580;let{accountId:o,siteId:s,adUnits:d,wideSkiesAdUnits:l}=t("plugins.bidders.rubiMM.display",{adUnits:{},wideSkiesAdUnits:[]});if((0,Y.xb)(d))return;a&&l&&(d={...d,...l});const u=Bi("rubi_mm",d,(e=>{const t={area:[n.g.adAreaId]};return{zoneId:e.split(" ")[0],inventory:t,siteId:s.toString(),accountId:o.toString()}}));i.register("provide prebid adUnits",(()=>u)),i.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),i.emit("prebid config async update",{rubi_mm:{singleRequest:!0}})}function fr(e){let{getConfig:t,broker:i}=e;const{accountId:r,siteId:a}=t("plugins.bidders.rubicon.display.v2",{});qi({broker:i,getConfig:t,bidder:"rubi_ttd",adapterName:"rubicon",aliasedName:"rubi_ttd",getBidsParams:e=>{let[t]=e;return{zoneId:t,inventory:{area:[n.g.adAreaId]},siteId:`${a}`,accountId:`${r}`}},asyncUpdate:{singleRequest:!0}})}function gr(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.teads.display",{adUnits:{}});t.register("provide prebid adUnits",(()=>Bi("teads",i,(e=>{const t=e.split(/[ ]+/);return{placementId:t[0],pageId:t[1]}}))))}function mr(e){let{broker:t,getConfig:n}=e;qi({broker:t,getConfig:n,configKeys:"plugins.bidders.triplelift.display",bidder:"triplelift",getBidsParams:e=>{let[t]=e;return{inventoryCode:t}}})}function vr(e){let{broker:t,getConfig:n,log:i}=e;i.info("enabled"),t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.mediagrid.video.${e}`);if(i.info("code",e),i.info("uid",t),!t)return i.warn(`no uid found for pos ${e}`),{};if(!n(`plugins.slots.${e}.v2`))return i.warn(`no template found for pos ${e}`),{};const r={bids:[{bidder:"grid",params:{uid:t}}]};return i.info("providing ad unit",r),r}))}function yr(e){let{broker:t,getConfig:n}=e;t.register("provide video adUnits",(async(e,t)=>{const i=((e,t)=>{const i=n("plugins.bidders.openx.video",{adUnits:{}});let r="";const a=i.delDomain;if(i.adUnits[e]&&"object"==typeof i.adUnits[e]&&i.adUnits[e][t?"autoplay":"ctp"])r=i.adUnits[e][t?"autoplay":"ctp"];else{if(void 0===i.adUnits[e])return{};r=i.adUnits[e].toString()}return{bids:[{bidder:"openx",params:{unit:r,delDomain:a,openrtb:{imp:[{video:{mimes:["video/x-ms-wmv","video/mp4"]}}]}}}]}})(e,t);return i}))}cr.vendorIds={gdpr:[52]},cr.purposeIds={gdpr:[1]},pr.vendorIds={gdpr:[52]},pr.purposeIds={gdpr:[1]},hr.vendorIds={gdpr:[79]},hr.purposeIds={gdpr:[1]},fr.vendorIds={gdpr:[21]},fr.purposeIds={gdpr:[1]},gr.vendorIds={gdpr:[132]},gr.purposeIds={gdpr:[1]},mr.vendorIds={gdpr:[28]},mr.purposeIds={gdpr:[1]},(0,tt.fo)("bidders.adform.video",{run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.adform.adxDomain","adx.adform.net");t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.adform.video.${e}`);if(i.info("code",e),i.info("mid",t),!t)return i.warn(`no mid found for pos ${e}`),{};const a={bids:[{bidder:"adf",params:{adxDomain:r,mid:t}}]};return i.info("providing ad unit",a),a}))},purposeIds:{gdpr:[1]},vendorIds:{gdpr:[50]}}),(0,tt.fo)("bidders.appnexusVideo",{run:function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("plugins.appnexus.dependenciesTimeout",2e3),o=i("plugins.bidders.appnexus.dmps",["airgrid","admantx"]),s=i("plugins.bidders.appnexus.video",{adUnits:{}});t.register("provide video adUnits",(async(e,i)=>{const d=zi((o.length?await Promise.all(o.map((async e=>{const n=(await t.invokeAll({message:["dmp",e],timeout:a}))[0];return n&&[e,n]}))):[]).filter((e=>e)));r("dmpData",d);const l={area:[n.g.adAreaId],...d},u=((e,t,n,i)=>{let r="";if(e.adUnits[n]&&"object"==typeof e.adUnits[n]&&e.adUnits[n][i?"autoplay":"ctp"])r=e.adUnits[n][i?"autoplay":"ctp"];else{if(!e.adUnits[n]||"string"!=typeof e.adUnits[n])return{};r=e.adUnits[n]}const a=r.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"appnexus",params:{accountId:parseInt(a[0]),placementId:parseInt(a[1]),keywords:t,video:{skipable:!1,playback_methods:i?["auto_play_sound_off"]:["click_to_play"]}}}]}})(s,l,e,i);return r("adUnits",u),u}))},vendorIds:{gdpr:[32]},purposeIds:{gdpr:[1]}}),(0,tt.fo)("bidders.criteo.video",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.criteo.video.adUnits",{}),r={placement:1,skip:1},a=n("plugins.bidders.criteo.video.mediaTypes",{});t.register("provide video adUnits",(async e=>{const t=i[e],o=n(`plugins.slots.${e}.v2`),s=a[e]||{};if(t)return{code:o.code,mediaTypes:{video:{...o.mediaTypes.video,...r,...s}},bids:[{bidder:"criteo",params:{zoneId:t}}]}}))},vendorIds:{gdpr:[91]}}),(0,tt.fo)("bidders.improveVideo",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[179]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",((e,t)=>{var r,a,o;const s="video"===e?t?"autoplay":"ctp":e,d=n(`plugins.bidders.improveVideo.${s}`),[l,u]=(null===(r=n(`plugins.slots.${e}.v2`))||void 0===r||null===(a=r.mediaTypes)||void 0===a||null===(o=a.video)||void 0===o?void 0:o.playerSize)||[];return i({configCode:s,placementId:d,w:l,h:u}),d?{bids:[{bidder:"improvedigital",params:{placementId:d,size:{w:l,h:u}}}]}:{}}))}}),(0,tt.fo)("bidders.ixVideo",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[10]},run(e){let{broker:t,getConfig:n,queryParams:i}=e;const r=n("plugins.bidders.ix.video.adUnits",[]),a=n("plugins.bidders.ix.video.default",{}),{mimes:o=["video/mp4","application/javascript"],minduration:s=0}=a;t.register("provide video adUnits",(async(e,t)=>{i.ix_sandbox&&pbjs.setConfig({ix:{sandboxMode:!0}});try{const i=n(`plugins.slots.${e}.v2.mediaTypes.video`,{}),{maxduration:a=61,protocols:d=[1,2,3,4,5,6],api:l=[1,2],playerSize:u=[636,358]}=i,c=r[e]&&"object"==typeof r[e]?r[e][t?"autoplay":"ctp"]:r[e],p=(0,sn.fb)(u);return{bids:[{bidder:"ix",params:{siteId:c,size:u,video:{startdelay:0,mimes:o,minduration:s,maxduration:a,protocols:d,api:l,playerSize:u,w:p[0],h:p[1]}}}]}}catch(e){console.log("[IX Video] transform error ",e)}}))}}),(0,tt.fo)("bidders.oathVideo",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.oath.video",{pubId:"MailOnline"});t.register("provide video adUnits",(e=>{var t,a,o;const s=n(`plugins.slots.${e}.v2`);if(2===(null==s||null===(t=s.mediaTypes)||void 0===t||null===(a=t.video)||void 0===a||null===(o=a.playerSize)||void 0===o?void 0:o.length)&&s.mediaTypes.video.context){const[e,t]=s.mediaTypes.video.playerSize;return{bids:[{bidder:"oneVideo",params:{pubId:r.pubId,video:{playerWidth:e,playerHeight:t,mimes:["video/mp4","application/javascript"],protocols:[1,2,3,4,5,6],api:[1,2],delivery:[2]}}}]}}i.warn(`Video adUnit misconfigured for pos: ${e}`,s)}))}}),(0,tt.fo)("bidders.rhythmOne.video",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;t.register("provide video adUnits",(async(e,t)=>{const i=n(`plugins.bidders.rhythmOne.video.adUnits.${"jwplayer"===e?e:t?"autoplay":"ctp"}`);if(i)return{bids:[{bidder:"rhythmone",params:{placementId:i}}]}}))},vendorIds:{gdpr:[36,162]}}),(0,tt.fo)("bidders.video.rubiMM",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("plugins.bidders.rubiMM.video.accountId"),o={area:[n.g.adAreaId]};a?(t.register("provide bidder alias",(()=>({adapterName:"rubicon",aliasedName:"rubi_mm"}))),t.register("prebid reduce bidderSettings",(e=>(e.rubi_mm={adserverTargeting:[{key:"hb_vast",val:e=>e.impression_id}]},e))),t.register("provide video adUnits",(function(e,t){const n="video"===e?t?"video.autoplay":"video.ctp":e,s=i(`plugins.bidders.rubiMM.video.adUnits.${n}`);if(!s)return r.warn(`config for ${n} does not exist`),{};const[d,l]=s.split(/\s+/,2);if(!d)return r.warn(`No site id for ${n}`),{};if(!l)return r.warn(`No zone id for ${n}`),{};const u=i(`plugins.slots.${e}.v2`),c={language:"en",playerWidth:u.mediaTypes.video.playerSize[0],playerHeight:u.mediaTypes.video.playerSize[1],size_id:201},p=[{bidder:"rubi_mm",params:{accountId:a,inventory:o,siteId:Number(d),zoneId:Number(l),video:c}}];return r("providing auction info",p),{bids:p}}))):r.warn("no account id set")},vendorIds:{gdpr:[52]}}),(0,tt.fo)("bidders.rubiconVideo",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[52]},run(e){let{broker:t,getConfig:i}=e;t.register("provide video adUnits",(async(e,t)=>{const r=((e,t)=>{const r=i("plugins.bidders.rubicon.video",{adUnits:{}}),a=i(`plugins.slots.${e}.v2`);let o="";const s={area:[n.g.adAreaId]};if(r.adUnits[e]&&"object"==typeof r.adUnits[e]&&r.adUnits[e][t?"autoplay":"ctp"])o=r.adUnits[e][t?"autoplay":"ctp"];else{if(!r.adUnits[e]||"string"!=typeof r.adUnits[e])return{};o=r.adUnits[e]}const d=o.trim().replace(/ +/," ").split(" ");return{bids:[{bidder:"rubicon",params:{accountId:r.accountId,siteId:parseInt(d[0]),zoneId:parseInt(d[1]),inventory:s,video:{language:"en",playerWidth:a.mediaTypes.video.playerSize[0],playerHeight:a.mediaTypes.video.playerSize[1],size_id:201}}}]}})(e,t);return r})),t.register("prebid reduce bidderSettings",(e=>(e.rubicon||(e.rubicon={}),e.rubicon.adserverTargeting||(e.rubicon.adserverTargeting=[]),e.rubicon.adserverTargeting.push({key:"hb_vast",val:e=>e.impression_id}),e)))}}),(0,tt.fo)("bidders.smartAdServer.video",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.smartAdServer.siteId",395440),r=n("plugins.bidders.smartAdServer.pageId",1352205),a={bids:[{bidder:"smartadserver",params:{formatId:n("plugins.bidders.smartAdServer.video.formatId",93390),pageId:r,siteId:i}}]};t.register("provide video adUnits",(async()=>a))},vendorIds:{gdpr:[45]}}),(0,tt.fo)("bidders.video.spotx",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.enabled").includes("irisTv");async function a(e){if(!r)return{};try{return(0,Y.jF)(await(0,et.yq)(1e3,t.invoke("get IrisTV tags",e),"Failed to get IrisTV tags in 500ms"),"context","iris_context")}catch(e){return i.error(e),{}}}t.register("provide video adUnits",(async function(e,t,r,o){const s="jwplayer"===e?"chromeless":"video"===e?t?"autoplay":"ctp":null,d=n(`plugins.bidders.spotx.video.${s}`);if(!d)return i.warn(`no channel id found for pos ${s}${s!==e?` (${e})`:""}`),{};const l=[{bidder:"spotx",params:{ad_unit:"instream",channel_id:d,custom:o?await a(o):{},page:`${location.protocol}//${location.hostname}${location.pathname}`}}];return i.info("providing auction info",l),{bids:l}}))},vendorIds:{gdpr:[165]}}),(0,tt.fo)("bidders.tripleliftVideo",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[28]},run(e){let{broker:t,getConfig:n}=e;const i=n("plugins.bidders.tripleliftVideo.adUnits",{jwplayer:"dailymail_prebid_commercial_player_ctp_intstream",video:{ctp:"dailymail_prebid_editorial_player_ctp_intstream",autoplay:"dailymail_prebid_editorial_player_ap_intstream"}});t.register("provide video adUnits",((e,t)=>({bids:[{bidder:"triplelift",params:{inventoryCode:i[e]&&"object"==typeof i[e]?i[e][t?"autoplay":"ctp"]:i[e]}}]})))}}),(0,tt.fo)("bidders.pubmaticVideo",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[76]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.pubmatic.video.publisherId"),a=n("plugins.bidders.pubmatic.video.adUnits"),o=n("plugins.bidders.pubmatic.video.irisTv.enabled",!1),s=n("plugins.bidders.pubmatic.video.irisTv.timeout",1e3);t.register("provide video adUnits",(async(e,n,d,l)=>{const u=((e,t,n,i)=>{if(e){const r=n=>0===n?e[t].preroll:e[t].midroll,a=n=>e[t][n?"autoplay":"ctp"],o=t.includes("jwplayer")?r(i):a(n);return o&&o.trim().replace(/\s+/,"@")}})(a,e,n,d);if(!u)return{};o&&i("requesting irisTV segments for videoId:",l);const c=o&&(0,et.Ye)(s,[t.invokeAll("get IrisTV tags",l)]),p={publisherId:r,adSlot:u},h=await c||{},{results:f=[]}=h;let g;if(f.length&&f[0].length&&!(0,Y.xb)(f[0][0])){const{context:e,iris_id:t}=f[0][0];i(`applying irisTvSegment, iris_id: ${t}, context:`,e),e.length&&(p.dctr=`iris_context=${e.join(",")}`,g={content:{id:t}})}return i("bid params",p),{bids:[{bidder:"pubmatic",params:p}],pbjsConfig:g}}))}}),vr.vendorIds={gdpr:[686]},vr.purposeIds={gdpr:[1]},yr.vendorIds={gdpr:[69]},yr.purposeIds={gdpr:[1]};const br=function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return new Promise((t=>n.g.__tcfapi(e,2,(function(){return t(...arguments)}),...i)))},_r=n.g.adverts.startTime,Tr=[229,2292,2392,3,1584,2198,1964,1765,1633,11,236,733,15,2044,1040,2090,1268,1232,2664,2710,1671,2366,1152,867,2177,1716,22,1284,1496,2441,2176,624,2493,35,1960,802,827,1577,1514,1642,429,2614,359,2645,43,2681,46,432,1375,2214,931,55,2276,2222,2202,932,1188,1845,1248,57,2629,2511,574,2141,938,2315,2678,2771,2271,66,1678,2532,70,1863,1929,2658,7,2670,1517,2357,2238,1732,2662,1750,2646,1409,1301,80,1608,2406,83,1451,2140,61,991,1192,93,1834,2003,2596,1547,864,2526,1858,571,2387,1987,2109,1063,2699,2064,2647,2663,1843,108,1099,2605,1166,2062,122,1878,124,2786,2370,2453,987,440,2107,2264,131,2310,1703,135,1844,136,1896,1669,1097,1252,2335,2772,595,62,2622,143,144,316,2334,147,2405,2563,153,154,1345,2103,2253,2504,550,829,159,1525,161,559,2320,165,2133,1866,167,2571,2373,2415,2685,171,2669,2262,317,2765,2425,178,2572,2496,311,2012,1225,2559,2305,125,776,184,1276,820,188,2601,797,537,1329,192,817,2147,1899,1880,2575,2682,2084,196,575,492,1548,1204,202,1782,89,2440,209,211,1810,1365,2497,218,1613,1100,2727,955,221,1215,350,2584,1705,1298,1220,2586,1978,230,2472,1720,2779,2564,1745,2072,2506,2166,1201,2095,2219,2767,1832,239,241,1275,2295,149,1677,338,1735,2705,2282,126,253,1575,1162,1172,255,588,2251,2597,48,259,2673,266,1631,1837,2279,2739,271,2224,1760,274,1583,2225,2039,1236,2510,1674,1968,2186,1455,1883,1598,1003,1739,286,2684,2689,609,1423,1230,1403,1799,291,2661,780,839,12,2411,1503,2027,1226,1667,1733,294,1962,2336,1905,1312,1211,2414,2468,1067,723,1095,2038,2568,523,568,1603,1027,1313,308,436,313,2205,725,1052,1416,590,1780,591,576,2376,1250,310,1053,327,303,1898,1651,1362,1653,2555,1922,2462,1449,2610,1344,2306,2604,2517,1570,336,2464,2612,926,1205,1051,2477,2579,2121,1047,2247,2583,348,1942,1882,922,592,1212,2777,2531,358,2325,2290,1682,2437,2552,367,363,2621,1859,2068,2299,2778,1660,2079,1025,1356,2768,2115,2595,371,2609,1892,2686,2467,2359,1171,384,1648,1725,134,2544,385,2783,1024,389,2377,2407,2127,2780,1028,394,162,2447,2657,2628,2145,398,899,2394,1415,782,2435,2569,2459,1928,407,2498,340,1791,415,737,1902,2410,2059,1943,2527,414,2358,1721,2170,2035,1520,1029,1034,1126,2643,1048,2403,430,1127,2649,2216,976,1870,1468,2311,1419,979,1591,438,314,2652,2179,2709,1652,442,2427,2382,1072,2354,445,448,1934,2636,2234,449,2137,2691,1307,2706,2534,1411,453,2100,1753,459,2542,2278,2676,2312,2400,2052,2802,424,2567,2223,1665,2346,86,2192,1149,2714,2656,2088,2650,1638,1579,1684,1911,2078,1794,1944,1840,479,2770,2499,370,393,985,2634,486,1227,1241,2056,1958,2183,933,1107,495,494,1054,2695,2461,2156,2070,1626,1170,2220,503,505,2416,1786,510,1831,2481,2651,2690,853,2343,2113,2227,482,397,2677,2776,1800,981,2512,1512,2492,2171,2150,1889,528,2486,1509,1286,2624,1872,2418,2698,2784,1033,2758,540,1555,1722,2422,821,585,798,1442,323,2331,2337,1456,560];function wr(e){let{broker:t,getConfig:i,log:r}=e,a=i("plugins.bidders.spotx.video.autoplay");const o=i("cmp.apiHandler"),s=["__tcfapi"].includes(o)&&n.g[o],d=s?br("getTCData"):Promise.resolve();i("plugins.spotx.enableCpsValues",!0)&&(window.__gcp=Tr);const l=i("plugins.enabled").includes("players.commercial")?".commercial-player-video_ima-ad-container":".video-ads-container",u=t.invoke("load script",`//js.spotx.tv/directsdk/v1/${a}.js`,"SpotX"),c=new Promise((e=>{const n=t.on("ad rendered",(async()=>{const t=document.querySelector(l);t&&(n.cancel(),e(t))}))}));t.register("get video tags",(async function(){let{platform:e,screen:o,offset:s=0,adEl:p,autoplay:h,videoAdServerUrl:f,videoEl:g,slot:m,excludeSpotX:v,auctionId:y}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r("get video tags",v,h),v)return;if(a="jwplayer"!==m.pos?i("plugins.bidders.spotx.video."+(h?"autoplay":"ctp")):i("plugins.bidders.spotx.video.chromeless"),!a)return r("[error] Missing SpotX configuration"),{};n.g.SpotX||await u,p=p||document.querySelector(l),p||(r("awaiting imaVideoElement"),p=await c);const b={};n.g.adAreaId&&(b.area=n.g.adAreaId);const _={hide_skin:!0,autoplay:h,content_width:o.width,content_height:o.height,channel_id:a,custom:b,slot:p,video_slot:g||p.parentNode.getElementsByTagName("video")[0]||p.parentNode.parentNode.getElementsByTagName("video")[0],check_gcp:!0};r("adOSConfig",_);const T=await d;T&&(r("adding user consent data"),_.ados={regs:{gdpr:1},user:{consent:T.tcString}});let w={};const S=new n.g.SpotX.DirectAdOS(_);try{r("getAdServerKVPs"),w=await S.getAdServerKVPs();const n=Date.now()-_r;t.emit("bid",m.pos,{platform:e,offset:s,bidder:"spotx",cpm:100*w.spotx_bid,timeToBid:n})}catch(e){}if((0,Y.xb)(w))return r("no bid"),{};{const e=Math.round(100*w.spotx_bid)/100;return r(`bid, pos: ${m.pos}, offset: ${s}, cpm: ${e}`),{type:"bid",pos:m.pos,offset:s,auctionId:y,cpm:e,bidderCode:"spotx",tags:{cust_params:w}}}})),setTimeout((async()=>{s&&async function(){const e=new Set(await br("consentedVendors"));[21,25,40,79,115,165,264].map((t=>e.has(t))).every((e=>e))&&((new n.g.Image).src="//sync.search.spotxchange.com/partner?source=86983")}()}),1e3)}function Sr(e){let{broker:t,getConfig:n}=e;const{adUnits:i}=n("plugins.bidders.telariaVideo",{adUnits:{}});t.register("provide video adUnits",(async(e,t)=>{const n=i[e]&&"object"==typeof i[e]?i[e][t?"autoplay":"ctp"]:i[e],[r,a]=(e=>e.trim().replace(/\s+/," ").split(" "))(n);return{bids:[{bidder:"telaria",params:{supplyCode:r,adCode:a}}]}}))}wr.vendorIds={gdpr:[165]},wr.purposeIds={gdpr:[1]},Sr.vendorIds={gdpr:[202]},Sr.purposeIds={gdpr:[1]};var kr=n(82);async function Ir(e){let{broker:t,log:i,getConfig:r}=e;const a=r("konduit.id","5ed6500c9166db0c4e9556ad"),o=new Set(["video","jwplayer"]),s={},d=(e,t)=>`${e}-${t}`,l=(e,t,n)=>(r,a)=>{r?i.warn("konduit erorrs",r):(i("bids processed:",e,[a]),a.forEach((e=>t.push(function(e){const t=e.adserverTargeting;return delete t.konduit_cache_key,delete t.konduit_id,i("konduit key values",t),{cust_params:t}}(e))))),u(n)},u=e=>{i("closing stream for:",e),s[e].push(null),delete s[e]};t.registerStream("get video tags",(e=>{const{slot:n,offset:r=0}=e,a=n.pos,o=d(a,r);if(i("get video tags for:",o),s[o])return void i.error(`Stream already existing for "${o}', bailing`);const l=s[o]=(0,kr.KC)();return(0,kr.TS)([l,t.openStream("konduit get video tags",e)])})),t.register("prebid video auction started",((e,t,n)=>{const r=d(t,n),a=s[r];s[e]=a,a.bids=[],delete s[r],i("auction started:",{key:r,auctionId:e})})),t.on("prebid video auction ended",((e,t)=>{i("prebid video auction ended",t);const r=s[t];if(!r)return void i("no stream for:",{adUnitCodes:e,auctionId:t});if(1!==e.length)throw u(t),new Error("No support for more than 1 unit per auction");const a=e[0];i("processing bids for:",a,t,r.bids),n.g.pbjs.adServers.konduit.processBids({adUnitCode:a,bids:r.bids,enableSendAllBids:!0,callback:l(a,r,t)})})),await t.until("prebid loaded"),n.g.pbjs.setConfig({konduit:{konduitId:a}}),n.g.pbjs.enableAnalytics({provider:"konduit"}),n.g.pbjs.onEvent("bidResponse",(e=>{o.has(e.adUnitCode)&&(i("bidResponse",e),s[e.auctionId].bids.push(e))}))}Ir.vendorIds={gdpr:!1};var Cr=function(e,t){return Cr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},Cr(e,t)};function Er(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}Cr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Ar(e,t){var n,i,r,a,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((r=(r=o.trys).length>0&&r[r.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Pr(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function xr(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,a=n.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function Or(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function Dr(e){return this instanceof Dr?(this.v=e,this):new Dr(e)}function Rr(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),a=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(e){r[e]&&(i[e]=function(t){return new Promise((function(n,i){a.push([e,t,n,i])>1||s(e,t)}))})}function s(e,t){try{(n=r[e](t)).value instanceof Dr?Promise.resolve(n.value.v).then(d,l):u(a[0][2],n)}catch(e){u(a[0][3],e)}var n}function d(e){s("next",e)}function l(e){s("throw",e)}function u(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}Object.create,Object.create;var Lr=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Mr(e){return"function"==typeof e}var Ur,jr,Nr=(Ur=function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}},(jr=Ur((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),jr.prototype.constructor=jr,jr);function Br(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var Fr=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}var t;return e.prototype.unsubscribe=function(){var e,t,n,i,r;if(!this.closed){this.closed=!0;var a=this._parentage;if(a)if(this._parentage=null,Array.isArray(a))try{for(var o=Pr(a),s=o.next();!s.done;s=o.next())s.value.remove(this)}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}else a.remove(this);var d=this.initialTeardown;if(Mr(d))try{d()}catch(e){r=e instanceof Nr?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var u=Pr(l),c=u.next();!c.done;c=u.next()){var p=c.value;try{Vr(p)}catch(e){r=null!=r?r:[],e instanceof Nr?r=Or(Or([],xr(r)),xr(e.errors)):r.push(e)}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}if(r)throw new Nr(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)Vr(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&Br(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&Br(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=((t=new e).closed=!0,t),e}();function qr(e){return e instanceof Fr||e&&"closed"in e&&Mr(e.remove)&&Mr(e.add)&&Mr(e.unsubscribe)}function Vr(e){Mr(e)?e():e.unsubscribe()}Fr.EMPTY;var Hr=null,zr=null,Wr=void 0,$r=!1,Gr=!1,Kr={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=Kr.delegate;return(null==r?void 0:r.setTimeout)?r.setTimeout.apply(r,Or([e,t],xr(n))):setTimeout.apply(void 0,Or([e,t],xr(n)))},clearTimeout:function(e){var t=Kr.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function Xr(e){Kr.setTimeout((function(){if(!Hr)throw e;Hr(e)}))}function Zr(){}var Yr=Jr("C",void 0,void 0);function Jr(e,t,n){return{kind:e,value:t,error:n}}var Qr=null,ea=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,qr(t)&&t.add(n)):n.destination=sa,n}return Er(t,e),t.create=function(e,t,n){return new ra(e,t,n)},t.prototype.next=function(e){this.isStopped?oa(function(e){return Jr("N",e,void 0)}(e),this):this._next(e)},t.prototype.error=function(e){this.isStopped?oa(Jr("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?oa(Yr,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Fr),ta=Function.prototype.bind;function na(e,t){return ta.call(e,t)}var ia=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){aa(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){aa(e)}else aa(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){aa(e)}},e}(),ra=function(e){function t(t,n,i){var r,a,o=e.call(this)||this;return Mr(t)||!t?r={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=i?i:void 0}:o&&Gr?((a=Object.create(t)).unsubscribe=function(){return o.unsubscribe()},r={next:t.next&&na(t.next,a),error:t.error&&na(t.error,a),complete:t.complete&&na(t.complete,a)}):r=t,o.destination=new ia(r),o}return Er(t,e),t}(ea);function aa(e){var t;$r?(t=e,$r&&Qr&&(Qr.errorThrown=!0,Qr.error=t)):Xr(e)}function oa(e,t){var n=zr;n&&Kr.setTimeout((function(){return n(e,t)}))}var sa={closed:!0,next:Zr,error:function(e){throw e},complete:Zr},da="function"==typeof Symbol&&Symbol.observable||"@@observable";function la(e){return e}function ua(e){return 0===e.length?la:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var ca=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i,r=this,a=(i=e)&&i instanceof ea||function(e){return e&&Mr(e.next)&&Mr(e.error)&&Mr(e.complete)}(i)&&qr(i)?e:new ra(e,t,n);return function(e){if($r){var t=!Qr;if(t&&(Qr={errorThrown:!1,error:null}),e(),t){var n=Qr,i=n.errorThrown,r=n.error;if(Qr=null,i)throw r}}else e()}((function(){var e=r,t=e.operator,n=e.source;a.add(t?t.call(a,n):n?r._subscribe(a):r._trySubscribe(a))})),a},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=pa(t))((function(t,i){var r=new ra({next:function(t){try{e(t)}catch(e){i(e),r.unsubscribe()}},error:i,complete:t});n.subscribe(r)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[da]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return ua(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=pa(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function pa(e){var t;return null!==(t=null!=e?e:Wr)&&void 0!==t?t:Promise}var ha="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function fa(e){if(e instanceof ca)return e;if(null!=e){if(function(e){return Mr(e[da])}(e))return function(e){return new ca((function(t){var n=e[da]();if(Mr(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(Lr(e))return r=e,new ca((function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()}));if(Mr(null==(i=e)?void 0:i.then))return n=e,new ca((function(e){n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Xr)}));if(function(e){return Symbol.asyncIterator&&Mr(null==e?void 0:e[Symbol.asyncIterator])}(e))return ga(e);if(function(e){return Mr(null==e?void 0:e[ha])}(e))return t=e,new ca((function(e){var n,i;try{for(var r=Pr(t),a=r.next();!a.done;a=r.next()){var o=a.value;if(e.next(o),e.closed)return}}catch(e){n={error:e}}finally{try{a&&!a.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}e.complete()}));if(function(e){return Mr(null==e?void 0:e.getReader)}(e))return ga(function(e){return Rr(this,arguments,(function(){var t,n,i;return Ar(this,(function(r){switch(r.label){case 0:t=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,Dr(t.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,Dr(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,Dr(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}(e))}var t,n,i,r;throw function(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}(e)}function ga(e){return new ca((function(t){(function(e,t){var n,i,r,a,o,s,d,l;return o=this,s=void 0,l=function(){var o,s;return Ar(this,(function(d){switch(d.label){case 0:d.trys.push([0,5,6,11]),n=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=Pr(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){!function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)}(i,r,(t=e[n](t)).done,t.value)}))}}}(e),d.label=1;case 1:return[4,n.next()];case 2:if((i=d.sent()).done)return[3,4];if(o=i.value,t.next(o),t.closed)return[2];d.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=d.sent(),r={error:s},[3,11];case 6:return d.trys.push([6,,9,10]),i&&!i.done&&(a=n.return)?[4,a.call(n)]:[3,8];case 7:d.sent(),d.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))},new((d=void 0)||(d=Promise))((function(e,t){function n(e){try{r(l.next(e))}catch(e){t(e)}}function i(e){try{r(l.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof d?r:new d((function(e){e(r)}))).then(n,i)}r((l=l.apply(o,s||[])).next())}))})(e,t).catch((function(e){return t.error(e)}))}))}function ma(e){return function(t){if(function(e){return Mr(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function va(e,t,n,i,r){return new ya(e,t,n,i,r)}var ya=function(e){function t(t,n,i,r,a,o){var s=e.call(this,t)||this;return s.onFinalize=a,s.shouldUnsubscribe=o,s._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,s._error=r?function(e){try{r(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,s._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,s}return Er(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(ea);function ba(e,t){return ma((function(n,i){var r=0;n.subscribe(va(i,(function(n){i.next(e.call(t,n,r++))})))}))}function _a(e,t,n){return void 0===n&&(n=1/0),Mr(t)?_a((function(n,i){return ba((function(e,r){return t(n,e,i,r)}))(fa(e(n,i)))}),n):("number"==typeof t&&(n=t),ma((function(t,i){return function(e,t,n,i,r,a,o,s){var d=[],l=0,u=0,c=!1,p=function(){!c||d.length||l||t.complete()},h=function(e){return l<i?f(e):d.push(e)},f=function(e){l++;var r=!1;fa(n(e,u++)).subscribe(va(t,(function(e){t.next(e)}),(function(){r=!0}),void 0,(function(){if(r)try{l--;for(var e=function(){var e=d.shift();f(e)};d.length&&l<i;)e();p()}catch(e){t.error(e)}})))};return e.subscribe(va(t,h,(function(){c=!0,p()}))),function(){}}(t,i,e,n)})))}var Ta=Array.isArray;var wa=["addListener","removeListener"],Sa=["addEventListener","removeEventListener"],ka=["on","off"];function Ia(e,t,n,i){if(Mr(n)&&(i=n,n=void 0),i)return Ia(e,t,n).pipe((r=i,ba((function(e){return function(e,t){return Ta(t)?e.apply(void 0,Or([],xr(t))):e(t)}(r,e)}))));var r,a=xr(function(e){return Mr(e.addEventListener)&&Mr(e.removeEventListener)}(e)?Sa.map((function(i){return function(r){return e[i](t,r,n)}})):function(e){return Mr(e.addListener)&&Mr(e.removeListener)}(e)?wa.map(Ca(e,t)):function(e){return Mr(e.on)&&Mr(e.off)}(e)?ka.map(Ca(e,t)):[],2),o=a[0],s=a[1];if(!o&&Lr(e))return _a((function(e){return Ia(e,t,n)}))(fa(e));if(!o)throw new TypeError("Invalid event target");return new ca((function(e){var t=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.next(1<t.length?t:t[0])};return o(t),function(){return s(t)}}))}function Ca(e,t){return function(n){return function(i){return e[n](t,i)}}}var Ea=function(e){function t(t,n){return e.call(this)||this}return Er(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(Fr),Aa={setInterval:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=Aa.delegate;return(null==r?void 0:r.setInterval)?r.setInterval.apply(r,Or([e,t],xr(n))):setInterval.apply(void 0,Or([e,t],xr(n)))},clearInterval:function(e){var t=Aa.delegate;return((null==t?void 0:t.clearInterval)||clearInterval)(e)},delegate:void 0},Pa=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return Er(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(i,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),Aa.setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;Aa.clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(e){i=!0,n=e||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Br(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(Ea),xa={schedule:function(e){var t=requestAnimationFrame,n=cancelAnimationFrame,i=xa.delegate;i&&(t=i.requestAnimationFrame,n=i.cancelAnimationFrame);var r=t((function(t){n=void 0,e(t)}));return new Fr((function(){return null==n?void 0:n(r)}))},requestAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=xa.delegate;return((null==n?void 0:n.requestAnimationFrame)||requestAnimationFrame).apply(void 0,Or([],xr(e)))},cancelAnimationFrame:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=xa.delegate;return((null==n?void 0:n.cancelAnimationFrame)||cancelAnimationFrame).apply(void 0,Or([],xr(e)))},delegate:void 0},Oa=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i}return Er(t,e),t.prototype.requestAsyncId=function(t,n,i){return void 0===i&&(i=0),null!==i&&i>0?e.prototype.requestAsyncId.call(this,t,n,i):(t.actions.push(this),t._scheduled||(t._scheduled=xa.requestAnimationFrame((function(){return t.flush(void 0)}))))},t.prototype.recycleAsyncId=function(t,n,i){if(void 0===i&&(i=0),null!=i&&i>0||null==i&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,n,i);t.actions.some((function(e){return e.id===n}))||(xa.cancelAnimationFrame(n),t._scheduled=void 0)},t}(Pa),Da={now:function(){return(Da.delegate||Date).now()},delegate:void 0},Ra=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=Da.now,e}(),La=function(e){function t(t,n){void 0===n&&(n=Ra.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i._scheduled=void 0,i}return Er(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(Ra),Ma=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Er(t,e),t.prototype.flush=function(e){this._active=!0;var t=this._scheduled;this._scheduled=void 0;var n,i=this.actions;e=e||i.shift();do{if(n=e.execute(e.state,e.delay))break}while((e=i[0])&&e.id===t&&i.shift());if(this._active=!1,n){for(;(e=i[0])&&e.id===t&&i.shift();)e.unsubscribe();throw n}},t}(La))(Oa);const Ua=(e,t)=>(e.clientX-t.clientX)*(e.clientX-t.clientX)+(e.clientY-t.clientY)*(e.clientY-t.clientY),ja=e=>e.touches[0],Na=(e,t,n)=>{e.style.transform=`translate(${t}px, ${n}px)`};class Ba{constructor(e,t,n,i){this.broker=e,this.playerConfig=t,this.playlist=n,this.config={...t},this.log=i,this.containerInitialised=this.containerInitialised.bind(this),this.playerRemove=this.playerRemove.bind(this),this.getPlaylistItem=this.getPlaylistItem.bind(this),this.handleRenderMpuAd=this.handleRenderMpuAd.bind(this),e.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&this.playerRemove()})),e.on("disable chromeless-player",(()=>{console.log("removing chromeless player"),this.playerRemove()}))}handlePlay(e){this.videoPlayerRef.handlePlay(e)}handleAdPlay(e){this.videoPlayerRef.handleAdPlay(e)}handleError(e){}handleRenderMpuAd(e,t){const n=e.bannerFallback.pos;this.log(`rendering ${n}`),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!0);const i=async()=>{this.videoPlayerRef.clearMpuAd(t),this.broker.emit("destroy slot",n),r.removeAttribute("data-adverts-ad");const i=await this.broker.invoke("is page visible?");e.pauseOnBlur&&!i&&(this.log("page not visible... waiting"),await this.broker.until("page visible")),this.log("restarting player"),e.pauseOnBlur&&this.broker.emit("mpuPlayerDisplayed",!1),this.broker.emit("bannerFallbackAd destroyed")},r=document.getElementById(n),a=this.broker.register("get tags",(e=>{let{slot:{pos:i}}=e;if(i!==n)return;a.cancel();const{offset:r}=t;return[{offset:r}]})),{pos:o,id:s,parentId:d}=e.bannerFallback;this.broker.emit("slot mounted",{pos:o,id:s,parentId:d}),this.broker.once("ad rendered",n,(r=>{let{isEmpty:a}=r;if(this.log(`${n} rendered`),a)return this.log(`${n} empty`),void i();this.videoPlayerRef.handleMpuAd(t),setTimeout((()=>{this.log(`destroying ${n}`),i()}),e.bannerFallback.displayTimeout)}))}getPlaylistItem(){return this.player.options_}monitorEvents(){const{broker:e,config:t}=this,{bannerFallback:n={},pauseOnBlur:i=!0}=t;e.on("chromeless player event","adPlay",(e=>this.handleAdPlay(e))),e.on("chromeless player event","play",(e=>this.handlePlay(e))),e.on("chromeless player event","error",(e=>this.handleError(e))),t.bannerFallback&&t.bannerFallback.enabled&&e.on("chromeless player event","bannerFallbackAd",(e=>this.handleRenderMpuAd({bannerFallback:n,pauseOnBlur:i},e)))}async createPlayerLayout(){const{width:e,height:t,ui:i}=this.config;this.timer=+new Date,this.monitorEvents(),this.targetBody=document.createElement("div"),this.targetBody.id="chromelessPlayer",this.targetBody.className="jwplayer_body",this.targetBody.style.width=`${e}px`,this.targetBody.style.height=`${t}px`,this.targetBody.style.background=`url(${this.config.ui.backgroundImage})`,document.body.appendChild(this.targetBody);const r={ref:e=>{this.videoPlayerRef=e},broker:this.broker,containerInitialised:this.containerInitialised,targetBody:this.targetBody,onClose:this.playerRemove,config:{width:e,ui:i},getPlaylistItem:this.getPlaylistItem};this.videoPlayerRef=function(e){let{broker:t,containerInitialised:i,getPlaylistItem:r,onClose:a}=e,o=!0;const s=MobileUtils.isMobile()?"touchstart":"click",d=document.createElement("img");d.src="//i.dailymail.co.uk/video/chromeless_closer.png";const l=document.createElement("div");l.id="closeButton",l.appendChild(d),l.addEventListener(s,(function(e){e&&e.preventDefault(),a()}));const u=document.createElement("video");u.setAttribute("defaultMuted","defaultMuted"),u.setAttribute("muted","muted");const c=document.createElement("div");c.id="playerDiv",c.classList.add("vjs-video-container"),c.classList.add("vjs-responsive"),c.style.visibility="hidden",c.appendChild(u);const p=document.createElement("div");p.id="readMoreWrapper",p.addEventListener(s,(function(e){e.preventDefault(),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),a(),n.g.top.location=r().linkBaseURL+"?ito=chromelessDM_0"})),p.addEventListener("mouseover",(function(){y(r().title)})),p.addEventListener("mouseout",(function(){m()}));const h=document.createElement("div");h.id="mpu_player",h.style.marginTop="0",h.style.left="73px";const f=document.createElement("div");f.classList.add("mpu_player_wrapper"),f.appendChild(h),f.style.display="none",f.addEventListener(s,(function(e){e.preventDefault()}));const g=document.createElement("div");g.id="outerWrapper",g.addEventListener("mouseover",(function(){g.querySelector(".jw-playlist-btn")&&(g.querySelector(".jw-playlist-btn").style.display="none",g.querySelector(".jw-icon-fullscreen").style.display="none")})),g.appendChild(l),g.appendChild(c),g.appendChild(p),g.appendChild(f),i(c,u);const m=(0,nn.Ds)((()=>{p.innerText="Read more"}),5e3);return{clearMpuAd:function(){f.style.display="none"},handleAdPlay:function(){o&&v(),p.style.display="none"},handleMpuAd:function(){p.style.display="none",f.style.display="block"},handlePlay:function(){const e=r();o&&v(),y(e.title),p.style.display="inline"},outerWrapper:g,revealPlayer:v};function v(){c.style.visibility="visible",o=!1}function y(e){p.innerText=e,m()}}(r),this.targetBody.appendChild(this.videoPlayerRef.outerWrapper)}playerRemove(){this.videoPlayerRef&&this.videoPlayerRef.outerWrapper.parentNode.removeChild(this.videoPlayerRef.outerWrapper),this.targetBody&&this.targetBody.remove(),this.broker.emit("set slots enabled",["chromeless"],!1),this.broker.emit("chromeless player closed"),this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}initialisePlayer(){this.broker.emit("set slots enabled",["chromeless"],!0),n.g.DM.later("videoplayer-ready",(async()=>{this.player=await(async(e,t,i)=>{const{width:r,height:a,bannerFallback:o={}}=e,s=await i,d={isMobile:MobileUtils.isMobile(),playerId:"default",preload:"none",initialVideo:!0,syndicationService:null,plugins:{tracking:{disableMolTracking:e.disableMolTracking,channelShortName:e.pageCriteraVideoChannel,sponsored:null,referenceId:"",videoId:"",trackingType:"chromeless",recommendationModel:""},"video-advertising-mode":{},"autoplay-next-video":{},"ads-setup":{bidmax:!0,cust_params:{pos:"jw_preroll"},headerBiddingParams:{platform:"dmplayer",pos:"jwplayer"},schedule:e.schedule,adsEnabled:!0,vpaidEnabled:!0,useIMASDK:e.useImaSdk,adsCancelTimeout:15e3,screen:{width:r,height:a},bannerFallback:!!o.enabled},"related-videos":{videos:s,playlistHistory:!1}}};return await n.g.DM.molFeVideoplayer.initializeVideo(t,d)})(this.playerConfig,this.videoEl,this.playlist);const{delayBeforeMakingPlayerVisible:e,nonOptimisedMobileHomePage:t}=this.config;var i,r;setTimeout((()=>{this.targetBody.style.visibility="visible",this.broker.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})}),e),t&&(i=this.targetBody,r=this.player,new Promise((e=>{const t=Ia(i,"touchstart"),n=Ia(document,"touchmove"),a=Ia(document,"touchend"),o=t.pipe((s=t=>{const o=ja(t);t.preventDefault(),t.stopPropagation();const s=a.pipe(ba((e=>e.preventDefault()||Ua(e.changedTouches[0],o))),(c=Mr(d=t=>{t>=4e4?(r.userActive(!0),e()):(Na(i,0,0),r.userActive(!0))})?{next:d,error:l,complete:u}:d)?ma((function(e,t){var n;null===(n=c.subscribe)||void 0===n||n.call(c);var i=!0;e.subscribe(va(t,(function(e){var n;null===(n=c.next)||void 0===n||n.call(c,e),t.next(e)}),(function(){var e;i=!1,null===(e=c.complete)||void 0===e||e.call(c),t.complete()}),(function(e){var n;i=!1,null===(n=c.error)||void 0===n||n.call(c,e),t.error(e)}),(function(){var e,t;i&&(null===(e=c.unsubscribe)||void 0===e||e.call(c)),null===(t=c.finalize)||void 0===t||t.call(c)})))})):la);var d,l,u,c,p;return n.pipe(ba((e=>{return t=ja(e),n=o,{x:t.clientX-n.clientX,y:t.clientY-n.clientY,distSQ:Ua(t,n)};var t,n})),(p=s,ma((function(e,t){fa(p).subscribe(va(t,(function(){return t.complete()}),Zr)),!t.closed&&e.subscribe(t)}))),function(e,t){return void 0===t&&(t=0),ma((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}(Ma))},ma((function(e,t){var n=null,i=!1,r=function(){return i&&!n&&t.complete()};e.subscribe(va(t,(function(e){null==n||n.unsubscribe(),fa(s(e)).subscribe(n=va(t,(function(e){return t.next(e)}),(function(){n=null,r()})))}),(function(){i=!0,r()})))}))));var s;o.subscribe((e=>{e.distSQ>=1e4?Na(i,e.x,e.y):Na(i,0,0)}))}))).then((()=>this.playerRemove())),this.broker.emit("chromeless player ready",this.player),((e,t)=>{t.on("videoAd.start",(t=>{e.emit("chromeless player event","adPlay",t)})),t.on("play",(t=>e.emit("chromeless player event","play",t))),t.on("error",(t=>e.emit("chromeless player event","error",t))),t.on("videoAd.contentPauseRequested",(t=>{e.emit("chromeless player event","adPlay",t)})),t.on("videoAd.contentResumeRequested",(t=>{e.emit("chromeless player event","play",t)})),t.on("request-reset",(t=>e.emit("chromeless player event","playlistItem",t))),t.on("time",(t=>e.emit("chromeless player event","time",t))),t.on("videoAd.error",(t=>e.emit("chromeless player event","adError",t))),t.on("videoAd.impression",(t=>{e.emit("video ad impression",t),e.emit("chromeless player event","adImpression",t)}))})(this.broker,this.player)}))}async containerInitialised(e,t){const{broker:n,config:i}=this;this.videoEl=t;const{width:r,height:a,videoAdServerUrl:o,pageLoadTimeout:s}=i,d=(await this.playlist)[0];n.emit("chromeless videoPlayer container ready",{broker:n,adEl:e,videoEl:t,videoId:d.videoId,config:{width:r,height:a,videoAdServerUrl:o,pageLoadTimeout:s}})}}const Fa=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),qa=(e,t)=>e&&Fa&&"desktop"===t.renderPlatform,Va=e=>{const t=e("players.chromeless.dmplayer.v3.adUnitNameLevel1","dm.chromelessvideo"),n=e("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros"),i=e("players.chromeless.dmplayer.v3.dfpAccountCode","5765"),r=e("players.chromeless.dmplayer.v3.videoAdServerUrlTemplate",{sz:"[size]",impl:"s",gdfp_req:1,env:"vp",output:"xml_vast4",unviewed_position_start:1,url:"[referrer_url]",correlator:"[time]"}),a=e("players.chromeless.dmplayer.v3.adRequestBaseUrl","https://pubads.g.doubleclick.net/gampad/ads");return e("players.chromeless.dmplayer.v3.adRoll",[]).map((e=>{let{offset:o,pos:s,cust_params:d,minVideoDuration:l}=e;const u={...r,iu:`/${i}/${t}/${n}/${s}`},c=Object.entries(u).map((e=>{let[t,n]=e;return t+"="+`${n}`.replace(/\//g,"%2F")})).join("&"),p=`${a}?${c}`;return l?{videoAdServerUrl:p,offset:o,minVideoDuration:l,cust_params:d}:{videoAdServerUrl:p,offset:o,cust_params:d}}))},Ha=e=>{let t,{broker:i,getConfig:r,isHomepage:a,log:o,pageMeta:s}=e;const d=((e,t,i)=>{const r=e("plugins.slots.jwplayer.v2",{}),a=e("plugins.slots.jwplayer.v2.useIMASSDK",!0),{pauseAdsOnBlur:o=!0,pauseWhenUserInOtherTab:s=!0,pauseWhenUserInOtherApplication:d=!0}=e("players.flyoutConfig",{}),l=o&&s&&d,u=new Set(["news","tvshowbiz","femail","health","sciencetech","travel","money"]).has(n.g.PageCriteria.channel)?n.g.PageCriteria.channel:"news",c=r.mediaType&&r.mediaType.video&&r.mediaType.video.playerSize||[401,225],p=Object.keys(e("slots.enabled",{})).includes("mpu_player"),h=e("slotDescriptions.initial",{}).mpu_player,{playerSize:f=[445,250],displayTimeout:g=5e3}=(null==h?void 0:h.bannerFallback)||{},[m,v]=p?f:c,y=p?((e,t)=>{const{id:n,parentId:i,pos:r}=e;return{displayTimeout:t,enabled:!0,id:n,parentId:i,pos:r}})(h,g):{};return{width:m,height:v,delayBeforeMakingPlayerVisible:e("players.chromeless.dmplayer.v3.delayBeforeMakingPlayerVisible",4e3),...r,nonOptimisedMobileHomePage:qa(t,i),trackingData:{videoChannel:u},schedule:Va(e),disableMolTracking:e("players.chromeless.dmplayer.v3.disableMolTracking",!0),pageCriteraVideoChannel:n.g.PageCriteria.channel,useImaSdk:a,bannerFallback:{enabled:!1,...y},pauseOnBlur:l}})(r,a,s);o("player config",d);const{ui:l,disableMolTracking:u,pageCriteraVideoChannel:c,trackingData:p}=d,h=new Promise((e=>{i.once("ad rendered","billboard",(()=>setTimeout(e,500)))}));i.on("creative updated plugins",(e=>{e.hasOwnProperty("chromeless.dmplayer")&&!e["chromeless.dmplayer"]&&(t=!0)})),i.on("disable chromeless-player",(()=>{t=!0})),i.on("plugins enabled",(async()=>{if(t)return;const e=new Promise((e=>{i.on("chromeless videoPlayer container ready",(t=>{(async e=>{let{broker:t,adEl:i,videoEl:r,videoId:a,config:o}=e;const{width:s,height:d,videoAdServerUrl:l,pageLoadTimeout:u}=o;t.emit("start early video bid",{adEl:i,videoEl:r,offset:0,pos:"jwplayer",articleURL:`${n.g.location.protocol}//${n.g.location.host}${n.g.location.pathname}`,timeout:u,screen:{height:d,width:s},videoAdServerUrl:l,videoId:a,autoplay:!0,excludeSpotX:!1,platform:"dmplayer"})})(t),e()}))}));i.register("get video tags",(e=>{let{pos:t}=e;const i=n.g.PageCriteria.channel;if("jwplayer"===t)return{cust_params:{channel:i}}}));const a=(async e=>{const t=await async function(e){const t=await kt({url:e,timeout:18e3});return JSON.parse(t)}(e.ui.playlistUrl).catch((e=>{console.log("No jwplayer playlist available due to ",e.message)}));if(!t)return;const n=t[e.trackingData.videoChannel];return((e,t,n,i)=>e.filter((e=>e.duration<=t.maxVideoDuration)).map((e=>({linkBaseURL:e.articleUrl,isMobile:!1,duration:e.duration,src:e.url,source:e.source,playerId:"default",title:e.headline,preload:"none",initialVideo:!1,thumbnail:e.stillImageUrl,poster:t.backgroundImage,syndicationService:!1,plugins:{tracking:{disableMolTracking:n,channelShortName:i,sponsored:null,referenceId:e.id,videoId:e.externalVideoIdent,trackingType:"chromeless",recommendationModel:""},"ads-setup":{adsEnabled:!0,screen:{width:401,height:225},adsCancelTimeout:15e3},"autoplay-inline":{enabled:!1,alwaysOn:!1}},videoId:e.externalVideoIdent,descr:e.headline,referenceId:e.id,grapeshot:{article:{articleURL:e.articleUrl}}}))))(e.ui.shufflePlaylist?(0,ne.TV)(n):n,e.ui,e.disableMolTracking,e.pageCriteraVideoChannel)})({ui:l,disableMolTracking:u,pageCriteraVideoChannel:c,trackingData:p}),s=new Ba(i,d,a,o);n.g.DM.later("DOM_READY",(async()=>{await i.invoke("is page visible?")||!d.pauseOnBlur?(o("Page has focus - rendering player"),s.createPlayerLayout()):(o("Waiting for page to focus"),i.once("page visible",(()=>{o("Page has focus - rendering player"),s.createPlayerLayout()})))}));let f=r("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(r("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await h;const t=Date.now()-e;f=t>f?0:f-t}setTimeout((async()=>{if(!t)try{await e,s.initialisePlayer()}catch(e){throw console.log("Unable to start chromeless player due to",e.message),e}}),f)}))};Ha.pluginSetup=e=>{let{getConfig:t,isHomepage:i,pageMeta:r,removePlugins:a}=e;const o=t("plugins.enabled");if(!o.includes("chromelessv2.dmplayer"))return;const s=!o.includes("players.flyoutManager")&&(n.g.PageCriteria.containsVideo||n.g.document.querySelector('meta[property="og:video"]')),d=t("players.chromeless.dmplayer.v3.domainExclusions",[]),l=t("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),u=d.length&&(d.includes(n.g.location.hostname)||d.includes(n.g.location.hostname.replace(/www./,"")))||n.g.PageCriteria.articleId&&l.length&&l.includes(n.g.PageCriteria.articleId),c=t("players.chromeless.dmplayer.v3.enableWifiDetection",!1),p=navigator.connection&&"wifi"===navigator.connection.type;(u||s||Fa&&!qa(i,r)||c&&!p||!c&&Fa)&&a(["chromelessv2.dmplayer"])};const za=Ha;Ha.ccpa={enabledIfDissent:!0},Ha.gdpr={enabledIfDissent:!0};const Wa=DM.molFeComponents,$a=e=>{try{if("string"==typeof e)return new URL(e).hostname}catch(e){}},Ga=["dmgmediaprivacy.co.uk","dmgprivacyint.co.uk","localhost","127.0.0.1"],Ka=MobileUtils.isMobile()&&!MobileUtils.isAndroidTablet()&&!MobileUtils.isIPad(),Xa={getUSPData:"__cachedUSPData"},Za=async(e,t,n,i)=>{const[r,a]=await Promise.all([yi(),bi()]);r||n(i),(async(e,t,n)=>{if(!n&&!K.cj&&!t("cmp.isEmbeddedVideo",!1)){await vi("rendered");const t=(e=>{const t=t=>{if(!(e=>{if(void 0!==e.dataset.cmpNoConsent||/(cookie\s+policy|privacy\s+settings)/i.test(e.textContent))return!0;const t=document.querySelectorAll("*[data-cmp-no-consent]");for(const n of t)if((0,Ne.contains)(n,e))return!0;return!1})(t.target)){const i=(0,tn.vE)(t);t.preventDefault(),n(),e.emit("extra cmp ui tracking event","site clicked"),vi("consentToAll").then((()=>{t.target.dispatchEvent(i)})).catch((e=>{console.error(e),t.target.dispatchEvent(i)}))}},n=()=>{document.body.removeEventListener("click",t)};return document.body.addEventListener("click",t),n})(e);await vi("onUpdate"),t()}})(e,t,a)},Ya=async e=>{const t=Si();return Promise.all(Object.entries(Xa).map((e=>{let[n,i]=e;return new Promise((e=>{t.a.push([n,null,(t,r)=>{r&&(localStorage.setItem(i,JSON.stringify(t)),e({[n]:t}))}])}))})))},Ja=async e=>{let{broker:t,getConfig:i,log:r,registerPluginBouncer:a}=e;function o(e,t){var n,i;return(null==t||null===(n=t.ccpa)||void 0===n||!n.enabledIfDissent)&&r("bouncing",e),null==t||null===(i=t.ccpa)||void 0===i?void 0:i.enabledIfDissent}Wa.setConfig("molFeHomeChannel/showGDPRControls",{enabled:!K.cj&&wi()}),K.SP["mol.ads.cmp.stubConsent"]?localStorage.setItem(mi,"yes"):K.SP["mol.ads.cmp.stubDissent"]&&localStorage.setItem(mi,"no");const s=function(e){const t=Si()||((e,t,n)=>{const i=Xa[e];let r;i&&(r=localStorage.getItem(i))?n(JSON.parse(r),!0):Si().a.push([e,t,n])});return(e=>{n.g.__uspapi=e})(t),t.a=t.a||[],t}();switch(Ya(),s("onUpdate",null,(async(e,n)=>{if(r("onUpdate",e),n){wi()&&localStorage.setItem(mi,e?"yes":"no");const n=(await Ya()).find((e=>e.getUSPData));r("consentData",n);const i=n&&n.getUSPData;if(i){const n={...i,hasConsent:e};r("cmp updated",n),t.emit("cmp updated",n)}}})),wi()&&vi("onDissent").then((async()=>{r("user dissented"),localStorage.setItem(mi,"no"),await Ya()&&n.g.location.reload()})),(async e=>{let t=Ii();if(n=(e=>{const t=document.createElement("a");return t.href=e,t})(t).hostname,!Boolean(Ga.find((e=>n.endsWith(e)))))throw new Error(`CMP script base "${t}" is not allowed.`);var n;(K.s$||K.JW)&&(t=t.replace(/^https?:/,""));const i=document.createElement("script"),r=e("cmp.isEmbeddedVideo",!1);if(r){const e=".vjs-flyout-wrapper-fixed .vjs-video-container";await Promise.race([(0,Ne.elementReady)(e,4500),(0,et.Vs)(4e3)]),i.dataset.renderIn=e,i.dataset.renderVideo=!0}else i.dataset.render=!0;i.id="mol-ads-cmp",i.src=`${t}/iife/mol-ads-cmp.js`;const a=document.createElement("link"),o=document.head.querySelector('link[rel="stylesheet"]')||document.head.lastChild,s=(()=>{switch(!0){case r:return"video";case Ka:return"mobile";default:return"desktop"}})();a.setAttribute("rel","stylesheet"),a.setAttribute("href",`${t}/css/${s}.css`),document.head.insertBefore(a,o),document.head.appendChild(i)})(i),(async()=>{const[e,t]=await Promise.all([yi(),bi()]);t?localStorage.setItem(mi,e?"yes":"no"):localStorage.removeItem(mi)})(),localStorage.getItem(mi)){case"yes":break;case"no":r("user dissented..."),a(o);break;default:wi()&&await Za(t,i,a,o)}Si()("onReset",null,(()=>{localStorage.removeItem(mi)}))};function Qa(e){let{broker:t}=e;n.g.__promised_cmp=new Promise(((e,i)=>{t.on("plugins enabled",(t=>{if(!n.g.__cmp)return e();n.g.__cmp("hasChoiceBeenMade",null,((t,r)=>{if(!r)return i(new Error("hasChoiceBeenMade failed"));t?n.g.__cmp("hasConsentedToAll",null,((t,n)=>{if(!n)return i(new Error("hasConsentedToAll failed"));e(t)})):n.g.__cmp("onUpdate",null,((t,n)=>{if(!n)return i(new Error("onUpdate failed"));e(t)}))}))}))})),n.g.postMessage("__promised_cmp:available","*")}function eo(){}Ja.isAdsFreeSupported=!0,(0,tt.fo)("cmp",{ccpa:{enabledIfDissent:!0},init:async function(e){let{broker:t,getConfig:n,log:i,registerPluginBouncer:r}=e;_i()&&await Ja({broker:t,getConfig:n,log:i,registerPluginBouncer:r})},run:async function(e){let{broker:t,log:i}=e;if(!Si())return;const r={gdpr:"0",cmp:"ccpa"},a=t.until("gpt initialized"),o=e=>{const n=e.hasConsent,i={...r,us_privacy:e.uspString,consent:n},o=n||!ki()?0:1,s=1===o?{...i,rdp:o}:i;t.emit("set page level targeting",s);const d={cust_params:{...i},rdp:o};t.emit("sync video tags update",d),(async(e,t)=>{if(!e&&ki()){const e=await t,n=e&&e[0];n&&n.pubads().setPrivacySettings({restrictDataProcessing:!0})}})(n,a)};t.on("cmp updated",(async e=>{i("user consentData updated",e),o(e)})),t.on("openCmpBanner",(()=>n.g.__uspapi.a.push(["openSettings"])));try{const e=await vi("getUSPData"),t="yes"===localStorage.getItem("mol.ads.cmp.consent");i("setting initial user consentData",e,t),o({...e,hasConsent:t})}catch(e){console.error("[mol-ads]: There was a problem fetching consent data")}window.__uspapi&&K.SP.privacy&&((0,K.WH)("privacy"),window.__uspapi.a.push(["openSettings"]))},isAdsFreeSupported:!0}),Qa.isAdsFreeSupported=!0,Qa.ccpa={enabledIfDissent:!0};const to="home ushome auhome".split(" "),no=()=>/(\?|&)ito=taboola/.test(window.location.search),io=(0,S.x)("Delayer");eo.pluginSetup=async e=>{let{broker:t,setConfig:n}=e;const i=!ki(),r=K.cj,a=PageCriteria.isMobile,o=navigator.cookieEnabled,s="channel"===PageCriteria.pageType,d=to.includes(PageCriteria.channel),l=wi()&&Ti();if(io("Initializing:",{newCmpUser:i,ios:r,ccpa:l,mobile:a,cookieEnabled:o,channel:s,home:d}),!(i&&r&&l&&a&&o&&s&&d))return void io("Not delaying");io("Possible");const u=(0,K.ej)("mol-home");if(io("Cookie:",u),io("Taboola:",no()),u||no())io("Not delaying");else{io("Active"),n("pluginManager.setupTimeout",6e5),io("Change timeout to 10 minutes");try{await new Promise(((e,t)=>{let n=!1;const i=Date.now(),r=()=>{if(document.querySelector("#homePageCover"))n||io("homePageCover detected"),n=!0;else{if(n)return io("homePageCover closed"),e();{const e=Date.now()-i;if(e>5e3)return io("homePageCover never showed up after",e),t(new Error(`homePageCover never showed up after ${e} ms`))}}setTimeout(r,200)};r()}))}catch(e){t.register("call for page analytics",(()=>({missingHomePageCover:!0})))}}},eo.isAdsFreeSupported=!0,eo.ccpa={enabledIfDissent:!0};const ro="__ads_cmp_reprompt",ao=(0,S.x)("cmp-reprompt");function oo(e){let{getConfig:t}=e;if(!(0,T.U2)("plugins.enabled").includes("cmp")||"US"===PageCriteria.geo)return void ao("Not in GDPR jurisdiction, bailing");const n=t("cmp.reprompt",{version:0,chance:0});ao("Goal:",n);const i=localStorage.getItem(ro),r=i&&JSON.parse(i)||{version:0,chance:Math.random()},a=()=>{ao("Saving config"),localStorage.setItem(ro,JSON.stringify(r))};ao("Current:",r),r.version<n.version&&r.chance<n.chance?(ao("Resetting CMP cookie"),Si()("reset",null,((e,t)=>{t?(ao("Cookie removed"),r.version=n.version,r.ts=(new Date).toISOString(),a()):ao("Failed resetting CMP")}))):i||a()}function so(e){let{broker:t}=e;if(!_i())return;const i="__cmp_ui_tracking\n",r={"overlay accepted":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPTED,"overlay open settings":DM.molFeTracking.pageEvents.GDPR_OVERLAY_PRIVACY,"overlay displayed":DM.molFeTracking.pageEvents.GDPR_OVERLAY_DISPLAYED,"settings functional tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_TAB_CLICKED,"settings advertising tab clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_TAB_CLICKED,"settings functional panel advertising link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_LINK_CLICKED,"settings functional panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel policy link clicked":DM.molFeTracking.pageEvents.GDPR_SETTINGS_POLICY_LINK_CLICKED,"settings advertising panel disallow":DM.molFeTracking.pageEvents.GDPR_SETTINGS_DISALLOW_ADVERTISING_PARTNERS,"settings advertising panel disallow confirmed":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_DISALLOW,"settings advertising panel disallow declined":DM.molFeTracking.pageEvents.GDPR_SETTINGS_CONFIRMATION_ALLOW,"settings functional panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_FUNCTION_ALLOW_ALL,"settings advertising panel allow all":DM.molFeTracking.pageEvents.GDPR_SETTINGS_ADVERTISING_ALLOW_ALL,"site clicked":DM.molFeTracking.pageEvents.GDPR_OVERLAY_ACCEPT_BY_CLICK_SITE};n.g.addEventListener("message",(e=>{let{data:t}=e;if(!t||"function"!=typeof t.startsWith)return;if(!t.startsWith(i))return;const n=t.substring(i.length),a=r[n];a?DM.molFeTracking.pageEvents.publish(a):console.warn("Unknown CMP UI Tracking event:",n)}),!1),t.on("extra cmp ui tracking event",(e=>DM.molFeTracking.pageEvents.publish(r[e])))}oo.isAdsFreeSupported=!0,oo.ccpa={enabledIfDissent:!0},so.isAdsFreeSupported=!0,so.ccpa={enabledIfDissent:!0};const lo=e=>{if(e)return e.split(",").map((e=>e.split(":"))).reduce(((e,t)=>{let[n,i]=t;return e[n]=i,e}),{})};function uo(e){let{broker:t}=e;if(!K.SP.forceVideoTag&&!K.SP.forceDisplayTag)return;const n=lo(K.SP.forceDisplayTag),i=lo(K.SP.forceVideoTag);n&&console.log("[FORCE TARGETING] display tags",n),i&&console.log("[FORCE TARGETING] video tags",i),t.emit("set page level targeting",{...n,...i})}uo.ccpa={enabledIfDissent:!0},uo.gdpr={enabledIfDissent:!0},(0,tt.fo)("permutive.vault",{run:async function(e){let{broker:t,log:n}=e;n("waiting for permutive..."),await t.until("permutive ready"),n("starting");const i=(0,K.ej)("permutive-id");if(!i)return void n("no permutive id found");if(!DM.isLoggedIn||!DM.userId)return void n("not logged in");const r=localStorage.getItem("mol.ads.lkui"),a=DM.userId;if(a!==r){n("userId changed",{lastKnownUserId:r,newUserId:a});const e=await fetch("/registration/p/external-references/v1",{method:"PUT",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({vendor:"permutive",id:i})});202===e.status?(localStorage.setItem("mol.ads.lkui",a),n("updated permutive id:",i)):n.warn("failed sending external reference:",e.status,e.statusText)}else n("userId unchanged",a)},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[361]}});const co=(0,S.x)("permutive"),po=(0,nn.ri)(((e,t)=>(e=>{let{broker:t,getConfig:i}=e;return new Promise((async e=>{if(!n.g.permutive){const e=i("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),r=i("plugins.permutive.webScriptSrc","https://5f42864d-a421-4f37-9478-00266f871d68.edge.permutive.app/{{WORKSPACE_ID}}-web.js"),a=i("plugins.permutive.delayedInitialisation",!1);await(async e=>{let{broker:t,getConfig:i,delayedInitialisation:r}=e;co("initializing");const a=i("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),o=i("plugins.permutive.publisherUserId","TheDailyMail"),s=i("plugins.permutive.apiKey","ed45e86d-a09e-4d2b-85c0-fbbd6857373e"),d=i("plugins.permutive.environment","production"),l=i("plugins.permutive.eventsCacheLimitBytes",25e5),u=e=>function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];c.q.push({functionName:e,arguments:n})},c=n.g.permutive={config:{apiKey:s,environment:d,projectId:a,eventsCacheLimitBytes:l,delayedInitialisation:r,viewId:n.g.PageCriteria&&n.g.PageCriteria.pageViewId||(0,un.kb)()},q:[],addon:u("addon"),consent:u("consent"),identify:u("identify"),on:u("on"),once:u("once"),query:u("query"),ready:u("ready"),segment:u("segment"),segments:u("segments"),track:u("track"),trigger:u("trigger"),user:u("user"),init:u("init")};c.ready((()=>t.emit("permutive ready")));const p=n.g.pagemeta||{};t.on("track in permutive",(async(e,t)=>{co("track:",e,t),n.g.permutive.track(e,t)}));const h=i("plugins.permutive.dependenciesTimeout",2e3),f=t.invokeAll({message:["dmp","admantx"],timeout:h}).then((e=>{let[t]=e;return{page:{admants:t}}})),g=n.g.RTA&&n.g.RTA.ids&&n.g.RTA.ids.then((e=>({user:{id:e.user,status:"logged out"}})))||{},m=(0,et.yq)(h,g),v=await Promise.all([f,m]),y=Z()({page:{type:p.contentType,article:{id:p.articleId,title:p.articleTitle,categories:p.channel?[p.channel.substr(1)]:void 0,publishedAt:p.publishedDate&&p.publishedDate.toISOString()||void 0,modifiedAt:p.updatedDate&&p.updatedDate.toISOString()||void 0,authors:p.authorsShortNames}}},...v);if(co("web context:",y),y.user){const e={id:y.user.id,tag:o};co("identity:",e),n.g.permutive.identify([e])}n.g.permutive.addon("web",y)})({broker:t,getConfig:i,delayedInitialisation:a}),await t.invoke("import script",r.replace("{{WORKSPACE_ID}}",e)),a&&n.g.permutive.init()}e()}))})({broker:e,getConfig:t})));async function ho(e){let{broker:t,getConfig:i}=e;const r=po(t,i);if(window.localStorage.getItem("permutive-id")){const e=window.localStorage.getItem("permutive-id");t.emit("external user ids",{permutive:e})}else r.then((()=>{const e=window.localStorage.getItem("permutive-id");t.emit("external user ids",{permutive:e})}));t.emit("set page level targeting",r.then((()=>{const e=window.localStorage.getItem("permutive-id"),t=n.g.permutive.config.viewId;let i={permutive:JSON.parse(n.g.localStorage.getItem("_pdfps")||"[]"),pvid:t};return e&&(i={...i,puid:e,ptime:Date.now().toString()}),i})))}async function fo(e){let{broker:t,getConfig:i}=e;const r=DM&&DM.pageEvents,a=(0,S.x)("permutive");if(!r)return;const o=po(t,i),s={},d={};let l=1;await o;const u=e=>{const t=e.videoId,i={...s[t]};e.ratio>0&&(i.progress=e.ratio,a(`Sending VideoProgress Event, id: ${t}`,i),n.g.permutive.track("VideoProgress",i))},c={[r.VIDEO_DATA_READY]:e=>{const t=e.videoId;s[t]=((e,t)=>{const{title:n,referenceId:i,autoplay:r}=e;return{video:{name:n,id:String(i)},autoStart:r,playId:t}})(e,String(l)),a(`videoDataReady Event, id: ${t}`,s[t]),l++},[r.VIDEO_CONTENT_STARTED]:e=>{let{videoId:t}=e;const i=s[t];a(`Sending VideoPlay Event, id: ${t}`,i),n.g.permutive.track("VideoPlay",i)},[r.VIDEO_PROGRESS]:u,[r.VIDEO_ADVERT_IMPRESSION]:e=>{const t=e.videoId,i=e.adImpression,r=i.adWrapperSystems&&Object.fromEntries(i.adWrapperSystems.map(((e,t)=>[e,i.adWrapperIds[t]])))||[],o=r.GDFP,l={id:o&&String(o)||void 0,advertiserName:i.advertiserName,creativeId:String(i.creativeId),deal_id:String(i.dealId)};d[t]=l;const u={...s[t],ad:l};a(`Sending VideoAdPlay Event, id: ${t}`,u),n.g.permutive.track("VideoAdPlay",u)},[r.VIDEO_ADVERT_COMPLETED]:e=>{let{videoId:t}=e;const i={...s[t],ad:{...d[t]}};a(`Sending VideoAdComplete Event, id: ${t}`,i),n.g.permutive.track("VideoAdComplete",i),delete d[t]},[r.VIDEO_CONTENT_COMPLETED]:e=>{e={...e,ratio:1},u(e),delete s[e.videoId]}};Object.entries(c).forEach((e=>{let[n,i]=e;a("Registering",`video page event ${n}`),t.on(`video page event ${n}`,((e,t)=>{i(t)}))}))}function go(e){let{broker:t,getConfig:n}=e;const i=n("plugins.permutive.projectId","5f42864d-a421-4f37-9478-00266f871d68"),r=n("plugins.permutive.indexedDBVersion",2),a=new Promise((e=>{const t=indexedDB.open(i,r);t.onsuccess=async()=>{const n=t.result,i=await Promise.all(Object.values(n.objectStoreNames).map((e=>{const t=n.transaction(e,"readonly").objectStore(e).getAll();return new Promise((e=>{t.onsuccess=()=>{const n=t.result.reduce(((e,t)=>t.byteLength?e+t.byteLength:t.length?e+t.length:e),0);e(n)}}))})));n.close(),e(i.reduce(((e,t)=>e+t),0))}}));t.register("call for page analytics",(async()=>({indexedDB:{permutive:await a}})))}ho.vendorIds={gdpr:[361]},ho.purposeIds={gdpr:"N/A"},fo.vendorIds={gdpr:[361]},fo.purposeIds={gdpr:"N/A"},go.ccpa={enabledIfDissent:!0},go.gdpr={enabledIfDissent:!0},(0,tt.fo)("dmp.moat",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("dmp.moat.url","https://z.moatads.com/mailonlineprebidheader526476985912/moatheader.js");r("config:",{URL:a});const o=new Promise((e=>{n.g.moatYieldReady=()=>{r.enabled&&n.g.moatPrebidApi.enableLogging(),e(n.g.moatPrebidApi)}}));t.emit("set page level targeting",o.then((e=>{const t=e.getMoatTargetingForPage();return r("page targeting",t),t||{}}))),t.register("get tags",(async e=>{let{slot:t}=e;const n=(await o).getMoatTargetingForSlot(t.pos);return r({[t.pos]:n}),n||{}})),await t.invoke("import script",a)},vendorIds:{gdpr:[772]}});var mo=n(3591);(0,tt.fo)("players.targeting",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("auction.maxTime",2e3),a={},o=kr.KC(),s={broker:t,log:i,pageLevelTargetingStream:o,defaultTargetingCollectionTimeout:r};t.on("set page level targeting",(async e=>{const t=await e;t&&Z()(a,t),o.push(t)}));const d=Promise.race([t.until("configure and start prebid"),(0,et.Vs)(vo)]),l=Promise.race([t.until("prebid ready"),(0,et.Vs)(vo)]);t.on("collect video tags",(async(e,t)=>{await Promise.race([d,l]);const n=bo(s,e),{pos:r,autoplay:o,offset:u,videoId:c}=n;i(`requesting video bid for ${r}, ${o?"autoplay":"ctp"}, offset: ${u}, videoId: ${c}`);const p=_o(s,n);Object.keys(a).length&&(i("Dispatching known page level targeting:",a),t(null,{cust_params:{...a}})),n.cust_params&&t(null,{cust_params:n.cust_params}),function(e,t){e.on("data",(e=>{t(null,e)})).on("end",(()=>t(null,null)))}(p,((e,n)=>{t(e,n)}))})),t.on("start early video bid",(async e=>{await d;const t=bo(s,e),{pos:n,autoplay:r,offset:a}=t;i(`starting early video bid ${n}, ${r?"autoplay":"ctp"}, offset: ${a}`);const o=_o(s,t);yo[e.pos]=o}))}});const vo=(0,T.U2)("players.targeting.prebidTimeout",1e3),yo={};function bo(e,t){return t.pos=t.pos||"video",t.timeout=t.timeout||e.defaultTargetingCollectionTimeout,"jwplayer"===t.pos&&(t.autoplay=!0,t.muted=!0),t.dfpPos=t.pos,t}function _o(e,t){const{broker:n,log:i}=e,{pos:r,autoplay:a,offset:o}=t;if(yo[r]){i(`found stream for ${r}, ${a?"autoplay":"ctp"}, offset: ${o}`);const e=yo[r];return delete yo[r],n.emit("cached video bid consumed",r,a?"autoplay":"ctp"),e}return(()=>{const s=(0,mo.Z)();i(`creating bidStream for: ${r}, ${a?"autoplay":"ctp"}, offset: ${o}, auctionId: ${s}`),t.auctionId=s;const d=function(e,t){const{broker:n,pageLevelTargetingStream:i}=e,{pos:r,timeout:a}=t,o={slot:{pos:r},...t};n.emit("start bidding",r);const s=[];return s.push(n.openStream({message:["get video tags",o],timeout:a,controlHandler:e=>{let{type:t,...i}=e;return n.emit("auction event",r,t,i)}})),((e,t,n)=>{const i=kr.c(e,kr.UI(t,(e=>({cust_params:e}))));return e.on("end",(()=>n("Bidders finished, disconnecting pageLevelTargetingStream"))),i.on("close",(()=>n("Auction ended, disconnecting pageLevelTargetingStream"))),i})(kr.TS(s),i,e.log)}(e,t),[l,u]=kr.Ju();return function(e,t,n,i,r){kr.dE(kr.hX(n,(e=>"object"==typeof e)),(i=>{i&&console.warn("video bidding ended with error:",i),e.emit("auction event",t,"end"),e.emit("video bidding ended",t,r),n.destroy()})).pipe(i)}(n,r,d,u,s),l})()}const To=e=>{!function(e){let{broker:t,getConfig:i,log:r}=e;const a="androidMobile"===n.g.PageCriteria.device||"iphone"===n.g.PageCriteria.device;if(!n.g.PageCriteria.containsVideo&&!n.g.document.querySelector('meta[property="og:video"]'))return;const o=i("plugins.slots.video.v2.pageLoadTimeout",4e3),s=i("plugins.slots.video.v2.videoAdServerUrl","http://pubads.g.doubleclick.net/gampad/ads?sz=[size]&iu=%2F5765%2Fdm.video%2Fdm_video_news_apfa&ciu_szs=&impl=s&gdfp_req=1&env=vp&output=xml_vast3&unviewed_position_start=1&url=[referrer_url]&correlator=[timestamp]"),[d,l]=i("plugins.slots.video.v2.mediaTypes.video.playerSize",[640,360]),u=()=>{const e=document.createElement("div");e.style.visibility="hidden";const i=document.createElement("video");i.setAttribute("muted","muted"),i.setAttribute("width",d),i.setAttribute("height",d),e.id="playerDiv_x",e.appendChild(i),document.body.appendChild(e);const u={pos:"video",articleURL:n.g.location.protocol+"//"+n.g.location.host+n.g.location.pathname,timeout:o,screen:{width:d,height:l},platform:"dmplayer",offset:0,videoAdServerUrl:s,autoplay:!1,excludeSpotX:!!a};r("start early video bid"),t.emit("start early video bid",u),setTimeout((()=>{document.body.removeChild(e)}),5e3)};t.on("cached video bid consumed","video","ctp",(()=>u())),t.on("plugins enabled",(()=>{n.g.DM.later("DOM_READY").then((()=>{r("trigger early bid"),u()}))}))}(e)},wo=To;To.ccpa={enabledIfDissent:!0},To.gdpr={enabledIfDissent:!0};const So={};let ko,Io=!1,Co=!1;const Eo="androidMobile"===n.g.PageCriteria.device||"iphone"===n.g.PageCriteria.device,Ao=(e,t)=>{document.addEventListener("click",(e=>{-1!==e.target.classList.toString().indexOf("vjs-flyout-close")&&(Io=!1,ko=null)}),!0),document.addEventListener("play",(n=>{(0,Ne.closest)(n.target,(e=>e.classList.contains("vjs-video-container")))&&(e&&(0,Ne.closest)(n.target,(e=>e.classList.contains("video-ads-container")))||!(0,Ne.closest)(n.target,(e=>e.classList.contains("video-ads-container"))))&&(So[n.target]=So[n.target]||{},ko=n.target,xo()||t&&Io&&!Co?(So[n.target].playing=!1,Co=!0,n.target.pause(),Io=!0):(So[n.target].playing=!0,Io=!1))}),!0),document.addEventListener("pause",(t=>{Co?Co=!1:(0,Ne.closest)(t.target,(e=>e.classList.contains("vjs-video-container")))&&(e&&(0,Ne.closest)(t.target,(e=>e.classList.contains("video-ads-container")))||!(0,Ne.closest)(t.target,(e=>e.classList.contains("video-ads-container"))))&&(So[t.target]=So[t.target]||{},So[t.target].playing=!1,Io=!1)}),!0)},Po=()=>void 0!==document.hidden?"visibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychanged":"",xo=()=>{try{return n.g.top.document.hidden||n.g.top.document.msHidden||n.g.top.document.webkitHidden||!1}catch(e){return!!(void 0).visibilityApiEvent()}},Oo=()=>!!ko&&So[ko].playing,Do=e=>{ko&&(Oo()&&e?(Co=!0,ko.pause(),Io=!0,So[ko].playing=!1):Oo()||xo()||!Io?e||xo()||(Io=!1,Oo()||(So[ko].playing=!0,ko.play())):(ko.play(),So[ko].playing=!0,Io=!1))};let Ro,Lo,Mo;const Uo=e=>{ko&&(Ro=(0,Ne.getOffset)(ko),Lo=parseInt((0,Ne.getElementComputedHeight)(ko)),Mo=parseInt((0,Ne.getElementComputedHeight)(document.body)),Io&&Ro.top+Lo/2>0&&Ro&&Ro.top<Mo-Lo/2&&(ko.play(),Io=!1))};function jo(e){let{broker:t,getConfig:i}=e;if(i("plugins.enabled",[]).includes("players.flyoutManager"))return;let r=i("players.dmplayer.pauseOnVisibilityChange",!0),a=i("players.dmplayer.pauseOnBlur",!0),o=i("players.dmplayer.pauseOnAds",!1);if(o="false"!==o&&("true"===o||o),r="false"!==r&&("true"===r||r),a="false"!==a&&("true"===a||a),Eo&&(e=>{Ao(),e.on("dom ready",(()=>{document.addEventListener("pause",(e=>{(Ro&&Ro.top+Lo/2<0||Ro&&Ro.top>Mo-Lo/2)&&(Io=!0)}),!0),document.addEventListener("scroll",n.g.DM.molFeMiniLodash.debounce(Uo,100),{passive:!0,capture:!0}),document.addEventListener("touchmove",n.g.DM.molFeMiniLodash.debounce(Uo,100),{passive:!0,capture:!0})}))})(t),Eo||!r&&!a)return;const s=t.on("ad rendered",(async()=>{Ao(o,!0),((e,t)=>{(void 0===t||t)&&(n.g.top.addEventListener("blur",(()=>{Do(!0)})),n.g.top.addEventListener("focus",(()=>{Do(!1)}))),Po()&&(void 0===e||e)&&document.addEventListener(Po(),(e=>{Do(xo(),Po())}),!1)})(r,a),s.cancel()}))}jo.ccpa={enabledIfDissent:!0},jo.gdpr={enabledIfDissent:!0};const No=e=>{let{broker:t,getConfig:n,log:i}=e;const r=n("performplayer",{enabled:!1});i("config:",r),r.enabled&&t.on("dom ready",(()=>{const e=(e=>{const t=Array.from(document.querySelectorAll(".perform-player")),n=e("performplayer.related",{enabled:!1}),i=t.reduce(((e,t)=>("true"===t.getAttribute("data-related-player")?e.related.push(t):e.module.push(t),e)),{related:[],module:[]}),r=[];return n.enabled&&i.related.length>0&&r.push(i.related[0]),i.module.length>0&&r.push(i.module[0]),r})(n);e.map((e=>(e=>{const t=e.getAttribute("data-tracking-id");return{node:e,urlFragment:t}})(e))).forEach((e=>{const n=`${r.url}#${r.idOverride||e.urlFragment}`;i("found player",e.urlFragment),r.idOverride&&i("overriding it with configured id:",r.idOverride);const a=document.createElement("script");a.async=!0,a.src=n,a.onload=()=>{i("player loaded:",n),t.emit("new perform player",e.urlFragment,e.node)},e.node.parentNode.insertBefore(a,e.node.nextSibling)}))}))};No.vendorIds={gdpr:[323]},No.purposeIds={gdpr:"N/A"};const Bo=No,Fo="androidMobile"===n.g.PageCriteria.device||"iphone"===n.g.PageCriteria.device,qo=n.g.PageCriteria.isTablet,Vo=[],Ho={};let zo,Wo=null,$o=!1;class Go{constructor(e){this.name=e,this.pausedBy=null,this.startedBy=null,this.hasFocus=!1}setLastActive(e,t){delete this.pausedBy,this.lastActive=e,this.startedBy=t}}const Ko={players:[],groups:{inlinePlayer:new Go("inlinePlayer"),jwOrChromelessPlayer:new Go("jwOrChromelessPlayer")}},Xo=()=>{n.g.document.querySelectorAll(".vjs-video-container video").forEach((e=>{e.player&&e.src&&!Vo.includes(e)&&(e.player.on("pause",(()=>{is({target:e})})),e.player.on("play",(()=>{ns({target:e})})),Vo.push(e))}))},Zo=e=>{let t=Ko.players.find((t=>t.element===e.target));if(!t){if(t=new Yo(e),!t.group)return null;Ko.players.push(t)}return t};class Yo{constructor(e){if(this.wrappers={},this.group=this.determineGroup(e),!this.group)return null;this.element=e.target,this.flagUserMouseover(),this.computedHeight=(0,Ne.getElementComputedHeight)(this.element),this.offset=(0,Ne.getOffset)(this.element)&&(0,Ne.getOffset)(this.element).top,Zo[e.target]=this}flagUserMouseover(){const e=this;e.container=e.wrappers.widthSetter||e.wrappers.zIndexSetter,e.container&&(e.container.addEventListener("mouseover",(()=>{e.mouseOverPlayer=Date.now()})),e.container.addEventListener("mousemove",(()=>{e.mouseOverPlayer=Date.now()})),e.container.addEventListener("mouseout",(()=>{delete e.mouseOverPlayer})))}setLastActive(){const e=this;Wo=e.group,e.group.lastActive=e,e.otherGroup.lastActive&&e.otherGroup.startedBy&&(e.otherGroup.pausedBy="sync",delete e.otherGroup.startedBy,e.otherGroup.lastActive.pause())}handlePause(){this.otherGroup.lastActive&&"user"!==this.otherGroup.pausedBy&&(this.otherGroup.startedBy="sync",delete this.otherGroup.pausedBy,this.otherGroup.lastActive.play())}isPaused(){return this.element.player?this.element.player.paused():this.element.paused}isPlaying(){const e=this.element;return this.element.player?!this.element.player.paused():!!(e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2)}determineGroup(e){const t=this;let n;return e.target&&null===e.target.getAttribute("data-mol-fe-video-preview")?this.group=(0,Ne.closest)(e.target,(e=>"outerWrapper"===e.id))?Ko.groups.jwOrChromelessPlayer:(0,Ne.closest)(e.target,(e=>e.classList.contains("vjs-video-container")))?Ko.groups.inlinePlayer:null:this.group=null,this.isAd=!!(0,Ne.closest)(e.target,(e=>e.classList.contains("video-ads-container")))||!!(0,Ne.closest)(e.target,(e=>e.classList.contains("jw-overlays"))),t.group&&(t.otherGroup=this.group?Ko.groups[Object.keys(Ko.groups).find((e=>e!==t.group.name))]:null,"inlinePlayer"===t.group.name?(n=(0,Ne.closest)(e.target,(e=>e.classList.contains("vjs-flyout-wrapper-fixed"))),n&&n.previousSibling?(t.wrappers.styleSetter=n.previousSibling,t.wrappers.widthSetter=n.getElementsByClassName("vjs-fixed")[0]):t.wrappers.widthSetter=t.wrappers.styleSetter=(0,Ne.closest)(e.target,(e=>e.classList.contains("vjs-fixed")))):"jwOrChromelessPlayer"===t.group.name&&(t.wrappers.zIndexSetter=(0,Ne.closest)(e.target,(e=>-1!==e.classList.toString().indexOf("jwplayer_body"))))),t.group}play(){this.element&&(this.element.player?this.element.player.play():this.element.play())}pause(){const e=this;e.element&&(e.element.player?e.element.player.pause():e.element.pause())}handleScroll(){const e=this;!e.group.pausedBy&&(e.offset+e.computedHeight/1.5<n.g.scrollY||e.offset-.1*e.computedHeight>n.g.scrollY+window.innerHeight)&&(e.group.pausedBy="scroll",delete e.group.startedBy,e.pause()),"scroll"===e.group.pausedBy&&e.offset+e.computedHeight/1.5>n.g.scrollY&&e.offset-.1*e.computedHeight<n.g.scrollY+window.innerHeight&&"user"!==e.group.pausedBy&&(e.group.startedBy="scroll",delete e.group.pausedBy,e.play())}}const Jo=()=>void 0!==document.hidden?"visibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.webkitHidden?"webkitvisibilitychanged":"",Qo=()=>{try{return n.g.top.document.hidden||n.g.top.document.msHidden||n.g.top.document.webkitHidden||!1}catch(e){return!!(void 0).visibilityApiEvent()}},es=(e,t,n,i)=>{let r;const a=Wo;t&&a&&a.lastActive.mouseOverPlayer||(e.emit("sync video tags update",{cust_params:{oov:t}}),Wo&&i&&(t?(Wo.pausedBy="blur",Wo.lastActive.isAd&&!zo.pauseAdsOnBlur||Wo.lastActive.isPlaying()&&Wo.lastActive.pause()):"blur"!==Wo.pausedBy||Qo()||(n!==Jo()||t||"inlinePlayer"!==a.name?Wo.lastActive.isPlaying()||Wo.lastActive.play():(r=Wo.lastActive.otherGroup,r.lastActive&&setTimeout((()=>{r.lastActive.pause()}),200),setTimeout((()=>{a.lastActive.isPlaying()||(a.lastActive.play(),r.lastActive&&r.lastActive.pause())}),400)),delete Wo.pausedBy)))},ts=(0,nn.FU)((()=>{Wo&&Wo.pausedBy&&"user"!==Wo.pausedBy&&Wo.lastActive&&!Wo.lastActive.isPlaying()&&Wo.lastActive.play(),Ko.groups.inlinePlayer&&Ko.groups.inlinePlayer.lastActive&&setTimeout((()=>Ko.groups.inlinePlayer.lastActive.handleScroll()),100)}),100),ns=e=>{const t=Zo(e);t&&(Xo(),zo.identifyPlayers&&clearInterval(zo.identifyPlayers),Ho[t.group.name]&&(t.group.startedBy="user",delete t.group.pausedBy,delete Ho[t.group.name]),(e=>!e||("jwOrChromelessPlayer"===e.group.name&&(e.group.lastActive=e),"user"!==e.group.startedBy&&"jwOrChromelessPlayer"===e.group.name&&(e.otherGroup.startedBy?(e.pausedBy="sync",e.pause()):e.group.startedBy="auto"),"inlinePlayer"!==e.group.name||e.group.lastActive||e.group.startedBy||(e.group.startedBy="user"),e.group.hasFocus||"user"===e.group.startedBy||"auto"===e.group.startedBy||"scroll"===e.group.startedBy?(delete e.group.pausedBy,e.otherGroup.hasFocus=!1,e.group.hasFocus=!0,!1):(e.pause(),!0)))(t)||t.setLastActive())},is=e=>{if(!e.target.src)return;const t=Zo(e);t&&(Ho[t.group.name]&&(t.group.pausedBy="user",delete t.group.startedBy,delete Ho[t.group.name]),(e=>"user"!==e.group.pausedBy&&"sync"!==e.group.pausedBy&&"scroll"!==e.group.pausedBy||(e.group.hasFocus=!1,delete e.startedBy,!1))(t)||t.handlePause())},rs=e=>{if(e.target.classList.contains("jw-icon"))Ho.jwOrChromelessPlayer=!0;else if(e.target.classList.contains("vjs-play-control")||e.target.classList.contains("vjs-big-play-button")){const t=(0,Ne.closest)(e.target,(e=>"outerWrapper"===e.id))?"jwOrChromelessPlayer":"inlinePlayer";Ho[t]=!0}},as=e=>{if(!e.player||!e.player.el_||!e.player.el_.getElementsByTagName("video").length)return;const t=e.player.el_.getElementsByTagName("video")[0];ns({target:t})},os=e=>{let{broker:t,getConfig:i}=e;zo=i("players.flyoutConfig",{}),Object.keys(zo).forEach((e=>{"true"===zo[e]&&(zo[e]=!0),"false"===zo[e]&&(zo[e]=!1)})),zo.checkForNewPlayersFrequency=i("players.flyoutConfig.checkForNewPlayersFrequency",600),t.on("chromeless player ready",(e=>{n.g.DM.molFeVideoplayer.on("videoPlaying",as)})),t.on("chromeless player ready",(e=>Xo())),n.g.DM.later("DOM_READY",(async()=>{n.g.document.addEventListener("play",ns,!0),n.g.document.addEventListener("pause",is,!0),qo||Fo?n.g.document.addEventListener("touchstart",rs):n.g.document.addEventListener("click",rs);const e=void 0===zo.pauseWhenUserInOtherApplication||zo.pauseWhenUserInOtherApplication,i=void 0===zo.pauseWhenUserInOtherTab||zo.pauseWhenUserInOtherTab;n.g.top.addEventListener("blur",(n=>{$o||setTimeout((()=>{es(t,!0,"blur",e)}))})),n.g.top.addEventListener("focus",(()=>{$o||setTimeout((()=>{es(t,!1,"focus",e)}))})),Jo()&&document.addEventListener(Jo(),(()=>{$o||es(t,Qo(),Jo(),i)}),!1),t.emit("sync video tags update",{cust_params:{oov:!document.hasFocus()}}),document.addEventListener("scroll",ts,{passive:!0,capture:!0}),document.addEventListener("touchmove",ts,{passive:!0,capture:!0}),t.on("mpuPlayerDisplayed",(e=>{$o=e})),zo.identifyPlayers=setInterval((()=>{Xo()}),zo.checkForNewPlayersFrequency)}))},ss=os;os.ccpa={enabledIfDissent:!0},os.gdpr={enabledIfDissent:!0};const ds=e=>{let{broker:t,getConfig:n}=e};ds.pluginSetup=e=>{let{getConfig:t,setConfig:n,addPlugins:i,removePlugins:r}=e;if(!t("plugins.enabled",[]).includes("players.flyoutManager"))return;const a=(e=>{const t=e("players.flyoutConfig",[]);return Object.keys(t).forEach((e=>{"true"===t[e]&&(t[e]=!0),"false"===t[e]&&(t[e]=!1)})),t.pauseContentIfAdNotPaused=void 0===t.pauseContentIfAdNotPaused||t.pauseContentIfAdNotPaused,t.pauseAdsOnBlur=void 0===t.pauseAdsOnBlur||t.pauseAdsOnBlur,t})(t);n("players.flyoutConfig",a),r(["videoForceFlyout","videoFlyout","players.visibility"]),t("plugins.enabled").includes("players.commercial")||i(["players.onlyOneActivePlayer"])};const ls=ds;function us(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function cs(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,hs(e,t,"get"))}function ps(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,hs(e,t,"set"),n),n}function hs(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}ds.ccpa={enabledIfDissent:!0},ds.gdpr={enabledIfDissent:!0},(0,tt.fo)("slots.connatix",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:n,getConfig:i,pageCriteria:r}=e;if("article"!==r.pageType)return void n("Not suitable for PageCriteria.pageType:",r.pageType);const a={insertMethod:async e=>{const[r,a]=i("pos.connatix.size",[480,410]),o=i("pos.connatix.playerId","29388c8f-d1e6-4485-be68-d4bdbf2f2b1f");window.cnxps||(window.cnxps={},window.cnxps.cmd=[],t.invoke("import script in iframe",{url:"//cd.connatix.com/connatix.playspace.js"}));const s=document.createElement("div");s.id=(0,un.kb)(),s.className="connatix-placeholder",s.style.width=`${r}px`,s.style.height=`${a}px`;const d=e=>{e?n("Error:",e):n("Rendered Successfully")};window.cnxps.cmd.push((async()=>{n("Library loaded"),t.register("call for page analytics",(()=>({connatix:!0}))),window.cnxps({playerId:o}).render(s.id,d)})),e.parentElement.insertBefore(s,e)},log:n,margin:i("pos.connatix.margin",{top:30,bottom:60}),sourcePlugin:"connatix",targetParagraphIndex:i("pos.connatix.paragraphIndex",5)};t.register("placement requests",(()=>a))},vendorIds:{gdpr:[143]}});var fs=new WeakMap,gs=new WeakMap,ms=new WeakMap,vs=new WeakMap;class ys{constructor(e){us(this,fs,{writable:!0,value:void 0}),us(this,gs,{writable:!0,value:void 0}),us(this,ms,{writable:!0,value:void 0}),us(this,vs,{writable:!0,value:void 0});const{bindTo:t=n.g,eventToListen:i="scroll"}=e||{};var r;ps(this,fs,new Set([])),ps(this,gs,(r=cs(this,fs),(0,nn.Ds)((()=>{if(!r.size)return;const e=window.pageYOffset+(0,Ne.getPageSize)()[3];for(const o of r){const[s,d]=o;t=s.element,n=s.offset,i=e,a=void 0,t&&"none"!==t.style.display&&i>=((null===(a=(0,Ne.getOffset)(t))||void 0===a?void 0:a.top)||0)-n&&(d(),r.delete(o))}var t,n,i,a}),500))),ps(this,ms,t),ps(this,vs,i),t.addEventListener(i,cs(this,gs)),this.add=this.add.bind(this),this.dispose=this.dispose.bind(this)}add(e){cs(this,fs).add(e)}dispose(){cs(this,ms).removeEventListener(cs(this,vs),cs(this,gs)),cs(this,fs).clear()}reset(){cs(this,fs).clear()}size(){return cs(this,fs).size}}function bs(e,t){return"lazy"===t.type&&function(e,t){let n=null;try{n="$this"===t.trigger?document.getElementById(e.id):document.querySelector(t.trigger)}catch(e){console.error("ads","Invalid css selector in the loading trigger:",t.trigger)}return{id:e.parentId||e.id,element:n||document.getElementById(e.parentId||e.id),offset:t.offset,slot:e}}(e,t)||void 0}const _s="hp-panel",Ts=["news","puff"];function ws(){return(0,K.ej)("mol-home")}function Ss(e,t){const i="puff"===t?"dontmiss":n.g.adAreaId||"home";e.emit("set adSubareaId",i)}function ks(e){return e.classList.contains(_s)}function Is(e){let{broker:t,DM:i,getConfig:r,log:a}=e;const o=new Map,s=r("slots.enabled",{}),d=function(e,t){return new Promise((n=>{const i=ws();if(i)t("cookie read from storage",i),n(i);else{const i=e=>{r(),n(e)},{unsubscribe:r}=e.pageEvents.subscribe(e.pageEvents.MOBILE_HOME_PAGE_VIEW,(e=>(n,i)=>{if(!i.swipe&&!i.swipe){const n=ws();t("user made mobile-home-page choice",n),n&&e(n)}})(i))}}))}(i,a),l=function(e,t){return new Promise((n=>{e.once("dom ready",(async()=>{const i=Array.from(document.getElementsByClassName(_s)),r=await t,a=r&&{news:"news",showbiz:"puff"}[r],o=a&&i[Ts.indexOf(a)]||void 0;Ss(e,a),n([i,o])}))}))}(t,d),u="ontouchmove"in document?{bindTo:document.documentElement,eventToListen:"touchmove"}:{bindTo:n.g,eventToListen:"scroll"};a("using scrollEvent",u);const c=new ys(u);let p;i.pageEvents.subscribe(i.pageEvents.MOBILE_HOME_PAGE_SWIPE,(async(e,n)=>{a(`${e} event received, user on ${n.label} panel`);const[i]=await l,r=i[Ts.indexOf(n.label)];!function(e){let{broker:t,log:n,loadTracking:i,newPanel:r,slots:a}=e;Ss(t,r),n("resetting loadTracking for panel:",r),i.reset();const o=[];a.forEach((e=>{let{slotDefinition:t,resolve:s,panelName:d,loadTrackingSettings:l}=e;if(d===r)if(l&&s){const e=()=>{a.set(t.id,{panelName:d,slotDefinition:t}),n(t.id," loadTrigger reached, resolving"),s()};n("adding loadTracking for",t.id),i.add([l,e])}else s?(n(t.id," resolving"),a.set(t.id,{panelName:d,slotDefinition:t}),s()):o.push([t.pos,t.id])}));const s=o.map((e=>{let[t]=e;return t})),d=o.map((e=>{let[,t]=e;return t}));s.length&&(n("refresh positions",s),t.emit("prepare to refresh ads",s),t.emit("refresh ads",{ids:d,positions:s,reason:"swipe"}))}({broker:t,log:a,loadTracking:c,newPanel:n.label,slots:o}),t.emit("panel updated",r)})),t.on("panel updated",(e=>{p=e})),l.then((e=>{let[,t]=e;p=t})),t.register("verify slot ready",(e=>function(e){let{currentPanel:t,enabledAds:n,loadTracking:i,log:r,pHomepageCookie:a,pPanelsRendered:o,slotDefinition:s,slots:d}=e;return new Promise((async e=>{await a;const[l,u]=await o;r("verifying slot",s.id);const c=document.getElementById(s.id),p=(0,Ne.closest)(c,ks),h=Ts[l.indexOf(p)],f=t||u;r("panelName:",s.id,h,f);const g=bs(s,n[s.dfpPos||s.pos]);if(p&&p!==f)r(s.id," not in this panel: delaying"),d.set(s.id,{loadTrackingSettings:g,panelName:h,slotDefinition:s,resolve:e});else if(g){r(s.id," loadTracking",g);const t=()=>{d.set(s.id,{panelName:h,slotDefinition:s}),r(s.id," loadTrigger reached, resolving"),e()};i.add([g,t]),d.set(s.id,{loadTrackingSettings:g,panelName:h,slotDefinition:s,resolve:e})}else r(s.id," no loadTracking, resolving"),d.set(s.id,{panelName:h,slotDefinition:s}),e()}))}({currentPanel:p,enabledAds:s,loadTracking:c,log:a,pHomepageCookie:d,pPanelsRendered:l,slotDefinition:e,slots:o}))),((e,t)=>{let n="unset";t.then((e=>{n=e})),e.register("call for page analytics",(()=>({homepageCookie:n})))})(t,d),t.register("call for page-unload",(()=>{if(!c)return;let e=0;for(const t of o.values())t.resolve&&e++;return{sdm:e}}))}(0,tt.fo)("slots.delayMount",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){const{log:t,...i}=e;(e=>{let{isHomepage:t,pageMeta:n}=e;return t&&"mobile"===n.renderPlatform})(e)?Is({...i,log:t.extend("mobileHomePage")}):function(e){let{broker:t,getConfig:i,log:r}=e;r("using default delay-mount");const a="ontouchmove"in document?{bindTo:document.documentElement,eventToListen:"touchmove"}:{bindTo:n.g,eventToListen:"scroll"};r("using scrollEvent",a);const o=new ys(a),s=i("slots.enabled",{});t.register("verify slot ready",(e=>new Promise((t=>{const n=s[e.dfpPos||e.pos],i=bs(e,n);i?(r(`delay mounting slot id: ${e.id}, pos: ${e.pos}, triggerId: ${i.element.id}, offset: ${i.offset}`),o.add([i,t])):(r("mounting slot",e.id,e.pos),t())})))),t.register("call for page-unload",(()=>o&&{sdm:o.size()}))}({...i,log:t.extend("default")})}});var Cs=n(6570),Es=n.n(Cs);(0,tt.fo)("slots.minuteMedia",{purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[918]},async run(e){let{broker:t,getConfig:i,log:r,pageCriteria:a}=e;if(r("enabled"),"article"!==a.pageType)return void r("Not suitable for PageCriteria.pageType:",a.pageType);n.g.addEventListener("voltaxPlayerLoaded",(e=>{let{detail:i}=e;const r=i.playerName,a=n.g.voltax.getPlayersByName(r);t.emit("new minute media player",a[0])})),n.g.voltax&&n.g.voltax.getAllPlayersOnPage().forEach((e=>t.emit("new minute media player",e)));const o={insertMethod:async function(e){await async function(e){let{getConfig:t,log:i}=e;const r=t("pos.minuteMedia.tcfEventBarrier",!1);var a;r&&n.g.__tcfapi&&(i("waiting for TCF event",r),await(a=r,new Promise((e=>{n.g.__tcfapi("addEventListener",2,(t=>{a===t.eventStatus&&(n.g.__tcfapi("removeEventListener",2,(()=>{}),t.listenerId),e(t))}))}))),i("received TCF event",r))}({getConfig:i,log:r.extend("tcf")});const t=document.createElement("div");t.classList.add("minute-media-container");const a=document.createElement("div");if(a.classList.add("minute-media"),i("pos.minuteMedia.watermark",!0)&&a.classList.add("watermark"),t.appendChild(a),i("pos.minuteMedia.addLabel")&&a.classList.add("minute-media-label"),i("pos.minuteMedia.moat.enabled",!1)){const e=i("pos.minuteMedia.moat.src","//z.moatads.com/mailonlineminutemedia634421037781/moatad.js#moatClientLevel1=MINUTEMEDIAPLAYER&moatClientLevel2=MINUTEMEDIAPLAYER&moatClientLevel3=MINUTEMEDIAPLAYER&moatClientLevel4=MINUTEMEDIAPLAYER"),t=document.createElement("script");t.src=e,t.async=!0,a.appendChild(t)}e.parentElement.insertBefore(t,e);const o=i("pos.minuteMedia.googleTagManagerId","GTM-PL4PD49"),s=`https://www.googletagmanager.com/gtm.js?id=${o}`,d=`https://www.googletagmanager.com/ns.html?id=${o}`;(0,Ne.createIframe)({content:Es()({configScript:i("pos.minuteMedia.configScript","https://bucket1.mm-syringe.com/prod/configs/c4e65ff4-b385-d838-b9da-8cc3d8d9dfdb.js"),googleTagManagerScript:s,googleTagManagerIframeScript:d,injectorScript:i("pos.minuteMedia.injectorScript","https://bucket1.mm-syringe.com/prod/injector/injector.1.5.3.js")}),insertMethod:e=>a.appendChild(e),log:r.extend("")})},log:r,margin:i("pos.minuteMedia.margin",{top:30,bottom:60}),sourcePlugin:"minutemedia",targetParagraphIndex:i("pos.minuteMedia.paragraphIndex",4)};t.register("placement requests",(()=>o))}}),(0,tt.fo)("slots.mpuComments",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:i,log:r,pageMeta:a,pageCriteria:o}=e;if("mobile"!==a.renderPlatform||"article"!==o.pageType)return void r("mpu_comments not rendered on this page type, bailing");const s=i("slots.enabled",{}),d=Object.keys(s).filter((e=>e.startsWith("mpu_comments")));d.length?(t.on("slots initialized",(()=>{DM.later("bundle",(()=>DM.molFeComments&&DM.molFeComments.events.subscribe("loaded",(()=>{Ps=!0,As.clear();const e=function(e,t){const i=()=>{t("running cleanupHandler"),n.g.location.hash.match(/^#comments-\d+$/)||(Ps=!1,n.g.removeEventListener("hashchange",i),t("cleaning up slots"),As.forEach((n=>{t("destroying",n),e.emit("destroy slot",n)})))};return i}(t,r);n.g.addEventListener("hashchange",e),((e,t,n,i)=>{const r=n("slotDescription.mpu_comments.positions",[3,8]),a=document.querySelectorAll("#comments .comment"),o=a.length;t.filter(((e,t)=>r[t]<o)).forEach(((t,n)=>{i(`inserting ad, id: ${t}, in comment position ${r[n]}`),((e,t,n)=>{const i=e[n],r=(e=>{const t=document.createElement("div");t.id=e,t.className=`adHolder mpu molads_${e}`,t.appendChild(At());const n=document.createElement("li");return n.appendChild(t),n})(t);i.parentNode.insertBefore(r,i)})(a,t,r[n]),e.emit("slot mounted",{pos:t,id:t})}))})(t,d,i,r)}))))})),t.on("ad rendered",((e,n)=>{const i=n.slot.getSlotElementId();d.includes(i)&&(Ps?(r("ad rendered, id:",i),As.add(i)):(r("ad no longer in comments panel, destroying",i),t.emit("destroy slot",i)))}))):r("no mpu_comments positions enabled, bailing")}});const As=new Set;let Ps=!1;(0,tt.fo)("slots.rendered",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const n={};t.on("ad rendered",((e,i)=>{if("publisher_ads"===i.serviceName&&!i.isEmpty){const e=i.slot.molAd,t=e.type||"1x1",r=[e.pos,e.parentId,t].join("|");n[r]={pos:e.pos,id:e.parentId,sz:t,cid:i.creativeId,lid:i.lineItemId}}t.emit("ads rendered update",Object.values(n))}))}});const xs=e=>{let t,i,{broker:r,getConfig:a}=e,{offsetBelowElement:o,triggerElementId:s}=a("plugins.slots.leaderTop",{offsetBelowElement:0,triggerElementId:"billBoard"});o=parseInt(o);const d=()=>{const e=document.getElementById(s);if(!e)return;const r=(0,Ne.getOffset)(e),a=(0,Ne.getElementComputedHeight)(e),d=(0,Ne.getOffset)(document.getElementById("page-container"));if(!t&&document.getElementById("smartBanner")){const e=document.getElementById("smartBanner").getElementsByTagName("a")[0];t=e.addEventListener("click",(n=>{e.removeEventListener("click",t),document.getElementById("leader_top").classList.remove("below-smart-banner")}))}i&&document.getElementById("leader_top").classList.add("styled"),n.g.scrollY<r.top+a-d.top+o?setTimeout((()=>{document.getElementById("leader_top").style.display="none"})):(document.getElementById("smartBanner")&&"block"===n.g.getComputedStyle(document.getElementById("smartBanner")).getPropertyValue("display")?document.getElementById("leader_top").classList.add("below-smart-banner"):document.getElementById("leader_top").classList.remove("below-smart-banner"),setTimeout((()=>{l&&(l(),l=void 0),document.getElementById("leader_top").style.display="block"})))};let l;r.intercept("slot ready for ad",((e,t)=>{let[n,i,r]=e;"leader_top"===i.pos?l=t:t()}));const u=document.createElement("div");r.once("slot defined",(()=>{u.id="leader_top",u.style.display="none",document.body.appendChild(u),r.emit("slot mounted",{pos:"leader_top"}),r.on("ad rendered","leader_top",(()=>{i=!0,d()})),r.on("dom ready",(()=>{d(),[1e3,2e3,3e3].forEach((e=>setTimeout(d,e))),document.addEventListener("scroll",n.g.DM.molFeMiniLodash.debounce(d,200),{passive:!0,capture:!0}),document.addEventListener("touchmove",n.g.DM.molFeMiniLodash.debounce(d,200),{passive:!0,capture:!0})}))}))};xs.ccpa={enabledIfDissent:!0},xs.gdpr={enabledIfDissent:!0};const Os=xs,Ds="puff_ad_others";function Rs(e){let{broker:t,getConfig:n}=e;if(n("plugins.slots.puffAdOthers.renderInfiniteList",{enabled:!1}).enabled){const e=n("slotDescriptions.initial")[Ds],i=e&&(0,sn.fb)(e.size);t.on("infinite-list append",(e=>{const r=i&&n("plugins.slots.puffAdOthers.addWatermark",!0);for(const n of e.getElementsByClassName("puff-ad-other"))r&&Ls(n,i[0],i[1]),t.emit("slot mounted",{pos:Ds,containerId:n.id})}))}}function Ls(e,t,n){e.classList.remove("puff-ad");const i=document.createElement("div");i.classList.add("ad-exp-container"),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.clip=`rect(0,${t}px,${n}px,0)`;const r=document.createElement("div");r.classList.add("adHolder"),r.classList.add("puff-ad"),r.classList.add("watermark"),r.style.position="relative",r.style.width=`${t}px`,r.style.height=`${n}px`,r.appendChild(i);const a=e.parentNode;return a.parentNode.replaceChild(r,a),i.appendChild(e),r}Rs.ccpa={enabledIfDissent:!0},Rs.gdpr={enabledIfDissent:!0};const Ms={refreshCount:0};async function Us(e){let{broker:t}=e;const i={};t.intercept("slot defined",((e,t)=>{let[n,{pos:r}]=e;i[r]=Ms,t()})),t.on("destroy slot",(e=>{delete i[e]})),t.register("get tags",(e=>{let{slot:{pos:t}}=e;return[i[t]]})),t.register("get video tags",(e=>{let{slot:{pos:t}}=e;return{cust_params:{...i[t]||Ms,player:t}}})),t.intercept("refresh ads",((e,t)=>{let[n,{positions:r,plugins:a,reason:o}]=e;try{r.forEach((e=>{i[e]={refresh:!0,refreshCount:i[e].refreshCount+1,refreshReason:o}}))}finally{t()}})),await t.until("dom ready");const r=n.g.DM&&n.g.DM.molFeTracking&&n.g.DM.molFeTracking.pageEvents;r&&r.subscribe("video.ad-impression",((e,t)=>{let{tag:n}=t;const r=(0,fn.Gi)(n),{cust_params:{player:a,refreshCount:o=0}}=r;i[a]={refresh:!0,refreshCount:Number(o)+1}})),t.on("video.ad-impression",(e=>{let{playerId:t}=e;const{refresh:n,refreshCount:r}=i[t]||{refresh:!0,refreshCount:0};i[t]={refresh:n,refreshCount:r+1}}))}function js(){return document.querySelector(".billboard-container")}function Ns(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:js();return e.querySelector(".sticky-container")}function Bs(){return document.querySelector("#billBoard")}async function Fs(e){let t,n,i,r,a,{broker:o,timeAfterScroll:s,timeAfterVisible:d,minimumVisibilityPeriod:l=0,waitMinVisiblity:u=!1}=e;const c=new Promise((e=>{t=o.once("ad rendered","billboard",(()=>{const t={capture:!1,passive:!1};let n=()=>{null!==n&&(window.removeEventListener("scroll",n,t),n=null,setTimeout(e,s))};window.addEventListener("scroll",n,t)}))})),p=new Promise((e=>{n=o.on("slot visibility changed","billboard",(t=>{t.inViewPercentage>=50&&(n.cancel(),setTimeout(e,d))}))})),h=new Promise((e=>{i=o.on("slot visibility changed","billboard",(t=>{t.inViewPercentage>=50&&(i.cancel(),setTimeout(e,l))}))})),f=new Promise((e=>{r=o.once("disable force view when viewed","billboard",(async()=>{u&&await h,e()}))})),g=new Promise((e=>{a=o.once("disable sticky position","billboard",(()=>{e("sticky disabled")}))})),m=await Promise.race([c,p,f,g]);return t.cancel(),n.cancel(),i.cancel(),r.cancel(),a.cancel(),m}function qs(e,t,i){const r=Bs();if(r){if(i.affix||(i.sticky?r.classList.add("sticky"):r.classList.remove("sticky")),"infinitly"===i.sticky)!function(e){const{height:t,billboardHeight:n,stickyContainer:i}=Vs(document.body)||{};if(t&&n&&i)if(e.affix){const i=t-n,r=e.affix.getOffsets().startStickyOffset+i;e.affix.setOffsets({stopStickyOffset:r,stoppedPosition:i}),e.affix.started||e.affix.start()}else i.style.height=`${t}px`}(i);else if("limited"===i.sticky)!function(e){const{height:t,billboardHeight:n,stickyContainer:i}=Vs(function(){const e=document.querySelector(".gamma"),t=document.querySelector(".lead-alpha"),n=t&&t.querySelector(".alpha"),i=n&&n.querySelector(".item"),r=t&&t.querySelector(".beta"),a=t&&t.querySelector(".sport"),o=t&&t.querySelector(".health"),s=t&&t.querySelector(".travel"),d=e=>e&&e.offsetTop<2e3&&e;return document.querySelector("#fff-hub-banner")||d(document.querySelector(".article-text h1"))||d(document.querySelector(".article-text h2"))||document.querySelector("#sciencetech #content h2")||document.querySelector("#sciencetech, #arts, #you, #promotions, #tvshowbizheadlines, #food, #gardening, #femailblogs")&&r.querySelector(".item:nth-child(1)")||e&&e.querySelector(".tim-tools")||e&&e.querySelector(".sport.item:nth-child(2)")||e&&e.querySelector(".article-tri-headline h2")||n.querySelector(".article.article-tri-headline:nth-child(1) h2")||t&&t.querySelector(".football-team-news .article.article-large h2")||a&&a.querySelector(".article-large h2")||o&&o.querySelector(".health-archive h2")||s&&s.querySelector(".travel-banner h1")||r&&r.querySelector(".item:nth-child(1) .puff ul li:nth-child(1)")||r&&r.querySelector(".item:nth-child(1) .fff-hub .fff-search")||i&&i.querySelector("h3:not(.usability)")||r&&r.querySelector(".item:nth-child(2):not(.mpu_puff_wrapper)")||n&&n.querySelector(".item h6")||r&&r.querySelector(".item:nth-child(1)")}())||{};if(t&&n&&i)if(e.affix&&t){const i=t-n,r=e.affix.getOffsets().startStickyOffset+i;e.affix.setOffsets({stopStickyOffset:r,stoppedPosition:i}),e.affix.started||e.affix.start()}else i.style.height=`${t}px`}(i);else{var a;null!=i&&null!==(a=i.affix)&&void 0!==a&&a.started&&i.affix.disable(),Ns().style.height="100%"}if(i.closable?r.classList.add("closable"):r.classList.remove("closable"),"click close button"===t.type){const{DM:t}=n.g;t.pageEvents.publish(t.pageEvents.AD_BILLBOARD_CLOSED),e.emit("send event to bidmax",{type:"custom",payload:{userClosedBillboard:!0,refreshCount:i.refreshCount}})}!function(e){if(e.querySelector(".billboard-close"))return;const t=document.createElement("a"),n=document.createTextNode("Close x");t.href="#",t.classList.add("billboard-close"),t.appendChild(n),t.addEventListener("click",(e=>{e.preventDefault()})),e.appendChild(t)}(r)}}function Vs(e){if(!e)return void Bs().classList.remove("sticky");const t=js(),n=Ns(t),i=Bs();if(!t||!n||!i)return;const r=(0,Ne.getElementComputedHeight)(t),a=(0,Ne.getElementComputedHeight)(i),o=r+((0,Ne.getElementBottomOffset)(e)-(0,Ne.getElementBottomOffset)(t)),s=(r-a)/2;return{height:s>0?o-s:o,billboardHeight:a,stickyContainer:n}}function Hs(e,t){switch(e.type){case"click close button":case"limit sticky height":return!1!==(null==t?void 0:t.closable)||"limited"!==(null==t?void 0:t.sticky)?{...t,closable:!1,sticky:"limited"}:t;case"infinitly stick":return"infinitly"!==(null==t?void 0:t.sticky)||(null==t?void 0:t.closable)!==!!e.closable?{...t,closable:!!e.closable,sticky:"infinitly"}:t;case"__DEINIT__":case"disable stickyness":return t.sticky?{...t,sticky:!1}:t;case"disable refresh":return t.refreshable?{...t,refreshable:!1}:t;case"refresh":return{...t,refreshCount:t.refreshCount+1};default:return t}}function zs(e,t){Gs(e,t),t.add(e)}function Ws(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $s(e,t,n){Gs(e,t),t.set(e,n)}function Gs(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ks(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Xs(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Ys(e,t,"get"))}function Zs(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Ys(e,t,"set"),n),n}function Ys(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}Us.ccpa={enabledIfDissent:!0},Us.gdpr={enabledIfDissent:!0};const Js="affix-off",Qs="affix-on",ed=e=>{const t=window.getComputedStyle(e),n=parseInt(t.getPropertyValue("margin-left")),i=parseInt(t.getPropertyValue("margin-right")),r=parseInt(t.getPropertyValue("margin-top")),a=parseInt(t.getPropertyValue("margin-bottom")),o=parseInt(t.getPropertyValue("padding-left")),s=parseInt(t.getPropertyValue("padding-right")),d=parseInt(t.getPropertyValue("padding-top")),l=parseInt(t.getPropertyValue("padding-bottom")),u=(parseInt(t.getPropertyValue("border-left")),parseInt(t.getPropertyValue("border-right")),parseInt(t.getPropertyValue("border-top")),parseInt(t.getPropertyValue("border-bottom"))),c=e.getBoundingClientRect(),p={left:c.left-n,right:c.right-i-o-s,top:c.top-r,bottom:c.bottom-a-d-l-u,width:0,height:0};return p.width=p.right-p.left,p.height=p.bottom-p.top,p},td=()=>{};var nd=new WeakMap,id=new WeakMap,rd=new WeakMap,ad=new WeakMap,od=new WeakMap,sd=new WeakMap,dd=new WeakMap,ld=new WeakMap,ud=new WeakMap,cd=new WeakMap,pd=new WeakMap,hd=new WeakMap,fd=new WeakMap,gd=new WeakSet,md=new WeakSet,vd=new WeakSet,yd=new WeakSet,bd=new WeakSet;class _d{constructor(e){let{element:t,log:n,onAffix:i,onUnfix:r,onStopfix:a,relativeHorizontalElement:o,startStickyOffset:s=0,stopStickyOffset:d=Number.MAX_SAFE_INTEGER,stoppedPosition:l}=e;zs(this,bd),zs(this,yd),zs(this,vd),zs(this,md),zs(this,gd),$s(this,nd,{writable:!0,value:void 0}),$s(this,id,{writable:!0,value:void 0}),$s(this,rd,{writable:!0,value:void 0}),$s(this,ad,{writable:!0,value:void 0}),$s(this,od,{writable:!0,value:void 0}),$s(this,sd,{writable:!0,value:void 0}),$s(this,dd,{writable:!0,value:void 0}),$s(this,ld,{writable:!0,value:void 0}),$s(this,ud,{writable:!0,value:void 0}),$s(this,cd,{writable:!0,value:void 0}),Ws(this,"started",void 0),$s(this,pd,{writable:!0,value:void 0}),$s(this,hd,{writable:!0,value:void 0}),$s(this,fd,{writable:!0,value:void 0}),Ws(this,"disable",void 0),Zs(this,nd,t),Zs(this,ld,n),Zs(this,id,i||td),Zs(this,rd,r||td),Zs(this,ad,a||td),Zs(this,sd,o||t),Zs(this,od,ed(Xs(this,sd)).left),Zs(this,dd,"stopFix");const u=window.getComputedStyle(Xs(this,nd),null);Zs(this,cd,u.getPropertyValue("position")),Zs(this,ud,u.getPropertyValue("top")),Zs(this,pd,s),Zs(this,hd,d),Zs(this,fd,l||Xs(this,hd)),this.start=this.start.bind(this),this.setOffsets=this.setOffsets.bind(this),this.getOffsets=this.getOffsets.bind(this),this.started=!1,this.disable=td}start(){if(this.started)return;const e=Ks(this,yd,kd).bind(this),t=(0,nn.FU)((()=>setTimeout(e)),200),n=Ks(this,bd,Id).bind(this),i=(0,nn.FU)(n,200);return this.disable=()=>{Xs(this,ld).call(this,"cancelling sticky",Xs(this,nd)),Zs(this,dd,"cancelled"),this.started=!1,Ks(this,vd,Sd).call(this),document.removeEventListener("scroll",t),window.removeEventListener("resize",i)},this.disable.bind(this),document.addEventListener("scroll",t),window.addEventListener("resize",i),this.started=!0,this.disable}setOffsets(e){let{startStickyOffset:t,stopStickyOffset:n,stoppedPosition:i}=e;Zs(this,pd,t||Xs(this,pd)),Zs(this,hd,n||Xs(this,hd)),Zs(this,fd,i||Xs(this,fd)||Xs(this,hd)),Ks(this,yd,kd).call(this)}getOffsets(){return{startStickyOffset:Xs(this,pd),stopStickyOffset:Xs(this,hd),stoppedPosition:Xs(this,fd)}}}function Td(){Xs(this,nd).style.display="none",Xs(this,nd).classList.remove(Js),Xs(this,nd).classList.add(Qs),Xs(this,nd).style.left=Xs(this,od)+"px",Xs(this,nd).style.position="fixed",Xs(this,nd).style.top="0",Zs(this,dd,"affix"),Xs(this,id).call(this),setTimeout((()=>{Xs(this,nd).style.display="block"}))}function wd(e){Xs(this,nd).style.display="none",Xs(this,nd).classList.remove(Qs),Xs(this,nd).classList.add(Js),Xs(this,nd).style.left="auto",Xs(this,nd).style.position="absolute",Xs(this,nd).style.top=`${e}px`,Xs(this,ad).call(this),Zs(this,dd,"stopFix"),setTimeout((()=>{Xs(this,nd).style.display="block"}))}function Sd(){Xs(this,nd).style.display="none",Xs(this,nd).classList.remove(Qs),Xs(this,nd).classList.remove(Js),Xs(this,nd).style.left="auto",Xs(this,nd).style.position=Xs(this,cd),Xs(this,nd).style.top=Xs(this,ud),Zs(this,dd,"unfix"),Xs(this,rd).call(this),setTimeout((()=>{Xs(this,nd).style.display="block"}))}function kd(){if("cancelled"===Xs(this,dd))return;const e=n.g.pageYOffset;Xs(this,hd)<e?"stopFix"!==Xs(this,dd)&&(Xs(this,ld).call(this,"stop stickiness"),Ks(this,md,wd).call(this,Xs(this,fd))):Xs(this,pd)<e?"affix"!==Xs(this,dd)&&(Xs(this,ld).call(this,"enabling stickiness"),Ks(this,gd,Td).call(this)):"unfix"!==Xs(this,dd)&&(Xs(this,ld).call(this,"reseting element"),Ks(this,vd,Sd).call(this))}function Id(){const e=ed(Xs(this,sd)).left;Xs(this,ld).call(this,"checkHorizontalPlacement triggered",Xs(this,nd).id,e),Zs(this,od,e),"fixed"===Xs(this,nd).style.position&&(Xs(this,ld).call(this,"checkHorizontalPlacement",e),Xs(this,nd).style.left=e+"px")}const Cd="billboard";(0,tt.fo)("sticky.billboard",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{log:t,getConfig:n,setConfig:i}=e;const r=n("sticky.billboard.secondary",{}),a=r.minPageHeight||900,o=(0,K.ap)().height>=a,s=r.enabled&&o,d=n("sticky.billboard.forceView",!1);if(!s||!d)return i("sticky.billboard.secondary.enabled",!1),void t(`bailing; secondaryEnabled: ${r.enabled}, minHeightForSecondaryMet: ${o}, forceViewEnabled: ${d}`);const l=n("adsRefresh",{slots:[],activeViewSlots:[]}),u=l.slots||[],c=u.filter((e=>e!==Cd)),p=l.activeViewSlots||[],h=p.filter((e=>{let{pos:t}=e;return t!==Cd}));i("adsRefresh",{...l,slots:c,activeViewSlots:h});const f=u.find((e=>e===Cd)),g=p.find((e=>{let{pos:t}=e;return t===Cd}));f?i("sticky.billboard.secondary",{...r,activeView:!1,refreshInterval:l.interval}):g&&i("sticky.billboard.secondary",{...r,activeView:!0,refreshInterval:g.interval}),t("Updated refresh config",n("adsRefresh")),t("stickyBillboard config",n("sticky.billboard"))},async run(e){var t,n,i;let{broker:r,getConfig:a,log:o}=e;const s=await r.until("ad rendered","billboard"),d=null==s||null===(t=s[0])||void 0===t||null===(n=t.slot)||void 0===n||null===(i=n.molAd)||void 0===i?void 0:i.parentId;o("billboard rendered, id:",d);const l=document.getElementById(d);if(!l)return;const u=K.s$?{log:o.extend("store"),element:l,startStickyOffset:(0,K.r7)(l).top}:{log:o.extend("store")};l.classList.remove("sticky");const c=function(e){let{log:t,element:n,startStickyOffset:i}=e;const r={closable:!1,refreshable:!0,refreshCount:0,sticky:!1},a=n&&i?{...r,affix:new _d({element:n,relativeHorizontalElement:n.parentElement||void 0,onAffix:()=>n.setAttribute("stuck","stuck"),onUnfix:()=>n.removeAttribute("stuck"),log:t,startStickyOffset:i})}:r;return new Qt(Hs,a,t)}(u);c.subscribe(((e,t)=>qs(r,e,t))),c.init(),async function(e){let{broker:t,getConfig:n,store:i}=e;t.once("unstick position","billboard",(()=>{i.deinit()})),t.on("disable force view when viewed","billboard",(()=>{i.dispatch({type:"limit sticky height"})})),t.on("disable sticky position","billboard",(()=>{i.dispatch({type:"disable stickyness"})})),t.on("stop refreshing ads",(()=>{i.dispatch({type:"disable refresh"})})),t.on("ad rendered","billboard",(()=>{i.dispatch({type:"refresh"})})),Bs().addEventListener("click",(e=>{e.target instanceof HTMLElement&&e.target.classList.contains("billboard-close")&&i.dispatch({type:"click close button"})})),"sticky disabled"!==await async function(e){let{broker:t,getConfig:n,store:i}=e;const{forceView:r,timeAfterScroll:a=5e3,timeAfterVisible:o=3e3,minimumVisibilityPeriod:s=3e3}=n("sticky.billboard",{});if(!r)return;i.dispatch({type:"infinitly stick"});const d=await Fs({broker:t,timeAfterScroll:a,timeAfterVisible:o,minimumVisibilityPeriod:s,waitMinVisiblity:!0});return"sticky disabled"!==d&&i.dispatch({type:"limit sticky height"}),d}({broker:t,getConfig:n,store:i})&&"sticky disabled"!==await async function(e){let{broker:t,getConfig:n,store:i}=e;const{enabled:r,initialRefresh:a=5e3,refreshInterval:o,displayDuration:s=3e3,activeView:d=!0}=n("sticky.billboard.secondary",{});if(!r)return;const l=new Promise((async e=>{await t.until("disable sticky position","billboard"),e("sticky disabled")}));if("sticky disabled"===await Promise.race([(0,et.Vs)(a),l]))return"sticky disabled";if(!i.state.refreshable)return;if(o&&t.emit("setup ad refresh",{pos:"billboard",id:"billBoard",interval:o,activeViewSlot:d}),t.emit("prepare to refresh ads",["billboard"]),t.emit("refresh ads",{ids:["billBoard"],reason:"secondary",positions:["billboard"]}),"sticky disabled"===await Promise.race([t.until("ad rendered","billboard"),l]))return"sticky disabled";i.dispatch({type:"infinitly stick",closable:!0});const u=await Fs({broker:t,timeAfterScroll:s,timeAfterVisible:s});return"sticky disabled"!==u&&i.dispatch({type:"limit sticky height"}),u}({broker:t,getConfig:n,store:i})&&i.dispatch({type:"limit sticky height"})}({broker:r,getConfig:a,store:c})}}),(0,tt.fo)("sticky.gallery",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.sticky.gallery.ads",["sticky_banner_gallery_top","sticky_banner_gallery_bottom"]),a=n("slots.enabled",{}),o=Object.keys(a),s=r.filter((e=>o.includes(e)));if(!s.length)return void i("no gallery ads enabled... bailing");const d=n("slotDescriptions.initial",{}),l=(0,Y.ei)(d,s);i("enabledAds",l);const u={};let c=null,p=null,h=null,f=null,g=null,m=null;const v={sticky_banner_gallery_top:e=>{p.style.top=`${e.height}px`},sticky_banner_gallery_bottom:e=>{h.style.bottom=`${e.height}px`,g.style.bottom=`${e.height+f.height}px`}},y=e=>{const t={width:["left","right"],height:["top","bottom"]},n="width"===e?0:1,i=Object.keys(l).filter((n=>n.includes(t[e][0])||n.includes(t[e][1])));if(i.length)return i.map((e=>{if(l[e].size.length)return 1===l[e].size.length?l[e].size[0][n]:l[e].size.reduce(((e,t)=>t[n]>e[n]?t[n]:e[n]))})).reduce(((e,t)=>t>e?t:e))},b=()=>{i("Gallery openned"),(()=>{const e=y("width"),t=y("height"),{innerWidth:n,innerHeight:i}=window,r=e?n-2*(e+20):n,a=t?i-2*t:i;Array.from(document.querySelectorAll("#mobileGallerySwipeWrap > div > div:first-child")).filter((e=>e.firstElementChild)).map((e=>e.firstElementChild)).forEach((e=>{const t=Ad(e);let n=Math.min(a/t.height,r/t.width);e.classList.contains(".vjs-video-container")&&a<r&&(n*=.78),e.style.transform=`scale(${n})`}))})(),Object.entries(l).forEach((e=>{let[n,r]=e;const a=(0,Y.ei)(r,["pos","id"]);i("creating gallery ad",a),u[n]={container:Ed({broker:t,rootElement:c,ad:a})},v[n]&&v[n](Ad(u[n].container)),MobileUtils.isMobile()&&(n.includes("top")&&(u[n].addEl=p),n.includes("bottom")&&(u[n].addEl=h))})),m=t.on("ad rendered",(e=>{const t=u[e]&&u[e].container.querySelector(".placeholder");t&&t.remove()}))},_=()=>{m.cancel(),MobileUtils.isMobile()&&MobileUtils.isLandscape()&&(p.style.top="0",h.style.bottom="0",g.style.bottom=`${f.height}px`),Object.entries(u).forEach((e=>{let[n,i]=e;i.container.remove(),t.emit("destroy slot",n)}))};MobileUtils.isMobile()&&window.addEventListener("orientationchange",(()=>{setTimeout((()=>{MobileUtils.isLandscape()?_():b()}),200)})),t.on("dom ready",(()=>{const e=document.getElementById("mobileGalleryModal");e&&(DM.pageEvents.subscribe("gallery.opened",b),DM.pageEvents.subscribe("gallery.closed",_),c=document.getElementById("mobileGallerySlider"),p=e.querySelector(".top-bar"),h=e.querySelector(".navigation-bar"),f=Ad(h),g=e.querySelector(".caption-bar"))}))}});const Ed=e=>{let{broker:t,rootElement:n=document.body,ad:i,className:r,cssText:a}=e;const o=document.createElement("div");o.id=i.pos;const s=document.createElement("div");return s.className="placeholder",o.appendChild(s),r&&(o.className=r),a&&(o.style.cssText=a),n.appendChild(o),t.emit("slot mounted",i),o},Ad=e=>{const t=getComputedStyle(e,"");return{width:(parseFloat(t.width)||0)+(parseFloat(t.borderLeftWidth)||0)+(parseFloat(t.borderRightWidth)||0),height:(parseFloat(t.height)||0)+(parseFloat(t.borderTopWidth)||0)+(parseFloat(t.borderBottomWidth)||0)}};function Pd(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function xd(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Dd(e,t,"get"))}function Od(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Dd(e,t,"set"),n),n}function Dd(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,tt.fo)("sticky.mpuLeft",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n,getConfig:i}=e;n("init");const r=i("slots.enabled",{});if(!Object.keys(r).includes("mpu_left"))return void n("mpu_left isn't enabled, bailing");const a=i("slotDescriptions.initial",{}),o=a.mpu_left;if(!o||(0,Y.xb)(o))return void n("insufficient config to render mpu_left... bailing",o);const s=new Promise((e=>{t.on("slot defined",(t=>{let{pos:n}=t;n.includes("sky_left_top")&&e()}))}));n("waiting for let sky container"),await s;const d=document.getElementById(a.sky_left_top.id);if(!d)return void n.error("no sky left element, bailing");const l=document.createElement("div");l.id=o.id,(0,Ne.insertAfter)(l,d);const u={...o};t.emit("slot mounted",u),n("slot created",u,l),document.documentElement.classList.add("mpu_left_on"),await t.until("ad rendered","mpu_left"),n("slot rendered")}}),(0,tt.fo)("sticky.psuedoClasses",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},async run(){await(0,Ne.loaded)();const e=new Bd(Fd),t=document.querySelectorAll(".sticky");for(const n of t)e.observe(n);const n=new MutationObserver((t=>function(e,t){for(const i of t){const t=i.target;t instanceof HTMLElement&&((n=t)instanceof Element&&n.classList.contains("sticky")?e.observe(t):e.unobserve(t))}var n}(e,t)));n.observe(document.body,{attributeFilter:["class"],attributes:!0,subtree:!0})}});var Rd=new WeakMap,Ld=new WeakMap,Md=new WeakMap,Ud=new WeakMap,jd=new WeakMap,Nd=new WeakMap;class Bd{constructor(e){Pd(this,Rd,{writable:!0,value:[]}),Pd(this,Ld,{writable:!0,value:[]}),Pd(this,Md,{writable:!0,value:void 0}),Pd(this,Ud,{writable:!0,value:e=>!xd(this,Ld).includes(e)&&(0,Ne.getOffset)(e).top<=window.scrollY}),Pd(this,jd,{writable:!0,value:e=>(0,Ne.getOffset)(e).top>window.scrollY}),Pd(this,Nd,{writable:!0,value:()=>{const e=xd(this,Rd).filter(xd(this,Ud)),t=xd(this,Ld).filter(xd(this,jd));xd(this,Ld).push(...e),Od(this,Ld,xd(this,Ld).filter((e=>!t.includes(e)))),(e.length||t.length)&&xd(this,Md).call(this,{in:e,out:t})}}),Od(this,Md,e),window.addEventListener("scroll",(0,nn.FU)(xd(this,Nd),300),{passive:!0})}observe(e){xd(this,Rd).includes(e)||xd(this,Rd).push(e)}unobserve(e){Od(this,Rd,(0,ne.cl)(e,xd(this,Rd)))}}function Fd(e){for(const t of e.in)t.setAttribute("stuck","stuck");for(const t of e.out)t.removeAttribute("stuck")}const qd=(e,t)=>{const n=e+"on",i=e+"off",r=document.documentElement;r.classList.remove(n),r.classList.remove(i),r.classList.add(t?n:i)};let Vd;(0,tt.fo)("sticky.skies",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:i,log:r}=e;if(Vd=t,!window.getComputedStyle)return;const a=n.g.DM||{log:()=>{}};try{(()=>{const e="molads_leader_top_";if(qd(e,!1),(0,se.isAdEnabled)({pos:"leader_top"})){const t=Vd.on("ad rendered","leader_top",(n=>{const i=n.slot?n.slot.molAd:{};"leader_top"===i.parentId&&(t.cancel(),document.getElementById(i.parentId),qd(e,!n.isEmpty))}))}})()}catch(e){a.log("Missing configuration for leaderboard")}((e,t)=>{e.forEach((e=>{/mpu_puff_\d{2,}/.test(e)&&((e,t)=>{if((0,se.isAdEnabled)({pos:e})){t("init sliding mpu",e);const n=Vd.on("ad rendered",e,(i=>{if(!i.isEmpty&&(!(r=i)||r.isEmpty||!r.size||2!==r.size.length||300!==r.size[0]||600!==r.size[1])){n.cancel();const i=document.getElementById(e);if(i){const e=(0,Ne.closest)(i,(e=>e.classList.contains("mpu_puff_wrapper")));e&&(e.classList.add("sliding_mpu"),((e,t,n)=>{n(e.id);const i=((e,t)=>{const n=window.getComputedStyle(t,null),i=(0,Ne.getOffset)(t).top,r=parseInt(n.getPropertyValue("height")),a=i+r,o=window.getComputedStyle(e,null),s=parseInt(o.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,Ne.getOffset)(e).top-i;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0)}return{elementTop:i+parseInt(e.dataset.originalPadding),parentBottom:a,parentHeight:r,elementHeight:s,parentTop:i,marginBottom:parseInt(n.getPropertyValue("margin-bottom"))}})(e,t),r=i.elementTop,a=i.parentBottom-i.elementHeight;new _d({element:e,startStickyOffset:r,stopStickyOffset:a,log:n.extend(e.id),relativeHorizontalElement:t,onAffix:()=>{e.style.bottom="",e.style.left=t.getBoundingClientRect().left+"px"},onStopfix:()=>{e.style.top="",e.style.bottom="0"}}).start()})(i,e,t))}}var r}))}})(e,t)}))})(i("stickyAds",[]),r),await async function(){await(0,Ne.loaded)();const e=document.querySelector(".puff li:nth-child(20)"),t=e?(0,Ne.getOffset)(e).top:5e3,n=document.querySelectorAll("\n    #sky-left-container .sticky-container:first-child,\n    #sky-right-container .sticky-container:first-child\n  ");for(const e of n)e.parentNode.querySelectorAll(".sticky-container")>1&&(e.style.height=`${t}px`)}()}});const Hd=()=>document.body.classList.contains("mol-desktop"),zd=window.innerWidth/window.screen.width;function Wd(e){let{broker:t,doc:n,getConfig:i,log:r}=e;if(!window.getComputedStyle)return;r("starting");const a=i("plugins.enabled").includes("chromelessv2.dmplayer");t.intercept("slot defined",((e,o)=>{let[s,d]=e;const{id:l,pos:u}=d,c=n.getElementById(l);if("sticky_banner"!==u||!a||(MobileUtils.isMobile()||(0,K.bP)())&&(0,K.ej)("smart-banner")){if("sticky_banner"===u)try{!function(e){let{broker:t,getConfig:n,log:i,ad:r}=e;const a=document.getElementById(r.id),o=n("pos.stickyBanner.hiddenUntilImpression",!0),s=n("pos.stickyBanner.underlayPadding.top",15),d=n("pos.stickyBanner.underlayPadding.bottom",15),l=n("pos.stickyBanner.underlayPadding.closeButton",!1);i("config:",{paddingTop:s,paddingBottom:d,hiddenUntilImpression:o});const u=document.createElement("div");u.id="stickyBannerUnderlay",o&&(u.style.display="none"),document.body.appendChild(u);const c=At();u.appendChild(c);const p=document.createElement("div");if(p.classList.add("adHolder"),p.classList.add("sticky_banner_overrides"),p.classList.add("noAdLabel"),p.id="stickyBanner",p.style.marginTop="0",u.style.padding=`${s}px 0 ${d}px 0`,u.appendChild(p),Hd()&&(0,Ne.appendStyle)(`#stickyBannerUnderlay #stickyBanner {\n      transform: scale(${zd});\n    }`),l){const e=document.createElement("button");e.classList.add("closeButton"),u.appendChild(e),e.addEventListener("click",(()=>{u.style.display="none"}))}t.on("ad rendered","sticky_banner",(e=>{let{isEmpty:t,size:n}=e;if(i("sticky banner rendered:",{isEmpty:t}),t)u.style.display="none";else{const e=n[1];if(u.style.display="flex",Hd()){i("ad height:",e);const t=e*zd-e,n=`${Math.round(s*zd+t/2)}px 0 ${Math.round(d*zd+t/2)}px 0`;u.style.padding=n,i("scalled padding:",n)}}})),a.parentNode.replaceChild(u,a)}({broker:t,getConfig:i,log:r,ad:d,container:c})}catch(e){console.error(e)}o(s,d)}}))}Wd.ccpa={enabledIfDissent:!0},Wd.gdpr={enabledIfDissent:!0};const $d=e=>{let{broker:t,getPuffListStart:n,getOffElement:i,pos:r,id:a=r}=e;const o=t.on("ad rendered",r,(e=>{if(!e.isEmpty){o.cancel();const e=document.getElementById(a);if(!e)return;((e,t,n)=>{const i=e.parentNode,r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;const n=getComputedStyle(t,null),i=(0,Ne.getOffset)(t).top,r=parseInt(n.getPropertyValue("height")),a=i+r,o=getComputedStyle(e,null),s=parseInt(o.getPropertyValue("height"));if(!e.dataset.originalPadding){const t=(0,Ne.getOffset)(e).top-i;t<0&&console.warn("negative padding"),e.dataset.originalPadding=Math.max(t,0)}return{elementTop:i+parseInt(e.dataset.originalPadding),parentBottom:a,parentHeight:r,elementHeight:s,parentTop:i,marginBottom:parseInt(n.getPropertyValue("margin-bottom")),marginTop:parseInt(o.getPropertyValue("margin-top"))}}(e,i),a=r.elementTop,o=(()=>{const i=t&&t()||function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.parentNode;return(0,Ne.walk)(t,(e=>e.classList.contains("mpu_puff_wrapper")&&e.querySelector("iframe")),(e=>e.nextElementSibling))}(e,n);return i?((e,t)=>{const n=e.previousElementSibling,i=getComputedStyle(n,null);return(0,Ne.getOffset)(n).top+parseInt(i.getPropertyValue("height"))-t})(i,r.elementHeight):1/0})(),s=o===1/0?o:(()=>{const e=(0,Ne.getRelativeContainer)(i);return e?o-(0,Ne.getOffset)(e).top:o})();i.style.height=r.parentHeight+"px",i.style.marginTop=r.marginTop+"px",new _d({element:e,log:()=>{},relativeHorizontalElement:i,startStickyOffset:a,stopStickyOffset:o,stoppedPosition:s}).start()})(e,i,n(e))}}))};function Gd(e){let{broker:t,getConfig:n,log:i}=e;if(!window.getComputedStyle)return;const r=n("stickyAds",[]);r.includes("mpu_puff_5")&&$d({broker:t,pos:"mpu_puff_5",getPuffListStart:e=>(0,Ne.getParent)(e,".item")}),r.includes("mpu_top")&&$d({broker:t,pos:"mpu_top",getPuffListStart:e=>{const t=(0,Ne.getParent)(e,".item"),n=(0,Ne.walk)(t,(e=>e.querySelector(".puff")),(e=>e.nextElementSibling));return n?n.querySelector(".puff li"):t}})}Gd.ccpa={enabledIfDissent:!0},Gd.gdpr={enabledIfDissent:!0};var Kd=n(6663);let Xd=()=>()=>{},Zd=(e,t)=>"function"==typeof t?t():t;if(performance.mark&&performance.measure){let e=0;Xd=t=>{const n="benchmark-"+e++;return performance.mark(`${n}-begin`),()=>{performance.mark(`${n}-end`),performance.measure(t,`${n}-begin`,`${n}-end`)}},Zd=(e,t)=>{const n=Xd(e);try{return"function"==typeof t.then?(t.then(n),t):t()}finally{n()}}}var Yd=n(500).Buffer;function Jd(e,t,n){return parseInt(e.substr(t,n),2)}function Qd(e,t,n){return new Date(100*Jd(e,t,n))}function el(e){const t=Jd(e);return String.fromCharCode(t+65).toLowerCase()}function tl(e,t,n){const i=e.substr(t,n);return el(i.slice(0,n/2))+el(i.slice(n/2))}function nl(e){let t=e;for(;t.length%4!=0;)t+="=";t=t.replace(/-/g,"+").replace(/_/g,"/");const n=Yd.from(t,"base64");let i="";for(let e=0;e<n.length;e+=1){const t=n[e].toString(2);i+=(r=t,a=8-t.length,function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",n="";for(let i=0;i<e;i+=1)n+=t;return n}(Math.max(0,a))+r)}var r,a;return function(e){const{decodedObject:t}=function(e){let{input:t,fields:n,startPosition:i=0}=e,r=i;const a=n.reduce(((e,n)=>{const{name:i,numBits:a}=n,{fieldValue:o,newPosition:s}=function(e){let{input:t,output:n,startPosition:i,field:r}=e;const{type:a,numBits:o,decoder:s,validator:d}=r;if("function"==typeof d&&!d(n))return{newPosition:i};if("function"==typeof s)return s(t,n,i);const l="function"==typeof o?o(n):o;switch(a){case"int":return{fieldValue:Jd(t,i,l)};case"date":return{fieldValue:Qd(t,i,l)};case"bits":return{fieldValue:t.substr(i,l)};case"language":return{fieldValue:tl(t,i,l)};default:throw new Error(`ConsentString - Unknown field type ${a} for decoding`)}}({input:t,output:e,startPosition:r,field:n});return void 0!==o&&(e[i]=o),void 0!==s?r=s:"number"==typeof a&&(r+=a),e}),{});return{decodedObject:a,newPosition:r}}({input:e,fields:[{name:"version",type:"int",numBits:6},{name:"created",type:"date",numBits:36},{name:"lastUpdated",type:"date",numBits:36},{name:"cmpId",type:"int",numBits:12},{name:"cmpVersion",type:"int",numBits:12},{name:"consentScreen",type:"int",numBits:6},{name:"consentLanguage",type:"language",numBits:12},{name:"vendorListVersion",type:"int",numBits:12},{name:"purposeIdBitString",type:"bits",numBits:24},{name:"maxVendorId",type:"int",numBits:16}]});return t}(i)}function il(e,t){ol(e,t),t.add(e)}function rl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function al(e,t,n){ol(e,t),t.set(e,n)}function ol(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function sl(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function dl(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,ul(e,t,"get"))}function ll(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,ul(e,t,"set"),n),n}function ul(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var cl=new WeakMap,pl=new WeakMap,hl=new WeakMap,fl=new WeakMap,gl=new WeakMap,ml=new WeakSet,vl=new WeakSet,yl=new WeakSet;class bl{constructor(e){il(this,yl),il(this,vl),il(this,ml),al(this,cl,{writable:!0,value:void 0}),al(this,pl,{writable:!0,value:void 0}),al(this,hl,{writable:!0,value:void 0}),rl(this,"brokerId",void 0),al(this,fl,{writable:!0,value:void 0}),rl(this,"context",void 0),rl(this,"tcfv2Version",void 0),rl(this,"tcfv2UiVersion",void 0),al(this,gl,{writable:!0,value:void 0});const{getConfig:t,log:i,broker:r,showUi:a,uiLevel:o="Level1",renderPlatform:s,repromptVersion:d,nextRepromptVersion:l,tracking:u,tcString:c,addtlConsent:p,nrvString:h}=e;this.context=e,ll(this,pl,i),ll(this,cl,r),this.tcfv2Version=t("tcfv2.version",""),this.tcfv2UiVersion=t("tcfv2.uiVersion",""),this.brokerId=Math.random().toString(36).substring(2),ll(this,gl,"@mol-ads/mol-adverts");const f=t("tcfv2.uiScriptBase","//www.dailymail.co.uk/static/mol-fe/static/mol-fe-cmp"),g=`${t("tcfv2.gvlUiVersion","51")}`,m=t("tcfv2.cvlVersion","0.0.1"),v=t("tcfv2.backendUrl","//cmp.dmgprivacyint.co.uk/gdpr/consent/persist"),y=t("tcfv2.uiFile","index.js"),b=t("tcfv2.brand",{}),_=`${f}/${this.tcfv2UiVersion}/${y}`,T=t("tcfv2.storeUserPreference",!1),w=t("tcfv2.scriptBase","//cmp.dmgmediaprivacy.co.uk/cmp"),S=t("tcfv2.nonRegisteredVenders",[{provider_id:"1",provider_name:"SofaScore",policy_url:"https://www.sofascore.com/privacy-policy"},{provider_id:"2",provider_name:"Qualifio",policy_url:"https://qualifio.com/privacy-policy/"},{provider_id:"3",provider_name:"Piwik PRO",policy_url:"https://piwik.pro/privacy-policy/"},{provider_id:"4",provider_name:"Mixpanel",policy_url:"https://mixpanel.com/legal/privacy-policy/"}]);ll(this,hl,`${w}/${this.tcfv2Version}/index.js`);const k=c&&nl(c)||void 0,I=(null==k?void 0:k.vendorListVersion)||`${t("tcfv2.gvlUiVersion","51")}`;this.consentStringLastUpdated=(null==k?void 0:k.lastUpdated)&&new Date(k.lastUpdated),ll(this,fl,{brand:b,brokerId:this.brokerId,repromptVersion:d,nextRepromptVersion:l,gvlVersion:I,gvlUiVersion:g,cvlVersion:m,showUi:a,uiLevel:o,uiScriptUrl:_,controllerScriptBase:`${w}/${this.tcfv2Version}`,tcString:c,addtlConsent:p,storeUserPreference:T,backendUrl:v,renderPlatform:s,platform:"web",nrvString:h,nonRegisteredVendors:S}),n.g.addEventListener("message",(async e=>{const t=e.data;"@mol-ads/mol-ads-cmp"===t.ns&&t.id===this.brokerId&&"is_ready"===t.action&&t.sender!==dl(this,gl)&&dl(this,cl).emit("TCFV2 controller ready"),"@mol-ads/mol-ads-cmp"===t.ns&&t.id===this.brokerId&&"level_changed"===t.action&&t.sender!==dl(this,gl)&&this.tracking.track({type:"custom",payload:{changed:!0,event:"ui-open",level:t.payload.currentLevel,module:"tcfv2"}})})),this.openUi=this.openUi.bind(this),this.tracking=u,dl(this,cl).on("plugins enabled",(()=>{window.postMessage({ns:"@mol-ads/mol-ads-cmp",id:this.brokerId,sender:dl(this,gl),action:"ads-initialised",payload:{}},"*")}))}loadController(){dl(this,pl).call(this,"loading controller..");const e=dl(this,fl).showUi?sl(this,yl,wl).call(this):void 0;return dl(this,fl).uuid=e,Promise.all([Zd("wait for external deps",sl(this,ml,_l).call(this))]).then((async()=>{dl(this,pl).call(this,"loading controller from:",dl(this,hl)),await Zd("tcfv2 controller load",sl(this,vl,Tl).call(this,dl(this,hl),dl(this,fl))),dl(this,pl).call(this,"controller loaded")}))}openUi(e){let{reason:t,uiLevel:n}=e;const i=sl(this,yl,wl).call(this);dl(this,pl).call(this,`opening tcfv2 banner, level: ${n}, reason: ${t}`),this.tracking.track({type:"custom",payload:{event:"ui-open",level:n,module:"tcfv2",reason:t}}),window.postMessage({ns:"@mol-ads/mol-ads-cmp",id:this.brokerId,sender:dl(this,gl),action:"open",payload:{uiLevel:n,uuid:i}},"*")}}function _l(){const{getConfig:e}=this.context;return new Promise((t=>{var i;"mol"===e("site")?(dl(this,pl).call(this,"awaiting for molFeReact_LOADED"),null===(i=n.g)||void 0===i||i.DM.later(["molFeReact_LOADED"],(()=>{dl(this,pl).call(this,"molFeReact_LOADED ready"),t()}))):t()}))}function Tl(e,t){return new Promise(((n,i)=>{const r=document.createElement("script");r.src=e,r.id="mol-ads-tcfv2-script",r.dataset.opts=JSON.stringify(t),r.onload=()=>n(),r.onerror=()=>i(new Error(`Error loading ${e}`)),document.head.appendChild(r)}))}function wl(){const{storage:e}=this.context;let t=e.getUuid();return t||(t=(0,mo.Z)(),e.setUuid(t)),t}class Sl{constructor(e){let{getConfig:t}=e;const n=t("tcfv2.storagePrefix","mol.ads");this.CONSENT_KEY=`${n}.cmp.tcf.client`,this.USER_CONSENT_DEGREE_KEY=`${n}.cmp.userConsentDegree`,this.GVL_VERSION_KEY=`${n}.cmp.tcf.gvlVersion`,this.UUID_KEY=`${n}.tcfv2.uuid`,this.TCFV1_CONSENT_FLAG_KEY=`${n}.cmp.consent`,this.TCFV1_CONSENT_STRING_KEY="euconsent",this.TCDATA_KEY=`${n}.cmp.tcf.cache`,this.TCFV2_REPROMPT=`${n}.cmp.tcfv2.reprompt`,this.TCFV2_LAST_REPROMPTED=`${n}.cmp.tcfv2.lastReprompted`}getConsent(){return localStorage.getItem(this.CONSENT_KEY)}setConsent(e){localStorage.setItem(this.CONSENT_KEY,e)}getConsentDegree(){return JSON.parse(localStorage.getItem(this.TCDATA_KEY)||"{}").getConsentDegree}setConsentDegree(e){localStorage.setItem(this.USER_CONSENT_DEGREE_KEY,e)}setLastReprompted(e){localStorage.setItem(this.TCFV2_LAST_REPROMPTED,JSON.stringify(e))}getVendorListVersion(){return localStorage.getItem(this.GVL_VERSION_KEY)}setVendorListVersion(e){localStorage.setItem(this.GVL_VERSION_KEY,e)}setRepromptVersion(e){localStorage.setItem(this.TCFV2_REPROMPT,JSON.stringify(e))}getUuid(){return localStorage.getItem(this.UUID_KEY)}setUuid(e){localStorage.setItem(this.UUID_KEY,e)}getTcfv1ConsentFlag(){return localStorage.getItem(this.TCFV1_CONSENT_FLAG_KEY)}getTcfv1ConsentString(){return localStorage.getItem(this.TCFV1_CONSENT_STRING_KEY)}getTCData(){const e=JSON.parse(localStorage.getItem(this.TCDATA_KEY)||"{}");return e&&e.getTCData||{}}getRepromptVersion(){let e;try{const t=localStorage.getItem(this.TCFV2_REPROMPT);t&&(e=JSON.parse(t))}catch(e){console.error("unabled to parse repromptVersion")}return e||{version:0,chance:Math.random()}}getLastReprompted(){return JSON.parse(localStorage.getItem(this.TCFV2_LAST_REPROMPTED)||"{}")}cleanup(){["mol.ads.cmp.customVendors"].forEach((e=>{localStorage.removeItem(e)}))}clearTcfV2(){[this.CONSENT_KEY,this.USER_CONSENT_DEGREE_KEY,this.GVL_VERSION_KEY,this.TCFV2_REPROMPT,this.UUID_KEY,this.TCFV2_LAST_REPROMPTED].forEach((e=>localStorage.removeItem(e)))}}class kl{constructor(e){this.context=e}async setup(){const{validTCDataP:e,registerPluginBouncer:t,log:n}=this.context,i=await e,r=new Set(await br("consentedVendors")),a=i.addtlConsent&&new Set(i.addtlConsent.substring(2).split(".").filter((e=>e)).map((e=>parseInt(e))));a&&n("using addtlConsent for bouncing"),this.context={...this.context,tcData:i,vendorConsents:r,addtlConsent:a},t(((e,t)=>{var i;const r=n.extend(e);r("running bouncer");const a=(null==t||null===(i=t.gdpr)||void 0===i?void 0:i.enabledIfDissent)||this.checkVendorIds(e,t)&&this.checkPurposeIds(e,t)&&this.checkGoogleAdditionalConsentVendorIds(e,t)&&this.checkLegIntPurposeIds(e,t);return r(`passed checks: ${a}`),a}))}checkVendorIds(e,t){const{log:n,vendorConsents:i}=this.context;if(!t.vendorIds||void 0===t.vendorIds.gdpr)return n("no vendorIds or gdpr defined"),!1;if(!1===t.vendorIds.gdpr)return n("plugin",e,"bounced because it is not supported where GDPR applies"),!1;if("N/A"===t.vendorIds.gdpr)return n("restrictions not applicable"),!0;if(!Array.isArray(t.vendorIds.gdpr))return n.warn("gdpr vendorIds must be an array, but got:",t.vendorIds.gdpr),!1;const r=t.vendorIds.gdpr.filter((e=>!i.has(e)));return!r.length||(n("plugin",e,"bounced because user have not consented to vendors:",r),!1)}checkPurposeIds(e,t){const{log:n,tcData:i}=this.context;if(!t.purposeIds||void 0===t.purposeIds.gdpr)return n("no purposesIds or gdpr defined"),!1;if("N/A"===t.purposeIds.gdpr)return n("restrictions not applicable"),!0;if(!Array.isArray(t.purposeIds.gdpr))return n.warn("gdpr purposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const r=t.purposeIds.gdpr.filter((e=>!i.purpose.consents[e]));return!r.length||(n("plugin",e,"bounced because user have not consented to purposes:",r),!1)}checkLegIntPurposeIds(e,t){const{log:n,tcData:i}=this.context;if(!t.legIntPurposeIds||void 0===t.legIntPurposeIds.gdpr)return!0;if(!Array.isArray(t.legIntPurposeIds.gdpr))return n.warn("gdprPurposeIds must be an array, but got:",t.purposeIds.gdpr),!1;const r=t.legIntPurposeIds.gdpr.filter((e=>!i.purpose.legitimateInterests[e]));return!r.length||(n("plugin",e,"bounced because user have not consented to legitimate interests:",r),!1)}checkGoogleAdditionalConsentVendorIds(e,t){if(!t.vendorIds||void 0===t.vendorIds.google)return!0;const{addtlConsent:n,log:i}=this.context,r=t.vendorIds.google.filter((e=>!n.has(e)));return!r.length||(i("plugin",e,"bounced because user have not consented to google's additional consent:",r),!1)}}const Il={yes:"true",no:"false",partial:"custom"};var Cl=n(6716);function El(e,t){Pl(e,t),t.add(e)}function Al(e,t,n){Pl(e,t),t.set(e,n)}function Pl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function xl(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Rl(e,t,"get"))}function Ol(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Dl(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Rl(e,t,"set"),n),n}function Rl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Ll=new WeakMap,Ml=new WeakMap,Ul=new WeakMap,jl=new WeakMap,Nl=new WeakMap,Bl=new WeakSet,Fl=new WeakSet;class ql{constructor(e){let{account:t,broker:n,log:i,storage:r}=e;El(this,Fl),El(this,Bl),Al(this,Ll,{writable:!0,value:void 0}),Al(this,Ml,{writable:!0,value:void 0}),Al(this,Ul,{writable:!0,value:void 0}),Al(this,jl,{writable:!0,value:void 0}),Al(this,Nl,{writable:!0,value:void 0}),Dl(this,Ll,t),Dl(this,Ul,i),Dl(this,Ml,n),Dl(this,jl,r),Dl(this,Nl,Ol(this,Bl,Vl)),this.init=this.init.bind(this)}init(){xl(this,Ml).once("system ready",(()=>{Dl(this,Nl,Ol(this,Fl,Hl))}))}track(e){xl(this,Nl).call(this,e)}}function Vl(e){const t={account:xl(this,Ll),...e};xl(this,Ul).call(this,"sending to bidmax using barebones",t),(0,Cl.H)(t)}function Hl(e){const t={...e,payload:{validConsent:xl(this,jl).getConsentDegree()||void 0,...e.payload}};xl(this,Ul).call(this,"sending event to bidmax",t),xl(this,Ml).emit("send event to bidmax",t)}function zl(e,t,n){Wl(e,t),t.set(e,n)}function Wl(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $l(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}function Gl(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Xl(e,t,"get"))}function Kl(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Xl(e,t,"set"),n),n}function Xl(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Zl=new WeakMap,Yl=new WeakMap,Jl=new WeakMap,Ql=new WeakMap,eu=new WeakMap,tu=new WeakMap,nu=new WeakMap,iu=new WeakMap,ru=new WeakMap,au=new WeakMap,ou=new WeakSet;class su{constructor(e){let{broker:t,log:n,openUi:i,pageUnload:r,storage:a,tracking:o,userRepromptUpdate:s,debugRepromptData:d,openBarrier:l}=e;!function(e,t){Wl(e,t),t.add(e)}(this,ou),zl(this,Zl,{writable:!0,value:void 0}),zl(this,Yl,{writable:!0,value:void 0}),zl(this,Jl,{writable:!0,value:void 0}),zl(this,Ql,{writable:!0,value:void 0}),zl(this,eu,{writable:!0,value:void 0}),zl(this,tu,{writable:!0,value:void 0}),zl(this,nu,{writable:!0,value:void 0}),zl(this,iu,{writable:!0,value:void 0}),zl(this,ru,{writable:!0,value:void 0}),zl(this,au,{writable:!0,value:void 0}),Kl(this,iu,t),Kl(this,Yl,r),Kl(this,Zl,o),Kl(this,Jl,n),Kl(this,eu,i),Kl(this,tu,a),Kl(this,Ql,{bannerOpenedReason:"unknown",refreshOnClose:!1}),Kl(this,nu,s),Kl(this,ru,d),Kl(this,au,l),Gl(this,Jl).call(this,"userRepromptUpdate",s)}async handleAction(e,t){const{openRequest:n,tcData:i}=t;switch(e){case"uiOpened":Gl(this,Zl).track({type:"custom",payload:{event:"ui-opened",module:"tcfv2",reason:Gl(this,Ql).bannerOpenedReason}}),(e=>!!e.tcString.length)(i)&&(Gl(this,Jl).call(this,"ui displayed for existing user"),Gl(this,Ql).refreshOnClose=!0),Gl(this,Yl).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"newUser":Gl(this,Jl).call(this,"opening UI for new user:",i.eventStatus),Gl(this,Ql).bannerOpenedReason="newUser",Gl(this,eu).call(this,{uiLevel:"Level1",reason:Gl(this,Ql).bannerOpenedReason}),Gl(this,Yl).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"tcStringExpired":Gl(this,Jl).call(this,"opening UI as tcString expired"),Gl(this,Ql).bannerOpenedReason="tcStringExpired",Gl(this,eu).call(this,{uiLevel:"Level1",reason:Gl(this,Ql).bannerOpenedReason}),Gl(this,Yl).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"repromptUser":Gl(this,Jl).call(this,"opening UI due to reprompt"),Gl(this,Ql).bannerOpenedReason="reprompt",Gl(this,eu).call(this,{uiLevel:"Level1",reason:Gl(this,Ql).bannerOpenedReason}),Gl(this,Yl).updatePageUnloadData("tcfv2",{status:`${e}`});break;case"loaded":Gl(this,Jl).call(this,"tcf loaded"),Gl(this,Zl).track({type:"custom",payload:{event:"loaded",module:"tcfv2"}}),await $l(this,ou,du).call(this,i),Gl(this,Yl).updatePageUnloadData("tcfv2",{status:"loaded"}),Gl(this,au).call(this);break;case"uiClosed":if(Gl(this,Jl).call(this,"uiClosed"),await $l(this,ou,du).call(this,i),"reprompt"===Gl(this,Ql).bannerOpenedReason){const e=Gl(this,tu).getTCData().repromptVersion,t=Gl(this,tu).getLastReprompted();(null==t?void 0:t.version)===i.repromptVersion&&(Gl(this,Zl).track({type:"custom",payload:{daysSinceReprompt:Math.floor((Date.now()-t.date)/864e5),event:"reprompt-error",lastRepromptVersion:t.version,jounery:Gl(this,Yl).getPageUnloadData("tcfv2"),module:"tcfv2",onClosedStoredTCDataVersion:e,tcDataRepromptVersion:i.repromptVersion,...Gl(this,ru)}}),Gl(this,Yl).updatePageUnloadData("tcfv2",{status:"error"})),Gl(this,tu).setLastReprompted({date:Date.now(),version:i.repromptVersion})}Gl(this,Zl).track({type:"custom",payload:{event:"ui-closed",module:"tcfv2",reason:Gl(this,Ql).bannerOpenedReason}}),Gl(this,Yl).updatePageUnloadData("tcfv2",{status:`${e}`}),Gl(this,Ql).bannerOpenedReason="unknown",Gl(this,au).call(this);break;case"cached":Gl(this,Jl).call(this,"cached tcData, ignoring");break;case"openRequest":Gl(this,Ql).bannerOpenedReason=n.reason,Gl(this,Yl).updatePageUnloadData("tcfv2",{status:`${e}-${n.reason}`});break;default:await $l(this,ou,du).call(this,i)}}}async function du(e){const t=(null==e?void 0:e.repromptVersion)||0;Gl(this,tu).setRepromptVersion({...Gl(this,nu),version:t}),await n.g.adverts.updateCache(e,Gl(this,Jl)),Gl(this,Jl).call(this,"storage update complete")}function lu(e,t,n){uu(e,t),t.set(e,n)}function uu(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cu(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,hu(e,t,"get"))}function pu(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,hu(e,t,"set"),n),n}function hu(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}const fu={capture:!0,passive:!0},gu=["pagehide","beforeunload","unload"];var mu=new WeakMap,vu=new WeakMap,yu=new WeakMap,bu=new WeakMap,_u=new WeakMap,Tu=new WeakSet;class wu{constructor(e){let{broker:t,log:n,tracking:i}=e;!function(e,t){uu(e,t),t.add(e)}(this,Tu),lu(this,mu,{writable:!0,value:void 0}),lu(this,vu,{writable:!0,value:void 0}),lu(this,yu,{writable:!0,value:void 0}),lu(this,bu,{writable:!0,value:void 0}),lu(this,_u,{writable:!0,value:void 0}),pu(this,mu,t),pu(this,vu,n),pu(this,yu,{}),pu(this,bu,i),pu(this,_u,!1),this.init=this.init.bind(this)}init(){const e=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,Tu,Su).bind(this);gu.forEach((t=>{window.addEventListener(t,e,fu)})),cu(this,mu).once("system ready",(()=>{cu(this,mu).register("call for page-unload",(()=>cu(this,yu))),gu.forEach((t=>{window.removeEventListener(t,e,fu)}))}))}updatePageUnloadData(e,t){cu(this,yu)[e]=(cu(this,yu)[e]?`${cu(this,yu)[e]},${t.status}`:t.status).substring(0,200),cu(this,vu).call(this,"payload",cu(this,yu))}getPageUnloadData(e){return cu(this,yu)[e]||""}}function Su(){cu(this,_u)||(pu(this,_u,!0),cu(this,vu).call(this,"onUnload called",cu(this,yu)),cu(this,bu).track({type:"page-unload",payload:{...cu(this,yu)}}))}async function ku(e){const{broker:t,device:i,getConfig:r,isTCFV2Jurisdiction:a,log:o,setConfig:s,queryParams:d}=e,l=o.extend("main");if(!await a(r))return void l("tcfv2 is not supported for this geo, bailing");const u=new Sl(e);u.cleanup();const c=r("site","mol"),p=new ql({account:c,broker:t,log:o.extend("tracking"),storage:u});p.init();const h=u.getTCData(),f=d.addtl_consent||h.addtlConsent,g=d.gdpr_consent||h.tcString,m=h.nrvString;if(d.gdpr_consent||d.addtl_consent){const e=new URLSearchParams(n.g.location.search);["gdpr_consent","addtl_consent"].forEach((t=>e.delete(t)));const t=(e=>{const{done:t}=e.keys().next();return!t})(e)?`?${e}${n.g.location.hash}`:`${n.g.location.pathname}${n.g.location.hash}`;history.replaceState(null,"remove query params to ensure bid requests don't exceed size",t)}(d.gdpr_consent&&d.gdpr_consent!==h.tcString||d.addtl_consent&&d.addtl_consent!==h.addtlConsent)&&(l("new consent string provided, clearing cache"),(0,Kd.LK)(),u.clearTcfV2());const v=r("tcfv2.reprompt",{version:0,chance:0}),y=u.getRepromptVersion(),b=u.getTCData().repromptVersion,_=b||y.version||0,T=!d.gdpr_consent&&_<v.version&&y.chance<v.chance;l(`reprompt - should: ${T}, config chance: ${v.chance}, user chance: ${y.chance}, config version: ${v.version}, user version: ${_}`);const w={version:v.version,chance:y.chance},S={storedTCDataVersion:b,storedRepromptVersion:y.version,chosenRepromptVersion:_,repromptConfigVersion:v.version,shouldRepromptUser:T,userRepromptUpdateVersion:w.version,isConsentStringProvided:!!d.gdpr_consent},k=d.privacy;k&&t.once("TCFV2 controller ready",(()=>{l('removing "privacy" from url'),(0,K.WH)("privacy")})),e={...e,log:o.extend("controller"),renderPlatform:i||r("tcfv2.renderPlatform",""),storage:u,showUi:k,uiLevel:k&&"Level2",repromptVersion:_,nextRepromptVersion:v.version,tracking:p,tcString:g,addtlConsent:f,nrvString:m};const I=new bl(e),{brokerId:C,openUi:E,consentStringLastUpdated:A}=I;o("consentStringLastUpdated",A),(0,Kd.oP)(),function(e){e.once("dom ready",(()=>{document.querySelectorAll("a[href^='javascript:window.__cmp.a.push([\\'openSettings\\']']").forEach((e=>{e.href="javascript:window.openUi({ uiLevel: 'Level2', reason: 'userRequest' })"}))}))}(t);const P=new wu({broker:t,log:o.extend("pageUnload"),tracking:p});P.init();const x=(e=>{const t=new Date;return t.setMonth(t.getMonth()-e),t})(r("tcfv2.consentMaxAgeMonths",12)),O=r("tcfv2.allowBanner",!0),{resolve:D,promise:R}=(0,et.PQ)(),L=new su({broker:t,log:o.extend("eventsHandler"),openUi:O?E:()=>{},pageUnload:P,storage:u,tracking:p,userRepromptUpdate:w,debugRepromptData:S,openBarrier:O?D:()=>{}});!function(e,t,i){n.g.openUi=t=>{const{reason:n="unknown",uiLevel:r="Level1"}="string"==typeof t?{uiLevel:t,reason:"unknown"}:t||{};i.handleAction("openRequest",{openRequest:{reason:n}}),e({reason:n,uiLevel:r})},n.g.dissentUserToAll=()=>{window.postMessage({ns:"@mol-ads/mol-ads-cmp",id:t,sender:"@mol-ads/mol-adverts",action:"dissentUserToAll"},"*")},n.g.ctv=()=>{n.g.__tcfapi("hasUserConsentedToVendors",2,(e=>console.log("d",e)),[1,2,4])}}(E,C,L),function(e){let{consentStringValidFrom:t,shouldReprompt:i,userRepromptUpdate:r,stateHandler:a}=e;n.g.__tcfapi("addEventListener",2,(async e=>{const n=e.repromptVersion||0,o=((e,t,n,i,r)=>(e=>e.cached)(e)?"cached":(e=>"cmpuishown"===e.eventStatus)(e)?"uiOpened":(e=>"tcloaded"===e.eventStatus&&!e.tcString.length)(e)?"newUser":((e,t)=>nl(e.tcString).lastUpdated<(t||0))(e,r)?"tcStringExpired":((e,t,n,i)=>"tcloaded"===e.eventStatus&&e.tcString.length&&t&&i<n.version)(e,t,n,i)?"repromptUser":(e=>"useractioncomplete"===e.eventStatus)(e)?"uiClosed":"loaded")(e,i,r,n,t);a.handleAction(o,{tcData:e})}))}({consentStringValidFrom:x,userRepromptUpdate:w,shouldReprompt:T,stateHandler:L}),I.loadController(),(!(0,Kd.hd)()||T||(A||0)<x)&&(l("waiting for barrier to unblock"),await R);const M=br("getValidTCData"),U=br("getConsentDegree");e={...e,validTCDataP:M,pValidConsentDegree:U,controllerHandler:I,log:o.extend("bouncer")},U.then((e=>{l("consent: ",e),s("cmp.consent",e)})),await new kl(e).setup(),async function(e){let{controllerHandler:{tcfv2Version:t,tcfv2UiVersion:n},log:i,pValidConsentDegree:r,broker:a,validTCDataP:o}=e;const s=new Promise((async e=>{const[a,s]=await Promise.all([o,r]);i("consentDegree",s);const d=nl(a.tcString);i("decoded:",d);const l=d.vendorListVersion,u={cmp:"tcfv2",cmpVersion:`${t.length?t:"DEV"} ${n.length?n:"DEV"}`,consent:s,gdpr:{iabv:String(l)},cmpId:d.cmpId};i("bidmax targeting:",u),e(u)}));a.register("call for page analytics",(()=>s))}(e),(async e=>{const{broker:t,log:n}=e,i=(async e=>{let{validTCDataP:t,pValidConsentDegree:n,log:i,broker:r,getConfig:a}=e;const o=a("tcfv2.par",{vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]}}),s=await t,d=await n;i("consentDegree",d);const l=nl(s.tcString).vendorListVersion,u={consent:Il[d],gdpr:s.gdprApplies?"1":"0",gdpr_consent:s.tcString,cmp:"tcfv2",iabv:l},c=await pt("tcfv2.personalisedAds",o);u.google_consent=c;const p=c?0:1,h=c?u:{...u,npa:p};return i("dfp targeting:",h),h})(e);t.emit("set page level targeting",i),((e,t)=>{let{broker:n,getConfig:i,log:r}=e;i("tcfv2.setGptPersonalisedAdsState",!0)&&n.once("gpt initialized",(async e=>{(await t).google_consent?r("google personalised ads enabled"):(r("setting non-personalised ads"),e.pubads().setRequestNonPersonalizedAds(1))}))})(e,i);const r=await i,a=r.google_consent?0:1,o={cust_params:{...r},npa:a};n("video tags",o),t.emit("sync video tags update",o),n("done with gpt")})(e);const j=await M;t.emit("TCData",j),t.on("openCmpBanner",(()=>{L.handleAction("openRequest",{openRequest:{reason:"userRequest"}}),I.openUi({uiLevel:"Level2",reason:"userRequest"})})),l("resume loading ads bundle...")}(0,tt.fo)("tcfv2",{gdpr:{enabledIfDissent:!0},init:ku,initTimeout:un.RD}),ku.isAdsFreeSupported=!0;const Iu=ku;(0,tt.fo)("botsPlugin",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{getConfig:t,setConfig:n}=e;const i=function(e){return e("bots",[]).some((e=>{let{ip:t,ua:n}=e;const i=PageCriteria.clientIP===t;return n?i&&navigator.userAgent===n:i}))}(t)||/(?:[bB]ot|BOT|GrapeshotCrawler)s?\b/.test(navigator.userAgent);n("bots.isBotDetected",i)},run:function(e){let{broker:t,getConfig:n}=e;t.emit("set page level targeting",{bot:n("bots.isBotDetected")})}}),(0,tt.fo)("browserResolutionPlugin",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;if(n("bots.isBotDetected"))return;const r=()=>{const{width:e,height:n}=(0,K.ap)();i("setting browserResolution page-level targeting",e,n),t.emit("set page level targeting",{sw:e,sh:n}),t.emit("sync video tags update",{cust_params:{sw:e,sh:n}})};window.addEventListener("resize",(0,nn.Ds)(r,300)),r()}}),(0,tt.fo)("pageArea",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t}=e;const i=()=>{t.emit("set page level targeting",{area:n.g.adAreaId,subarea:n.g.adSubareaId})};t.on("set adSubareaId",(e=>{n.g.adSubareaId=e,i()})),i()}}),(0,tt.fo)("visits",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:async function(e){let{broker:t,getConfig:n,log:i}=e;const r=await async function(e,t){let[n,i,r]=await Promise.all([Au(e)?Pu(t):{},xu(e,t),Ou(t)]);t("cmpData",n),t("rtaData",i),t("visits",r);const{visitId:a}=i,o=localStorage.getItem(Eu);return a&&o!==a&&(t("visitId changed:",{lastKnownVisitId:o,visitId:a}),localStorage.setItem(Eu,a),r++,t("bumping visit count",r),localStorage.setItem(Cu,""+r)),{...n,...i,visits:r}}(n,i),{visits:a}=r;i("targeting",r),t.emit("set page level targeting",{visits:a}),t.register("call for page analytics",(()=>r))}});const Cu="mol.ads.visits.counterInt",Eu="mol.ads.visits.lastKnownVisitId",Au=e=>e("plugins.enabled").includes("tcfv2")&&e("tcfv2.enabled")||e("plugins.enabled").includes("cmp");async function Pu(e){const t=nl(await new Promise((e=>{n.g.__tcfapi?n.g.__tcfapi("getTCData",2,(t=>{let{tcString:n}=t;e(n)})):n.g.__cmp&&n.g.__cmp("getConsentData",null,(t=>{let{consentData:n}=t;e(n)}))}))).created,i=Math.floor((Date.now()-t.getTime())/1e3/60/60/24);return e("days since cmp created:",i),{cmpCreated:t,cmpDays:i}}async function xu(e,t){if(n.g.RTA&&n.g.RTA.ids&&n.g.RTA.ids.then){const i=e("visits.rtaDataTimeout",5e3),{results:r}=await(0,et.Ye)(i,[n.g.RTA.ids]);if(r.length){const{created:e,visitId:n}=r[0],i=Math.floor((Date.now()-e)/1e3/60/60/24);return t("days since RTA created:",i),{rtaCreated:e,rtaDays:i,visitId:n}}}return{}}async function Ou(e){const t=parseInt(localStorage.getItem(Cu));return isNaN(t)?(async()=>{e("no local storage found, trying to fetch visits count from cookie"),await Promise.race([Ut(),(0,et.Vs)(200)]);const t=function(){const e=xt("mol.ads.sessionStarted")||!1;let t=parseInt((0,K.ej)("mol.ads.visits"));return isNaN(t)&&(t=0),e||(Ot("mol.ads.sessionStarted",!0),(0,K.zP)("mol.ads.visits",t)),t}();return e("cookie visits:",t),localStorage.setItem(Cu,""+t),t})():t}var Du=n(1211),Ru=n.n(Du);const Lu=(e,t)=>Array.isArray(e)&&e.concat(t)||void 0,Mu=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ru()({},...t,Lu)};(0,tt.fo)("trackers.quantcast.userSync",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,log:n}=e;t.on("prebid loaded",(e=>{const t=e.getConfig("userSync"),i={userSync:Mu(t,{userIds:[{name:"quantcastId"}]})};n("setting pbjs config",i),e.setConfig(i)}))},vendorIds:{gdpr:[11]}}),(0,tt.fo)("trackers.admantx",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:i}=e;i("starting");const{request:r,endPoint:a}=n("trackers.admantx",Uu),{href:o}=window.location;r.body=o.substring(0,o.indexOf("?"))||o;const s=JSON.stringify(r),d=`${a}?request=${s}`,l={"Content-Type":"text/plain","Content-Length":s.length,Connection:"keep-alive"},u=new Promise(((e,t)=>{fetch(d,{method:"GET",headers:l}).then((async n=>{const i=await n.json(),{info:a}=i;if("OK"!==a)t(new Error(`Admantx fetch error: ${a}.`));else{const t=(r.filter.includes("default")?ju:r.filter).map((e=>i[e])).filter((e=>e)).reduce(((e,t)=>[...e,...t.map((e=>e.name))]),[]);e(t)}})).catch(t)}));t.register("dmp","admantx",(async()=>await u)),t.emit("set page level targeting",u.then((e=>({"ias-bsp":e}))));const c=await u;i("targeting:",c),t.emit("admantx loaded"),t.emit("send with rta page unload",{brandSafety:c.includes("ias_safe")?"safe":"unsafe"})},vendorIds:{gdpr:[278]}});const Uu={endPoint:"https://euasync01.admantx.com/admantx/service",request:{key:"d4d1cdf427f06ebc6ee7e0a3ffbcaecdfbfe517eca18a41d9126f88bdb16e7f0",type:"url",method:"descriptor",mode:"async",decorator:"json",filter:["admants"]}},ju=["categories","feelings","entities","admants"],Nu=function(){const e=function(){const e=[];for(let t=1;t<=20;t++)e.push(t);return e}();return{getTags:function(){const t=function(){if(e.length){const t=(0,un.MX)(0,e.length-1);return e.splice(t,1)}}();if(t)return{adx_channel:t}}}};function Bu(e){let{broker:t}=e;const n=Nu();t.register("get tags",(()=>{const e=n.getTags();return e&&[e]})),t.register("get video tags",(e=>{const{pos:t}=e,i=n.getTags();if("jwplayer"===t&&i)return{cust_params:i}}))}function Fu(e){let{broker:t,log:i}=e;const r=(()=>{const e=[window.screen.width,window.screen.height],t=t=>t[0]===e[0]&&t[1]===e[1];n.g.DM.molFeMobileutils.isLandscape()&&e.reverse();const i={iphone:{iphone6:()=>t([375,667]),iphone6p:()=>t([414,736]),iphone5:()=>t([320,568])},other:{ipad:n.g.DM.molFeMobileutils.isIPad,other:()=>!n.g.DM.molFeMobileutils.isMobile()&&!(0,K.bP)(),windows10:K.bP}},r={touch:()=>"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0};function a(){const e=i[PageCriteria.device]||{};return Object.keys(e).find((t=>e[t]()))||PageCriteria.device}return{getTags:()=>[{device:a(),device_features:Object.keys(r).filter((e=>r[e]()))}]}})(),[a]=r.getTags();i(a),t.emit("set page level targeting",a)}async function qu(e){let{broker:t,getConfig:n}=e;const i={id5:!0};t.emit("set page level targeting",i),t.register("call for page analytics",(()=>i));const r=n("trackers.id5.partnerId"),a=n("trackers.id5.cascades");r?function(e){let{partnerId:t,cascades:n=9}=e;const i={partnerId:t,cascades:n,hasTcfCmp:!0,debug:K.SP["mol.ads.id5.debug"],makeUrl:function(){const e=void 0!==this.callType&&"sync"===this.callType.toLowerCase()&&this.myUid&&this.myUid.length>0;return"https://id5-sync.com/"+(e?"s":"i")+"/"+this.partnerId+"/"+this.cascades+".gif?"+(e?"puid="+encodeURIComponent(this.myUid)+"&":"")+"gdpr="+encodeURIComponent(this.gdprApplies||"")+"&gdpr_consent="+encodeURIComponent(this.consentData||"")},prepareId5Pixel:function(){"loading"!==document.readyState?this.fireId5Pixel():document.addEventListener("DOMContentLoaded",(function(){i.fireId5Pixel()}))},fireId5Pixel:function(){const e=this.makeUrl();this.log("[ID5] Firing ID5 pixel at url:",e),(new Image).src=e},processTcfResults:function(e){this.log("[ID5]: Received TCF result",e),this.gdprApplies=e.gdprApplies,this.consentData=e.consentData},init:function(){if(this.hasTcfCmp)try{window.__cmp("getConsentData",null,(function(e){i.processTcfResults(e),i.prepareId5Pixel()}))}catch(e){i.log("[ID5]: Exception received while calling TCF CMP",e),i.prepareId5Pixel()}else i.prepareId5Pixel()},log:function(e,t){this.debug&&console.log("[ID5] "+e,t)}};i.init()}({partnerId:r,cascades:a}):console.error("[ID5] Missing Partner ID from configuration.")}function Vu(e){let{broker:t,getConfig:n}=e;n("bots.isBotDetected")||t.emit("set page level targeting",{random:[window.PageCriteria.pageViewId],impid:[(0,un.kb)()]})}function Hu(e){let{broker:t,getConfig:n}=e;const i=n("plugins.ixIdentify.scriptUrl","//js-sec.indexww.com/ht/p/184669-186298276891027.js"),r=t.invoke("load script",i,"headertag");t.register("prebid prerequisites",(()=>r))}Bu.ccpa={enabledIfDissent:!0},Bu.gdpr={enabledIfDissent:!0},Fu.ccpa={enabledIfDissent:!0},Fu.gdpr={enabledIfDissent:!0},qu.vendorIds={gdpr:[131]},qu.purposeIds={gdpr:"N/A"},Vu.ccpa={enabledIfDissent:!0},Vu.gdpr={enabledIfDissent:!0},Hu.pluginSetup=e=>{let{getConfig:t,setConfig:n}=e;const i=t("plugins.enabled"),r=i.findIndex((e=>"prebid"===e));if(~r){const e=r-1;n("plugins.enabled",[...new Set([...i.slice(0,e),"trackers.ixIdentity",...i.slice(e)])])}};const zu=Hu;async function Wu(e){let{getConfig:t}=e;const n=t("plugins.smartclip.url","https://sync.sxp.smartclip.net/sync?type=red&dsp=10");kt({url:n})}function $u(e){let{broker:t}=e;n.g._tfa=n.g._tfa||[],n.g._tfa.push({notify:"event",name:"page_view",id:1125455}),document.getElementById("tb_tfa_script")||t.invoke("import script","//cdn.taboola.com/libtrc/unip/1125455/tfa.js",{id:"tb_tfa_script"})}Hu.vendorIds={gdpr:[10]},Hu.purposeIds={gdpr:"N/A"},Wu.vendorIds={gdpr:[115]},Wu.purposeIds={gdpr:"N/A"},$u.vendorIds={gdpr:[42]},$u.purposeIds={gdpr:[1]};const Gu=e=>{let{broker:t,getConfig:n,log:i}=e;t.on("prebid loaded",(e=>{const t=e.getConfig("userSync"),r={userSync:Mu(t,{userIds:[{name:"unifiedId",params:{url:"//match.adsrvr.org/track/rid?ttd_pid=a8r0pns&fmt=json"},storage:{type:"cookie",name:"pbjs-unifiedid",expires:60}}],syncDelay:n("plugins.prebid.syncDelay",3e3)})};i("setting pbjs config",r),e.setConfig(r)}))},Ku=Gu;Gu.purposeIds={gdpr:[1]},Gu.vendorIds={gdpr:"N/A"};const Xu=e=>{let{broker:t,getConfig:n,log:i}=e;const r=n("trackers.universalIds",[]);r.length&&t.on("prebid loaded",(e=>{const t=e.getConfig("userSync"),a={userSync:Mu(t,{userIds:r,syncDelay:n("plugins.prebid.syncDelay",3e3)})};i("setting pbjs config",a),e.setConfig(a)}))};Xu.purposeIds={gdpr:[1]},Xu.vendorIds={gdpr:"N/A"};const Zu=Xu,Yu=()=>{};class Ju{constructor(e){this.callbacks=new Map,this.intersectionObserver=new IntersectionObserver(this._onIntersect.bind(this),e)}_onIntersect(e){e.forEach((e=>{(this.callbacks.get(e.target)||Yu)(e,e.intersectionRatio>=Math.min(...this.intersectionObserver.thresholds))}))}observe(e,t){return this.callbacks.set(e,t),this.intersectionObserver.observe(e),()=>this.intersectionObserver.unobserve(e)}unobserve(e){this.callbacks.delete(e),this.intersectionObserver.unobserve(e)}}function Qu(e){const t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}const ec=(0,S.x)("AdsRefresher");class tc{constructor(){let{broker:e,inactiveTime:t=1e4,events:n=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],log:i=ec}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.priv={broker:e,events:n,inactiveTime:t,handleUserActivity:(0,nn.FU)(nc.bind(this),t-10),lastActive:new Date,log:i}}get active(){const e=this.priv;return new Date-e.lastActive<e.inactiveTime}start(){const e=this.priv;ac.call(this,((t,n)=>{t.addEventListener(n,e.handleUserActivity)})),rc.call(this)}stop(){const e=this.priv;ac.call(this,((t,n)=>{t.removeEventListener(n,e.handleUserActivity)})),e.timer=clearTimeout(e.timer)}whenActive(){return new Promise((e=>{this.active?e():this.priv.broker.once("user active",e)}))}}function nc(){const e=this.priv,t=!this.active;e.lastActive=new Date,t&&(this.priv.log("user became active"),e.broker.emit("user active"))}function ic(){const{broker:e}=this.priv;this.active?(this.priv.log.debug("user is still active"),rc.call(this)):(this.priv.log("user became inactive"),e.emit("user inactive"),e.once("user active",rc.bind(this)))}function rc(){this.priv.timer=setTimeout(ic.bind(this),this.priv.inactiveTime)}function ac(e){for(const[t,n]of this.priv.events)if(t)for(const i of n)e(t,i)}const oc=e=>{let{broker:t,getConfig:n}=e;const i=new Ju({threshold:[0,.5,1]}),r="mol"===n("viewability.activityMonitor","mol")?new tc({broker:t}):(()=>{let e,t;if(void 0!==document.hidden?(e="hidden",t="visibilitychange"):void 0!==document.msHidden?(e="msHidden",t="msvisibilitychange"):void 0!==document.webkitHidden&&(e="webkitHidden",t="webkitvisibilitychange"),!e)throw new Error("Can't create activity monitor");const n={capture:!0,passive:!0};let i,r,a=0;const o=function(){r=new Promise((e=>{i=e}))};o();const s=()=>{if(document[e]){if(i)return;o()}else{if(!i)return;a=Date.now();const e=i;i=void 0;try{e()}catch(e){console.warn(e)}}};return s(),document.addEventListener(t,s,n),window.addEventListener("pagehide",s,n),window.addEventListener("pageshow",s,n),{whenActive:()=>r,start:()=>{},stop:()=>{},get active(){return Date.now()-a}}})(),a=new Map;t.on("track viewability",((e,n)=>{(async(e,n)=>{let o;a.set(e,n);let s=0;i.observe(n,(async n=>{const i=n.intersectionRatio;if(s=n.intersectionRatio,await r.whenActive(),n.isIntersecting){if(!o&&n.intersectionRatio>=.5){let n=!0;const r=()=>{n&&i<1&&s<1?(n=!1,a()):(o=void 0,t.emit("ad viewable",e))},a=()=>{o=setTimeout(r,500)};a()}}else o&&(clearTimeout(o),o=void 0)}))})(e,n)})),t.on("untrack viewability",(e=>(e=>{const t=a.get(e);t&&(i.unobserve(t),a.delete(e))})(e))),t.once("dom ready",(()=>{r.start()}))};oc.ccpa={enabledIfDissent:!0},oc.gdpr={enabledIfDissent:!0};const sc=oc,dc=[{size:[300,600],url:"https://scripts.dailymail.co.uk/static/mol-fe/static/mol-fe-xpmodule-news-search/1.13.0/mpuCarousel.html?forceIto=Mol-Carousel&startTab=entertainment"},{size:[970,250],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-billboard.jpeg"},{size:[160,600],image:"https://www.dailymail.co.uk/static/mol-adverts/creatives/newzit-static-skyscrapper.png"}],lc={vendorIds:{gdpr:[755]},purposeIds:{gdpr:[1,3,4]},legIntPurposeIds:{gdpr:[3,4]}};(0,tt.fo)("adserver",{init:async function(e){let{broker:t,log:i,addPlugins:r,removePlugins:a,getConfig:o,setConfig:s,pluginsAlreadyRun:d,ownName:l,checkPluginBouncer:u}=e;const c=o("bidmax.dispatcher.url","//crta.dailymail.co.uk");function p(){fc&&(fc(),fc=null),a([l]),i("bailing")}if(!d.has("tcfv2")){if(hc++>10||fc)return void p();i("tcfv2 hasnt ran yet");const e=o("plugins.enabled");e.splice(e.indexOf(l),1);const n=["tcfv2","mvt"].filter((e=>!d.has(e))).find((t=>e.includes(t)));let r;return n?(i("re-queing just after",n),r=e.indexOf(n)):(i("cant find tcfv2 or any way to dynamically enable it, holding off gpt.js loading"),fc=function(e,t){const n=[];let i=e.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",((e,r)=>{i&&(n.push(r),t("holding off gpt loading"))}));return()=>{i(),i=null,n.length&&(t("resume loading real gpt"),n.forEach((e=>e())))}}(t,i),i("re-queuing as last plugin"),r=e.length-1),e.splice(r+1,0,l),s("plugins.enabled",e),"not yet"}if(i("starting"),await u("adserver",lc))return i("google enabled"),void p();i("user seems to have dissented to google, running own adserver"),fc||t.intercept("import script","//www.googletagservices.com/tag/js/gpt.js",(()=>{i("intercepting real gpt loading")}));const h=o("adserver.ads",dc);r(["analytics.headerbidderWinner"]);const f=n.g.googletag=n.g.googletag||{};f.cmd=f.cmd||[];const g={},m={setTargeting:(e,t)=>(void 0!==t&&(g[e]=[t]),m),addEventListener:(e,n)=>(t.on("gpt event",e,n),m),setCentering:e=>m,enableAsyncRendering:()=>m,getTargetingKeys:()=>Object.keys(g),getTargeting:e=>g[e]||[],setRequestNonPersonalizedAds:()=>{},setPrivacySettings:()=>{},getSlots:()=>Object.values(v)};f.pubads=()=>m;const v={};f.enableServices=()=>{i("enableServices")},f.getVersion=()=>"proprietary",f.display=e=>{const r=v[e];if(r.displayed)return void i.warn("slot",e,"already displayed, ignoring multiple calls");r.displayed=!0,i("display:",e,r.sizes);const a=e,[o]=r.getTargeting("hb_pb");if(o>0&&"oopGptSlot"!==r.slotType){i("prebid bid",o,"rendering ad:",e);const{document:s,size:d,adElement:l}=uc(a),[u]=r.getTargeting("hb_adid");r.adElement=l,n.g.pbjs.renderAd(s,u);const c=!1;t.emit("gpt event","slotRenderEnded",{size:d,slot:r,isEmpty:c})}else{const e=document.getElementById(a),o=h.filter((e=>{let{size:t}=e;return r.sizes.find((e=>{let[n,i]=e;return t[0]===n&&t[1]===i}))}));if(o.length){const a=o[Math.floor(o.length*Math.random())];i("found house ad for size:",a.size),async function(e,t,i,r,a,o){const s=document.createElement("div"),{size:d,id:l,click:u}=e,[c,p]=d;if(e.url){const t=document.createElement("iframe");t.width=c,t.height=p,t.scrolling="no",t.marginHeight=0,t.marginWidth=0,t.frameBorder=0,t.src=e.url,s.appendChild(t)}else if(e.image){const t=document.createElement("img");t.width=c,t.height=p,t.src=e.image;const i=document.createElement("a");u&&(i.href=await async function(e,t,i,r){pc||(pc=new Promise((async t=>{const i=await e.invokeAll({message:["call for page analytics"],timeout:2e3}),r={timestamp:n.g.adverts.startTime,referrer:document.referrer,localStorage:void 0,memory:void 0,indexedDB:void 0,viewability:void 0,...i.reduce(((e,t)=>({...e,...t})),{}),event_type:"bidmax",type_version:2,version:K.SP.bidmax||"next-release.127c8bc"};t(r)})));const a={timeAtSend:Date.now()-n.g.adverts.startTime,...await pc,type:"custom",payload:{module:"adserver",event:"click",id:i}};return`${t}/_/e?r=${encodeURIComponent(r)}&e=${btoa(JSON.stringify(a))}`}(a,o,l,u)),i.appendChild(t),s.appendChild(i)}else{if(!e.html)return void t.warn("unsupported creative:",e);s.innerHTML=e.html}i.appendChild(s),r.adElement=s;const h={size:d,slot:r,isEmpty:!1,creativeId:l,serviceName:"proprietary"};a.emit("gpt event","slotRenderEnded",h)}(a,i,e,r,t,c)}else"oopGptSlot"===r.slotType?i("no header bidder or house ad found for out of page slot"):r.getCollapseEmptyDiv()?(i("no header bidder or house ad found, collapsing:",e),e.style.height="0px",e.style.display="none"):i("no header bidder or house ad found, but NOT collapsing it"),t.emit("gpt event","slotRenderEnded",{slot:r,isEmpty:!0})}},m.refresh=(e,t)=>{i("refresh:",e,t)},f.defineSlot=(e,t,n)=>{i("defineSlot:",n);const r=cc(i,e,n,t);return v[n]=r,r},f.defineOutOfPageSlot=(e,t)=>{i("defineOutOfPageSlot:",t);const n={...cc(i,e,t,[]),slotType:"oopGptSlot"};return v[t]=n,n},f.destroySlots=e=>{i("destroySlots:",e),e.forEach((t=>{const n=t.adElement;n&&n.parentNode.removeChild(n),delete e[t]}))}},run:function(e){let{log:t}=e;const n=googletag.cmd,i=e=>{try{e()}catch(e){t.warn("Error running function queued up in googletag.cmd:",e)}};googletag.cmd.push=i,n.forEach(i)}});const uc=e=>{const t=document.getElementById(e),[n]=t.getClientRects(),i=n?Math.ceil(n.width):0,r=n?Math.ceil(n.height):0,a=document.createElement("div");a.style.border="0pt none",a.style.margin="0 auto",a.style.padding="0",a.style.minHeight="1px",t.appendChild(a);const o=document.createElement("iframe");return n&&(o.width=i+"",o.height=r+""),o.scrolling="no",o.marginWidth="0",o.marginHeight="0",o.style.marginTop="0px",o.style.marginLeft="0px",o.style.border="0pt none",a.appendChild(o),{document:o.contentDocument,size:[i,r],adElement:a}},cc=(e,t,n,i)=>{const r={};let a=!1;const o={getAdUnitPath:()=>t,getSlotElementId:()=>n,getTargetingMap:()=>r,setTargeting:function(e,t){return void 0!==t&&(r[e]=[t]),o},getTargeting:e=>r[e]||[],addService:()=>o,setCollapseEmptyDiv:e=>(a=e,o),getCollapseEmptyDiv:()=>a,sizes:i,getTargetingKeys:()=>Object.keys(r),targeting:r};return o};let pc,hc=0,fc=null;(0,tt.fo)("adsFree",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,isAdsFreeUser:n,log:i,registerPluginBouncer:r,setConfig:a,getConfig:o}=e;if(!o("plugins.adsFree.enabled",!1))return;i("Starting..");const s=n();s&&(r(((e,t)=>{i(`checking ${e}`,Object.keys(t));const n=t.isAdsFreeSupported;return!n&&i("bouncing",e),n})),a("slots.enabled",{}),document.documentElement.classList.add("molads_ads_free")),t.register("call for page analytics",(()=>({adsFreeUser:s})))},isAdsFreeSupported:!0}),(0,tt.fo)("blockthrough",{init:async function(e){let{getConfig:t,setConfig:n,removePlugins:i,broker:r,log:a,ownName:o}=e;n("bidmax.reportPlugins",[...t("bidmax.reportPlugins",[]),o]);const s=t("plugins.enabled").filter((e=>e.startsWith("abe.")));a("removing plugins:",s),i(s),a("loading blockthrough script"),r.invoke("import script","//btloader.com/tag?o=5761266544017408&upapi=true").then((()=>{a("blockthrough script loaded")})),r.on("ad delayed",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-delayed:"+t,"*")})),r.on("resuming delayed ad",(e=>{let{id:t}=e;return window.postMessage("mol-ads/events/ad-resumed:"+t,"*")}))},purposeIds:{gdpr:"N/A"},vendorIds:{gdpr:[815]}}),(0,tt.fo)("conditionalLoad",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,getConfig:n,log:i}=e;i("starting"),t.register("call for page-unload",(()=>({sdoc:gc.length})));const r=n("plugins.slots.loadConditions.constants",{});t.on("ad rendered",((e,t)=>{let{size:n,slot:i,isEmpty:r}=t,a=i.molAd.pos;"oopGptSlot"===i.molAd.slotType&&(a+="-oop"),mc.renderedAds[a]={size:n,isEmpty:r},yc()})),t.intercept("slot defined",((e,t)=>{let[n,{pos:a}]=e;const o=(0,Le.get)(a);if(mc.definedPositions.push(a),o&&void 0!==o.loadCondition){const e="string"==typeof o.loadCondition?r[o.loadCondition]:o.loadCondition;i("delaying slot",a,"due to condition:",e),bc(new vc(e,{pos:a}),t)}else t();yc()})),t.intercept("request slot",((e,t)=>{let[n,{pos:a,slotType:o}]=e;const s=(0,Le.get)(a);if("oopGptSlot"===o&&void 0!==s.oopLoadCondition){const e="string"==typeof s.oopLoadCondition?r[s.oopLoadCondition]:s.oopLoadCondition;i("delaying oop slot",a,"due to condition:",e),bc(new vc(e,{pos:a}),t)}else t();yc()}))}});let gc=[];const mc={renderedAds:{},definedPositions:[]};class vc{constructor(e,t){this.context=t,this.rootDescriptor=e,this.do=this.do.bind(this),this.not=this.not.bind(this)}do(e){if("object"==typeof e){const t=Object.keys(e)[0];if("function"==typeof this[t])return this[t](e[t]);throw new Error("error calling fnName "+t)}return e}not(e){return!this.do(e)}and(e){return!e.find(this.not)}or(e){return!!e.find(this.do)}isAdSmallerThan(e){let{pos:t,size:n}=e;return((e,t)=>{let[n,i]=e,[r,a]=t;return n<r&&i<a})(mc.renderedAds[t].size,n)}isMasterRendered(){return!!mc.renderedAds[this.context.pos]}isPosDefined(e){return!!~mc.definedPositions.indexOf(e)}isPosEmpty(e){return mc.renderedAds[e].isEmpty||!mc.renderedAds[e].size}isPosRendered(e){return mc.renderedAds.hasOwnProperty(e)}isViewPortWidthLargerThan(e){return(0,K.ap)().width>e}isViewPortHeightLargerThan(e){return(0,K.ap)().height>e}isIE(){return K.JW}run(){return this.do(this.rootDescriptor)}}const yc=(0,nn.yS)((()=>{gc=gc.filter((e=>{let{condition:t,done:n}=e;try{return!t.run()||(n(),!1)}catch(e){return console.error("conditional-load: ",e),!1}}))}));function bc(e,t){gc.push({condition:e,done:t})}var _c=n(9475),Tc=n.n(_c);function wc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sc(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function kc(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,Cc(e,t,"get"))}function Ic(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,Cc(e,t,"set"),n),n}function Cc(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,tt.fo)("conditionalEnable",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:i,getConfig:r,setConfig:a}=e;i("starting");const o=r("enableCondition.downlinkMin",0),s=Tc()(),d=r("enableCondition.notForAuthorTypes",[]);if(o>=s)return i("disabling ads because of downlink:",{downlinkMax:s,downlinkMin:o}),u();const l=n.g.PageCriteria.authorType;if(d.includes(l))return i("disabling ads because of controvential author:",{controversialAuthors:d,authorType:l}),u();function u(){a("slots.enabled",{}),t.register("call for page analytics",(()=>({adsDisabled:!0}))),(0,Ne.appendStyle)("\n.mpu_puff_wrapper {\n  display: none;\n}\n\n.billboard_wrapper {\n  display: none;\n}\n")}}}),(0,tt.fo)("domain",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;const i=(e=>{const t=e.match(/(www[0-9]*?\.)?(.[^/:]+)/i);return(null==t?void 0:t[2])&&"string"==typeof t[2]&&t[2].length>0&&t[2]})(n.g.location.hostname),r=i&&i.replace(/\./g,"_");t.emit("set page level targeting",{location:r}),t.register("provide domain",(()=>i))}}),(0,tt.fo)("imageGallery",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.on("image gallery open",(()=>{t.emit("pause refreshing ads")})),t.on("image gallery close",(()=>{t.emit("resume refreshing ads")}))}}),(0,tt.fo)("taboola.Outstream",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n,log:i}=e;const r="taboola-mid-article-thumbnails",a=n("taboola.outStream.paragraphIndex",4),o={insertMethod:e=>{!function(e,t){const n=document.createElement("div");n.id="taboola-mid-article-thumbnails",n.classList.add("watermark"),t.parentElement.insertBefore(n,t)}(0,e),n("plugins.enabled").includes("taboola.slots")?t.emit("slot mounted",{pos:"taboola_outstream"}):t.emit("add taboola",r,{id:r,position:"outStream"})},log:i,margin:n("taboola.outStream.margin",{top:30,bottom:60}),sourcePlugin:"taboolaOutstream",targetParagraphIndex:a};i("requesting placement",a),t.register("placement requests",(()=>o))},vendorIds:{gdpr:[42]}});var Ec=new WeakMap,Ac=new WeakMap,Pc=new WeakMap,xc=new WeakMap,Oc=new WeakMap,Dc=new WeakMap,Rc=new WeakMap;class Lc{constructor(e){let{broker:t,log:n,rta:i}=e;Sc(this,Ec,{writable:!0,value:void 0}),Sc(this,Ac,{writable:!0,value:!1}),Sc(this,Pc,{writable:!0,value:void 0}),Sc(this,xc,{writable:!0,value:void 0}),Sc(this,Oc,{writable:!0,value:[]}),wc(this,"fireRTAEvent",(e=>{kc(this,Pc).call(this,"firing RTA event",e),kc(this,xc).tedEvent("page_event",{action:"set",name:"taboola",value:e})})),wc(this,"fireRTAIncrementEvent",(e=>{kc(this,Pc).call(this,"firing RTA increment event:",e),kc(this,xc).tedEvent("page_event",{action:"increment",name:e})})),Sc(this,Dc,{writable:!0,value:e=>{const t=kc(this,Oc).find((t=>{let[,n]=t;return e.detail.mode===n.mode&&e.detail.placement===n.placement})),n=kc(this,Oc).find((t=>{let[,n]=t;return e.detail.mode.includes(n.mode)&&e.detail.placement.startsWith(n.placement)}));return(null==t?void 0:t[0])||(null==n?void 0:n[0])}}),Sc(this,Rc,{writable:!0,value:(e,t)=>{kc(this,Pc).call(this,e," event for",t),kc(this,Ec).emit("send event to bidmax",{type:"custom",payload:{module:"taboola",widget:t,type:e}})}}),wc(this,"fireRenderEvent",(e=>{kc(this,Pc).call(this,"render event, mode:",e.detail.mode,", placement:",e.detail.placement);const t=kc(this,Dc).call(this,e);!kc(this,Ac)&&e.detail.mode.includes("thumbnails-feed")&&(Ic(this,Ac,!0),this.fireRTAEvent({status:"widgetRendered",placement:"thumbnails-feed"})),t&&(kc(this,Rc).call(this,"render",t),kc(this,Ec).emit("taboola render"),this.fireRTAIncrementEvent("taboolaRender"))})),wc(this,"fireVisibleEvent",(e=>{kc(this,Pc).call(this,"visible event, mode:",e.detail.mode,", placement:",e.detail.placement);const t=kc(this,Dc).call(this,e);t&&(kc(this,Rc).call(this,"visible",t),kc(this,Ec).emit("taboola visible"),this.fireRTAIncrementEvent("taboolaView"))})),wc(this,"fireClickEvent",(e=>{kc(this,Pc).call(this,"click event:",e);const t=kc(this,Dc).call(this,e);t&&(kc(this,Rc).call(this,"click",t),this.fireRTAIncrementEvent("taboolaClick"),this.fireEvent("taboola click"))})),wc(this,"fireEvent",(e=>{kc(this,Pc).call(this,e," event"),kc(this,Ec).emit(e)})),wc(this,"addWidget",((e,t)=>{kc(this,Oc).push([e,t])})),Ic(this,Ec,t),Ic(this,Pc,n),Ic(this,xc,i)}}(0,tt.fo)("taboolaAds",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:i}=e;if(Mc=i,Mc("taboola running"),!(0,T.U2)("taboola",{enabled:!0}).enabled)return void Mc("taboola disabled, bailing");const r=new Lc({broker:t,log:Mc.extend("tracking"),rta:n.g.RTA});t.on("add taboola","pufflist",(e=>{const n=(0,T.U2)("taboola."+e.position,{enabled:!1});n.enabled&&(r.addWidget(e.position,{mode:n.mode,placement:n.placement}),((e,t,n,i)=>{let{start:r,every:a}=n;const o=document.getElementById(t.id);for(const t of o.querySelectorAll("li")){if(t.classList.contains("mpu_puff_wrapper"))continue;if(r--,0!==r)continue;r=a;const o=++Uc,s=Fc(t,o,n,"afterend"),d={...n,placement:`${n.placement} ${Uc}`,container:s};Bc(e,s,d,i)}})(t,e,n,r))})),t.on("add taboola",((e,n)=>{"pufflist"!==e&&(Mc("adding taboola",e,n),((e,t,n)=>{const{position:i,id:r}=t,a=(0,T.U2)("taboola."+i,{enabled:!1});a.enabled?(["thumbnail","thumbnailChannel"].includes(i)?(n.addWidget(i,{mode:"thumbnails-feed",placement:a.placement}),Nc({status:"widgetCall",placement:"thumbnails-feed"})):n.addWidget(i,{mode:a.mode,placement:a.placement}),Bc(e,r,a,n)):Mc.warn("taboola widget",i,"is disabled, ignoring load request.")})(t,n,r))})),(0,T.U2)("taboola.infiniteScroll",{enabled:!1}).enabled&&((e,t)=>{const n=(0,T.U2)("taboola.infiniteScroll",{enabled:!1});if(!n.enabled)return;let{start:i,every:r,platform:a}=n,o=!1;e.on("infinite-list append",(async s=>{if(r)for(const d of s.querySelectorAll((e=>"mobile"===e?"li":"div.article")(a)))if(0===i){const a=++Uc,s=Fc(d,a,n,"beforebegin"),l=Object.assign({},n,{placement:n.placement+" "+a,container:s});Bc(e,s,l,t),o||(o=!0,t.addWidget("infiniteScroll",{mode:n.mode,placement:n.placement})),i=r-1}else i--}))})(t,r)},vendorIds:{gdpr:[42]}});let Mc,Uc=0;const jc={taboola:null},Nc=e=>{var t;null===(t=n.g.RTA)||void 0===t||t.tedEvent("page_event",{action:"set",name:"taboola",value:e})},Bc=(e,t,n,i)=>{const r=((e,t)=>{var n,i;if(jc.taboola)return jc.taboola;const r=(0,T.U2)("taboola.scriptDir","dailymail-row"),a=(0,T.U2)("taboola.pageType","article"),o="//cdn.taboola.com/libtrc/"+r+"/loader.js";window._taboola=window._taboola||[],jc.taboola=window._taboola;const s=jc.taboola;s.push({[a]:"auto"}),s.push({listenTo:"render",handler:t.fireRenderEvent}),s.push({listenTo:"visible",handler:t.fireVisibleEvent}),s.push({listenTo:"nocontent",handler:()=>t.fireEvent("taboola nocontent")}),s.push({listenTo:"click",handler:()=>t.fireEvent("taboola click")});const d=document.createElement("script"),l=document.querySelector("script");return Nc({status:"scriptLoading"}),d.addEventListener("load",(()=>Nc({status:"scriptLoaded"}))),d.async=!0,d.src=o,d.onerror=()=>e.emit("taboola failed to load"),l.parentNode.insertBefore(d,l),null===(n=window.performance)||void 0===n||null===(i=n.mark)||void 0===i||i.call(n,"tbl_ic"),s})(e,i);r.push({container:t,mode:n.mode,placement:n.placement,targetType:n.targetType}),r.push({flush:!0})},Fc=(e,t,n,i)=>{const{containerStr:r,platform:a}=n,o=r+t,s=((e,t)=>"mobile"===t?`<li id="${e}"></li>`:`<div id="${e}" style="min-height: 280px;"></div>`)(o,a);return e.insertAdjacentHTML(i,s),o};(0,tt.fo)("page.homepageRenderPlatform",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,isHomepage:n,log:i,pageMeta:r}=e;if(!n)return void i("not homepage, bailing");const a="mobile"===r.renderPlatform;t.register("call for page analytics",(()=>({homepage:!0,renderPlatform:r.renderPlatform}))),i("setting page-level targeting",{mobile:a}),t.emit("set page level targeting",{mobile:a})}});const qc="mol-ads-control-panel",Vc={abv:"mol-ads-control-panel-abv",cluster:"mol-ads-control-panel-cluster"},Hc="mol-ads-control-panel-config";function zc(e){let{broker:t,getConfig:n,doc:i,log:r,win:a}=e;const o=n("controlPanel.scriptURL");o?a.DM.later("molFeReact_LOADED",(async()=>{const{React:e,ReactDOM:s}=a.DM.molFeReact;try{const[r,a]=await Promise.all([t.invoke("load script",o,"MOLAdsControlPanel"),t.invoke("get all plugins")]),d=document.getElementById(qc)||function(e){const t=document.createElement("div");return t.id=qc,e.body.appendChild(t),t}(i);s.unmountComponentAtNode(d),s.render(e.createElement(r,{abvCookieName:Vc.abv,allPlugins:Object.keys(a),clusterCookieName:Vc.cluster,configStorageKey:Hc,enabledPlugins:n("plugins.enabled",[]),onClose:()=>s.unmountComponentAtNode(d)}),d)}catch(e){Object.values(Vc).forEach(K.kT),localStorage.removeItem(Hc),r.error("\n        MOL Ads Control Panel has been requested to load, but cannot. \n        I have deleted the control panel cookies that will affect the behaviour of this site.\n      "),r.error(e)}})):r.error("No configured script url")}(0,tt.fo)("controlPanel",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run(e){(Object.values(Vc).some(K.ej)||K.SP.acp||K.SP.adsControlPanel||localStorage.getItem(Hc))&&zc(e),e.broker.on("open control panel",(()=>zc(e)))}}),(0,tt.fo)("performanceMonitor",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0,run:function(e){let{broker:t,getConfig:n}=e;const i=n("performance.sampleSize",100);n("performance.pageLoad.offsets",[0,5,15]).forEach((e=>setTimeout(function(e){return async()=>{let n=await t.invoke("is page visible?");const r=t.on("page hidden",(()=>{n=!1})),a=await async function(e){return new Promise((t=>{const n=(new Date).getTime();!function e(i){if(0===i){const e=(new Date).getTime()-n;t(e)}else setTimeout((()=>e(i-1)),0)}(e)}))}(i);r.cancel();const o=a/i,s={offset:e,sampleSize:i,visible:n,...(0,un._b)("delayP1s",o),...(0,un._b)("delayP100ms",o)};t.emit("send event to bidmax",{type:"custom",payload:{module:"perf-monitor",event:"measure",...s}})}}(e),1e3*e)))}}),(0,tt.fo)("adNami",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,getConfig:n}=e;const i=n("plugins.adnami.scriptTimeout",500),r={adNami:"off"},a=(0,et.Ye)(i,[new Promise((e=>{window.adsmtag=window.adsmtag||{},window.adsmtag.cmd=window.adsmtag.cmd||[],window.adsmtag.cmd.push((()=>{r.adNami="on",e()}))}))]);t.invoke("import script","https://macro.adnami.io/macro/spec/adsm.macro.4111597d-dc70-4fd8-b25e-7d24d8423e73.js"),t.intercept("slot ready for ad",(async(e,t)=>{let[n,i,o]=e;await a,o.push(r),t(n,i,o)}))},vendorIds:{gdpr:[612]}}),(0,tt.fo)("fbRemarketingPixel",{purposeIds:{gdpr:"N/A"},run:async function(e){let{broker:t,log:i}=e;i("starting"),await t.until("add fb-marketing-pixel"),i("got request to add tracking"),n.g._fbq||(i("loading fbds.js"),n.g._fbq=[],n.g._fbq.disablePushState=!0,t.invoke("import script","//connect.facebook.net/en_US/fbds.js").then((()=>i("fbds.js loaded")))),"function"==typeof n.g._fbq.push?(n.g._fbq.push(["addPixelId","1401367413466420"]),n.g._fbq.push(["track","PixelInitialized",{}])):i.error("window._fbq.push is not a function")},vendorIds:{gdpr:[89]}}),(0,tt.fo)("bidCount",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const i={},r=e=>(0,ne.jj)(e.map((e=>{let{bidderCode:t}=e;return t})));t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>e&&"bid"===e.type));if(t.length){const e=r(t),{pos:i}=t[0];n(`${i} - unique bidders`,e);const a=e.length;return n(`${i} - bidCount`,a),{bidCount:a}}return n("no bids found"),{bidCount:0}})),t.intercept("collect video tags",((e,t)=>{let[a,o,s]=e;const d=(e,t)=>{if(t&&"bid"===t.type){const{pos:e,offset:a,auctionId:o}=t;i[o]=i[o]||[],i[o].push(t);const s=r(i[o]),d=s.length;n(`${e} - bid received for auctionId: ${o}, offset: ${a}, uniqueBidders: ${s}, bidCount: ${d}`),t.tags.cust_params.bidCount=d}s(e,t)};d(null,{cust_params:{bidCount:0}}),t(a,o,d)})),t.on("bidding ended",((e,t)=>{i[t]&&(n("video auction ended, removing auctionId",t),delete i[t])}))},vendorIds:{gdpr:"N/A"}}),(0,tt.fo)("maxbid",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;const i={},r=e=>!isNaN(parseFloat(e))&&isFinite(e),a=e=>[...e].sort(((e,t)=>t.cpm-e.cpm)),o=e=>{const{bidderCode:t,cpm:n,cachedBid:i}=e;if(i){const{bidderCode:e,cpm:t}=i;return{bidderCode:e,cpm:parseFloat(t)}}return{bidderCode:t,cpm:parseFloat(n)}};t.register("get tags based on tags",(e=>{const t=e.flat().filter((e=>"bid"===(null==e?void 0:e.type)&&r(null==e?void 0:e.cpm)));if(!t.length)return;const{pos:i}=t[0],s=t.map(o);n(`${i} - bids:`,s);const d=a(s);n(`${i} - sorted:`,d);const{bidderCode:l,cpm:u}=d[0];return n(`${i} - highest bidder`,l,u),{maxbid:u,maxbidpk:Wc.findIndex((e=>{let[t,n]=e;return t<=u&&u<=n}))+1,maxbid_bidder:l}})),t.intercept("collect video tags",((e,t)=>{let[s,d,l]=e;t(s,d,((e,t)=>{if(t&&"bid"===t.type&&t.cpm&&r(t.cpm)){i[t.auctionId]=i[t.auctionId]||[];const e=o(t),{auctionId:r,offset:s}=t;n(`bid received, auctionId: ${r}, offset: ${s}, bid:`,e),i[t.auctionId].push(e);const d=a(i[t.auctionId]);n(`sorted bids, auctionId: ${r}, offset: ${s}`,d);const{cpm:l,bidderCode:u}=d[0];n(`hightest bid, auctionId: auctionId: ${r}, offset: ${s}`,u,l);const c={...t.tags.cust_params,maxbid:l,maxbidpk:Wc.findIndex((e=>{let[t,n]=e;return t<=l&&l<=n}))+1,maxbid_bidder:u};t.tags.cust_params=c}l(e,t)}))})),t.on("bidding ended",((e,t)=>{i[t]&&(n("video auction ended, removing auctionId",t),delete i[t])}))},vendorIds:{gdpr:"N/A"}});const Wc=[[.01,.5],[.51,1],[1.01,1.5],[1.51,2],[2.01,2.5],[2.51,3],[3.01,3.5],[3.51,4],[4.01,4.5],[4.51,5],[5.01,6],[6.01,7],[7.01,8],[8.01,9],[9.01,10],[10.01,12],[12.01,14],[14.01,16],[16.01,18],[18.01,20]];(0,tt.fo)("bidsReceived",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:function(e){let{broker:t}=e;t.register("get tags based on tags",(e=>e.flat().filter((e=>e&&"bid"===e.type)).length?{nobids:!1}:{nobids:!0}))},vendorIds:{gdpr:"N/A"}}),(0,tt.fo)("prebid.sharedId",{purposeIds:{gdpr:[1,3,4]},run:function(e){let{broker:t,getConfig:n,log:i}=e;t.on("prebid loaded",(e=>{const t=e.getConfig("userSync"),r={userSync:Mu(t,{userIds:[{name:"pubCommonId",params:{syncTime:60},storage:{name:"_pubcid",type:"cookie",expires:28}}],syncDelay:n("plugins.prebid.syncDelay",3e3)})};i("setting pbjs config",r),e.setConfig(r)})),t.register("get shared id",(()=>{try{return(0,et.gb)((()=>(0,K.ej)("sharedid")),300,1500)}catch(e){return}}))},vendorIds:{gdpr:"N/A"}}),(0,tt.fo)("message-trace",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init:function(e){let{broker:t,log:n}=e;const i=Object.entries(K.SP).filter((e=>{let[t]=e;return t.startsWith("ads.debug.messageTrace")}));if(!i.length)return void n("no message filter, bailing");n("filters:",Object.fromEntries(i)),t.bus.logCall=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{id:""},i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r(i,e,n)){const[r,...d]=i,l=[["Message",Gc],[e.id,o(2)],[t,o(1)],[r,o(0)],[a?s?"resuming":"intercepted by":"->",o(a?s?4:3:1)],[n.id,o(2)]],{text:u,styles:c}=l.reduce(((e,t)=>{let[n,i]=t;return e.text.length&&(e.text+="%c ",e.styles.push(Kc)),e.text+=`%c${n}`,e.styles.push(i),e}),{text:"",styles:[]});let p=d;try{p=(0,Y.$Z)(d)}catch(e){}console.log(u,...c,p)}};let r=()=>!1;i.forEach((e=>{let[t,n]=e;const[i,...r]=t.split(".").slice(3),a=new RegExp(`^${n.replace(/\*/g,".*")}$`,"i");switch(i){case"path":d(r.join("."),n);break;case"slot":d("",n),d("pos",n),d("slot.pos",n);break;case"fulltext":o=new RegExp(n,"igm"),s((e=>o.test(JSON.stringify(e,Xc))));break;case"broker":l(a,a);break;case"sender":l(a);break;case"receiver":l(void 0,a)}var o}));const a="#FFEFD3/black #FFFEE4/black #D0ECEA/black #FBC3BC/black #C8FFBE/black".split(" ").map((e=>(0,ne.$R)(["background-color","color"],e.split("/")).map((e=>e.join(": "))).join("; "))),o=e=>$c+a[e];function s(e){const t=r;r=(i,r,a)=>{let o;try{o=e(i,r,a)}catch(e){n.warn("Error while filtering message:",e)}return o||t(i,r,a)}}function d(e,t){s((n=>n.find((n=>{const i=e?ci()(n,e):n;return i&&(void 0===t||new RegExp(`^${t.replace(/\*/g,".*")}$`).test(i))}))))}function l(e,t){s(((n,i,r)=>e&&e.test(i.id)||t&&t.test(r.id)))}}});const $c="display: inline-block; padding: 1px 4px; border-radius: 3px;",Gc=$c+"color: #fff; background: hsl(214deg 100% 55%); ",Kc="color: black; background: none;";function Xc(e,t){if(!(0,Y.T$)(t))return t}var Zc=n(5966);const Yc=(0,S.x)("mvt");var Jc=n(3838);let Qc="";(0,tt.fo)("mvt",{isAdsFreeSupported:!0,ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,setConfig:n,log:i,ownName:r}=e;i("Initialising MVT plugin");const{selectedScenarios:a,scenarios:o,tests:s}=(0,Jc.s)(i,t("mvt.tests",[]));((e,t,n,i)=>{let r=e("plugins.enabled",[]),a=[],o=[];n.forEach((e=>{Array.isArray(e.plugins)?(Yc(`From scenario "${e.name}", adding plugins:`,e.plugins),a=[...a,...e.plugins]):"object"==typeof e.plugins&&(Array.isArray(e.plugins.add)&&(Yc(`From scenario "${e.name}", adding plugins:`,e.plugins.add),a=[...a,...e.plugins.add]),Array.isArray(e.plugins.remove)&&(Yc(`From scenario "${e.name}", removing plugins:`,e.plugins.remove),o=[...o,...e.plugins.remove]))}));const s=r.indexOf(i)+1;r.splice(s,0,...a);const d=new Set(o);r=r.filter((e=>!d.has(e))),t("plugins.enabled",[...new Set(r)])})(t,n,o,r),(0,Zc.m)(t,n,o),(0,T._D)(),Qc=s.map((e=>[e.name,a[e.name]])).filter((e=>{let[,t]=e;return t})).map((e=>e.join("="))).join(",")},run(e){let{broker:t}=e;const i=()=>{try{return(n.g.molMVTest||"").split(",").map((e=>e.trim()))}catch(e){return[]}},r=()=>[...Qc.split(","),...i()].filter((e=>e)).join(",");t.register("call for page analytics",(()=>({mvt:r()}))),t.emit("send with rta page unload",{mvt:r().split("=").join("_")}),t.emit("set page level targeting",{mvt:r().split("=").join("_").split(",")})}});const ep={mediaTrust:"//scripts.webcontentassessor.com/scripts/bc585bfefc95184247617f742a451b7f4f99b8d4f250b51c2fabb00dee8e855d",ticio:"//d2tuygj4en2za2.cloudfront.net/script.js",confiant:"//confiant-integrations.global.ssl.fastly.net/pkity_Tu7korz-AKdcG26RZexkw/gpt_and_prebid/config.js"};function tp(){const e=new Date;return{watershed:String(e.getHours()>=21||e.getHours()+e.getMinutes()/60<5.5)}}(0,tt.fo)("scanner",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},async init(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.scanner.sync",!1),a=n("plugins.scanner.setupTimeout",2e3),o=n("plugins.scanner.provider"),s=n("plugins.scanner.scriptUrl",ep)[o];if(i("config:",{provider:o,sync:r,timeout:a}),!s)return void i.warn("unknown provider:",o);const d=vt(s,{async:!r}),l={scanner:{provider:o}};t.register("call for page analytics",(()=>l)),d.then((()=>{i("provider script loaded"),l.scanner.enabled=!0})),await(0,et.yq)(a,d).catch((()=>{i.warn("provider script did not load fast enough, continue loading ads bundle..."),l.scanner.timeout=!0}))}}),(0,tt.fo)("watershed",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t}=e;t.emit("set page level targeting",tp()),t.register("get prebid tags",tp)}});const np=Symbol("private properties");class ip{constructor(e){let{broker:t,pos:n}=e;const i=this[np]={};i.broker=t,i.pos=n,i.inView=!1}get inView(){return this[np].inView}start(){const e=this[np];e.slotVisibilityChangedSub=e.broker.on("slot visibility changed",e.pos,op.bind(this)),e.adViewableSub=e.broker.on("ad viewable",e.pos,rp.bind(this))}stop(){const e=this[np];e.slotVisibilityChangedSub.cancel(),e.adViewableSub.cancel(),dp.call(this)}}function rp(){if(this.inView)return;const e=this[np];e.inView=!0,e.broker.emit("ad active view",e.pos)}function ap(){if(!this.inView)return;const e=this[np];e.inView=!1,dp.call(this),e.broker.emit("ad out of view",this[np].pos)}function op(e){let{inViewPercentage:t}=e;t<50?ap.call(this):this[np].timer||sp.call(this)}function sp(){this[np].timer=setTimeout(rp.bind(this),1e3)}function dp(){const e=this[np];e.timer=clearTimeout(e.timer)}class lp{constructor(e){let{interval:t=3e4,broker:n,positions:i,ids:r,activeViewTracker:a,userInactivityMonitor:o=new tc({broker:n})}=e;const s={};this.interval=t,s.broker=n,s.positions=i,s.ids=r,s.userInactivityMonitor=o,s.activeSub=s.broker.on("user active",up.bind(this)),a&&(s.activeViewTracker=a,s.activeViewSub=s.broker.on("ad active view",s.positions[0],up.bind(this)),s.activeViewTracker.start()),this.stopped=!1,this.priv=s,this.refresh=cp.bind(this),n.on("force ads refresh",(async()=>{this.refresh(),await n.until("ad rendered"),ec("Ads force-refreshed")})),n.on("ad rendered",(e=>{s.positions.includes(e)&&s.timer&&this.start()}))}start(){const e=this.priv;e.timer=clearTimeout(e.timer),e.stopped=!1,e.remaining=e.remaining||this.interval,e.timer=setTimeout(this.refresh,e.remaining)}stop(){const e=this.priv;e.activeSub.cancel(),e.activeViewTracker&&(e.activeViewSub.cancel(),e.activeViewTracker.stop()),e.timer=clearTimeout(e.timer),e.remaining=0,this.stopped=!0}}function up(){0===this.priv.remaining&&cp.call(this)}function cp(){const e=this.priv;if(ec("Refresh: ",{positions:e.positions.join(" "),ids:e.ids.join(" "),active:e.userInactivityMonitor.active,inView:e.activeViewTracker?e.activeViewTracker.inView:"N/A"}),!e.userInactivityMonitor.active||e.activeViewTracker&&!e.activeViewTracker.inView)return e.timer=clearTimeout(e.timer),void(e.remaining=0);ec("Refreshing",{positions:e.positions.join(" "),ids:e.ids.join(" ")}),e.broker.emit("prepare to refresh ads",e.positions),e.broker.emit("refresh ads",{ids:e.ids,reason:"periodic",positions:e.positions}),this.start()}function pp(e){let{broker:t,getConfig:n,log:i}=e;const{intervalRefreshSlots:r,activeViewRefreshSlots:a}=function(e){const t=e("adsRefresh.interval",6e4);return{intervalRefreshSlots:e("adsRefresh.slots",[]).reduce(((e,n)=>({...e,[n]:{pos:n,interval:t,type:"interval"}})),{}),activeViewRefreshSlots:e("adsRefresh.activeViewSlots",[]).reduce(((e,t)=>{let{pos:n,interval:i}=t;return{...e,[n]:{pos:n,interval:i,type:"activeView"}}}),{})}}(n);if((0,Y.xb)(r)&&(0,Y.xb)(a))return void i("no slot refresh config provided, bailing");const o=new Promise((e=>t.once("ad viewable",(t=>{i(`Position "${t}" viewed, refreshes will start immediately`),e()})))),s=n("adsRefresh.inactiveTime",1e4),d=new tc({broker:t,inactiveTime:s});d.start();const l={broker:t,userInactivityMonitor:d,log:i,slotViewedPromise:o},u={...r,...a};t.on("ad rendered","billboard",(e=>{e.size&&e.size.every((e=>1===e))&&t.emit("stop refreshing ads")})),t.on("slot defined",(e=>{let{pos:t,id:n}=e;if(u[t]){i("slot defined, found refresher",u[t]),u[t].id=n;const e=function(e){let{broker:t,userInactivityMonitor:n,pos:i,id:r,interval:a,type:o}=e;ec(`Start refreshing: ${i}, id: ${r}, with ${o} refresh of ${a}ms`);const s="activeView"===o&&new ip({broker:t,pos:i});return new lp({broker:t,interval:a,positions:[i],ids:[r],userInactivityMonitor:n,activeViewTracker:s})}({...l,...u[t]});u[t].adRefresher=e,u[t].cancel=(e=>{let{broker:t,pos:n,type:i,adRefresher:r,slotViewedPromise:a}=e;return"activeView"===i?t.once("ad viewable",n,o).cancel:(a.then(o),()=>{});function o(){r.stopped?ec(`adRefresher for ${n} already stopped, and won't be started`):(r.start(),ec(`Refreshing position ${n}`))}})({...l,...u[t]})}})),t.on("pause refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=i.extend("pause");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?t.warn(`"${n}" position has already stopped refreshing.`):(u[n].adRefresher.stop(),t.info(`"${n}" position refresh is paused`)):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh and is therefore probably not refreshing.`)})),t.on("resume refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object.keys(u);const t=i.extend("resume");for(const n of e)u[n]?u[n].adRefresher?u[n].adRefresher.stopped?(u[n].adRefresher.start(),t.info(`"${n}" position refresh is resumed`)):t.warn(`"${n}" position isn't paused.`):t.warn(`"${n}" position has not been setup to refresh yet.`):t.warn(`"${n}" position is not configured to refresh.`)})),t.on("stop refreshing ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i("Received request to stop ads refreshing altogether",e);const{positions:t=[],activeView:n=!0}=e,a=n?u:r,o=t.length?(0,sn.e$)(a,t):Object.keys(a);o.forEach((e=>{const{id:t,type:n}=u[e];i(`stopping ${n} refresh for ${e}, id: ${t}`),u[e].adRefresher&&u[e].adRefresher.stop(),u[e].cancel&&u[e].cancel(),delete u[e]})),(0,Y.xb)(u)&&d.stop()}))}pp.ccpa={enabledIfDissent:!0},pp.gdpr={enabledIfDissent:!0};const hp=()=>{};hp.pluginSetup=e=>{let{broker:t,getConfig:i,log:r}=e;if(!i("arrowKeysScroll.userAgents",[".*"]).some((e=>navigator.userAgent.match(new RegExp(e)))))return;(0,Y.ns)(["DM"],n.g).arrowKeysScrollEnabled=!0;const a=i("arrowKeysScroll.stride",40);if(document.addEventListener("keydown",(e=>{if(e.altKey||e.ctrlKey||e.metaKey||e.target!==document.body)return;let t;switch(e.keyCode){case 38:t=-a;break;case 40:t=a}t&&(event.preventDefault(),event.stopPropagation(),window.scrollBy(0,t))})),"scrollRestoration"in history){history.scrollRestoration="manual";const e=history.state;e&&"arrow-keys-scroll"===e.name&&(r("state stored:",e),t.once("dom loaded",(()=>{0===window.pageYOffset?(r("restoring scroll offset to:",e.pageYOffset),window.scrollTo(window.pageXOffset,e.pageYOffset)):r("page scrolled to",window.pageYOffset,", ignoring scroll restore")})));const n=()=>{const e={name:"arrow-keys-scroll",version:1,pageYOffset:window.pageYOffset};history.replaceState(e,document.title)};window.addEventListener("scroll",DM.molFeMiniLodash.debounce(n,200),{passive:!0,capture:!0})}},hp.isAdsFreeSupported=!0,hp.ccpa={enabledIfDissent:!0},hp.gdpr={enabledIfDissent:!0};const fp=hp;function gp(e){let{broker:t}=e;t.on("slot defined",(e=>{if("billboard"!==e.pos)return;t.intercept("ad rendered","billboard",((e,t)=>{let[,i,r]=e;try{n(i,r)}finally{t()}}));const n=(t,n)=>{if(n.isEmpty)return;if(!document.getElementById(e.parentId).parentNode)return;const i=document.getElementsByClassName("molads_billboard_on")[0];i&&((e=>{const t=document.querySelector(`#${e.slot.getSlotElementId()} iframe`);return t&&"90"===t.getAttribute("height")})(n)?i.classList.add("molads_ldr_billboard_on"):i.classList.remove("molads_ldr_billboard_on"))}}))}function mp(e){let{broker:t}=e;const i=n.g.inlineModules;i&&i.split(/\s+/).includes("62032338")&&t.emit("set page level targeting",{fff:!0})}gp.ccpa={enabledIfDissent:!0},gp.gdpr={enabledIfDissent:!0},mp.ccpa={enabledIfDissent:!0},mp.gdpr={enabledIfDissent:!0};var vp=n(8909),yp=n.n(vp);function bp(e){let t,{broker:n,log:i}=e;const r=new Promise((e=>{window.addEventListener("IrisContextAPI",(()=>{i("Loaded"),t=window.IrisContextAPI({client_token:"W491AUI45FTTFWD"}),e(t)}))})),a=yp()((async e=>{if(!e)return{};await r;const n=await t.getVideoInfo(e);return i(`Info for video ${e}`,n),(0,Y.ei)(n,["context","categories","iris_id"])}));n.invoke("import script","https://ovp.iris.tv/libs/context/iris-context.min.js"),n.register("get IrisTV tags",a),n.register("get video tags",(async e=>{let{videoId:n}=e;if(!t)return void i("Video auction started but IrisTV still not available");if(!n)return void i("IrisTV loaded but no videoId provided");i("Auction for video:",n);const r=(0,Y.ei)(await a(n),["context","categories"]);return i("cust_params:",r),{cust_params:r}}))}bp.vendorIds={gdpr:"N/A"},bp.purposeIds={gdpr:[1]};const _p=e=>{let{broker:t,getConfig:i}=e,r=[];t.on("plugins enabled",(e=>{r.lengh&&t.emit("creative updated plugins",r)})),t.register("get plugins set by creative",(async()=>r)),n.g.addEventListener("message",(async e=>{let{data:i}=e;"object"==typeof i&&"managePlugins"===i.callId&&(r=i.plugins||[],n.g.postMessage("managePluginsReceived","*"),t.emit("creative updated plugins",r),K.SP.hasOwnProperty("setPlugin")&&console.log(`message from creative ${JSON.stringify(r)}`))}))};_p.ccpa={enabledIfDissent:!0},_p.gdpr={enabledIfDissent:!0};const Tp=_p,wp=e=>{let{broker:t}=e;const n=(0,T.U2)("plugins.nativo.scriptSrc","//s.ntv.io/serve/load.js");t.invoke("import script",n)},Sp=wp;function kp(e){let{broker:t,getConfig:n}=e}function Ip(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.nonPersonalizedAds.sendNPA",!0),a=n("plugins.nonPersonalizedAds.sendIllegalAttempts",!0),o={npa:!1,npaIllegalAttempts:[]};let s=e=>{t.once("gpt loaded",(()=>{googletag.pubads().setRequestNonPersonalizedAds(e)}))};t.once("gpt loaded",(()=>{const e=googletag.pubads();s=e.setRequestNonPersonalizedAds.bind(e),e.setRequestNonPersonalizedAds=e=>{const t=new Error(`Illegal attempt to call setRequestNonPersonalizedAds(${JSON.stringify(e)})`);o.npaIllegalAttempts.push(t.stack),i.warn(t)}})),t.register("call for page analytics",(()=>{const e={};return r&&(e.npa=o.npa),a&&(e.npaIllegalAttempts=[...o.npaIllegalAttempts]),o.npaIllegalAttempts=[],e})),t.on("set non personalized ads",(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o.npa=!!e,s(e)}))}wp.vendorIds={gdpr:[263]},wp.purposeIds={gdpr:"N/A"},kp.pluginSetup=e=>{let{getConfig:t,setConfig:i,broker:r,doc:a}=e;if(!n.g.PageCriteria||!n.g.PageCriteria.nonAdservable||K.SP.ignoreDisableAds)return;const o=new Set(t("nonAdServable.plugins.whitelist",[]));i("plugins.enabled",t("plugins.enabled").filter((e=>o.has(e)))),r.intercept("slot defined",((e,t)=>{let[n,i]=e;const r=a.getElementById(i.id);"billboard"===i.pos?r.parentNode.parentNode.removeChild(r.parentNode):r.parentNode.removeChild(r)})),window.DM&&window.DM.molFeComponents&&"function"==typeof window.DM.molFeComponents.setConfig&&window.DM.molFeComponents.setConfig("mol-fe-videoplayer",{plugins:{flyout:{enabled:!1,forceFlyout:{enabled:!1}}}}),function(e){const t=document.createElement("style");t.type="text/css",t.styleSheet?t.styleSheet.cssText=e:"textContent"in t?t.textContent=e:t.innerText=e,document.getElementsByTagName("head")[0].appendChild(t)}("#mini-carousel-wrapper {display: none;}"),r.on("dom ready",(()=>[...document.querySelectorAll(".mol-ads-label-container")].forEach((e=>e.parentNode.removeChild(e)))))},kp.ccpa={enabledIfDissent:!0},kp.gdpr={enabledIfDissent:!0},Ip.ccpa={enabledIfDissent:!0},Ip.gdpr={enabledIfDissent:!0};const Cp=(0,S.x)("page-visibility");function Ep(e){let{broker:t}=e;t.register("is page visible?",(()=>new Promise(((e,t)=>e((()=>{const e=document.hasFocus();return Cp("isPageVisible",e),e})()))))),n.g.top.addEventListener("blur",(()=>{setTimeout((()=>{Cp("Blur event - page hidden"),t.emit("page hidden")}))})),n.g.top.addEventListener("focus",(()=>{setTimeout((()=>{Cp("Focus event - page visible"),t.emit("page visible")}))}))}Ep.isAdsFreeSupported=!0,Ep.ccpa={enabledIfDissent:!0},Ep.gdpr={enabledIfDissent:!0};const Ap="mol.ads.paidSession",Pp=e=>localStorage.setItem(Ap,JSON.stringify(e));function xp(e){let{broker:t,getConfig:n}=e;const i=JSON.parse(localStorage.getItem(Ap))||{};let r="none",a="none";const o=1e3*n("plugins.paidSessions.maxIntervalInSeconds",900);i&&i.lastUpdate&&i.lastUpdate>=Date.now()-o?(i.lastUpdate=Date.now(),Pp(i),a=i.utm_source,r=i.session_page_ID):K.SP.utm_source?(a=K.SP.utm_source,r=PageCriteria.articleId,Pp({lastUpdate:Date.now(),utm_source:a,session_page_ID:r})):localStorage.removeItem(Ap);const s={session_page_ID:r,utm_source:a};t.emit("set page level targeting",s),t.register("call for page analytics",(()=>s))}function Op(e){let{broker:t,getConfig:i}=e;const r={auctions:[],auctionByPos:{},started:{},queue:[],bids:{},kv:{},gkv:{}},a=function(e){return r.auctionByPos[e]||r.auctionByPos[e.substr(0,e.lastIndexOf("-"))]},o=(e,t)=>{if(!a(e))return;const i=a(e);i.slots[e]||(i.slots[e]={}),i.slots[e][t]||(i.slots[e][t]=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.adverts.startTime;return parseFloat(((Date.now()-e)/1e3).toFixed(1))}())},s=e=>Array.isArray(e)?1===e.length?s(e[0]):e.join(", "):"boolean"==typeof e||isNaN(e)?e:parseFloat(e),d=e=>Object.keys(e).reduce(((t,n)=>(Object.keys(e[n]).forEach((i=>{t[i]=t[i]||{},t[i][n]=e[n][i]})),t)),{}),l=function(e){console.group("Auction Performance"),console.table(d(Object.fromEntries(Object.entries(e.streamAuctions).map((e=>{let[t,{endpoints:n}]=e;return[t,Object.fromEntries(Object.entries(n).map((e=>{let[t,n]=e;return[t,n>1e3?"ready":n]})))]}))))),console.groupEnd()},u=function(e){return(!r.currentAuction||r.currentAuction.lastPosTime<Date.now()-5e3)&&(r.currentAuction={id:r.auctions.length,slots:{},ads:{},kv:{},bids:{},streamAuctions:{}},r.auctions.push(r.currentAuction)),r.currentAuction.lastPosTime=Date.now(),r.currentAuction.streamAuctions[e]||(r.currentAuction.streamAuctions[e]={start:0,endpoints:{}}),r.auctionByPos[e]=r.currentAuction};t.on("get tags",(e=>{let{slot:{pos:t}}=e;u(t).streamAuctions[t].start=Date.now()})),t.on("get video tags",(e=>{let{slot:{pos:t}}=e;u(t)})),t.on("ad rendered",((e,t)=>{o(e,"ad rendered");let n=e,i=0;const r=a(e);for(;r.ads[n];)i++,n=`${e} ${i}`;const s=r.ads[n]={};s.creativeId=t.creativeId||t.sourceAgnosticCreativeId,s.lineItem=t.lineItemId||t.sourceAgnosticLineItemId,s.adUnit=t.slot.molAd.adUnit,t.sourceAgnosticLineItemId&&t.creativeId!==t.sourceAgnosticCreativeId&&(s["reservation or backfil"]=!0)})),t.on("headerbidder winner",((e,t)=>{const n=a(e);n&&n.ads[e]&&(n.ads[e]["headerbidder winner"]=t)})),t.on("ad viewable",((e,t)=>{o(e,"ad viewable")})),t.on("ad loaded",((e,t)=>{o(t,"ad loaded")})),t.on("slot defined",(e=>{e.slotTypes.includes("gpt")&&!e.slotTypes.includes("gptOOP")&&(u(e.pos),o(e.pos,"slot defined"))})),t.on("start bidding",(e=>{u(e),o(e,"start bidding"),r.started[e]=Date.now()})),t.on("ready to request",(e=>o(e,"ready to request"))),t.on("ad requested",(e=>o(e,"ad requested"))),t.on("bidding ended",(e=>o(e,"bidding ended"))),t.on("bids requested",(e=>{let{positions:t}=e;t.forEach((e=>{u(e),o(e,"prebid called")}))})),t.on("bid",((e,t)=>{let{bidder:n,cpm:i}=t;const r=i,a=u(e),o=a.bids[e]=a.bids[e]||{},s=r/100;(!o[n]||o[n]<s)&&(o[n]=s)})),t.on("set key value",((e,t,n)=>{const i=u(e);(i.kv[e]=i.kv[e]||{})[s(t)]=s(n)}));const c=e=>u(e).streamAuctions[e],p=(e,t)=>{e.endpoints[t]=Math.round((Date.now()-e.start)/10)/100};t.on("auction event",((e,t,n)=>{const i=c(e);if(!i.ended)if("interested endpoint"===t){0===i.start&&(i.start=Date.now(),Object.keys(i.endpoints).forEach((e=>{const t=i.endpoints[e];Number.isFinite(t)&&(i.endpoints[e]=Math.round((1e3*t-i.start)/10)/100)})));const e=(n.endpoints||[]).filter((e=>void 0===i.endpoints[e])),t=Object.fromEntries(e.map((e=>[e,"pending"])));i.endpoints={...i.endpoints,...t}}else"stream done"===t?p(i,n.endpoint):"end"===t&&(i.ended=!0,Object.entries(i.endpoints).forEach((e=>{let[t,n]=e;"string"==typeof n&&(i.endpoints[t]="missing")})))})),t.on("plugin done",((e,t)=>{const n=c(e);n.ended||p(n,t)})),n.g.openAdsControlPanel=()=>{t.emit("load script",i("controlPanel.url","http://scripts.dailymail.co.uk/static/mol-adverts/control-panel/0.0.3/mol-ads-control-panel.js"),null,{},(()=>!0))},(()=>{let e="";const t="38384040373937396665";document.addEventListener("keydown",(i=>{let{keyCode:r}=i;e+=""+r,e===t&&n.g.openAdsControlPanel(),t.indexOf(e)&&(e=""+r)}))})(),n.g.adverts.performance={state:r,print:()=>{r.auctions.forEach((e=>{console.group(`Auction ${e.id}`),console.group("Slots performance"),console.table(e.slots),console.table(e.ads),console.groupEnd(),console.group("Key+values"),console.table(d(e.kv)),console.groupEnd(),console.group("Bids"),console.table(e.bids),console.groupEnd(),l(e),console.groupEnd()})),console.group("Page level Key+values"),console.table(r.gkv),console.groupEnd()},printAuctionPerformance:()=>{r.auctions.forEach((e=>{console.group(`Auction ${e.id}`),l(e),console.groupEnd()}))}}}async function Dp(){const e=(0,T.U2)("plugins.pixelSync.byCMPVendor",{}),t=Object.keys(e),n=await Rp(t);for(const i of t)n(i,e[i])}xp.ccpa={enabledIfDissent:!0},xp.gdpr={enabledIfDissent:!0},Op.ccpa={enabledIfDissent:!0},Op.gdpr={enabledIfDissent:!0};const Rp=async e=>{const{vendorConsents:t}=await vi("getVendorConsents",e);return(e,n)=>t[e]&&Lp(n)},Lp=e=>{(new Image).src=e};function Mp(e){let{getConfig:t,broker:n,log:i}=e;const r=n.until("prebid loaded");n.on("configure and start prebid",(async(e,n)=>{const a=(await r)[0],o=a.getConfig("userSync"),s=Z()({},t("plugins.prebid.userSync"),{filterSettings:{iframe:{bidders:(d=n,Array.from(new Set(d.reduce(((e,t)=>[...e,...t.bids.map((e=>e.bidder))]),[]))))}}});var d;const l={userSync:Mu(o,s)};i("setting pbjs config",s),a.setConfig(l)}))}Dp.vendorIds={gdpr:!1},Mp.purposeIds={gdpr:[1]},Mp.vendorIds={gdpr:"N/A"};var Up=n(2695),jp=function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))},Np=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},Bp=function(e){this.version=e,this.type="node",this.name="node",this.os=Up.platform},Fp=function(e,t,n,i){this.name=e,this.version=t,this.os=n,this.bot=i,this.type="bot-device"},qp=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},Vp=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},Hp=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,zp=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],Wp=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function $p(e){var t=function(e){return""!==e&&zp.reduce((function(t,n){var i=n[0],r=n[1];if(t)return t;var a=r.exec(e);return!!a&&[i,a]}),!1)}(e);if(!t)return null;var n=t[0],i=t[1];if("searchbot"===n)return new qp;var r=i[1]&&i[1].split(".").join("_").split("_").slice(0,3);r?r.length<3&&(r=jp(jp([],r,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-r.length),!0)):r=[];var a=r.join("."),o=function(e){for(var t=0,n=Wp.length;t<n;t++){var i=Wp[t],r=i[0];if(i[1].exec(e))return r}return null}(e),s=Hp.exec(e);return s&&s[1]?new Fp(n,a,o,s[1]):new Np(n,a,o)}const Gp=K.SP["mol.ads.programmatic.debug"];function Kp(e){let{broker:t,getConfig:n}=e;const i=o?$p(o):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new Vp:"undefined"!=typeof navigator?$p(navigator.userAgent):void 0!==Up&&Up.version?new Bp(Up.version.slice(1)):null,r=Math.random(),a=i&&i.name&&((e,t)=>({chrome:e("prog.campaign.percentage.chrome",.7),crios:e("prog.campaign.percentage.crios",.7)}[t]))(n,i.name)||0;var o;Gp&&console.log(`[PROG CAMPAIGN] browser: ${i&&i.name}, chance: ${a}, rand: ${r}`),a>r&&t.emit("set page level targeting",{prog:!0})}async function Xp(e){let{broker:t,getConfig:i}=e;n.g.window._qevents=n.g.window._qevents||[],n.g.window._qevents.push({qacct:"p-yVg_z7_Zx4fHs"}),t.invoke("import script","https://secure.quantserve.com/quant.js")}function Zp(e){let{broker:t,log:n}=e;const i={},r={},a={total:0,auction:{},video:{}};function o(e,t,o){let s;return!r[o]&&i[o]&&(n("[",o,"] ad viewable, but bidding in progress - assuming the auction ended",i[o]),r[o]=i[o],delete i[o]),r[o]?(s=r[o].cpm,a.total+=s,a[e][t]=(a[e][t]||0)+s,n("[",o,"] ad viewable",r[o],"summary.total",a.total),delete r[o]):n("[",o,"] ad viewable - no winner"),s}window.adverts.getRevenueSummary=()=>a,t.on("bids requested",(e=>{e.positions.forEach((e=>{n("[",e,"] start auction"),delete i[e]}))})),t.on("bid",((e,t)=>{let{bidder:r,cpm:a}=t;(!i[e]||i[e].cpm<a)&&(i[e]={bidder:r,cpm:a}),n("[",e,"]",r,"offers to pay",a)})),t.on("bidding ended",(e=>{i[e]?(r[e]=i[e],delete i[e],n("[",e,"] bidding ended",r[e])):n("[",e,"] bidding ended - no bids")})),t.on("video ad viewable",(e=>{let{pos:t,videoId:n}=e;return o("video",n||"unknown",t)})),t.on("ad viewable",(e=>o("auction",e,e)))}Kp.ccpa={enabledIfDissent:!0},Kp.gdpr={enabledIfDissent:!0},Xp.vendorIds={gdpr:[11]},Xp.purposeIds={gdpr:"N/A"},Zp.ccpa={enabledIfDissent:!0},Zp.gdpr={enabledIfDissent:!0};const Yp=(0,S.x)("rta");function Jp(e){let{broker:t}=e;t.on("send to rta",(function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"store";if(n.g.RTA&&"function"==typeof n.g.RTA.tedEvent){const r={action:i,name:e,value:t};Yp("Sending:",r),n.g.RTA.tedEvent("page_event",r)}}))}function Qp(e){let{broker:t}=e;(0,Ne.loaded)().then((()=>t.emit("dom loaded"))),DM.later("DOM_READY",(()=>t.emit("dom ready"))),window.addEventListener("load",(()=>t.emit("page load")))}Jp.isAdsFreeSupported=!0,Jp.ccpa={enabledIfDissent:!0},Jp.gdpr={enabledIfDissent:!0},Qp.isAdsFreeSupported=!0,Qp.ccpa={enabledIfDissent:!0},Qp.gdpr={enabledIfDissent:!0};const eh=(e,t)=>{let{isEmpty:n,slot:i}=t;if(!n)switch(e){case"billboard-oop":return nh();case"billboard":return th(document.getElementById(i.getSlotElementId()))}},th=e=>{if(!e)return;const t=e.querySelector(".mol-ads-label-container");t&&e.parentNode.appendChild(t)},nh=()=>{const e=document.createElement("div"),t=document.createElement("div"),n=document.createTextNode((0,T.U2)("label.text","ADVERTISEMENT"));t.classList.add("mol-ads-skin-label"),t.appendChild(n),e.classList.add("mol-ads-skin-label-container"),e.appendChild(t),document.body.appendChild(e)},ih=e=>{let{imageURL:t,clickURL:n}=e;const{body:i}=document;document.documentElement.classList.add("mol-ads-skin-enabled");const r=document.createElement("a");r.className="mol-ads-skin-click-target",r.href=n;const a=document.createElement("div");a.className="mol-ads-skin-pad",i.insertBefore(r,i.firstChild),i.insertBefore(a,r),(0,Ne.appendStyle)(`\nbody { background-image: url(${t}); }\n`),adverts.stopRefreshingAds(),nh()};function rh(e){let{broker:t}=e;t.on("add skin to page",ih),t.on("add skin label to page",nh),t.on("ad rendered",eh)}rh.ccpa={enabledIfDissent:!0},rh.gdpr={enabledIfDissent:!0};const ah=function(){let{delay:e=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return n=>{t.push(n),setTimeout((()=>t.shift()()),e)}},oh={sync:()=>e=>e(),async:ah,serial:()=>{const e=[];let t;const n=()=>{t=e.length&&setTimeout(i,0)},i=()=>{e.shift()(),n()},r=i=>{e.push(i),t||n()};return r.pause=()=>{t&&(clearTimeout(t),t=!1)},r.resume=()=>{t||n()},r.queue=e,r},idle:()=>n.g.requestIdleCallback?e=>n.g.requestIdleCallback(e):ah(),nextFrame:()=>n.g.requestAnimationFrame?e=>n.g.requestAnimationFrame(e):ah(),fps:n.g.requestAnimationFrame?function(){let e,{fps:t=20,count:n=1,internalExecuter:i="serial",...r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t=parseInt(t),n=parseInt(n);let a=0,o=[];const s=oh[i](r);let d=0;function l(e){s((()=>{e()}))}function u(){const e=o;o={push:l},e.forEach(l),!e.length&&s.resume&&s.resume()}function c(){s.pause&&s.pause(),o=[]}function p(i){requestAnimationFrame(p),e?(d=1e3/(i-e),d>=t?(a++,a===n&&u()):(a>=n&&c(),a=0),e=i):e=i}return requestAnimationFrame(p),e=>{o.push(e)}}:ah};function sh(e){let{broker:t,getConfig:n}=e;const{type:i,...r}=n("scheduler.executer",{type:"async"}),a=(0,oh[i])(r);t.register("call for page analytics",(()=>({executer:i}))),t.bus.setDispatcher(a),r.debug&&console.log("Message dispatcher strategy:",i,r)}sh.isAdsFreeSupported=!0,sh.ccpa={enabledIfDissent:!0},sh.gdpr={enabledIfDissent:!0};const dh=sh;async function lh(e){let{broker:t,getConfig:n}=e;const i=/^https?:\/\/t\.co(\/.*)?$/.test(document.referrer),r="newzit.app"===K.SP.source,a=n("molFeSmartBanner");t.once("dom ready",(async()=>{!MobileUtils.isMobile()&&!(0,K.bP)()||(0,K.ej)("smart-banner")||i||r||DM.molFeComponents.setConfig("molFeSmartBanner",a)}))}function uh(e){let{broker:t}=e;t.emit("set page level targeting",{abv:"next-release.127c8bc"})}function ch(e){let{broker:t,log:n}=e;n("video-events starting");const i=DM&&DM.pageEvents,r=[i.VIDEO_ADVERT_ABORTED,i.VIDEO_ADVERT_COMPLETED,i.VIDEO_ADVERT_FAILED,i.VIDEO_ADVERT_IMPRESSION,i.VIDEO_ADVERT_NOT_SHOWN,i.VIDEO_ADVERT_STARTED,i.VIDEO_CONTENT_ABORTED,i.VIDEO_CONTENT_COMPLETED,i.VIDEO_CONTENT_STARTED,i.VIDEO_DATA_READY,i.VIDEO_PLAYER_READY,i.VIDEO_PROGRESS,i.VIDEO_STREAM_FAILED,i.VIDEO_STREAM_STARTED];i&&r.forEach((e=>{i.subscribe(e,((i,r)=>{n("firing:",e),t.emit(`video page event ${e}`,e,r)}))}))}lh.isAdsFreeSupported=!0,lh.ccpa={enabledIfDissent:!0},lh.gdpr={enabledIfDissent:!0},uh.isAdsFreeSupported=!0,uh.ccpa={enabledIfDissent:!0},uh.gdpr={enabledIfDissent:!0},ch.ccpa={enabledIfDissent:!0},ch.gdpr={enabledIfDissent:!0};const ph="channel"===n.g.PageCriteria.pageType&&(0,T.U2)("page.homepages",["home","ushome","auhome","mailonsunday"]).includes(n.g.PageCriteria.channel)&&n.g.PageCriteria.subchannel===n.g.PageCriteria.channel,hh={adPageType:n.g.adPageType,DM:n.g.DM,isAdsFreeUser:()=>n.g.isAdFreeEntitled&&n.g.isAdFreeEntitled(),isHomepage:ph,isTCFV2Jurisdiction:async e=>e("tcfv2.enabled",!1),pageCriteria:{...n.g.PageCriteria},pageMeta:{...n.g.DM.getPageMetadata()},queryParams:K.SP},fh=hh;function gh(e,t){return Object.keys(t("slots.enabled",{})).includes(e)}(0,tt.fo)("api",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,getConfig:n,log:i}=e;!function(e){let{broker:t}=e;t.on("api message","openCmpBanner",(()=>{t.emit("openCmpBanner")}))}({broker:t}),t.on("api message","adSlotMount",(e=>{let{variant:i,position:r,pos:a,id:o,slotId:s,containerId:d}=e;const l=r||a,u=o||s;if(gh(l,n)){const e={pos:l,id:u,parentId:s,variant:i,containerId:d};t.emit("slot mounted",e)}})),t.on("api message","adSlotUnmount",(e=>{let{position:n}=e;i("adSlotUnmount",n),t.emit("destroy slot",n)})),t.on("api message","adSlotUpdate",(e=>{let{position:r,slotId:a}=e;gh(r,n)&&(i("adSlotUpdate",{position:r,slotId:a}),t.emit("prepare to refresh ads",[r]),t.emit("refresh ads",{positions:[r],ids:[a],reason:"api message"}))})),t.on("api message","onAdRendered",(e=>{t.on("ad rendered",e)})),t.on("api message","onAdRequest",(e=>{t.on("dfp slot requested",e)})),t.on("api message","imageGalleryOpen",(()=>{i("imageGalleryOpen"),t.emit("image gallery open")})),t.on("api message","imageGalleryClose",(()=>{i("imageGalleryClose"),t.emit("image gallery close")})),t.on("api message","adBlockerDetection",(e=>{i("adBlockerDetection",e),t.emit("ad block detection result",e)})),t.on("api message","takeover",(e=>{let{type:n,config:r}=e;i("takeover requested",n),t.emit("takeover",n,r)}))}});const mh=e=>{let{broker:t}=e;const n=(0,T.U2)("plugins.audienceProject.scriptSrc","https://sak.userreport.com/mol/launcher.js");t.invoke("import script",n,{id:"userreport-launcher-script"})};mh.vendorIds={gdpr:[394]},mh.purposeIds={gdpr:"N/A"},(0,tt.fo)("dmp.airgrid",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("plugins.dmp.airgrid.accountId","pqIdXN"),o=i("plugins.dmp.airgrid.publisherId","kip2fp"),s=i("plugins.dmp.airgrid.apiKey","p7z1Zng10vQa6gGEAUva"),d=n.g.edktInitializor=n.g.edktInitializor||{};d.accountId=a,d.publisherId=o,d.apiKey=s,d.invoked||(d.invoked=!0,d.load=function(e){const n=`https://cdn.edkt.io/${e||"sdk"}/edgekit.min.js`;t.emit("import script",n)},d.load(d.accountId)),t.register("dmp","airgrid",(()=>{try{return JSON.parse(localStorage.getItem("edkt_matched_audience_ids")||[])}catch{return[]}}))},vendorIds:{gdpr:[782]}});const vh=e=>t=>t.startsWith(e),yh=e=>t=>t.includes(e),bh=[["Social|Instagram",(0,Y.ar)({referringUrl:yh("instagram.com")})],["Other Websites|MSN",(0,Y.ar)({referringUrl:yh("msn.com")})],["Social|Reddit",(0,Y.ar)({referringUrl:yh("reddit")})],["Other Websites|Upday",(0,Y.ar)({referringUrl:yh("axelspringer")})],["Other Websites|Break.ma",(0,Y.ar)({referringUrl:yh("break.ma")})],["Other Websites|Flipboard",(0,Y.ar)({referringUrl:yh("flipboard")})],["Other Websites|NewsNow",(0,Y.ar)({referringUrl:yh("newsnow")})],["Social|Pinterest",(0,Y.ar)({referringUrl:yh("pinterest")})],["Search|DuckDuckGO",(0,Y.ar)({referringUrl:yh("duckduckgo")})],["Search|Yahoo",(0,Y.ar)({referringUrl:yh("yahoo")})],["Other Websites|Drudgereport",(0,Y.ar)({referringUrl:yh("drudgereport")})],["Other Websites|Newzit",(0,Y.ar)({referringUrl:yh("newzit")})],["Social|Twitter",(0,Y.ar)({referringUrl:vh("https://t.co")})],["Search|Bing",(0,Y.ar)({referringUrl:yh("bing")})],["Search|Google App",(0,Y.ar)({referringUrl:yh("com.google")})],["Search|Google News",(0,Y.ar)({referringUrl:yh("news.google.com")})],["Search|Google Websearch",(0,Y.ar)({referringUrl:yh("google")})],["Social|Facebook",(0,Y.ar)({referringUrl:yh("facebook")})],["Push Channels|Push Notifications",(0,Y.ar)({itoExternalSession:vh("push-no")})],["Push Channels|Windows Widget",(0,Y.ar)({itoExternalSession:vh("windows-widget")})],["Direct|Direct",(0,Y.ar)({referringDomain:e=>"undefined"===e||"www.dailymail.co.uk"===e,itoExternalSession:("undefined",e=>"undefined"===e)})]];function _h(e){const[t]=bh.find((t=>{let[n,i]=t;return i(e)}))||["Other Websites|Other Websites"];return t}(0,tt.fo)("gpt-targeting.ga.referrer",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,DM:n,getConfig:i,log:r}=e;const a=i("plugins.gptTargeting.ga.referrer.directHostNames",["dailymail.co.uk","a.dailymail.co.uk","b.dailymail.co.uk","c.dailymail.co.uk","dailymailint.co.uk","thisismoney.co.uk","thisismoneyint.co.uk"]),{hitReferral:o,sessionReferral:s}=i("plugins.gptTargeting.ga.referrer.trackCategories",{});n.molFeComponents.getConfig("molFeGAProps").then((e=>{var n,i,d;r("gaProps",e);const{itoExternalSession:l,referrer:u,referringDomain:c,referringUrl:p}=e,h=_h({itoExternalSession:l,referringDomain:c,referringUrl:p}),f=$a(u);r("referrer hostname",f);const g=a.includes(null==f||null===(n=f.replace)||void 0===n?void 0:n.call(f,/^www\d?\./,""))||!u?"Direct|Direct":_h({itoExternalSession:l,referringDomain:f,referringUrl:u});if(r("ga targeting, session_referral:",h,"hit_referral:",g),null!=o&&null!==(i=o.includes)&&void 0!==i&&i.call(o,g)||null!=s&&null!==(d=s.includes)&&void 0!==d&&d.call(s,h)){const e={ga_ito:l,ga_rd:c,ga_ru:$a(p),ga_r:$a(u)};t.emit("send event to bidmax",{type:"custom",payload:{module:"ga",...e}}),r("tracking, hit_referral:",g,"session_referral:",h,"payload:",e)}t.emit("set page level targeting",{hit_referral:g,session_referral:h})}))},vendorIds:{gdpr:"N/A"}}),(0,tt.fo)("houseAdsOnly",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i,pageCriteria:r}=e;if(!r.firstArticleHasAdsDisabled)return void i("firstArticleHasAdsDisabled not enabled, bailing");const[a,o]=n("plugins.houseAdsOnly.keyvlaue",["code","red"]),s=n("plugins.houseAdsOnly.positions",[]);s.length?t.register("get tags",(e=>{let{slot:t}=e;const{pos:n}=t;if(s.includes(n))return i(`set ${n} targeting: ${a}=${o}`),{[a]:o}})):i("no positions configured, bailing")}});var Th=n(9347);(0,tt.fo)("integral",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:i}=e;n.g.__iasPET=n.g.__iasPET||{},n.g.__iasPET.queue=n.g.__iasPET.queue||[],n.g.__iasPET.pubId=i("plugin.integral.pubId",922472),n.g.__iasPET.timeout=i("auction.maxTime",2e3);const r=i("dfp.networkCode");let a;t.invoke("load script","//cdn.adsafeprotected.com/iasPET.1.js","__iasPET",(()=>n.g.__iasPET.VERSION)),t.on("configure and start prebid",(e=>{e.includes("gpt")&&_e((async()=>{await kh(),n.g.__iasPET.setTargetingForGPT()}))})),t.register("get video tags",(async()=>{a||(a=new Promise((async e=>{const n=await kh([{adSlotId:"video",adUnitPath:`/${r}/${(0,Th.Z)("video")}`,size:[[636,358]]}]),i={fr:n.fr.toString()};for(const[e,t]of Object.entries(n.brandSafety||{}))i[e]=t;for(const[e,t]of Object.entries(n.slots.video||{}))"id"!==e&&(i[e]=t);t.emit("set page level targeting",i)}))),await a}))},vendorIds:{gdpr:[278]}});const wh=e=>({adSlotId:e.getSlotElementId(),adUnitPath:e.getAdUnitPath(),size:e.getSizes().map((e=>e.getWidth&&e.getHeight?[e.getWidth(),e.getHeight()]:[1,1]))}),Sh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{},n={};try{n=JSON.parse(e)}catch(e){console.warn("[mol-ads][integral]",e)}if(n.code>299||n.code<200)return console.error("[mol-ads][integral]",n.message),void t(n);t(null,n)},kh=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.g.googletag.pubads().getSlots().map(wh),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.g.__iasPET.timeout;return new Promise(((i,r)=>{n.g.__iasPET.queue.push({adSlots:e,dataHandler:e=>Sh(e,((e,t)=>e?r(e):i(t))),timeout:t})}))},Ih={top:30,bottom:30};async function Ch(e){let{broker:t,log:i,targetParagraphIndex:r,margin:a=Ih,paragraphLoadingTimeout:o=3e3}=e;i("target paragraph index:",r);let s,d=r;n.g.PageCriteria.isMobile&&!n.g.PageCriteria.isTablet?(i("is a mobile"),s="#mobile-content > div > article"):(i("is not a mobile"),s='[itemprop="articleBody"]');const l=`${s} > :not(.mol-para-with-font), ${s} > mol-permabox > :not(.mol-para-with-font)`;i("non-paragraph selector:",l);const u=e=>new Promise((n=>{const i=()=>{document.querySelector(`${s} > .mol-para-with-font:nth-of-type(${e})`)&&(r.cancel(),clearInterval(a),n())},r=t.on("slot defined",i),a=setInterval(i,250);i()})),c=e=>{let{top:t,left:n,right:i}=e;return{top:t-a.top,bottom:t+a.bottom,left:n,right:i}};for(;;){i("awaiting",o,"millis for paragraph",d,"to be available"),await(0,et.yq)(o,u(d));const e=(p=d,[...document.querySelectorAll(`${s} > .mol-para-with-font:nth-of-type(n+${p})`)].map((e=>({paragraph:e,rect:e.getBoundingClientRect()}))));i(e.length,"paragraphs loaded so far");const t=[...document.querySelectorAll(l)].map((e=>e.getBoundingClientRect()));let n;i("there are",t.length,"non-paragraph elements in this article");const r=e.find(((e,r)=>{let{rect:a}=e;n=d+r;const o=c(a),s=(l=o,t.find((e=>{return t=l,!((n=e).left>t.right||n.right<t.left||n.top>t.bottom||n.bottom<t.top);var t,n})));var l;return s?i("paragraph",d+r,"failed, ",o,"intersects with",s):i("paragraph",d+r,"seems suitable"),!s}));if(r)return[n,r.paragraph];d+=e.length,i("getting next batch of paragraph starting from",d)}var p}(0,tt.fo)("page.placement",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,log:n}=e;const i=await t.invokeAll("placement requests");if(!i.length)return void n("No placement requests");const r=(0,ne.M7)(i,"targetParagraphIndex");let a=(0,ne.Ps)(r).targetParagraphIndex;n("sortedPlacementRequests",r);const o=r.map((e=>{let{sourcePlugin:t}=e;return t}));try{for(const e of r){const{targetParagraphIndex:n,insertMethod:i,log:r,margin:s}=e,d=Math.max(a,n),l={broker:t,log:r.extend("placement"),targetParagraphIndex:d,margin:s,insertMethod:i},[u,c]=await Ch(l);i(c),o.shift(),a=u}}catch(e){n(`unable to find placements for: ${o.join(", ")}`)}}});var Eh=n(1667),Ah=n.n(Eh),Ph=n(1709),xh=n.n(Ph);function Oh(){return Oh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Oh.apply(this,arguments)}var Dh=n(5827),Rh=n.n(Dh);function Lh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mh(e,t){return Mh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Mh(e,t)}function Uh(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Mh(e,t)}var jh=n(5891),Nh=n.n(jh),Bh=n(1731),Fh=n.n(Bh),qh=n(4829),Vh=n.n(qh);function Hh(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function zh(e,t,n){return zh=Hh()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var r=new(Function.bind.apply(e,i));return n&&Mh(r,n.prototype),r},zh.apply(null,arguments)}function Wh(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Mh(e,t)}var $h=n(4316),Gh=n.n($h),Kh="http://example.com";const Xh=function(e,t){if(/^[a-z]+:/i.test(t))return t;/^data:/.test(e)&&(e=Ah().location&&Ah().location.href||"");var n="function"==typeof Ah().URL,i=/^\/\//.test(e),r=!Ah().location&&!/\/\//i.test(e);if(n?e=new(Ah().URL)(e,Ah().location||Kh):/\/\//i.test(e)||(e=Gh().buildAbsoluteURL(Ah().location&&Ah().location.href||"",e)),n){var a=new URL(t,e);return r?a.href.slice(Kh.length):i?a.href.slice(a.protocol.length):a.href}return Gh().buildAbsoluteURL(e,t)};var Zh=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),Yh=n(500).Buffer;function Jh(e){for(var t,n=(t=e,Ah().atob?Ah().atob(t):Yh.from(t,"base64").toString("binary")),i=new Uint8Array(n.length),r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}var Qh,ef,tf,nf=function(e){function t(){var t;return(t=e.call(this)||this).buffer="",t}return Uh(t,e),t.prototype.push=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},t}(Zh),rf=String.fromCharCode(9),af=function(e){var t=/([0-9.]*)?@?([0-9.]*)?/.exec(e||""),n={};return t[1]&&(n.length=parseInt(t[1],10)),t[2]&&(n.offset=parseInt(t[2],10)),n},of=function(e){for(var t,n=e.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((t=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=t[0].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^\s+|\s+$/g,""),t[1]=t[1].replace(/^['"](.*)['"]$/g,"$1"),i[t[0]]=t[1]);return i},sf=function(e){function t(){var t;return(t=e.call(this)||this).customParsers=[],t.tagMappers=[],t}Uh(t,e);var n=t.prototype;return n.push=function(e){var t,n,i=this;0!==(e=e.trim()).length&&("#"===e[0]?this.tagMappers.reduce((function(t,n){var i=n(e);return i===e?t:t.concat([i])}),[e]).forEach((function(e){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,e))return;if(0===e.indexOf("#EXT"))if(e=e.replace("\r",""),t=/^#EXTM3U/.exec(e))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(t=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))return n={type:"tag",tagType:"inf"},t[1]&&(n.duration=parseFloat(t[1])),t[2]&&(n.title=t[2]),void i.trigger("data",n);if(t=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"targetduration"},t[1]&&(n.duration=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))return n={type:"tag",tagType:"version"},t[1]&&(n.version=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"media-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))return n={type:"tag",tagType:"discontinuity-sequence"},t[1]&&(n.number=parseInt(t[1],10)),void i.trigger("data",n);if(t=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))return n={type:"tag",tagType:"playlist-type"},t[1]&&(n.playlistType=t[1]),void i.trigger("data",n);if(t=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(e))return n=Oh(af(t[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",n);if(t=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))return n={type:"tag",tagType:"allow-cache"},t[1]&&(n.allowed=!/NO/.test(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-MAP:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"map"},t[1]){var a=of(t[1]);a.URI&&(n.uri=a.URI),a.BYTERANGE&&(n.byterange=af(a.BYTERANGE))}i.trigger("data",n)}else if(t=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e)){if(n={type:"tag",tagType:"stream-inf"},t[1]){if(n.attributes=of(t[1]),n.attributes.RESOLUTION){var o=n.attributes.RESOLUTION.split("x"),s={};o[0]&&(s.width=parseInt(o[0],10)),o[1]&&(s.height=parseInt(o[1],10)),n.attributes.RESOLUTION=s}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(t=/^#EXT-X-MEDIA:?(.*)$/.exec(e))return n={type:"tag",tagType:"media"},t[1]&&(n.attributes=of(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-ENDLIST/.exec(e))i.trigger("data",{type:"tag",tagType:"endlist"});else if(t=/^#EXT-X-DISCONTINUITY/.exec(e))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(t=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))return n={type:"tag",tagType:"program-date-time"},t[1]&&(n.dateTimeString=t[1],n.dateTimeObject=new Date(t[1])),void i.trigger("data",n);if(t=/^#EXT-X-KEY:?(.*)$/.exec(e))return n={type:"tag",tagType:"key"},t[1]&&(n.attributes=of(t[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(t=/^#EXT-X-START:?(.*)$/.exec(e))return n={type:"tag",tagType:"start"},t[1]&&(n.attributes=of(t[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out-cont"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-out"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if(t=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))return n={type:"tag",tagType:"cue-in"},t[1]?n.data=t[1]:n.data="",void i.trigger("data",n);if((t=/^#EXT-X-SKIP:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"skip"}).attributes=of(t[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(rf)),void i.trigger("data",n);if((t=/^#EXT-X-PART:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part"}).attributes=of(t[1]),["DURATION"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["INDEPENDENT","GAP"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=af(n.attributes.BYTERANGE)),void i.trigger("data",n);if((t=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"server-control"}).attributes=of(t[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=/YES/.test(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PART-INF:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"part-inf"}).attributes=of(t[1]),["PART-TARGET"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseFloat(n.attributes[e]))})),void i.trigger("data",n);if((t=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=of(t[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(e){if(n.attributes.hasOwnProperty(e)){n.attributes[e]=parseInt(n.attributes[e],10);var t="BYTERANGE-LENGTH"===e?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[t]=n.attributes[e],delete n.attributes[e]}})),void i.trigger("data",n);if((t=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(e))&&t[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=of(t[1]),["LAST-MSN","LAST-PART"].forEach((function(e){n.attributes.hasOwnProperty(e)&&(n.attributes[e]=parseInt(n.attributes[e],10))})),void i.trigger("data",n);i.trigger("data",{type:"tag",data:e.slice(4)})}}}else i.trigger("data",{type:"comment",text:e.slice(1)})})):this.trigger("data",{type:"uri",uri:e}))},n.addParser=function(e){var t=this,n=e.expression,i=e.customType,r=e.dataParser,a=e.segment;"function"!=typeof r&&(r=function(e){return e}),this.customParsers.push((function(e){if(n.exec(e))return t.trigger("data",{type:"custom",data:r(e),customType:i,segment:a}),!0}))},n.addTagMapper=function(e){var t=e.expression,n=e.map;this.tagMappers.push((function(e){return t.test(e)?n(e):e}))},t}(Zh),df=function(e){var t={};return Object.keys(e).forEach((function(n){var i;t[(i=n,i.toLowerCase().replace(/-(\w)/g,(function(e){return e[1].toUpperCase()})))]=e[n]})),t},lf=function(e){var t=e.serverControl,n=e.targetDuration,i=e.partTargetDuration;if(t){var r="#EXT-X-SERVER-CONTROL",a="holdBack",o="partHoldBack",s=n&&3*n,d=i&&2*i;n&&!t.hasOwnProperty(a)&&(t[a]=s,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+s+")."})),s&&t[a]<s&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+t[a]+") to targetDuration * 3 ("+s+")"}),t[a]=s),i&&!t.hasOwnProperty(o)&&(t[o]=3*i,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+t[o]+")."})),i&&t[o]<d&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+t[o]+") to partTargetDuration * 2 ("+d+")."}),t[o]=d)}},uf=function(e){function t(){var t;(t=e.call(this)||this).lineStream=new nf,t.parseStream=new sf,t.lineStream.pipe(t.parseStream);var n,i,r=Lh(t),a=[],o={},s=!1,d=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},u=0;t.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var c=0,p=0;return t.on("end",(function(){o.uri||!o.parts&&!o.preloadHints||(!o.map&&n&&(o.map=n),!o.key&&i&&(o.key=i),o.timeline||"number"!=typeof u||(o.timeline=u),t.manifest.preloadSegment=o)})),t.parseStream.on("data",(function(e){var t,h;({tag:function(){({version:function(){e.version&&(this.manifest.version=e.version)},"allow-cache":function(){this.manifest.allowCache=e.allowed,"allowed"in e||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in e&&(o.byterange=t,t.length=e.length,"offset"in e||(e.offset=c)),"offset"in e&&(o.byterange=t,t.offset=e.offset),c=t.offset+t.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),e.duration>0&&(o.duration=e.duration),0===e.duration&&(o.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=a},key:function(){if(e.attributes)if("NONE"!==e.attributes.METHOD)if(e.attributes.URI){if("com.apple.streamingkeydelivery"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:e.attributes});if("com.microsoft.playready"===e.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.microsoft.playready"]={uri:e.attributes.URI});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===e.attributes.KEYFORMAT)return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(e.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===e.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==e.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):e.attributes.KEYID&&"0x"===e.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:e.attributes.KEYFORMAT,keyId:e.attributes.KEYID.substring(2)},pssh:Jh(e.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}));e.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:e.attributes.METHOD||"AES-128",uri:e.attributes.URI},void 0!==e.attributes.IV&&(i.iv=e.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(e.number)?this.manifest.mediaSequence=e.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+e.number})},"discontinuity-sequence":function(){isFinite(e.number)?(this.manifest.discontinuitySequence=e.number,u=e.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+e.number})},"playlist-type":function(){/VOD|EVENT/.test(e.playlistType)?this.manifest.playlistType=e.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+e.playlist})},map:function(){n={},e.uri&&(n.uri=e.uri),e.byterange&&(n.byterange=e.byterange),i&&(n.key=i)},"stream-inf":function(){this.manifest.playlists=a,this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes?(o.attributes||(o.attributes={}),Oh(o.attributes,e.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,e.attributes&&e.attributes.TYPE&&e.attributes["GROUP-ID"]&&e.attributes.NAME){var n=this.manifest.mediaGroups[e.attributes.TYPE];n[e.attributes["GROUP-ID"]]=n[e.attributes["GROUP-ID"]]||{},t=n[e.attributes["GROUP-ID"]],(h={default:/yes/i.test(e.attributes.DEFAULT)}).default?h.autoselect=!0:h.autoselect=/yes/i.test(e.attributes.AUTOSELECT),e.attributes.LANGUAGE&&(h.language=e.attributes.LANGUAGE),e.attributes.URI&&(h.uri=e.attributes.URI),e.attributes["INSTREAM-ID"]&&(h.instreamId=e.attributes["INSTREAM-ID"]),e.attributes.CHARACTERISTICS&&(h.characteristics=e.attributes.CHARACTERISTICS),e.attributes.FORCED&&(h.forced=/yes/i.test(e.attributes.FORCED)),t[e.attributes.NAME]=h}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){u+=1,o.discontinuity=!0,this.manifest.discontinuityStarts.push(a.length)},"program-date-time":function(){void 0===this.manifest.dateTimeString&&(this.manifest.dateTimeString=e.dateTimeString,this.manifest.dateTimeObject=e.dateTimeObject),o.dateTimeString=e.dateTimeString,o.dateTimeObject=e.dateTimeObject},targetduration:function(){!isFinite(e.duration)||e.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+e.duration}):(this.manifest.targetDuration=e.duration,lf.call(this,this.manifest))},start:function(){e.attributes&&!isNaN(e.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:e.attributes["TIME-OFFSET"],precise:e.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){o.cueOut=e.data},"cue-out-cont":function(){o.cueOutCont=e.data},"cue-in":function(){o.cueIn=e.data},skip:function(){this.manifest.skip=df(e.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",e.attributes,["SKIPPED-SEGMENTS"])},part:function(){var t=this;s=!0;var n=this.manifest.segments.length,i=df(e.attributes);o.parts=o.parts||[],o.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=p),p=i.byterange.offset+i.byterange.length);var r=o.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+n,e.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(e,n){e.hasOwnProperty("lastPart")||t.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var t=this.manifest.serverControl=df(e.attributes);t.hasOwnProperty("canBlockReload")||(t.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),lf.call(this,this.manifest),t.canSkipDateranges&&!t.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var t=this.manifest.segments.length,n=df(e.attributes),i=n.type&&"PART"===n.type;o.preloadHints=o.preloadHints||[],o.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?p:0,i&&(p=n.byterange.offset+n.byterange.length)));var r=o.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t,e.attributes,["TYPE","URI"]),n.type)for(var a=0;a<o.preloadHints.length-1;a++){var s=o.preloadHints[a];s.type&&s.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+t+" has the same TYPE "+n.type+" as preload hint #"+a})}},"rendition-report":function(){var t=df(e.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(t);var n=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];s&&i.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,e.attributes,i)},"part-inf":function(){this.manifest.partInf=df(e.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",e.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),lf.call(this,this.manifest)}}[e.tagType]||d).call(r)},uri:function(){o.uri=e.uri,a.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),i&&(o.key=i),o.timeline=u,n&&(o.map=n),p=0,o={}},comment:function(){},custom:function(){e.segment?(o.custom=o.custom||{},o.custom[e.customType]=e.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[e.customType]=e.data)}})[e.type].call(r)})),t}Uh(t,e);var n=t.prototype;return n.warnOnMissingAttributes_=function(e,t,n){var i=[];n.forEach((function(e){t.hasOwnProperty(e)||i.push(e)})),i.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+i.join(", ")})},n.push=function(e){this.lineStream.push(e)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(e){this.parseStream.addParser(e)},n.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(Zh),cf={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},pf=["video","audio","text"],hf=["Video","Audio","Text"],ff=function(e){return e?e.replace(/avc1\.(\d+)\.(\d+)/i,(function(e,t,n){return"avc1."+("00"+Number(t).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):e},gf=function(e){void 0===e&&(e="");var t=e.split(","),n=[];return t.forEach((function(e){var t;e=e.trim(),pf.forEach((function(i){var r=cf[i].exec(e.toLowerCase());if(r&&!(r.length<=1)){t=i;var a=e.substring(0,r[1].length),o=e.replace(a,"");n.push({type:a,details:o,mediaType:i})}})),t||n.push({type:e,details:"",mediaType:"unknown"})})),n},mf=function(e,t){if(!e.mediaGroups.AUDIO||!t)return null;var n=e.mediaGroups.AUDIO[t];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return gf(r.playlists[0].attributes.CODECS)}return null},vf=function(e){return void 0===e&&(e=""),cf.audio.test(e.trim().toLowerCase())},yf=function(e){if(e&&"string"==typeof e){var t,n=e.toLowerCase().split(",").map((function(e){return ff(e.trim())})),i="video";1===n.length&&vf(n[0])?i="audio":1===n.length&&(void 0===(t=n[0])&&(t=""),cf.text.test(t.trim().toLowerCase()))&&(i="application");var r="mp4";return n.every((function(e){return cf.mp4.test(e)}))?r="mp4":n.every((function(e){return cf.webm.test(e)}))?r="webm":n.every((function(e){return cf.ogg.test(e)}))&&(r="ogg"),i+"/"+r+';codecs="'+e+'"'}},bf=function(e){return void 0===e&&(e=""),Ah().MediaSource&&Ah().MediaSource.isTypeSupported&&Ah().MediaSource.isTypeSupported(yf(e))||!1},_f=function(e){return void 0===e&&(e=""),e.toLowerCase().split(",").every((function(e){e=e.trim();for(var t=0;t<hf.length;t++)if(cf["muxer"+hf[t]].test(e))return!0;return!1}))},Tf="mp4a.40.2",wf="avc1.4d400d",Sf=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,kf=/^application\/dash\+xml/i,If=function(e){return Sf.test(e)?"hls":kf.test(e)?"dash":"application/vnd.videojs.vhs+json"===e?"vhs-json":null},Cf=function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer},Ef=function(e){return e instanceof Uint8Array?e:(Array.isArray(e)||function(e){return Cf(e)}(e)||e instanceof ArrayBuffer||(e="number"!=typeof e||"number"==typeof e&&e!=e?0:[e]),new Uint8Array(e&&e.buffer||e,e&&e.byteOffset||0,e&&e.byteLength||0))},Af=Ah().BigInt||Number,Pf=[Af("0x1"),Af("0x100"),Af("0x10000"),Af("0x1000000"),Af("0x100000000"),Af("0x10000000000"),Af("0x1000000000000"),Af("0x100000000000000"),Af("0x10000000000000000")],xf=(Qh=new Uint16Array([65484]),255===(ef=new Uint8Array(Qh.buffer,Qh.byteOffset,Qh.byteLength))[0]||ef[0],function(e,t){var n=void 0===t?{}:t,i=n.signed,r=void 0!==i&&i,a=n.le,o=void 0!==a&&a;e=Ef(e);var s=o?"reduce":"reduceRight",d=(e[s]?e[s]:Array.prototype[s]).call(e,(function(t,n,i){var r=o?i:Math.abs(i+1-e.length);return t+Af(n)*Pf[r]}),Af(0));if(r){var l=Pf[e.length]/Af(2)-Af(1);(d=Af(d))>l&&(d-=l,d-=l,d-=Af(2))}return Number(d)}),Of=function(e,t){if("string"!=typeof e&&e&&"function"==typeof e.toString&&(e=e.toString()),"string"!=typeof e)return new Uint8Array;t||(e=unescape(encodeURIComponent(e)));for(var n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n},Df=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t=t.filter((function(e){return e&&(e.byteLength||e.length)&&"string"!=typeof e})),t.length<=1)return Ef(t[0]);var i=t.reduce((function(e,t,n){return e+(t.byteLength||t.length)}),0),r=new Uint8Array(i),a=0;return t.forEach((function(e){e=Ef(e),r.set(e,a),a+=e.byteLength})),r},Rf=function(e,t,n){var i=void 0===n?{}:n,r=i.offset,a=void 0===r?0:r,o=i.mask,s=void 0===o?[]:o;e=Ef(e);var d=(t=Ef(t)).every?t.every:Array.prototype.every;return t.length&&e.length-a>=t.length&&d.call(t,(function(t,n){return t===(s[n]?s[n]&e[a+n]:e[a+n])}))},Lf=n(5364),Mf=function(e){return!!e&&"object"==typeof e},Uf=function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.reduce((function(t,n){return"object"!=typeof n||Object.keys(n).forEach((function(i){Array.isArray(t[i])&&Array.isArray(n[i])?t[i]=t[i].concat(n[i]):Mf(t[i])&&Mf(n[i])?t[i]=e(t[i],n[i]):t[i]=n[i]})),t}),{})},jf=function(e){return Object.keys(e).map((function(t){return e[t]}))},Nf=function(e){return e.reduce((function(e,t){return e.concat(t)}),[])},Bf=function(e){if(!e.length)return[];for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},Ff=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1},qf=function(e){var t=e.baseUrl,n=void 0===t?"":t,i=e.source,r=void 0===i?"":i,a=e.range,o=void 0===a?"":a,s=e.indexRange,d=void 0===s?"":s,l={uri:r,resolvedUri:Xh(n||"",r)};if(o||d){var u,c=(o||d).split("-"),p=Ah().BigInt?Ah().BigInt(c[0]):parseInt(c[0],10),h=Ah().BigInt?Ah().BigInt(c[1]):parseInt(c[1],10);p<Number.MAX_SAFE_INTEGER&&"bigint"==typeof p&&(p=Number(p)),h<Number.MAX_SAFE_INTEGER&&"bigint"==typeof h&&(h=Number(h)),"bigint"==typeof(u="bigint"==typeof h||"bigint"==typeof p?Ah().BigInt(h)-Ah().BigInt(p)+Ah().BigInt(1):h-p+1)&&u<Number.MAX_SAFE_INTEGER&&(u=Number(u)),l.byterange={length:u,offset:p}}return l},Vf=function(e){return e&&"number"!=typeof e&&(e=parseInt(e,10)),isNaN(e)?null:e},Hf={static:function(e){var t=e.duration,n=e.timescale,i=void 0===n?1:n,r=e.sourceDuration,a=e.periodDuration,o=Vf(e.endNumber),s=t/i;return"number"==typeof o?{start:0,end:o}:"number"==typeof a?{start:0,end:a/s}:{start:0,end:r/s}},dynamic:function(e){var t=e.NOW,n=e.clientOffset,i=e.availabilityStartTime,r=e.timescale,a=void 0===r?1:r,o=e.duration,s=e.periodStart,d=void 0===s?0:s,l=e.minimumUpdatePeriod,u=void 0===l?0:l,c=e.timeShiftBufferDepth,p=void 0===c?1/0:c,h=Vf(e.endNumber),f=(t+n)/1e3,g=i+d,m=f+u-g,v=Math.ceil(m*a/o),y=Math.floor((f-g-p)*a/o),b=Math.floor((f-g)*a/o);return{start:Math.max(0,y),end:"number"==typeof h?h:Math.min(v,b)}}},zf=function(e){var t=e.type,n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodDuration,o=e.sourceDuration,s=Hf[t](e),d=function(e,t){for(var n=[],i=e;i<t;i++)n.push(i);return n}(s.start,s.end).map(function(e){return function(t){var n=e.duration,i=e.timescale,r=void 0===i?1:i,a=e.periodStart,o=e.startNumber;return{number:(void 0===o?1:o)+t,duration:n/r,timeline:a,time:t*n}}}(e));if("static"===t){var l=d.length-1,u="number"==typeof a?a:o;d[l].duration=u-n/r*l}return d},Wf=function(e){var t=e.baseUrl,n=e.initialization,i=void 0===n?{}:n,r=e.sourceDuration,a=e.indexRange,o=void 0===a?"":a,s=e.periodStart,d=e.presentationTime,l=e.number,u=void 0===l?0:l,c=e.duration;if(!t)throw new Error("NO_BASE_URL");var p=qf({baseUrl:t,source:i.sourceURL,range:i.range}),h=qf({baseUrl:t,source:t,indexRange:o});if(h.map=p,c){var f=zf(e);f.length&&(h.duration=f[0].duration,h.timeline=f[0].timeline)}else r&&(h.duration=r,h.timeline=s);return h.presentationTime=d||s,h.number=u,[h]},$f=function(e,t,n){var i,r=e.sidx.map?e.sidx.map:null,a=e.sidx.duration,o=e.timeline||0,s=e.sidx.byterange,d=s.offset+s.length,l=t.timescale,u=t.references.filter((function(e){return 1!==e.referenceType})),c=[],p=e.endList?"static":"dynamic",h=e.sidx.timeline,f=h,g=e.mediaSequence||0;i="bigint"==typeof t.firstOffset?Ah().BigInt(d)+t.firstOffset:d+t.firstOffset;for(var m=0;m<u.length;m++){var v,y=t.references[m],b=y.referencedSize,_=y.subsegmentDuration;v="bigint"==typeof i?i+Ah().BigInt(b)-Ah().BigInt(1):i+b-1;var T=Wf({baseUrl:n,timescale:l,timeline:o,periodStart:h,presentationTime:f,number:g,duration:_,sourceDuration:a,indexRange:i+"-"+v,type:p})[0];r&&(T.map=r),c.push(T),i+="bigint"==typeof i?Ah().BigInt(b):b,f+=_/l,g++}return e.segments=c,e},Gf=["AUDIO","SUBTITLES"],Kf=function(e){return(t=e,n=function(e){return e.timeline},jf(t.reduce((function(e,t){return t.forEach((function(t){e[n(t)]=t})),e}),{}))).sort((function(e,t){return e.timeline>t.timeline?1:-1}));var t,n},Xf=function(e){var t,n,i=[];return t=e,n=function(e,t,n,r){i=i.concat(e.playlists||[])},Gf.forEach((function(e){for(var i in t.mediaGroups[e])for(var r in t.mediaGroups[e][i]){var a=t.mediaGroups[e][i][r];n(a)}})),i},Zf=function(e){var t=e.playlist,n=e.mediaSequence;t.mediaSequence=n,t.segments.forEach((function(e,n){e.number=t.mediaSequence+n}))},Yf=function(e){return e&&e.uri+"-"+(n="bigint"==typeof(t=e.byterange).offset||"bigint"==typeof t.length?Ah().BigInt(t.offset)+Ah().BigInt(t.length)-Ah().BigInt(1):t.offset+t.length-1,t.offset+"-"+n);var t,n},Jf=function(e){return jf(e.reduce((function(e,t){var n,i=t.attributes.id+(t.attributes.lang||"");e[i]?(t.segments&&(t.segments[0]&&(t.segments[0].discontinuity=!0),(n=e[i].segments).push.apply(n,t.segments)),t.attributes.contentProtection&&(e[i].attributes.contentProtection=t.attributes.contentProtection)):(e[i]=t,e[i].attributes.timelineStarts=[]);return e[i].attributes.timelineStarts.push({start:t.attributes.periodStart,timeline:t.attributes.periodStart}),e}),{})).map((function(e){var t;return e.discontinuityStarts=(t=e.segments||[],"discontinuity",t.reduce((function(e,t,n){return t.discontinuity&&e.push(n),e}),[])),e}))},Qf=function(e,t){var n=Yf(e.sidx),i=n&&t[n]&&t[n].sidx;return i&&$f(e,i,e.sidx.resolvedUri),e},eg=function(e,t){if(void 0===t&&(t={}),!Object.keys(t).length)return e;for(var n in e)e[n]=Qf(e[n],t);return e},tg=function(e){var t,n=e.attributes,i=e.segments,r=e.sidx,a=e.discontinuityStarts,o={attributes:(t={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},t["PROGRAM-ID"]=1,t),uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:"",targetDuration:n.duration,discontinuityStarts:a,timelineStarts:n.timelineStarts,segments:i};return n.contentProtection&&(o.contentProtection=n.contentProtection),r&&(o.sidx=r),o},ng=function(e){var t=e.attributes;return"video/mp4"===t.mimeType||"video/webm"===t.mimeType||"video"===t.contentType},ig=function(e){var t=e.attributes;return"audio/mp4"===t.mimeType||"audio/webm"===t.mimeType||"audio"===t.contentType},rg=function(e){var t=e.attributes;return"text/vtt"===t.mimeType||"text"===t.contentType},ag=function(e){return e?Object.keys(e).reduce((function(t,n){var i=e[n];return t.concat(i.playlists)}),[]):[]},og=function(e){var t,n=e.dashPlaylists,i=e.locations,r=e.sidxMapping,a=void 0===r?{}:r,o=e.previousManifest;if(!n.length)return{};var s=n[0].attributes,d=s.sourceDuration,l=s.type,u=s.suggestedPresentationDelay,c=s.minimumUpdatePeriod,p=Jf(n.filter(ng)).map(tg),h=Jf(n.filter(ig)),f=Jf(n.filter(rg)),g=n.map((function(e){return e.attributes.captionServices})).filter(Boolean),m={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(t={AUDIO:{},VIDEO:{}},t["CLOSED-CAPTIONS"]={},t.SUBTITLES={},t),uri:"",duration:d,playlists:eg(p,a)};c>=0&&(m.minimumUpdatePeriod=1e3*c),i&&(m.locations=i),"dynamic"===l&&(m.suggestedPresentationDelay=u);var v,y,b,_,T,w,S,k=0===m.playlists.length,I=h.length?function(e,t,n){var i;void 0===t&&(t={}),void 0===n&&(n=!1);var r=e.reduce((function(e,r){var a=r.attributes.role&&r.attributes.role.value||"",o=r.attributes.lang||"",s=r.attributes.label||"main";if(o&&!r.attributes.label){var d=a?" ("+a+")":"";s=""+r.attributes.lang+d}e[s]||(e[s]={language:o,autoselect:!0,default:"main"===a,playlists:[],uri:""});var l=Qf(function(e,t){var n,i=e.attributes,r=e.segments,a=e.sidx,o=e.mediaSequence,s=e.discontinuitySequence,d=e.discontinuityStarts,l={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===i.type,timeline:i.periodStart,resolvedUri:"",targetDuration:i.duration,discontinuitySequence:s,discontinuityStarts:d,timelineStarts:i.timelineStarts,mediaSequence:o,segments:r};return i.contentProtection&&(l.contentProtection=i.contentProtection),a&&(l.sidx=a),t&&(l.attributes.AUDIO="audio",l.attributes.SUBTITLES="subs"),l}(r,n),t);return e[s].playlists.push(l),void 0===i&&"main"===a&&((i=r).default=!0),e}),{});return i||(r[Object.keys(r)[0]].default=!0),r}(h,a,k):null,C=f.length?function(e,t){return void 0===t&&(t={}),e.reduce((function(e,n){var i=n.attributes.lang||"text";return e[i]||(e[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),e[i].playlists.push(Qf(function(e){var t,n=e.attributes,i=e.segments,r=e.mediaSequence,a=e.discontinuityStarts,o=e.discontinuitySequence;void 0===i&&(i=[{uri:n.baseUrl,timeline:n.periodStart,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var s=((t={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,t);return n.codecs&&(s.CODECS=n.codecs),{attributes:s,uri:"",endList:"static"===n.type,timeline:n.periodStart,resolvedUri:n.baseUrl||"",targetDuration:n.duration,timelineStarts:n.timelineStarts,discontinuityStarts:a,discontinuitySequence:o,mediaSequence:r,segments:i}}(n),t)),e}),{})}(f,a):null,E=p.concat(ag(I),ag(C)),A=E.map((function(e){return e.timelineStarts}));return m.timelineStarts=Kf(A),v=E,y=m.timelineStarts,v.forEach((function(e){e.mediaSequence=0,e.discontinuitySequence=Ff(y,(function(t){return t.timeline===e.timeline})),e.segments&&e.segments.forEach((function(e,t){e.number=t}))})),I&&(m.mediaGroups.AUDIO.audio=I),C&&(m.mediaGroups.SUBTITLES.subs=C),g.length&&(m.mediaGroups["CLOSED-CAPTIONS"].cc=g.reduce((function(e,t){return t?(t.forEach((function(t){var n=t.channel,i=t.language;e[i]={autoselect:!1,default:!1,instreamId:n,language:i},t.hasOwnProperty("aspectRatio")&&(e[i].aspectRatio=t.aspectRatio),t.hasOwnProperty("easyReader")&&(e[i].easyReader=t.easyReader),t.hasOwnProperty("3D")&&(e[i]["3D"]=t["3D"])})),e):e}),{})),o?(_=(b={oldManifest:o,newManifest:m}).oldManifest,T=b.newManifest,w=_.playlists.concat(Xf(_)),S=T.playlists.concat(Xf(T)),T.timelineStarts=Kf([_.timelineStarts,T.timelineStarts]),function(e){var t=e.oldPlaylists,n=e.timelineStarts;e.newPlaylists.forEach((function(e){e.discontinuitySequence=Ff(n,(function(t){return t.timeline===e.timeline}));var i=function(e,t){for(var n=0;n<e.length;n++)if(e[n].attributes.NAME===t)return e[n];return null}(t,e.attributes.NAME);if(i&&!e.sidx){var r=e.segments[0],a=Ff(i.segments,(function(e){return Math.abs(e.presentationTime-r.presentationTime)<.016666666666666666}));if(-1===a)return Zf({playlist:e,mediaSequence:i.mediaSequence+i.segments.length}),e.segments[0].discontinuity=!0,e.discontinuityStarts.unshift(0),void((!i.segments.length&&e.timeline>i.timeline||i.segments.length&&e.timeline>i.segments[i.segments.length-1].timeline)&&e.discontinuitySequence--);i.segments[a].discontinuity&&!r.discontinuity&&(r.discontinuity=!0,e.discontinuityStarts.unshift(0),e.discontinuitySequence--),Zf({playlist:e,mediaSequence:i.segments[a].number})}}))}({oldPlaylists:w,newPlaylists:S,timelineStarts:T.timelineStarts}),T):m},sg=function(e,t,n){var i=e.NOW,r=e.clientOffset,a=e.availabilityStartTime,o=e.timescale,s=void 0===o?1:o,d=e.periodStart,l=void 0===d?0:d,u=e.minimumUpdatePeriod,c=(i+r)/1e3+(void 0===u?0:u)-(a+l);return Math.ceil((c*s-t)/n)},dg=function(e,t){for(var n=e.type,i=e.minimumUpdatePeriod,r=void 0===i?0:i,a=e.media,o=void 0===a?"":a,s=e.sourceDuration,d=e.timescale,l=void 0===d?1:d,u=e.startNumber,c=void 0===u?1:u,p=e.periodStart,h=[],f=-1,g=0;g<t.length;g++){var m=t[g],v=m.d,y=m.r||0,b=m.t||0;f<0&&(f=b),b&&b>f&&(f=b);var _=void 0;if(y<0){var T=g+1;_=T===t.length?"dynamic"===n&&r>0&&o.indexOf("$Number$")>0?sg(e,f,v):(s*l-f)/v:(t[T].t-f)/v}else _=y+1;for(var w=c+h.length+_,S=c+h.length;S<w;)h.push({number:S,duration:v/l,time:f,timeline:p}),f+=v,S++}return h},lg=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ug=function(e,t){return e.replace(lg,function(e){return function(t,n,i,r){if("$$"===t)return"$";if(void 0===e[n])return t;var a=""+e[n];return"RepresentationID"===n?a:(r=i?parseInt(r,10):1,a.length>=r?a:""+new Array(r-a.length+1).join("0")+a)}}(t))},cg=function(e,t){var n={RepresentationID:e.id,Bandwidth:e.bandwidth||0},i=e.initialization,r=void 0===i?{sourceURL:"",range:""}:i,a=qf({baseUrl:e.baseUrl,source:ug(r.sourceURL,n),range:r.range}),o=function(e,t){return e.duration||t?e.duration?zf(e):dg(e,t):[{number:e.startNumber||1,duration:e.sourceDuration,time:0,timeline:e.periodStart}]}(e,t);return o.map((function(t){n.Number=t.number,n.Time=t.time;var i=ug(e.media||"",n),r=e.timescale||1,o=e.presentationTimeOffset||0,s=e.periodStart+(t.time-o)/r;return{uri:i,timeline:t.timeline,duration:t.duration,resolvedUri:Xh(e.baseUrl||"",i),map:a,number:t.number,presentationTime:s}}))},pg=function(e,t){var n=e.duration,i=e.segmentUrls,r=void 0===i?[]:i,a=e.periodStart;if(!n&&!t||n&&t)throw new Error("SEGMENT_TIME_UNSPECIFIED");var o,s=r.map((function(t){return function(e,t){var n=e.baseUrl,i=e.initialization,r=void 0===i?{}:i,a=qf({baseUrl:n,source:r.sourceURL,range:r.range}),o=qf({baseUrl:n,source:t.media,range:t.mediaRange});return o.map=a,o}(e,t)}));return n&&(o=zf(e)),t&&(o=dg(e,t)),o.map((function(t,n){if(s[n]){var i=s[n],r=e.timescale||1,o=e.presentationTimeOffset||0;return i.timeline=t.timeline,i.duration=t.duration,i.number=t.number,i.presentationTime=a+(t.time-o)/r,i}})).filter((function(e){return e}))},hg=function(e){var t,n,i=e.attributes,r=e.segmentInfo;r.template?(n=cg,t=Uf(i,r.template)):r.base?(n=Wf,t=Uf(i,r.base)):r.list&&(n=pg,t=Uf(i,r.list));var a={attributes:i};if(!n)return a;var o=n(t,r.segmentTimeline);if(t.duration){var s=t,d=s.duration,l=s.timescale,u=void 0===l?1:l;t.duration=d/u}else o.length?t.duration=o.reduce((function(e,t){return Math.max(e,Math.ceil(t.duration))}),0):t.duration=0;return a.attributes=t,a.segments=o,r.base&&t.indexRange&&(a.sidx=o[0],a.segments=[]),a},fg=function(e,t){return Bf(e.childNodes).filter((function(e){return e.tagName===t}))},gg=function(e){return e.textContent.trim()},mg=function(e){var t=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(e);if(!t)return 0;var n=t.slice(1),i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],d=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(a||0)+3600*parseFloat(o||0)+60*parseFloat(s||0)+parseFloat(d||0)},vg={mediaPresentationDuration:function(e){return mg(e)},availabilityStartTime:function(e){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(t=e)&&(t+="Z"),Date.parse(t)/1e3;var t},minimumUpdatePeriod:function(e){return mg(e)},suggestedPresentationDelay:function(e){return mg(e)},type:function(e){return e},timeShiftBufferDepth:function(e){return mg(e)},start:function(e){return mg(e)},width:function(e){return parseInt(e,10)},height:function(e){return parseInt(e,10)},bandwidth:function(e){return parseInt(e,10)},startNumber:function(e){return parseInt(e,10)},timescale:function(e){return parseInt(e,10)},presentationTimeOffset:function(e){return parseInt(e,10)},duration:function(e){var t=parseInt(e,10);return isNaN(t)?mg(e):t},d:function(e){return parseInt(e,10)},t:function(e){return parseInt(e,10)},r:function(e){return parseInt(e,10)},DEFAULT:function(e){return e}},yg=function(e){return e&&e.attributes?Bf(e.attributes).reduce((function(e,t){var n=vg[t.name]||vg.DEFAULT;return e[t.name]=n(t.value),e}),{}):{}},bg={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},_g=function(e,t){return t.length?Nf(e.map((function(e){return t.map((function(t){return Xh(e,gg(t))}))}))):e},Tg=function(e){var t=fg(e,"SegmentTemplate")[0],n=fg(e,"SegmentList")[0],i=n&&fg(n,"SegmentURL").map((function(e){return Uf({tag:"SegmentURL"},yg(e))})),r=fg(e,"SegmentBase")[0],a=n||t,o=a&&fg(a,"SegmentTimeline")[0],s=n||r||t,d=s&&fg(s,"Initialization")[0],l=t&&yg(t);l&&d?l.initialization=d&&yg(d):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var u={template:l,segmentTimeline:o&&fg(o,"S").map((function(e){return yg(e)})),list:n&&Uf(yg(n),{segmentUrls:i,initialization:yg(d)}),base:r&&Uf(yg(r),{initialization:yg(d)})};return Object.keys(u).forEach((function(e){u[e]||delete u[e]})),u},wg=function(e,t){return function(n,i){var r=_g(t,fg(n.node,"BaseURL")),a=Uf(e,{periodStart:n.attributes.start});"number"==typeof n.attributes.duration&&(a.periodDuration=n.attributes.duration);var o=fg(n.node,"AdaptationSet"),s=Tg(n.node);return Nf(o.map(function(e,t,n){return function(i){var r,a=yg(i),o=_g(t,fg(i,"BaseURL")),s=fg(i,"Role")[0],d={role:yg(s)},l=Uf(e,a,d),u=fg(i,"Accessibility")[0],c="urn:scte:dash:cc:cea-608:2015"===(r=yg(u)).schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t,n;if(n=e,/^CC\d=/.test(e)){var i=e.split("=");t=i[0],n=i[1]}else/^CC\d$/.test(e)&&(t=e);return{channel:t,language:n}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?("string"!=typeof r.value?[]:r.value.split(";")).map((function(e){var t={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var n=e.split("="),i=n[0],r=n[1],a=void 0===r?"":r;t.channel=i,t.language=e,a.split(",").forEach((function(e){var n=e.split(":"),i=n[0],r=n[1];"lang"===i?t.language=r:"er"===i?t.easyReader=Number(r):"war"===i?t.aspectRatio=Number(r):"3D"===i&&(t["3D"]=Number(r))}))}else t.language=e;return t.channel&&(t.channel="SERVICE"+t.channel),t})):void 0;c&&(l=Uf(l,{captionServices:c}));var p=fg(i,"Label")[0];if(p&&p.childNodes.length){var h=p.childNodes[0].nodeValue.trim();l=Uf(l,{label:h})}var f=fg(i,"ContentProtection").reduce((function(e,t){var n=yg(t);n.schemeIdUri&&(n.schemeIdUri=n.schemeIdUri.toLowerCase());var i=bg[n.schemeIdUri];if(i){e[i]={attributes:n};var r=fg(t,"cenc:pssh")[0];if(r){var a=gg(r);e[i].pssh=a&&Jh(a)}}return e}),{});Object.keys(f).length&&(l=Uf(l,{contentProtection:f}));var g=Tg(i),m=fg(i,"Representation"),v=Uf(n,g);return Nf(m.map(function(e,t,n){return function(i){var r=fg(i,"BaseURL"),a=_g(t,r),o=Uf(e,yg(i)),s=Tg(i);return a.map((function(e){return{segmentInfo:Uf(n,s),attributes:Uf(o,{baseUrl:e})}}))}}(l,o,v)))}}(a,r,s)))}},Sg=function(e){if(""===e)throw new Error("DASH_EMPTY_MANIFEST");var t,n,i=new Lf.DOMParser;try{n=(t=i.parseFromString(e,"application/xml"))&&"MPD"===t.documentElement.tagName?t.documentElement:null}catch(e){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error("DASH_INVALID_XML");return n},kg=function(e,t){void 0===t&&(t={});var n=function(e,t){void 0===t&&(t={});var n=t,i=n.manifestUri,r=void 0===i?"":i,a=n.NOW,o=void 0===a?Date.now():a,s=n.clientOffset,d=void 0===s?0:s,l=fg(e,"Period");if(!l.length)throw new Error("INVALID_NUMBER_OF_PERIOD");var u=fg(e,"Location"),c=yg(e),p=_g([r],fg(e,"BaseURL"));c.type=c.type||"static",c.sourceDuration=c.mediaPresentationDuration||0,c.NOW=o,c.clientOffset=d,u.length&&(c.locations=u.map(gg));var h=[];return l.forEach((function(e,t){var n=yg(e),i=h[t-1];n.start=function(e){var t=e.attributes,n=e.priorPeriodAttributes,i=e.mpdType;return"number"==typeof t.start?t.start:n&&"number"==typeof n.start&&"number"==typeof n.duration?n.start+n.duration:n||"static"!==i?null:0}({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:c.type}),h.push({node:e,attributes:n})})),{locations:c.locations,representationInfo:Nf(h.map(wg(c,p)))}}(Sg(e),t),i=n.representationInfo.map(hg);return og({dashPlaylists:i,locations:n.locations,sidxMapping:t.sidxMapping,previousManifest:t.previousManifest})},Ig=function(e){return function(e){var t=fg(e,"UTCTiming")[0];if(!t)return null;var n=yg(t);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;default:throw new Error("UNSUPPORTED_UTC_TIMING_SCHEME")}return n}(Sg(e))},Cg=n(4441),Eg=n.n(Cg),Ag=Ef([73,68,51]),Pg=function e(t,n){return void 0===n&&(n=0),(t=Ef(t)).length-n<10||!Rf(t,Ag,{offset:n})?n:(n+=function(e,t){void 0===t&&(t=0);var n=(e=Ef(e))[t+5],i=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return(16&n)>>4?i+20:i+10}(t,n),e(t,n))},xg=(new Uint8Array([79,112,117,115,72,101,97,100]),function(e){return"string"==typeof e?Of(e):e}),Og=function(e){e=Ef(e);for(var t=[],n=0;e.length>n;){var i=e[n],r=0,a=0,o=e[++a];for(a++;128&o;)r=(127&o)<<7,o=e[a],a++;r+=127&o;for(var s=0;s<tf.length;s++){var d=tf[s],l=d.id,u=d.parser;if(i===l){t.push(u(e.subarray(a,a+r)));break}}n+=r+a}return t};tf=[{id:3,parser:function(e){var t={tag:3,id:e[0]<<8|e[1],flags:e[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&t.flags&&(t.dependsOnEsId=e[t.size]<<8|e[t.size+1],t.size+=2),64&t.flags){var n=e[t.size];t.url=function(e){if(!e)return"";e=Array.prototype.slice.call(e);var t=String.fromCharCode.apply(null,Ef(e));try{return decodeURIComponent(escape(t))}catch(e){}return t}(e.subarray(t.size+1,t.size+1+n)),t.size+=n}return 32&t.flags&&(t.ocrEsId=e[t.size]<<8|e[t.size+1],t.size+=2),t.descriptors=Og(e.subarray(t.size))||[],t}},{id:4,parser:function(e){return{tag:4,oti:e[0],streamType:e[1],bufferSize:e[2]<<16|e[3]<<8|e[4],maxBitrate:e[5]<<24|e[6]<<16|e[7]<<8|e[8],avgBitrate:e[9]<<24|e[10]<<16|e[11]<<8|e[12],descriptors:Og(e.subarray(13))}}},{id:5,parser:function(e){return{tag:5,bytes:e}}},{id:6,parser:function(e){return{tag:6,bytes:e}}}];var Dg=function e(t,n,i){void 0===i&&(i=!1),n=function(e){return Array.isArray(e)?e.map((function(e){return xg(e)})):[xg(e)]}(n),t=Ef(t);var r=[];if(!n.length)return r;for(var a=0;a<t.length;){var o=(t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3])>>>0,s=t.subarray(a+4,a+8);if(0===o)break;var d=a+o;if(d>t.length){if(i)break;d=t.length}var l=t.subarray(a+8,d);Rf(s,n[0])&&(1===n.length?r.push(l):r.push.apply(r,e(l,n.slice(1),i))),a=d}return r},Rg={EBML:Ef([26,69,223,163]),DocType:Ef([66,130]),Segment:Ef([24,83,128,103]),SegmentInfo:Ef([21,73,169,102]),Tracks:Ef([22,84,174,107]),Track:Ef([174]),TrackNumber:Ef([215]),DefaultDuration:Ef([35,227,131]),TrackEntry:Ef([174]),TrackType:Ef([131]),FlagDefault:Ef([136]),CodecID:Ef([134]),CodecPrivate:Ef([99,162]),VideoTrack:Ef([224]),AudioTrack:Ef([225]),Cluster:Ef([31,67,182,117]),Timestamp:Ef([231]),TimestampScale:Ef([42,215,177]),BlockGroup:Ef([160]),BlockDuration:Ef([155]),Block:Ef([161]),SimpleBlock:Ef([163])},Lg=[128,64,32,16,8,4,2,1],Mg=function(e,t,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(e){for(var t=1,n=0;n<Lg.length&&!(e&Lg[n]);n++)t++;return t}(e[t]),a=e.subarray(t,t+r);return n&&((a=Array.prototype.slice.call(e,t,t+r))[0]^=Lg[r-1]),{length:r,value:xf(a,{signed:i}),bytes:a}},Ug=function e(t){return"string"==typeof t?t.match(/.{1,2}/g).map((function(t){return e(t)})):"number"==typeof t?function(e,t){var n=(void 0===t?{}:t).le,i=void 0!==n&&n;("bigint"!=typeof e&&"number"!=typeof e||"number"==typeof e&&e!=e)&&(e=0);for(var r,a=(r=e=Af(e),Math.ceil(function(e){return e.toString(2).length}(r)/8)),o=new Uint8Array(new ArrayBuffer(a)),s=0;s<a;s++){var d=i?s:Math.abs(s+1-o.length);o[d]=Number(e/Pf[s]&Af(255)),e<0&&(o[d]=Math.abs(~o[d]),o[d]-=0===s?1:2)}return o}(t):t},jg=function e(t,n,i){if(i>=n.length)return n.length;var r=Mg(n,i,!1);if(Rf(t.bytes,r.bytes))return i;var a=Mg(n,i+r.length);return e(t,n,i+a.length+a.value+r.length)},Ng=function e(t,n){n=function(e){return Array.isArray(e)?e.map((function(e){return Ug(e)})):[Ug(e)]}(n),t=Ef(t);var i=[];if(!n.length)return i;for(var r=0;r<t.length;){var a=Mg(t,r,!1),o=Mg(t,r+a.length),s=r+a.length+o.length;127===o.value&&(o.value=jg(a,t,s),o.value!==t.length&&(o.value-=s));var d=s+o.value>t.length?t.length:s+o.value,l=t.subarray(s,d);Rf(n[0],a.bytes)&&(1===n.length?i.push(l):i=i.concat(e(l,n.slice(1)))),r+=a.length+o.length+l.length}return i},Bg=Ef([0,0,0,1]),Fg=Ef([0,0,1]),qg=Ef([0,0,3]),Vg=function(e){for(var t=[],n=1;n<e.length-2;)Rf(e.subarray(n,n+3),qg)&&(t.push(n+2),n++),n++;if(0===t.length)return e;var i=e.length-t.length,r=new Uint8Array(i),a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),r[n]=e[a];return r},Hg=function(e,t,n,i){void 0===i&&(i=1/0),e=Ef(e),n=[].concat(n);for(var r,a=0,o=0;a<e.length&&(o<i||r);){var s=void 0;if(Rf(e.subarray(a),Bg)?s=4:Rf(e.subarray(a),Fg)&&(s=3),s){if(o++,r)return Vg(e.subarray(r,a));var d=void 0;"h264"===t?d=31&e[a+s]:"h265"===t&&(d=e[a+s]>>1&63),-1!==n.indexOf(d)&&(r=a+s),a+=s+("h264"===t?1:2)}else a++}return e.subarray(0,0)},zg={webm:Ef([119,101,98,109]),matroska:Ef([109,97,116,114,111,115,107,97]),flac:Ef([102,76,97,67]),ogg:Ef([79,103,103,83]),ac3:Ef([11,119]),riff:Ef([82,73,70,70]),avi:Ef([65,86,73]),wav:Ef([87,65,86,69]),"3gp":Ef([102,116,121,112,51,103]),mp4:Ef([102,116,121,112]),fmp4:Ef([115,116,121,112]),mov:Ef([102,116,121,112,113,116]),moov:Ef([109,111,111,118]),moof:Ef([109,111,111,102])},Wg={aac:function(e){var t=Pg(e);return Rf(e,[255,16],{offset:t,mask:[255,22]})},mp3:function(e){var t=Pg(e);return Rf(e,[255,2],{offset:t,mask:[255,6]})},webm:function(e){var t=Ng(e,[Rg.EBML,Rg.DocType])[0];return Rf(t,zg.webm)},mkv:function(e){var t=Ng(e,[Rg.EBML,Rg.DocType])[0];return Rf(t,zg.matroska)},mp4:function(e){return!Wg["3gp"](e)&&!Wg.mov(e)&&(!(!Rf(e,zg.mp4,{offset:4})&&!Rf(e,zg.fmp4,{offset:4}))||!(!Rf(e,zg.moof,{offset:4})&&!Rf(e,zg.moov,{offset:4}))||void 0)},mov:function(e){return Rf(e,zg.mov,{offset:4})},"3gp":function(e){return Rf(e,zg["3gp"],{offset:4})},ac3:function(e){var t=Pg(e);return Rf(e,zg.ac3,{offset:t})},ts:function(e){if(e.length<189&&e.length>=1)return 71===e[0];for(var t=0;t+188<e.length&&t<188;){if(71===e[t]&&71===e[t+188])return!0;t+=1}return!1},flac:function(e){var t=Pg(e);return Rf(e,zg.flac,{offset:t})},ogg:function(e){return Rf(e,zg.ogg)},avi:function(e){return Rf(e,zg.riff)&&Rf(e,zg.avi,{offset:8})},wav:function(e){return Rf(e,zg.riff)&&Rf(e,zg.wav,{offset:8})},h264:function(e){return function(e,t,n){return Hg(e,"h264",7,3)}(e).length},h265:function(e){return function(e,t,n){return Hg(e,"h265",[32,33],3)}(e).length}},$g=Object.keys(Wg).filter((function(e){return"ts"!==e&&"h264"!==e&&"h265"!==e})).concat(["ts","h264","h265"]);$g.forEach((function(e){var t=Wg[e];Wg[e]=function(e){return t(Ef(e))}}));for(var Gg,Kg=Wg,Xg=function(e){e=Ef(e);for(var t=0;t<$g.length;t++){var n=$g[t];if(Kg[n](e))return n}return""},Zg=function(e){return Dg(e,["moof"]).length>0},Yg=n(9750),Jg="7.19.2",Qg={},em=function(e,t){return Qg[e]=Qg[e]||[],t&&(Qg[e]=Qg[e].concat(t)),Qg[e]},tm=function(e,t){var n=em(e).indexOf(t);return!(n<=-1||(Qg[e]=Qg[e].slice(),Qg[e].splice(n,1),0))},nm={prefixed:!0},im=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],rm=im[0],am=0;am<im.length;am++)if(im[am][1]in xh()){Gg=im[am];break}if(Gg){for(var om=0;om<Gg.length;om++)nm[rm[om]]=Gg[om];nm.prefixed=Gg[0]!==rm[0]}var sm=[],dm=function e(t){var n,i="info",r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n("log",i,t)};return n=function(e,t){return function(n,i,r){var a=t.levels[i],o=new RegExp("^("+a+")$");if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),sm){sm.push([].concat(r));var s=sm.length-1e3;sm.splice(0,s>0?s:0)}if(Ah().console){var d=Ah().console[n];d||"debug"!==n||(d=Ah().console.info||Ah().console.log),d&&a&&o.test(n)&&d[Array.isArray(r)?"apply":"call"](Ah().console,r)}}}(t,r),r.createLogger=function(n){return e(t+": "+n)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(e){if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(r.history=function(){return sm?[].concat(sm):[]}).filter=function(e){return(sm||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},r.history.clear=function(){sm&&(sm.length=0)},r.history.disable=function(){null!==sm&&(sm.length=0,sm=null)},r.history.enable=function(){null===sm&&(sm=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("error",i,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("warn",i,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("debug",i,t)},r}("VIDEOJS"),lm=dm.createLogger,um=Object.prototype.toString,cm=function(e){return fm(e)?Object.keys(e):[]};function pm(e,t){cm(e).forEach((function(n){return t(e[n],n)}))}function hm(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign?Oh.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&pm(t,(function(t,n){e[n]=t}))})),e)}function fm(e){return!!e&&"object"==typeof e}function gm(e){return fm(e)&&"[object Object]"===um.call(e)&&e.constructor===Object}function mm(e,t){if(!e||!t)return"";if("function"==typeof Ah().getComputedStyle){var n;try{n=Ah().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var vm,ym,bm,_m=Ah().navigator&&Ah().navigator.userAgent||"",Tm=/AppleWebKit\/([\d.]+)/i.exec(_m),wm=Tm?parseFloat(Tm.pop()):null,Sm=/iPod/i.test(_m),km=(vm=_m.match(/OS (\d+)_/i))&&vm[1]?vm[1]:null,Im=/Android/i.test(_m),Cm=function(){var e=_m.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),Em=Im&&Cm<5&&wm<537,Am=/Firefox/i.test(_m),Pm=/Edg/i.test(_m),xm=!Pm&&(/Chrome/i.test(_m)||/CriOS/i.test(_m)),Om=function(){var e=_m.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),Dm=(ym=/MSIE\s(\d+)\.\d/.exec(_m),!(bm=ym&&parseFloat(ym[1]))&&/Trident\/7.0/i.test(_m)&&/rv:11.0/.test(_m)&&(bm=11),bm),Rm=/Safari/i.test(_m)&&!xm&&!Im&&!Pm,Lm=/Windows/i.test(_m),Mm=Boolean(Hm()&&("ontouchstart"in Ah()||Ah().navigator.maxTouchPoints||Ah().DocumentTouch&&Ah().document instanceof Ah().DocumentTouch)),Um=/iPad/i.test(_m)||Rm&&Mm&&!/iPhone/i.test(_m),jm=/iPhone/i.test(_m)&&!Um,Nm=jm||Um||Sm,Bm=(Rm||Nm)&&!xm,Fm=Object.freeze({__proto__:null,IS_IPOD:Sm,IOS_VERSION:km,IS_ANDROID:Im,ANDROID_VERSION:Cm,IS_NATIVE_ANDROID:Em,IS_FIREFOX:Am,IS_EDGE:Pm,IS_CHROME:xm,CHROME_VERSION:Om,IE_VERSION:Dm,IS_SAFARI:Rm,IS_WINDOWS:Lm,TOUCH_ENABLED:Mm,IS_IPAD:Um,IS_IPHONE:jm,IS_IOS:Nm,IS_ANY_SAFARI:Bm});function qm(e){return"string"==typeof e&&Boolean(e.trim())}function Vm(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function Hm(){return xh()===Ah().document}function zm(e){return fm(e)&&1===e.nodeType}function Wm(){try{return Ah().parent!==Ah().self}catch(e){return!0}}function $m(e){return function(t,n){if(!qm(t))return xh()[e](null);qm(n)&&(n=xh().querySelector(n));var i=zm(n)?n:xh();return i[e]&&i[e](t)}}function Gm(e,t,n,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var r=xh().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(dm.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),r.setAttribute(e,n)):"textContent"===e?Km(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&hv(r,i),r}function Km(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function Xm(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function Zm(e,t){return Vm(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function Ym(e,t){return e.classList?e.classList.add(t):Zm(e,t)||(e.className=(e.className+" "+t).trim()),e}function Jm(e,t){return e?(e.classList?e.classList.remove(t):(Vm(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(dm.warn("removeClass was called with an element that doesn't exist"),null)}function Qm(e,t,n){var i=Zm(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?Ym(e,t):Jm(e,t),e}function ev(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var i=t[n];null==i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function tv(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,i=n.length-1;i>=0;i--){var r=n[i].name,a=n[i].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function nv(e,t){return e.getAttribute(t)}function iv(e,t,n){e.setAttribute(t,n)}function rv(e,t){e.removeAttribute(t)}function av(){xh().body.focus(),xh().onselectstart=function(){return!1}}function ov(){xh().onselectstart=function(){return!0}}function sv(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(mm(e,"height"))),n.width||(n.width=parseFloat(mm(e,"width"))),n}}function dv(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;e.offsetParent&&e!==xh()[nm.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function lv(e,t){var n={x:0,y:0};if(Nm)for(var i=e;i&&"html"!==i.nodeName.toLowerCase();){var r=mm(i,"transform");if(/^matrix/.test(r)){var a=r.slice(7,-1).split(/,\s/).map(Number);n.x+=a[4],n.y+=a[5]}else if(/^matrix3d/.test(r)){var o=r.slice(9,-1).split(/,\s/).map(Number);n.x+=o[12],n.y+=o[13]}i=i.parentNode}var s={},d=dv(t.target),l=dv(e),u=l.width,c=l.height,p=t.offsetY-(l.top-d.top),h=t.offsetX-(l.left-d.left);return t.changedTouches&&(h=t.changedTouches[0].pageX-l.left,p=t.changedTouches[0].pageY+l.top,Nm&&(h-=n.x,p-=n.y)),s.y=1-Math.max(0,Math.min(1,p/c)),s.x=Math.max(0,Math.min(1,h/u)),s}function uv(e){return fm(e)&&3===e.nodeType}function cv(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function pv(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),zm(e)||uv(e)?e:"string"==typeof e&&/\S/.test(e)?xh().createTextNode(e):void 0})).filter((function(e){return e}))}function hv(e,t){return pv(t).forEach((function(t){return e.appendChild(t)})),e}function fv(e,t){return hv(cv(e),t)}function gv(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var mv,vv=$m("querySelector"),yv=$m("querySelectorAll"),bv=Object.freeze({__proto__:null,isReal:Hm,isEl:zm,isInFrame:Wm,createEl:Gm,textContent:Km,prependTo:Xm,hasClass:Zm,addClass:Ym,removeClass:Jm,toggleClass:Qm,setAttributes:ev,getAttributes:tv,getAttribute:nv,setAttribute:iv,removeAttribute:rv,blockTextSelection:av,unblockTextSelection:ov,getBoundingClientRect:sv,findPosition:dv,getPointerPosition:lv,isTextNode:uv,emptyEl:cv,normalizeContent:pv,appendContent:hv,insertContent:fv,isSingleLeftClick:gv,$:vv,$$:yv}),_v=!1,Tv=function(){if(!1!==mv.options.autoSetup){var e=Array.prototype.slice.call(xh().getElementsByTagName("video")),t=Array.prototype.slice.call(xh().getElementsByTagName("audio")),n=Array.prototype.slice.call(xh().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var r=0,a=i.length;r<a;r++){var o=i[r];if(!o||!o.getAttribute){wv(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&mv(o)}else _v||wv(1)}};function wv(e,t){Hm()&&(t&&(mv=t),Ah().setTimeout(Tv,e))}function Sv(){_v=!0,Ah().removeEventListener("load",Sv)}Hm()&&("complete"===xh().readyState?Sv():Ah().addEventListener("load",Sv));var kv,Iv=function(e){var t=xh().createElement("style");return t.className=e,t},Cv=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},Ev=3;function Av(){return Ev++}Ah().WeakMap||(kv=function(){function e(){this.vdata="vdata"+Math.floor(Ah().performance&&Ah().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||Av();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];dm("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var Pv,xv=Ah().WeakMap?new WeakMap:new kv;function Ov(e,t){if(xv.has(e)){var n=xv.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&xv.delete(e)}}function Dv(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function Rv(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var i=e||Ah().event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||xh()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=xh().documentElement,o=xh().body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var Lv=["touchstart","touchmove"];function Mv(e,t,n){if(Array.isArray(t))return Dv(Mv,e,t,n);xv.has(e)||xv.set(e,{});var i=xv.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=Av()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(!i.disabled){t=Rv(t);var r=i.handlers[t.type];if(r)for(var a=r.slice(0),o=0,s=a.length;o<s&&!t.isImmediatePropagationStopped();o++)try{a[o].call(e,t,n)}catch(e){dm.error(e)}}}),1===i.handlers[t].length)if(e.addEventListener){var r=!1;(function(){if("boolean"!=typeof Pv){Pv=!1;try{var e=Object.defineProperty({},"passive",{get:function(){Pv=!0}});Ah().addEventListener("test",null,e),Ah().removeEventListener("test",null,e)}catch(e){}}return Pv})()&&Lv.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,i.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function Uv(e,t,n){if(xv.has(e)){var i=xv.get(e);if(i.handlers){if(Array.isArray(t))return Dv(Uv,e,t,n);var r=function(e,t){i.handlers[t]=[],Ov(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);Ov(e,t)}else r(e,t)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(e,s)}}}function jv(e,t,n){var i=xv.has(e)?xv.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=Rv(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)jv.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){xv.has(t.target)||xv.set(t.target,{});var a=xv.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function Nv(e,t,n){if(Array.isArray(t))return Dv(Nv,e,t,n);var i=function i(){Uv(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Av(),Mv(e,t,i)}function Bv(e,t,n){var i=function i(){Uv(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||Av(),Mv(e,t,i)}var Fv,qv=Object.freeze({__proto__:null,fixEvent:Rv,on:Mv,off:Uv,trigger:jv,one:Nv,any:Bv}),Vv=30,Hv=function(e,t,n){t.guid||(t.guid=Av());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},zv=function(e,t){var n=Ah().performance.now();return function(){var i=Ah().performance.now();i-n>=t&&(e.apply(void 0,arguments),n=i)}},Wv=function(){};Wv.prototype.allowedEvents_={},Wv.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Mv(this,e,t),this.addEventListener=n},Wv.prototype.addEventListener=Wv.prototype.on,Wv.prototype.off=function(e,t){Uv(this,e,t)},Wv.prototype.removeEventListener=Wv.prototype.off,Wv.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Nv(this,e,t),this.addEventListener=n},Wv.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},Bv(this,e,t),this.addEventListener=n},Wv.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=Rv(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),jv(this,e)},Wv.prototype.dispatchEvent=Wv.prototype.trigger,Wv.prototype.queueTrigger=function(e){var t=this;Fv||(Fv=new Map);var n=e.type||e,i=Fv.get(this);i||(i=new Map,Fv.set(this,i));var r=i.get(n);i.delete(n),Ah().clearTimeout(r);var a=Ah().setTimeout((function(){0===i.size&&(i=null,Fv.delete(t)),t.trigger(e)}),0);i.set(n,a)};var $v=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},Gv=function(e){return e instanceof Wv||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},Kv=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},Xv=function(e,t,n){if(!e||!e.nodeName&&!Gv(e))throw new Error("Invalid target for "+$v(t)+"#"+n+"; must be a DOM node or evented object.")},Zv=function(e,t,n){if(!Kv(e))throw new Error("Invalid event type for "+$v(t)+"#"+n+"; must be a non-empty string or array.")},Yv=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+$v(t)+"#"+n+"; must be a function.")},Jv=function(e,t,n){var i,r,a,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return o?(i=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],a=t[1]):(i=t[0],r=t[1],a=t[2]),Xv(i,e,n),Zv(r,e,n),Yv(a,e,n),{isTargetingSelf:o,target:i,type:r,listener:a=Hv(e,a)}},Qv=function(e,t,n,i){Xv(e,e,t),e.nodeName?qv[t](e,n,i):e[t](n,i)},ey={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Jv(this,n,"on"),a=r.isTargetingSelf,o=r.target,s=r.type,d=r.listener;if(Qv(o,"on",s,d),!a){var l=function(){return e.off(o,s,d)};l.guid=d.guid;var u=function(){return e.off("dispose",l)};u.guid=d.guid,Qv(this,"on","dispose",l),Qv(o,"on","dispose",u)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Jv(this,n,"one"),a=r.isTargetingSelf,o=r.target,s=r.type,d=r.listener;if(a)Qv(o,"one",s,d);else{var l=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];d.apply(null,i)};l.guid=d.guid,Qv(o,"one",s,l)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=Jv(this,n,"any"),a=r.isTargetingSelf,o=r.target,s=r.type,d=r.listener;if(a)Qv(o,"any",s,d);else{var l=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];d.apply(null,i)};l.guid=d.guid,Qv(o,"any",s,l)}},off:function(e,t,n){if(!e||Kv(e))Uv(this.eventBusEl_,e,t);else{var i=e,r=t;Xv(i,this,"off"),Zv(r,this,"off"),Yv(n,this,"off"),n=Hv(this,n),this.off("dispose",n),i.nodeName?(Uv(i,r,n),Uv(i,"dispose",n)):Gv(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){Xv(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!Kv(n)){var i="Invalid event type for "+$v(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||dm).error(i)}return jv(this.eventBusEl_,e,t)}};function ty(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=Gm("span",{className:"vjs-event-bus"});return hm(e,ey),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&xv.has(e)&&xv.delete(e)})),Ah().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var ny={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),pm(e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&Gv(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function iy(e,t){return hm(e,ny),e.state=hm({},e.state,t),"function"==typeof e.handleStateChanged&&Gv(e)&&e.on("statechanged",e.handleStateChanged),e}var ry=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},ay=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function oy(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){t&&pm(t,(function(t,n){gm(t)?(gm(e[n])||(e[n]={}),e[n]=oy(e[n],t)):e[n]=t}))})),e}var sy=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),dy=Ah().Map?Ah().Map:sy,ly=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),uy=Ah().Set?Ah().Set:ly,cy=function(){function e(e,t,n){var i=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=oy({},this.options_),t=this.options_=oy(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+Av()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return i.addClass(e)})),!1!==t.evented&&(ty(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),iy(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new uy,this.setIntervalIds_=new uy,this.rafIds_=new uy,this.namedRafs_=new dy,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=oy(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return Gm(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[i],o=i&&i.split("-")[0],s=r&&r[o],d=n;return a&&a[e]?d=a[e]:s&&s[e]&&(d=s[e]),t&&(d=d.replace(/\{(\d+)\}/g,(function(e,n){var i=t[n-1],r=i;return void 0===i&&(r=e),r}))),d},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i},t.addChild=function(t,n,i){var r,a;if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"==typeof t){a=ay(t);var o=n.componentClass||a;n.name=a;var s=e.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;r=new s(this.player_||this,n)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(a=a||r.name&&ay(r.name()))&&(this.childNameIndex_[a]=r,this.childNameIndex_[ry(a)]=r),"function"==typeof r.el&&r.el()){var d=null;this.children_[i+1]&&(this.children_[i+1].el_?d=this.children_[i+1].el_:zm(this.children_[i+1])&&(d=this.children_[i+1])),this.contentEl().insertBefore(r.el(),d)}return r},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[ay(e.name())]=null,this.childNameIndex_[ry(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var i,r=this.options_,a=e.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var i,r;return"string"==typeof e?r=n[i=e]||t.options_[i]||{}:(i=e.name,r=e),{name:i,opts:r}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||ay(t.name));return n&&!a.isTech(n)})).forEach((function(e){var n=e.name,i=e.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var a=t.addChild(n,i);a&&(t[n]=a)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return vv(e,t||this.contentEl())},t.$$=function(e,t){return yv(e,t||this.contentEl())},t.hasClass=function(e){return Zm(this.el_,e)},t.addClass=function(e){Ym(this.el_,e)},t.removeClass=function(e){Jm(this.el_,e)},t.toggleClass=function(e,t){Qm(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return nv(this.el_,e)},t.setAttribute=function(e,t){iv(this.el_,e,t)},t.removeAttribute=function(e){rv(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+ay(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=mm(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+ay(e);t=this.el_[n]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(Rh().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;this.on("touchstart",(function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=Ah().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var i=t.touches[0].pageX-n.pageX,r=t.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(e=!1)}}));var i=function(){e=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){n=null,!0===e&&Ah().performance.now()-t<200&&(i.preventDefault(),this.trigger("tap"))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=Hv(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,i=this;return e=Hv(this,e),this.clearTimersOnDispose_(),n=Ah().setTimeout((function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Ah().clearTimeout(e)),e},t.setInterval=function(e,t){e=Hv(this,e),this.clearTimersOnDispose_();var n=Ah().setInterval(e,t);return this.setIntervalIds_.add(n),n},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Ah().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=Hv(this,e),t=Ah().requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=Hv(this,t);var i=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,i),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),Ah().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],i=t[1];e[n].forEach((function(t,n){return e[i](n)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var i=e.getComponent("Tech"),r=i&&i.isTech(n),a=e===n||e.prototype.isPrototypeOf(n.prototype);if(r||!a)throw new Error('Illegal component, "'+t+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=ay(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var s=o.players,d=Object.keys(s);if(s&&d.length>0&&d.map((function(e){return s[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[ry(t)]=n,n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function py(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function hy(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:py.bind(null,"start",0,e),end:py.bind(null,"end",1,e)},Ah().Symbol&&Ah().Symbol.iterator&&(t[Ah().Symbol.iterator]=function(){return(e||[]).values()}),t}function fy(e,t){return Array.isArray(e)?hy(e):void 0===e||void 0===t?hy():hy([[e,t]])}function gy(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=fy(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(i=e.end(a))>t&&(i=t),r+=i-n;return r/t}function my(e){if(e instanceof my)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:fm(e)&&("number"==typeof e.code&&(this.code=e.code),hm(this,e)),this.message||(this.message=my.defaultMessages[this.code]||"")}cy.prototype.supportsRaf_="function"==typeof Ah().requestAnimationFrame&&"function"==typeof Ah().cancelAnimationFrame,cy.registerComponent("Component",cy),my.prototype.code=0,my.prototype.message="",my.prototype.status=null,my.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],my.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var vy=0;vy<my.errorTypes.length;vy++)my[my.errorTypes[vy]]=vy,my.prototype[my.errorTypes[vy]]=vy;function yy(e){return null!=e&&"function"==typeof e.then}function by(e){yy(e)&&e.then(null,(function(e){}))}var _y=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,i){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},Ty=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleKeyDown_=function(e){return i.handleKeyDown(e)},i.close_=function(e){return i.close(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=Gm("div",{className:"vjs-modal-dialog-content"},{role:"document"}),i.descEl_=Gm("p",{className:"vjs-modal-dialog-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),Km(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),fv(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},n.empty=function(){this.trigger("beforemodalempty"),cv(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=xh().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),Rh().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Rh().isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}xh().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof Ah().HTMLAnchorElement||e instanceof Ah().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Ah().HTMLInputElement||e instanceof Ah().HTMLSelectElement||e instanceof Ah().HTMLTextAreaElement||e instanceof Ah().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Ah().HTMLIFrameElement||e instanceof Ah().HTMLObjectElement||e instanceof Ah().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(cy);Ty.prototype.options_={pauseOnOpen:!0,temporary:!0},cy.registerComponent("ModalDialog",Ty);var wy=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(Lh(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)n.addTrack(t[i]);return n}Uh(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},Gv(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(Wv);for(var Sy in wy.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},wy.prototype.allowedEvents_)wy.prototype["on"+Sy]=null;var ky=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},Iy=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].enabled){ky(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,n}Uh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&ky(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,ky(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(wy),Cy=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},Ey=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].selected){Cy(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(Lh(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}Uh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&Cy(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,Cy(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(wy),Ay=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(wy),Py=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),xy=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),Oy={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Dy={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Ry={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ly={disabled:"disabled",hidden:"hidden",showing:"showing"},My=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var i={id:t.id||"vjs_track_"+Av(),kind:t.kind||"",language:t.language||""},r=t.label||"",a=function(e){Object.defineProperty(Lh(n),e,{get:function(){return i[e]},set:function(){}})};for(var o in i)a(o);return Object.defineProperty(Lh(n),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),n}return Uh(t,e),t}(Wv),Uy=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=xh().createElement("a");n.href=e;for(var i={},r=0;r<t.length;r++)i[t[r]]=n[t[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=Ah().location.protocol),i.host||(i.host=Ah().location.host),i},jy=function(e){if(!e.match(/^https?:\/\//)){var t=xh().createElement("a");t.href=e,e=t.href}return e},Ny=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},By=function(e,t){void 0===t&&(t=Ah().location);var n=Uy(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},Fy=Object.freeze({__proto__:null,parseUrl:Uy,getAbsoluteURL:jy,getFileExtension:Ny,isCrossOrigin:By}),qy=function(e,t){var n=new(Ah().WebVTT.Parser)(Ah(),Ah().vttjs,Ah().WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(Ah().console&&Ah().console.groupCollapsed&&Ah().console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach((function(e){return dm.error(e)})),Ah().console&&Ah().console.groupEnd&&Ah().console.groupEnd()),n.flush()},Vy=function(e,t){var n={uri:e},i=By(e);i&&(n.cors=i);var r="use-credentials"===t.tech_.crossOrigin();r&&(n.withCredentials=r),Fh()(n,Hv(this,(function(e,n,i){if(e)return dm.error(e,n);t.loaded_=!0,"function"!=typeof Ah().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return qy(i,t);dm.error("vttjs failed to load, stopping trying to process "+t.src)})):qy(i,t)})))},Hy=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var i=oy(t,{kind:Ry[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=Ly[i.mode]||"disabled",a=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(r="hidden"),(n=e.call(this,i)||this).tech_=i.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var o=new xy(n.cues_),s=new xy(n.activeCues_),d=!1;return n.timeupdateHandler=Hv(Lh(n),(function(){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,d&&(this.trigger("cuechange"),d=!1),this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)):this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))})),n.tech_.one("dispose",(function(){n.stopTracking()})),"disabled"!==r&&n.startTracking(),Object.defineProperties(Lh(n),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){Ly[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||Vy(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(d=!1,t.length!==this.activeCues_.length)d=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(d=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),i.src?(n.src=i.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&Vy(n.src,Lh(n))):n.loaded_=!0,n}Uh(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0)},n.addCue=function(e){var t=e;if(Ah().vttjs&&!(e instanceof Ah().vttjs.VTTCue)){for(var n in t=new(Ah().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(My);Hy.prototype.allowedEvents_={cuechange:"cuechange"};var zy=function(e){function t(t){var n;void 0===t&&(t={});var i=oy(t,{kind:Dy[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Lh(n),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return Uh(t,e),t}(My),Wy=function(e){function t(t){var n;void 0===t&&(t={});var i=oy(t,{kind:Oy[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Lh(n),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return Uh(t,e),t}(My),$y=function(e){function t(t){var n,i;void 0===t&&(t={}),n=e.call(this)||this;var r=new Hy(t);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(Lh(n),{readyState:{get:function(){return i}},track:{get:function(){return r}}}),i=0,r.addEventListener("loadeddata",(function(){i=2,n.trigger({type:"load",target:Lh(n)})})),n}return Uh(t,e),t}(Wv);$y.prototype.allowedEvents_={load:"load"},$y.NONE=0,$y.LOADING=1,$y.LOADED=2,$y.ERROR=3;var Gy={audio:{ListClass:Iy,TrackClass:zy,capitalName:"Audio"},video:{ListClass:Ey,TrackClass:Wy,capitalName:"Video"},text:{ListClass:Ay,TrackClass:Hy,capitalName:"Text"}};Object.keys(Gy).forEach((function(e){Gy[e].getterName=e+"Tracks",Gy[e].privateName=e+"Tracks_"}));var Ky={remoteText:{ListClass:Ay,TrackClass:Hy,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Py,TrackClass:$y,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Xy=Oh({},Gy,Ky);Ky.names=Object.keys(Ky),Gy.names=Object.keys(Gy),Xy.names=[].concat(Ky.names).concat(Gy.names);var Zy=function(e){function t(t,n){var i;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,(i=e.call(this,null,t,n)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.queuedHanders_=new Set,i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),Xy.names.forEach((function(e){var n=Xy[e];t&&t[n.getterName]&&(i[n.privateName]=t[n.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new Xy.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}Uh(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Hv(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return fy(0,0)},n.bufferedPercent=function(){return gy(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Gy.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new my(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?fy(0,0):fy()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;Gy.names.forEach((function(t){var n=Gy[t],i=function(){e.trigger(t+"trackchange")},r=e[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",(function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}))}))},n.addWebVttScript_=function(){var e=this;if(!Ah().WebVTT)if(xh().body.contains(this.el())){if(!this.options_["vtt.js"]&&gm(Vh())&&Object.keys(Vh()).length>0)return void this.trigger("vttjsloaded");var t=xh().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),Ah().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),i=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};n.on("addtrack",i),n.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},o=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",(function(){n.off("addtrack",i),n.off("removetrack",r),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",a)}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var o=new Xy.text.TrackClass(r);return a.addTrack(o),o}(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=oy(e,{tech:this});return new Ky.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(dm.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(i.track)})),i},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||Ah().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=Av();return this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=ay(e),t.techs_[e]=n,t.techs_[ry(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=ay(e),Ah()&&Ah().videojs&&Ah().videojs[e]?(dm.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Ah().videojs[e]):void 0)},t}(cy);Xy.names.forEach((function(e){var t=Xy[e];Zy.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),Zy.prototype.featuresVolumeControl=!0,Zy.prototype.featuresMuteControl=!0,Zy.prototype.featuresFullscreenResize=!1,Zy.prototype.featuresPlaybackRate=!1,Zy.prototype.featuresProgressEvents=!1,Zy.prototype.featuresSourceset=!1,Zy.prototype.featuresTimeupdateEvents=!1,Zy.prototype.featuresNativeTextTracks=!1,Zy.prototype.featuresVideoFrameCallback=!1,Zy.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:dm.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},cy.registerComponent("Tech",Zy),Zy.registerTech("Tech",Zy),Zy.defaultTechOrder_=[];var Yy={},Jy={},Qy={};function eb(e,t,n){e.setTimeout((function(){return ob(t,Yy[t.type],n,e)}),1)}function tb(e,t,n,i){void 0===i&&(i=null);var r="call"+ay(n),a=e.reduce(ab(r),i),o=a===Qy,s=o?null:t[n](a);return function(e,t,n,i){for(var r=e.length-1;r>=0;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,s,o),s}var nb={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ib={setCurrentTime:1,setMuted:1,setVolume:1},rb={play:1,pause:1};function ab(e){return function(t,n){return t===Qy?Qy:n[e]?n[e](t):t}}function ob(e,t,n,i,r,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a=!1);var o=t,s=o[0],d=o.slice(1);if("string"==typeof s)ob(e,Yy[s],n,i,r,a);else if(s){var l=function(e,t){var n=Jy[e.id()],i=null;if(null==n)return i=t(e),Jy[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r],o=a[0],s=a[1];o===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}(i,s);if(!l.setSource)return r.push(l),ob(e,d,n,i,r,a);l.setSource(hm({},e),(function(t,o){if(t)return ob(e,d,n,i,r,a);r.push(l),ob(o,e.type===o.type?d:Yy[o.type],n,i,r,a)}))}else d.length?ob(e,d,n,i,r,a):a?n(e,r):ob(e,Yy["*"],n,i,r,!0)}var sb={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},db=function(e){void 0===e&&(e="");var t=Ny(e);return sb[t.toLowerCase()]||""},lb=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):fm(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[ub({src:t})]:fm(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[ub(t)]:[];return t};function ub(e){if(!e.type){var t=db(e.src);t&&(e.type=t)}return e}var cb=function(e){function t(t,n,i){var r,a=oy({createEl:!1},n);if(r=e.call(this,t,a,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var o=0,s=n.playerOptions.techOrder;o<s.length;o++){var d=ay(s[o]),l=Zy.getTech(d);if(d||(l=cy.getComponent(d)),l&&l.isSupported()){t.loadTech_(d);break}}return r}return Uh(t,e),t}(cy);cy.registerComponent("MediaLoader",cb);var pb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).options_.controlText&&i.controlText(i.options_.controlText),i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}Uh(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=hm({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&dm.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=hm({role:"button"},n),this.tabIndex_=t.tabIndex;var i=Gm(e,t,n);return i.appendChild(Gm("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=Gm("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,Km(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){Rh().isEventKey(t,"Space")||Rh().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(cy);cy.registerComponent("ClickableComponent",pb);var hb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update(),i.update_=function(e){return i.update(e)},t.on("posterchange",i.update_),i}Uh(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return Gm("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(Dm||Pm)&&t||this.player_.tech(!0).focus(),this.player_.paused()?by(this.player_.play()):this.player_.pause()}},t}(pb);cy.registerComponent("PosterImage",hb);var fb={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function gb(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function mb(e,t,n){try{e.style[t]=n}catch(e){return}}var vb=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=function(e){return r.updateDisplay(e)};return t.on("loadstart",(function(e){return r.toggleDisplay(e)})),t.on("texttrackchange",a),t.on("loadedmetadata",(function(e){return r.preselectTrack(e)})),t.ready(Hv(Lh(r),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",a),t.on("playerresize",a),Ah().addEventListener("orientationchange",a),t.on("dispose",(function(){return Ah().removeEventListener("orientationchange",a)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),r}Uh(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var s=r[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in i?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in i&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof Ah().WebVTT&&Ah().WebVTT.processCues(Ah(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,o=null,s=e.length;s--;){var d=e[s];"showing"===d.mode&&("descriptions"===d.kind?a=d:o=d)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r=n[i];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&mb(a.firstChild,"color",gb(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&mb(a.firstChild,"backgroundColor",gb(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?mb(a,"backgroundColor",gb(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){var o=Ah().parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=fb[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof Ah().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);Ah().WebVTT.processCues(Ah(),t,this.el_);for(var a=0;a<e.length;++a){for(var o=e[a],s=0;s<o.activeCues.length;++s){var d=o.activeCues[s].displayState;Ym(d,"vjs-text-track-cue"),Ym(d,"vjs-text-track-cue-"+(o.language?o.language:a)),o.language&&iv(d,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},t}(cy);cy.registerComponent("TextTrackDisplay",vb);var yb=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),i=Gm("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r},t}(cy);cy.registerComponent("LoadingSpinner",yb);var bb=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var i=Gm("button",t=hm({className:this.buildCSSClass()},t),n=hm({type:"button"},n));return i.appendChild(Gm("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return dm.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),cy.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){Rh().isEventKey(t,"Space")||Rh().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(pb);cy.registerComponent("Button",bb);var _b=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).mouseused_=!1,i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return by(t),void(!this.player_.tech(!0)||(Dm||Pm)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var a=function(){return r.focus()};yy(t)?t.then(a,(function(){})):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(bb);_b.prototype.controlText_="Play Video",cy.registerComponent("BigPlayButton",_b);var Tb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).controlText(n&&n.controlText||i.localize("Close")),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){Rh().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(bb);cy.registerComponent("CloseButton",Tb);var wb=function(e){function t(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,i.on(t,"play",(function(e){return i.handlePlay(e)})),i.on(t,"pause",(function(e){return i.handlePause(e)})),n.replay&&i.on(t,"ended",(function(e){return i.handleEnded(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?by(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(bb);wb.prototype.controlText_="Play",cy.registerComponent("PlayToggle",wb);var Sb=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=r>0||o>0?r+":":"")+(i=((r||a>=10)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)},kb=Sb;function Ib(e,t){return void 0===t&&(t=e),kb(e,t)}var Cb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["timeupdate","ended"],(function(e){return i.updateContent(e)})),i.updateTextNode_(),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),i=Gm("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return n.appendChild(i),this.contentEl_=Gm("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=Ib(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,dm.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=xh().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},n.updateContent=function(e){},t}(cy);Cb.prototype.labelText_="Time",Cb.prototype.controlText_="Time",cy.registerComponent("TimeDisplay",Cb);var Eb=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(Cb);Eb.prototype.labelText_="Current Time",Eb.prototype.controlText_="Current Time",cy.registerComponent("CurrentTimeDisplay",Eb);var Ab=function(e){function t(t,n){var i,r=function(e){return i.updateContent(e)};return(i=e.call(this,t,n)||this).on(t,"durationchange",r),i.on(t,"loadstart",r),i.on(t,"loadedmetadata",r),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(Cb);Ab.prototype.labelText_="Duration",Ab.prototype.controlText_="Duration",cy.registerComponent("DurationDisplay",Ab);var Pb=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),i=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(i),t.appendChild(n),t},t}(cy);cy.registerComponent("TimeDivider",Pb);var xb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"durationchange",(function(e){return i.updateContent(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(Gm("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(Cb);xb.prototype.labelText_="Remaining Time",xb.prototype.controlText_="Remaining Time",cy.registerComponent("RemainingTimeDisplay",xb);var Ob=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateShowing(),i.on(i.player(),"durationchange",(function(e){return i.updateShowing(e)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Gm("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Gm("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(xh().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(cy);cy.registerComponent("LiveDisplay",Ob);var Db=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Gm("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(bb);Db.prototype.controlText_="Seek to live, currently playing live",cy.registerComponent("SeekToLive",Db);var Rb=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},Lb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}Uh(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),n.className=n.className+" vjs-slider",n=hm({tabIndex:0},n),i=hm({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),e.prototype.createEl.call(this,t,n,i)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||xm||e.preventDefault(),av(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;ov(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(Rb(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=lv(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){Rh().isEventKey(t,"Left")||Rh().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Rh().isEventKey(t,"Right")||Rh().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(cy);cy.registerComponent("Slider",Lb);var Mb=function(e,t){return Rb(e/t*100,0,100).toFixed(2)+"%"},Ub=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).partEls_=[],i.on(t,"progress",(function(e){return i.update(e)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=Gm("span",{className:"vjs-control-text"}),i=Gm("span",{textContent:this.localize("Loaded")}),r=xh().createTextNode(": ");return this.percentageEl_=Gm("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),i=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,o=Mb(r,i);t.percent_!==o&&(t.el_.style.width=o,Km(t.percentageEl_,o),t.percent_=o);for(var s=0;s<n.length;s++){var d=n.start(s),l=n.end(s),u=a[s];u||(u=t.el_.appendChild(Gm()),a[s]=u),u.dataset.start===d&&u.dataset.end===l||(u.dataset.start=d,u.dataset.end=l,u.style.left=Mb(d,r),u.style.width=Mb(l-d,r))}for(var c=a.length;c>n.length;c--)t.el_.removeChild(a[c-1]);a.length=n.length}))},t}(cy);cy.registerComponent("LoadProgressBar",Ub);var jb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=zv(Hv(Lh(i),i.update),Vv),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=dv(this.el_),r=sv(this.player_.el()),a=e.width*t;if(r&&i){var o=e.left-r.left+a,s=e.width-a+(r.right-e.right),d=i.width/2;o<d?d+=d-o:s<d&&(d=s),d<0?d=0:d>i.width&&(d=i.width),d=Math.round(d),this.el_.style.right="-"+d+"px",this.write(n)}},n.write=function(e){Km(this.el_,e)},n.updateTime=function(e,t,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,o=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var s=r.player_.liveTracker.liveWindow(),d=s-t*s;a=(d<1?"":"-")+Ib(d,s)}else a=Ib(n,o);r.update(e,t,a),i&&i()}))},t}(cy);cy.registerComponent("TimeTooltip",jb);var Nb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=zv(Hv(Lh(i),i.update),Vv),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},t}(cy);Nb.prototype.options_={children:[]},Nm||Im||Nb.prototype.options_.children.push("timeTooltip"),cy.registerComponent("PlayProgressBar",Nb);var Bb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=zv(Hv(Lh(i),i.update),Vv),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left=e.width*t+"px"}))},t}(cy);Bb.prototype.options_={children:["timeTooltip"]},cy.registerComponent("MouseTimeDisplay",Bb);var Fb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).setEventHandlers_(),i}Uh(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=Hv(this,this.update),this.update=zv(this.update_,Vv),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in xh()&&"visibilityState"in xh()&&this.on(xh(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===xh().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Vv))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==xh().visibilityState){var i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,r=n.player_.duration();t&&t.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===e&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[Ib(e,r),Ib(r,r)],"{1} of {2}")),n.currentTime_=e,n.duration_=r),n.bar&&n.bar.update(sv(n.el()),n.getProgress())})),i}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){gv(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),gv(e)){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();var a=r.seekableStart(),o=r.liveCurrentTime();if((n=a+i*r.liveWindow())>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}else(n=i*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?by(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n=this.player_.liveTracker;if(Rh().isEventKey(t,"Space")||Rh().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Rh().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(Rh().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Rh()(t))){t.preventDefault(),t.stopPropagation();var i=10*(Rh().codes[Rh()(t)]-Rh().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else Rh().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Rh().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in xh()&&"visibilityState"in xh()&&this.off(xh(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(Lb);Fb.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},Nm||Im||Fb.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),cy.registerComponent("SeekBar",Fb);var qb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseMove=zv(Hv(Lh(i),i.handleMouseMove),Vv),i.throttledHandleMouseSeek=zv(Hv(Lh(i),i.handleMouseSeek),Vv),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(n||i){var r=t.el(),a=dv(r),o=lv(r,e).x;o=Rb(o,0,1),i&&i.update(a,o),n&&n.update(a,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&by(this.player_.play())}},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(cy);qb.prototype.options_={children:["seekBar"]},cy.registerComponent("ProgressControl",qb);var Vb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return i.handlePictureInPictureChange(e)})),i.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return i.handlePictureInPictureEnabledChange(e)})),i.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),i.hide()):i.show()})),i.disable(),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){xh().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(bb);Vb.prototype.controlText_="Picture-in-Picture",cy.registerComponent("PictureInPictureToggle",Vb);var Hb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"fullscreenchange",(function(e){return i.handleFullscreenChange(e)})),!1===xh()[t.fsApi_.fullscreenEnabled]&&i.disable(),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(bb);Hb.prototype.controlText_="Fullscreen",cy.registerComponent("FullscreenToggle",Hb);var zb=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(cy);cy.registerComponent("VolumeLevel",zb);var Wb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=zv(Hv(Lh(i),i.update),Vv),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,i){if(!n){var r=sv(this.el_),a=sv(this.player_.el()),o=e.width*t;if(!a||!r)return;var s=e.left-a.left+o,d=e.width-o+(a.right-e.right),l=r.width/2;s<l?l+=l-s:d<l&&(l=d),l<0?l=0:l>r.width&&(l=r.width),this.el_.style.right="-"+l+"px"}this.write(i+"%")},n.write=function(e){Km(this.el_,e)},n.updateVolume=function(e,t,n,i,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,n,i.toFixed(0)),r&&r()}))},t}(cy);cy.registerComponent("VolumeLevelTooltip",Wb);var $b=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=zv(Hv(Lh(i),i.update),Vv),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var i=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,(function(){n?i.el_.style.bottom=e.height*t+"px":i.el_.style.left=e.width*t+"px"}))},t}(cy);$b.prototype.options_={children:["volumeLevelTooltip"]},cy.registerComponent("MouseVolumeLevelDisplay",$b);var Gb=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on("slideractive",(function(e){return i.updateLastVolume_(e)})),i.on(t,"volumechange",(function(e){return i.updateARIAAttributes(e)})),t.ready((function(){return i.updateARIAAttributes()})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){gv(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var n=this.el(),i=sv(n),r=this.vertical(),a=lv(n,e);a=r?a.y:a.x,a=Rb(a,0,1),t.update(i,a,r)}gv(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(Lb);Gb.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},Nm||Im||Gb.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Gb.prototype.playerEvent="volumechange",cy.registerComponent("VolumeBar",Gb);var Kb=function(e){function t(t,n){var i;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||gm(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Lh(i=e.call(this,t,n)||this),t),i.throttledHandleMouseMove=zv(Hv(Lh(i),i.handleMouseMove),Vv),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i.on("touchstart",(function(e){return i.handleMouseDown(e)})),i.on("mousemove",(function(e){return i.handleMouseMove(e)})),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(cy);Kb.prototype.options_={children:["volumeBar"]},cy.registerComponent("VolumeControl",Kb);var Xb=function(e){function t(t,n){var i;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Lh(i=e.call(this,t,n)||this),t),i.on(t,["loadstart","volumechange"],(function(e){return i.update(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;Nm&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)Jm(this.el_,"vjs-vol-"+n);Ym(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(bb);Xb.prototype.controlText_="Mute",cy.registerComponent("MuteToggle",Xb);var Zb=function(e){function t(t,n){var i;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||gm(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(t,["loadstart"],(function(e){return i.volumePanelState_(e)})),i.on(i.muteToggle,"keyup",(function(e){return i.handleKeyPress(e)})),i.on(i.volumeControl,"keyup",(function(e){return i.handleVolumeControlKeyUp(e)})),i.on("keydown",(function(e){return i.handleKeyPress(e)})),i.on("mouseover",(function(e){return i.handleMouseOver(e)})),i.on("mouseout",(function(e){return i.handleMouseOut(e)})),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}Uh(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){Rh().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),Mv(xh(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),Uv(xh(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){Rh().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(cy);Zb.prototype.options_={children:["muteToggle","volumeControl"]},cy.registerComponent("VolumePanel",Zb);var Yb=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",(function(e){return i.handleKeyDown(e)})),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}Uh(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof cy&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof cy&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=Gm(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),Mv(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||xh().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){Rh().isEventKey(e,"Left")||Rh().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Rh().isEventKey(e,"Right")||Rh().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(cy);cy.registerComponent("Menu",Yb);var Jb=function(e){function t(t,n){var i;void 0===n&&(n={}),(i=e.call(this,t,n)||this).menuButton_=new bb(t,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var r=bb.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+r,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;var a=function(e){return i.handleClick(e)};return i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",a),i.on(i.menuButton_,"click",a),i.on(i.menuButton_,"keydown",(function(e){return i.handleKeyDown(e)})),i.on(i.menuButton_,"mouseenter",(function(){i.addClass("vjs-hover"),i.menu.show(),Mv(xh(),"keyup",i.handleMenuKeyUp_)})),i.on("mouseleave",(function(e){return i.handleMouseLeave(e)})),i.on("keydown",(function(e){return i.handleSubmenuKeyDown(e)})),i}Uh(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new Yb(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=Gm("li",{className:"vjs-menu-title",textContent:ay(this.options_.title),tabIndex:-1}),n=new cy(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+bb.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Uv(xh(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){Rh().isEventKey(e,"Esc")||Rh().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Rh().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Rh().isEventKey(e,"Up")||Rh().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(Rh().isEventKey(e,"Esc")||Rh().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(Rh().isEventKey(e,"Esc")||Rh().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Rh().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Nm&&Wm())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(cy);cy.registerComponent("MenuButton",Jb);var Qb=function(e){function t(t,n){var i,r=n.tracks;if((i=e.call(this,t,n)||this).items.length<=1&&i.hide(),!r)return Lh(i);var a=Hv(Lh(i),i.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),i.player_.on("ready",a),i.player_.on("dispose",(function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a),r.removeEventListener("labelchange",a)})),i}return Uh(t,e),t}(Jb);cy.registerComponent("TrackButton",Qb);var e_=["Tab","Esc","Up","Down","Right","Left"],t_=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}Uh(t,e);var n=t.prototype;return n.createEl=function(t,n,i){this.nonIconControl=!0;var r=e.prototype.createEl.call(this,"li",hm({className:"vjs-menu-item",tabIndex:-1},n),i);return r.replaceChild(Gm("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},n.handleKeyDown=function(t){e_.some((function(e){return Rh().isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(pb);cy.registerComponent("MenuItem",t_);var n_=function(e){function t(t,n){var i,r=n.track,a=t.textTracks();n.label=r.label||r.language||"Unknown",n.selected="showing"===r.mode,(i=e.call(this,t,n)||this).track=r,i.kinds=(n.kinds||[n.kind||i.track.kind]).filter(Boolean);var o,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Lh(i),t)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(Lh(i),t)};return t.on(["loadstart","texttrackchange"],s),a.addEventListener("change",s),a.addEventListener("selectedlanguagechange",d),i.on("dispose",(function(){t.off(["loadstart","texttrackchange"],s),a.removeEventListener("change",s),a.removeEventListener("selectedlanguagechange",d)})),void 0===a.onchange&&i.on(["tap","click"],(function(){if("object"!=typeof Ah().Event)try{o=new(Ah().Event)("change")}catch(e){}o||(o=xh().createEvent("Event")).initEvent("change",!0,!0),a.dispatchEvent(o)})),i.handleTracksChange(),i}Uh(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,i=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(t_);cy.registerComponent("TextTrackMenuItem",n_);var i_=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}Uh(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(n_);cy.registerComponent("OffTextTrackMenuItem",i_);var r_=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return Uh(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=n_),this.label_&&(n=this.label_+" off"),e.push(new i_(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(this.kinds_.indexOf(a.kind)>-1){var o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),e.push(o)}}return e},t}(Qb);cy.registerComponent("TextTrackButton",r_);var a_=function(e){function t(t,n){var i,r=n.track,a=n.cue,o=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=o&&o<a.endTime,(i=e.call(this,t,n)||this).track=r,i.cue=a,i}return Uh(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(t_);cy.registerComponent("ChaptersTrackMenuItem",a_);var o_=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n,i)||this).selectCurrentItem_=function(){r.items.forEach((function(e){e.selected(r.track_.activeCues[0]===e.cue)}))},r}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),e.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&e.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(ay(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new a_(this.player_,{track:this.track_,cue:r});e.push(a)}return e},t}(r_);o_.prototype.kind_="chapters",o_.prototype.controlText_="Chapters",cy.registerComponent("ChaptersButton",o_);var s_=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=t.textTracks(),o=Hv(Lh(r),r.handleTracksChange);return a.addEventListener("change",o),r.on("dispose",(function(){a.removeEventListener("change",o)})),r}Uh(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(r_);s_.prototype.kind_="descriptions",s_.prototype.controlText_="Descriptions",cy.registerComponent("DescriptionsButton",s_);var d_=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(r_);d_.prototype.kind_="subtitles",d_.prototype.controlText_="Subtitles",cy.registerComponent("SubtitlesButton",d_);var l_=function(e){function t(t,n){var i;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return Uh(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(n_);cy.registerComponent("CaptionSettingsMenuItem",l_);var u_=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new l_(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(r_);u_.prototype.kind_="captions",u_.prototype.controlText_="Captions",cy.registerComponent("CaptionsButton",u_);var c_=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(t,n,i){var r=e.prototype.createEl.call(this,t,n,i),a=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(a.appendChild(Gm("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Gm("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),r},t}(n_);cy.registerComponent("SubsCapsMenuItem",c_);var p_=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(ay(i.label_)),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new l_(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,c_)},t}(r_);p_.prototype.kinds_=["captions","subtitles"],p_.prototype.controlText_="Subtitles",cy.registerComponent("SubsCapsButton",p_);var h_=function(e){function t(t,n){var i,r=n.track,a=t.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=e.call(this,t,n)||this).track=r,i.addClass("vjs-"+r.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Lh(i),t)};return a.addEventListener("change",o),i.on("dispose",(function(){a.removeEventListener("change",o)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(t,n,i){var r=e.prototype.createEl.call(this,t,n,i),a=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(a.appendChild(Gm("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(Gm("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r},n.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),i=0;i<n.length;i++){var r=n[i];r!==this.track&&(r.enabled=r===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(t_);cy.registerComponent("AudioTrackMenuItem",h_);var f_=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new h_(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},t}(Qb);f_.prototype.controlText_="Audio Track",cy.registerComponent("AudioTrackButton",f_);var g_=function(e){function t(t,n){var i,r=n.rate,a=parseFloat(r,10);return n.label=r,n.selected=a===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=r,i.rate=a,i.on(t,"ratechange",(function(e){return i.update(e)})),i}Uh(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(t_);g_.prototype.contentElType="button",cy.registerComponent("PlaybackRateMenuItem",g_);var m_=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(t,"loadstart",(function(e){return i.updateVisibility(e)})),i.on(t,"ratechange",(function(e){return i.updateLabel(e)})),i.on(t,"playbackrateschange",(function(e){return i.handlePlaybackRateschange(e)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Gm("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;n>=0;n--)t.push(new g_(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),n=this.playbackRates(),i=(n.indexOf(t)+1)%n.length;this.player().playbackRate(n[i])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(Jb);m_.prototype.controlText_="Playback Rate",cy.registerComponent("PlaybackRateMenuButton",m_);var v_=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,i){return void 0===t&&(t="div"),void 0===n&&(n={}),void 0===i&&(i={}),n.className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,i)},t}(cy);cy.registerComponent("Spacer",v_);var y_=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},t}(v_);cy.registerComponent("CustomControlSpacer",y_);var b_=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(cy);b_.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in xh()&&b_.prototype.options_.children.splice(b_.prototype.options_.children.length-1,0,"pictureInPictureToggle"),cy.registerComponent("ControlBar",b_);var __=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"error",(function(e){return i.open(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(Ty);__.prototype.options_=Oh({},Ty.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),cy.registerComponent("ErrorDisplay",__);var T_="vjs-text-track-settings",w_=["#000","Black"],S_=["#00F","Blue"],k_=["#0FF","Cyan"],I_=["#0F0","Green"],C_=["#F0F","Magenta"],E_=["#F00","Red"],A_=["#FFF","White"],P_=["#FF0","Yellow"],x_=["1","Opaque"],O_=["0.5","Semi-Transparent"],D_=["0","Transparent"],R_={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[w_,A_,E_,I_,S_,P_,C_,k_]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[x_,O_,D_]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[A_,w_,E_,I_,S_,P_,C_,k_]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[x_,O_]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[D_,O_,x_]}};function L_(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}R_.windowColor.options=R_.backgroundColor.options;var M_=function(e){function t(t,n){var i;return n.temporary=!1,(i=e.call(this,t,n)||this).updateDisplay=i.updateDisplay.bind(Lh(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=Gm("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),pm(R_,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}Uh(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=R_[e],a=r.id.replace("%s",this.id_),o=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(r.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',i.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return Gm("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return Gm("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Gm("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,i=this;return t=function(e,t,n){var r,a,o=(r=i.$(t.selector),a=t.parser,L_(r.options[r.options.selectedIndex].value,a));return void 0!==o&&(e[n]=o),e},void 0===(n={})&&(n=0),cm(e=R_).reduce((function(n,i){return t(n,e[i],i)}),n)},n.setValues=function(e){var t=this;pm(R_,(function(n,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(L_(e.options[i].value,n)===t){e.selectedIndex=i;break}}(t.$(n.selector),e[i],n.parser)}))},n.setDefaults=function(){var e=this;pm(R_,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(Ah().localStorage.getItem(T_))}catch(e){dm.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Ah().localStorage.setItem(T_,JSON.stringify(e)):Ah().localStorage.removeItem(T_)}catch(e){dm.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(Ty);cy.registerComponent("TextTrackSettings",M_);var U_=function(e){function t(t,n){var i,r=n.ResizeObserver||Ah().ResizeObserver;null===n.ResizeObserver&&(r=!1);var a=oy({createEl:!r,reportTouchActivity:!1},n);return(i=e.call(this,t,a)||this).ResizeObserver=n.ResizeObserver||Ah().ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(e,t,n,i){var r;void 0===i&&(i=Ah());var a=function(){var t=this,n=arguments,a=function(){r=null,a=null,e.apply(t,n)};i.clearTimeout(r),r=i.setTimeout(a,100)};return a.cancel=function(){i.clearTimeout(r),r=null},a}((function(){i.resizeHandler()}),0,0,Lh(i)),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var e=i.debouncedHandler_,t=i.unloadListener_=function(){Uv(this,"resize",e),Uv(this,"unload",t),t=null};Mv(i.el_.contentWindow,"unload",t),Mv(i.el_.contentWindow,"resize",e)}},i.one("load",i.loadListener_)),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(cy);cy.registerComponent("ResizeManager",U_);var j_={trackingThreshold:20,liveTolerance:15},N_=function(e){function t(t,n){var i,r=oy(j_,n,{createEl:!1});return(i=e.call(this,t,r)||this).handleVisibilityChange_=function(e){return i.handleVisibilityChange(e)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",(function(e){return i.handleDurationchange(e)})),i.on(i.player_,"canplay",(function(){return i.toggleTracking()})),Dm&&"hidden"in xh()&&"visibilityState"in xh()&&i.on(xh(),"visibilitychange",i.handleVisibilityChange_),i}Uh(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(xh().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(Ah().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;var i=this.liveCurrentTime(),r=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Vv),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(xh(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(cy);cy.registerComponent("LiveTracker",N_);var B_,F_=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===i.indexOf(o)&&i.push(o)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},q_=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=xh().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=xh().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Ah().Element.prototype.appendChild.call(this,n),this.innerHTML}}),V_=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},H_=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=function(e){return V_([e.el(),Ah().HTMLMediaElement.prototype,Ah().Element.prototype,q_],"innerHTML")}(e),r=function(n){return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=n.apply(t,r);return F_(e),o}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=r(n[e]))})),Object.defineProperty(t,"innerHTML",oy(i,{set:r(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},z_=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?jy(Ah().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Ah().Element.prototype.setAttribute.call(this,"src",e),e}}),W_=function(e,t,n,i){void 0===i&&(i=!0);var r=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return i&&(a.set=r),Object.defineProperty(e,t,a)},$_=function(e){function t(t,n){var i;i=e.call(this,t,n)||this;var r=t.source,a=!1;if(r&&(i.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?i.setSource(r):i.handleLateInit_(i.el_),t.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var o=i.el_.childNodes,s=o.length,d=[];s--;){var l=o[s];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),a||i.el_.hasAttribute("crossorigin")||!By(l.src)||(a=!0)):d.push(l))}for(var u=0;u<d.length;u++)i.el_.removeChild(d[u])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&a&&dm.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(Mm||jm||Em)&&!0===t.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}Uh(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return V_([e.el(),Ah().HTMLMediaElement.prototype,z_],"src")}(e),i=t.setAttribute,r=t.load;Object.defineProperty(t,"src",oy(n,{set:function(i){var r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(n,r){var a=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=r.call(t);return F_(e)||(e.triggerSourceset(""),H_(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):F_(e)||H_(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var i=t[n];"metadata"===i.kind&&e.push({track:i,storedMode:i.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var i=function n(){for(var i=0;i<e.length;i++){var r=e[i];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",i),t.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",i)}))},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach((function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=Gy[e],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var a={change:function(n){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===e&&t[Ky.remoteText.getterName]().trigger(i)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<r.length;t++){for(var n=!1,a=0;a<i.length;a++)if(i[a]===r[t]){n=!0;break}n||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];i.addEventListener(e,n),t.on("dispose",(function(t){return i.removeEventListener(e,n)}))})),this.on("loadstart",o),this.on("dispose",(function(e){return t.off("loadstart",o)}))}},n.proxyNativeTracks_=function(){var e=this;Gy.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=xh().createElement("video");var i=oy({},this.options_.tag&&tv(this.options_.tag));Mm&&!0===this.options_.nativeControlsForTouch||delete i.controls,ev(e,hm(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&iv(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],a=0;a<r.length;a++){var o=r[a],s=this.options_[o];void 0!==s&&(s?iv(e,o,o):rv(e,o),e[o]=s)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Bm?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){dm(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&Im&&xm&&0===this.el_.currentTime?(this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=Ah().navigator&&Ah().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)by(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,i):e.prototype.addTextTrack.call(this,t,n,i)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=xh().createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var i=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)t!==n[i]&&t!==n[i].track||this.el().removeChild(n[i])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Ah().performance&&"function"==typeof Ah().performance.now?e.creationTime=Ah().performance.now():Ah().performance&&Ah().performance.timing&&"number"==typeof Ah().performance.timing.navigationStart&&(e.creationTime=Ah().Date.now()-Ah().performance.timing.navigationStart),e},t}(Zy);W_($_,"TEST_VID",(function(){if(Hm()){var e=xh().createElement("video"),t=xh().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),$_.isSupported=function(){try{$_.TEST_VID.volume=.5}catch(e){return!1}return!(!$_.TEST_VID||!$_.TEST_VID.canPlayType)},$_.canPlayType=function(e){return $_.TEST_VID.canPlayType(e)},$_.canPlaySource=function(e,t){return $_.canPlayType(e.type)},$_.canControlVolume=function(){try{var e=$_.TEST_VID.volume;$_.TEST_VID.volume=e/2+.1;var t=e!==$_.TEST_VID.volume;return t&&Nm?(Ah().setTimeout((function(){$_&&$_.prototype&&($_.prototype.featuresVolumeControl=e!==$_.TEST_VID.volume)})),!1):t}catch(e){return!1}},$_.canMuteVolume=function(){try{var e=$_.TEST_VID.muted;return $_.TEST_VID.muted=!e,$_.TEST_VID.muted?iv($_.TEST_VID,"muted","muted"):rv($_.TEST_VID,"muted"),e!==$_.TEST_VID.muted}catch(e){return!1}},$_.canControlPlaybackRate=function(){if(Im&&xm&&Om<58)return!1;try{var e=$_.TEST_VID.playbackRate;return $_.TEST_VID.playbackRate=e/2+.1,e!==$_.TEST_VID.playbackRate}catch(e){return!1}},$_.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(xh().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(xh().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(xh().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(xh().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},$_.supportsNativeTextTracks=function(){return Bm||Nm&&xm},$_.supportsNativeVideoTracks=function(){return!(!$_.TEST_VID||!$_.TEST_VID.videoTracks)},$_.supportsNativeAudioTracks=function(){return!(!$_.TEST_VID||!$_.TEST_VID.audioTracks)},$_.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];W_($_.prototype,t,(function(){return $_[n]()}),!0)})),$_.prototype.featuresVolumeControl=$_.canControlVolume(),$_.prototype.movingMediaElementInDOM=!Nm,$_.prototype.featuresFullscreenResize=!0,$_.prototype.featuresProgressEvents=!0,$_.prototype.featuresTimeupdateEvents=!0,$_.prototype.featuresVideoFrameCallback=!(!$_.TEST_VID||!$_.TEST_VID.requestVideoFrameCallback),$_.patchCanPlayType=function(){Cm>=4&&!Am&&!xm&&(B_=$_.TEST_VID&&$_.TEST_VID.constructor.prototype.canPlayType,$_.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":B_.call(this,e)})},$_.unpatchCanPlayType=function(){var e=$_.TEST_VID.constructor.prototype.canPlayType;return B_&&($_.TEST_VID.constructor.prototype.canPlayType=B_),e},$_.patchCanPlayType(),$_.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},$_.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){$_.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){$_.prototype["set"+ay(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){$_.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){$_.prototype["set"+ay(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){$_.prototype[e]=function(){return this.el_[e]()}})),Zy.withSourceHandlers($_),$_.nativeSourceHandler={},$_.nativeSourceHandler.canPlayType=function(e){try{return $_.TEST_VID.canPlayType(e)}catch(e){return""}},$_.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return $_.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=Ny(e.src);return $_.nativeSourceHandler.canPlayType("video/"+n)}return""},$_.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},$_.nativeSourceHandler.dispose=function(){},$_.registerSourceHandler($_.nativeSourceHandler),Zy.registerTech("Html5",$_);var G_=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],K_={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},X_=["tiny","xsmall","small","medium","large","xlarge","huge"],Z_={};X_.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;Z_[e]="vjs-layout-"+t}));var Y_={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},J_=function(e){function t(n,i,r){var a;if(n.id=n.id||i.id||"vjs_video_"+Av(),(i=hm(t.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var s=n;s&&1===s.nodeType;){if(tv(s).hasOwnProperty("lang")){i.language=s.getAttribute("lang");break}s=s.parentNode}if((a=e.call(this,null,i,r)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=lm(a.id_),a.fsApi_=nm,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&tv(n),a.language(a.options_.language),i.languages){var d={};Object.getOwnPropertyNames(i.languages).forEach((function(e){d[e.toLowerCase()]=i.languages[e]})),a.languages_=d}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach((function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')})),a.scrubbing_=!1,a.el_=a.createEl(),ty(Lh(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(Mv(xh(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var l=oy(a.options_);i.plugins&&Object.keys(i.plugins).forEach((function(e){a[e](i.plugins[e])})),i.debug&&a.debug(!0),a.options_.playerOptions=l,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),Mm&&a.addClass("vjs-touch-enabled"),Nm||a.addClass("vjs-workinghover"),t.players[a.id_]=Lh(a);var u=Jg.split(".")[0];return a.addClass("vjs-v"+u),a.userActive(!0),a.reportUserActivity(),a.one("play",(function(e){return a.listenForUserActivity_(e)})),a.on("stageclick",(function(e){return a.handleStageClick_(e)})),a.on("keydown",(function(e){return a.handleKeyDown(e)})),a.on("languagechange",(function(e){return a.handleLanguagechange(e)})),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",(function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)})),a}Uh(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),Uv(xh(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Uv(xh(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Jy[this.id()]=null,Xy.names.forEach((function(e){var t=Xy[e],i=n[t.getterName]();i&&i.off&&i.off()})),e.prototype.dispose.call(this)},n.createEl=function(){var t,n=this.tag,i=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();i?t=this.el_=n.parentNode:r||(t=this.el_=e.prototype.createEl.call(this,"div"));var a=tv(n);if(r){for(t=this.el_=n,n=this.tag=xh().createElement("video");t.children.length;)n.appendChild(t.firstChild);Zm(t,"video-js")||Ym(t,"video-js"),t.appendChild(n),i=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(e){}}))}if(n.setAttribute("tabindex","-1"),a.tabindex="-1",(Dm||xm&&Lm)&&(n.setAttribute("role","application"),a.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach((function(e){r&&"class"===e||t.setAttribute(e,a[e]),r&&n.setAttribute(e,a[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==Ah().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Iv("vjs-styles-dimensions");var o=vv(".vjs-styles-defaults"),s=vv("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=n.getElementsByTagName("a"),l=0;l<d.length;l++){var u=d.item(l);Ym(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!i&&n.parentNode.insertBefore(t,n),Xm(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):dm.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?dm.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},n.fluid=function(e){var t,n,i=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,Gv(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){i.on(["playerreset","resize"],i.boundUpdateStyleEl_)},Gv(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==Ah().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),Cv(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(a>=0&&(s.width=a),o>=0&&(s.height=o))}},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=ay(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(Zy.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(a=!1);var o={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Xy.names.forEach((function(e){var t=Xy[e];o[t.getterName]=n[t.privateName]})),hm(o,this.options_[i]),hm(o,this.options_[r]),hm(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var s,d,l=Zy.getTech(e);if(!l)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new l(o),this.tech_.ready(Hv(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],d=this.tech_,s.forEach((function(e){var t=d.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return t.addCue(e)}))})),d.textTracks(),G_.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech"+ay(e)+"_"](t)}))})),Object.keys(K_).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+K_[e]+"_"].bind(n),event:t}):n["handleTech"+K_[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return n.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||Xm(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e,t,n,i=this;Xy.names.forEach((function(e){var t=Xy[e];i[t.privateName]=i[t.getterName]()})),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track})),Array.prototype.map.call(t,(function(e){var t=_y(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(_y))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&dm.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,i=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var i=t.play();if(yy(i))return i.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():i():yy(n=this.play())&&(n=n.catch(i)),yy(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return db(t)}(this,t)),this.cache_.source=oy({},e,{src:t,type:n});for(var i=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var d=tv(a[s]);r.push(d),d.src&&d.src===t&&o.push(d.src)}o.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(n=function(){}),n(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(dm.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?by(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),i=xh()[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready((function(){if(e in ib)return function(e,t,n,i){return t[n](e.reduce(ab(n),i))}(this.middleware_,this.tech_,e,t);if(e in rb)return tb(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw dm(e),e}}),!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in nb)return function(e,t,n){return e.reduceRight(ab(n),t[n]())}(this.middleware_,this.tech_,e);if(e in rb)return tb(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw dm("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw dm("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw dm(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||Ah().Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=by),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!Bm&&!Nm||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||fy(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=fy(0,0)),e},n.bufferedPercent=function(){return gy(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||Ah().Promise;if(t){var n=this;return new t((function(t,i){function r(){n.off("fullscreenerror",o),n.off("fullscreenchange",a)}function a(){r(),t()}function o(e,t){r(),i(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",o);var s=n.requestFullscreenHelper_(e);s&&(s.then(r,r),s.then(t,i))}))}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||Ah().Promise;if(e){var t=this;return new e((function(e,n){function i(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){i(),e()}function a(e,t){i(),n(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var o=t.exitFullscreenHelper_();o&&(o.then(i,i),o.then(e,n))}))}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=xh()[this.fsApi_.exitFullscreen]();return t&&by(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=xh().documentElement.style.overflow,Mv(xh(),"keydown",this.boundFullWindowOnEscKey_),xh().documentElement.style.overflow="hidden",Ym(xh().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){Rh().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Uv(xh(),"keydown",this.boundFullWindowOnEscKey_),xh().documentElement.style.overflow=this.docOrigOverflow,Jm(xh().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in xh()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in xh())return xh().exitPictureInPicture()},n.handleKeyDown=function(e){var t,n,i=this.options_.userActions;i&&i.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),t.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(n))||("function"==typeof i.hotkeys?i.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,i=void 0===n?function(e){return Rh().isEventKey(e,"f")}:n,r=t.muteKey,a=void 0===r?function(e){return Rh().isEventKey(e,"m")}:r,o=t.playPauseKey,s=void 0===o?function(e){return Rh().isEventKey(e,"k")||Rh().isEventKey(e,"Space")}:o;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var d=cy.getComponent("FullscreenToggle");!1!==xh()[this.fsApi_.fullscreenEnabled]&&d.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),cy.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),cy.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=Zy.getTech(r);if(a||(a=cy.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else dm.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,n,i=this,r=this.options_.techOrder.map((function(e){return[e,Zy.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(dm.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),a=function(e,t,n){var i;return e.some((function(e){return t.some((function(t){if(i=n(e,t))return!0}))})),i},o=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return t=this.options_.sourceOrder?a(e,r,(n=o,function(e,t){return n(t,e)})):a(r,e,o),t||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i=lb(e);if(i.length){if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),eb(this,i[0],(function(e,r){var a,o;if(n.middleware_=r,t||(n.cache_.sources=i),n.updateSourceCaches_(e),n.src_(e))return i.length>1?n.handleSrc_(i.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void n.triggerReady());a=r,o=n.tech_,a.forEach((function(e){return e.setTech&&e.setTech(o)}))})),this.options_.retryOnError&&i.length>1){var r=function(){n.error(null),n.handleSrc_(i.slice(1),!0)},a=function(){n.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",a)}}}else this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,ay(t)!==ay(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){i.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||Ah().Promise;this.paused()||!t?this.doReset_():by(this.play().then((function(){return e.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Gv(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar,t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(em("beforeerror").forEach((function(n){var i=n(t,e);fm(i)&&!Array.isArray(i)||"string"==typeof i||"number"==typeof i||null===i?e=i:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new my(e),this.addClass("vjs-error"),dm.error("(CODE:"+this.error_.code+" "+my.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),em("error").forEach((function(e){return e(t,t.error_)}))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,i=Hv(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);var a,o=this.getChild("controlBar");!o||Nm||Im||(o.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),o.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),i=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||Ah().Promise;if(n){if(e){var i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),n.all(i).then((function(){return t.enableAudioOnlyUI_()}))}return n.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||Ah().Promise;return n?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Gv(this)&&this.trigger("languagechange"))},n.languages=function(){return oy(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=oy(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=oy(i)).player=void 0,e.tracks[n]=i}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new Ty(this,t);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<X_.length;n++){var i=X_[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(Z_[e]),this.addClass(Z_[i]),this.breakpoint_=i;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=hm({},Y_,e),this.updateCurrentBreakpoint_()),hm(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Z_[this.breakpoint_]||""},n.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=oy(e);var i=this.cache_.media,r=i.artwork,a=i.poster,o=i.src,s=i.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:db(a)}]),o&&this.src(o),a&&this.poster(a),Array.isArray(s)&&s.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:db(t.poster)}]),t}return oy(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=tv(e),i=n["data-setup"];if(Zm(e,"vjs-fill")&&(n.fill=!0),Zm(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=Nh()(i||"{}"),a=r[0],o=r[1];a&&dm.error(a),hm(n,o)}if(hm(t,n),e.hasChildNodes())for(var s=e.childNodes,d=0,l=s.length;d<l;d++){var u=s[d],c=u.nodeName.toLowerCase();"source"===c?t.sources.push(tv(u)):"track"===c&&t.tracks.push(tv(u))}return t},n.flexNotSupported_=function(){var e=xh().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(cy);Xy.names.forEach((function(e){var t=Xy[e];J_.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),J_.prototype.crossorigin=J_.prototype.crossOrigin,J_.players={};var Q_=Ah().navigator;J_.prototype.options_={techOrder:Zy.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Q_&&(Q_.languages&&Q_.languages[0]||Q_.userLanguage||Q_.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){J_.prototype[e]=function(){return this.techGet_(e)}})),G_.forEach((function(e){J_.prototype["handleTech"+ay(e)+"_"]=function(){return this.trigger(e)}})),cy.registerComponent("Player",J_);var eT="plugin",tT={},nT=function(e){return tT.hasOwnProperty(e)},iT=function(e){return nT(e)?tT[e]:void 0},rT=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},aT=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},oT=function(e,t){return t.prototype.name=e,function(){aT(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=zh(t,[this].concat(i));return this[e]=function(){return a},aT(this,a.getEventHash()),a}},sT=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),ty(this),delete this.trigger,iy(this,this.constructor.defaultState),rT(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),jv(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=oT(e,tT[e])},e.isBasic=function(t){var n="string"==typeof t?iT(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(nT(t))dm.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(J_.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return tT[t]=n,t!==eT&&(e.isBasic(n)?J_.prototype[t]=function(e,t){var n=function(){aT(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return rT(this,e),aT(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):J_.prototype[t]=oT(t,n)),n},e.deregisterPlugin=function(e){if(e===eT)throw new Error("Cannot de-register base plugin.");nT(e)&&(delete tT[e],delete J_.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(tT)),e.forEach((function(e){var n=iT(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=iT(e);return t&&t.VERSION||""},e}();sT.getPlugin=iT,sT.BASE_PLUGIN_NAME=eT,sT.registerPlugin(eT,sT),J_.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},J_.prototype.hasPlugin=function(e){return!!nT(e)};var dT=function(e){return 0===e.indexOf("#")?e.slice(1):e};function lT(e,t,n){var i=lT.getPlayer(e);if(i)return t&&dm.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var r="string"==typeof e?vv("#"+dT(e)):e;if(!zm(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||dm.warn("The element supplied is not included in the DOM"),t=t||{},em("beforesetup").forEach((function(e){var n=e(r,oy(t));fm(n)&&!Array.isArray(n)?t=oy(t,n):dm.error("please return an object in beforesetup hooks")}));var a=cy.getComponent("Player");return i=new a(r,t,n),em("setup").forEach((function(e){return e(i)})),i}if(lT.hooks_=Qg,lT.hooks=em,lT.hook=function(e,t){em(e,t)},lT.hookOnce=function(e,t){em(e,[].concat(t).map((function(t){return function n(){return tm(e,n),t.apply(void 0,arguments)}})))},lT.removeHook=tm,!0!==Ah().VIDEOJS_NO_DYNAMIC_STYLE&&Hm()){var uT=vv(".vjs-styles-defaults");if(!uT){uT=Iv("vjs-styles-defaults");var cT=vv("head");cT&&cT.insertBefore(uT,cT.firstChild),Cv(uT,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}wv(1,lT),lT.VERSION=Jg,lT.options=J_.prototype.options_,lT.getPlayers=function(){return J_.players},lT.getPlayer=function(e){var t,n=J_.players;if("string"==typeof e){var i=dT(e),r=n[i];if(r)return r;t=vv("#"+i)}else t=e;if(zm(t)){var a=t,o=a.player,s=a.playerId;if(o||n[s])return o||n[s]}},lT.getAllPlayers=function(){return Object.keys(J_.players).map((function(e){return J_.players[e]})).filter(Boolean)},lT.players=J_.players,lT.getComponent=cy.getComponent,lT.registerComponent=function(e,t){Zy.isTech(t)&&dm.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),cy.registerComponent.call(cy,e,t)},lT.getTech=Zy.getTech,lT.registerTech=Zy.registerTech,lT.use=function(e,t){Yy[e]=Yy[e]||[],Yy[e].push(t)},Object.defineProperty(lT,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(lT.middleware,"TERMINATOR",{value:Qy,writeable:!1,enumerable:!0}),lT.browser=Fm,lT.TOUCH_ENABLED=Mm,lT.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),Wh(n,e),e&&(n.super_=e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},lT.mergeOptions=oy,lT.bind=Hv,lT.registerPlugin=sT.registerPlugin,lT.deregisterPlugin=sT.deregisterPlugin,lT.plugin=function(e,t){return dm.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),sT.registerPlugin(e,t)},lT.getPlugins=sT.getPlugins,lT.getPlugin=sT.getPlugin,lT.getPluginVersion=sT.getPluginVersion,lT.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),lT.options.languages=oy(lT.options.languages,((n={})[e]=t,n)),lT.options.languages[e]},lT.log=dm,lT.createLogger=lm,lT.createTimeRange=lT.createTimeRanges=fy,lT.formatTime=Ib,lT.setFormatTime=function(e){kb=e},lT.resetFormatTime=function(){kb=Sb},lT.parseUrl=Uy,lT.isCrossOrigin=By,lT.EventTarget=Wv,lT.on=Mv,lT.one=Nv,lT.off=Uv,lT.trigger=jv,lT.xhr=Fh(),lT.TextTrack=Hy,lT.AudioTrack=zy,lT.VideoTrack=Wy,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){lT[e]=function(){return dm.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),bv[e].apply(null,arguments)}})),lT.computedStyle=mm,lT.dom=bv,lT.url=Fy,lT.defineLazyProperty=W_,lT.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var pT=Xh,hT=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},fT=function(e){return lT.log.debug?lT.log.debug.bind(lT,"VHS:",e+" >"):function(){}},gT=1/30,mT=.1,vT=function(e,t){var n,i=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return lT.createTimeRanges(i)},yT=function(e,t){return vT(e,(function(e,n){return e-mT<=t&&n+mT>=t}))},bT=function(e,t){return vT(e,(function(e){return e-gT>=t}))},_T=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},TT=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},wT=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},ST=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);t>a||(n+=t>r&&t<=a?a-t:a-r)}return n},kT=lT.createTimeRange,IT=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},CT=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},ET=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},AT=function(e){var t=e.preloadSegment;if(t){var n=t.parts,i=(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0);return i+(n&&n.length?n.length:0)}},PT=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=ET(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},xT=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=IT(e,r),void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;var r=function(e,t){for(var n,i=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=IT(e,n),void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:i.result+n},OT=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Ah()[1/0]}return xT(e,t,n)},DT=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,r=e.endIndex,a=0;if(i>r){var o=[r,i];i=o[0],r=o[1]}if(i<0){for(var s=i;s<Math.min(0,r);s++)a+=t;i=0}for(var d=i;d<r;d++)a+=n[d].duration;return a},RT=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return OT(e);if(null===t)return null;t=t||0;var r=xT(e,e.mediaSequence+e.segments.length,t);return n&&(r-=i="number"==typeof i?i:PT(null,e)),Math.max(0,r)},LT=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},MT=function(e){return e.excludeUntil&&e.excludeUntil===1/0},UT=function(e){var t=LT(e);return!e.disabled&&!t},jT=function(e,t){return t.attributes&&t.attributes[e]},NT=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!UT(e)&&(e.attributes.BANDWIDTH||0)<n})).length},BT=function(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))},FT=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var r in n){for(var a in n[r])if(i=t(n[r][a]))break;if(i)break}return!!i},qT=function(e){if(!e||!e.playlists||!e.playlists.length)return FT(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;return i&&i.split(",").every((function(e){return vf(e)}))||FT(e,(function(e){return BT(n,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var i=t(n);if("continue"!==i&&"object"==typeof i)return i.v}return!0},VT={liveEdgeDelay:PT,duration:OT,seekable:function(e,t,n){var i=t||0,r=RT(e,t,!0,n);return null===r?kT():kT(i,r)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,s=n-a,d=CT(t),l=0,u=0;u<d.length;u++){var c=d[u];if(i===c.segmentIndex&&("number"!=typeof r||"number"!=typeof c.partIndex||r===c.partIndex)){l=u;break}}if(s<0){if(l>0)for(var p=l-1;p>=0;p--){var h=d[p];if(s+=h.duration,o){if(s<0)continue}else if(s+gT<=0)continue;return{partIndex:h.partIndex,segmentIndex:h.segmentIndex,startTime:a-DT({defaultDuration:t.targetDuration,durationList:d,startIndex:l,endIndex:p})}}return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:n}}if(l<0){for(var f=l;f<0;f++)if((s-=t.targetDuration)<0)return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:n};l=0}for(var g=l;g<d.length;g++){var m=d[g];if(s-=m.duration,o){if(s>0)continue}else if(s-gT>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:a+DT({defaultDuration:t.targetDuration,durationList:d,startIndex:l,endIndex:g})}}return{segmentIndex:d[d.length-1].segmentIndex,partIndex:d[d.length-1].partIndex,startTime:n}},isEnabled:UT,isDisabled:function(e){return e.disabled},isBlacklisted:LT,isIncompatible:MT,playlistEnd:RT,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:jT,estimateSegmentRequestTime:function(e,t,n,i){return void 0===i&&(i=0),jT("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:NT,isAudioOnly:qT,playlistMatch:BT,segmentDurationWithParts:IT},HT=lT.log,zT=function(e,t){return e+"-"+t},WT=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][r];t(a,n,i,r)}}))},$T=function(e){var t=e.playlist,n=e.uri,i=e.id;t.id=i,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},GT=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var i="placeholder-uri-"+n;e.playlists[n].uri=i}var r=qT(e);WT(e,(function(t,n,i,a){var o="placeholder-uri-"+n+"-"+i+"-"+a;if(!t.playlists||!t.playlists.length){if(r&&"AUDIO"===n&&!t.uri)for(var s=0;s<e.playlists.length;s++){var d=e.playlists[s];if(d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===i)return}t.playlists=[Oh({},t)]}t.playlists.forEach((function(t,n){var i=zT(n,o);t.uri?t.resolvedUri=t.resolvedUri||pT(e.uri,t.uri):(t.uri=0===n?o:i,t.resolvedUri=t.uri),t.id=t.id||i,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];$T({playlist:n,id:zT(t,n.uri)}),n.resolvedUri=pT(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||HT.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){WT(e,(function(t){t.uri&&(t.resolvedUri=pT(e.uri,t.uri))}))}(e)},KT=lT.mergeOptions,XT=lT.EventTarget,ZT=function(e,t){if(!e)return t;var n=KT(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=KT(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},YT=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=pT(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=pT(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=pT(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=pT(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=pT(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=pT(t,e.uri))}))},JT=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},QT=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},ew=function(e,t,n){void 0===n&&(n=QT);var i=KT(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=JT(t);var a=KT(r,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var i=e.slice(),r=t.slice();n=n||0;for(var a,o=[],s=0;s<r.length;s++){var d=i[s+n],l=r[s];d?(a=d.map||a,o.push(ZT(d,l))):(a&&!l.map&&(l.map=a),o.push(l))}return o}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach((function(e){YT(e,a.resolvedUri)}));for(var s=0;s<i.playlists.length;s++)i.playlists[s].id===t.id&&(i.playlists[s]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,WT(e,(function(e,n,i,r){if(e.playlists)for(var o=0;o<e.playlists.length;o++)t.id===e.playlists[o].id&&(e.playlists[o]=a)})),i},tw=function(e,t){var n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],a=r&&r.duration||i&&i.duration;return t&&a?1e3*a:500*(e.partTargetDuration||e.targetDuration||10)},nw=function(e){function t(t,n,i){var r;if(void 0===i&&(i={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");r.logger_=fT("PlaylistLoader");var a=i,o=a.withCredentials,s=void 0!==o&&o,d=a.handleManifestRedirects,l=void 0!==d&&d;r.src=t,r.vhs_=n,r.withCredentials=s,r.handleManifestRedirects=l;var u=n.options_;return r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],r.experimentalLLHLS=u&&u.experimentalLLHLS||!1,lT.browser.IE_VERSION&&(r.experimentalLLHLS=!1),r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(Lh(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}Uh(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=pT(this.master.uri,t.uri);this.experimentalLLHLS&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,r=t.mediaSequence+t.segments.length;if(i){var a=i.parts||[],o=AT(t)-1;o>-1&&o!==a.length-1&&(n._HLS_part=o),(o>-1||a.length)&&r--}n._HLS_msn=r}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var s=new(Ah().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&s.searchParams.set(e,n[e])})),e=s.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},n.playlistRequestError=function(e,t,n){var i=t.uri,r=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+i+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,r=e.customTagParsers,a=void 0===r?[]:r,o=e.customTagMappers,s=void 0===o?[]:o,d=e.experimentalLLHLS,l=new uf;t&&l.on("warn",t),n&&l.on("info",n),a.forEach((function(e){return l.addParser(e)})),s.forEach((function(e){return l.addTagMapper(e)})),l.push(i),l.end();var u=l.manifest;if(d||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){u.hasOwnProperty(e)&&delete u[e]})),u.segments&&u.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!u.targetDuration){var c=10;u.segments&&u.segments.length&&(c=u.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+c),u.targetDuration=c}var p=ET(u);if(p.length&&!u.partTargetDuration){var h=p.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+h),HT.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),u.partTargetDuration=h}return u}({onwarn:function(e){var i=e.message;return t.logger_("m3u8-parser warn for "+n+": "+i)},oninfo:function(e){var i=e.message;return t.logger_("m3u8-parser info for "+n+": "+i)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,i=e.url,r=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:i,manifestString:t});a.lastRequest=Date.now(),$T({playlist:a,uri:i,id:r});var o=ew(this.master,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.master=o,this.media_=this.master.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(tw(this.media(),!!o)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),Ah().clearTimeout(this.mediaUpdateTimeout),Ah().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(Ah().clearTimeout(this.finalRenditionTimeout),t){var i=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Ah().setTimeout(this.media.bind(this,e,!1),i)}else{var r=this.state,a=!this.media_||e.id!==this.media_.id,o=this.master.playlists[e.id];if(o&&o.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(tw(e,!0)),a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=hT(n.handleManifestRedirects,e.resolvedUri,i),t)return n.playlistRequestError(n.request,e,r);n.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var i=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Ah().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Ah().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Ah().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=hT(e.handleManifestRedirects,e.src,n);var i=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(i)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,GT(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=JT(e),e.segments.forEach((function(t){YT(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||Ah().location.href;this.master=function(e,t){var n=zT(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Ah().location.href,resolvedUri:Ah().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(XT),iw=lT.xhr,rw=lT.mergeOptions,aw=function(e,t,n,i){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},ow=function(){var e=function e(t,n){t=rw({timeout:45e3},t);var i=e.beforeRequest||lT.Vhs.xhr.beforeRequest;if(i&&"function"==typeof i){var r=i(t);r&&(t=r)}var a=(!0===lT.Vhs.xhr.original?iw:lT.Vhs.xhr)(t,(function(e,t){return aw(a,e,t,n)})),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a};return e.original=!0,e},sw=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?Ah().BigInt(t.offset)+Ah().BigInt(t.length)-Ah().BigInt(1):t.offset+t.length-1)),n},dw=function(e,t){return e.start(t)+"-"+e.end(t)},lw=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},uw=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},cw=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];Cf(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},pw=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},hw=function(e){return e.resolvedUri},fw=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",r=0;r<t.length/n;r++)i+=t.slice(r*n,r*n+n).map(lw).join("")+" "+t.slice(r*n,r*n+n).map(uw).join("")+"\n";return i},gw=Object.freeze({__proto__:null,createTransferableMessage:cw,initSegmentId:pw,segmentKeyId:hw,hexDump:fw,tagDump:function(e){var t=e.bytes;return fw(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=dw(e,t)+" ";return n}}),mw=function e(t){var n=t.programTime,i=t.playlist,r=t.retryCount,a=void 0===r?2:r,o=t.seekTo,s=t.pauseAfterSeek,d=void 0===s||s,l=t.tech,u=t.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!i||!o)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i))return u({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var c=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<t.segments[r+1].dateTimeObject));r++);var a,o=t.segments[t.segments.length-1],s=o.dateTimeObject,d=o.videoTimingInfo?(a=o.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:o.duration+.25*o.duration;return n>new Date(s.getTime()+1e3*d)?null:(n>s&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:VT.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(n,i);if(!c)return u({message:n+" was not found in the stream"});var p=c.segment,h=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch(e){}var r=n.getTime();return(i.getTime()-r)/1e3}(p.dateTimeObject,n);if("estimate"===c.type)return 0===a?u({message:n+" is not buffered yet. Try again"}):(o(c.estimatedStart+h),void l.one("seeked",(function(){e({programTime:n,playlist:i,retryCount:a-1,seekTo:o,pauseAfterSeek:d,tech:l,callback:u})})));var f=p.start+h;l.one("seeked",(function(){return u(null,l.currentTime())})),d&&l.pause(),o(f)},vw=function(e,t){if(4===e.readyState)return t()},yw=lT.EventTarget,bw=lT.mergeOptions,_w=function(e,t){if(!QT(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(i.byterange||r.byterange){var a=i.byterange,o=r.byterange;if(a&&!o||!a&&o)return!1;if(a.offset!==o.offset||a.length!==o.length)return!1}}return!0},Tw=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},ww=function(e,t){var n={};for(var i in e){var r=e[i].sidx;if(r){var a=Yf(r);if(!t[a])break;var o=t[a].sidxInfo;Tw(o,r)&&(n[a]=t[a])}}return n},Sw=function(e){function t(t,n,i,r){var a;void 0===i&&(i={}),(a=e.call(this)||this).masterPlaylistLoader_=r||Lh(a),r||(a.isMaster_=!0);var o=i,s=o.withCredentials,d=void 0!==s&&s,l=o.handleManifestRedirects,u=void 0!==l&&l;if(a.vhs_=n,a.withCredentials=d,a.handleManifestRedirects=u,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=fT("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}Uh(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var i=this,r=e.sidx&&Yf(e.sidx);if(e.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var a=hT(this.handleManifestRedirects,e.sidx.resolvedUri),o=function(a,o){if(!i.requestErrored_(a,o,t)){var s,d=i.masterPlaylistLoader_.sidxMapping_;try{s=Eg()(Ef(o.response).subarray(8))}catch(e){return void i.requestErrored_(e,o,t)}return d[r]={sidxInfo:e.sidx,sidx:s},$f(e,s,e.sidx.resolvedUri),n(!0)}};this.request=function(e,t,n){var i,r=[],a=!1,o=function(e,t,i,r){return t.abort(),a=!0,n(e,t,i,r)},s=function(e,t){if(!a){if(e)return o(e,t,"",r);var n=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=Df(r,Of(n,!0)),i=i||Pg(r),r.length<10||i&&r.length<i+2)return vw(t,(function(){return o(e,t,"",r)}));var s=Xg(r);return"ts"===s&&r.length<188||!s&&r.length<376?vw(t,(function(){return o(e,t,"",r)})):o(null,t,s,r)}},d={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,aw(e,null,{statusCode:e.status},s)}))}},l=t(d,(function(e,t){return aw(l,e,t,s)}));return l}(a,this.vhs_.xhr,(function(t,n,r,s){if(t)return o(t,n);if(!r||"mp4"!==r)return o({status:n.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var d=e.sidx.byterange,l=d.offset,u=d.length;if(s.length>=u+l)return o(t,{response:s.subarray(l,l+u),status:n.status,uri:n.uri});i.request=i.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:sw({byterange:e.sidx.byterange})},o)}))}else this.mediaRequest_=Ah().setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Ah().clearTimeout(this.minimumUpdatePeriodTimeout_),Ah().clearTimeout(this.mediaRequest_),Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(i){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Ah().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Ah().setTimeout((function(){return t.load()}),i)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=Ah().setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(!t.requestErrored_(n,i)){var r=i.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.masterLoaded_=Date.parse(i.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=hT(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,i),r?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(i,r)}))):e(i,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t=this,n=Ig(this.masterPlaylistLoader_.masterXml_);return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:pT(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(t.request){if(i)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e,t,n,i=this.masterPlaylistLoader_.master,r=(e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i},n=kg(e.masterXml,{manifestUri:t=e.srcUrl,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest}),GT(n,t),n);i&&(r=function(e,t,n){for(var i=!0,r=bw(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var s=Yf(o.sidx);n&&n[s]&&n[s].sidx&&$f(o,n[s].sidx,o.sidx.resolvedUri)}var d=ew(r,o,_w);d&&(r=d,i=!1)}return WT(t,(function(e,t,n,a){if(e.playlists&&e.playlists.length){var o=e.playlists[0].id,s=ew(r,e.playlists[0],_w);s&&((r=s).mediaGroups[t][n][a].playlists[0]=r.playlists[o],i=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r}(i,r,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=r||i;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!i||r&&r.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(r)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Ah().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Ah().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){var i,r,a;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(i=e.masterPlaylistLoader_.master,r=e.masterPlaylistLoader_.sidxMapping_,a=ww(i.playlists,r),WT(i,(function(e,t,n,i){if(e.playlists&&e.playlists.length){var o=e.playlists;a=bw(a,ww(o,r))}})),a),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,i=!this.media_||this.media_!==n[e];i?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=Ah().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),tw(t.media(),Boolean(i))))}(),this.trigger("loadedplaylist")},t}(yw),kw={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Iw=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},Cw=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=Iw(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},Ew=function(e){return"var browserWorkerPolyFill = "+Iw.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},Aw=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},Pw=Ew(Aw((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,r,a,o,s,d,l,u,c,p,h,f,g,m,v,y,b,_,T,w,S,k,I,C,E,A,P,x,O,D,R,L,M,U,j,N,B,F,q,V=e,H=Math.pow(2,32),z={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*H+n.getUint32(4)},MAX_UINT32:H},W=z.MAX_UINT32;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);k=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),I=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:E,audio:A},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),L=R,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=R,x=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},i=function(){return t(S.dinf,t(S.dref,D))},r=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return t(S.hdlr,P[e])},g=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(S.mdhd,n)},f=function(e){return t(S.mdia,g(e),m(e.type),s(e))},o=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},s=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,x):t(S.smhd,O),i(),y(e))},d=function(e,n){for(var i=[],r=n.length;r--;)i[r]=_(n[r]);return t.apply(null,[S.moof,o(e)].concat(i))},l=function(e){for(var n=e.length,i=[];n--;)i[n]=p(e[n]);return t.apply(null,[S.moov,c(4294967295)].concat(i).concat(u(e)))},u=function(e){for(var n=e.length,i=[];n--;)i[n]=T(e[n]);return t.apply(null,[S.mvex].concat(i))},c=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,n)},v=function(e){var n,i,r=e.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(S.sdtp,a)},y=function(e){return t(S.stbl,b(e),t(S.stts,U),t(S.stsc,L),t(S.stsz,M),t(S.stco,R))},b=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?j(e):N(e))},j=function(e){var n,i,r=e.sps||[],a=e.pps||[],o=[],s=[];for(n=0;n<r.length;n++)o.push((65280&r[n].byteLength)>>>8),o.push(255&r[n].byteLength),o=o.concat(Array.prototype.slice.call(r[n]));for(n=0;n<a.length;n++)s.push((65280&a[n].byteLength)>>>8),s.push(255&a[n].byteLength),s=s.concat(Array.prototype.slice.call(a[n]));if(i=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],o,[a.length],s))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var d=e.sarRatio[0],l=e.sarRatio[1];i.push(t(S.pasp,new Uint8Array([(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return t.apply(null,i)},N=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},h=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,n)},_=function(e){var n,i,r,a,o,s;return n=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/W),s=Math.floor(e.baseMediaDecodeTime%W),i=t(S.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(r=w(e,92),t(S.traf,n,i,r)):(a=v(e),r=w(e,a.length+92),t(S.traf,n,i,r,a))},p=function(e){return e.duration=e.duration||4294967295,t(S.trak,h(e),f(e))},T=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(S.trex,n)},q=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},F=function(e,n){var i,r,a,o,s,d;for(n+=20+16*(o=e.samples||[]).length,a=q(o,n),(r=new Uint8Array(a.length+16*o.length)).set(a),i=a.length,d=0;d<o.length;d++)s=o[d],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size,r[i++]=s.flags.isLeading<<2|s.flags.dependsOn,r[i++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,r[i++]=61440&s.flags.degradationPriority,r[i++]=15&s.flags.degradationPriority,r[i++]=(4278190080&s.compositionTimeOffset)>>>24,r[i++]=(16711680&s.compositionTimeOffset)>>>16,r[i++]=(65280&s.compositionTimeOffset)>>>8,r[i++]=255&s.compositionTimeOffset;return t(S.trun,r)},B=function(e,n){var i,r,a,o,s,d;for(n+=20+8*(o=e.samples||[]).length,a=q(o,n),(i=new Uint8Array(a.length+8*o.length)).set(a),r=a.length,d=0;d<o.length;d++)s=o[d],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size;return t(S.trun,i)},w=function(e,t){return"audio"===e.type?B(e,t):F(e,t)},a=function(){return t(S.ftyp,k,I,k,C)};var $,G,K,X,Z,Y,J,Q,ee=function(e){return t(S.mdat,e)},te=d,ne=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ie=[33,16,5,32,164,27],re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ae=function(e){for(var t=[];e--;)t.push(0);return t},oe=9e4;Y=function(e,t){return G(Z(e,t))},J=function(e,t){return K(X(e),t)},Q=function(e,t,n){return X(n?e:e-t)};var se=oe,de=G=function(e){return e*oe},le=(K=function(e,t){return e*t},X=function(e){return e/oe}),ue=(Z=function(e,t){return e/t},Y),ce=J,pe=Q,he=function(e,t,n,i){var r,a,o,s,d,l=0,u=0,c=0;if(t.length&&(r=ue(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(se/(e.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),c=(u=Math.floor(l/a))*a),!(u<1||c>45e3))){for((o=function(){if(!$){var e={96e3:[ie,[227,64],ae(154),[56]],88200:[ie,[231],ae(170),[56]],64e3:[ie,[248,192],ae(240),[56]],48e3:[ie,[255,192],ae(268),[55,148,128],ae(54),[112]],44100:[ie,[255,192],ae(268),[55,163,128],ae(84),[112]],32e3:[ie,[255,192],ae(268),[55,234],ae(226),[112]],24e3:[ie,[255,192],ae(268),[55,255,128],ae(268),[111,112],ae(126),[224]],16e3:[ie,[255,192],ae(268),[55,255,128],ae(268),[111,255],ae(269),[223,108],ae(195),[1,192]],12e3:[re,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,253,128],ae(259),[56]],11025:[re,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,255,192],ae(268),[55,175,128],ae(108),[112]],8e3:[re,ae(268),[3,121,16],ae(47),[7]]};t=e,$=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return $}()[e.samplerate])||(o=t[0].data),s=0;s<u;s++)d=t[0],t.splice(0,0,{data:o,dts:d.dts-a,pts:d.pts-a});return e.baseMediaDecodeTime-=Math.floor(ce(c,e.samplerate)),c}},fe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ge=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},me=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},ve=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ee(0,0),new Ee(0,1),new Ee(1,0),new Ee(1,1)],this.parse708captions_&&(this.cc708Stream_=new we({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ve.prototype=new V).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n}(e.escapedRBSP)).payload&&4===t.payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=function(e,t){var n,i,r,a,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],o.push(a));return o}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ve.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ve.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ve.prototype.flush=function(){return this.flushStream("flush")},ve.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ve.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ve.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ve.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ve.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ve.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ve.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ye={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},be=function(e){return 32<=e&&e<=127||160<=e&&e<=255},_e=function(e){this.windowNum=e,this.reset()};_e.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},_e.prototype.getText=function(){return this.rows.join("\n")},_e.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},_e.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},_e.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},_e.prototype.addText=function(e){this.rows[this.rowIdx]+=e},_e.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var Te=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new _e(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};Te.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new _e(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},Te.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},Te.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var we=function e(t){t=t||{},e.prototype.init.call(this);var n,i=this,r=t.captionServices||{},a={};Object.keys(r).forEach((function(e){n=r[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(i.new708Packet(),i.add708Bytes(e)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(e))}};we.prototype=new V,we.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},we.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},we.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)i=31&(a=t[r++]),7==(n=a>>5)&&i>0&&(n=a=t[r++]),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},we.prototype.pushServiceBlock=function(e,t,n){var i,r=t,a=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,r));r<t+n&&r<a.length;r++)i=a[r],be(i)?r=this.handleText(r,o):24===i?r=this.multiByteCharacter(r,o):16===i?r=this.extendedCommands(r,o):128<=i&&i<=135?r=this.setCurrentWindow(r,o):152<=i&&i<=159?r=this.defineWindow(r,o):136===i?r=this.clearWindows(r,o):140===i?r=this.deleteWindows(r,o):137===i?r=this.displayWindows(r,o):138===i?r=this.hideWindows(r,o):139===i?r=this.toggleWindows(r,o):151===i?r=this.setWindowAttributes(r,o):144===i?r=this.setPenAttributes(r,o):145===i?r=this.setPenColor(r,o):146===i?r=this.setPenLocation(r,o):143===i?o=this.reset(r,o):8===i?o.currentWindow.backspace():12===i?o.currentWindow.clearText():13===i?o.currentWindow.pendingNewLine=!0:14===i?o.currentWindow.clearText():141===i&&r++},we.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return be(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},we.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},we.prototype.initService=function(e,t){var n,i,r=this;return(n="SERVICE"+e)in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[e]=new Te(e,i,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},we.prototype.handleText=function(e,t,n){var i,r,a,o,s=n&&n.isExtended,d=n&&n.isMultiByte,l=this.current708Packet.data,u=s?4096:0,c=l[e],p=l[e+1],h=t.currentWindow;return t.textDecoder_&&!s?(d?(r=[c,p],e++):r=[c],i=t.textDecoder_.decode(new Uint8Array(r))):(o=ye[a=u|c]||a,i=4096&a&&a===o?"":String.fromCharCode(o)),h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(i),e},we.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return be(i)&&be(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},we.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},we.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var a=t.currentWindow;return i=n[++e],a.visible=(32&i)>>5,a.rowLock=(16&i)>>4,a.columnLock=(8&i)>>3,a.priority=7&i,i=n[++e],a.relativePositioning=(128&i)>>7,a.anchorVertical=127&i,i=n[++e],a.anchorHorizontal=i,i=n[++e],a.anchorPoint=(240&i)>>4,a.rowCount=15&i,i=n[++e],a.columnCount=63&i,i=n[++e],a.windowStyle=(56&i)>>3,a.penStyle=7&i,a.virtualRowCount=a.rowCount+1,e},we.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},we.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},we.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},we.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},we.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},we.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},we.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},we.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},we.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},we.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},we.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},we.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ke=function(e){return null===e?"":(e=Se[e]||e,String.fromCharCode(e))},Ie=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ce=function(){for(var e=[],t=15;t--;)e.push("");return e},Ee=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ce();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ce();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ce()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=ke((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ke((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=Ie.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=ke(i),a+=ke(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ee.prototype=new V,Ee.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ee.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ce(),this.nonDisplayed_=Ce(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ee.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ee.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ee.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ee.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ee.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ee.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ee.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ee.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ee.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ce(),this.displayed_=Ce()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ee.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ee.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ee.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ee.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ee.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ee.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Ae={CaptionStream:ve,Cea608Stream:Ee,Cea708Stream:we},Pe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},xe="shared",Oe=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},De=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||xe,this.push=function(e){this.type_!==xe&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=Oe(e.dts,i),e.pts=Oe(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};De.prototype=new V;var Re,Le=De,Me=Oe,Ue=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},je=function(e,t,n){return decodeURIComponent(Ue(e,t,n))},Ne=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Be={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.value=je(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.url=je(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Ue(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Re=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],a=0;if(Re.prototype.init.call(this),this.dispatchType=Pe.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,s,d;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),a+=e.data.byteLength,1===r.length&&(i=Ne(e.data.subarray(6,10)),i+=10),!(a<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},d=0;d<i;)t.data.set(r[0].data.subarray(0,i-d),d),d+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Ne(t.data.subarray(10,14)),i-=Ne(t.data.subarray(16,20)));do{if((o=Ne(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=s.id,Be[s.id]&&(Be[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var l=s.data,u=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;u*=4,u+=3&l[7],s.timeStamp=u,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=o}while(n<i);this.trigger("data",t)}}},Re.prototype=new V;var Fe,qe,Ve,He=Re,ze=Le,We=188;(Fe=function(){var e=new Uint8Array(We),t=0;Fe.prototype.init.call(this),this.push=function(n){var i,r=0,a=We;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=We,a+=We);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===We&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new V,qe=function(){var e,t,n,i;qe.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],o=(31&e[r+1])<<8|e[r+2];a===Pe.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=o:a===Pe.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=o:a===Pe.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][o]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Pe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Pe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},qe.prototype=new V,qe.STREAM_TYPES={h264:27,adts:15},Ve=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},o=function(e,n,i){var r,a,o=new Uint8Array(e.size),s={type:n},d=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,d=0;d<e.data.length;d++)a=e.data[d],o.set(a.data,l),l+=a.data.byteLength;var u,c,p,h;c=s,h=(u=o)[0]<<16|u[1]<<8|u[2],c.data=new Uint8Array,1===h&&(c.packetLength=6+(u[4]<<8|u[5]),c.dataAlignmentIndicator=0!=(4&u[6]),192&(p=u[7])&&(c.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,c.pts*=4,c.pts+=(6&u[13])>>>1,c.dts=c.pts,64&p&&(c.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,c.dts*=4,c.dts+=(6&u[18])>>>1)),c.data=u.subarray(9+u[8])),r="video"===n||s.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",s)}};Ve.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Pe.H264_STREAM_TYPE:e=i,t="video";break;case Pe.ADTS_STREAM_TYPE:e=r,t="audio";break;case Pe.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(i,"video"),o(r,"audio"),o(a,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},Ve.prototype=new V;var $e={PAT_PID:0,MP2T_PACKET_LENGTH:We,TransportPacketStream:Fe,TransportParseStream:qe,ElementaryStream:Ve,TimestampRolloverStream:ze,CaptionStream:Ae.CaptionStream,Cea608Stream:Ae.Cea608Stream,Cea708Stream:Ae.Cea708Stream,MetadataStream:He};for(var Ge in Pe)Pe.hasOwnProperty(Ge)&&($e[Ge]=Pe[Ge]);var Ke,Xe=$e,Ze=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ke=function(e){var t,n=0;Ke.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(i){var r,a,o,s,d,l=0;if(e||(n=0),"audio"===i.type){var u;for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+i.data.byteLength)).set(o),t.set(i.data,o.byteLength)):t=i.data;l+7<t.length;)if(255===t[l]&&240==(246&t[l+1])){if("number"==typeof u&&(this.skipWarn_(u,l),u=null),a=2*(1&~t[l+1]),r=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,d=9e4*(s=1024*(1+(3&t[l+6])))/Ze[(60&t[l+2])>>>2],t.byteLength-l<r)break;this.trigger("data",{pts:i.pts+n*d,dts:i.dts+n*d,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:Ze[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+a,l+r)}),n++,l+=r}else"number"!=typeof u&&(u=l),l++;"number"==typeof u&&(this.skipWarn_(u,l),u=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},Ke.prototype=new V;var Ye,Je=Ke;Ye=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(r,r+o)),n=new DataView(a.buffer).getUint32(0),i=8*o,t-=o},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Qe,et,tt,nt=Ye;et=function(){var e,t,n=0;et.prototype.init.call(this),this.push=function(i){var r;t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},et.prototype=new V,tt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Qe=function(){var e,t,n,i,r,a,o,s=new et;Qe.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:n,dts:i,data:o,nalUnitTypeCode:31&o[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},a=function(e){var t,n,i,r,a,s,d,l,u,c,p,h,f=0,g=0,m=0,v=0,y=[1,1];if(n=(t=new nt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),tt[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==a?8:12,h=0;h<p;h++)t.readBoolean()&&o(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),d=t.readUnsignedExpGolomb(),h=0;h<d;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(l+1)-2*f-2*g,height:(2-c)*(u+1)*16-2*m-2*v,sarRatio:y}}},Qe.prototype=new V;var it,rt={H264Stream:Qe,NalByteStream:et},at=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ot=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},st=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=ot(t,n))},dt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},lt={isLikelyAacData:function(e){var t=st(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:ot,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return at[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=dt(e.subarray(10,14)));do{if((n=dt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r))){var a=i.subarray(r+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(o*=4)+(3&a[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(it=function(){var e=new Uint8Array,t=0;it.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,a,o,s=0,d=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-d>=3;)if(e[d]!=="I".charCodeAt(0)||e[d+1]!=="D".charCodeAt(0)||e[d+2]!=="3".charCodeAt(0))if(255!=(255&e[d])||240!=(240&e[d+1]))d++;else{if(e.length-d<7)break;if(d+(s=lt.parseAdtsSize(e,d))>e.length)break;a={type:"audio",data:e.subarray(d,d+s),pts:t,dts:t},this.trigger("data",a),d+=s}else{if(e.length-d<10)break;if(d+(s=lt.parseId3TagSize(e,d))>e.length)break;r={type:"timed-metadata",data:e.subarray(d,d+s)},this.trigger("data",r),d+=s}i=e.length-d,e=i>0?e.subarray(d):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var ut,ct,pt,ht,ft=it,gt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],vt=rt.H264Stream,yt=lt.isLikelyAacData,bt=function(e,t){t.stream=e,this.trigger("log",t)},_t=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",bt.bind(e,r))}},Tt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},wt=function(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};ct=function(e,t){var n,i=[],r=0,a=0,o=1/0;n=(t=t||{}).firstSequenceNumber||0,ct.prototype.init.call(this),this.push=function(t){me(e,t),e&&gt.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,d,l,u,c,p,h;0!==i.length?(s=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(i,e,r),e.baseMediaDecodeTime=ge(e,t.keepOriginalTimestamps),h=he(e,s,a,o),e.samples=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i}(s),l=ee(function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}(s)),i=[],d=te(n,[e]),u=new Uint8Array(d.byteLength+l.byteLength),n++,u.set(d),u.set(l,d.byteLength),fe(e),c=Math.ceil(9216e4/e.samplerate),s.length&&(p=s.length*c,this.trigger("segmentTimingInfo",wt(ue(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+p,s[0].pts+p,h||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+p})),this.trigger("data",{track:e,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){fe(e),i=[],this.trigger("reset")}},ct.prototype=new V,ut=function(e,t){var n,i,r,a=[],o=[];n=(t=t||{}).firstSequenceNumber||0,ut.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){me(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],mt.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,r,s,d,l,u,c,p,h=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r}(a),(s=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r}(i))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],e))?(h=r.duration,s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(s)),o.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");fe(e),s=f}me(e,s),e.samples=function(e,t){var n,i,r,a,o,s=t||0,d=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)o=a[i],s+=(r=ne(o,s)).size,d.push(r);return d}(s),l=ee(function(e){var t,n,i,r,a,o,s=0,d=e.byteLength,l=e.nalCount,u=new Uint8Array(d+4*l),c=new DataView(u.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)o=a[i],c.setUint32(s,o.data.byteLength),s+=4,u.set(o.data,s),s+=o.data.byteLength;return u}(s)),e.baseMediaDecodeTime=ge(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),c=s[0],p=s[s.length-1],this.trigger("segmentTimingInfo",wt(e.baseMediaDecodeTime,c.dts,c.pts,p.dts+p.duration,p.pts+p.duration,h)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),d=te(n,[e]),u=new Uint8Array(d.byteLength+l.byteLength),n++,u.set(d),u.set(l,d.byteLength),this.trigger("data",{track:e,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){fe(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)r=(a=this.gopCache_[o]).gop,e.pps&&Tt(e.pps[0],a.pps[0])&&e.sps&&Tt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||s>n)&&(i=a,s=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,d,l;for(a=e.byteLength,s=e.nalCount,d=e.duration,t=n=0;t<o.length&&n<e.length&&(i=o[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,d-=r.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=d,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,d;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(i=o[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(d=s?n:a))return e;var l=e.slice(d),u=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){o=e}},ut.prototype=new V,ht=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ht.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},ht.prototype=new V,ht.prototype.flush=function(e){var t,n,i,r,o=0,s={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,mt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,gt.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=function(e){var t,n=a(),i=l(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],o),o+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=pe(t.startPts,d,this.keepOriginalTimestamps),t.endTime=pe(t.endPts,d,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=pe(n.pts,d,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)n=s.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ht.prototype.setRemux=function(e){this.remuxTracks=e},pt=function(e){var t,n,i=this,r=!0;pt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Xe.MetadataStream,r.aacStream=new ft,r.audioTimestampRolloverStream=new Xe.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Xe.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Je,r.coalesceStream=new ht(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ct(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Xe.MetadataStream,r.packetStream=new Xe.TransportPacketStream,r.parseStream=new Xe.TransportParseStream,r.elementaryStream=new Xe.ElementaryStream,r.timestampRolloverStream=new Xe.TimestampRolloverStream,r.adtsStream=new Je,r.h264Stream=new vt,r.captionStream=new Xe.CaptionStream(e),r.coalesceStream=new ht(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ut(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ct(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,fe(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,fe(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=yt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},pt.prototype=new V;var St,kt,It,Ct={Transmuxer:pt,VideoSegmentStream:ut,AudioSegmentStream:ct,AUDIO_PROPERTIES:gt,VIDEO_PROPERTIES:mt,generateSegmentTimingInfo:wt},Et=function(e){return e>>>0},At=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},Pt=Et,xt=function e(t,n){var i,r,a,o,s,d=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=Pt(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=At(t.subarray(i+4,i+8)),o=r>1?i+r:t.byteLength,a===n[0]&&(1===n.length?d.push(t.subarray(i+8,o)):(s=e(t.subarray(i+8,o),n.slice(1))).length&&(d=d.concat(s))),i=o;return d},Ot=Et,Dt=z.getUint64,Rt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Mt="undefined"!=typeof window?window:void 0!==Lt?Lt:"undefined"!=typeof self?self:{},Ut=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},jt=Ae.CaptionStream,Nt=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},Bt=function(e,t){var n=xt(e,["moof","traf"]),i=xt(e,["mdat"]),r={},a=[];return i.forEach((function(e,t){var i=n[t];a.push({mdat:e,traf:i})})),a.forEach((function(e){var n,i,a=e.mdat,o=e.traf,s=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],o=8&i.flags[2],s=16&i.flags[2],d=32&i.flags[2],l=65536&i.flags[0],u=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(i.defaultSampleDuration=n.getUint32(t),t+=4),s&&(i.defaultSampleSize=n.getUint32(t),t+=4),d&&(i.defaultSampleFlags=n.getUint32(t)),l&&(i.durationIsEmpty=!0),!r&&u&&(i.baseDataOffsetIsMoof=!0),i}(xt(o,["tfhd"])[0]),d=s.trackId,l=xt(o,["tfdt"]),u=l.length>0?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Dt(e.subarray(4)):t.baseMediaDecodeTime=Ot(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t}(l[0]).baseMediaDecodeTime:0,c=xt(o,["trun"]);t===d&&c.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach((function(e){var t=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],d=4&n.flags[1],l=8&n.flags[1],u=i.getUint32(4),c=8;for(r&&(n.dataOffset=i.getInt32(c),c+=4),a&&u&&(t={flags:Rt(e.subarray(c,c+4))},c+=4,o&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(c):t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t),u--);u--;)t={},o&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),d&&(t.flags=Rt(e.subarray(c,c+4)),c+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(c):t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t);return n}(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof i?(e.pts=i+Mt.BigInt(e.compositionTimeOffset),i+=Mt.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)})),s=s.concat(t)})),s}(c,u,s),i=function(e,t,n){var i,r,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),d={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=a)if(a=s.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var l=e.subarray(r+1,r+1+a),u=Nt(r,t);if(i={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:Ut(l),trackId:n},u)i.pts=u.pts,i.dts=u.dts,o=u;else{if(!o){d.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=o.pts,i.dts=o.dts}d.seiNals.push(i)}return d}(a,n,d),r[d]||(r[d]={seiNals:[],logs:[]}),r[d].seiNals=r[d].seiNals.concat(i.seiNals),r[d].logs=r[d].logs.concat(i.logs))})),r},Ft=function(){var e,t,n,i,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new jt,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],i=o[n];else if(null===n||!i)return t.push(e),null;for(;t.length>0;){var d=t.shift();this.parse(d,a,o)}return s=function(e,t,n){if(null===t)return null;var i=Bt(e,t)[t]||{};return{seiNals:i.seiNals,logs:i.logs,timescale:n}}(e,n,i),s&&s.logs&&(r.logs=r.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},qt=Et,Vt=function(e){return("00"+e.toString(16)).slice(-2)},Ht=z.getUint64;St=function(e,t){var n=xt(t,["moof","traf"]).reduce((function(t,n){var i,r,a=xt(n,["tfhd"])[0],o=qt(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),s=e[o]||9e4,d=xt(n,["tfdt"])[0],l=new DataView(d.buffer,d.byteOffset,d.byteLength);return"bigint"==typeof(i=1===d[0]?Ht(d.subarray(4,12)):l.getUint32(4))?r=i/Mt.BigInt(s):"number"!=typeof i||isNaN(i)||(r=i/s),r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r<t&&(t=r),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},It=function(e){var t=0===e[0]?12:20;return qt(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},kt=function(e){var t=xt(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},a=xt(e,["tkhd"])[0];a&&(i=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var o=xt(e,["mdia","hdlr"])[0];if(o){var s=At(o.subarray(8,12));r.type="vide"===s?"video":"soun"===s?"audio":s}var d=xt(e,["mdia","minf","stbl","stsd"])[0];if(d){var l=d.subarray(8);r.codec=At(l.subarray(4,8));var u,c=xt(l,[r.codec])[0];c&&(/^[asm]vc[1-9]$/i.test(r.codec)?(u=c.subarray(78),"avcC"===At(u.subarray(4,8))&&u.length>11?(r.codec+=".",r.codec+=Vt(u[9]),r.codec+=Vt(u[10]),r.codec+=Vt(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=c.subarray(28),"esds"===At(u.subarray(4,8))&&u.length>20&&0!==u[19]?(r.codec+="."+Vt(u[19]),r.codec+="."+Vt(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var p=xt(e,["mdia","mdhd"])[0];p&&(r.timescale=It(p)),n.push(r)})),n};var zt=St,Wt=kt,$t=function(e){var t=31&e[1];return(t<<=8)|e[2]},Gt=function(e){return!!(64&e[1])},Kt=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Xt=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Zt={parseType:function(e,t){var n=$t(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Gt(e),n=4+Kt(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Gt(e),i=4+Kt(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var o=i+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Gt,parsePesType:function(e,t){switch(t[$t(e)]){case Pe.H264_STREAM_TYPE:return"video";case Pe.ADTS_STREAM_TYPE:return"audio";case Pe.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Gt(e))return null;var t=4+Kt(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+Kt(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===Xt(31&n[r+3])&&(a=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Xt(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Xt(31&n[r+3])&&(a=!0),a}},Yt=Me,Jt={};Jt.ts=Zt,Jt.aac=lt;var Qt=se,en=188,tn=71,nn=function(e,t,n){for(var i,r,a,o,s=0,d=en,l=!1;d<=e.byteLength;)if(e[s]!==tn||e[d]!==tn&&d!==e.byteLength)s++,d++;else{if(i=e.subarray(s,d),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=Jt.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),l=!0)),l)break;s+=en,d+=en}for(s=(d=e.byteLength)-en,l=!1;s>=0;)if(e[s]!==tn||e[d]!==tn&&d!==e.byteLength)s--,d--;else{if(i=e.subarray(s,d),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=Jt.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),l=!0)),l)break;s-=en,d-=en}},rn=function(e,t,n){for(var i,r,a,o,s,d,l,u=0,c=en,p=!1,h={data:[],size:0};c<e.byteLength;)if(e[u]!==tn||e[c]!==tn)u++,c++;else{if(i=e.subarray(u,c),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!p&&(o=Jt.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0),!n.firstKeyFrame))){if(a&&0!==h.size){for(s=new Uint8Array(h.size),d=0;h.data.length;)l=h.data.shift(),s.set(l,d),d+=l.byteLength;if(Jt.ts.videoPacketContainsKeyFrame(s)){var f=Jt.ts.parsePesTime(s);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(i),h.size+=i.byteLength}if(p&&n.firstKeyFrame)break;u+=en,c+=en}for(u=(c=e.byteLength)-en,p=!1;u>=0;)if(e[u]!==tn||e[c]!==tn)u--,c--;else{if(i=e.subarray(u,c),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(o=Jt.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0)),p)break;u-=en,c-=en}},an=function(e,t){var n;return n=Jt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,o=0,s=0;e.length-s>=3;){switch(Jt.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=Jt.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=Jt.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=Jt.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===r&&(t=e.subarray(s,s+o),r=Jt.aac.parseSampleRate(t)),i++,s+=o;break;default:s++}if(n)return null}if(null===r||null===a)return null;var d=Qt/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*d,pts:a+1024*i*d}]}}(e):function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=en;r<e.byteLength;)if(e[i]!==tn||e[r]!==tn)i++,r++;else{switch(n=e.subarray(i,r),Jt.ts.parseType(n,t.pid)){case"pat":t.pid=Jt.ts.parsePat(n);break;case"pmt":var a=Jt.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}i+=en,r+=en}}(e,t),t.table)if(t.table.hasOwnProperty(i))switch(t.table[i]){case Pe.H264_STREAM_TYPE:n.video=[],rn(e,t,n),0===n.video.length&&delete n.video;break;case Pe.ADTS_STREAM_TYPE:n.audio=[],nn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Yt(e.dts,n),e.pts=Yt(e.pts,n),e.dtsTime=e.dts/Qt,e.ptsTime=e.pts/Qt}))}if(e.video&&e.video.length){var i=t;if((void 0===i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Yt(e.dts,i),e.pts=Yt(e.pts,i),e.dtsTime=e.dts/Qt,e.ptsTime=e.pts/Qt})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Yt(r.dts,i),r.pts=Yt(r.pts,i),r.dtsTime=r.dts/Qt,r.ptsTime=r.pts/Qt}}}(n,t),n):null},on=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ct.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new Ft,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,n=e.data,i=zt(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:i,data:n},[n.buffer])},t.probeMp4Tracks=function(e){var t=e.data,n=Wt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,i="number"!=typeof n||isNaN(n)?void 0:n*se,r=an(t,i),a=null;r&&((a={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(a.videoStart=r.video[0].ptsTime),a.hasAudio&&(a.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(de(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(de(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new on(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new on(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),xw=Cw(Pw),Ow=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,o=e.onData,s=e.onTrackInfo,d=e.onAudioTimingInfo,l=e.onVideoTimingInfo,u=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,p=e.onId3,h=e.onCaptions,f=e.onDone,g=e.onEndedTimeline,m=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},b=v;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var i=e.data.segment,r=i.type,a=i.initSegment,o=i.captions,s=i.captionStreams,d=i.metadata,l=i.videoFrameDtsTime,u=i.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:s,metadata:d});var c=e.data.segment.boxes||{data:e.data.segment.data},p={type:r,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==l&&(p.videoFrameDtsTime=l),void 0!==u&&(p.videoFramePtsTime=u),n(p)}(n,y,o),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,y),"audioTimingInfo"===n.data.action&&d(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&u(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&c(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&p([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&h(n.data.caption),"endedtimeline"===n.data.action&&(b=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(b||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:y,callback:f}),Dw(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var _=n instanceof ArrayBuffer?n:n.buffer,T=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:_,byteOffset:T,byteLength:n.byteLength},[_])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},Dw=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():Ow(e.currentTransmux))},Rw=function(e,t){e.postMessage({action:t}),Dw(e)},Lw=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void Rw(t,e);t.transmuxQueue.push(Rw.bind(null,t,e))}("reset",e)},Mw=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=Oh({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function r(a){a.data.action===n&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),i(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;r.byteOffset=a?0:e.data.byteOffset,r.byteLength=e.data.byteLength;var o=[a?e.data:e.data.buffer];t.postMessage(r,o)}else t.postMessage(r)},Uw=-101,jw=-102,Nw=function(e){e.forEach((function(e){e.abort()}))},Bw=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:Uw,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:jw,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},Fw=function(e,t,n){return function(i,r){var a=r.response,o=Bw(i,r);if(o)return n(o,e);if(16!==a.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:2,xhr:r},e);for(var s=new DataView(a),d=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),l=0;l<t.length;l++)t[l].bytes=d;return n(null,e)}},qw=function(e,t){var n=Xg(e.map.bytes);if("mp4"!==n){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:2})}Mw({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var i=n.tracks,r=n.data;return e.map.bytes=r,i.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},Vw=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog,f=t.map&&t.map.tracks||{},g=Boolean(f.audio&&f.video),m=r.bind(null,t,"audio","start"),v=r.bind(null,t,"audio","end"),y=r.bind(null,t,"video","start"),b=r.bind(null,t,"video","end");Mw({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var r=e.result;r&&(i(t,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:g}),i=null,r.hasAudio&&!g&&m(r.audioStart),r.hasVideo&&y(r.videoStart),m=null,y=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void Ow(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:g,onData:function(e){e.type="combined"===e.type?"video":e.type,c(t,e)},onTrackInfo:function(e){i&&(g&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),v&&void 0!==e.end&&v(e.end)},onVideoTimingInfo:function(e){y&&void 0!==e.start&&(y(e.start),y=null),b&&void 0!==e.end&&b(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){o(e)},onId3:function(e,n){s(t,e,n)},onCaptions:function(e){d(t,[e])},isEndOfTimeline:l,onEndedTimeline:function(){u()},onTransmuxerLog:h,onDone:function(e){p&&(e.type="combined"===e.type?"video":e.type,p(null,t,e))}})}})},Hw=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog,f=new Uint8Array(n);if(Zg(f)){t.isFmp4=!0;var g=t.map.tracks,m={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&"enca"!==g.audio.codec&&(m.audioCodec=g.audio.codec),g.video&&g.video.codec&&"encv"!==g.video.codec&&(m.videoCodec=g.video.codec),g.video&&g.audio&&(m.isMuxed=!0),i(t,m);var v=function(e){c(t,{data:f,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),e&&e.length&&d(t,e),p(null,t,{})};Mw({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var i=e.data,a=e.startTime;n=i.buffer,t.bytes=f=i,m.hasAudio&&!m.isMuxed&&r(t,"audio","start",a),m.hasVideo&&r(t,"video","start",a),g.video&&i.byteLength&&t.transmuxer?Mw({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[g.video.id],callback:function(e){n=e.data.buffer,t.bytes=f=e.data,e.logs.forEach((function(e){h(lT.mergeOptions(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=Xg(f)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),void p(null,t,{});Vw({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h})}else p(null,t,{})},zw=function(e,t){var n,i=e.id,r=e.key,a=e.encryptedBytes,o=e.decryptionWorker;o.addEventListener("message",(function e(n){if(n.data.source===i){o.removeEventListener("message",e);var r=n.data.decrypted;t(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),n=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),o.postMessage(cw({source:i,encrypted:a,key:n,iv:r.iv}),[a.buffer,n.buffer])},Ww=function(e){var t=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,r=e.segment,a=e.abortFn,o=e.progressFn,s=e.trackInfoFn,d=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,u=e.audioSegmentTimingInfoFn,c=e.id3Fn,p=e.captionsFn,h=e.isEndOfTimeline,f=e.endedTimelineFn,g=e.dataFn,m=e.doneFn,v=e.onTransmuxerLog,y=[],b=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog,f=0,g=!1;return function(e,m){if(!g){if(e)return g=!0,Nw(t),p(e,m);if((f+=1)===t.length){var v=function(){if(m.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog;zw({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,Hw({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h})}))}({decryptionWorker:n,segment:m,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h});Hw({segment:m,bytes:m.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return zw({decryptionWorker:n,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(function(e){m.map.bytes=e,qw(m,(function(e){if(e)return Nw(t),p(e,m);v()}))}));v()}}}}({activeXhrs:y,decryptionWorker:i,trackInfoFn:s,timingInfoFn:d,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:p,isEndOfTimeline:h,endedTimelineFn:f,dataFn:g,doneFn:m,onTransmuxerLog:v});if(r.key&&!r.key.bytes){var _=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&_.push(r.map.key);var T=t(lT.mergeOptions(n,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),Fw(r,_,b));y.push(T)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var w=t(lT.mergeOptions(n,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),Fw(r,[r.map.key],b));y.push(w)}var S=lT.mergeOptions(n,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:sw(r.map)}),k=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,i){var r=Bw(e,i);if(r)return n(r,t);var a=new Uint8Array(i.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,qw(t,(function(e){if(e)return e.xhr=i,e.status=i.status,n(e,t);n(null,t)}))}}({segment:r,finishProcessingFn:b}),I=t(S,k);y.push(I)}var C=lT.mergeOptions(n,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:sw(r)}),E=t(C,function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(e,r){var a=Bw(e,r);if(a)return n(a,t);var o="arraybuffer"!==i&&r.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(r.responseText.substring(t.lastReachedChar||0)):r.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),n(null,t)}}({segment:r,finishProcessingFn:b,responseType:C.responseType}));E.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=lT.mergeOptions(t.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}}({segment:r,progressFn:o,trackInfoFn:s,timingInfoFn:d,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:p,isEndOfTimeline:h,endedTimelineFn:f,dataFn:g})),y.push(E);var A={};return y.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:A,abortFn:a}))})),function(){return Nw(y)}},$w=fT("CodecUtils"),Gw=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},Kw=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,i=e.type,r=e.details;t[n]=t[n]||[],t[n].push(ff(""+i+r))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return $w("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},Xw=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},Zw=function(e,t){var n=t.attributes||{},i=Kw(function(e){var t=e.attributes||{};if(t.CODECS)return gf(t.CODECS)}(t)||[]);if(Gw(e,t)&&!i.audio&&!function(e,t){if(!Gw(e,t))return!0;var n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1}(e,t)){var r=Kw(mf(e,n.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},Yw=fT("PlaylistSelector"),Jw=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},Qw=function(e,t){if(!e)return"";var n=Ah().getComputedStyle(e);return n?n[t]:""},eS=function(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},tS=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Ah().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i||Ah().Number.MAX_VALUE)},nS=function(e,t,n,i,r,a){if(e){var o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r},s=e.playlists;VT.isAudioOnly(e)&&(s=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var d=s.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||Ah().Number.MAX_VALUE,width:t,height:n,playlist:e}}));eS(d,(function(e,t){return e.bandwidth-t.bandwidth}));var l=(d=d.filter((function(e){return!VT.isIncompatible(e.playlist)}))).filter((function(e){return VT.isEnabled(e.playlist)}));l.length||(l=d.filter((function(e){return!VT.isDisabled(e.playlist)})));var u=l.filter((function(e){return e.bandwidth*kw.BANDWIDTH_VARIANCE<t})),c=u[u.length-1],p=u.filter((function(e){return e.bandwidth===c.bandwidth}))[0];if(!1===r){var h=p||l[0]||d[0];if(h&&h.playlist){var f="sortedPlaylistReps";return p&&(f="bandwidthBestRep"),l[0]&&(f="enabledPlaylistReps"),Yw("choosing "+Jw(h)+" using "+f+" with options",o),h.playlist}return Yw("could not choose a playlist with options",o),null}var g=u.filter((function(e){return e.width&&e.height}));eS(g,(function(e,t){return e.width-t.width}));var m=g.filter((function(e){return e.width===n&&e.height===i}));c=m[m.length-1];var v,y,b,_,T=m.filter((function(e){return e.bandwidth===c.bandwidth}))[0];if(T||(y=(v=g.filter((function(e){return e.width>n||e.height>i}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),c=y[y.length-1],b=y.filter((function(e){return e.bandwidth===c.bandwidth}))[0]),a.experimentalLeastPixelDiffSelector){var w=g.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e}));eS(w,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),_=w[0]}var S=_||b||T||p||l[0]||d[0];if(S&&S.playlist){var k="sortedPlaylistReps";return _?k="leastPixelDiffRep":b?k="resolutionPlusOneRep":T?k="resolutionBestRep":p?k="bandwidthBestRep":l[0]&&(k="enabledPlaylistReps"),Yw("choosing "+Jw(S)+" using "+k+" with options",o),S.playlist}return Yw("could not choose a playlist with options",o),null}},iS=function(){var e=this.useDevicePixelRatio&&Ah().devicePixelRatio||1;return nS(this.playlists.master,this.systemBandwidth,parseInt(Qw(this.tech_.el(),"width"),10)*e,parseInt(Qw(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},rS=function(e,t,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=e&&r.endTime<=t&&n.removeCue(r)},aS=function(e){return"number"==typeof e&&isFinite(e)},oS=1/60,sS=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,r=e.part,a=e.playlist,o=a.mediaSequence,s=a.id,d=a.segments,l=void 0===d?[]:d,u=e.mediaIndex,c=e.partIndex,p=e.timeline,h=l.length-1,f="mediaIndex/partIndex increment";e.getMediaInfoForTime?f="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(f+=" with independent "+e.independent);var g="number"==typeof c,m=e.segment.uri?"segment":"pre-segment",v=g?AT({preloadSegment:i})-1:0;return m+" ["+(o+u)+"/"+(o+h)+"]"+(g?" part ["+c+"/"+v+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+(g?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+p+"] selected by ["+f+"] playlist ["+s+"]"},dS=function(e){return e+"TimingInfo"},lS=function(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(n===i)return!1;if("audio"===r){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==i}if("main"===r&&a){var s=t.pendingTimelineChange({type:"audio"});return!s||s.to!==i}return!1},uS=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+gT},cS=function(e){function t(t,n){var i;if(i=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=t.parse708captions,i.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,i.captionServices_=t.captionServices,i.experimentalExactManifestTimings=t.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=lT.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=fT("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(Lh(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",(function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}Uh(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return function(e){var t=new xw;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Ah().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Ah().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Lw(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return lT.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,i=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=pw(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=hw(e),i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){var s=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=s}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(Ah().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&Lw(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,i){if(void 0===n&&(n=function(){}),void 0===i&&(i=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,a=function(){0==--r&&n()};for(var o in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,a)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil((t-i)*Yg.ONE_SECOND_IN_TS),a=Math.ceil((n-i)*Yg.ONE_SECOND_IN_TS),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var d=s+1;d--&&!(e[d].pts<=r););return d=Math.max(d,0),o.splice(d,s-d+1),o}(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)rS(e,t,this.inbandTextTracks_[o]);rS(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&Ah().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ah().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Ah().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ah().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var i="number"==typeof e&&t.segments[e],r=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&a},n.chooseNextRequest_=function(){var e=this.buffered_(),t=wT(e)||0,n=ST(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(e,t,n){t=t||[];for(var i=[],r=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(i.push(a),(r+=o.duration)>n))return a}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,a,t);else if(null!==this.mediaIndex){var s=a[this.mediaIndex],d="number"==typeof this.partIndex?this.partIndex:-1;o.startOfSegment=s.end?s.end:t,s.parts&&s.parts[d+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=d+1):o.mediaIndex=this.mediaIndex+1}else{var l=VT.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),u=l.segmentIndex,c=l.startTime,p=l.partIndex;o.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),o.mediaIndex=u,o.startOfSegment=c,o.partIndex=p}var h=a[o.mediaIndex],f=h&&"number"==typeof o.partIndex&&h.parts&&h.parts[o.partIndex];if(!h||"number"==typeof o.partIndex&&!f)return null;if("number"!=typeof o.partIndex&&h.parts&&(o.partIndex=0,f=h.parts[0]),!n&&f&&!f.independent)if(0===o.partIndex){var g=a[o.mediaIndex-1],m=g.parts&&g.parts.length&&g.parts[g.parts.length-1];m&&m.independent&&(o.mediaIndex-=1,o.partIndex=g.parts.length-1,o.independent="previous segment")}else h.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");var v=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=a.length-1&&v&&!this.seeking_()?null:this.generateSegmentInfo_(o)},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,i=e.mediaIndex,r=e.startOfSegment,a=e.isSyncRequest,o=e.partIndex,s=e.forceTimestampOffset,d=e.getMediaInfoForTime,l=n.segments[i],u="number"==typeof o&&l.parts[o],c={requestId:"segment-loader-"+Math.random(),uri:u&&u.resolvedUri||l.resolvedUri,mediaIndex:i,partIndex:u?o:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:u&&u.duration||l.duration,segment:l,part:u,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:d,independent:t},p=void 0!==s?s:this.isPendingTimestampOffset_;c.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:p});var h=wT(this.sourceUpdater_.audioBuffered());return"number"==typeof h&&(c.audioAppendStart=h-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(c.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var i,r=Math.ceil((t-n+3)*Yg.ONE_SECOND_IN_TS);for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),c},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,i=t.currentTimeline,r=t.startOfSegment,a=t.buffered,t.overrideCheck||n!==i?n<i?r:a.length?a.end(a.length-1):r:null;var t,n,i,r,a},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=VT.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var o=function(e){var t=e.currentTime,n=e.bandwidth,i=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,o=e.currentTimeline,s=e.syncController,d=e.master.playlists.filter((function(e){return!VT.isIncompatible(e)})),l=d.filter(VT.isEnabled);l.length||(l=d.filter((function(e){return!VT.isDisabled(e)})));var u=l.filter(VT.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var d=s.getSyncPoint(e,i,o,t)?1:2;return{playlist:e,rebufferingImpact:VT.estimateSegmentRequestTime(r,n,e)*d-a}})),c=u.filter((function(e){return e.rebufferingImpact<=0}));return eS(c,(function(e,t){return tS(t.playlist,e.playlist)})),c.length?c[0]:(eS(u,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),u[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=r-a-o.rebufferingImpact,d=.5;a<=gT&&(d=1),!o.playlist||o.playlist.uri===this.playlist_.uri||s<d||(this.bandwidth=o.playlist.attributes.BANDWIDTH*kw.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+sS(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=n[r];if(a!==i[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=dS(t);r[a]=r[a]||{},r[a][n]=i,this.logger_("timinginfo: "+t+" - "+n+" - "+i),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((function(e){r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+i),t.endTime=Math.max(t.endTime,e.endTime+i),t.captions.push(e)})),Object.keys(r).forEach((function(e){var t=r[e],a=t.startTime,o=t.endTime,s=t.captions,d=n.inbandTextTracks_;n.logger_("adding cues from "+a+" -> "+o+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{var a=n,o=n,s=!1,d=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];d&&(a=d.label,o=d.language,s=d.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:s,label:a,language:o},!1).track}}}(d,n.vhs_.tech_,e),rS(a,o,d[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var r=Ah().WebKitDataCue||Ah().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new r(e.startTime+i,e.endTime+i,e.text))}))}}({captionArray:s,inbandTextTracks:d,timestampOffset:i})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,r=e.videoDuration;if(n){var a=Ah().WebKitDataCue||Ah().VTTCue,o=t.metadataTrack_;if(o&&(n.forEach((function(e){var t=e.cueTime+i;!("number"!=typeof t||Ah().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new a(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return lT.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return lT.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return lT.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),o.addCue(n)}))})),o.cues&&o.cues.length)){for(var s=o.cues,d=[],l=0;l<s.length;l++)s[l]&&d.push(s[l]);var u=d.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),c=Object.keys(u).sort((function(e,t){return Number(e)-Number(t)}));c.forEach((function(e,t){var n=u[e],i=Number(c[t+1])||r;n.forEach((function(e){e.endTime=i}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&lS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||lS({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[dS(t.type)].start;else{var i,r=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&r&&r.hasVideo;a&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var o=this.chooseNextRequest_();if(o.mediaIndex!==n.mediaIndex||o.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,i=e.map,r=e.playlist;if(i){var a=pw(i);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes,o=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+TT(o).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+TT(s).join(", "));var d=o.length?o.start(0):0,l=o.length?o.end(o.length-1):0,u=s.length?s.start(0):0,c=s.length?s.end(s.length-1):0;if(l-d<=1&&c-u<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+TT(o).join(", ")+", video buffer: "+TT(s).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:r,bytes:a}));var p=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+p),this.remove(0,p,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=Ah().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,i=e.type,r=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(i+" append of "+r.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:i,bytes:r}))},n.appendToSourceBuffer_=function(e){var t,n,i,r=e.segmentInfo,a=e.type,o=e.initSegment,s=e.data,d=e.bytes;if(!d){var l=[s],u=s.byteLength;o&&(l.unshift(o),u+=o.byteLength),i=0,(t={bytes:u,segments:l}).bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach((function(e){n.set(e,i),i+=e.byteLength}))),d=n}this.sourceUpdater_.appendBuffer({segmentInfo:r,type:a,bytes:d},this.handleAppendError_.bind(this,{segmentInfo:r,type:a,bytes:d}))},n.handleSegmentTimingInfo_=function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment,r=e+"TimingInfo";i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,i=t.data;if(i&&i.byteLength&&("audio"!==n||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=Oh({},e,{forceTimestampOffset:!0});Oh(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,o=i||r&&a;this.logger_("Requesting "+sS(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=Ww({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var i=n.message,r=n.level,a=n.stream;t.logger_(sS(e)+" logged from transmuxer stream "+a+" as a "+r+": "+i)}})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var i=t-kw.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var r=t-n;return Math.min(r,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,i={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=a}return t.map&&(i.map=this.initSegmentForMap(t.map)),i},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<oS?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record 0.016666666666666666"):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===jw)return;return this.pause(),e.code===Uw?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,i=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,o=e.useVideoTimingInfo,s=e.videoTimingInfo,d=e.audioTimingInfo;if(void 0!==t)return t;if(!o)return d.start;var l=n.segments[i-1];return 0!==i&&l&&void 0!==l.start&&l.end===r+a?s.start:r},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&i,o=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,i=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:i.start:i.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var n,i,r=(n={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},i=0,["video","audio"].forEach((function(e){var t=n[e+"TimingInfo"];if(t){var r,a=t.start,o=t.end;"bigint"==typeof a||"bigint"==typeof o?r=Ah().BigInt(o)-Ah().BigInt(a):"number"==typeof a&&"number"==typeof o&&(r=o-a),void 0!==r&&r>i&&(i=r)}})),"bigint"==typeof i&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i);if(!r)return null;var a=e.playlist.targetDuration,o=uS({segmentDuration:r,maxDuration:2*a}),s=uS({segmentDuration:r,maxDuration:a}),d="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+r+" when the reported duration is "+e.duration+" and the target duration is "+a+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return o||s?{severity:o?"warn":"info",message:d}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?lT.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+sS(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,a=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||a)return this.logger_("bad "+(r?"segment":"part")+" "+sS(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+sS(e))},n.recordThroughput_=function(e){if(e.duration<oS)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record 0.016666666666666666");else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(aS(n)&&aS(i)){rS(n,i,this.segmentMetadataTrack_);var r=Ah().WebKitDataCue||Ah().VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=new r(n,i,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}},t}(lT.EventTarget);function pS(){}var hS,fS=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},gS=["video","audio"],mS=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},vS=function e(t,n){if(0!==n.queue.length){var i=0,r=n.queue[i];if("mediaSource"!==r.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!mS(t,n)){if(r.type!==t){if(i=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(t,n.queue),null===i)return;r=n.queue[i]}return n.queue.splice(i,1),n.queuePending[t]=r,r.action(t,n),r.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),r.action(n),r.doneFn&&r.doneFn(),e("audio",n),e("video",n))}},yS=function(e,t){var n=t[e+"Buffer"],i=fS(e);n&&(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},bS=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},_S=function(e,t,n){return function(i,r){var a=r[i+"Buffer"];if(bS(r.mediaSource,a)){r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{a.appendBuffer(e)}catch(e){r.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+i+"Buffer"),r.queuePending[i]=null,n(e)}}}},TS=function(e,t){return function(n,i){var r=i[n+"Buffer"];if(bS(i.mediaSource,r)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{r.remove(e,t)}catch(r){i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},wS=function(e){return function(t,n){var i=n[t+"Buffer"];bS(n.mediaSource,i)&&(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},SS=function(e){return function(t,n){e()}},kS=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){lT.log.warn("Failed to call media source endOfStream",e)}}}},IS=function(e,t){return function(n){var i=fS(e),r=yf(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),a.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},CS=function(e){return function(t){var n=t[e+"Buffer"];if(yS(e,t),bS(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){lT.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},ES=function(e){return function(t,n){var i=n[t+"Buffer"],r=yf(e);bS(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),i.changeType(r),n.codecs[t]=e)}},AS=function(e){var t=e.type,n=e.sourceUpdater,i=e.action,r=e.doneFn,a=e.name;n.queue.push({type:t,action:i,doneFn:r,name:a}),vS(t,n)},PS=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}vS(e,t)}},xS=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return vS("mediaSource",Lh(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=fT("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=PS("video",Lh(n)),n.onAudioUpdateEnd_=PS("audio",Lh(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}Uh(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){AS({type:"mediaSource",sourceUpdater:this,action:IS(e,t),name:"addSourceBuffer"})},n.abort=function(e){AS({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(bS(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){lT.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?AS({type:"mediaSource",sourceUpdater:this,action:CS(e),name:"removeSourceBuffer"}):lT.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!lT.browser.IE_VERSION&&!lT.browser.IS_FIREFOX&&Ah().MediaSource&&Ah().MediaSource.prototype&&"function"==typeof Ah().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return Ah().SourceBuffer&&Ah().SourceBuffer.prototype&&"function"==typeof Ah().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?AS({type:e,sourceUpdater:this,action:ES(t),name:"changeType"}):lT.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var i=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,i);t.canChangeType()&&t.changeType(n,i)}))},n.appendBuffer=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(AS({type:r,sourceUpdater:this,action:_S(a,i||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var o=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+o.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,o.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return bS(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:lT.createTimeRange()},n.videoBuffered=function(){return bS(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:lT.createTimeRange()},n.buffered=function(){var e=bS(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=bS(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,i=null,r=0,a=[],o=[];if(!(e&&e.length&&t&&t.length))return lT.createTimeRange();for(var s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),s=0;s<a.length;s++)"start"===a[s].type?2==++r&&(n=a[s].time):"end"===a[s].type&&1==--r&&(i=a[s].time),null!==n&&null!==i&&(o.push([n,i]),n=null,i=null);return lT.createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){var n;void 0===t&&(t=pS),AS({type:"mediaSource",sourceUpdater:this,action:(n=e,function(e){e.logger_("Setting mediaSource duration to "+n);try{e.mediaSource.duration=n}catch(e){lT.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=pS),"string"!=typeof e&&(e=void 0),AS({type:"mediaSource",sourceUpdater:this,action:kS(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=pS),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?AS({type:"audio",sourceUpdater:this,action:TS(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=pS),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?AS({type:"video",sourceUpdater:this,action:TS(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!mS("audio",this)&&!mS("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(AS({type:"audio",sourceUpdater:this,action:wS(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(AS({type:"video",sourceUpdater:this,action:wS(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&AS({type:"audio",sourceUpdater:this,action:SS(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&AS({type:"video",sourceUpdater:this,action:SS(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),gS.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return yS(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(lT.EventTarget),OS=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},DS=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),RS=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).mediaSource_=null,i.subtitlesTrack_=null,i.loaderType_="subtitle",i.featuresNativeTextTracks_=t.featuresNativeTextTracks,i.shouldSaveSegmentTimingInfo_=!1,i}Uh(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return lT.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return lT.createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=pw(e),i=this.initSegments_[n];if(t&&!i&&e.bytes){var r=DS.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(DS,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){rS(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var i=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===Uw&&this.handleTimeout_(),e.code===jw?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof Ah().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,s=function(){i.subtitlesTrack_.tech_.off("vttjsloaded",o),i.stopForError({message:"Error loading vtt.js"})};return o=function(){i.subtitlesTrack_.tech_.off("vttjserror",s),i.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",s)}a.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach((function(e){i.subtitlesTrack_.addCue(i.featuresNativeTextTracks_?new(Ah().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],r=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&++r>1&&i.push(t[a]);i.length&&i.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;"function"==typeof Ah().TextDecoder?t=new(Ah().TextDecoder)("utf8"):(t=Ah().WebVTT.StringDecoder(),n=!0);var i=new(Ah().WebVTT.Parser)(Ah(),Ah().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=function(t){e.timestampmap=t},i.onparsingerror=function(e){lT.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;n&&(r=OS(r)),i.parse(r)}var a=e.bytes;n&&(a=OS(a)),i.parse(a),i.flush()},n.updateTimeMapping_=function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/Yg.ONE_SECOND_IN_TS-r.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,s-i.duration)}}}else i.empty=!0},t}(cS),LS=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},MS=[{name:"VOD",run:function(e,t,n,i,r){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,s=CT(t);r=r||0;for(var d=0;d<s.length;d++){var l=s[t.endList||0===r?d:s.length-(d+1)],u=l.segment,c=e.timelineToDatetimeMappings[u.timeline];if(c&&u.dateTimeObject){var p=u.dateTimeObject.getTime()/1e3+c;if(u.parts&&"number"==typeof l.partIndex)for(var h=0;h<l.partIndex;h++)p+=u.parts[h].duration;var f=Math.abs(r-p);if(null!==o&&(0===f||o<f))break;o=f,a={time:p,segmentIndex:l.segmentIndex,partIndex:l.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var a=null,o=null;r=r||0;for(var s=CT(t),d=0;d<s.length;d++){var l=s[t.endList||0===r?d:s.length-(d+1)],u=l.segment,c=l.part&&l.part.start||u&&u.start;if(u.timeline===i&&void 0!==c){var p=Math.abs(r-c);if(null!==o&&o<p)break;(!a||null===o||o>=p)&&(o=p,a={time:c,segmentIndex:l.segmentIndex,partIndex:l.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var d=t.discontinuityStarts[s],l=t.discontinuitySequence+s+1,u=e.discontinuities[l];if(u){var c=Math.abs(r-u.time);if(null!==o&&o<c)break;(!a||null===o||o>=c)&&(o=c,a={time:u.time,segmentIndex:d,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],US=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=fT("SyncController"),n}Uh(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+DT({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,n,i){for(var r=[],a=0;a<MS.length;a++){var o=MS[a],s=o.run(this,e,t,n,i);s&&(s.strategy=o.name,r.push({strategy:o.name,syncPoint:s}))}return r},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)lT.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var i=n-1;i>=0;i--){var r=e.segments[i];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),r=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:r.start}));var a=r.dateTimeObject;r.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[r.timeline]=-a.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var i,r,a=e.segment,o=e.part,s=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+s.time+"] [mapping: "+s.mapping+"]")),i=e.startOfSegment,r=t.end+s.mapping;else{if(!s)return!1;i=t.start+s.mapping,r=t.end+s.mapping}return o&&(o.start=i,o.end=r),(!a.start||i<a.start)&&(a.start=i),a.end=r,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,o=r-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var d;d=o<0?n.start-DT({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+DT({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:d,accuracy:s}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(lT.EventTarget),jS=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}Uh(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,i=e.to;return"number"==typeof n&&"number"==typeof i&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,i=e.to;return"number"==typeof n&&"number"==typeof i&&(this.lastTimelineChanges_[t]={type:t,from:n,to:i},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(lT.EventTarget),NS=Ew(Aw((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var i=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=t((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),o=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),s=null,d=function(){function e(e){var t,n,i;s||(s=function(){var e,t,n,i,r,a,o,s,d=[[[],[],[],[],[]],[[],[],[],[],[]]],l=d[0],u=d[1],c=l[4],p=u[4],h=[],f=[];for(e=0;e<256;e++)f[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!c[t];t^=i||1,n=f[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,c[t]=a,p[a]=t,s=16843009*h[r=h[i=h[t]]]^65537*r^257*i^16843008*t,o=257*h[a]^16843008*a,e=0;e<4;e++)l[e][t]=o=o<<24^o>>>8,u[e][a]=s=s<<24^s>>>8;for(e=0;e<5;e++)l[e]=l[e].slice(0),u[e]=u[e].slice(0);return d}()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],o=e.length,d=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var l=e.slice(0),u=[];for(this._key=[l,u],t=o;t<4*o+28;t++)i=l[t-1],(t%o==0||8===o&&t%o==4)&&(i=r[i>>>24]<<24^r[i>>16&255]<<16^r[i>>8&255]<<8^r[255&i],t%o==0&&(i=i<<8^i>>>24^d<<24,d=d<<1^283*(d>>7))),l[t]=l[t-o]^i;for(n=0;t;n++,t--)i=l[3&n?t:t-4],u[n]=t<=4||n<4?i:a[0][r[i>>>24]]^a[1][r[i>>16&255]]^a[2][r[i>>8&255]]^a[3][r[255&i]]}return e.prototype.decrypt=function(e,t,n,i,r,a){var o,s,d,l,u=this._key[1],c=e^u[0],p=i^u[1],h=n^u[2],f=t^u[3],g=u.length/4-2,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(l=0;l<g;l++)o=y[c>>>24]^b[p>>16&255]^_[h>>8&255]^T[255&f]^u[m],s=y[p>>>24]^b[h>>16&255]^_[f>>8&255]^T[255&c]^u[m+1],d=y[h>>>24]^b[f>>16&255]^_[c>>8&255]^T[255&p]^u[m+2],f=y[f>>>24]^b[c>>16&255]^_[p>>8&255]^T[255&h]^u[m+3],m+=4,c=o,p=s,h=d;for(l=0;l<4;l++)r[(3&-l)+a]=w[c>>>24]<<24^w[p>>16&255]<<16^w[h>>8&255]<<8^w[255&f]^u[m++],o=c,c=p,p=h,h=f,f=o},e}(),l=function(e){function t(){var t;return(t=e.call(this,o)||this).jobs=[],t.delay=1,t.timeout_=null,t}a(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(o),u=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},c=function(){function e(t,n,i,r){var a=e.STEP,o=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),d=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(o.subarray(d,d+a),n,i,s)),d=a;d<o.length;d+=a)i=new Uint32Array([u(o[d-4]),u(o[d-3]),u(o[d-2]),u(o[d-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(d,d+a),n,i,s));this.asyncStream_.push((function(){var e;r(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,i){return function(){var r=function(e,t,n){var i,r,a,o,s,l,c,p,h,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),g=new d(Array.prototype.slice.call(t)),m=new Uint8Array(e.byteLength),v=new Int32Array(m.buffer);for(i=n[0],r=n[1],a=n[2],o=n[3],h=0;h<f.length;h+=4)s=u(f[h]),l=u(f[h+1]),c=u(f[h+2]),p=u(f[h+3]),g.decrypt(s,l,c,p,v,h),v[h]=u(v[h]^i),v[h+1]=u(v[h+1]^r),v[h+2]=u(v[h+2]^a),v[h+3]=u(v[h+3]^o),i=s,r=l,a=c,o=p;return m}(e,t,n);i.set(r,e.byteOffset)}},i(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),p=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000");self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new c(n,i,r,(function(e,n){var i,r;self.postMessage((i={source:t.source,decrypted:n},r={},Object.keys(i).forEach((function(e){var t=i[e];!function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer}(t)?r[e]=t:r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}})),r),[n.buffer])}))}}))),BS=Cw(NS),FS=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},qS=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},VS=function(e,t){t.activePlaylistLoader=e,e.load()},HS={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;qS(n,i);var a=i.activeTrack(),o=i.activeGroup(),s=(o.filter((function(e){return e.default}))[0]||o[0]).id,d=i.tracks[s];if(a!==d){for(var l in lT.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[l].enabled=i.tracks[l]===d;i.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];lT.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),qS(n,i);var r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}}},zS={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",HS[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),a.track(o.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",HS[e](e,n))}},WS={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,s=t.mediaTypes[e],d=s.groups,l=s.tracks,u=s.logger_,c=t.masterPlaylistLoader,p=qT(c.master);for(var h in o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},p&&(o[e].main.default.playlists=c.master.playlists)),o[e])for(var f in d[h]||(d[h]=[]),o[e][h]){var g=o[e][h][f],m=void 0;if(p?(u("AUDIO group '"+h+"' label '"+f+"' is a master playlist"),g.isMasterPlaylist=!0,m=null):m="vhs-json"===i&&g.playlists?new nw(g.playlists[0],n,a):g.resolvedUri?new nw(g.resolvedUri,n,a):g.playlists&&"dash"===i?new Sw(g.playlists[0],n,a,c):null,g=lT.mergeOptions({id:f,playlistLoader:m},g),zS[e](e,g.playlistLoader,t),d[h].push(g),void 0===l[f]){var v=new lT.AudioTrack({id:f,kind:FS(g),enabled:!1,language:g.language,default:g.default,label:f});l[f]=v}}r.on("error",HS[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,d=t.mediaTypes[e],l=d.groups,u=d.tracks,c=t.masterPlaylistLoader;for(var p in s[e])for(var h in l[p]||(l[p]=[]),s[e][p])if(!s[e][p][h].forced){var f=s[e][p][h],g=void 0;if("hls"===r)g=new nw(f.resolvedUri,i,o);else if("dash"===r){if(!f.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;g=new Sw(f.playlists[0],i,o,c)}else"vhs-json"===r&&(g=new nw(f.playlists?f.playlists[0]:f.resolvedUri,i,o));if(f=lT.mergeOptions({id:h,playlistLoader:g},f),zS[e](e,f.playlistLoader,t),l[p].push(f),void 0===u[h]){var m=n.addRemoteTextTrack({id:h,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:h},!1).track;u[h]=m}}a.on("error",HS[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,o=r.tracks;for(var s in i[e])for(var d in a[s]||(a[s]=[]),i[e][s]){var l=i[e][s][d];if(/^(?:CC|SERVICE)/.test(l.instreamId)){var u=n.options_.vhs&&n.options_.vhs.captionServices||{},c={label:d,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=lT.mergeOptions(c,u[c.instreamId])),void 0===c.default&&delete c.default,a[s].push(lT.mergeOptions({id:d},l)),void 0===o[d]){var p=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;o[d]=p}}}}},$S=function e(t,n){for(var i=0;i<t.length;i++){if(BT(n,t[i]))return!0;if(t[i].playlists&&e(t[i].playlists,n))return!0}return!1},GS={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},KS=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],XS=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},ZS=function(e){function t(t){var n;n=e.call(this)||this;var i=t.src,r=t.handleManifestRedirects,a=t.withCredentials,o=t.tech,s=t.bandwidth,d=t.externVhs,l=t.useCueTags,u=t.blacklistDuration,c=t.enableLowInitialPlaylist,p=t.sourceType,h=t.cacheEncryptionKeys,f=t.experimentalBufferBasedABR,g=t.experimentalLeastPixelDiffSelector,m=t.captionServices;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var v=t.maxPlaylistRetries;null==v&&(v=1/0),hS=d,n.experimentalBufferBasedABR=Boolean(f),n.experimentalLeastPixelDiffSelector=Boolean(g),n.withCredentials=a,n.tech_=o,n.vhs_=o.vhs,n.sourceType_=p,n.useCueTags_=l,n.blacklistDuration=u,n.maxPlaylistRetries=v,n.enableLowInitialPlaylist=c,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:a,handleManifestRedirects:r,maxPlaylistRetries:v,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:pS,activeTrack:pS,getActiveGroup:pS,onGroupChanged:pS,onTrackChanged:pS,lastTrack_:null,logger_:fT("MediaGroups["+t+"]")}})),e}(),n.mediaSource=new(Ah().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(Lh(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(Lh(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(Lh(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=lT.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new US(t),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new BS,n.sourceUpdater_=new xS(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new jS;var y={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:m,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:s,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new Sw(i,n.vhs_,n.requestOptions_):new nw(i,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new cS(lT.mergeOptions(y,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new cS(lT.mergeOptions(y,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new RS(lT.mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),KS.forEach((function(e){n[e+"_"]=XS.bind(Lh(n),e)})),n.logger_=fT("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var b="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(b,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}Uh(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,n){var i=this.media(),r=i&&(i.id||i.uri),a=e.id||e.uri;r&&r!==a&&(this.logger_("switch media "+r+" -> "+a+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=Ah().setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Ah().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,i=e.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=i.main||r.length&&i[r[0]];for(var o in a)if(a[o].default){n={label:o};break}}if(!n)return t;var s=[];for(var d in i)if(i[d][n.label]){var l=i[d][n.label];if(l.playlists&&l.playlists.length)s.push.apply(s,l.playlists);else if(l.uri)s.push(l);else if(e.playlists.length)for(var u=0;u<e.playlists.length;u++){var c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===d&&s.push(c)}}return s.length?s:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;NT(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){WS[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,r=e.vhs,a=e.segmentLoaders,o=a.AUDIO,s=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var i=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=i.media();if(!a)return null;var o=null;a.attributes[e]&&(o=r[a.attributes[e]]);var s=Object.keys(r);if(!o)if("AUDIO"===e&&s.length>1&&qT(t.master))for(var d=0;d<s.length;d++){var l=r[s[d]];if($S(l,a)){o=l;break}}else r.main?o=r.main:1===s.length&&(o=r[s[0]]);return void 0===n?o:null!==n&&o&&o.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=GS[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.getActiveGroup(),d=a.activePlaylistLoader,l=a.lastGroup_;s&&l&&s.id===l.id||(a.lastGroup_=s,a.lastTrack_=o,qS(i,a),s&&!s.isMasterPlaylist&&(s.playlistLoader?(i.resyncLoader(),VS(s.playlistLoader,a)):d&&r.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,i=t.segmentLoaders,r=i[e],a=i.main,o=t.mediaTypes[e],s=o.activeTrack(),d=o.getActiveGroup(),l=o.activePlaylistLoader,u=o.lastTrack_;if((!u||!s||u.id!==s.id)&&(o.lastGroup_=d,o.lastTrack_=s,qS(r,o),d)){if(d.isMasterPlaylist){if(!s||!u||s.id===u.id)return;var c=t.vhs.masterPlaylistController_,p=c.selectPlaylist();if(c.media()===p)return;return o.logger_("track change. Switching master audio from "+u.id+" to "+s.id),n.pause(),a.resetEverything(),void c.fastQualityChange_(p)}if("AUDIO"===e){if(!d.playlistLoader)return a.setAudio(!0),void a.resetEverything();r.setAudio(!0),a.setAudio(!1)}l!==d.playlistLoader?(r.track&&r.track(s),r.resetEverything(),VS(d.playlistLoader,o)):VS(d.playlistLoader,o)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var d=t.AUDIO.activeGroup();if(d){var l=(d.filter((function(e){return e.default}))[0]||d[0]).id;t.AUDIO.tracks[l].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),o.setAudio(!0)):s.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var u=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};for(var c in i.audioTracks().addEventListener("change",u),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",u),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[c])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;NT(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a])n.AUDIO[a][o].uri||(i=!1);i&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),hS.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,r=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,s=e.duration,d=e.experimentalBufferBasedABR,l=e.log;if(!r)return lT.log.warn("We received no playlist to switch to. Please check your stream."),!1;var u="allowing switch "+(t&&t.id||"null")+" -> "+r.id;if(!t)return l(u+" as current playlist is not set"),!0;if(r.id===t.id)return!1;var c=Boolean(yT(n,i).length);if(!t.endList)return c||"number"!=typeof t.partTargetDuration?(l(u+" as current playlist is live"),!0):(l("not "+u+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var p=ST(n,i),h=d?kw.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:kw.MAX_BUFFER_LOW_WATER_LINE;if(s<h)return l(u+" as duration < max low water line ("+s+" < "+h+")"),!0;var f=r.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(f<g&&(!d||p<o)){var m=u+" as next bandwidth < current bandwidth ("+f+" < "+g+")";return d&&(m+=" and forwardBuffer < bufferHighWaterLine ("+p+" < "+o+")"),l(m),!0}if((!d||f>g)&&p>=a){var v=u+" as forwardBuffer >= bufferLowWaterLine ("+p+" >= "+a+")";return d&&(v+=" and next bandwidth > current bandwidth ("+f+" > "+g+")"),l(v),!0}return l("not "+u+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.switchMedia_(t,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){lT.browser.IE_VERSION||lT.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(lT.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=hS.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=mT;var a=r.end(r.length-1);return a-i<=mT&&n-a<=mT},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var i,r=this.masterPlaylistLoader_.master.playlists,a=r.filter(UT),o=1===a.length&&a[0]===n;if(1===r.length&&t!==1/0)return lT.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o);if(o){var s=!1;r.forEach((function(e){if(e!==n){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(s=!0,delete e.excludeUntil)}})),s&&(lT.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=i,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var d=this.selectPlaylist();if(!d)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=e.internal?this.logger_:lT.log.warn,u=e.message?" "+e.message:"";l((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+u+" Switching to playlist "+d.id+"."),d.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),d.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var c=d.targetDuration/2*1e3||5e3,p="number"==typeof d.lastRequest&&Date.now()-d.lastRequest<=c;return this.switchMedia_(d,"exclude",o||p)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,i=[],r="all"===e;(r||"main"===e)&&i.push(this.masterPlaylistLoader_);var a=[];(r||"audio"===e)&&a.push("AUDIO"),(r||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&i.push(t)})),["main","audio","subtitle"].forEach((function(t){var r=n[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||i.push(r)})),i.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=yT(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:hS.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var i=this.masterPlaylistLoader_.master,r=hS.Playlist.seekable(t,n,hS.Playlist.liveEdgeDelay(i,t));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=hS.Playlist.seekable(t,n,hS.Playlist.liveEdgeDelay(i,t))).length)return}var a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=lT.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o||(this.logger_("seekable updated ["+_T(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),i=hS.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var i in n)n[i].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=Zw(this.master(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=n.video||t.main.videoCodec||wf),t.main.isMuxed&&(i.video+=","+(n.audio||t.main.audioCodec||Tf)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(i.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||Tf,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),i.audio||i.video){var a,o={};if(["video","audio"].forEach((function(e){if(i.hasOwnProperty(e)&&(r=t[e].isFmp4,s=i[e],!(r?bf(s):_f(s)))){var n=t[e].isFmp4?"browser":"muxer";o[n]=o[n]||[],o[n].push(i[e]),"audio"===e&&(a=n)}var r,s})),r&&a&&this.media().attributes.AUDIO){var s=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===s&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+s+" as "+a+' does not support codec(s): "'+i.audio+'"')}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var d=[];if(["video","audio"].forEach((function(t){var n=(gf(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(gf(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&d.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+i[t]+'"')})),d.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+d.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}var l=Object.keys(o).reduce((function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+o[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:l,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(i){var r=t[i];if(-1===n.indexOf(r.id)){n.push(r.id);var a=Zw(e.master,r),o=[];!a.audio||_f(a.audio)||bf(a.audio)||o.push("audio codec "+a.audio),!a.video||_f(a.video)||bf(a.video)||o.push("video codec "+a.video),a.text&&"stpp.ttml.im1t"===a.text&&o.push("text codec "+a.text),o.length&&(r.excludeUntil=1/0,e.logger_("excluding "+r.id+" for unsupported: "+o.join(", ")))}}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],i=this.master().playlists,r=Kw(gf(e)),a=Xw(r),o=r.video&&gf(r.video)[0]||null,s=r.audio&&gf(r.audio)[0]||null;Object.keys(i).forEach((function(e){var r=i[e];if(-1===n.indexOf(r.id)&&r.excludeUntil!==1/0){n.push(r.id);var d=[],l=Zw(t.masterPlaylistLoader_.master,r),u=Xw(l);if(l.audio||l.video){if(u!==a&&d.push('codec count "'+u+'" !== "'+a+'"'),!t.sourceUpdater_.canChangeType()){var c=l.video&&gf(l.video)[0]||null,p=l.audio&&gf(l.audio)[0]||null;c&&o&&c.type.toLowerCase()!==o.type.toLowerCase()&&d.push('video codec "'+c.type+'" !== "'+o.type+'"'),p&&s&&p.type.toLowerCase()!==s.type.toLowerCase()&&d.push('audio codec "'+p.type+'" !== "'+s.type+'"')}d.length&&(r.excludeUntil=1/0,t.logger_("blacklisting "+r.id+": "+d.join(" && ")))}}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var i,r=n,a=0;a<e.segments.length;a++){var o=e.segments[a];if(i||(i=LS(t,r+o.duration/2)),i){if("cueIn"in o){i.endTime=r,i.adEndTime=r,r+=o.duration,i=null;continue}if(r<i.endTime){r+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&((i=new(Ah().VTTCue)(r,r+o.duration,o.cueOut)).adStartTime=r,i.adEndTime=r+parseFloat(o.cueOut),t.addCue(i)),"cueOutCont"in o){var s=o.cueOutCont.split("/").map(parseFloat),d=s[0],l=s[1];(i=new(Ah().VTTCue)(r,r+o.duration,"")).adStartTime=r-d,i.adEndTime=i.adStartTime+l,t.addCue(i)}r+=o.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=kw.GOAL_BUFFER_LENGTH,n=kw.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,kw.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=kw.BUFFER_LOW_WATER_LINE,n=kw.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,kw.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,kw.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?r:i)},n.bufferHighWaterLine=function(){return kw.BUFFER_HIGH_WATER_LINE},t}(lT.EventTarget),YS=function(e,t,n){var i,r,a,o=e.masterPlaylistController_,s=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(t.attributes){var d=t.attributes.RESOLUTION;this.width=d&&d.width,this.height=d&&d.height,this.bandwidth=t.attributes.BANDWIDTH}this.codecs=Zw(o.master(),t),this.playlist=t,this.id=n,this.enabled=(i=e.playlists,r=t.id,a=s,function(e){var t=i.master.playlists[r],n=MT(t),o=UT(t);return void 0===e?o:(e?delete t.disabled:t.disabled=!0,e===o||n||(a(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)})},JS=["seeking","seeked","pause","playing","error"],QS=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=fT("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},i=function(){return t.monitorCurrentTime_()},r=function(){return t.techWaiting_()},a=function(){return t.cancelTimer_()},o=this.masterPlaylistController_,s=["main","subtitle","audio"],d={};s.forEach((function(e){d[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},o[e+"SegmentLoader_"].on("appendsdone",d[e].updateend),o[e+"SegmentLoader_"].on("playlistupdate",d[e].reset),t.tech_.on(["seeked","seeking"],d[e].reset)}));var l=function(e){["main","audio"].forEach((function(n){o[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),l("off"))},this.clearSeekingAppendCheck_=function(){return l("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),l("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(JS,a),this.tech_.on("canplay",i),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",r),t.tech_.off(JS,a),t.tech_.off("canplay",i),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),s.forEach((function(e){o[e+"SegmentLoader_"].off("appendsdone",d[e].updateend),o[e+"SegmentLoader_"].off("playlistupdate",d[e].reset),t.tech_.off(["seeked","seeking"],d[e].reset)})),t.checkCurrentTimeTimeout_&&Ah().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Ah().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Ah().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],i);this[e+"Buffered_"]=i,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:TT(i)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+mT>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){var i=t.start(0);e=i+(i===t.end(0)?0:mT)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+_T(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var r=this.masterPlaylistController_.sourceUpdater_,a=this.tech_.buffered(),o=r.audioBuffer?r.audioBuffered():null,s=r.videoBuffer?r.videoBuffered():null,d=this.media(),l=d.partTargetDuration?d.partTargetDuration:2*(d.targetDuration-gT),u=[o,s],c=0;c<u.length;c++)if(u[c]&&ST(u[c],n)<l)return!1;var p=bT(a,n);return 0!==p.length&&(e=p.start(0)+mT,this.logger_("Buffered region starts ("+p.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=yT(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=bT(r,t);if(a.length>0){var o=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+o+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,i){if(void 0===i&&(i=!1),!e.length)return!1;var r=e.end(e.length-1)+mT;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,i=e.currentTime;if(t){var r;if(t.length&&n.length){var a=yT(t,i-3),o=yT(t,i),s=yT(n,i);s.length&&!o.length&&a.length&&(r={start:a.end(0),end:s.end(0)})}else bT(t,i).length||(r=this.gapFromVideoUnderflow_(t,i));return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+i),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=bT(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+gT),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return lT.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return lT.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&t-r>2)return{start:r,end:a}}return null},e}(),ek={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},tk=function e(t,n){var i=0,r=0,a=lT.mergeOptions(ek,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){r&&t.currentTime(r)},s=function(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},d=function(){return Date.now()-i<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(i=Date.now(),a.getSource.call(t,s)):void lT.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},l=function e(){t.off("loadedmetadata",o),t.off("error",d),t.off("dispose",e)};t.on("error",d),t.on("dispose",l),t.reloadSourceOnError=function(n){l(),e(t,n)}},nk="2.14.2",ik={PlaylistLoader:nw,Playlist:VT,utils:gw,STANDARD_PLAYLIST_SELECTOR:iS,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(VT.isEnabled);return eS(t,(function(e,t){return tS(e,t)})),t.filter((function(t){return!!Zw(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:iS,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Ah().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),nS(this.playlists.master,t,parseInt(Qw(this.tech_.el(),"width"),10)*i,parseInt(Qw(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:tS,comparePlaylistResolution:function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Ah().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||Ah().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:ow()};Object.keys(kw).forEach((function(e){Object.defineProperty(ik,e,{get:function(){return lT.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),kw[e]},set:function(t){lT.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?lT.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):kw[e]=t}})}));var rk="videojs-vhs",ak=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};ik.canPlaySource=function(){return lT.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ok=function(){if(!Ah().localStorage)return null;var e=Ah().localStorage.getItem(rk);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};ik.supportsNativeHls=function(){if(!xh()||!xh().createElement)return!1;var e=xh().createElement("video");return!!lT.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),ik.supportsNativeDash=!!(xh()&&xh().createElement&&lT.getTech("Html5").isSupported())&&/maybe|probably/i.test(xh().createElement("video").canPlayType("application/dash+xml")),ik.supportsTypeNatively=function(e){return"hls"===e?ik.supportsNativeHls:"dash"===e&&ik.supportsNativeDash},ik.isSupported=function(){return lT.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var sk=function(e){function t(t,n,i){var r;if(r=e.call(this,n,lT.mergeOptions(i.hls,i.vhs))||this,i.hls&&Object.keys(i.hls).length&&lT.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof i.initialBandwidth&&(r.options_.bandwidth=i.initialBandwidth),r.logger_=fT("VhsHandler"),n.options_&&n.options_.playerId){var a=lT(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return lT.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),Lh(r)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return lT.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),Lh(r)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return lT.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Lh(r)},configurable:!0}),r.player_=a}if(r.tech_=n,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(xh(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=xh().fullscreenElement||xh().webkitFullscreenElement||xh().mozFullScreenElement||xh().msFullscreenElement;t&&t.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}Uh(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=ok();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=kw.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===kw.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;if(e){var i;this.setOptions_(),this.options_.src=0===(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=ik,this.options_.sourceType=If(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&lT.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new ZS(this.options_);var r=lT.mergeOptions({liveRangeSafeTimeDelta:mT},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new QS(r),this.masterPlaylistController_.on("error",(function(){var e=lT.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var a=this.options_.experimentalBufferBasedABR?ik.movingAverageBandwidthSelector(.55):ik.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ik.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=Ah().navigator.connection||Ah().navigator.mozConnection||Ah().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){lT.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return TT(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return TT(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!Ah().localStorage)return!1;var t=ok();t=t?lT.mergeOptions(t,e):e;try{Ah().localStorage.setItem(rk,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),n=qT(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!MT(e)})).map((function(t,n){return new YS(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Ah().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a,o,s=(a=i?r.concat([i]):r,o=Object.keys(n),a.reduce((function(e,t){if(!t.contentProtection)return e;var n=o.reduce((function(e,n){var i=t.contentProtection[n];return i&&i.pssh&&(e[n]={pssh:i.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),d=[],l=[];return s.forEach((function(e){l.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),d.push(new Promise((function(n,i){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?i(e):n()}))})))})),Promise.race([Promise.all(d),Promise.race(l)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e,t,n,i=this,r=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:r&&r.media()},t=e.player,!(!(n=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=Kw(gf(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r=yf(i.video),a=yf(i.audio),o={};for(var s in e)o[s]={},a&&(o[s].audioContentType=a),r&&(o[s].videoContentType=r),t.contentProtection&&t.contentProtection[s]&&t.contentProtection[s].pssh&&(o[s].pssh=t.contentProtection[s].pssh),"string"==typeof e[s]&&(o[s].url=e[s]);return lT.mergeOptions(e,o)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=n,n&&!t.eme&&(lT.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));this.player_.tech_.on("keystatuschange",(function(e){"output-restricted"===e.status&&i.masterPlaylistController_.blacklistCurrentPlaylist({playlist:i.masterPlaylistController_.media(),message:"DRM keystatus changed to "+e.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==lT.browser.IE_VERSION&&a?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=lT.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),ak(t,n.playlists)})),this.playlists.on("mediachange",(function(){ak(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":nk,"mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return xS.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Ah().URL.revokeObjectURL&&(Ah().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,i=0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:i},s=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)}(i,a.segment);return s&&(o.programDateTime=s.toISOString()),r(null,o)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=2),mw({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(lT.getComponent("Component")),dk={name:"videojs-http-streaming",VERSION:nk,canHandleSource:function(e,t){void 0===t&&(t={});var n=lT.mergeOptions(lT.options,t);return dk.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var i=lT.mergeOptions(lT.options,n);return t.vhs=new sk(e,t,i),lT.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return lT.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=ow(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=lT.mergeOptions(lT.options,t),i=n.vhs,r=(i=void 0===i?{}:i).overrideNative,a=void 0===r?!lT.browser.IS_ANY_SAFARI:r,o=n.hls,s=(o=void 0===o?{}:o).overrideNative,d=void 0!==s&&s,l=If(e);return l&&(!ik.supportsTypeNatively(l)||d||a)?"maybe":""}};bf("avc1.4d400d,mp4a.40.2")&&lT.getTech("Html5").registerSourceHandler(dk,0),lT.VhsHandler=sk,Object.defineProperty(lT,"HlsHandler",{get:function(){return lT.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),sk},configurable:!0}),lT.VhsSourceHandler=dk,Object.defineProperty(lT,"HlsSourceHandler",{get:function(){return lT.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),dk},configurable:!0}),lT.Vhs=ik,Object.defineProperty(lT,"Hls",{get:function(){return lT.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ik},configurable:!0}),lT.use||(lT.registerComponent("Hls",ik),lT.registerComponent("Vhs",ik)),lT.options.vhs=lT.options.vhs||{},lT.options.hls=lT.options.hls||{},lT.getPlugin&&lT.getPlugin("reloadSourceOnError")||(lT.registerPlugin||lT.plugin)("reloadSourceOnError",(function(e){tk(this,e)}));const lk=lT;var uk="6.9.0",ck=function(e,t){t.isImmediatePropagationStopped=function(){return!0},t.cancelBubble=!0,t.isPropagationStopped=function(){return!0}},pk=function(e,t,n){ck(0,n),e.trigger({type:t+n.type,originalEvent:n})};function hk(e){"playing"===e.type?function(e,t){e.ads.isInAdMode()&&(e.ads.isContentResuming()?e.ads._contentEnding&&pk(e,"content",t):pk(e,"ad",t))}(this,e):"ended"===e.type?function(e,t){e.ads.isInAdMode()?e.ads.isContentResuming()?(ck(0,t),e.trigger("resumeended")):pk(e,"ad",t):e.ads._contentHasEnded||e.ads.stitchedAds()||(pk(e,"content",t),e.trigger("readyforpostroll"))}(this,e):"loadstart"===e.type||"loadeddata"===e.type||"loadedmetadata"===e.type?function(e,t){if(!("loadstart"===t.type&&!e.ads._hasThereBeenALoadStartDuringPlayerLife||"loadeddata"===t.type&&!e.ads._hasThereBeenALoadedData||"loadedmetadata"===t.type&&!e.ads._hasThereBeenALoadedMetaData))if(e.ads.inAdBreak())pk(e,"ad",t);else{if(e.currentSrc()!==e.ads.contentSrc)return;pk(e,"content",t)}}(this,e):"play"===e.type?function(e,t){e.ads.inAdBreak()?pk(e,"ad",t):e.ads.isContentResuming()&&pk(e,"content",t)}(this,e):this.ads.isInAdMode()&&(this.ads.isContentResuming()?pk(this,"content",e):pk(this,"ad",e))}var fk={},gk=function(){!function(e){if(lk.dom.isInFrame()&&"function"!=typeof Ah().__tcfapi){for(var t,n=Ah(),i={};n;){try{if(n.frames.__tcfapiLocator){t=n;break}}catch(e){}if(n===Ah().top)break;n=n.parent}if(!t)return;Ah().__tcfapi=function(e,n,r,a){var o=Math.random()+"",s={__tcfapiCall:{command:e,parameter:a,version:n,callId:o}};i[o]=r,t.postMessage(s,"*")},Ah().addEventListener("message",(function(e){var t={};try{t="string"==typeof e.data?JSON.parse(e.data):e.data}catch(e){}var n=t.__tcfapiReturn;n&&"function"==typeof i[n.callId]&&(i[n.callId](n.returnValue,n.success),i[n.callId]=null)}),!1)}}(),"function"==typeof Ah().__tcfapi&&Ah().__tcfapi("addEventListener",2,(function(e,t){t&&(fk=e)}))},mk=function(e,t){return t?encodeURIComponent(e):e},vk=function(e,t,n){if(e&&e[n])for(var i=e[n],r=Object.keys(i),a=0;a<r.length;a++)t["{mediainfo."+n+"."+r[a]+"}"]=i[r[a]]};function yk(e,t,n){var i=this,r={};e=e.replace(/{([^}=]+)=([^}]+)}/g,(function(e,t,n){return r["{"+t+"}"]=n,"{"+t+"}"})),void 0===t&&(t=!1);var a={};for(var o in void 0!==n&&(a=n),a["{player.id}"]=this.options_["data-player"]||this.id_,a["{player.height}"]=this.currentHeight(),a["{player.width}"]=this.currentWidth(),a["{mediainfo.id}"]=this.mediainfo?this.mediainfo.id:"",a["{mediainfo.name}"]=this.mediainfo?this.mediainfo.name:"",a["{mediainfo.duration}"]=this.mediainfo?this.mediainfo.duration:"",a["{player.duration}"]=this.duration(),a["{player.pageUrl}"]=lk.dom.isInFrame()?xh().referrer:Ah().location.href,a["{playlistinfo.id}"]=this.playlistinfo?this.playlistinfo.id:"",a["{playlistinfo.name}"]=this.playlistinfo?this.playlistinfo.name:"",a["{timestamp}"]=(new Date).getTime(),a["{document.referrer}"]=xh().referrer,a["{window.location.href}"]=Ah().location.href,a["{random}"]=Math.floor(1e12*Math.random()),["description","tags","reference_id","ad_keys"].forEach((function(e){i.mediainfo&&i.mediainfo[e]?a["{mediainfo."+e+"}"]=i.mediainfo[e]:r["{mediainfo."+e+"}"]?a["{mediainfo."+e+"}"]=r["{mediainfo."+e+"}"]:a["{mediainfo."+e+"}"]=""})),vk(this.mediainfo,a,"custom_fields"),vk(this.mediainfo,a,"customFields"),Object.keys(fk).forEach((function(e){a["{tcf."+e+"}"]=fk[e]})),a["{tcf.gdprAppliesInt}"]=fk.gdprApplies?1:0,a)e=e.split(o).join(mk(a[o],t));for(var s in e=e.replace(/{pageVariable\.([^}]+)}/g,(function(e,n){for(var i,a=Ah(),o=n.split("."),s=0;s<o.length;s++)s===o.length-1?i=a[o[s]]:a=a[o[s]];var d=typeof i;return null===i?"null":void 0===i?r["{pageVariable."+n+"}"]?r["{pageVariable."+n+"}"]:(lk.log.warn('Page variable "'+n+'" not found'),""):"string"!==d&&"number"!==d&&"boolean"!==d?(lk.log.warn('Page variable "'+n+'" is not a supported type'),""):mk(String(i),t)})),r)e=e.replace(s,r[s]);return e}var bk={processMetadataTracks:function(e,t){for(var n=e.textTracks(),i=function(n){"metadata"===n.kind&&(e.ads.cueTextTracks.setMetadataTrackMode(n),t(e,n))},r=0;r<n.length;r++)i(n[r]);n.addEventListener("addtrack",(function(e){i(e.track)}))},setMetadataTrackMode:function(e){},getSupportedAdCue:function(e,t){return t},isSupportedAdCue:function(e,t){return!0},getCueId:function(e,t){return t.id}},_k=function(e,t){return void 0!==t&&e.ads.includedCues[t]},Tk=function(e,t){void 0!==t&&""!==t&&(e.ads.includedCues[t]=!0)};function wk(){!1!==this.ads._shouldBlockPlay&&(this.paused()||(this.ads.debug("Playback was canceled by cancelContentPlay"),this.pause()),this.ads._cancelledPlay=!0)}bk.processAdTrack=function(e,t,n,i){e.ads.includedCues={};for(var r=0;r<t.length;r++){var a=t[r],o=this.getSupportedAdCue(e,a);if(!this.isSupportedAdCue(e,a))return void lk.log.warn("Skipping as this is not a supported ad cue.",a);var s=this.getCueId(e,a),d=a.startTime;if(_k(e,s))return void lk.log("Skipping ad already seen with ID "+s);i&&i(e,o,s,d),n(e,o,s,d),Tk(e,s)}};var Sk={},kk=lk;Sk.isMiddlewareMediatorSupported=function(){return!kk.browser.IS_IOS&&!kk.browser.IS_ANDROID&&!!(kk.use&&kk.middleware&&kk.middleware.TERMINATOR)},Sk.playMiddleware=function(e){return{setSource:function(e,t){t(null,e)},callPlay:function(){if(e.ads&&!0===e.ads._shouldBlockPlay)return e.ads.debug("Using playMiddleware to block content playback"),e.ads._playBlocked=!0,kk.middleware.TERMINATOR},play:function(t,n){e.ads&&e.ads._playBlocked&&t?(e.ads.debug("Play call to Tech was terminated."),e.trigger("play"),e.addClass("vjs-has-started"),e.ads._playBlocked=!1):n&&n.catch&&n.catch((function(t){"NotAllowedError"!==t.name||lk.browser.IS_SAFARI||e.trigger("pause")}))}}},Sk.testHook=function(e){kk=e};var Ik=Sk.playMiddleware,Ck=Sk.isMiddlewareMediatorSupported,Ek=function(){function e(){}return e.getState=function(t){if(t)return e.states_&&e.states_[t]?e.states_[t]:void 0},e.registerState=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal state name, "'+t+'"; must be a non-empty string.');return e.states_||(e.states_={}),e.states_[t]=n,n},e}(),Ak=function(){function e(e){this.player=e}e._getName=function(){return"Anonymous State"};var t=e.prototype;return t.transitionTo=function(e){var t=this.player;this.cleanup(t);var n=new e(t);t.ads._state=n,t.ads.debug(this.constructor._getName()+" -> "+n.constructor._getName());for(var i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];n.init.apply(n,[t].concat(r))},t.init=function(){},t.cleanup=function(){},t.onPlay=function(){},t.onPlaying=function(){},t.onEnded=function(){},t.onAdEnded=function(){},t.onAdsReady=function(){lk.log.warn("Unexpected adsready event")},t.onAdsError=function(){},t.onAdsCanceled=function(){},t.onAdTimeout=function(){},t.onAdStarted=function(){},t.onContentChanged=function(){},t.onContentResumed=function(){},t.onReadyForPostroll=function(){lk.log.warn("Unexpected readyforpostroll event")},t.onNoPreroll=function(){},t.onNoPostroll=function(){},t.startLinearAdMode=function(){lk.log.warn("Unexpected startLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.endLinearAdMode=function(){lk.log.warn("Unexpected endLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.skipLinearAdMode=function(){lk.log.warn("Unexpected skipLinearAdMode invocation (State via "+this.constructor._getName()+")")},t.isAdState=function(){throw new Error("isAdState unimplemented for "+this.constructor._getName())},t.isWaitingForAdBreak=function(){return!1},t.isContentResuming=function(){return!1},t.inAdBreak=function(){return!1},t.handleEvent=function(e){var t=this.player;"play"===e?this.onPlay(t):"adsready"===e?this.onAdsReady(t):"adserror"===e?this.onAdsError(t):"adscanceled"===e?this.onAdsCanceled(t):"adtimeout"===e?this.onAdTimeout(t):"ads-ad-started"===e?this.onAdStarted(t):"contentchanged"===e?this.onContentChanged(t):"contentresumed"===e?this.onContentResumed(t):"readyforpostroll"===e?this.onReadyForPostroll(t):"playing"===e?this.onPlaying(t):"ended"===e?this.onEnded(t):"nopreroll"===e?this.onNoPreroll(t):"nopostroll"===e?this.onNoPostroll(t):"adended"===e&&this.onAdEnded(t)},e}();function Pk(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}Ek.registerState("State",Ak);var xk=function(e){function t(t){var n;return(n=e.call(this,t)||this).contentResuming=!1,n.waitingForAdBreak=!1,n}Pk(t,e);var n=t.prototype;return n.isAdState=function(){return!0},n.onPlaying=function(){var e=Ek.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.onContentResumed=function(){var e=Ek.getState("ContentPlayback");this.contentResuming&&this.transitionTo(e)},n.isWaitingForAdBreak=function(){return this.waitingForAdBreak},n.isContentResuming=function(){return this.contentResuming},n.inAdBreak=function(){return!0===this.player.ads._inLinearAdMode},t}(Ak);Ek.registerState("AdState",xk);var Ok=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e);var n=t.prototype;return n.isAdState=function(){return!1},n.onContentChanged=function(e){var t=Ek.getState("BeforePreroll"),n=Ek.getState("Preroll");e.ads.debug("Received contentchanged event (ContentState)"),e.paused()?this.transitionTo(t):(this.transitionTo(n,!1),e.pause(),e.ads._pausedOnContentupdate=!0)},t}(Ak);Ek.registerState("ContentState",Ok);var Dk,Rk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"AdsDone"};var n=t.prototype;return n.init=function(e){e.ads._contentHasEnded=!0,e.trigger("ended")},n.startLinearAdMode=function(){lk.log.warn("Unexpected startLinearAdMode invocation (AdsDone)")},t}(Ek.getState("ContentState"));Ek.registerState("AdsDone",Rk);var Lk=function(e){e.ads.debug("Starting ad break"),e.ads._inLinearAdMode=!0,e.trigger("adstart"),e.ads.shouldTakeSnapshots()&&(e.ads.snapshot=function(e){var t;t=lk.browser.IS_IOS&&e.ads.isLive(e)&&e.seekable().length>0?e.currentTime()-e.seekable().end(0):e.currentTime();var n=e.$(".vjs-tech"),i=e.textTracks?e.textTracks():[],r=[],a={ended:e.ended(),currentSrc:e.currentSrc(),sources:e.currentSources(),src:e.tech_.src(),currentTime:t,type:e.currentType()};n&&(a.style=n.getAttribute("style"));for(var o=0;o<i.length;o++){var s=i[o];r.push({track:s,mode:s.mode}),s.mode="disabled"}return a.suppressedTracks=r,a}(e)),e.ads.shouldPlayContentBehindAd(e)&&(e.ads.preAdVolume_=e.volume(),e.volume(0)),e.addClass("vjs-ad-playing"),e.hasClass("vjs-live")&&e.removeClass("vjs-live"),e.ads.removeNativePoster()},Mk=function(e,t){e.ads.debug("Ending ad break"),void 0===t&&(t=function(){}),e.ads.adType=null,e.ads._inLinearAdMode=!1,e.trigger("adend"),e.removeClass("vjs-ad-playing"),e.ads.isLive(e)&&e.addClass("vjs-live"),e.ads.shouldTakeSnapshots()?function(e,t){var n=e.ads.snapshot;if(void 0===t&&(t=function(){}),!0===e.ads.disableNextSnapshotRestore)return e.ads.disableNextSnapshotRestore=!1,delete e.ads.snapshot,void t();var i,r=e.$(".vjs-tech"),a=20,o=n.suppressedTracks,s=function(){for(var e=0;e<o.length;e++)(i=o[e]).track.mode=i.mode},d=function(){var t;if(lk.browser.IS_IOS&&e.ads.isLive(e)){if(n.currentTime<0&&(t=e.seekable().length>0?e.seekable().end(0)+n.currentTime:e.currentTime(),e.currentTime(t)),e.paused()){var i=e.play();i&&i.catch&&i.catch((function(e){lk.log.warn("Play promise rejected in IOS snapshot resume",e)}))}}else if(n.ended)e.currentTime(e.duration());else{e.currentTime(n.currentTime);var r=e.play();r&&r.catch&&r.catch((function(e){lk.log.warn("Play promise rejected in snapshot resume",e)}))}e.ads.shouldRemoveAutoplay_&&(e.autoplay(!1),e.ads.shouldRemoveAutoplay_=!1)},l=function t(){if(e.off("contentcanplay",t),Dk&&e.clearTimeout(Dk),(r=e.el().querySelector(".vjs-tech")).readyState>1)return d();if(void 0===r.seekable)return d();if(r.seekable.length>0)return d();if(a--)e.setTimeout(t,50);else try{d()}catch(e){lk.log.warn("Failed to resume the content after an advertisement",e)}};if("style"in n&&r.setAttribute("style",n.style||""),e.ads.videoElementRecycled())e.one("resumeended",(function(){delete e.ads.snapshot,t()})),e.one("contentloadedmetadata",s),lk.browser.IS_IOS&&!e.autoplay()&&(e.autoplay(!0),e.ads.shouldRemoveAutoplay_=!0),e.src(n.sources),e.one("contentcanplay",l),Dk=e.setTimeout(l,2e3);else{if(s(),!e.ended()){var u=e.play();u&&u.catch&&u.catch((function(e){lk.log.warn("Play promise rejected in snapshot restore",e)}))}delete e.ads.snapshot,t()}}(e,t):(e.volume(e.ads.preAdVolume_),t())},Uk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"Preroll"};var n=t.prototype;return n.init=function(e,t,n){if(this.waitingForAdBreak=!0,e.addClass("vjs-ad-loading"),n||e.ads.nopreroll_)return this.resumeAfterNoPreroll(e);var i=e.ads.settings.timeout;"number"==typeof e.ads.settings.prerollTimeout&&(i=e.ads.settings.prerollTimeout),this._timeout=e.setTimeout((function(){e.trigger("adtimeout")}),i),t?this.handleAdsReady():this.adsReady=!1},n.onAdsReady=function(e){e.ads.inAdBreak()?lk.log.warn("Unexpected adsready event (Preroll)"):(e.ads.debug("Received adsready event (Preroll)"),this.handleAdsReady())},n.handleAdsReady=function(){this.adsReady=!0,this.readyForPreroll()},n.afterLoadStart=function(e){var t=this.player;t.ads._hasThereBeenALoadStartDuringPlayerLife?e():(t.ads.debug("Waiting for loadstart..."),t.one("loadstart",(function(){t.ads.debug("Received loadstart event"),e()})))},n.noPreroll=function(){var e=this;this.afterLoadStart((function(){e.player.ads.debug("Skipping prerolls due to nopreroll event (Preroll)"),e.resumeAfterNoPreroll(e.player)}))},n.readyForPreroll=function(){var e=this.player;this.afterLoadStart((function(){e.ads.debug("Triggered readyforpreroll event (Preroll)"),e.trigger("readyforpreroll")}))},n.onAdsCanceled=function(e){var t=this;e.ads.debug("adscanceled (Preroll)"),this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.onAdsError=function(e){var t=this;lk.log("adserror (Preroll)"),this.inAdBreak()?e.ads.endLinearAdMode():this.afterLoadStart((function(){t.resumeAfterNoPreroll(e)}))},n.startLinearAdMode=function(){var e=this.player;!this.adsReady||e.ads.inAdBreak()||this.isContentResuming()?lk.log.warn("Unexpected startLinearAdMode invocation (Preroll)"):(this.clearTimeout(e),e.ads.adType="preroll",this.waitingForAdBreak=!1,Lk(e),e.ads._shouldBlockPlay=!1)},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(e.removeClass("vjs-ad-loading"),e.addClass("vjs-ad-content-resuming"),this.contentResuming=!0,Mk(e))},n.skipLinearAdMode=function(){var e=this,t=this.player;t.ads.inAdBreak()||this.isContentResuming()?lk.log.warn("Unexpected skipLinearAdMode invocation"):this.afterLoadStart((function(){t.trigger("adskip"),t.ads.debug("skipLinearAdMode (Preroll)"),e.resumeAfterNoPreroll(t)}))},n.onAdTimeout=function(e){var t=this;this.afterLoadStart((function(){e.ads.debug("adtimeout (Preroll)"),t.resumeAfterNoPreroll(e)}))},n.onNoPreroll=function(e){e.ads.inAdBreak()||this.isContentResuming()?lk.log.warn("Unexpected nopreroll event (Preroll)"):this.noPreroll()},n.resumeAfterNoPreroll=function(e){if(this.contentResuming=!0,e.ads._shouldBlockPlay=!1,this.cleanupPartial(e),e.ads._playRequested||e.ads._pausedOnContentupdate)if(e.paused()){e.ads.debug("resumeAfterNoPreroll: attempting to resume playback (Preroll)");var t=e.play();t&&t.then&&t.then(null,(function(e){}))}else e.ads.debug("resumeAfterNoPreroll: already playing (Preroll)"),e.trigger("play"),e.trigger("playing")},n.cleanup=function(e){e.ads._hasThereBeenALoadStartDuringPlayerLife||lk.log.warn("Leaving Preroll state before loadstart event can cause issues."),this.cleanupPartial(e)},n.cleanupPartial=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming"),this.clearTimeout(e)},n.clearTimeout=function(e){e.clearTimeout(this._timeout),this._timeout=null},t}(Ek.getState("AdState"));Ek.registerState("Preroll",Uk);var jk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"BeforePreroll"};var n=t.prototype;return n.init=function(e){this.adsReady=!1,this.shouldResumeToContent=!1,e.ads._shouldBlockPlay=!e.ads.settings.allowVjsAutoplay||!e.autoplay()},n.onAdsReady=function(e){e.ads.debug("Received adsready event (BeforePreroll)"),this.adsReady=!0},n.onPlay=function(e){var t=Ek.getState("Preroll");e.ads.debug("Received play event (BeforePreroll)"),this.transitionTo(t,this.adsReady,this.shouldResumeToContent)},n.onAdsCanceled=function(e){e.ads.debug("adscanceled (BeforePreroll)"),this.shouldResumeToContent=!0},n.onAdsError=function(){this.player.ads.debug("adserror (BeforePreroll)"),this.shouldResumeToContent=!0},n.onNoPreroll=function(){this.player.ads.debug("Skipping prerolls due to nopreroll event (BeforePreroll)"),this.shouldResumeToContent=!0},n.skipLinearAdMode=function(){var e=this.player;e.trigger("adskip"),e.ads.debug("skipLinearAdMode (BeforePreroll)"),this.shouldResumeToContent=!0},n.onContentChanged=function(){this.init(this.player)},t}(Ek.getState("ContentState"));Ek.registerState("BeforePreroll",jk);var Nk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"Midroll"};var n=t.prototype;return n.init=function(e){e.ads.adType="midroll",Lk(e),e.addClass("vjs-ad-loading")},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this.player;this.inAdBreak()&&(this.contentResuming=!0,e.addClass("vjs-ad-content-resuming"),e.removeClass("vjs-ad-loading"),Mk(e))},n.onAdsError=function(e){this.inAdBreak()&&e.ads.endLinearAdMode()},n.cleanup=function(e){e.removeClass("vjs-ad-loading"),e.removeClass("vjs-ad-content-resuming")},t}(Ek.getState("AdState"));Ek.registerState("Midroll",Nk);var Bk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"Postroll"};var n=t.prototype;return n.init=function(e){if(this.waitingForAdBreak=!0,e.ads._contentEnding=!0,e.ads.nopostroll_){this.resumeContent(e);var t=Ek.getState("AdsDone");this.transitionTo(t)}else{e.addClass("vjs-ad-loading");var n=e.ads.settings.timeout;"number"==typeof e.ads.settings.postrollTimeout&&(n=e.ads.settings.postrollTimeout),this._postrollTimeout=e.setTimeout((function(){e.trigger("adtimeout")}),n)}},n.startLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?lk.log.warn("Unexpected startLinearAdMode invocation (Postroll)"):(e.ads.adType="postroll",e.clearTimeout(this._postrollTimeout),this.waitingForAdBreak=!1,Lk(e))},n.onAdStarted=function(e){e.removeClass("vjs-ad-loading")},n.endLinearAdMode=function(){var e=this,t=this.player,n=Ek.getState("AdsDone");this.inAdBreak()&&(t.removeClass("vjs-ad-loading"),this.resumeContent(t),Mk(t,(function(){e.transitionTo(n)})))},n.skipLinearAdMode=function(){var e=this.player;e.ads.inAdBreak()||this.isContentResuming()?lk.log.warn("Unexpected skipLinearAdMode invocation"):(e.ads.debug("Postroll abort (skipLinearAdMode)"),e.trigger("adskip"),this.abort(e))},n.onAdTimeout=function(e){e.ads.debug("Postroll abort (adtimeout)"),this.abort(e)},n.onAdsError=function(e){e.ads.debug("Postroll abort (adserror)"),e.ads.inAdBreak()?e.ads.endLinearAdMode():this.abort(e)},n.onContentChanged=function(e){if(this.isContentResuming()){var t=Ek.getState("BeforePreroll");this.transitionTo(t)}else if(!this.inAdBreak()){var n=Ek.getState("Preroll");this.transitionTo(n)}},n.onNoPostroll=function(e){this.isContentResuming()||this.inAdBreak()?lk.log.warn("Unexpected nopostroll event (Postroll)"):this.abort(e)},n.resumeContent=function(e){this.contentResuming=!0,e.addClass("vjs-ad-content-resuming")},n.abort=function(e){var t=Ek.getState("AdsDone");this.resumeContent(e),e.removeClass("vjs-ad-loading"),this.transitionTo(t)},n.cleanup=function(e){e.removeClass("vjs-ad-content-resuming"),e.clearTimeout(this._postrollTimeout),e.ads._contentEnding=!1},t}(Ek.getState("AdState"));Ek.registerState("Postroll",Bk);var Fk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"ContentPlayback"};var n=t.prototype;return n.init=function(e){e.ads._shouldBlockPlay=!1},n.onAdsReady=function(e){e.ads.debug("Received adsready event (ContentPlayback)"),e.ads.nopreroll_||(e.ads.debug("Triggered readyforpreroll event (ContentPlayback)"),e.trigger("readyforpreroll"))},n.onReadyForPostroll=function(e){var t=Ek.getState("Postroll");e.ads.debug("Received readyforpostroll event"),this.transitionTo(t)},n.startLinearAdMode=function(){var e=Ek.getState("Midroll");this.transitionTo(e)},t}(Ek.getState("ContentState"));Ek.registerState("ContentPlayback",Fk);var qk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"StitchedContentPlayback"};var n=t.prototype;return n.init=function(){this.player.ads._shouldBlockPlay=!1},n.onContentChanged=function(){this.player.ads.debug("Received contentchanged event ("+this.constructor._getName()+")")},n.startLinearAdMode=function(){var e=Ek.getState("StitchedAdRoll");this.transitionTo(e)},t}(Ek.getState("ContentState"));Ek.registerState("StitchedContentPlayback",qk);var Vk=function(e){function t(){return e.apply(this,arguments)||this}Pk(t,e),t._getName=function(){return"StitchedAdRoll"};var n=t.prototype;return n.init=function(){this.waitingForAdBreak=!1,this.contentResuming=!1,this.player.ads.adType="stitched",Lk(this.player)},n.onPlaying=function(){},n.onContentResumed=function(){},n.onAdEnded=function(){this.endLinearAdMode(),this.player.trigger("ended")},n.endLinearAdMode=function(){var e=Ek.getState("StitchedContentPlayback");Mk(this.player),this.transitionTo(e)},t}(Ek.getState("AdState"));Ek.registerState("StitchedAdRoll",Vk);var Hk=Sk.isMiddlewareMediatorSupported,zk=lk.getTech("Html5").Events,Wk={timeout:5e3,prerollTimeout:void 0,postrollTimeout:void 0,debug:!1,stitchedAds:!1,contentIsLive:void 0,liveCuePoints:!0,allowVjsAutoplay:lk.options.normalizeAutoplay||!1},$k=function(e){var t=this,n=lk.mergeOptions(Wk,e),i=[];zk.concat(["firstplay","loadedalldata"]).forEach((function(e){-1===i.indexOf(e)&&i.push(e)})),t.on(i,hk),Hk()||function(e,t){t&&lk.log("Using cancelContentPlay to block content playback"),e.on("play",wk)}(t,n.debug),t.setTimeout((function(){t.ads._hasThereBeenALoadStartDuringPlayerLife||""===t.src()||lk.log.error("videojs-contrib-ads has not seen a loadstart event 5 seconds after being initialized, but a source is present. This indicates that videojs-contrib-ads was initialized too late. It must be initialized immediately after video.js in the same tick. As a result, some ads will not play and some media events will be incorrect. For more information, see http://videojs.github.io/videojs-contrib-ads/integrator/getting-started.html")}),5e3),t.on("ended",(function(){t.hasClass("vjs-has-started")||t.addClass("vjs-has-started")})),t.on("contenttimeupdate",(function(){t.removeClass("vjs-waiting")})),t.on(["addurationchange","adcanplay"],(function(){if(!t.ads.settings.stitchedAds&&!t.hasStarted()&&(!t.ads.snapshot||t.currentSrc()!==t.ads.snapshot.currentSrc)&&t.ads.inAdBreak()){var e=t.play();e&&e.catch&&e.catch((function(e){lk.log.warn("Play promise rejected when playing ad",e)}))}})),t.on("nopreroll",(function(){t.ads.debug("Received nopreroll event"),t.ads.nopreroll_=!0})),t.on("nopostroll",(function(){t.ads.debug("Received nopostroll event"),t.ads.nopostroll_=!0})),t.on("playing",(function(){t.ads._cancelledPlay=!1,t.ads._pausedOnContentupdate=!1})),t.on("play",(function(){t.ads._playRequested=!0})),t.one("loadstart",(function(){t.ads._hasThereBeenALoadStartDuringPlayerLife=!0})),t.on("loadeddata",(function(){t.ads._hasThereBeenALoadedData=!0})),t.on("loadedmetadata",(function(){t.ads._hasThereBeenALoadedMetaData=!0})),t.ads=function(e){return{disableNextSnapshotRestore:!1,_contentEnding:!1,_contentHasEnded:!1,_hasThereBeenALoadStartDuringPlayerLife:!1,_hasThereBeenALoadedData:!1,_hasThereBeenALoadedMetaData:!1,_inLinearAdMode:!1,_shouldBlockPlay:!1,_playBlocked:!1,_playRequested:!1,adType:null,VERSION:uk,reset:function(){e.ads.disableNextSnapshotRestore=!1,e.ads._contentEnding=!1,e.ads._contentHasEnded=!1,e.ads.snapshot=null,e.ads.adType=null,e.ads._hasThereBeenALoadedData=!1,e.ads._hasThereBeenALoadedMetaData=!1,e.ads._cancelledPlay=!1,e.ads._shouldBlockPlay=!1,e.ads._playBlocked=!1,e.ads.nopreroll_=!1,e.ads.nopostroll_=!1,e.ads._playRequested=!1},startLinearAdMode:function(){e.ads._state.startLinearAdMode()},endLinearAdMode:function(){e.ads._state.endLinearAdMode()},skipLinearAdMode:function(){e.ads._state.skipLinearAdMode()},stitchedAds:function(e){return void 0!==e&&(lk.log.warn("Using player.ads.stitchedAds() as a setter is deprecated, it should be set as an option upon initialization of contrib-ads."),this.settings.stitchedAds=!!e),this.settings.stitchedAds},videoElementRecycled:function(){if(e.ads.shouldPlayContentBehindAd(e))return!1;if(!this.snapshot)throw new Error("You cannot use videoElementRecycled while there is no snapshot.");var t=e.tech_.src()!==this.snapshot.src,n=e.currentSrc()!==this.snapshot.currentSrc;return t||n},isLive:function(t){return void 0===t&&(t=e),"boolean"==typeof t.ads.settings.contentIsLive?t.ads.settings.contentIsLive:t.duration()===1/0||"8"===lk.browser.IOS_VERSION&&0===t.duration()},shouldPlayContentBehindAd:function(t){if(void 0===t&&(t=e),t)return!!t.ads.settings.liveCuePoints&&!lk.browser.IS_IOS&&!lk.browser.IS_ANDROID&&t.duration()===1/0;throw new Error("shouldPlayContentBehindAd requires a player as a param")},shouldTakeSnapshots:function(t){return void 0===t&&(t=e),!this.shouldPlayContentBehindAd(t)&&!this.stitchedAds()},isInAdMode:function(){return this._state.isAdState()},isWaitingForAdBreak:function(){return this._state.isWaitingForAdBreak()},isContentResuming:function(){return this._state.isContentResuming()},isAdPlaying:function(){return this._state.inAdBreak()},inAdBreak:function(){return this._state.inAdBreak()},removeNativePoster:function(){var t=e.$(".vjs-tech");t&&t.removeAttribute("poster")},debug:function(){if(this.settings.debug){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];1===t.length&&"string"==typeof t[0]?lk.log("ADS: "+t[0]):lk.log.apply(lk,["ADS:"].concat(t))}}}}(t),t.ads.settings=n,n.stitchedAds=!!n.stitchedAds,n.stitchedAds?t.ads._state=new(Ek.getState("StitchedContentPlayback"))(t):t.ads._state=new(Ek.getState("BeforePreroll"))(t),t.ads._state.init(t),t.ads.cueTextTracks=bk,t.ads.adMacroReplacement=yk.bind(t),function(e){e.ads.contentSrc=e.currentSrc(),e.ads._seenInitialLoadstart=!1,e.on("loadstart",(function(){if(!e.ads.inAdBreak()){var t=e.currentSrc();t!==e.ads.contentSrc&&(e.ads._seenInitialLoadstart&&e.trigger({type:"contentchanged"}),e.trigger({type:"contentupdate",oldValue:e.ads.contentSrc,newValue:t}),e.ads.contentSrc=t),e.ads._seenInitialLoadstart=!0}}))}(t),t.on("contentchanged",t.ads.reset);var r=function(){var e=t.textTracks();if(!t.ads.shouldPlayContentBehindAd(t)&&t.ads.inAdBreak()&&t.tech_.featuresNativeTextTracks&&lk.browser.IS_IOS&&!Array.isArray(t.textTracks()))for(var n=0;n<e.length;n++){var i=e[n];"showing"===i.mode&&(i.mode="disabled")}};t.ready((function(){t.textTracks().addEventListener("change",r)})),t.on(["play","playing","ended","adsready","adscanceled","adskip","adserror","adtimeout","adended","ads-ad-started","contentchanged","dispose","contentresumed","readyforpostroll","nopreroll","nopostroll"],(function(e){t.ads._state.handleEvent(e.type)})),t.on("dispose",(function(){t.ads.reset(),t.textTracks().removeEventListener("change",r)})),gk(),t.ads.listenToTcf=gk};$k.VERSION=uk,function(e){!function(){if(lk.getPlugin)return Boolean(lk.getPlugin("ads"));var e=lk.getComponent("Player");return Boolean(e&&e.prototype.ads)}()&&((lk.registerPlugin||lk.plugin)("ads",e),Ck()&&!lk.usingContribAdsMiddleware_&&(lk.use("*",Ik),lk.usingContribAdsMiddleware_=!0,lk.log.debug("Play middleware has been registered with videojs")))}($k);for(var Gk,Kk="7.20.2",Xk={},Zk=function(e,t){return Xk[e]=Xk[e]||[],t&&(Xk[e]=Xk[e].concat(t)),Xk[e]},Yk=function(e,t){var n=Zk(e).indexOf(t);return!(n<=-1||(Xk[e]=Xk[e].slice(),Xk[e].splice(n,1),0))},Jk={prefixed:!0},Qk=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],eI=Qk[0],tI=0;tI<Qk.length;tI++)if(Qk[tI][1]in xh()){Gk=Qk[tI];break}if(Gk){for(var nI=0;nI<Gk.length;nI++)Jk[eI[nI]]=Gk[nI];Jk.prefixed=Gk[0]!==eI[0]}var iI=[],rI=function e(t){var n,i="info",r=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n("log",i,t)};return n=function(e,t){return function(n,i,r){var a=t.levels[i],o=new RegExp("^("+a+")$");if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(e+":"),iI){iI.push([].concat(r));var s=iI.length-1e3;iI.splice(0,s>0?s:0)}if(Ah().console){var d=Ah().console[n];d||"debug"!==n||(d=Ah().console.info||Ah().console.log),d&&a&&o.test(n)&&d[Array.isArray(r)?"apply":"call"](Ah().console,r)}}}(t,r),r.createLogger=function(n){return e(t+": "+n)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(e){if("string"==typeof e){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');i=e}return i},(r.history=function(){return iI?[].concat(iI):[]}).filter=function(e){return(iI||[]).filter((function(t){return new RegExp(".*"+e+".*").test(t[0])}))},r.history.clear=function(){iI&&(iI.length=0)},r.history.disable=function(){null!==iI&&(iI.length=0,iI=null)},r.history.enable=function(){null===iI&&(iI=[])},r.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("error",i,t)},r.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("warn",i,t)},r.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n("debug",i,t)},r}("VIDEOJS"),aI=rI.createLogger,oI=Object.prototype.toString,sI=function(e){return uI(e)?Object.keys(e):[]};function dI(e,t){sI(e).forEach((function(n){return t(e[n],n)}))}function lI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Object.assign?Oh.apply(void 0,[e].concat(n)):(n.forEach((function(t){t&&dI(t,(function(t,n){e[n]=t}))})),e)}function uI(e){return!!e&&"object"==typeof e}function cI(e){return uI(e)&&"[object Object]"===oI.call(e)&&e.constructor===Object}function pI(e,t){if(!e||!t)return"";if("function"==typeof Ah().getComputedStyle){var n;try{n=Ah().getComputedStyle(e)}catch(e){return""}return n?n.getPropertyValue(t)||n[t]:""}return""}var hI=Ah().navigator&&Ah().navigator.userAgent||"",fI=/AppleWebKit\/([\d.]+)/i.exec(hI),gI=fI?parseFloat(fI.pop()):null,mI=/iPod/i.test(hI),vI=function(){var e=hI.match(/OS (\d+)_/i);return e&&e[1]?e[1]:null}(),yI=/Android/i.test(hI),bI=function(){var e=hI.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),n=e[2]&&parseFloat(e[2]);return t&&n?parseFloat(e[1]+"."+e[2]):t||null}(),_I=yI&&bI<5&&gI<537,TI=/Firefox/i.test(hI),wI=/Edg/i.test(hI),SI=!wI&&(/Chrome/i.test(hI)||/CriOS/i.test(hI)),kI=function(){var e=hI.match(/(Chrome|CriOS)\/(\d+)/);return e&&e[2]?parseFloat(e[2]):null}(),II=function(){var e=/MSIE\s(\d+)\.\d/.exec(hI),t=e&&parseFloat(e[1]);return!t&&/Trident\/7.0/i.test(hI)&&/rv:11.0/.test(hI)&&(t=11),t}(),CI=/Safari/i.test(hI)&&!SI&&!yI&&!wI,EI=/Windows/i.test(hI),AI=Boolean(UI()&&("ontouchstart"in Ah()||Ah().navigator.maxTouchPoints||Ah().DocumentTouch&&Ah().document instanceof Ah().DocumentTouch)),PI=/iPad/i.test(hI)||CI&&AI&&!/iPhone/i.test(hI),xI=/iPhone/i.test(hI)&&!PI,OI=xI||PI||mI,DI=(CI||OI)&&!SI,RI=Object.freeze({__proto__:null,IS_IPOD:mI,IOS_VERSION:vI,IS_ANDROID:yI,ANDROID_VERSION:bI,IS_NATIVE_ANDROID:_I,IS_FIREFOX:TI,IS_EDGE:wI,IS_CHROME:SI,CHROME_VERSION:kI,IE_VERSION:II,IS_SAFARI:CI,IS_WINDOWS:EI,TOUCH_ENABLED:AI,IS_IPAD:PI,IS_IPHONE:xI,IS_IOS:OI,IS_ANY_SAFARI:DI});function LI(e){return"string"==typeof e&&Boolean(e.trim())}function MI(e){if(e.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function UI(){return xh()===Ah().document}function jI(e){return uI(e)&&1===e.nodeType}function NI(){try{return Ah().parent!==Ah().self}catch(e){return!0}}function BI(e){return function(t,n){if(!LI(t))return xh()[e](null);LI(n)&&(n=xh().querySelector(n));var i=jI(n)?n:xh();return i[e]&&i[e](t)}}function FI(e,t,n,i){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={});var r=xh().createElement(e);return Object.getOwnPropertyNames(t).forEach((function(e){var n=t[e];-1!==e.indexOf("aria-")||"role"===e||"type"===e?(rI.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+e+" to "+n+"."),r.setAttribute(e,n)):"textContent"===e?qI(r,n):r[e]===n&&"tabIndex"!==e||(r[e]=n)})),Object.getOwnPropertyNames(n).forEach((function(e){r.setAttribute(e,n[e])})),i&&oC(r,i),r}function qI(e,t){return void 0===e.textContent?e.innerText=t:e.textContent=t,e}function VI(e,t){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)}function HI(e,t){return MI(t),e.classList?e.classList.contains(t):(n=t,new RegExp("(^|\\s)"+n+"($|\\s)")).test(e.className);var n}function zI(e,t){return e.classList?e.classList.add(t):HI(e,t)||(e.className=(e.className+" "+t).trim()),e}function WI(e,t){return e?(e.classList?e.classList.remove(t):(MI(t),e.className=e.className.split(/\s+/).filter((function(e){return e!==t})).join(" ")),e):(rI.warn("removeClass was called with an element that doesn't exist"),null)}function $I(e,t,n){var i=HI(e,t);if("function"==typeof n&&(n=n(e,t)),"boolean"!=typeof n&&(n=!i),n!==i)return n?zI(e,t):WI(e,t),e}function GI(e,t){Object.getOwnPropertyNames(t).forEach((function(n){var i=t[n];null==i||!1===i?e.removeAttribute(n):e.setAttribute(n,!0===i?"":i)}))}function KI(e){var t={};if(e&&e.attributes&&e.attributes.length>0)for(var n=e.attributes,i=n.length-1;i>=0;i--){var r=n[i].name,a=n[i].value;"boolean"!=typeof e[r]&&-1===",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+r+",")||(a=null!==a),t[r]=a}return t}function XI(e,t){return e.getAttribute(t)}function ZI(e,t,n){e.setAttribute(t,n)}function YI(e,t){e.removeAttribute(t)}function JI(){xh().body.focus(),xh().onselectstart=function(){return!1}}function QI(){xh().onselectstart=function(){return!0}}function eC(e){if(e&&e.getBoundingClientRect&&e.parentNode){var t=e.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(e){void 0!==t[e]&&(n[e]=t[e])})),n.height||(n.height=parseFloat(pI(e,"height"))),n.width||(n.width=parseFloat(pI(e,"width"))),n}}function tC(e){if(!e||e&&!e.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=e.offsetWidth,n=e.offsetHeight,i=0,r=0;e.offsetParent&&e!==xh()[Jk.fullscreenElement];)i+=e.offsetLeft,r+=e.offsetTop,e=e.offsetParent;return{left:i,top:r,width:t,height:n}}function nC(e,t){var n={x:0,y:0};if(OI)for(var i=e;i&&"html"!==i.nodeName.toLowerCase();){var r=pI(i,"transform");if(/^matrix/.test(r)){var a=r.slice(7,-1).split(/,\s/).map(Number);n.x+=a[4],n.y+=a[5]}else if(/^matrix3d/.test(r)){var o=r.slice(9,-1).split(/,\s/).map(Number);n.x+=o[12],n.y+=o[13]}i=i.parentNode}var s={},d=tC(t.target),l=tC(e),u=l.width,c=l.height,p=t.offsetY-(l.top-d.top),h=t.offsetX-(l.left-d.left);return t.changedTouches&&(h=t.changedTouches[0].pageX-l.left,p=t.changedTouches[0].pageY+l.top,OI&&(h-=n.x,p-=n.y)),s.y=1-Math.max(0,Math.min(1,p/c)),s.x=Math.max(0,Math.min(1,h/u)),s}function iC(e){return uI(e)&&3===e.nodeType}function rC(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}function aC(e){return"function"==typeof e&&(e=e()),(Array.isArray(e)?e:[e]).map((function(e){return"function"==typeof e&&(e=e()),jI(e)||iC(e)?e:"string"==typeof e&&/\S/.test(e)?xh().createTextNode(e):void 0})).filter((function(e){return e}))}function oC(e,t){return aC(t).forEach((function(t){return e.appendChild(t)})),e}function sC(e,t){return oC(rC(e),t)}function dC(e){return void 0===e.button&&void 0===e.buttons||0===e.button&&void 0===e.buttons||"mouseup"===e.type&&0===e.button&&0===e.buttons||0===e.button&&1===e.buttons}var lC,uC=BI("querySelector"),cC=BI("querySelectorAll"),pC=Object.freeze({__proto__:null,isReal:UI,isEl:jI,isInFrame:NI,createEl:FI,textContent:qI,prependTo:VI,hasClass:HI,addClass:zI,removeClass:WI,toggleClass:$I,setAttributes:GI,getAttributes:KI,getAttribute:XI,setAttribute:ZI,removeAttribute:YI,blockTextSelection:JI,unblockTextSelection:QI,getBoundingClientRect:eC,findPosition:tC,getPointerPosition:nC,isTextNode:iC,emptyEl:rC,normalizeContent:aC,appendContent:oC,insertContent:sC,isSingleLeftClick:dC,$:uC,$$:cC}),hC=!1,fC=function(){if(!1!==lC.options.autoSetup){var e=Array.prototype.slice.call(xh().getElementsByTagName("video")),t=Array.prototype.slice.call(xh().getElementsByTagName("audio")),n=Array.prototype.slice.call(xh().getElementsByTagName("video-js")),i=e.concat(t,n);if(i&&i.length>0)for(var r=0,a=i.length;r<a;r++){var o=i[r];if(!o||!o.getAttribute){gC(1);break}void 0===o.player&&null!==o.getAttribute("data-setup")&&lC(o)}else hC||gC(1)}};function gC(e,t){UI()&&(t&&(lC=t),Ah().setTimeout(fC,e))}function mC(){hC=!0,Ah().removeEventListener("load",mC)}UI()&&("complete"===xh().readyState?mC():Ah().addEventListener("load",mC));var vC,yC=function(e){var t=xh().createElement("style");return t.className=e,t},bC=function(e,t){e.styleSheet?e.styleSheet.cssText=t:e.textContent=t},_C=3;function TC(){return _C++}Ah().WeakMap||(vC=function(){function e(){this.vdata="vdata"+Math.floor(Ah().performance&&Ah().performance.now()||Date.now()),this.data={}}var t=e.prototype;return t.set=function(e,t){var n=e[this.vdata]||TC();return e[this.vdata]||(e[this.vdata]=n),this.data[n]=t,this},t.get=function(e){var t=e[this.vdata];if(t)return this.data[t];rI("We have no data for this element",e)},t.has=function(e){return e[this.vdata]in this.data},t.delete=function(e){var t=e[this.vdata];t&&(delete this.data[t],delete e[this.vdata])},e}());var wC,SC=Ah().WeakMap?new WeakMap:new vC;function kC(e,t){if(SC.has(e)){var n=SC.get(e);0===n.handlers[t].length&&(delete n.handlers[t],e.removeEventListener?e.removeEventListener(t,n.dispatcher,!1):e.detachEvent&&e.detachEvent("on"+t,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&SC.delete(e)}}function IC(e,t,n,i){n.forEach((function(n){e(t,n,i)}))}function CC(e){if(e.fixed_)return e;function t(){return!0}function n(){return!1}if(!e||!e.isPropagationStopped||!e.isImmediatePropagationStopped){var i=e||Ah().event;for(var r in e={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&"path"!==r&&("returnValue"===r&&i.preventDefault||(e[r]=i[r]));if(e.target||(e.target=e.srcElement||xh()),e.relatedTarget||(e.relatedTarget=e.fromElement===e.target?e.toElement:e.fromElement),e.preventDefault=function(){i.preventDefault&&i.preventDefault(),e.returnValue=!1,i.returnValue=!1,e.defaultPrevented=!0},e.defaultPrevented=!1,e.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),e.cancelBubble=!0,i.cancelBubble=!0,e.isPropagationStopped=t},e.isPropagationStopped=n,e.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),e.isImmediatePropagationStopped=t,e.stopPropagation()},e.isImmediatePropagationStopped=n,null!==e.clientX&&void 0!==e.clientX){var a=xh().documentElement,o=xh().body;e.pageX=e.clientX+(a&&a.scrollLeft||o&&o.scrollLeft||0)-(a&&a.clientLeft||o&&o.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||o&&o.scrollTop||0)-(a&&a.clientTop||o&&o.clientTop||0)}e.which=e.charCode||e.keyCode,null!==e.button&&void 0!==e.button&&(e.button=1&e.button?0:4&e.button?1:2&e.button?2:0)}return e.fixed_=!0,e}var EC=["touchstart","touchmove"];function AC(e,t,n){if(Array.isArray(t))return IC(AC,e,t,n);SC.has(e)||SC.set(e,{});var i=SC.get(e);if(i.handlers||(i.handlers={}),i.handlers[t]||(i.handlers[t]=[]),n.guid||(n.guid=TC()),i.handlers[t].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(t,n){if(!i.disabled){t=CC(t);var r=i.handlers[t.type];if(r)for(var a=r.slice(0),o=0,s=a.length;o<s&&!t.isImmediatePropagationStopped();o++)try{a[o].call(e,t,n)}catch(e){rI.error(e)}}}),1===i.handlers[t].length)if(e.addEventListener){var r=!1;(function(){if("boolean"!=typeof wC){wC=!1;try{var e=Object.defineProperty({},"passive",{get:function(){wC=!0}});Ah().addEventListener("test",null,e),Ah().removeEventListener("test",null,e)}catch(e){}}return wC})()&&EC.indexOf(t)>-1&&(r={passive:!0}),e.addEventListener(t,i.dispatcher,r)}else e.attachEvent&&e.attachEvent("on"+t,i.dispatcher)}function PC(e,t,n){if(SC.has(e)){var i=SC.get(e);if(i.handlers){if(Array.isArray(t))return IC(PC,e,t,n);var r=function(e,t){i.handlers[t]=[],kC(e,t)};if(void 0!==t){var a=i.handlers[t];if(a)if(n){if(n.guid)for(var o=0;o<a.length;o++)a[o].guid===n.guid&&a.splice(o--,1);kC(e,t)}else r(e,t)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(e,s)}}}function xC(e,t,n){var i=SC.has(e)?SC.get(e):{},r=e.parentNode||e.ownerDocument;if("string"==typeof t?t={type:t,target:e}:t.target||(t.target=e),t=CC(t),i.dispatcher&&i.dispatcher.call(e,t,n),r&&!t.isPropagationStopped()&&!0===t.bubbles)xC.call(null,r,t,n);else if(!r&&!t.defaultPrevented&&t.target&&t.target[t.type]){SC.has(t.target)||SC.set(t.target,{});var a=SC.get(t.target);t.target[t.type]&&(a.disabled=!0,"function"==typeof t.target[t.type]&&t.target[t.type](),a.disabled=!1)}return!t.defaultPrevented}function OC(e,t,n){if(Array.isArray(t))return IC(OC,e,t,n);var i=function i(){PC(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||TC(),AC(e,t,i)}function DC(e,t,n){var i=function i(){PC(e,t,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||TC(),AC(e,t,i)}var RC,LC=Object.freeze({__proto__:null,fixEvent:CC,on:AC,off:PC,trigger:xC,one:OC,any:DC}),MC=30,UC=function(e,t,n){t.guid||(t.guid=TC());var i=t.bind(e);return i.guid=n?n+"_"+t.guid:t.guid,i},jC=function(e,t){var n=Ah().performance.now();return function(){var i=Ah().performance.now();i-n>=t&&(e.apply(void 0,arguments),n=i)}},NC=function(){};NC.prototype.allowedEvents_={},NC.prototype.on=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},AC(this,e,t),this.addEventListener=n},NC.prototype.addEventListener=NC.prototype.on,NC.prototype.off=function(e,t){PC(this,e,t)},NC.prototype.removeEventListener=NC.prototype.off,NC.prototype.one=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},OC(this,e,t),this.addEventListener=n},NC.prototype.any=function(e,t){var n=this.addEventListener;this.addEventListener=function(){},DC(this,e,t),this.addEventListener=n},NC.prototype.trigger=function(e){var t=e.type||e;"string"==typeof e&&(e={type:t}),e=CC(e),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](e),xC(this,e)},NC.prototype.dispatchEvent=NC.prototype.trigger,NC.prototype.queueTrigger=function(e){var t=this;RC||(RC=new Map);var n=e.type||e,i=RC.get(this);i||(i=new Map,RC.set(this,i));var r=i.get(n);i.delete(n),Ah().clearTimeout(r);var a=Ah().setTimeout((function(){0===i.size&&(i=null,RC.delete(t)),t.trigger(e)}),0);i.set(n,a)};var BC=function(e){return"function"==typeof e.name?e.name():"string"==typeof e.name?e.name:e.name_?e.name_:e.constructor&&e.constructor.name?e.constructor.name:typeof e},FC=function(e){return e instanceof NC||!!e.eventBusEl_&&["on","one","off","trigger"].every((function(t){return"function"==typeof e[t]}))},qC=function(e){return"string"==typeof e&&/\S/.test(e)||Array.isArray(e)&&!!e.length},VC=function(e,t,n){if(!e||!e.nodeName&&!FC(e))throw new Error("Invalid target for "+BC(t)+"#"+n+"; must be a DOM node or evented object.")},HC=function(e,t,n){if(!qC(e))throw new Error("Invalid event type for "+BC(t)+"#"+n+"; must be a non-empty string or array.")},zC=function(e,t,n){if("function"!=typeof e)throw new Error("Invalid listener for "+BC(t)+"#"+n+"; must be a function.")},WC=function(e,t,n){var i,r,a,o=t.length<3||t[0]===e||t[0]===e.eventBusEl_;return o?(i=e.eventBusEl_,t.length>=3&&t.shift(),r=t[0],a=t[1]):(i=t[0],r=t[1],a=t[2]),VC(i,e,n),HC(r,e,n),zC(a,e,n),{isTargetingSelf:o,target:i,type:r,listener:a=UC(e,a)}},$C=function(e,t,n,i){VC(e,e,t),e.nodeName?LC[t](e,n,i):e[t](n,i)},GC={on:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=WC(this,n,"on"),a=r.isTargetingSelf,o=r.target,s=r.type,d=r.listener;if($C(o,"on",s,d),!a){var l=function(){return e.off(o,s,d)};l.guid=d.guid;var u=function(){return e.off("dispose",l)};u.guid=d.guid,$C(this,"on","dispose",l),$C(o,"on","dispose",u)}},one:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=WC(this,n,"one"),a=r.isTargetingSelf,o=r.target,s=r.type,d=r.listener;if(a)$C(o,"one",s,d);else{var l=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];d.apply(null,i)};l.guid=d.guid,$C(o,"one",s,l)}},any:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=WC(this,n,"any"),a=r.isTargetingSelf,o=r.target,s=r.type,d=r.listener;if(a)$C(o,"any",s,d);else{var l=function t(){e.off(o,s,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];d.apply(null,i)};l.guid=d.guid,$C(o,"any",s,l)}},off:function(e,t,n){if(!e||qC(e))PC(this.eventBusEl_,e,t);else{var i=e,r=t;VC(i,this,"off"),HC(r,this,"off"),zC(n,this,"off"),n=UC(this,n),this.off("dispose",n),i.nodeName?(PC(i,r,n),PC(i,"dispose",n)):FC(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(e,t){VC(this.eventBusEl_,this,"trigger");var n=e&&"string"!=typeof e?e.type:e;if(!qC(n)){var i="Invalid event type for "+BC(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!e)throw new Error(i);(this.log||rI).error(i)}return xC(this.eventBusEl_,e,t)}};function KC(e,t){void 0===t&&(t={});var n=t.eventBusKey;if(n){if(!e[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');e.eventBusEl_=e[n]}else e.eventBusEl_=FI("span",{className:"vjs-event-bus"});return lI(e,GC),e.eventedCallbacks&&e.eventedCallbacks.forEach((function(e){e()})),e.on("dispose",(function(){e.off(),[e,e.el_,e.eventBusEl_].forEach((function(e){e&&SC.has(e)&&SC.delete(e)})),Ah().setTimeout((function(){e.eventBusEl_=null}),0)})),e}var XC={state:{},setState:function(e){var t,n=this;return"function"==typeof e&&(e=e()),dI(e,(function(e,i){n.state[i]!==e&&((t=t||{})[i]={from:n.state[i],to:e}),n.state[i]=e})),t&&FC(this)&&this.trigger({changes:t,type:"statechanged"}),t}};function ZC(e,t){return lI(e,XC),e.state=lI({},e.state,t),"function"==typeof e.handleStateChanged&&FC(e)&&e.on("statechanged",e.handleStateChanged),e}var YC=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toLowerCase()}))},JC=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))};function QC(){for(var e={},t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((function(t){t&&dI(t,(function(t,n){cI(t)?(cI(e[n])||(e[n]={}),e[n]=QC(e[n],t)):e[n]=t}))})),e}var eE=function(){function e(){this.map_={}}var t=e.prototype;return t.has=function(e){return e in this.map_},t.delete=function(e){var t=this.has(e);return delete this.map_[e],t},t.set=function(e,t){return this.map_[e]=t,this},t.forEach=function(e,t){for(var n in this.map_)e.call(t,this.map_[n],n,this)},e}(),tE=Ah().Map?Ah().Map:eE,nE=function(){function e(){this.set_={}}var t=e.prototype;return t.has=function(e){return e in this.set_},t.delete=function(e){var t=this.has(e);return delete this.set_[e],t},t.add=function(e){return this.set_[e]=1,this},t.forEach=function(e,t){for(var n in this.set_)e.call(t,n,n,this)},e}(),iE=Ah().Set?Ah().Set:nE,rE=function(){function e(e,t,n){var i=this;if(!e&&this.play?this.player_=e=this:this.player_=e,this.isDisposed_=!1,this.parentComponent_=null,this.options_=QC({},this.options_),t=this.options_=QC(this.options_,t),this.id_=t.id||t.el&&t.el.id,!this.id_){var r=e&&e.id&&e.id()||"no_player";this.id_=r+"_component_"+TC()}this.name_=t.name||null,t.el?this.el_=t.el:!1!==t.createEl&&(this.el_=this.createEl()),t.className&&this.el_&&t.className.split(" ").forEach((function(e){return i.addClass(e)})),!1!==t.evented&&(KC(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),ZC(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new iE,this.setIntervalIds_=new iE,this.rafIds_=new iE,this.namedRafs_=new tE,this.clearingTimersOnDispose_=!1,!1!==t.initChildren&&this.initChildren(),this.ready(n),!1!==t.reportTouchActivity&&this.enableTouchActivity()}var t=e.prototype;return t.dispose=function(e){if(void 0===e&&(e={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(e.restoreEl?this.el_.parentNode.replaceChild(e.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(e){return e?(this.options_=QC(this.options_,e),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(e,t,n){return FI(e,t,n)},t.localize=function(e,t,n){void 0===n&&(n=e);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),a=r&&r[i],o=i&&i.split("-")[0],s=r&&r[o],d=n;return a&&a[e]?d=a[e]:s&&s[e]&&(d=s[e]),t&&(d=d.replace(/\{(\d+)\}/g,(function(e,n){var i=t[n-1],r=i;return void 0===i&&(r=e),r}))),d},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(e){return this.childIndex_[e]},t.getChild=function(e){if(e)return this.childNameIndex_[e]},t.getDescendant=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t=t.reduce((function(e,t){return e.concat(t)}),[]);for(var i=this,r=0;r<t.length;r++)if(!(i=i.getChild(t[r]))||!i.getChild)return;return i},t.addChild=function(t,n,i){var r,a;if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"==typeof t){a=JC(t);var o=n.componentClass||a;n.name=a;var s=e.getComponent(o);if(!s)throw new Error("Component "+o+" does not exist");if("function"!=typeof s)return null;r=new s(this.player_||this,n)}else r=t;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,"function"==typeof r.id&&(this.childIndex_[r.id()]=r),(a=a||r.name&&JC(r.name()))&&(this.childNameIndex_[a]=r,this.childNameIndex_[YC(a)]=r),"function"==typeof r.el&&r.el()){var d=null;this.children_[i+1]&&(this.children_[i+1].el_?d=this.children_[i+1].el_:jI(this.children_[i+1])&&(d=this.children_[i+1])),this.contentEl().insertBefore(r.el(),d)}return r},t.removeChild=function(e){if("string"==typeof e&&(e=this.getChild(e)),e&&this.children_){for(var t=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===e){t=!0,this.children_.splice(n,1);break}if(t){e.parentComponent_=null,this.childIndex_[e.id()]=null,this.childNameIndex_[JC(e.name())]=null,this.childNameIndex_[YC(e.name())]=null;var i=e.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(e.el())}}},t.initChildren=function(){var t=this,n=this.options_.children;if(n){var i,r=this.options_,a=e.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(e){return!i.some((function(t){return"string"==typeof t?e===t:e===t.name}))}))).map((function(e){var i,r;return"string"==typeof e?r=n[i=e]||t.options_[i]||{}:(i=e.name,r=e),{name:i,opts:r}})).filter((function(t){var n=e.getComponent(t.opts.componentClass||JC(t.name));return n&&!a.isTech(n)})).forEach((function(e){var n=e.name,i=e.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=t.options_.playerOptions;var a=t.addChild(n,i);a&&(t[n]=a)}}))}},t.buildCSSClass=function(){return""},t.ready=function(e,t){if(void 0===t&&(t=!1),e)return this.isReady_?void(t?e.call(this):this.setTimeout(e,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(e))},t.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var e=this.readyQueue_;this.readyQueue_=[],e&&e.length>0&&e.forEach((function(e){e.call(this)}),this),this.trigger("ready")}),1)},t.$=function(e,t){return uC(e,t||this.contentEl())},t.$$=function(e,t){return cC(e,t||this.contentEl())},t.hasClass=function(e){return HI(this.el_,e)},t.addClass=function(e){zI(this.el_,e)},t.removeClass=function(e){WI(this.el_,e)},t.toggleClass=function(e,t){$I(this.el_,e,t)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(e){return XI(this.el_,e)},t.setAttribute=function(e,t){ZI(this.el_,e,t)},t.removeAttribute=function(e){YI(this.el_,e)},t.width=function(e,t){return this.dimension("width",e,t)},t.height=function(e,t){return this.dimension("height",e,t)},t.dimensions=function(e,t){this.width(e,!0),this.height(t)},t.dimension=function(e,t,n){if(void 0!==t)return null!==t&&t==t||(t=0),-1!==(""+t).indexOf("%")||-1!==(""+t).indexOf("px")?this.el_.style[e]=t:this.el_.style[e]="auto"===t?"":t+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[e],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+JC(e)],10)},t.currentDimension=function(e){var t=0;if("width"!==e&&"height"!==e)throw new Error("currentDimension only accepts width or height value");if(t=pI(this.el_,e),0===(t=parseFloat(t))||isNaN(t)){var n="offset"+JC(e);t=this.el_[n]}return t},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(e){this.player_&&(Rh().isEventKey(e,"Tab")||e.stopPropagation(),this.player_.handleKeyDown(e))},t.handleKeyPress=function(e){this.handleKeyDown(e)},t.emitTapEvents=function(){var e,t=0,n=null;this.on("touchstart",(function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},t=Ah().performance.now(),e=!0)})),this.on("touchmove",(function(t){if(t.touches.length>1)e=!1;else if(n){var i=t.touches[0].pageX-n.pageX,r=t.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(e=!1)}}));var i=function(){e=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){n=null,!0===e&&Ah().performance.now()-t<200&&(i.preventDefault(),this.trigger("tap"))}))},t.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var e,t=UC(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){t(),this.clearInterval(e),e=this.setInterval(t,250)}));var n=function(n){t(),this.clearInterval(e)};this.on("touchmove",t),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(e,t){var n,i=this;return e=UC(this,e),this.clearTimersOnDispose_(),n=Ah().setTimeout((function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),e()}),t),this.setTimeoutIds_.add(n),n},t.clearTimeout=function(e){return this.setTimeoutIds_.has(e)&&(this.setTimeoutIds_.delete(e),Ah().clearTimeout(e)),e},t.setInterval=function(e,t){e=UC(this,e),this.clearTimersOnDispose_();var n=Ah().setInterval(e,t);return this.setIntervalIds_.add(n),n},t.clearInterval=function(e){return this.setIntervalIds_.has(e)&&(this.setIntervalIds_.delete(e),Ah().clearInterval(e)),e},t.requestAnimationFrame=function(e){var t,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),e=UC(this,e),t=Ah().requestAnimationFrame((function(){n.rafIds_.has(t)&&n.rafIds_.delete(t),e()})),this.rafIds_.add(t),t):this.setTimeout(e,1e3/60)},t.requestNamedAnimationFrame=function(e,t){var n=this;if(!this.namedRafs_.has(e)){this.clearTimersOnDispose_(),t=UC(this,t);var i=this.requestAnimationFrame((function(){t(),n.namedRafs_.has(e)&&n.namedRafs_.delete(e)}));return this.namedRafs_.set(e,i),e}},t.cancelNamedAnimationFrame=function(e){this.namedRafs_.has(e)&&(this.cancelAnimationFrame(this.namedRafs_.get(e)),this.namedRafs_.delete(e))},t.cancelAnimationFrame=function(e){return this.supportsRaf_?(this.rafIds_.has(e)&&(this.rafIds_.delete(e),Ah().cancelAnimationFrame(e)),e):this.clearTimeout(e)},t.clearTimersOnDispose_=function(){var e=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(t){var n=t[0],i=t[1];e[n].forEach((function(t,n){return e[i](n)}))})),e.clearingTimersOnDispose_=!1})))},e.registerComponent=function(t,n){if("string"!=typeof t||!t)throw new Error('Illegal component name, "'+t+'"; must be a non-empty string.');var i=e.getComponent("Tech"),r=i&&i.isTech(n),a=e===n||e.prototype.isPrototypeOf(n.prototype);if(r||!a)throw new Error('Illegal component, "'+t+'"; '+(r?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");t=JC(t),e.components_||(e.components_={});var o=e.getComponent("Player");if("Player"===t&&o&&o.players){var s=o.players,d=Object.keys(s);if(s&&d.length>0&&d.map((function(e){return s[e]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return e.components_[t]=n,e.components_[YC(t)]=n,n},e.getComponent=function(t){if(t&&e.components_)return e.components_[t]},e}();function aE(e,t,n,i){return function(e,t,n){if("number"!=typeof t||t<0||t>n)throw new Error("Failed to execute '"+e+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+n+").")}(e,i,n.length-1),n[i][t]}function oE(e){var t;return t=void 0===e||0===e.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:e.length,start:aE.bind(null,"start",0,e),end:aE.bind(null,"end",1,e)},Ah().Symbol&&Ah().Symbol.iterator&&(t[Ah().Symbol.iterator]=function(){return(e||[]).values()}),t}function sE(e,t){return Array.isArray(e)?oE(e):void 0===e||void 0===t?oE():oE([[e,t]])}function dE(e,t){var n,i,r=0;if(!t)return 0;e&&e.length||(e=sE(0,0));for(var a=0;a<e.length;a++)n=e.start(a),(i=e.end(a))>t&&(i=t),r+=i-n;return r/t}function lE(e){if(e instanceof lE)return e;"number"==typeof e?this.code=e:"string"==typeof e?this.message=e:uI(e)&&("number"==typeof e.code&&(this.code=e.code),lI(this,e)),this.message||(this.message=lE.defaultMessages[this.code]||"")}rE.prototype.supportsRaf_="function"==typeof Ah().requestAnimationFrame&&"function"==typeof Ah().cancelAnimationFrame,rE.registerComponent("Component",rE),lE.prototype.code=0,lE.prototype.message="",lE.prototype.status=null,lE.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],lE.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var uE=0;uE<lE.errorTypes.length;uE++)lE[lE.errorTypes[uE]]=uE,lE.prototype[lE.errorTypes[uE]]=uE;function cE(e){return null!=e&&"function"==typeof e.then}function pE(e){cE(e)&&e.then(null,(function(e){}))}var hE=function(e){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(t,n,i){return e[n]&&(t[n]=e[n]),t}),{cues:e.cues&&Array.prototype.map.call(e.cues,(function(e){return{startTime:e.startTime,endTime:e.endTime,text:e.text,id:e.id}}))})},fE=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleKeyDown_=function(e){return i.handleKeyDown(e)},i.close_=function(e){return i.close(e)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=FI("div",{className:"vjs-modal-dialog-content"},{role:"document"}),i.descEl_=FI("p",{className:"vjs-modal-dialog-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),qI(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+e.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},n.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(e){return"boolean"==typeof e&&this[e?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(e){if("boolean"==typeof e){var t=this.closeable_=!!e,n=this.getChild("closeButton");if(t&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close_)}!t&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(e){var t=this.contentEl(),n=t.parentNode,i=t.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(t),this.empty(),sC(t,e),this.trigger("modalfill"),i?n.insertBefore(t,i):n.appendChild(t);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},n.empty=function(){this.trigger("beforemodalempty"),rC(this.contentEl()),this.trigger("modalempty")},n.content=function(e){return void 0!==e&&(this.content_=e),this.content_},n.conditionalFocus_=function(){var e=xh().activeElement,t=this.player_.el_;this.previouslyActiveEl_=null,(t.contains(e)||t===e)&&(this.previouslyActiveEl_=e,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(e){if(e.stopPropagation(),Rh().isEventKey(e,"Escape")&&this.closeable())return e.preventDefault(),void this.close();if(Rh().isEventKey(e,"Tab")){for(var t,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){t=r;break}xh().activeElement===this.el_&&(t=0),e.shiftKey&&0===t?(n[n.length-1].focus(),e.preventDefault()):e.shiftKey||t!==n.length-1||(n[0].focus(),e.preventDefault())}},n.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,(function(e){return(e instanceof Ah().HTMLAnchorElement||e instanceof Ah().HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof Ah().HTMLInputElement||e instanceof Ah().HTMLSelectElement||e instanceof Ah().HTMLTextAreaElement||e instanceof Ah().HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof Ah().HTMLIFrameElement||e instanceof Ah().HTMLObjectElement||e instanceof Ah().HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")}))},t}(rE);fE.prototype.options_={pauseOnOpen:!0,temporary:!0},rE.registerComponent("ModalDialog",fE);var gE=function(e){function t(t){var n;void 0===t&&(t=[]),(n=e.call(this)||this).tracks_=[],Object.defineProperty(Lh(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<t.length;i++)n.addTrack(t[i]);return n}Uh(t,e);var n=t.prototype;return n.addTrack=function(e){var t=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(e)&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){t.trigger({track:e,type:"labelchange",target:t})},FC(e)&&e.addEventListener("labelchange",e.labelchange_)},n.removeTrack=function(e){for(var t,n=0,i=this.length;n<i;n++)if(this[n]===e){(t=this[n]).off&&t.off(),this.tracks_.splice(n,1);break}t&&this.trigger({track:t,type:"removetrack",target:this})},n.getTrackById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},t}(NC);for(var mE in gE.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},gE.prototype.allowedEvents_)gE.prototype["on"+mE]=null;var vE=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].enabled=!1)},yE=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].enabled){vE(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,n}Uh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.enabled&&vE(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.enabledChange_=function(){n.changing_||(n.changing_=!0,vE(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("enabledchange",t.enabledChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.enabledChange_&&(t.removeEventListener("enabledchange",t.enabledChange_),t.enabledChange_=null)},t}(gE),bE=function(e,t){for(var n=0;n<e.length;n++)Object.keys(e[n]).length&&t.id!==e[n].id&&(e[n].selected=!1)},_E=function(e){function t(t){var n;void 0===t&&(t=[]);for(var i=t.length-1;i>=0;i--)if(t[i].selected){bE(t,t[i]);break}return(n=e.call(this,t)||this).changing_=!1,Object.defineProperty(Lh(n),"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;return-1},set:function(){}}),n}Uh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;t.selected&&bE(this,t),e.prototype.addTrack.call(this,t),t.addEventListener&&(t.selectedChange_=function(){n.changing_||(n.changing_=!0,bE(n,t),n.changing_=!1,n.trigger("change"))},t.addEventListener("selectedchange",t.selectedChange_))},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&t.selectedChange_&&(t.removeEventListener("selectedchange",t.selectedChange_),t.selectedChange_=null)},t}(gE),TE=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.addTrack=function(t){var n=this;e.prototype.addTrack.call(this,t),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),t.addEventListener("modechange",this.queueChange_),-1===["metadata","chapters"].indexOf(t.kind)&&t.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(t){e.prototype.removeTrack.call(this,t),t.removeEventListener&&(this.queueChange_&&t.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&t.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(gE),wE=function(){function e(e){void 0===e&&(e=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var t=0,n=e.length;t<n;t++)this.addTrackElement_(e[t])}var t=e.prototype;return t.addTrackElement_=function(e){var t=this.trackElements_.length;""+t in this||Object.defineProperty(this,t,{get:function(){return this.trackElements_[t]}}),-1===this.trackElements_.indexOf(e)&&this.trackElements_.push(e)},t.getTrackElementByTrack_=function(e){for(var t,n=0,i=this.trackElements_.length;n<i;n++)if(e===this.trackElements_[n].track){t=this.trackElements_[n];break}return t},t.removeTrackElement_=function(e){for(var t=0,n=this.trackElements_.length;t<n;t++)if(e===this.trackElements_[t]){this.trackElements_[t].track&&"function"==typeof this.trackElements_[t].track.off&&this.trackElements_[t].track.off(),"function"==typeof this.trackElements_[t].off&&this.trackElements_[t].off(),this.trackElements_.splice(t,1);break}},e}(),SE=function(){function e(t){e.prototype.setCues_.call(this,t),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=e.prototype;return t.setCues_=function(e){var t=this.length||0,n=0,i=e.length;this.cues_=e,this.length_=e.length;var r=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(t<i)for(n=t;n<i;n++)r.call(this,n)},t.getCueById=function(e){for(var t=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===e){t=r;break}}return t},e}(),kE={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},IE={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},CE={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},EE={disabled:"disabled",hidden:"hidden",showing:"showing"},AE=function(e){function t(t){var n;void 0===t&&(t={}),n=e.call(this)||this;var i={id:t.id||"vjs_track_"+TC(),kind:t.kind||"",language:t.language||""},r=t.label||"",a=function(e){Object.defineProperty(Lh(n),e,{get:function(){return i[e]},set:function(){}})};for(var o in i)a(o);return Object.defineProperty(Lh(n),"label",{get:function(){return r},set:function(e){e!==r&&(r=e,this.trigger("labelchange"))}}),n}return Uh(t,e),t}(NC),PE=function(e){var t=["protocol","hostname","port","pathname","search","hash","host"],n=xh().createElement("a");n.href=e;for(var i={},r=0;r<t.length;r++)i[t[r]]=n[t[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=Ah().location.protocol),i.host||(i.host=Ah().location.host),i},xE=function(e){if(!e.match(/^https?:\/\//)){var t=xh().createElement("a");t.href=e,e=t.href}return e},OE=function(e){if("string"==typeof e){var t=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(e);if(t)return t.pop().toLowerCase()}return""},DE=function(e,t){void 0===t&&(t=Ah().location);var n=PE(e);return(":"===n.protocol?t.protocol:n.protocol)+n.host!==t.protocol+t.host},RE=Object.freeze({__proto__:null,parseUrl:PE,getAbsoluteURL:xE,getFileExtension:OE,isCrossOrigin:DE}),LE=function(e,t){var n=new(Ah().WebVTT.Parser)(Ah(),Ah().vttjs,Ah().WebVTT.StringDecoder()),i=[];n.oncue=function(e){t.addCue(e)},n.onparsingerror=function(e){i.push(e)},n.onflush=function(){t.trigger({type:"loadeddata",target:t})},n.parse(e),i.length>0&&(Ah().console&&Ah().console.groupCollapsed&&Ah().console.groupCollapsed("Text Track parsing errors for "+t.src),i.forEach((function(e){return rI.error(e)})),Ah().console&&Ah().console.groupEnd&&Ah().console.groupEnd()),n.flush()},ME=function(e,t){var n={uri:e},i=DE(e);i&&(n.cors=i);var r="use-credentials"===t.tech_.crossOrigin();r&&(n.withCredentials=r),Fh()(n,UC(this,(function(e,n,i){if(e)return rI.error(e,n);t.loaded_=!0,"function"!=typeof Ah().WebVTT?t.tech_&&t.tech_.any(["vttjsloaded","vttjserror"],(function(e){if("vttjserror"!==e.type)return LE(i,t);rI.error("vttjs failed to load, stopping trying to process "+t.src)})):LE(i,t)})))},UE=function(e){function t(t){var n;if(void 0===t&&(t={}),!t.tech)throw new Error("A tech was not provided.");var i=QC(t,{kind:CE[t.kind]||"subtitles",language:t.language||t.srclang||""}),r=EE[i.mode]||"disabled",a=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(r="hidden"),(n=e.call(this,i)||this).tech_=i.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var o=new SE(n.cues_),s=new SE(n.activeCues_),d=!1;return n.timeupdateHandler=UC(Lh(n),(function(){this.tech_.isDisposed()||(this.tech_.isReady_?(this.activeCues=this.activeCues,d&&(this.trigger("cuechange"),d=!1),this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)):this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))})),n.tech_.one("dispose",(function(){n.stopTracking()})),"disabled"!==r&&n.startTracking(),Object.defineProperties(Lh(n),{default:{get:function(){return a},set:function(){}},mode:{get:function(){return r},set:function(e){EE[e]&&r!==e&&(r=e,this.preload_||"disabled"===r||0!==this.cues.length||ME(this.src,this),this.stopTracking(),"disabled"!==r&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?o:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var e=this.tech_.currentTime(),t=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=e&&r.endTime>=e||r.startTime===r.endTime&&r.startTime<=e&&r.startTime+.5>=e)&&t.push(r)}if(d=!1,t.length!==this.activeCues_.length)d=!0;else for(var a=0;a<t.length;a++)-1===this.activeCues_.indexOf(t[a])&&(d=!0);return this.activeCues_=t,s.setCues_(this.activeCues_),s},set:function(){}}}),i.src?(n.src=i.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&ME(n.src,Lh(n))):n.loaded_=!0,n}Uh(t,e);var n=t.prototype;return n.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler)},n.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0)},n.addCue=function(e){var t=e;if(Ah().vttjs&&!(e instanceof Ah().vttjs.VTTCue)){for(var n in t=new(Ah().vttjs.VTTCue)(e.startTime,e.endTime,e.text),e)n in t||(t[n]=e[n]);t.id=e.id,t.originalCue_=e}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(t);this.cues_.push(t),this.cues.setCues_(this.cues_)},n.removeCue=function(e){for(var t=this.cues_.length;t--;){var n=this.cues_[t];if(n===e||n.originalCue_&&n.originalCue_===e){this.cues_.splice(t,1),this.cues.setCues_(this.cues_);break}}},t}(AE);UE.prototype.allowedEvents_={cuechange:"cuechange"};var jE=function(e){function t(t){var n;void 0===t&&(t={});var i=QC(t,{kind:IE[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Lh(n),"enabled",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return Uh(t,e),t}(AE),NE=function(e){function t(t){var n;void 0===t&&(t={});var i=QC(t,{kind:kE[t.kind]||""});n=e.call(this,i)||this;var r=!1;return Object.defineProperty(Lh(n),"selected",{get:function(){return r},set:function(e){"boolean"==typeof e&&e!==r&&(r=e,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return Uh(t,e),t}(AE),BE=function(e){function t(t){var n,i;void 0===t&&(t={}),n=e.call(this)||this;var r=new UE(t);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(Lh(n),{readyState:{get:function(){return i}},track:{get:function(){return r}}}),i=0,r.addEventListener("loadeddata",(function(){i=2,n.trigger({type:"load",target:Lh(n)})})),n}return Uh(t,e),t}(NC);BE.prototype.allowedEvents_={load:"load"},BE.NONE=0,BE.LOADING=1,BE.LOADED=2,BE.ERROR=3;var FE={audio:{ListClass:yE,TrackClass:jE,capitalName:"Audio"},video:{ListClass:_E,TrackClass:NE,capitalName:"Video"},text:{ListClass:TE,TrackClass:UE,capitalName:"Text"}};Object.keys(FE).forEach((function(e){FE[e].getterName=e+"Tracks",FE[e].privateName=e+"Tracks_"}));var qE={remoteText:{ListClass:TE,TrackClass:UE,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:wE,TrackClass:BE,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},VE=Oh({},FE,qE);qE.names=Object.keys(qE),FE.names=Object.keys(FE),VE.names=[].concat(qE.names).concat(FE.names);var HE=function(e){function t(t,n){var i;return void 0===t&&(t={}),void 0===n&&(n=function(){}),t.reportTouchActivity=!1,(i=e.call(this,null,t,n)||this).onDurationChange_=function(e){return i.onDurationChange(e)},i.trackProgress_=function(e){return i.trackProgress(e)},i.trackCurrentTime_=function(e){return i.trackCurrentTime(e)},i.stopTrackingCurrentTime_=function(e){return i.stopTrackingCurrentTime(e)},i.disposeSourceHandler_=function(e){return i.disposeSourceHandler(e)},i.queuedHanders_=new Set,i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),VE.names.forEach((function(e){var n=VE[e];t&&t[n.getterName]&&(i[n.privateName]=t[n.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(e){!1===t["native"+e+"Tracks"]&&(i["featuresNative"+e+"Tracks"]=!1)})),!1===t.nativeCaptions||!1===t.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==t.nativeCaptions&&!0!==t.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==t.preloadTextTracks,i.autoRemoteTextTracks_=new VE.text.ListClass,i.initTrackListeners(),t.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}Uh(t,e);var n=t.prototype;return n.triggerSourceset=function(e){var t=this;this.isReady_||this.one("ready",(function(){return t.setTimeout((function(){return t.triggerSourceset(e)}),1)})),this.trigger({src:e,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(UC(this,(function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress"),this.bufferedPercent_=e,1===e&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(e){this.duration_=this.duration()},n.buffered=function(){return sE(0,0)},n.bufferedPercent=function(){return dE(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(FE.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),e.prototype.dispose.call(this)},n.clearTracks=function(e){var t=this;(e=[].concat(e)).forEach((function(e){for(var n=t[e+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===e&&t.removeRemoteTextTrack(r),n.removeTrack(r)}}))},n.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],t=e.length;t--;){var n=e[t];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(e){return void 0!==e&&(this.error_=new lE(e),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?sE(0,0):sE()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var e=this;FE.names.forEach((function(t){var n=FE[t],i=function(){e.trigger(t+"trackchange")},r=e[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),e.on("dispose",(function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}))}))},n.addWebVttScript_=function(){var e=this;if(!Ah().WebVTT)if(xh().body.contains(this.el())){if(!this.options_["vtt.js"]&&cI(Vh())&&Object.keys(Vh()).length>0)return void this.trigger("vttjsloaded");var t=xh().createElement("script");t.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",t.onload=function(){e.trigger("vttjsloaded")},t.onerror=function(){e.trigger("vttjserror")},this.on("dispose",(function(){t.onload=null,t.onerror=null})),Ah().WebVTT=!0,this.el().parentNode.appendChild(t)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var e=this,t=this.textTracks(),n=this.remoteTextTracks(),i=function(e){return t.addTrack(e.track)},r=function(e){return t.removeTrack(e.track)};n.on("addtrack",i),n.on("removetrack",r),this.addWebVttScript_();var a=function(){return e.trigger("texttrackchange")},o=function(){a();for(var e=0;e<t.length;e++){var n=t[e];n.removeEventListener("cuechange",a),"showing"===n.mode&&n.addEventListener("cuechange",a)}};o(),t.addEventListener("change",o),t.addEventListener("addtrack",o),t.addEventListener("removetrack",o),this.on("dispose",(function(){n.off("addtrack",i),n.off("removetrack",r),t.removeEventListener("change",o),t.removeEventListener("addtrack",o),t.removeEventListener("removetrack",o);for(var e=0;e<t.length;e++)t[e].removeEventListener("cuechange",a)}))},n.addTextTrack=function(e,t,n){if(!e)throw new Error("TextTrack kind is required but was not provided");return function(e,t,n,i,r){void 0===r&&(r={});var a=e.textTracks();r.kind=t,n&&(r.label=n),i&&(r.language=i),r.tech=e;var o=new VE.text.TrackClass(r);return a.addTrack(o),o}(this,e,t,n)},n.createRemoteTextTrack=function(e){var t=QC(e,{tech:this});return new qE.remoteTextEl.TrackClass(t)},n.addRemoteTextTrack=function(e,t){var n=this;void 0===e&&(e={});var i=this.createRemoteTextTrack(e);return!0!==t&&!1!==t&&(rI.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),t=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==t&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(i.track)})),i},n.removeRemoteTextTrack=function(e){var t=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(t),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var e=this.options_.Promise||Ah().Promise;if(e)return e.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.requestVideoFrameCallback=function(e){var t=this,n=TC();return this.paused()?(this.queuedHanders_.add(n),this.one("playing",(function(){t.queuedHanders_.has(n)&&(t.queuedHanders_.delete(n),e())}))):this.requestNamedAnimationFrame(n,e),n},n.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=JC(e),t.techs_[e]=n,t.techs_[YC(e)]=n,"Tech"!==e&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e)return t.techs_&&t.techs_[e]?t.techs_[e]:(e=JC(e),Ah()&&Ah().videojs&&Ah().videojs[e]?(rI.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),Ah().videojs[e]):void 0)},t}(rE);VE.names.forEach((function(e){var t=VE[e];HE.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}})),HE.prototype.featuresVolumeControl=!0,HE.prototype.featuresMuteControl=!0,HE.prototype.featuresFullscreenResize=!1,HE.prototype.featuresPlaybackRate=!1,HE.prototype.featuresProgressEvents=!1,HE.prototype.featuresSourceset=!1,HE.prototype.featuresTimeupdateEvents=!1,HE.prototype.featuresNativeTextTracks=!1,HE.prototype.featuresVideoFrameCallback=!1,HE.withSourceHandlers=function(e){e.registerSourceHandler=function(t,n){var i=e.sourceHandlers;i||(i=e.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,t)},e.canPlayType=function(t){for(var n,i=e.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(t))return n;return""},e.selectSourceHandler=function(t,n){for(var i=e.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(t,n))return i[r];return null},e.canPlaySource=function(t,n){var i=e.selectSourceHandler(t,n);return i?i.canHandleSource(t,n):""},["seekable","seeking","duration"].forEach((function(e){var t=this[e];"function"==typeof t&&(this[e]=function(){return this.sourceHandler_&&this.sourceHandler_[e]?this.sourceHandler_[e].apply(this.sourceHandler_,arguments):t.apply(this,arguments)})}),e.prototype),e.prototype.setSource=function(t){var n=e.selectSourceHandler(t,this.options_);n||(e.nativeSourceHandler?n=e.nativeSourceHandler:rI.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==e.nativeSourceHandler&&(this.currentSource_=t),this.sourceHandler_=n.handleSource(t,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},e.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},rE.registerComponent("Tech",HE),HE.registerTech("Tech",HE),HE.defaultTechOrder_=[];var zE={},WE={},$E={};function GE(e,t,n){e.setTimeout((function(){return QE(t,zE[t.type],n,e)}),1)}function KE(e,t,n,i){void 0===i&&(i=null);var r="call"+JC(n),a=e.reduce(JE(r),i),o=a===$E,s=o?null:t[n](a);return function(e,t,n,i){for(var r=e.length-1;r>=0;r--){var a=e[r];a[t]&&a[t](i,n)}}(e,n,s,o),s}var XE={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},ZE={setCurrentTime:1,setMuted:1,setVolume:1},YE={play:1,pause:1};function JE(e){return function(t,n){return t===$E?$E:n[e]?n[e](t):t}}function QE(e,t,n,i,r,a){void 0===e&&(e={}),void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===a&&(a=!1);var o=t,s=o[0],d=o.slice(1);if("string"==typeof s)QE(e,zE[s],n,i,r,a);else if(s){var l=function(e,t){var n=WE[e.id()],i=null;if(null==n)return i=t(e),WE[e.id()]=[[t,i]],i;for(var r=0;r<n.length;r++){var a=n[r],o=a[0],s=a[1];o===t&&(i=s)}return null===i&&(i=t(e),n.push([t,i])),i}(i,s);if(!l.setSource)return r.push(l),QE(e,d,n,i,r,a);l.setSource(lI({},e),(function(t,o){if(t)return QE(e,d,n,i,r,a);r.push(l),QE(o,e.type===o.type?d:zE[o.type],n,i,r,a)}))}else d.length?QE(e,d,n,i,r,a):a?n(e,r):QE(e,zE["*"],n,i,r,!0)}var eA={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},tA=function(e){void 0===e&&(e="");var t=OE(e);return eA[t.toLowerCase()]||""},nA=function e(t){if(Array.isArray(t)){var n=[];t.forEach((function(t){t=e(t),Array.isArray(t)?n=n.concat(t):uI(t)&&n.push(t)})),t=n}else t="string"==typeof t&&t.trim()?[iA({src:t})]:uI(t)&&"string"==typeof t.src&&t.src&&t.src.trim()?[iA(t)]:[];return t};function iA(e){if(!e.type){var t=tA(e.src);t&&(e.type=t)}return e}var rA=function(e){function t(t,n,i){var r,a=QC({createEl:!1},n);if(r=e.call(this,t,a,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)t.src(n.playerOptions.sources);else for(var o=0,s=n.playerOptions.techOrder;o<s.length;o++){var d=JC(s[o]),l=HE.getTech(d);if(d||(l=rE.getComponent(d)),l&&l.isSupported()){t.loadTech_(d);break}}return r}return Uh(t,e),t}(rE);rE.registerComponent("MediaLoader",rA);var aA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).options_.controlText&&i.controlText(i.options_.controlText),i.handleMouseOver_=function(e){return i.handleMouseOver(e)},i.handleMouseOut_=function(e){return i.handleMouseOut(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.emitTapEvents(),i.enable(),i}Uh(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===e&&(e="div"),void 0===t&&(t={}),void 0===n&&(n={}),t=lI({className:this.buildCSSClass(),tabIndex:0},t),"button"===e&&rI.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),n=lI({role:"button"},n),this.tabIndex_=t.tabIndex;var i=FI(e,t,n);return i.appendChild(FI("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.dispose=function(){this.controlTextEl_=null,e.prototype.dispose.call(this)},n.createControlTextEl=function(e){return this.controlTextEl_=FI("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},n.controlText=function(e,t){if(void 0===t&&(t=this.el()),void 0===e)return this.controlText_||"Need Text";var n=this.localize(e);this.controlText_=e,qI(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||t.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+e.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),void 0!==this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),void 0!==this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(t){Rh().isEventKey(t,"Space")||Rh().isEventKey(t,"Enter")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(rE);rE.registerComponent("ClickableComponent",aA);var oA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update(),i.update_=function(e){return i.update(e)},t.on("posterchange",i.update_),i}Uh(t,e);var n=t.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),e.prototype.dispose.call(this)},n.createEl=function(){return FI("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(e){var t=this.player().poster();this.setSrc(t),t?this.show():this.hide()},n.setSrc=function(e){var t="";e&&(t='url("'+e+'")'),this.el_.style.backgroundImage=t},n.handleClick=function(e){if(this.player_.controls()){var t=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(II||wI)&&t||this.player_.tech(!0).focus(),this.player_.paused()?pE(this.player_.play()):this.player_.pause()}},t}(aA);rE.registerComponent("PosterImage",oA);var sA={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function dA(e,t){var n;if(4===e.length)n=e[1]+e[1]+e[2]+e[2]+e[3]+e[3];else{if(7!==e.length)throw new Error("Invalid color code provided, "+e+"; must be formatted as e.g. #f0e or #f604e2.");n=e.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+t+")"}function lA(e,t,n){try{e.style[t]=n}catch(e){return}}var uA=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=function(e){return r.updateDisplay(e)};return t.on("loadstart",(function(e){return r.toggleDisplay(e)})),t.on("texttrackchange",a),t.on("loadedmetadata",(function(e){return r.preselectTrack(e)})),t.ready(UC(Lh(r),(function(){if(t.tech_&&t.tech_.featuresNativeTextTracks)this.hide();else{t.on("fullscreenchange",a),t.on("playerresize",a),Ah().addEventListener("orientationchange",a),t.on("dispose",(function(){return Ah().removeEventListener("orientationchange",a)}));for(var e=this.options_.playerOptions.tracks||[],n=0;n<e.length;n++)this.player_.addRemoteTextTrack(e[n],!0);this.preselectTrack()}}))),r}Uh(t,e);var n=t.prototype;return n.preselectTrack=function(){for(var e,t,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),a=this.player_.cache_.selectedLanguage,o=0;o<r.length;o++){var s=r[o];a&&a.enabled&&a.language&&a.language===s.language&&s.kind in i?s.kind===a.kind?n=s:n||(n=s):a&&!a.enabled?(n=null,e=null,t=null):s.default&&("descriptions"!==s.kind||e?s.kind in i&&!t&&(t=s):e=s)}n?n.mode="showing":t?t.mode="showing":e&&(e.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"==typeof Ah().WebVTT&&Ah().WebVTT.processCues(Ah(),[],this.el_)},n.updateDisplay=function(){var e=this.player_.textTracks(),t=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),t){for(var n=[],i=0;i<e.length;++i){var r=e[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var a=null,o=null,s=e.length;s--;){var d=e[s];"showing"===d.mode&&("descriptions"===d.kind?a=d:o=d)}o?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(o)):a&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(a))}},n.updateDisplayState=function(e){for(var t=this.player_.textTrackSettings.getValues(),n=e.activeCues,i=n.length;i--;){var r=n[i];if(r){var a=r.displayState;if(t.color&&(a.firstChild.style.color=t.color),t.textOpacity&&lA(a.firstChild,"color",dA(t.color||"#fff",t.textOpacity)),t.backgroundColor&&(a.firstChild.style.backgroundColor=t.backgroundColor),t.backgroundOpacity&&lA(a.firstChild,"backgroundColor",dA(t.backgroundColor||"#000",t.backgroundOpacity)),t.windowColor&&(t.windowOpacity?lA(a,"backgroundColor",dA(t.windowColor,t.windowOpacity)):a.style.backgroundColor=t.windowColor),t.edgeStyle&&("dropshadow"===t.edgeStyle?a.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===t.edgeStyle?a.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===t.edgeStyle&&(a.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),t.fontPercent&&1!==t.fontPercent){var o=Ah().parseFloat(a.style.fontSize);a.style.fontSize=o*t.fontPercent+"px",a.style.height="auto",a.style.top="auto"}t.fontFamily&&"default"!==t.fontFamily&&("small-caps"===t.fontFamily?a.firstChild.style.fontVariant="small-caps":a.firstChild.style.fontFamily=sA[t.fontFamily])}}},n.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),"function"==typeof Ah().WebVTT&&!e.every((function(e){return!e.activeCues}))){for(var t=[],n=0;n<e.length;++n)for(var i=e[n],r=0;r<i.activeCues.length;++r)t.push(i.activeCues[r]);Ah().WebVTT.processCues(Ah(),t,this.el_);for(var a=0;a<e.length;++a){for(var o=e[a],s=0;s<o.activeCues.length;++s){var d=o.activeCues[s].displayState;zI(d,"vjs-text-track-cue"),zI(d,"vjs-text-track-cue-"+(o.language?o.language:a)),o.language&&ZI(d,"lang",o.language)}this.player_.textTrackSettings&&this.updateDisplayState(o)}}},t}(rE);rE.registerComponent("TextTrackDisplay",uA);var cA=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){var t=this.player_.isAudio(),n=this.localize(t?"Audio Player":"Video Player"),i=FI("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),r=e.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r},t}(rE);rE.registerComponent("LoadingSpinner",cA);var pA=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.createEl=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var i=FI("button",t=lI({className:this.buildCSSClass()},t),n=lI({type:"button"},n));return i.appendChild(FI("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.addChild=function(e,t){void 0===t&&(t={});var n=this.constructor.name;return rI.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),rE.prototype.addChild.call(this,e,t)},n.enable=function(){e.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){e.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(t){Rh().isEventKey(t,"Space")||Rh().isEventKey(t,"Enter")?t.stopPropagation():e.prototype.handleKeyDown.call(this,t)},t}(aA);rE.registerComponent("Button",pA);var hA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).mouseused_=!1,i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(e){var t=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return pE(t),void(!this.player_.tech(!0)||(II||wI)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var a=function(){return r.focus()};cE(t)?t.then(a,(function(){})):this.setTimeout(a,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(t){this.mouseused_=!1,e.prototype.handleKeyDown.call(this,t)},n.handleMouseDown=function(e){this.mouseused_=!0},t}(pA);hA.prototype.controlText_="Play Video",rE.registerComponent("BigPlayButton",hA);var fA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).controlText(n&&n.controlText||i.localize("Close")),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(t){Rh().isEventKey(t,"Esc")?(t.preventDefault(),t.stopPropagation(),this.trigger("click")):e.prototype.handleKeyDown.call(this,t)},t}(pA);rE.registerComponent("CloseButton",fA);var gA=function(e){function t(t,n){var i;return void 0===n&&(n={}),i=e.call(this,t,n)||this,n.replay=void 0===n.replay||n.replay,i.on(t,"play",(function(e){return i.handlePlay(e)})),i.on(t,"pause",(function(e){return i.handlePause(e)})),n.replay&&i.on(t,"ended",(function(e){return i.handleEnded(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){this.player_.paused()?pE(this.player_.play()):this.player_.pause()},n.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},n.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(e){var t=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(e){return t.handleSeeked(e)}))},t}(pA);gA.prototype.controlText_="Play",rE.registerComponent("PlayToggle",gA);var mA=function(e,t){e=e<0?0:e;var n=Math.floor(e%60),i=Math.floor(e/60%60),r=Math.floor(e/3600),a=Math.floor(t/60%60),o=Math.floor(t/3600);return(isNaN(e)||e===1/0)&&(r=i=n="-"),(r=r>0||o>0?r+":":"")+(i=((r||a>=10)&&i<10?"0"+i:i)+":")+(n<10?"0"+n:n)},vA=mA;function yA(e,t){return void 0===t&&(t=e),vA(e,t)}var bA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["timeupdate","ended"],(function(e){return i.updateContent(e)})),i.updateTextNode_(),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=this.buildCSSClass(),n=e.prototype.createEl.call(this,"div",{className:t+" vjs-time-control vjs-control"}),i=FI("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return n.appendChild(i),this.contentEl_=FI("span",{className:t+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,e.prototype.dispose.call(this)},n.updateTextNode_=function(e){var t=this;void 0===e&&(e=0),e=yA(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(t.contentEl_){var e=t.textNode_;e&&t.contentEl_.firstChild!==e&&(e=null,rI.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),t.textNode_=xh().createTextNode(t.formattedTime_),t.textNode_&&(e?t.contentEl_.replaceChild(t.textNode_,e):t.contentEl_.appendChild(t.textNode_))}})))},n.updateContent=function(e){},t}(rE);bA.prototype.labelText_="Time",bA.prototype.controlText_="Time",rE.registerComponent("TimeDisplay",bA);var _A=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(e){var t;t=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(t)},t}(bA);_A.prototype.labelText_="Current Time",_A.prototype.controlText_="Current Time",rE.registerComponent("CurrentTimeDisplay",_A);var TA=function(e){function t(t,n){var i,r=function(e){return i.updateContent(e)};return(i=e.call(this,t,n)||this).on(t,"durationchange",r),i.on(t,"loadstart",r),i.on(t,"loadedmetadata",r),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(e){var t=this.player_.duration();this.updateTextNode_(t)},t}(bA);TA.prototype.labelText_="Duration",TA.prototype.controlText_="Duration",rE.registerComponent("DurationDisplay",TA);var wA=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=e.prototype.createEl.call(this,"div"),i=e.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(i),t.appendChild(n),t},t}(rE);rE.registerComponent("TimeDivider",wA);var SA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"durationchange",(function(e){return i.updateContent(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var t=e.prototype.createEl.call(this);return!1!==this.options_.displayNegative&&t.insertBefore(FI("span",{},{"aria-hidden":!0},"-"),this.contentEl_),t},n.updateContent=function(e){var t;"number"==typeof this.player_.duration()&&(t=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(t))},t}(bA);SA.prototype.labelText_="Remaining Time",SA.prototype.controlText_="Remaining Time",rE.registerComponent("RemainingTimeDisplay",SA);var kA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateShowing(),i.on(i.player(),"durationchange",(function(e){return i.updateShowing(e)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=FI("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(FI("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(xh().createTextNode(this.localize("LIVE"))),t.appendChild(this.contentEl_),t},n.dispose=function(){this.contentEl_=null,e.prototype.dispose.call(this)},n.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(rE);rE.registerComponent("LiveDisplay",kA);var IA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(e){return i.updateLiveEdgeStatus(e)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=FI("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),t.appendChild(this.textEl_),t},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,e.prototype.dispose.call(this)},t}(pA);IA.prototype.controlText_="Seek to live, currently playing live",rE.registerComponent("SeekToLive",IA);var CA=function(e,t,n){return e=Number(e),Math.min(n,Math.max(t,isNaN(e)?t:e))},EA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseDown_=function(e){return i.handleMouseDown(e)},i.handleMouseUp_=function(e){return i.handleMouseUp(e)},i.handleKeyDown_=function(e){return i.handleKeyDown(e)},i.handleClick_=function(e){return i.handleClick(e)},i.handleMouseMove_=function(e){return i.handleMouseMove(e)},i.update_=function(e){return i.update(e)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}Uh(t,e);var n=t.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(t,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),n.className=n.className+" vjs-slider",n=lI({tabIndex:0},n),i=lI({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),e.prototype.createEl.call(this,t,n,i)},n.handleMouseDown=function(e){var t=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault(),"touchstart"!==e.type||SI||e.preventDefault(),JI(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(t,"mousemove",this.handleMouseMove_),this.on(t,"mouseup",this.handleMouseUp_),this.on(t,"touchmove",this.handleMouseMove_),this.on(t,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},n.handleMouseMove=function(e){},n.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;QI(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var e=this;if(this.el_&&this.bar){var t=this.getProgress();return t===this.progress_||(this.progress_=t,this.requestNamedAnimationFrame("Slider#update",(function(){var n=e.vertical()?"height":"width";e.bar.el().style[n]=(100*t).toFixed(2)+"%"}))),t}},n.getProgress=function(){return Number(CA(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(e){var t=nC(this.el_,e);return this.vertical()?t.y:t.x},n.handleKeyDown=function(t){Rh().isEventKey(t,"Left")||Rh().isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepBack()):Rh().isEventKey(t,"Right")||Rh().isEventKey(t,"Up")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){e.stopPropagation(),e.preventDefault()},n.vertical=function(e){if(void 0===e)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(rE);rE.registerComponent("Slider",EA);var AA=function(e,t){return CA(e/t*100,0,100).toFixed(2)+"%"},PA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).partEls_=[],i.on(t,"progress",(function(e){return i.update(e)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=FI("span",{className:"vjs-control-text"}),i=FI("span",{textContent:this.localize("Loaded")}),r=xh().createTextNode(": ");return this.percentageEl_=FI("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),t.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),t},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,e.prototype.dispose.call(this)},n.update=function(e){var t=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var e=t.player_.liveTracker,n=t.player_.buffered(),i=e&&e.isLive()?e.seekableEnd():t.player_.duration(),r=t.player_.bufferedEnd(),a=t.partEls_,o=AA(r,i);t.percent_!==o&&(t.el_.style.width=o,qI(t.percentageEl_,o),t.percent_=o);for(var s=0;s<n.length;s++){var d=n.start(s),l=n.end(s),u=a[s];u||(u=t.el_.appendChild(FI()),a[s]=u),u.dataset.start===d&&u.dataset.end===l||(u.dataset.start=d,u.dataset.end=l,u.style.left=AA(d,r),u.style.width=AA(l-d,r))}for(var c=a.length;c>n.length;c--)t.el_.removeChild(a[c-1]);a.length=n.length}))},t}(rE);rE.registerComponent("LoadProgressBar",PA);var xA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=jC(UC(Lh(i),i.update),MC),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n){var i=tC(this.el_),r=eC(this.player_.el()),a=e.width*t;if(r&&i){var o=e.left-r.left+a,s=e.width-a+(r.right-e.right),d=i.width/2;o<d?d+=d-o:s<d&&(d=s),d<0?d=0:d>i.width&&(d=i.width),d=Math.round(d),this.el_.style.right="-"+d+"px",this.write(n)}},n.write=function(e){qI(this.el_,e)},n.updateTime=function(e,t,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var a,o=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var s=r.player_.liveTracker.liveWindow(),d=s-t*s;a=(d<1?"":"-")+yA(d,s)}else a=yA(n,o);r.update(e,t,a),i&&i()}))},t}(rE);rE.registerComponent("TimeTooltip",xA);var OA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=jC(UC(Lh(i),i.update),MC),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(e,t){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(e,t,i)}},t}(rE);OA.prototype.options_={children:[]},OI||yI||OA.prototype.options_.children.push("timeTooltip"),rE.registerComponent("PlayProgressBar",OA);var DA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=jC(UC(Lh(i),i.update),MC),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t){var n=this,i=t*this.player_.duration();this.getChild("timeTooltip").updateTime(e,t,i,(function(){n.el_.style.left=e.width*t+"px"}))},t}(rE);DA.prototype.options_={children:["timeTooltip"]},rE.registerComponent("MouseTimeDisplay",DA);var RA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).setEventHandlers_(),i}Uh(t,e);var n=t.prototype;return n.setEventHandlers_=function(){var e=this;this.update_=UC(this,this.update),this.update=jC(this.update_,MC),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(t){return e.enableInterval_(t)},this.disableIntervalHandler_=function(t){return e.disableInterval_(t)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in xh()&&"visibilityState"in xh()&&this.on(xh(),"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(e){"hidden"===xh().visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,MC))},n.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&"ended"!==e.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(t){var n=this;if("hidden"!==xh().visibilityState){var i=e.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var e=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),t=n.player_.liveTracker,r=n.player_.duration();t&&t.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===e&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[yA(e,r),yA(r,r)],"{1} of {2}")),n.currentTime_=e,n.duration_=r),n.bar&&n.bar.update(eC(n.el()),n.getProgress())})),i}},n.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var e,t=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(e=(t-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(e=1)):e=t/this.player_.duration(),e},n.handleMouseDown=function(t){dC(t)&&(t.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),e.prototype.handleMouseDown.call(this,t))},n.handleMouseMove=function(e,t){if(void 0===t&&(t=!1),dC(e)){var n;t||this.player_.scrubbing()||this.player_.scrubbing(!0);var i=this.calculateDistance(e),r=this.player_.liveTracker;if(r&&r.isLive()){if(i>=.99)return void r.seekToLiveEdge();var a=r.seekableStart(),o=r.liveCurrentTime();if((n=a+i*r.liveWindow())>=o&&(n=o),n<=a&&(n=a+.1),n===1/0)return}else(n=i*this.player_.duration())===this.player_.duration()&&(n-=.1);this.userSeek_(n)}},n.enable=function(){e.prototype.enable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.show()},n.disable=function(){e.prototype.disable.call(this);var t=this.getChild("mouseTimeDisplay");t&&t.hide()},n.handleMouseUp=function(t){e.prototype.handleMouseUp.call(this,t),t&&t.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?pE(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(t){var n=this.player_.liveTracker;if(Rh().isEventKey(t,"Space")||Rh().isEventKey(t,"Enter"))t.preventDefault(),t.stopPropagation(),this.handleAction(t);else if(Rh().isEventKey(t,"Home"))t.preventDefault(),t.stopPropagation(),this.userSeek_(0);else if(Rh().isEventKey(t,"End"))t.preventDefault(),t.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(Rh()(t))){t.preventDefault(),t.stopPropagation();var i=10*(Rh().codes[Rh()(t)]-Rh().codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else Rh().isEventKey(t,"PgDn")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):Rh().isEventKey(t,"PgUp")?(t.preventDefault(),t.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):e.prototype.handleKeyDown.call(this,t)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in xh()&&"visibilityState"in xh()&&this.off(xh(),"visibilitychange",this.toggleVisibility_),e.prototype.dispose.call(this)},t}(EA);RA.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},OI||yI||RA.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),rE.registerComponent("SeekBar",RA);var LA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).handleMouseMove=jC(UC(Lh(i),i.handleMouseMove),MC),i.throttledHandleMouseSeek=jC(UC(Lh(i),i.handleMouseSeek),MC),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.handleMouseDownHandler_=function(e){return i.handleMouseDown(e)},i.enable(),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(e){var t=this.getChild("seekBar");if(t){var n=t.getChild("playProgressBar"),i=t.getChild("mouseTimeDisplay");if(n||i){var r=t.el(),a=tC(r),o=nC(r,e).x;o=CA(o,0,1),i&&i.update(a,o),n&&n.update(a,t.getProgress())}}},n.handleMouseSeek=function(e){var t=this.getChild("seekBar");t&&t.handleMouseMove(e)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach((function(e){return e.disable&&e.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&pE(this.player_.play())}},n.enable=function(){this.children().forEach((function(e){return e.enable&&e.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(e){var t=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(e),this.on(t,"mousemove",this.throttledHandleMouseSeek),this.on(t,"touchmove",this.throttledHandleMouseSeek),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.getChild("seekBar");t&&t.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(rE);LA.prototype.options_={children:["seekBar"]},rE.registerComponent("ProgressControl",LA);var MA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,["enterpictureinpicture","leavepictureinpicture"],(function(e){return i.handlePictureInPictureChange(e)})),i.on(t,["disablepictureinpicturechanged","loadedmetadata"],(function(e){return i.handlePictureInPictureEnabledChange(e)})),i.on(t,["loadedmetadata","audioonlymodechange","audiopostermodechange"],(function(){"audio"===t.currentType().substring(0,5)||t.audioPosterMode()||t.audioOnlyMode()?(t.isInPictureInPicture()&&t.exitPictureInPicture(),i.hide()):i.show()})),i.disable(),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+e.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){xh().pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(pA);MA.prototype.controlText_="Picture-in-Picture",rE.registerComponent("PictureInPictureToggle",MA);var UA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"fullscreenchange",(function(e){return i.handleFullscreenChange(e)})),!1===xh()[t.fsApi_.fullscreenEnabled]&&i.disable(),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+e.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(pA);UA.prototype.controlText_="Fullscreen",rE.registerComponent("FullscreenToggle",UA);var jA=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){var t=e.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return t.appendChild(e.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),t},t}(rE);rE.registerComponent("VolumeLevel",jA);var NA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=jC(UC(Lh(i),i.update),MC),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(e,t,n,i){if(!n){var r=eC(this.el_),a=eC(this.player_.el()),o=e.width*t;if(!a||!r)return;var s=e.left-a.left+o,d=e.width-o+(a.right-e.right),l=r.width/2;s<l?l+=l-s:d<l&&(l=d),l<0?l=0:l>r.width&&(l=r.width),this.el_.style.right="-"+l+"px"}this.write(i+"%")},n.write=function(e){qI(this.el_,e)},n.updateVolume=function(e,t,n,i,r){var a=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){a.update(e,t,n,i.toFixed(0)),r&&r()}))},t}(rE);rE.registerComponent("VolumeLevelTooltip",NA);var BA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).update=jC(UC(Lh(i),i.update),MC),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(e,t,n){var i=this,r=100*t;this.getChild("volumeLevelTooltip").updateVolume(e,t,n,r,(function(){n?i.el_.style.bottom=e.height*t+"px":i.el_.style.left=e.width*t+"px"}))},t}(rE);BA.prototype.options_={children:["volumeLevelTooltip"]},rE.registerComponent("MouseVolumeLevelDisplay",BA);var FA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on("slideractive",(function(e){return i.updateLastVolume_(e)})),i.on(t,"volumechange",(function(e){return i.updateARIAAttributes(e)})),t.ready((function(){return i.updateARIAAttributes()})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(t){dC(t)&&e.prototype.handleMouseDown.call(this,t)},n.handleMouseMove=function(e){var t=this.getChild("mouseVolumeLevelDisplay");if(t){var n=this.el(),i=eC(n),r=this.vertical(),a=nC(n,e);a=r?a.y:a.x,a=CA(a,0,1),t.update(i,a,r)}dC(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(e){var t=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",t),this.el_.setAttribute("aria-valuetext",t+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var e=this,t=this.player_.volume();this.one("sliderinactive",(function(){0===e.player_.volume()&&e.player_.lastVolume_(t)}))},t}(EA);FA.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},OI||yI||FA.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),FA.prototype.playerEvent="volumechange",rE.registerComponent("VolumeBar",FA);var qA=function(e){function t(t,n){var i;return void 0===n&&(n={}),n.vertical=n.vertical||!1,(void 0===n.volumeBar||cI(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),function(e,t){t.tech_&&!t.tech_.featuresVolumeControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresVolumeControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Lh(i=e.call(this,t,n)||this),t),i.throttledHandleMouseMove=jC(UC(Lh(i),i.handleMouseMove),MC),i.handleMouseUpHandler_=function(e){return i.handleMouseUp(e)},i.on("mousedown",(function(e){return i.handleMouseDown(e)})),i.on("touchstart",(function(e){return i.handleMouseDown(e)})),i.on("mousemove",(function(e){return i.handleMouseMove(e)})),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t="vjs-volume-horizontal";return this.options_.vertical&&(t="vjs-volume-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+t})},n.handleMouseDown=function(e){var t=this.el_.ownerDocument;this.on(t,"mousemove",this.throttledHandleMouseMove),this.on(t,"touchmove",this.throttledHandleMouseMove),this.on(t,"mouseup",this.handleMouseUpHandler_),this.on(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(e){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseMove),this.off(t,"touchmove",this.throttledHandleMouseMove),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(rE);qA.prototype.options_={children:["volumeBar"]},rE.registerComponent("VolumeControl",qA);var VA=function(e){function t(t,n){var i;return function(e,t){t.tech_&&!t.tech_.featuresMuteControl&&e.addClass("vjs-hidden"),e.on(t,"loadstart",(function(){t.tech_.featuresMuteControl?e.removeClass("vjs-hidden"):e.addClass("vjs-hidden")}))}(Lh(i=e.call(this,t,n)||this),t),i.on(t,["loadstart","volumechange"],(function(e){return i.update(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+e.prototype.buildCSSClass.call(this)},n.handleClick=function(e){var t=this.player_.volume(),n=this.player_.lastVolume_();if(0===t){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(e){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var e=this.player_.volume(),t=3;OI&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===e||this.player_.muted()?t=0:e<.33?t=1:e<.67&&(t=2);for(var n=0;n<4;n++)WI(this.el_,"vjs-vol-"+n);zI(this.el_,"vjs-vol-"+t)},n.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)},t}(pA);VA.prototype.controlText_="Mute",rE.registerComponent("MuteToggle",VA);var HA=function(e){function t(t,n){var i;return void 0===n&&(n={}),void 0!==n.inline?n.inline=n.inline:n.inline=!0,(void 0===n.volumeControl||cI(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=e.call(this,t,n)||this).handleKeyPressHandler_=function(e){return i.handleKeyPress(e)},i.on(t,["loadstart"],(function(e){return i.volumePanelState_(e)})),i.on(i.muteToggle,"keyup",(function(e){return i.handleKeyPress(e)})),i.on(i.volumeControl,"keyup",(function(e){return i.handleVolumeControlKeyUp(e)})),i.on("keydown",(function(e){return i.handleKeyPress(e)})),i.on("mouseover",(function(e){return i.handleMouseOver(e)})),i.on("mouseout",(function(e){return i.handleMouseOut(e)})),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}Uh(t,e);var n=t.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var t="vjs-volume-panel-horizontal";return this.options_.inline||(t="vjs-volume-panel-vertical"),e.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+t})},n.dispose=function(){this.handleMouseOut(),e.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(e){Rh().isEventKey(e,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(e){this.addClass("vjs-hover"),AC(xh(),"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(e){this.removeClass("vjs-hover"),PC(xh(),"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(e){Rh().isEventKey(e,"Esc")&&this.handleMouseOut()},t}(rE);HA.prototype.options_={children:["muteToggle","volumeControl"]},rE.registerComponent("VolumePanel",HA);var zA=function(e){function t(t,n){var i;return i=e.call(this,t,n)||this,n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",(function(e){return i.handleKeyDown(e)})),i.boundHandleBlur_=function(e){return i.handleBlur(e)},i.boundHandleTapClick_=function(e){return i.handleTapClick(e)},i}Uh(t,e);var n=t.prototype;return n.addEventListenerForItem=function(e){e instanceof rE&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(e){e instanceof rE&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(t){"string"==typeof t&&(t=this.getChild(t)),this.removeEventListenerForItem(t),e.prototype.removeChild.call(this,t)},n.addItem=function(e){var t=this.addChild(e);t&&this.addEventListenerForItem(t)},n.createEl=function(){var t=this.options_.contentElType||"ul";this.contentEl_=FI(t,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=e.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),AC(n,"click",(function(e){e.preventDefault(),e.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,e.prototype.dispose.call(this)},n.handleBlur=function(e){var t=e.relatedTarget||xh().activeElement;if(!this.children().some((function(e){return e.el()===t}))){var n=this.menuButton_;n&&n.buttonPressed_&&t!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var t=this.children();if(!Array.isArray(t))return;var n=t.filter((function(t){return t.el()===e.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(e){Rh().isEventKey(e,"Left")||Rh().isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(Rh().isEventKey(e,"Right")||Rh().isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},n.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1),this.focus(e)},n.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1),this.focus(e)},n.focus=function(e){void 0===e&&(e=0);var t=this.children().slice();t.length&&t[0].hasClass("vjs-menu-title")&&t.shift(),t.length>0&&(e<0?e=0:e>=t.length&&(e=t.length-1),this.focusedChild_=e,t[e].el_.focus())},t}(rE);rE.registerComponent("Menu",zA);var WA=function(e){function t(t,n){var i;void 0===n&&(n={}),(i=e.call(this,t,n)||this).menuButton_=new pA(t,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var r=pA.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+r,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;var a=function(e){return i.handleClick(e)};return i.handleMenuKeyUp_=function(e){return i.handleMenuKeyUp(e)},i.on(i.menuButton_,"tap",a),i.on(i.menuButton_,"click",a),i.on(i.menuButton_,"keydown",(function(e){return i.handleKeyDown(e)})),i.on(i.menuButton_,"mouseenter",(function(){i.addClass("vjs-hover"),i.menu.show(),AC(xh(),"keyup",i.handleMenuKeyUp_)})),i.on("mouseleave",(function(e){return i.handleMouseLeave(e)})),i.on("keydown",(function(e){return i.handleSubmenuKeyDown(e)})),i}Uh(t,e);var n=t.prototype;return n.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},n.createMenu=function(){var e=new zA(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var t=FI("li",{className:"vjs-menu-title",textContent:JC(this.options_.title),tabIndex:-1}),n=new rE(this.player_,{el:t});e.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)e.addItem(this.items[i]);return e},n.createItems=function(){},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+pA.prototype.buildCSSClass()+" "+e.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var t="vjs-menu-button";return!0===this.options_.inline?t+="-inline":t+="-popup","vjs-menu-button "+t+" "+e.prototype.buildCSSClass.call(this)},n.controlText=function(e,t){return void 0===t&&(t=this.menuButton_.el()),this.menuButton_.controlText(e,t)},n.dispose=function(){this.handleMouseLeave(),e.prototype.dispose.call(this)},n.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(e){this.removeClass("vjs-hover"),PC(xh(),"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(e){Rh().isEventKey(e,"Esc")||Rh().isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),Rh().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(Rh().isEventKey(e,"Up")||Rh().isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(e){(Rh().isEventKey(e,"Esc")||Rh().isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},n.handleSubmenuKeyDown=function(e){(Rh().isEventKey(e,"Esc")||Rh().isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),Rh().isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),OI&&NI())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(rE);rE.registerComponent("MenuButton",WA);var $A=function(e){function t(t,n){var i,r=n.tracks;if((i=e.call(this,t,n)||this).items.length<=1&&i.hide(),!r)return Lh(i);var a=UC(Lh(i),i.update);return r.addEventListener("removetrack",a),r.addEventListener("addtrack",a),r.addEventListener("labelchange",a),i.player_.on("ready",a),i.player_.on("dispose",(function(){r.removeEventListener("removetrack",a),r.removeEventListener("addtrack",a),r.removeEventListener("labelchange",a)})),i}return Uh(t,e),t}(WA);rE.registerComponent("TrackButton",$A);var GA=["Tab","Esc","Up","Down","Right","Left"],KA=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}Uh(t,e);var n=t.prototype;return n.createEl=function(t,n,i){this.nonIconControl=!0;var r=e.prototype.createEl.call(this,"li",lI({className:"vjs-menu-item",tabIndex:-1},n),i);return r.replaceChild(FI("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},n.handleKeyDown=function(t){GA.some((function(e){return Rh().isEventKey(t,e)}))||e.prototype.handleKeyDown.call(this,t)},n.handleClick=function(e){this.selected(!0)},n.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(aA);rE.registerComponent("MenuItem",KA);var XA=function(e){function t(t,n){var i,r=n.track,a=t.textTracks();n.label=r.label||r.language||"Unknown",n.selected="showing"===r.mode,(i=e.call(this,t,n)||this).track=r,i.kinds=(n.kinds||[n.kind||i.track.kind]).filter(Boolean);var o,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Lh(i),t)},d=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleSelectedLanguageChange.apply(Lh(i),t)};return t.on(["loadstart","texttrackchange"],s),a.addEventListener("change",s),a.addEventListener("selectedlanguagechange",d),i.on("dispose",(function(){t.off(["loadstart","texttrackchange"],s),a.removeEventListener("change",s),a.removeEventListener("selectedlanguagechange",d)})),void 0===a.onchange&&i.on(["tap","click"],(function(){if("object"!=typeof Ah().Event)try{o=new(Ah().Event)("change")}catch(e){}o||(o=xh().createEvent("Event")).initEvent("change",!0,!0),a.dispatchEvent(o)})),i.handleTracksChange(),i}Uh(t,e);var n=t.prototype;return n.handleClick=function(t){var n=this.track,i=this.player_.textTracks();if(e.prototype.handleClick.call(this,t),i)for(var r=0;r<i.length;r++){var a=i[r];-1!==this.kinds.indexOf(a.kind)&&(a===n?"showing"!==a.mode&&(a.mode="showing"):"disabled"!==a.mode&&(a.mode="disabled"))}},n.handleTracksChange=function(e){var t="showing"===this.track.mode;t!==this.isSelected_&&this.selected(t)},n.handleSelectedLanguageChange=function(e){if("showing"===this.track.mode){var t=this.player_.cache_.selectedLanguage;if(t&&t.enabled&&t.language===this.track.language&&t.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,e.prototype.dispose.call(this)},t}(KA);rE.registerComponent("TextTrackMenuItem",XA);var ZA=function(e){function t(t,n){return n.track={player:t,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,e.call(this,t,n)||this}Uh(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(this.options_.kinds.indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(e){for(var t=this.player().textTracks(),n=!0,i=0,r=t.length;i<r;i++){var a=t[i];if(["captions","descriptions","subtitles"].indexOf(a.kind)>-1&&"showing"===a.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(XA);rE.registerComponent("OffTextTrackMenuItem",ZA);var YA=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.textTracks(),e.call(this,t,n)||this}return Uh(t,e),t.prototype.createItems=function(e,t){var n;void 0===e&&(e=[]),void 0===t&&(t=XA),this.label_&&(n=this.label_+" off"),e.push(new ZA(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var a=i[r];if(this.kinds_.indexOf(a.kind)>-1){var o=new t(this.player_,{track:a,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});o.addClass("vjs-"+a.kind+"-menu-item"),e.push(o)}}return e},t}($A);rE.registerComponent("TextTrackButton",YA);var JA=function(e){function t(t,n){var i,r=n.track,a=n.cue,o=t.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=a.text,n.selected=a.startTime<=o&&o<a.endTime,(i=e.call(this,t,n)||this).track=r,i.cue=a,i}return Uh(t,e),t.prototype.handleClick=function(t){e.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(KA);rE.registerComponent("ChaptersTrackMenuItem",JA);var QA=function(e){function t(t,n,i){var r;return(r=e.call(this,t,n,i)||this).selectCurrentItem_=function(){r.items.forEach((function(e){e.selected(r.track_.activeCues[0]===e.cue)}))},r}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+e.prototype.buildWrapperCSSClass.call(this)},n.update=function(t){if(!t||!t.track||"chapters"===t.track.kind){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),e.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&e.prototype.update.call(this)}},n.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var t=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);t&&t.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},n.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],t=e.length-1;t>=0;t--){var n=e[t];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(JC(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),e.prototype.createMenu.call(this)},n.createItems=function(){var e=[];if(!this.track_)return e;var t=this.track_.cues;if(!t)return e;for(var n=0,i=t.length;n<i;n++){var r=t[n],a=new JA(this.player_,{track:this.track_,cue:r});e.push(a)}return e},t}(YA);QA.prototype.kind_="chapters",QA.prototype.controlText_="Chapters",rE.registerComponent("ChaptersButton",QA);var eP=function(e){function t(t,n,i){var r;r=e.call(this,t,n,i)||this;var a=t.textTracks(),o=UC(Lh(r),r.handleTracksChange);return a.addEventListener("change",o),r.on("dispose",(function(){a.removeEventListener("change",o)})),r}Uh(t,e);var n=t.prototype;return n.handleTracksChange=function(e){for(var t=this.player().textTracks(),n=!1,i=0,r=t.length;i<r;i++){var a=t[i];if(a.kind!==this.kind_&&"showing"===a.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(YA);eP.prototype.kind_="descriptions",eP.prototype.controlText_="Descriptions",rE.registerComponent("DescriptionsButton",eP);var tP=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+e.prototype.buildWrapperCSSClass.call(this)},t}(YA);tP.prototype.kind_="subtitles",tP.prototype.controlText_="Subtitles",rE.registerComponent("SubtitlesButton",tP);var nP=function(e){function t(t,n){var i;return n.track={player:t,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=e.call(this,t,n)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return Uh(t,e),t.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(XA);rE.registerComponent("CaptionSettingsMenuItem",nP);var iP=function(e){function t(t,n,i){return e.call(this,t,n,i)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new nP(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t)},t}(YA);iP.prototype.kind_="captions",iP.prototype.controlText_="Captions",rE.registerComponent("CaptionsButton",iP);var rP=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(t,n,i){var r=e.prototype.createEl.call(this,t,n,i),a=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(a.appendChild(FI("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(FI("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),r},t}(XA);rE.registerComponent("SubsCapsMenuItem",rP);var aP=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(JC(i.label_)),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var t=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(t.push(new nP(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e.prototype.createItems.call(this,t,rP)},t}(YA);aP.prototype.kinds_=["captions","subtitles"],aP.prototype.controlText_="Subtitles",rE.registerComponent("SubsCapsButton",aP);var oP=function(e){function t(t,n){var i,r=n.track,a=t.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=e.call(this,t,n)||this).track=r,i.addClass("vjs-"+r.kind+"-menu-item");var o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.handleTracksChange.apply(Lh(i),t)};return a.addEventListener("change",o),i.on("dispose",(function(){a.removeEventListener("change",o)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(t,n,i){var r=e.prototype.createEl.call(this,t,n,i),a=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(a.appendChild(FI("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),a.appendChild(FI("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),r},n.handleClick=function(t){if(e.prototype.handleClick.call(this,t),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),i=0;i<n.length;i++){var r=n[i];r!==this.track&&(r.enabled=r===this.track)}},n.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(KA);rE.registerComponent("AudioTrackMenuItem",oP);var sP=function(e){function t(t,n){return void 0===n&&(n={}),n.tracks=t.audioTracks(),e.call(this,t,n)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(e){void 0===e&&(e=[]),this.hideThreshold_=1;for(var t=this.player_.audioTracks(),n=0;n<t.length;n++){var i=t[n];e.push(new oP(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return e},t}($A);sP.prototype.controlText_="Audio Track",rE.registerComponent("AudioTrackButton",sP);var dP=function(e){function t(t,n){var i,r=n.rate,a=parseFloat(r,10);return n.label=r,n.selected=a===t.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=e.call(this,t,n)||this).label=r,i.rate=a,i.on(t,"ratechange",(function(e){return i.update(e)})),i}Uh(t,e);var n=t.prototype;return n.handleClick=function(t){e.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(KA);dP.prototype.contentElType="button",rE.registerComponent("PlaybackRateMenuItem",dP);var lP=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(t,"loadstart",(function(e){return i.updateVisibility(e)})),i.on(t,"ratechange",(function(e){return i.updateLabel(e)})),i.on(t,"playbackrateschange",(function(e){return i.handlePlaybackRateschange(e)})),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){var t=e.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=FI("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),t.appendChild(this.labelEl_),t},n.dispose=function(){this.labelEl_=null,e.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+e.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var e=this.playbackRates(),t=[],n=e.length-1;n>=0;n--)t.push(new dP(this.player(),{rate:e[n]+"x"}));return t},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(e){var t=this.player().playbackRate(),n=this.playbackRates(),i=(n.indexOf(t)+1)%n.length;this.player().playbackRate(n[i])},n.handlePlaybackRateschange=function(e){this.update()},n.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(WA);lP.prototype.controlText_="Playback Rate",rE.registerComponent("PlaybackRateMenuButton",lP);var uP=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(t,n,i){return void 0===t&&(t="div"),void 0===n&&(n={}),void 0===i&&(i={}),n.className||(n.className=this.buildCSSClass()),e.prototype.createEl.call(this,t,n,i)},t}(rE);rE.registerComponent("Spacer",uP);var cP=function(e){function t(){return e.apply(this,arguments)||this}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+e.prototype.buildCSSClass.call(this)},n.createEl=function(){return e.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},t}(uP);rE.registerComponent("CustomControlSpacer",cP);var pP=function(e){function t(){return e.apply(this,arguments)||this}return Uh(t,e),t.prototype.createEl=function(){return e.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(rE);pP.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in xh()&&pP.prototype.options_.children.splice(pP.prototype.options_.children.length-1,0,"pictureInPictureToggle"),rE.registerComponent("ControlBar",pP);var hP=function(e){function t(t,n){var i;return(i=e.call(this,t,n)||this).on(t,"error",(function(e){return i.open(e)})),i}Uh(t,e);var n=t.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+e.prototype.buildCSSClass.call(this)},n.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(fE);hP.prototype.options_=Oh({},fE.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),rE.registerComponent("ErrorDisplay",hP);var fP="vjs-text-track-settings",gP=["#000","Black"],mP=["#00F","Blue"],vP=["#0FF","Cyan"],yP=["#0F0","Green"],bP=["#F0F","Magenta"],_P=["#F00","Red"],TP=["#FFF","White"],wP=["#FF0","Yellow"],SP=["1","Opaque"],kP=["0.5","Semi-Transparent"],IP=["0","Transparent"],CP={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[gP,TP,_P,yP,mP,wP,bP,vP]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[SP,kP,IP]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[TP,gP,_P,yP,mP,wP,bP,vP]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(e){return"1.00"===e?null:Number(e)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[SP,kP]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[IP,kP,SP]}};function EP(e,t){if(t&&(e=t(e)),e&&"none"!==e)return e}CP.windowColor.options=CP.backgroundColor.options;var AP=function(e){function t(t,n){var i;return n.temporary=!1,(i=e.call(this,t,n)||this).updateDisplay=i.updateDisplay.bind(Lh(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=FI("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),dI(CP,(function(e){i.on(i.$(e.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}Uh(t,e);var n=t.prototype;return n.dispose=function(){this.endDialog=null,e.prototype.dispose.call(this)},n.createElSelect_=function(e,t,n){var i=this;void 0===t&&(t=""),void 0===n&&(n="label");var r=CP[e],a=r.id.replace("%s",this.id_),o=[t,a].join(" ").trim();return["<"+n+' id="'+a+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+o+'">'].concat(r.options.map((function(e){var t=a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+t+'" value="'+e[0]+'" ','aria-labelledby="'+o+" "+t+'">',i.localize(e[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return FI("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return FI("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var e=this.localize("restore all settings to the default values");return FI("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return e.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var e,t,n,i=this;return t=function(e,t,n){var r,a,o=(r=i.$(t.selector),a=t.parser,EP(r.options[r.options.selectedIndex].value,a));return void 0!==o&&(e[n]=o),e},void 0===(n={})&&(n=0),sI(e=CP).reduce((function(n,i){return t(n,e[i],i)}),n)},n.setValues=function(e){var t=this;dI(CP,(function(n,i){!function(e,t,n){if(t)for(var i=0;i<e.options.length;i++)if(EP(e.options[i].value,n)===t){e.selectedIndex=i;break}}(t.$(n.selector),e[i],n.parser)}))},n.setDefaults=function(){var e=this;dI(CP,(function(t){var n=t.hasOwnProperty("default")?t.default:0;e.$(t.selector).selectedIndex=n}))},n.restoreSettings=function(){var e;try{e=JSON.parse(Ah().localStorage.getItem(fP))}catch(e){rI.warn(e)}e&&this.setValues(e)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?Ah().localStorage.setItem(fP,JSON.stringify(e)):Ah().localStorage.removeItem(fP)}catch(e){rI.warn(e)}}},n.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,t=e&&e.subsCapsButton,n=e&&e.captionsButton;t?t.focus():n&&n.focus()},t}(fE);rE.registerComponent("TextTrackSettings",AP);var PP=function(e){function t(t,n){var i,r=n.ResizeObserver||Ah().ResizeObserver;null===n.ResizeObserver&&(r=!1);var a=QC({createEl:!r,reportTouchActivity:!1},n);return(i=e.call(this,t,a)||this).ResizeObserver=n.ResizeObserver||Ah().ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(e,t,n,i){var r;void 0===i&&(i=Ah());var a=function(){var t=this,n=arguments,a=function(){r=null,a=null,e.apply(t,n)};i.clearTimeout(r),r=i.setTimeout(a,100)};return a.cancel=function(){i.clearTimeout(r),r=null},a}((function(){i.resizeHandler()}),0,0,Lh(i)),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(t.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var e=i.debouncedHandler_,t=i.unloadListener_=function(){PC(this,"resize",e),PC(this,"unload",t),t=null};AC(i.el_.contentWindow,"unload",t),AC(i.el_.contentWindow,"resize",e)}},i.one("load",i.loadListener_)),i}Uh(t,e);var n=t.prototype;return n.createEl=function(){return e.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,e.prototype.dispose.call(this)},t}(rE);rE.registerComponent("ResizeManager",PP);var xP={trackingThreshold:20,liveTolerance:15},OP=function(e){function t(t,n){var i,r=QC(xP,n,{createEl:!1});return(i=e.call(this,t,r)||this).handleVisibilityChange_=function(e){return i.handleVisibilityChange(e)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(e){return i.handlePlay(e)},i.handleFirstTimeupdate_=function(e){return i.handleFirstTimeupdate(e)},i.handleSeeked_=function(e){return i.handleSeeked(e)},i.seekToLiveEdge_=function(e){return i.seekToLiveEdge(e)},i.reset_(),i.on(i.player_,"durationchange",(function(e){return i.handleDurationchange(e)})),i.on(i.player_,"canplay",(function(){return i.toggleTracking()})),II&&"hidden"in xh()&&"visibilityState"in xh()&&i.on(xh(),"visibilitychange",i.handleVisibilityChange_),i}Uh(t,e);var n=t.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(xh().hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var e=this.player_.seekable();if(e&&e.length){var t=Number(Ah().performance.now().toFixed(4)),n=-1===this.lastTime_?0:(t-this.lastTime_)/1e3;this.lastTime_=t,this.pastSeekEnd_=this.pastSeekEnd()+n;var i=this.liveCurrentTime(),r=this.player_.currentTime(),a=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(a=!1),a!==this.behindLiveEdge_&&(this.behindLiveEdge_=a,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,MC),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.end(n));return t.length?t.sort()[t.length-1]:1/0},n.seekableStart=function(){for(var e=this.player_.seekable(),t=[],n=e?e.length:0;n--;)t.push(e.start(n));return t.length?t.sort()[0]:0},n.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var e=this.seekableEnd();return-1!==this.lastSeekEnd_&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"==typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(xh(),"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),e.prototype.dispose.call(this)},t}(rE);rE.registerComponent("LiveTracker",OP);var DP,RP=function(e){var t=e.el();if(t.hasAttribute("src"))return e.triggerSourceset(t.src),!0;var n=e.$$("source"),i=[],r="";if(!n.length)return!1;for(var a=0;a<n.length;a++){var o=n[a].src;o&&-1===i.indexOf(o)&&i.push(o)}return!!i.length&&(1===i.length&&(r=i[0]),e.triggerSourceset(r),!0)},LP=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(e){var t=xh().createElement(this.nodeName.toLowerCase());t.innerHTML=e;for(var n=xh().createDocumentFragment();t.childNodes.length;)n.appendChild(t.childNodes[0]);return this.innerText="",Ah().Element.prototype.appendChild.call(this,n),this.innerHTML}}),MP=function(e,t){for(var n={},i=0;i<e.length&&!((n=Object.getOwnPropertyDescriptor(e[i],t))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},UP=function(e){var t=e.el();if(!t.resetSourceWatch_){var n={},i=function(e){return MP([e.el(),Ah().HTMLMediaElement.prototype,Ah().Element.prototype,LP],"innerHTML")}(e),r=function(n){return function(){for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];var o=n.apply(t,r);return RP(e),o}};["append","appendChild","insertAdjacentHTML"].forEach((function(e){t[e]&&(n[e]=t[e],t[e]=r(n[e]))})),Object.defineProperty(t,"innerHTML",QC(i,{set:r(i.set)})),t.resetSourceWatch_=function(){t.resetSourceWatch_=null,Object.keys(n).forEach((function(e){t[e]=n[e]})),Object.defineProperty(t,"innerHTML",i)},e.one("sourceset",t.resetSourceWatch_)}},jP=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?xE(Ah().Element.prototype.getAttribute.call(this,"src")):""},set:function(e){return Ah().Element.prototype.setAttribute.call(this,"src",e),e}}),NP=function(e,t,n,i){void 0===i&&(i=!0);var r=function(n){return Object.defineProperty(e,t,{value:n,enumerable:!0,writable:!0})},a={configurable:!0,enumerable:!0,get:function(){var e=n();return r(e),e}};return i&&(a.set=r),Object.defineProperty(e,t,a)},BP=function(e){function t(t,n){var i;i=e.call(this,t,n)||this;var r=t.source,a=!1;if(i.featuresVideoFrameCallback=i.featuresVideoFrameCallback&&"VIDEO"===i.el_.tagName,r&&(i.el_.currentSrc!==r.src||t.tag&&3===t.tag.initNetworkState_)?i.setSource(r):i.handleLateInit_(i.el_),t.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var o=i.el_.childNodes,s=o.length,d=[];s--;){var l=o[s];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),a||i.el_.hasAttribute("crossorigin")||!DE(l.src)||(a=!0)):d.push(l))}for(var u=0;u<d.length;u++)i.el_.removeChild(d[u])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&a&&rI.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(AI||xI||_I)&&!0===t.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}Uh(t,e);var n=t.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,e.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){!function(e){if(e.featuresSourceset){var t=e.el();if(!t.resetSourceset_){var n=function(e){return MP([e.el(),Ah().HTMLMediaElement.prototype,jP],"src")}(e),i=t.setAttribute,r=t.load;Object.defineProperty(t,"src",QC(n,{set:function(i){var r=n.set.call(t,i);return e.triggerSourceset(t.src),r}})),t.setAttribute=function(n,r){var a=i.call(t,n,r);return/src/i.test(n)&&e.triggerSourceset(t.src),a},t.load=function(){var n=r.call(t);return RP(e)||(e.triggerSourceset(""),UP(e)),n},t.currentSrc?e.triggerSourceset(t.currentSrc):RP(e)||UP(e),t.resetSourceset_=function(){t.resetSourceset_=null,t.load=r,t.setAttribute=i,Object.defineProperty(t,"src",n),t.resetSourceWatch_&&t.resetSourceWatch_()}}}}(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var e,t=this.textTracks(),n=function(){e=[];for(var n=0;n<t.length;n++){var i=t[n];"metadata"===i.kind&&e.push({track:i,storedMode:i.mode})}};n(),t.addEventListener("change",n),this.on("dispose",(function(){return t.removeEventListener("change",n)}));var i=function n(){for(var i=0;i<e.length;i++){var r=e[i];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}t.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){t.removeEventListener("change",n),t.removeEventListener("change",i),t.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){t.removeEventListener("change",n),t.addEventListener("change",n),t.removeEventListener("change",i)}))},n.overrideNative_=function(e,t){var n=this;if(t===this["featuresNative"+e+"Tracks"]){var i=e.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach((function(e){n.el()[i+"Tracks"].removeEventListener(e,n[i+"TracksListeners_"][e])})),this["featuresNative"+e+"Tracks"]=!t,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},n.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},n.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},n.proxyNativeTracksForType_=function(e){var t=this,n=FE[e],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var a={change:function(n){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===e&&t[qE.remoteText.getterName]().trigger(i)},addtrack:function(e){r.addTrack(e.track)},removetrack:function(e){r.removeTrack(e.track)}},o=function(){for(var e=[],t=0;t<r.length;t++){for(var n=!1,a=0;a<i.length;a++)if(i[a]===r[t]){n=!0;break}n||e.push(r[t])}for(;e.length;)r.removeTrack(e.shift())};this[n.getterName+"Listeners_"]=a,Object.keys(a).forEach((function(e){var n=a[e];i.addEventListener(e,n),t.on("dispose",(function(t){return i.removeEventListener(e,n)}))})),this.on("loadstart",o),this.on("dispose",(function(e){return t.off("loadstart",o)}))}},n.proxyNativeTracks_=function(){var e=this;FE.names.forEach((function(t){e.proxyNativeTracksForType_(t)}))},n.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=xh().createElement("video");var i=QC({},this.options_.tag&&KI(this.options_.tag));AI&&!0===this.options_.nativeControlsForTouch||delete i.controls,GI(e,lI(i,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}void 0!==this.options_.preload&&ZI(e,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],a=0;a<r.length;a++){var o=r[a],s=this.options_[o];void 0!==s&&(s?ZI(e,o,o):YI(e,o),e[o]=s)}return e},n.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState){if(0===e.readyState){var t=!1,n=function(){t=!0};this.on("loadstart",n);var i=function(){t||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),t||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),e.readyState>=2&&r.push("loadeddata"),e.readyState>=3&&r.push("canplay"),e.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(e){this.trigger(e)}),this)}))}},n.setScrubbing=function(e){this.isScrubbing_=e},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&DI?this.el_.fastSeek(e):this.el_.currentTime=e}catch(e){rI(e,"Video is not ready. (Video.js)")}},n.duration=function(){var e=this;return this.el_.duration===1/0&&yI&&SI&&0===this.el_.currentTime?(this.on("timeupdate",(function t(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",t))})),NaN):this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var t=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",t),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){e.off("webkitbeginfullscreen",n),e.off("webkitendfullscreen",t)}))}},n.supportsFullScreen=function(){if("function"==typeof this.el_.webkitEnterFullScreen){var e=Ah().navigator&&Ah().navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},n.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)pE(this.el_.play()),this.setTimeout((function(){e.pause();try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{e.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.requestVideoFrameCallback=function(t){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(t):e.prototype.requestVideoFrameCallback.call(this,t)},n.cancelVideoFrameCallback=function(t){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(t):e.prototype.cancelVideoFrameCallback.call(this,t)},n.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)},n.reset=function(){t.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(e){this.el_.controls=!!e},n.addTextTrack=function(t,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(t,n,i):e.prototype.addTextTrack.call(this,t,n,i)},n.createRemoteTextTrack=function(t){if(!this.featuresNativeTextTracks)return e.prototype.createRemoteTextTrack.call(this,t);var n=xh().createElement("track");return t.kind&&(n.kind=t.kind),t.label&&(n.label=t.label),(t.language||t.srclang)&&(n.srclang=t.language||t.srclang),t.default&&(n.default=t.default),t.id&&(n.id=t.id),t.src&&(n.src=t.src),n},n.addRemoteTextTrack=function(t,n){var i=e.prototype.addRemoteTextTrack.call(this,t,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},n.removeRemoteTextTrack=function(t){if(e.prototype.removeRemoteTextTrack.call(this,t),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)t!==n[i]&&t!==n[i].track||this.el().removeChild(n[i])},n.getVideoPlaybackQuality=function(){if("function"==typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};return void 0!==this.el().webkitDroppedFrameCount&&void 0!==this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),Ah().performance&&"function"==typeof Ah().performance.now?e.creationTime=Ah().performance.now():Ah().performance&&Ah().performance.timing&&"number"==typeof Ah().performance.timing.navigationStart&&(e.creationTime=Ah().Date.now()-Ah().performance.timing.navigationStart),e},t}(HE);NP(BP,"TEST_VID",(function(){if(UI()){var e=xh().createElement("video"),t=xh().createElement("track");return t.kind="captions",t.srclang="en",t.label="English",e.appendChild(t),e}})),BP.isSupported=function(){try{BP.TEST_VID.volume=.5}catch(e){return!1}return!(!BP.TEST_VID||!BP.TEST_VID.canPlayType)},BP.canPlayType=function(e){return BP.TEST_VID.canPlayType(e)},BP.canPlaySource=function(e,t){return BP.canPlayType(e.type)},BP.canControlVolume=function(){try{var e=BP.TEST_VID.volume;BP.TEST_VID.volume=e/2+.1;var t=e!==BP.TEST_VID.volume;return t&&OI?(Ah().setTimeout((function(){BP&&BP.prototype&&(BP.prototype.featuresVolumeControl=e!==BP.TEST_VID.volume)})),!1):t}catch(e){return!1}},BP.canMuteVolume=function(){try{var e=BP.TEST_VID.muted;return BP.TEST_VID.muted=!e,BP.TEST_VID.muted?ZI(BP.TEST_VID,"muted","muted"):YI(BP.TEST_VID,"muted"),e!==BP.TEST_VID.muted}catch(e){return!1}},BP.canControlPlaybackRate=function(){if(yI&&SI&&kI<58)return!1;try{var e=BP.TEST_VID.playbackRate;return BP.TEST_VID.playbackRate=e/2+.1,e!==BP.TEST_VID.playbackRate}catch(e){return!1}},BP.canOverrideAttributes=function(){try{var e=function(){};Object.defineProperty(xh().createElement("video"),"src",{get:e,set:e}),Object.defineProperty(xh().createElement("audio"),"src",{get:e,set:e}),Object.defineProperty(xh().createElement("video"),"innerHTML",{get:e,set:e}),Object.defineProperty(xh().createElement("audio"),"innerHTML",{get:e,set:e})}catch(e){return!1}return!0},BP.supportsNativeTextTracks=function(){return DI||OI&&SI},BP.supportsNativeVideoTracks=function(){return!(!BP.TEST_VID||!BP.TEST_VID.videoTracks)},BP.supportsNativeAudioTracks=function(){return!(!BP.TEST_VID||!BP.TEST_VID.audioTracks)},BP.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(e){var t=e[0],n=e[1];NP(BP.prototype,t,(function(){return BP[n]()}),!0)})),BP.prototype.featuresVolumeControl=BP.canControlVolume(),BP.prototype.movingMediaElementInDOM=!OI,BP.prototype.featuresFullscreenResize=!0,BP.prototype.featuresProgressEvents=!0,BP.prototype.featuresTimeupdateEvents=!0,BP.prototype.featuresVideoFrameCallback=!(!BP.TEST_VID||!BP.TEST_VID.requestVideoFrameCallback),BP.patchCanPlayType=function(){bI>=4&&!TI&&!SI&&(DP=BP.TEST_VID&&BP.TEST_VID.constructor.prototype.canPlayType,BP.TEST_VID.constructor.prototype.canPlayType=function(e){return e&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(e)?"maybe":DP.call(this,e)})},BP.unpatchCanPlayType=function(){var e=BP.TEST_VID.constructor.prototype.canPlayType;return DP&&(BP.TEST_VID.constructor.prototype.canPlayType=DP),e},BP.patchCanPlayType(),BP.disposeMediaElement=function(e){if(e){for(e.parentNode&&e.parentNode.removeChild(e);e.hasChildNodes();)e.removeChild(e.firstChild);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},BP.resetMediaElement=function(e){if(e){for(var t=e.querySelectorAll("source"),n=t.length;n--;)e.removeChild(t[n]);e.removeAttribute("src"),"function"==typeof e.load&&function(){try{e.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(e){BP.prototype[e]=function(){return this.el_[e]||this.el_.hasAttribute(e)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(e){BP.prototype["set"+JC(e)]=function(t){this.el_[e]=t,t?this.el_.setAttribute(e,e):this.el_.removeAttribute(e)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(e){BP.prototype[e]=function(){return this.el_[e]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(e){BP.prototype["set"+JC(e)]=function(t){this.el_[e]=t}})),["pause","load","play"].forEach((function(e){BP.prototype[e]=function(){return this.el_[e]()}})),HE.withSourceHandlers(BP),BP.nativeSourceHandler={},BP.nativeSourceHandler.canPlayType=function(e){try{return BP.TEST_VID.canPlayType(e)}catch(e){return""}},BP.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return BP.nativeSourceHandler.canPlayType(e.type);if(e.src){var n=OE(e.src);return BP.nativeSourceHandler.canPlayType("video/"+n)}return""},BP.nativeSourceHandler.handleSource=function(e,t,n){t.setSrc(e.src)},BP.nativeSourceHandler.dispose=function(){},BP.registerSourceHandler(BP.nativeSourceHandler),HE.registerTech("Html5",BP);var FP=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],qP={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},VP=["tiny","xsmall","small","medium","large","xlarge","huge"],HP={};VP.forEach((function(e){var t="x"===e.charAt(0)?"x-"+e.substring(1):e;HP[e]="vjs-layout-"+t}));var zP={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},WP=function(e){function t(n,i,r){var a;if(n.id=n.id||i.id||"vjs_video_"+TC(),(i=lI(t.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"==typeof n.closest){var o=n.closest("[lang]");o&&o.getAttribute&&(i.language=o.getAttribute("lang"))}else for(var s=n;s&&1===s.nodeType;){if(KI(s).hasOwnProperty("lang")){i.language=s.getAttribute("lang");break}s=s.parentNode}if((a=e.call(this,null,i,r)||this).boundDocumentFullscreenChange_=function(e){return a.documentFullscreenChange_(e)},a.boundFullWindowOnEscKey_=function(e){return a.fullWindowOnEscKey(e)},a.boundUpdateStyleEl_=function(e){return a.updateStyleEl_(e)},a.boundApplyInitTime_=function(e){return a.applyInitTime_(e)},a.boundUpdateCurrentBreakpoint_=function(e){return a.updateCurrentBreakpoint_(e)},a.boundHandleTechClick_=function(e){return a.handleTechClick_(e)},a.boundHandleTechDoubleClick_=function(e){return a.handleTechDoubleClick_(e)},a.boundHandleTechTouchStart_=function(e){return a.handleTechTouchStart_(e)},a.boundHandleTechTouchMove_=function(e){return a.handleTechTouchMove_(e)},a.boundHandleTechTouchEnd_=function(e){return a.handleTechTouchEnd_(e)},a.boundHandleTechTap_=function(e){return a.handleTechTap_(e)},a.isFullscreen_=!1,a.log=aI(a.id_),a.fsApi_=Jk,a.isPosterFromTech_=!1,a.queuedCallbacks_=[],a.isReady_=!1,a.hasStarted_=!1,a.userActive_=!1,a.debugEnabled_=!1,a.audioOnlyMode_=!1,a.audioPosterMode_=!1,a.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!a.options_||!a.options_.techOrder||!a.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(a.tag=n,a.tagAttributes=n&&KI(n),a.language(a.options_.language),i.languages){var d={};Object.getOwnPropertyNames(i.languages).forEach((function(e){d[e.toLowerCase()]=i.languages[e]})),a.languages_=d}else a.languages_=t.prototype.options_.languages;a.resetCache_(),a.poster_=i.poster||"",a.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),a.changingSrc_=!1,a.playCallbacks_=[],a.playTerminatedQueue_=[],n.hasAttribute("autoplay")?a.autoplay(!0):a.autoplay(a.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach((function(e){if("function"!=typeof a[e])throw new Error('plugin "'+e+'" does not exist')})),a.scrubbing_=!1,a.el_=a.createEl(),KC(Lh(a),{eventBusKey:"el_"}),a.fsApi_.requestFullscreen&&(AC(xh(),a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_),a.on(a.fsApi_.fullscreenchange,a.boundDocumentFullscreenChange_)),a.fluid_&&a.on(["playerreset","resize"],a.boundUpdateStyleEl_);var l=QC(a.options_);i.plugins&&Object.keys(i.plugins).forEach((function(e){a[e](i.plugins[e])})),i.debug&&a.debug(!0),a.options_.playerOptions=l,a.middleware_=[],a.playbackRates(i.playbackRates),a.initChildren(),a.isAudio("audio"===n.nodeName.toLowerCase()),a.controls()?a.addClass("vjs-controls-enabled"):a.addClass("vjs-controls-disabled"),a.el_.setAttribute("role","region"),a.isAudio()?a.el_.setAttribute("aria-label",a.localize("Audio Player")):a.el_.setAttribute("aria-label",a.localize("Video Player")),a.isAudio()&&a.addClass("vjs-audio"),a.flexNotSupported_()&&a.addClass("vjs-no-flex"),AI&&a.addClass("vjs-touch-enabled"),OI||a.addClass("vjs-workinghover"),t.players[a.id_]=Lh(a);var u=Kk.split(".")[0];return a.addClass("vjs-v"+u),a.userActive(!0),a.reportUserActivity(),a.one("play",(function(e){return a.listenForUserActivity_(e)})),a.on("stageclick",(function(e){return a.handleStageClick_(e)})),a.on("keydown",(function(e){return a.handleKeyDown(e)})),a.on("languagechange",(function(e){return a.handleLanguagechange(e)})),a.breakpoints(a.options_.breakpoints),a.responsive(a.options_.responsive),a.on("ready",(function(){a.audioPosterMode(a.options_.audioPosterMode),a.audioOnlyMode(a.options_.audioOnlyMode)})),a}Uh(t,e);var n=t.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),PC(xh(),this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),PC(xh(),"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),WE[this.id()]=null,VE.names.forEach((function(e){var t=VE[e],i=n[t.getterName]();i&&i.off&&i.off()})),e.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},n.createEl=function(){var t,n=this.tag,i=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();i?t=this.el_=n.parentNode:r||(t=this.el_=e.prototype.createEl.call(this,"div"));var a=KI(n);if(r){for(t=this.el_=n,n=this.tag=xh().createElement("video");t.children.length;)n.appendChild(t.firstChild);HI(t,"video-js")||zI(t,"video-js"),t.appendChild(n),i=this.playerElIngest_=t,Object.keys(t).forEach((function(e){try{n[e]=t[e]}catch(e){}}))}if(n.setAttribute("tabindex","-1"),a.tabindex="-1",(II||SI&&EI)&&(n.setAttribute("role","application"),a.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in a&&delete a.width,"height"in a&&delete a.height,Object.getOwnPropertyNames(a).forEach((function(e){r&&"class"===e||t.setAttribute(e,a[e]),r&&n.setAttribute(e,a[e])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=t.player=this,this.addClass("vjs-paused"),!0!==Ah().VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=yC("vjs-styles-dimensions");var o=uC(".vjs-styles-defaults"),s=uC("head");s.insertBefore(this.styleEl_,o?o.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var d=n.getElementsByTagName("a"),l=0;l<d.length;l++){var u=d.item(l);zI(u,"vjs-hidden"),u.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!i&&n.parentNode.insertBefore(t,n),VI(n,t),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=t,t},n.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");"anonymous"===e||"use-credentials"===e?this.techCall_("setCrossOrigin",e):rI.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"')},n.width=function(e){return this.dimension("width",e)},n.height=function(e){return this.dimension("height",e)},n.dimension=function(e,t){var n=e+"_";if(void 0===t)return this[n]||0;if(""===t||"auto"===t)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(t);isNaN(i)?rI.error('Improper value "'+t+'" supplied for for '+e):(this[n]=i,this.updateStyleEl_())},n.fluid=function(e){var t,n,i=this;if(void 0===e)return!!this.fluid_;this.fluid_=!!e,FC(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){i.on(["playerreset","resize"],i.boundUpdateStyleEl_)},FC(t=this)?n():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(e){if(void 0===e)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==Ah().VIDEOJS_NO_DYNAMIC_STYLE){var e,t,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,t=void 0!==this.height_?this.height_:e*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),bC(this.styleEl_,"\n      ."+n+" {\n        width: "+e+"px;\n        height: "+t+"px;\n      }\n\n      ."+n+".vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var a="number"==typeof this.width_?this.width_:this.options_.width,o="number"==typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(a>=0&&(s.width=a),o>=0&&(s.height=o))}},n.loadTech_=function(e,t){var n=this;this.tech_&&this.unloadTech_();var i=JC(e),r=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==i&&this.tag&&(HE.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var a=this.autoplay();("string"==typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(a=!1);var o={source:t,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};VE.names.forEach((function(e){var t=VE[e];o[t.getterName]=n[t.privateName]})),lI(o,this.options_[i]),lI(o,this.options_[r]),lI(o,this.options_[e.toLowerCase()]),this.tag&&(o.tag=this.tag),t&&t.src===this.cache_.src&&this.cache_.currentTime>0&&(o.startTime=this.cache_.currentTime);var s,d,l=HE.getTech(e);if(!l)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new l(o),this.tech_.ready(UC(this,this.handleTechReady_),!0),s=this.textTracksJson_||[],d=this.tech_,s.forEach((function(e){var t=d.addRemoteTextTrack(e).track;!e.src&&e.cues&&e.cues.forEach((function(e){return t.addCue(e)}))})),d.textTracks(),FP.forEach((function(e){n.on(n.tech_,e,(function(t){return n["handleTech"+JC(e)+"_"](t)}))})),Object.keys(qP).forEach((function(e){n.on(n.tech_,e,(function(t){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+qP[e]+"_"].bind(n),event:t}):n["handleTech"+qP[e]+"_"](t)}))})),this.on(this.tech_,"loadstart",(function(e){return n.handleTechLoadStart_(e)})),this.on(this.tech_,"sourceset",(function(e){return n.handleTechSourceset_(e)})),this.on(this.tech_,"waiting",(function(e){return n.handleTechWaiting_(e)})),this.on(this.tech_,"ended",(function(e){return n.handleTechEnded_(e)})),this.on(this.tech_,"seeking",(function(e){return n.handleTechSeeking_(e)})),this.on(this.tech_,"play",(function(e){return n.handleTechPlay_(e)})),this.on(this.tech_,"firstplay",(function(e){return n.handleTechFirstPlay_(e)})),this.on(this.tech_,"pause",(function(e){return n.handleTechPause_(e)})),this.on(this.tech_,"durationchange",(function(e){return n.handleTechDurationChange_(e)})),this.on(this.tech_,"fullscreenchange",(function(e,t){return n.handleTechFullscreenChange_(e,t)})),this.on(this.tech_,"fullscreenerror",(function(e,t){return n.handleTechFullscreenError_(e,t)})),this.on(this.tech_,"enterpictureinpicture",(function(e){return n.handleTechEnterPictureInPicture_(e)})),this.on(this.tech_,"leavepictureinpicture",(function(e){return n.handleTechLeavePictureInPicture_(e)})),this.on(this.tech_,"error",(function(e){return n.handleTechError_(e)})),this.on(this.tech_,"posterchange",(function(e){return n.handleTechPosterChange_(e)})),this.on(this.tech_,"textdata",(function(e){return n.handleTechTextData_(e)})),this.on(this.tech_,"ratechange",(function(e){return n.handleTechRateChange_(e)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||VI(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var e,t,n,i=this;VE.names.forEach((function(e){var t=VE[e];i[t.privateName]=i[t.getterName]()})),this.textTracksJson_=(e=this.tech_,t=e.$$("track"),n=Array.prototype.map.call(t,(function(e){return e.track})),Array.prototype.map.call(t,(function(e){var t=hE(e.track);return e.src&&(t.src=e.src),t})).concat(Array.prototype.filter.call(e.textTracks(),(function(e){return-1===n.indexOf(e)})).map(hE))),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(e){return void 0===e&&rI.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(e){var t=this;if(this.tech_&&"string"==typeof e){var n,i=function(){var e=t.muted();t.muted(!0);var n=function(){t.muted(e)};t.playTerminatedQueue_.push(n);var i=t.play();if(cE(i))return i.catch((function(e){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(e||""))}))};if("any"!==e||this.muted()?n="muted"!==e||this.muted()?this.play():i():cE(n=this.play())&&(n=n.catch(i)),cE(n))return n.then((function(){t.trigger({type:"autoplay-success",autoplay:e})})).catch((function(){t.trigger({type:"autoplay-failure",autoplay:e})}))}},n.updateSourceCaches_=function(e){void 0===e&&(e="");var t=e,n="";"string"!=typeof t&&(t=e.src,n=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],t&&!n&&(n=function(e,t){if(!t)return"";if(e.cache_.source.src===t&&e.cache_.source.type)return e.cache_.source.type;var n=e.cache_.sources.filter((function(e){return e.src===t}));if(n.length)return n[0].type;for(var i=e.$$("source"),r=0;r<i.length;r++){var a=i[r];if(a.type&&a.src&&a.src===t)return a.type}return tA(t)}(this,t)),this.cache_.source=QC({},e,{src:t,type:n});for(var i=this.cache_.sources.filter((function(e){return e.src&&e.src===t})),r=[],a=this.$$("source"),o=[],s=0;s<a.length;s++){var d=KI(a[s]);r.push(d),d.src&&d.src===t&&o.push(d.src)}o.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=t},n.handleTechSourceset_=function(e){var t=this;if(!this.changingSrc_){var n=function(e){return t.updateSourceCaches_(e)},i=this.currentSource().src,r=e.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(n=function(){}),n(r),e.src||this.tech_.any(["sourceset","loadstart"],(function(e){if("sourceset"!==e.type){var n=t.techGet("currentSrc");t.lastSource_.tech=n,t.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},n.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(e){return e.callback(e.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var t=this.currentTime();this.on("timeupdate",(function n(){t!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(rI.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(e){this.controls_&&(void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.click&&!1===this.options_.userActions.click||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.click?this.options_.userActions.click.call(this,e):this.paused()?pE(this.play()):this.pause()))},n.handleTechDoubleClick_=function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(t){return t.contains(e.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"==typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(e){var t=e.target.player;if(!t||t===this){var n=this.el(),i=xh()[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}},n.handleTechFullscreenChange_=function(e,t){var n=this;t&&(t.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",(function(){n.removeClass("vjs-ios-native-fs")}))),this.isFullscreen(t.isFullscreen))},n.handleTechFullscreenError_=function(e,t){this.trigger("fullscreenerror",t)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var e=this.tech_.error();this.error(e)},n.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(e,t){this.ready((function(){if(e in ZE)return function(e,t,n,i){return t[n](e.reduce(JE(n),i))}(this.middleware_,this.tech_,e,t);if(e in YE)return KE(this.middleware_,this.tech_,e,t);try{this.tech_&&this.tech_[e](t)}catch(e){throw rI(e),e}}),!0)},n.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in XE)return function(e,t,n){return e.reduceRight(JE(n),t[n]())}(this.middleware_,this.tech_,e);if(e in YE)return KE(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(t){if(void 0===this.tech_[e])throw rI("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",t),t;if("TypeError"===t.name)throw rI("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",t),this.tech_.isReady_=!1,t;throw rI(t),t}}},n.play=function(){var e=this,t=this.options_.Promise||Ah().Promise;return t?new t((function(t){e.play_(t)})):this.play_()},n.play_=function(e){var t=this;void 0===e&&(e=pE),this.playCallbacks_.push(e);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(e){t.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!DI&&!OI||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},n.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach((function(e){e()}))},n.runPlayCallbacks_=function(e){var t=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],t.forEach((function(t){t(e)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||sE(0,0)},n.scrubbing=function(e){if(void 0===e)return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(e){return void 0!==e?(e<0&&(e=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",e),void(this.cache_.initTime=0)):(this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(e=parseFloat(e))<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var e=this.techGet_("buffered");return e&&e.length||(e=sE(0,0)),e},n.bufferedPercent=function(){return dE(this.buffered(),this.duration())},n.bufferedEnd=function(){var e=this.buffered(),t=this.duration(),n=e.end(e.length-1);return n>t&&(n=t),n},n.volume=function(e){var t;return void 0!==e?(t=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=t,this.techCall_("setVolume",t),void(t>0&&this.lastVolume_(t))):(t=parseFloat(this.techGet_("volume")),isNaN(t)?1:t)},n.muted=function(e){if(void 0===e)return this.techGet_("muted")||!1;this.techCall_("setMuted",e)},n.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(e){if(void 0===e||0===e)return this.cache_.lastVolume;this.cache_.lastVolume=e},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(e){if(void 0!==e){var t=this.isFullscreen_;return this.isFullscreen_=Boolean(e),this.isFullscreen_!==t&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(e){var t=this.options_.Promise||Ah().Promise;if(t){var n=this;return new t((function(t,i){function r(){n.off("fullscreenerror",o),n.off("fullscreenchange",a)}function a(){r(),t()}function o(e,t){r(),i(t)}n.one("fullscreenchange",a),n.one("fullscreenerror",o);var s=n.requestFullscreenHelper_(e);s&&(s.then(r,r),s.then(t,i))}))}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(e){var t,n=this;if(this.fsApi_.prefixed||(t=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==e&&(t=e)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](t);return i&&i.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var e=this.options_.Promise||Ah().Promise;if(e){var t=this;return new e((function(e,n){function i(){t.off("fullscreenerror",a),t.off("fullscreenchange",r)}function r(){i(),e()}function a(e,t){i(),n(t)}t.one("fullscreenchange",r),t.one("fullscreenerror",a);var o=t.exitFullscreenHelper_();o&&(o.then(i,i),o.then(e,n))}))}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var t=xh()[this.fsApi_.exitFullscreen]();return t&&pE(t.then((function(){return e.isFullscreen(!1)}))),t}this.tech_.supportsFullScreen()&&1==!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=xh().documentElement.style.overflow,AC(xh(),"keydown",this.boundFullWindowOnEscKey_),xh().documentElement.style.overflow="hidden",zI(xh().body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(e){Rh().isEventKey(e,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,PC(xh(),"keydown",this.boundFullWindowOnEscKey_),xh().documentElement.style.overflow=this.docOrigOverflow,WI(xh().body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(e){if(void 0===e)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(e){return void 0!==e?(this.isInPictureInPicture_=!!e,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in xh()&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in xh())return xh().exitPictureInPicture()},n.handleKeyDown=function(e){var t,n,i=this.options_.userActions;i&&i.hotkeys&&(t=this.el_.ownerDocument.activeElement,n=t.tagName.toLowerCase(),t.isContentEditable||("input"===n?-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type):-1!==["textarea"].indexOf(n))||("function"==typeof i.hotkeys?i.hotkeys.call(this,e):this.handleHotkeys(e)))},n.handleHotkeys=function(e){var t=this.options_.userActions?this.options_.userActions.hotkeys:{},n=t.fullscreenKey,i=void 0===n?function(e){return Rh().isEventKey(e,"f")}:n,r=t.muteKey,a=void 0===r?function(e){return Rh().isEventKey(e,"m")}:r,o=t.playPauseKey,s=void 0===o?function(e){return Rh().isEventKey(e,"k")||Rh().isEventKey(e,"Space")}:o;if(i.call(this,e)){e.preventDefault(),e.stopPropagation();var d=rE.getComponent("FullscreenToggle");!1!==xh()[this.fsApi_.fullscreenEnabled]&&d.prototype.handleClick.call(this,e)}else a.call(this,e)?(e.preventDefault(),e.stopPropagation(),rE.getComponent("MuteToggle").prototype.handleClick.call(this,e)):s.call(this,e)&&(e.preventDefault(),e.stopPropagation(),rE.getComponent("PlayToggle").prototype.handleClick.call(this,e))},n.canPlayType=function(e){for(var t,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],a=HE.getTech(r);if(a||(a=rE.getComponent(r)),a){if(a.isSupported()&&(t=a.canPlayType(e)))return t}else rI.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(e){var t,n,i=this,r=this.options_.techOrder.map((function(e){return[e,HE.getTech(e)]})).filter((function(e){var t=e[0],n=e[1];return n?n.isSupported():(rI.error('The "'+t+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),a=function(e,t,n){var i;return e.some((function(e){return t.some((function(t){if(i=n(e,t))return!0}))})),i},o=function(e,t){var n=e[0];if(e[1].canPlaySource(t,i.options_[n.toLowerCase()]))return{source:t,tech:n}};return t=this.options_.sourceOrder?a(e,r,(n=o,function(e,t){return n(t,e)})):a(r,e,o),t||!1},n.handleSrc_=function(e,t){var n=this;if(void 0===e)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i=nA(e);if(i.length){if(this.changingSrc_=!0,t||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),GE(this,i[0],(function(e,r){var a,o;if(n.middleware_=r,t||(n.cache_.sources=i),n.updateSourceCaches_(e),n.src_(e))return i.length>1?n.handleSrc_(i.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0),void n.triggerReady());a=r,o=n.tech_,a.forEach((function(e){return e.setTech&&e.setTech(o)}))})),this.options_.retryOnError&&i.length>1){var r=function(){n.error(null),n.handleSrc_(i.slice(1),!0)},a=function(){n.off("error",r)};this.one("error",r),this.one("playing",a),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",a)}}}else this.setTimeout((function(){this.error({code:4,message:this.options_.notSupportedMessage})}),0)},n.src=function(e){return this.handleSrc_(e,!1)},n.src_=function(e){var t,n,i=this,r=this.selectSource([e]);return!r||(t=r.tech,n=this.techName_,JC(t)!==JC(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){i.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var e=this,t=this.options_.Promise||Ah().Promise;this.paused()||!t?this.doReset_():pE(this.play().then((function(){return e.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),FC(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},t=e.durationDisplay,n=e.remainingTimeDisplay;t&&t.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var e=this.currentSource(),t=[];return 0!==Object.keys(e).length&&t.push(e),this.cache_.sources||t},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(e){return void 0!==e?(this.techCall_("setPreload",e),void(this.options_.preload=e)):this.techGet_("preload")},n.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var t;"string"==typeof e&&/(any|play|muted)/.test(e)||!0===e&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_("string"==typeof e?e:"play"),t=!1):this.options_.autoplay=!!e,t=void 0===t?this.options_.autoplay:t,this.tech_&&this.techCall_("setAutoplay",t)},n.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},n.loop=function(e){return void 0!==e?(this.techCall_("setLoop",e),void(this.options_.loop=e)):this.techGet_("loop")},n.poster=function(e){if(void 0===e)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(e){var t=this;if(void 0===e)return this.error_||null;if(Zk("beforeerror").forEach((function(n){var i=n(t,e);uI(i)&&!Array.isArray(i)||"string"==typeof i||"number"==typeof i||null===i?e=i:t.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&e&&4===e.code){var n=function(){this.error(e)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===e)return this.error_=e,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new lE(e),this.addClass("vjs-error"),rI.error("(CODE:"+this.error_.code+" "+lE.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Zk("error").forEach((function(e){return e(t,t.error_)}))},n.reportUserActivity=function(e){this.userActivity_=!0},n.userActive=function(e){if(void 0===e)return this.userActive_;if((e=!!e)!==this.userActive_){if(this.userActive_=e,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(e){e.stopPropagation(),e.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var e,t,n,i=UC(this,this.reportUserActivity),r=function(t){i(),this.clearInterval(e)};this.on("mousedown",(function(){i(),this.clearInterval(e),e=this.setInterval(i,250)})),this.on("mousemove",(function(e){e.screenX===t&&e.screenY===n||(t=e.screenX,n=e.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);var a,o=this.getChild("controlBar");!o||OI||yI||(o.on("mouseenter",(function(e){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),o.on("mouseleave",(function(e){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(a);var e=this.options_.inactivityTimeout;e<=0||(a=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),e))}}),250)},n.playbackRate=function(e){if(void 0===e)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",e)},n.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(e){if(void 0===e)return!!this.isAudio_;this.isAudio_=!!e},n.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var t=this.children(),n=this.getChild("ControlBar"),i=n&&n.currentHeight();t.forEach((function(t){t!==n&&t.el_&&!t.hasClass("vjs-hidden")&&(t.hide(),e.audioOnlyCache_.hiddenChildren.push(t))})),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(i),this.trigger("audioonlymodechange")},n.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach((function(e){return e.show()})),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},n.audioOnlyMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var n=this.options_.Promise||Ah().Promise;if(n){if(e){var i=[];return this.isInPictureInPicture()&&i.push(this.exitPictureInPicture()),this.isFullscreen()&&i.push(this.exitFullscreen()),this.audioPosterMode()&&i.push(this.audioPosterMode(!1)),n.all(i).then((function(){return t.enableAudioOnlyUI_()}))}return n.resolve().then((function(){return t.disableAudioOnlyUI_()}))}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},n.enablePosterModeUI_=function(){(this.tech_&&this.tech_).hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.disablePosterModeUI_=function(){(this.tech_&&this.tech_).show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},n.audioPosterMode=function(e){var t=this;if("boolean"!=typeof e||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var n=this.options_.Promise||Ah().Promise;return n?e?this.audioOnlyMode()?this.audioOnlyMode(!1).then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.enablePosterModeUI_()})):n.resolve().then((function(){t.disablePosterModeUI_()})):e?(this.audioOnlyMode()&&this.audioOnlyMode(!1),void this.enablePosterModeUI_()):void this.disablePosterModeUI_()},n.addTextTrack=function(e,t,n){if(this.tech_)return this.tech_.addTextTrack(e,t,n)},n.addRemoteTextTrack=function(e,t){if(this.tech_)return this.tech_.addRemoteTextTrack(e,t)},n.removeRemoteTextTrack=function(e){void 0===e&&(e={});var t=e.track;if(t||(t=e),this.tech_)return this.tech_.removeRemoteTextTrack(t)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(e){if(void 0===e)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),FC(this)&&this.trigger("languagechange"))},n.languages=function(){return QC(t.prototype.options_.languages,this.languages_)},n.toJSON=function(){var e=QC(this.options_),t=e.tracks;e.tracks=[];for(var n=0;n<t.length;n++){var i=t[n];(i=QC(i)).player=void 0,e.tracks[n]=i}return e},n.createModal=function(e,t){var n=this;(t=t||{}).content=e||"";var i=new fE(this,t);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),t=this.currentWidth(),n=0;n<VP.length;n++){var i=VP[n];if(t<=this.breakpoints_[i]){if(e===i)return;e&&this.removeClass(HP[e]),this.addClass(HP[i]),this.breakpoint_=i;break}}},n.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},n.breakpoints=function(e){return void 0===e||(this.breakpoint_="",this.breakpoints_=lI({},zP,e),this.updateCurrentBreakpoint_()),lI(this.breakpoints_)},n.responsive=function(e){return void 0===e?this.responsive_:(e=Boolean(e))!==this.responsive_?(this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return HP[this.breakpoint_]||""},n.loadMedia=function(e,t){var n=this;if(e&&"object"==typeof e){this.reset(),this.cache_.media=QC(e);var i=this.cache_.media,r=i.artwork,a=i.poster,o=i.src,s=i.textTracks;!r&&a&&(this.cache_.media.artwork=[{src:a,type:tA(a)}]),o&&this.src(o),a&&this.poster(a),Array.isArray(s)&&s.forEach((function(e){return n.addRemoteTextTrack(e,!1)})),this.ready(t)}},n.getMedia=function(){if(!this.cache_.media){var e=this.poster(),t={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(e){return{kind:e.kind,label:e.label,language:e.language,src:e.src}}))};return e&&(t.poster=e,t.artwork=[{src:t.poster,type:tA(t.poster)}]),t}return QC(this.cache_.media)},t.getTagSettings=function(e){var t={sources:[],tracks:[]},n=KI(e),i=n["data-setup"];if(HI(e,"vjs-fill")&&(n.fill=!0),HI(e,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=Nh()(i||"{}"),a=r[0],o=r[1];a&&rI.error(a),lI(n,o)}if(lI(t,n),e.hasChildNodes())for(var s=e.childNodes,d=0,l=s.length;d<l;d++){var u=s[d],c=u.nodeName.toLowerCase();"source"===c?t.sources.push(KI(u)):"track"===c&&t.tracks.push(KI(u))}return t},n.flexNotSupported_=function(){var e=xh().createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},n.debug=function(e){if(void 0===e)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(e){if(void 0===e)return this.cache_.playbackRates;Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(rE);VE.names.forEach((function(e){var t=VE[e];WP.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}})),WP.prototype.crossorigin=WP.prototype.crossOrigin,WP.players={};var $P=Ah().navigator;WP.prototype.options_={techOrder:HE.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:$P&&($P.languages&&$P.languages[0]||$P.userLanguage||$P.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(e){WP.prototype[e]=function(){return this.techGet_(e)}})),FP.forEach((function(e){WP.prototype["handleTech"+JC(e)+"_"]=function(){return this.trigger(e)}})),rE.registerComponent("Player",WP);var GP="plugin",KP={},XP=function(e){return KP.hasOwnProperty(e)},ZP=function(e){return XP(e)?KP[e]:void 0},YP=function(e,t){e.activePlugins_=e.activePlugins_||{},e.activePlugins_[t]=!0},JP=function(e,t,n){var i=(n?"before":"")+"pluginsetup";e.trigger(i,t),e.trigger(i+":"+t.name,t)},QP=function(e,t){return t.prototype.name=e,function(){JP(this,{name:e,plugin:t,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=zh(t,[this].concat(i));return this[e]=function(){return a},JP(this,a.getEventHash()),a}},ex=function(){function e(t){if(this.constructor===e)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=t,this.log||(this.log=this.player.log.createLogger(this.name)),KC(this),delete this.trigger,ZC(this,this.constructor.defaultState),YP(t,this.name),this.dispose=this.dispose.bind(this),t.on("dispose",this.dispose)}var t=e.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(e){return void 0===e&&(e={}),e.name=this.name,e.plugin=this.constructor,e.instance=this,e},t.trigger=function(e,t){return void 0===t&&(t={}),xC(this.eventBusEl_,e,this.getEventHash(t))},t.handleStateChanged=function(e){},t.dispose=function(){var e=this.name,t=this.player;this.trigger("dispose"),this.off(),t.off("dispose",this.dispose),t.activePlugins_[e]=!1,this.player=this.state=null,t[e]=QP(e,KP[e])},e.isBasic=function(t){var n="string"==typeof t?ZP(t):t;return"function"==typeof n&&!e.prototype.isPrototypeOf(n.prototype)},e.registerPlugin=function(t,n){if("string"!=typeof t)throw new Error('Illegal plugin name, "'+t+'", must be a string, was '+typeof t+".");if(XP(t))rI.warn('A plugin named "'+t+'" already exists. You may want to avoid re-registering plugins!');else if(WP.prototype.hasOwnProperty(t))throw new Error('Illegal plugin name, "'+t+'", cannot share a name with an existing player method!');if("function"!=typeof n)throw new Error('Illegal plugin for "'+t+'", must be a function, was '+typeof n+".");return KP[t]=n,t!==GP&&(e.isBasic(n)?WP.prototype[t]=function(e,t){var n=function(){JP(this,{name:e,plugin:t,instance:null},!0);var n=t.apply(this,arguments);return YP(this,e),JP(this,{name:e,plugin:t,instance:n}),n};return Object.keys(t).forEach((function(e){n[e]=t[e]})),n}(t,n):WP.prototype[t]=QP(t,n)),n},e.deregisterPlugin=function(e){if(e===GP)throw new Error("Cannot de-register base plugin.");XP(e)&&(delete KP[e],delete WP.prototype[e])},e.getPlugins=function(e){var t;return void 0===e&&(e=Object.keys(KP)),e.forEach((function(e){var n=ZP(e);n&&((t=t||{})[e]=n)})),t},e.getPluginVersion=function(e){var t=ZP(e);return t&&t.VERSION||""},e}();ex.getPlugin=ZP,ex.BASE_PLUGIN_NAME=GP,ex.registerPlugin(GP,ex),WP.prototype.usingPlugin=function(e){return!!this.activePlugins_&&!0===this.activePlugins_[e]},WP.prototype.hasPlugin=function(e){return!!XP(e)};var tx=function(e){return 0===e.indexOf("#")?e.slice(1):e};function nx(e,t,n){var i=nx.getPlayer(e);if(i)return t&&rI.warn('Player "'+e+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var r="string"==typeof e?uC("#"+tx(e)):e;if(!jI(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||rI.warn("The element supplied is not included in the DOM"),!0===(t=t||{}).restoreEl&&(t.restoreEl=(r.parentNode&&r.parentNode.hasAttribute("data-vjs-player")?r.parentNode:r).cloneNode(!0)),Zk("beforesetup").forEach((function(e){var n=e(r,QC(t));uI(n)&&!Array.isArray(n)?t=QC(t,n):rI.error("please return an object in beforesetup hooks")}));var a=rE.getComponent("Player");return i=new a(r,t,n),Zk("setup").forEach((function(e){return e(i)})),i}if(nx.hooks_=Xk,nx.hooks=Zk,nx.hook=function(e,t){Zk(e,t)},nx.hookOnce=function(e,t){Zk(e,[].concat(t).map((function(t){return function n(){return Yk(e,n),t.apply(void 0,arguments)}})))},nx.removeHook=Yk,!0!==Ah().VIDEOJS_NO_DYNAMIC_STYLE&&UI()){var ix=uC(".vjs-styles-defaults");if(!ix){ix=yC("vjs-styles-defaults");var rx=uC("head");rx&&rx.insertBefore(ix,rx.firstChild),bC(ix,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid:not(.vjs-audio-only-mode) {\n        padding-top: 56.25%\n      }\n    ")}}gC(1,nx),nx.VERSION=Kk,nx.options=WP.prototype.options_,nx.getPlayers=function(){return WP.players},nx.getPlayer=function(e){var t,n=WP.players;if("string"==typeof e){var i=tx(e),r=n[i];if(r)return r;t=uC("#"+i)}else t=e;if(jI(t)){var a=t,o=a.player,s=a.playerId;if(o||n[s])return o||n[s]}},nx.getAllPlayers=function(){return Object.keys(WP.players).map((function(e){return WP.players[e]})).filter(Boolean)},nx.players=WP.players,nx.getComponent=rE.getComponent,nx.registerComponent=function(e,t){HE.isTech(t)&&rI.warn("The "+e+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),rE.registerComponent.call(rE,e,t)},nx.getTech=HE.getTech,nx.registerTech=HE.registerTech,nx.use=function(e,t){zE[e]=zE[e]||[],zE[e].push(t)},Object.defineProperty(nx,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(nx.middleware,"TERMINATOR",{value:$E,writeable:!1,enumerable:!0}),nx.browser=RI,nx.TOUCH_ENABLED=AI,nx.extend=function(e,t){void 0===t&&(t={});var n=function(){e.apply(this,arguments)},i={};for(var r in"object"==typeof t?(t.constructor!==Object.prototype.constructor&&(n=t.constructor),i=t):"function"==typeof t&&(n=t),Wh(n,e),e&&(n.super_=e),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},nx.mergeOptions=QC,nx.bind=UC,nx.registerPlugin=ex.registerPlugin,nx.deregisterPlugin=ex.deregisterPlugin,nx.plugin=function(e,t){return rI.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ex.registerPlugin(e,t)},nx.getPlugins=ex.getPlugins,nx.getPlugin=ex.getPlugin,nx.getPluginVersion=ex.getPluginVersion,nx.addLanguage=function(e,t){var n;return e=(""+e).toLowerCase(),nx.options.languages=QC(nx.options.languages,((n={})[e]=t,n)),nx.options.languages[e]},nx.log=rI,nx.createLogger=aI,nx.createTimeRange=nx.createTimeRanges=sE,nx.formatTime=yA,nx.setFormatTime=function(e){vA=e},nx.resetFormatTime=function(){vA=mA},nx.parseUrl=PE,nx.isCrossOrigin=DE,nx.EventTarget=NC,nx.on=AC,nx.one=OC,nx.off=PC,nx.trigger=xC,nx.xhr=Fh(),nx.TextTrack=UE,nx.AudioTrack=jE,nx.VideoTrack=NE,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(e){nx[e]=function(){return rI.warn("videojs."+e+"() is deprecated; use videojs.dom."+e+"() instead"),pC[e].apply(null,arguments)}})),nx.computedStyle=pI,nx.dom=pC,nx.url=RE,nx.defineLazyProperty=NP,nx.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var ax=Xh,ox=function(e,t,n){return e&&n&&n.responseURL&&t!==n.responseURL?n.responseURL:t},sx=function(e){return nx.log.debug?nx.log.debug.bind(nx,"VHS:",e+" >"):function(){}},dx=1/30,lx=.1,ux=function(e,t){var n,i=[];if(e&&e.length)for(n=0;n<e.length;n++)t(e.start(n),e.end(n))&&i.push([e.start(n),e.end(n)]);return nx.createTimeRanges(i)},cx=function(e,t){return ux(e,(function(e,n){return e-lx<=t&&n+lx>=t}))},px=function(e,t){return ux(e,(function(e){return e-dx>=t}))},hx=function(e){var t=[];if(!e||!e.length)return"";for(var n=0;n<e.length;n++)t.push(e.start(n)+" => "+e.end(n));return t.join(", ")},fx=function(e){for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t},gx=function(e){if(e&&e.length&&e.end)return e.end(e.length-1)},mx=function(e,t){var n=0;if(!e||!e.length)return n;for(var i=0;i<e.length;i++){var r=e.start(i),a=e.end(i);t>a||(n+=t>r&&t<=a?a-t:a-r)}return n},vx=nx.createTimeRange,yx=function(e,t){if(!t.preload)return t.duration;var n=0;return(t.parts||[]).forEach((function(e){n+=e.duration})),(t.preloadHints||[]).forEach((function(t){"PART"===t.type&&(n+=e.partTargetDuration)})),n},bx=function(e){return(e.segments||[]).reduce((function(e,t,n){return t.parts?t.parts.forEach((function(i,r){e.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:t})})):e.push({duration:t.duration,segmentIndex:n,partIndex:null,segment:t,part:null}),e}),[])},_x=function(e){var t=e.segments&&e.segments.length&&e.segments[e.segments.length-1];return t&&t.parts||[]},Tx=function(e){var t=e.preloadSegment;if(t){var n=t.parts,i=(t.preloadHints||[]).reduce((function(e,t){return e+("PART"===t.type?1:0)}),0);return i+(n&&n.length?n.length:0)}},wx=function(e,t){if(t.endList)return 0;if(e&&e.suggestedPresentationDelay)return e.suggestedPresentationDelay;var n=_x(t).length>0;return n&&t.serverControl&&t.serverControl.partHoldBack?t.serverControl.partHoldBack:n&&t.partTargetDuration?3*t.partTargetDuration:t.serverControl&&t.serverControl.holdBack?t.serverControl.holdBack:t.targetDuration?3*t.targetDuration:0},Sx=function(e,t,n){if(void 0===t&&(t=e.mediaSequence+e.segments.length),t<e.mediaSequence)return 0;var i=function(e,t){var n=0,i=t-e.mediaSequence,r=e.segments[i];if(r){if(void 0!==r.start)return{result:r.start,precise:!0};if(void 0!==r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if(void 0!==(r=e.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=yx(e,r),void 0!==r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(e,t);if(i.precise)return i.result;var r=function(e,t){for(var n,i=0,r=t-e.mediaSequence;r<e.segments.length;r++){if(void 0!==(n=e.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=yx(e,n),void 0!==n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(e,t);return r.precise?r.result:i.result+n},kx=function(e,t,n){if(!e)return 0;if("number"!=typeof n&&(n=0),void 0===t){if(e.totalDuration)return e.totalDuration;if(!e.endList)return Ah()[1/0]}return Sx(e,t,n)},Ix=function(e){var t=e.defaultDuration,n=e.durationList,i=e.startIndex,r=e.endIndex,a=0;if(i>r){var o=[r,i];i=o[0],r=o[1]}if(i<0){for(var s=i;s<Math.min(0,r);s++)a+=t;i=0}for(var d=i;d<r;d++)a+=n[d].duration;return a},Cx=function(e,t,n,i){if(!e||!e.segments)return null;if(e.endList)return kx(e);if(null===t)return null;t=t||0;var r=Sx(e,e.mediaSequence+e.segments.length,t);return n&&(r-=i="number"==typeof i?i:wx(null,e)),Math.max(0,r)},Ex=function(e){return e.excludeUntil&&e.excludeUntil>Date.now()},Ax=function(e){return e.excludeUntil&&e.excludeUntil===1/0},Px=function(e){var t=Ex(e);return!e.disabled&&!t},xx=function(e,t){return t.attributes&&t.attributes[e]},Ox=function(e,t){if(1===e.playlists.length)return!0;var n=t.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===e.playlists.filter((function(e){return!!Px(e)&&(e.attributes.BANDWIDTH||0)<n})).length},Dx=function(e,t){return!(!e&&!t||!e&&t||e&&!t||e!==t&&(!e.id||!t.id||e.id!==t.id)&&(!e.resolvedUri||!t.resolvedUri||e.resolvedUri!==t.resolvedUri)&&(!e.uri||!t.uri||e.uri!==t.uri))},Rx=function(e,t){var n=e&&e.mediaGroups&&e.mediaGroups.AUDIO||{},i=!1;for(var r in n){for(var a in n[r])if(i=t(n[r][a]))break;if(i)break}return!!i},Lx=function(e){if(!e||!e.playlists||!e.playlists.length)return Rx(e,(function(e){return e.playlists&&e.playlists.length||e.uri}));for(var t=function(t){var n=e.playlists[t],i=n.attributes&&n.attributes.CODECS;return i&&i.split(",").every((function(e){return vf(e)}))||Rx(e,(function(e){return Dx(n,e)}))?"continue":{v:!1}},n=0;n<e.playlists.length;n++){var i=t(n);if("continue"!==i&&"object"==typeof i)return i.v}return!0},Mx={liveEdgeDelay:wx,duration:kx,seekable:function(e,t,n){var i=t||0,r=Cx(e,t,!0,n);return null===r?vx():vx(i,r)},getMediaInfoForTime:function(e){for(var t=e.playlist,n=e.currentTime,i=e.startingSegmentIndex,r=e.startingPartIndex,a=e.startTime,o=e.experimentalExactManifestTimings,s=n-a,d=bx(t),l=0,u=0;u<d.length;u++){var c=d[u];if(i===c.segmentIndex&&("number"!=typeof r||"number"!=typeof c.partIndex||r===c.partIndex)){l=u;break}}if(s<0){if(l>0)for(var p=l-1;p>=0;p--){var h=d[p];if(s+=h.duration,o){if(s<0)continue}else if(s+dx<=0)continue;return{partIndex:h.partIndex,segmentIndex:h.segmentIndex,startTime:a-Ix({defaultDuration:t.targetDuration,durationList:d,startIndex:l,endIndex:p})}}return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:n}}if(l<0){for(var f=l;f<0;f++)if((s-=t.targetDuration)<0)return{partIndex:d[0]&&d[0].partIndex||null,segmentIndex:d[0]&&d[0].segmentIndex||0,startTime:n};l=0}for(var g=l;g<d.length;g++){var m=d[g];if(s-=m.duration,o){if(s>0)continue}else if(s-dx>=0)continue;return{partIndex:m.partIndex,segmentIndex:m.segmentIndex,startTime:a+Ix({defaultDuration:t.targetDuration,durationList:d,startIndex:l,endIndex:g})}}return{segmentIndex:d[d.length-1].segmentIndex,partIndex:d[d.length-1].partIndex,startTime:n}},isEnabled:Px,isDisabled:function(e){return e.disabled},isBlacklisted:Ex,isIncompatible:Ax,playlistEnd:Cx,isAes:function(e){for(var t=0;t<e.segments.length;t++)if(e.segments[t].key)return!0;return!1},hasAttribute:xx,estimateSegmentRequestTime:function(e,t,n,i){return void 0===i&&(i=0),xx("BANDWIDTH",n)?(e*n.attributes.BANDWIDTH-8*i)/t:NaN},isLowestEnabledRendition:Ox,isAudioOnly:Lx,playlistMatch:Dx,segmentDurationWithParts:yx},Ux=nx.log,jx=function(e,t){return e+"-"+t},Nx=function(e,t){e.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(e.mediaGroups[n])for(var i in e.mediaGroups[n])for(var r in e.mediaGroups[n][i]){var a=e.mediaGroups[n][i][r];t(a,n,i,r)}}))},Bx=function(e){var t=e.playlist,n=e.uri,i=e.id;t.id=i,t.playlistErrors_=0,n&&(t.uri=n),t.attributes=t.attributes||{}},Fx=function(e,t){e.uri=t;for(var n=0;n<e.playlists.length;n++)if(!e.playlists[n].uri){var i="placeholder-uri-"+n;e.playlists[n].uri=i}var r=Lx(e);Nx(e,(function(t,n,i,a){var o="placeholder-uri-"+n+"-"+i+"-"+a;if(!t.playlists||!t.playlists.length){if(r&&"AUDIO"===n&&!t.uri)for(var s=0;s<e.playlists.length;s++){var d=e.playlists[s];if(d.attributes&&d.attributes.AUDIO&&d.attributes.AUDIO===i)return}t.playlists=[Oh({},t)]}t.playlists.forEach((function(t,n){var i=jx(n,o);t.uri?t.resolvedUri=t.resolvedUri||ax(e.uri,t.uri):(t.uri=0===n?o:i,t.resolvedUri=t.uri),t.id=t.id||i,t.attributes=t.attributes||{},e.playlists[t.id]=t,e.playlists[t.uri]=t}))})),function(e){for(var t=e.playlists.length;t--;){var n=e.playlists[t];Bx({playlist:n,id:jx(t,n.uri)}),n.resolvedUri=ax(e.uri,n.uri),e.playlists[n.id]=n,e.playlists[n.uri]=n,n.attributes.BANDWIDTH||Ux.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(e),function(e){Nx(e,(function(t){t.uri&&(t.resolvedUri=ax(e.uri,t.uri))}))}(e)},qx=nx.mergeOptions,Vx=nx.EventTarget,Hx=function(e,t){if(!e)return t;var n=qx(e,t);if(e.preloadHints&&!t.preloadHints&&delete n.preloadHints,e.parts&&!t.parts)delete n.parts;else if(e.parts&&t.parts)for(var i=0;i<t.parts.length;i++)e.parts&&e.parts[i]&&(n.parts[i]=qx(e.parts[i],t.parts[i]));return!e.skipped&&t.skipped&&(n.skipped=!1),e.preload&&!t.preload&&(n.preload=!1),n},zx=function(e,t){!e.resolvedUri&&e.uri&&(e.resolvedUri=ax(t,e.uri)),e.key&&!e.key.resolvedUri&&(e.key.resolvedUri=ax(t,e.key.uri)),e.map&&!e.map.resolvedUri&&(e.map.resolvedUri=ax(t,e.map.uri)),e.map&&e.map.key&&!e.map.key.resolvedUri&&(e.map.key.resolvedUri=ax(t,e.map.key.uri)),e.parts&&e.parts.length&&e.parts.forEach((function(e){e.resolvedUri||(e.resolvedUri=ax(t,e.uri))})),e.preloadHints&&e.preloadHints.length&&e.preloadHints.forEach((function(e){e.resolvedUri||(e.resolvedUri=ax(t,e.uri))}))},Wx=function(e){var t=e.segments||[],n=e.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return t;n.duration=e.targetDuration,n.preload=!0,t.push(n)}return t},$x=function(e,t){return e===t||e.segments&&t.segments&&e.segments.length===t.segments.length&&e.endList===t.endList&&e.mediaSequence===t.mediaSequence&&e.preloadSegment===t.preloadSegment},Gx=function(e,t,n){void 0===n&&(n=$x);var i=qx(e,{}),r=i.playlists[t.id];if(!r)return null;if(n(r,t))return null;t.segments=Wx(t);var a=qx(r,t);if(a.preloadSegment&&!t.preloadSegment&&delete a.preloadSegment,r.segments){if(t.skip){t.segments=t.segments||[];for(var o=0;o<t.skip.skippedSegments;o++)t.segments.unshift({skipped:!0})}a.segments=function(e,t,n){var i=e.slice(),r=t.slice();n=n||0;for(var a,o=[],s=0;s<r.length;s++){var d=i[s+n],l=r[s];d?(a=d.map||a,o.push(Hx(d,l))):(a&&!l.map&&(l.map=a),o.push(l))}return o}(r.segments,t.segments,t.mediaSequence-r.mediaSequence)}a.segments.forEach((function(e){zx(e,a.resolvedUri)}));for(var s=0;s<i.playlists.length;s++)i.playlists[s].id===t.id&&(i.playlists[s]=a);return i.playlists[t.id]=a,i.playlists[t.uri]=a,Nx(e,(function(e,n,i,r){if(e.playlists)for(var o=0;o<e.playlists.length;o++)t.id===e.playlists[o].id&&(e.playlists[o]=a)})),i},Kx=function(e,t){var n=e.segments||[],i=n[n.length-1],r=i&&i.parts&&i.parts[i.parts.length-1],a=r&&r.duration||i&&i.duration;return t&&a?1e3*a:500*(e.partTargetDuration||e.targetDuration||10)},Xx=function(e){function t(t,n,i){var r;if(void 0===i&&(i={}),r=e.call(this)||this,!t)throw new Error("A non-empty playlist URL or object is required");r.logger_=sx("PlaylistLoader");var a=i,o=a.withCredentials,s=void 0!==o&&o,d=a.handleManifestRedirects,l=void 0!==d&&d;r.src=t,r.vhs_=n,r.withCredentials=s,r.handleManifestRedirects=l;var u=n.options_;return r.customTagParsers=u&&u.customTagParsers||[],r.customTagMappers=u&&u.customTagMappers||[],r.experimentalLLHLS=u&&u.experimentalLLHLS||!1,nx.browser.IE_VERSION&&(r.experimentalLLHLS=!1),r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(Lh(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}Uh(t,e);var n=t.prototype;return n.handleMediaupdatetimeout_=function(){var e=this;if("HAVE_METADATA"===this.state){var t=this.media(),n=ax(this.master.uri,t.uri);this.experimentalLLHLS&&(n=function(e,t){if(t.endList||!t.serverControl)return e;var n={};if(t.serverControl.canBlockReload){var i=t.preloadSegment,r=t.mediaSequence+t.segments.length;if(i){var a=i.parts||[],o=Tx(t)-1;o>-1&&o!==a.length-1&&(n._HLS_part=o),(o>-1||a.length)&&r--}n._HLS_msn=r}if(t.serverControl&&t.serverControl.canSkipUntil&&(n._HLS_skip=t.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(n).length){var s=new(Ah().URL)(e);["_HLS_skip","_HLS_msn","_HLS_part"].forEach((function(e){n.hasOwnProperty(e)&&s.searchParams.set(e,n[e])})),e=s.toString()}return e}(n,t)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(t,n){if(e.request)return t?e.playlistRequestError(e.request,e.media(),"HAVE_METADATA"):void e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}))}},n.playlistRequestError=function(e,t,n){var i=t.uri,r=t.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[r],status:e.status,message:"HLS playlist request error at URL: "+i+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(e){var t=this,n=e.url;return function(e){var t=e.onwarn,n=e.oninfo,i=e.manifestString,r=e.customTagParsers,a=void 0===r?[]:r,o=e.customTagMappers,s=void 0===o?[]:o,d=e.experimentalLLHLS,l=new uf;t&&l.on("warn",t),n&&l.on("info",n),a.forEach((function(e){return l.addParser(e)})),s.forEach((function(e){return l.addTagMapper(e)})),l.push(i),l.end();var u=l.manifest;if(d||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(e){u.hasOwnProperty(e)&&delete u[e]})),u.segments&&u.segments.forEach((function(e){["parts","preloadHints"].forEach((function(t){e.hasOwnProperty(t)&&delete e[t]}))}))),!u.targetDuration){var c=10;u.segments&&u.segments.length&&(c=u.segments.reduce((function(e,t){return Math.max(e,t.duration)}),0)),t&&t("manifest has no targetDuration defaulting to "+c),u.targetDuration=c}var p=_x(u);if(p.length&&!u.partTargetDuration){var h=p.reduce((function(e,t){return Math.max(e,t.duration)}),0);t&&(t("manifest has no partTargetDuration defaulting to "+h),Ux.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),u.partTargetDuration=h}return u}({onwarn:function(e){var i=e.message;return t.logger_("m3u8-parser warn for "+n+": "+i)},oninfo:function(e){var i=e.message;return t.logger_("m3u8-parser info for "+n+": "+i)},manifestString:e.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(e){var t=e.playlistString,n=e.playlistObject,i=e.url,r=e.id;this.request=null,this.state="HAVE_METADATA";var a=n||this.parseManifest_({url:i,manifestString:t});a.lastRequest=Date.now(),Bx({playlist:a,uri:i,id:r});var o=Gx(this.master,a);this.targetDuration=a.partTargetDuration||a.targetDuration,this.pendingMedia_=null,o?(this.master=o,this.media_=this.master.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Kx(this.media(),!!o)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),Ah().clearTimeout(this.mediaUpdateTimeout),Ah().clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e,t){var n=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"==typeof e){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(Ah().clearTimeout(this.finalRenditionTimeout),t){var i=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=Ah().setTimeout(this.media.bind(this,e,!1),i)}else{var r=this.state,a=!this.media_||e.id!==this.media_.id,o=this.master.playlists[e.id];if(o&&o.endList||e.endList&&e.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,void(a&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Kx(e,!0)),a){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},(function(t,i){if(n.request){if(e.lastRequest=Date.now(),e.resolvedUri=ox(n.handleManifestRedirects,e.resolvedUri,i),t)return n.playlistRequestError(n.request,e,r);n.haveMetadata({playlistString:i.responseText,url:e.uri,id:e.id}),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(e){var t=this;this.mediaUpdateTimeout&&(Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(e){var i=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=Ah().setTimeout((function(){t.mediaUpdateTimeout=null,t.load()}),i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(e){var t=this;this.mediaUpdateTimeout&&(Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=Ah().setTimeout((function(){t.mediaUpdateTimeout=null,t.trigger("mediaupdatetimeout"),t.updateMediaUpdateTimeout_(e)}),e))},n.start=function(){var e=this;if(this.started=!0,"object"==typeof this.src)return this.src.uri||(this.src.uri=Ah().location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){e.setupInitialPlaylist(e.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(t,n){if(e.request){if(e.request=null,t)return e.error={status:n.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===e.state&&(e.started=!1),e.trigger("error");e.src=ox(e.handleManifestRedirects,e.src,n);var i=e.parseManifest_({manifestString:n.responseText,url:e.src});e.setupInitialPlaylist(i)}}))},n.srcUri=function(){return"string"==typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists)return this.master=e,Fx(this.master,this.srcUri()),e.playlists.forEach((function(e){e.segments=Wx(e),e.segments.forEach((function(t){zx(t,e.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var t=this.srcUri()||Ah().location.href;this.master=function(e,t){var n=jx(0,t),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:Ah().location.href,resolvedUri:Ah().location.href,playlists:[{uri:t,id:n,resolvedUri:t,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[t]=i.playlists[0],i}(0,t),this.haveMetadata({playlistObject:e,url:t,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(Vx),Zx=nx.xhr,Yx=nx.mergeOptions,Jx=function(e,t,n,i){var r="arraybuffer"===e.responseType?e.response:e.responseText;!t&&r&&(e.responseTime=Date.now(),e.roundTripTime=e.responseTime-e.requestTime,e.bytesReceived=r.byteLength||r.length,e.bandwidth||(e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3))),n.headers&&(e.responseHeaders=n.headers),t&&"ETIMEDOUT"===t.code&&(e.timedout=!0),t||e.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(t=new Error("XHR Failed with a response of: "+(e&&(r||e.responseText)))),i(t,e)},Qx=function(){var e=function e(t,n){t=Yx({timeout:45e3},t);var i=e.beforeRequest||nx.Vhs.xhr.beforeRequest;if(i&&"function"==typeof i){var r=i(t);r&&(t=r)}var a=(!0===nx.Vhs.xhr.original?Zx:nx.Vhs.xhr)(t,(function(e,t){return Jx(a,e,t,n)})),o=a.abort;return a.abort=function(){return a.aborted=!0,o.apply(a,arguments)},a.uri=t.uri,a.requestTime=Date.now(),a};return e.original=!0,e},eO=function(e){var t,n={};return e.byterange&&(n.Range="bytes="+(t=e.byterange).offset+"-"+("bigint"==typeof t.offset||"bigint"==typeof t.length?Ah().BigInt(t.offset)+Ah().BigInt(t.length)-Ah().BigInt(1):t.offset+t.length-1)),n},tO=function(e,t){return e.start(t)+"-"+e.end(t)},nO=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},iO=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},rO=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];Cf(i)?t[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:t[n]=i})),t},aO=function(e){var t=e.byterange||{length:1/0,offset:0};return[t.length,t.offset,e.resolvedUri].join(",")},oO=function(e){return e.resolvedUri},sO=function(e){for(var t=Array.prototype.slice.call(e),n=16,i="",r=0;r<t.length/n;r++)i+=t.slice(r*n,r*n+n).map(nO).join("")+" "+t.slice(r*n,r*n+n).map(iO).join("")+"\n";return i},dO=Object.freeze({__proto__:null,createTransferableMessage:rO,initSegmentId:aO,segmentKeyId:oO,hexDump:sO,tagDump:function(e){var t=e.bytes;return sO(t)},textRanges:function(e){var t,n="";for(t=0;t<e.length;t++)n+=tO(e,t)+" ";return n}}),lO=function e(t){var n=t.programTime,i=t.playlist,r=t.retryCount,a=void 0===r?2:r,o=t.seekTo,s=t.pauseAfterSeek,d=void 0===s||s,l=t.tech,u=t.callback;if(!u)throw new Error("seekToProgramTime: callback must be provided");if(void 0===n||!i||!o)return u({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return u({message:"player must be playing a live stream to start buffering"});if(!function(e){if(!e.segments||0===e.segments.length)return!1;for(var t=0;t<e.segments.length;t++)if(!e.segments[t].dateTimeObject)return!1;return!0}(i))return u({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var c=function(e,t){var n;try{n=new Date(e)}catch(e){return null}if(!t||!t.segments||0===t.segments.length)return null;var i=t.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<t.segments.length-1&&(i=t.segments[r],!(n<t.segments[r+1].dateTimeObject));r++);var a,o=t.segments[t.segments.length-1],s=o.dateTimeObject,d=o.videoTimingInfo?(a=o.videoTimingInfo).transmuxedPresentationEnd-a.transmuxedPresentationStart-a.transmuxerPrependedSeconds:o.duration+.25*o.duration;return n>new Date(s.getTime()+1e3*d)?null:(n>s&&(i=o),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:Mx.duration(t,t.mediaSequence+t.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(n,i);if(!c)return u({message:n+" was not found in the stream"});var p=c.segment,h=function(e,t){var n,i;try{n=new Date(e),i=new Date(t)}catch(e){}var r=n.getTime();return(i.getTime()-r)/1e3}(p.dateTimeObject,n);if("estimate"===c.type)return 0===a?u({message:n+" is not buffered yet. Try again"}):(o(c.estimatedStart+h),void l.one("seeked",(function(){e({programTime:n,playlist:i,retryCount:a-1,seekTo:o,pauseAfterSeek:d,tech:l,callback:u})})));var f=p.start+h;l.one("seeked",(function(){return u(null,l.currentTime())})),d&&l.pause(),o(f)},uO=function(e,t){if(4===e.readyState)return t()},cO=nx.EventTarget,pO=nx.mergeOptions,hO=function(e,t){if(!$x(e,t))return!1;if(e.sidx&&t.sidx&&(e.sidx.offset!==t.sidx.offset||e.sidx.length!==t.sidx.length))return!1;if(!e.sidx&&t.sidx||e.sidx&&!t.sidx)return!1;if(e.segments&&!t.segments||!e.segments&&t.segments)return!1;if(!e.segments&&!t.segments)return!0;for(var n=0;n<e.segments.length;n++){var i=e.segments[n],r=t.segments[n];if(i.uri!==r.uri)return!1;if(i.byterange||r.byterange){var a=i.byterange,o=r.byterange;if(a&&!o||!a&&o)return!1;if(a.offset!==o.offset||a.length!==o.length)return!1}}return!0},fO=function(e,t){return(Boolean(!e.map&&!t.map)||Boolean(e.map&&t.map&&e.map.byterange.offset===t.map.byterange.offset&&e.map.byterange.length===t.map.byterange.length))&&e.uri===t.uri&&e.byterange.offset===t.byterange.offset&&e.byterange.length===t.byterange.length},gO=function(e,t){var n={};for(var i in e){var r=e[i].sidx;if(r){var a=Yf(r);if(!t[a])break;var o=t[a].sidxInfo;fO(o,r)&&(n[a]=t[a])}}return n},mO=function(e){function t(t,n,i,r){var a;void 0===i&&(i={}),(a=e.call(this)||this).masterPlaylistLoader_=r||Lh(a),r||(a.isMaster_=!0);var o=i,s=o.withCredentials,d=void 0!==s&&s,l=o.handleManifestRedirects,u=void 0!==l&&l;if(a.vhs_=n,a.withCredentials=d,a.handleManifestRedirects=u,!t)throw new Error("A non-empty playlist URL or object is required");return a.on("minimumUpdatePeriod",(function(){a.refreshXml_()})),a.on("mediaupdatetimeout",(function(){a.refreshMedia_(a.media().id)})),a.state="HAVE_NOTHING",a.loadedPlaylists_={},a.logger_=sx("DashPlaylistLoader"),a.isMaster_?(a.masterPlaylistLoader_.srcUrl=t,a.masterPlaylistLoader_.sidxMapping_={}):a.childPlaylist_=t,a}Uh(t,e);var n=t.prototype;return n.requestErrored_=function(e,t,n){return!this.request||(this.request=null,e?(this.error="object"!=typeof e||e instanceof Error?{status:t.status,message:"DASH request error at URL: "+t.uri,response:t.response,code:2}:e,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(e,t,n){var i=this,r=e.sidx&&Yf(e.sidx);if(e.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var a=ox(this.handleManifestRedirects,e.sidx.resolvedUri),o=function(a,o){if(!i.requestErrored_(a,o,t)){var s,d=i.masterPlaylistLoader_.sidxMapping_;try{s=Eg()(Ef(o.response).subarray(8))}catch(e){return void i.requestErrored_(e,o,t)}return d[r]={sidxInfo:e.sidx,sidx:s},$f(e,s,e.sidx.resolvedUri),n(!0)}};this.request=function(e,t,n){var i,r=[],a=!1,o=function(e,t,i,r){return t.abort(),a=!0,n(e,t,i,r)},s=function(e,t){if(!a){if(e)return o(e,t,"",r);var n=t.responseText.substring(r&&r.byteLength||0,t.responseText.length);if(r=Df(r,Of(n,!0)),i=i||Pg(r),r.length<10||i&&r.length<i+2)return uO(t,(function(){return o(e,t,"",r)}));var s=Xg(r);return"ts"===s&&r.length<188||!s&&r.length<376?uO(t,(function(){return o(e,t,"",r)})):o(null,t,s,r)}},d={uri:e,beforeSend:function(e){e.overrideMimeType("text/plain; charset=x-user-defined"),e.addEventListener("progress",(function(t){return t.total,t.loaded,Jx(e,null,{statusCode:e.status},s)}))}},l=t(d,(function(e,t){return Jx(l,e,t,s)}));return l}(a,this.vhs_.xhr,(function(t,n,r,s){if(t)return o(t,n);if(!r||"mp4"!==r)return o({status:n.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+a,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},n);var d=e.sidx.byterange,l=d.offset,u=d.length;if(s.length>=u+l)return o(t,{response:s.subarray(l,l+u),status:n.status,uri:n.uri});i.request=i.vhs_.xhr({uri:a,responseType:"arraybuffer",headers:eO({byterange:e.sidx.byterange})},o)}))}else this.mediaRequest_=Ah().setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},Ah().clearTimeout(this.minimumUpdatePeriodTimeout_),Ah().clearTimeout(this.mediaRequest_),Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},n.media=function(e){var t=this;if(!e)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"==typeof e){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var i=!this.media_||e.id!==this.media_.id;if(i&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList)return this.state="HAVE_METADATA",this.media_=e,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,n,(function(i){t.haveMetadata({startingState:n,playlist:e})})))},n.haveMetadata=function(e){var t=e.startingState,n=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===t?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(Ah().clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(e){var t=this;Ah().clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(e){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=Ah().setTimeout((function(){return t.load()}),i)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var e=this;this.started=!0,this.isMaster_?this.requestMaster_((function(t,n){e.haveMaster_(),e.hasPendingRequest()||e.media_||e.media(e.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=Ah().setTimeout((function(){return e.haveMaster_()}),0)},n.requestMaster_=function(e){var t=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(!t.requestErrored_(n,i)){var r=i.responseText!==t.masterPlaylistLoader_.masterXml_;return t.masterPlaylistLoader_.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?t.masterLoaded_=Date.parse(i.responseHeaders.date):t.masterLoaded_=Date.now(),t.masterPlaylistLoader_.srcUrl=ox(t.handleManifestRedirects,t.masterPlaylistLoader_.srcUrl,i),r?(t.handleMaster_(),void t.syncClientServerClock_((function(){return e(i,r)}))):e(i,r)}"HAVE_NOTHING"===t.state&&(t.started=!1)}))},n.syncClientServerClock_=function(e){var t=this,n=Ig(this.masterPlaylistLoader_.masterXml_);return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),e()):void(this.request=this.vhs_.xhr({uri:ax(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(t.request){if(i)return t.masterPlaylistLoader_.clientOffset_=t.masterLoaded_-Date.now(),e();var a;a="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):t.masterLoaded_:Date.parse(r.responseText),t.masterPlaylistLoader_.clientOffset_=a-Date.now(),e()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var e,t,n,i=this.masterPlaylistLoader_.master,r=(e={masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:i},n=kg(e.masterXml,{manifestUri:t=e.srcUrl,clientOffset:e.clientOffset,sidxMapping:e.sidxMapping,previousManifest:e.previousManifest}),Fx(n,t),n);i&&(r=function(e,t,n){for(var i=!0,r=pO(e,{duration:t.duration,minimumUpdatePeriod:t.minimumUpdatePeriod,timelineStarts:t.timelineStarts}),a=0;a<t.playlists.length;a++){var o=t.playlists[a];if(o.sidx){var s=Yf(o.sidx);n&&n[s]&&n[s].sidx&&$f(o,n[s].sidx,o.sidx.resolvedUri)}var d=Gx(r,o,hO);d&&(r=d,i=!1)}return Nx(t,(function(e,t,n,a){if(e.playlists&&e.playlists.length){var o=e.playlists[0].id,s=Gx(r,e.playlists[0],hO);s&&((r=s).mediaGroups[t][n][a].playlists[0]=r.playlists[o],i=!1)}})),t.minimumUpdatePeriod!==e.minimumUpdatePeriod&&(i=!1),i?null:r}(i,r,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=r||i;var a=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return a&&a!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=a),(!i||r&&r.minimumUpdatePeriod!==i.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(r)},n.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(Ah().clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var t=e.master&&e.master.minimumUpdatePeriod;0===t&&(e.media()?t=1e3*e.media().targetDuration:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),"number"!=typeof t||t<=0?t<0&&this.logger_("found invalid minimumUpdatePeriod of "+t+", not setting a timeout"):this.createMUPTimeout_(t)},n.createMUPTimeout_=function(e){var t=this.masterPlaylistLoader_;t.minimumUpdatePeriodTimeout_=Ah().setTimeout((function(){t.minimumUpdatePeriodTimeout_=null,t.trigger("minimumUpdatePeriod"),t.createMUPTimeout_(e)}),e)},n.refreshXml_=function(){var e=this;this.requestMaster_((function(t,n){var i,r,a;n&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=(i=e.masterPlaylistLoader_.master,r=e.masterPlaylistLoader_.sidxMapping_,a=gO(i.playlists,r),Nx(i,(function(e,t,n,i){if(e.playlists&&e.playlists.length){var o=e.playlists;a=pO(a,gO(o,r))}})),a),e.addSidxSegments_(e.media(),e.state,(function(t){e.refreshMedia_(e.media().id)})))}))},n.refreshMedia_=function(e){var t=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,i=!this.media_||this.media_!==n[e];i?this.media_=n[e]:this.trigger("playlistunchanged"),this.mediaUpdateTimeout||function e(){t.media().endList||(t.mediaUpdateTimeout=Ah().setTimeout((function(){t.trigger("mediaupdatetimeout"),e()}),Kx(t.media(),Boolean(i))))}(),this.trigger("loadedplaylist")},t}(cO),vO={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},yO=function(e){return e.on=e.addEventListener,e.off=e.removeEventListener,e},bO=function(e){return function(){var t=function(e){try{return URL.createObjectURL(new Blob([e],{type:"application/javascript"}))}catch(n){var t=new BlobBuilder;return t.append(e),URL.createObjectURL(t.getBlob())}}(e),n=yO(new Worker(t));n.objURL=t;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(t),i.call(this)},n}},_O=function(e){return"var browserWorkerPolyFill = "+yO.toString()+";\nbrowserWorkerPolyFill(self);\n"+e},TO=function(e){return e.toString().replace(/^function.+?{/,"").slice(0,-1)},wO=_O(TO((function(){var e=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t]=e[t].concat(n)},this.off=function(t,n){var i;return!!e[t]&&(i=e[t].indexOf(n),e[t]=e[t].slice(),e[t].splice(i,1),i>-1)},this.trigger=function(t){var n,i,r,a;if(n=e[t])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(a=[],i=arguments.length,i=1;i<arguments.length;++i)a.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,a)}},this.dispose=function(){e={}}}};e.prototype.pipe=function(e){return this.on("data",(function(t){e.push(t)})),this.on("done",(function(t){e.flush(t)})),this.on("partialdone",(function(t){e.partialFlush(t)})),this.on("endedtimeline",(function(t){e.endTimeline(t)})),this.on("reset",(function(t){e.reset(t)})),e},e.prototype.push=function(e){this.trigger("data",e)},e.prototype.flush=function(e){this.trigger("done",e)},e.prototype.partialFlush=function(e){this.trigger("partialdone",e)},e.prototype.endTimeline=function(e){this.trigger("endedtimeline",e)},e.prototype.reset=function(e){this.trigger("reset",e)};var t,i,r,a,o,s,d,l,u,c,p,h,f,g,m,v,y,b,_,T,w,S,k,I,C,E,A,P,x,O,D,R,L,M,U,j,N,B,F,q,V=e,H=Math.pow(2,32),z={getUint64:function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength);return n.getBigUint64?(t=n.getBigUint64(0))<Number.MAX_SAFE_INTEGER?Number(t):t:n.getUint32(0)*H+n.getUint32(4)},MAX_UINT32:H},W=z.MAX_UINT32;!function(){var e;if(S={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(e in S)S.hasOwnProperty(e)&&(S[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);k=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),C=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),I=new Uint8Array([0,0,0,1]),E=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),P={video:E,audio:A},D=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),O=new Uint8Array([0,0,0,0,0,0,0,0]),R=new Uint8Array([0,0,0,0,0,0,0,0]),L=R,M=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),U=R,x=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),t=function(e){var t,n,i=[],r=0;for(t=1;t<arguments.length;t++)i.push(arguments[t]);for(t=i.length;t--;)r+=i[t].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(e,4),t=0,r=8;t<i.length;t++)n.set(i[t],r),r+=i[t].byteLength;return n},i=function(){return t(S.dinf,t(S.dref,D))},r=function(e){return t(S.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},m=function(e){return t(S.hdlr,P[e])},g=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(n[12]=e.samplerate>>>24&255,n[13]=e.samplerate>>>16&255,n[14]=e.samplerate>>>8&255,n[15]=255&e.samplerate),t(S.mdhd,n)},f=function(e){return t(S.mdia,g(e),m(e.type),s(e))},o=function(e){return t(S.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},s=function(e){return t(S.minf,"video"===e.type?t(S.vmhd,x):t(S.smhd,O),i(),y(e))},d=function(e,n){for(var i=[],r=n.length;r--;)i[r]=_(n[r]);return t.apply(null,[S.moof,o(e)].concat(i))},l=function(e){for(var n=e.length,i=[];n--;)i[n]=p(e[n]);return t.apply(null,[S.moov,c(4294967295)].concat(i).concat(u(e)))},u=function(e){for(var n=e.length,i=[];n--;)i[n]=T(e[n]);return t.apply(null,[S.mvex].concat(i))},c=function(e){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(S.mvhd,n)},v=function(e){var n,i,r=e.samples||[],a=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,a[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return t(S.sdtp,a)},y=function(e){return t(S.stbl,b(e),t(S.stts,U),t(S.stsc,L),t(S.stsz,M),t(S.stco,R))},b=function(e){return t(S.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?j(e):N(e))},j=function(e){var n,i,r=e.sps||[],a=e.pps||[],o=[],s=[];for(n=0;n<r.length;n++)o.push((65280&r[n].byteLength)>>>8),o.push(255&r[n].byteLength),o=o.concat(Array.prototype.slice.call(r[n]));for(n=0;n<a.length;n++)s.push((65280&a[n].byteLength)>>>8),s.push(255&a[n].byteLength),s=s.concat(Array.prototype.slice.call(a[n]));if(i=[S.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&e.width)>>8,255&e.width,(65280&e.height)>>8,255&e.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),t(S.avcC,new Uint8Array([1,e.profileIdc,e.profileCompatibility,e.levelIdc,255].concat([r.length],o,[a.length],s))),t(S.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],e.sarRatio){var d=e.sarRatio[0],l=e.sarRatio[1];i.push(t(S.pasp,new Uint8Array([(4278190080&d)>>24,(16711680&d)>>16,(65280&d)>>8,255&d,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return t.apply(null,i)},N=function(e){return t(S.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),r(e))},h=function(e){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(S.tkhd,n)},_=function(e){var n,i,r,a,o,s;return n=t(S.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),o=Math.floor(e.baseMediaDecodeTime/W),s=Math.floor(e.baseMediaDecodeTime%W),i=t(S.tfdt,new Uint8Array([1,0,0,0,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),"audio"===e.type?(r=w(e,92),t(S.traf,n,i,r)):(a=v(e),r=w(e,a.length+92),t(S.traf,n,i,r,a))},p=function(e){return e.duration=e.duration||4294967295,t(S.trak,h(e),f(e))},T=function(e){var n=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(n[n.length-1]=0),t(S.trex,n)},q=function(e,t){var n=0,i=0,r=0,a=0;return e.length&&(void 0!==e[0].duration&&(n=1),void 0!==e[0].size&&(i=2),void 0!==e[0].flags&&(r=4),void 0!==e[0].compositionTimeOffset&&(a=8)),[0,0,n|i|r|a,1,(4278190080&e.length)>>>24,(16711680&e.length)>>>16,(65280&e.length)>>>8,255&e.length,(4278190080&t)>>>24,(16711680&t)>>>16,(65280&t)>>>8,255&t]},F=function(e,n){var i,r,a,o,s,d;for(n+=20+16*(o=e.samples||[]).length,a=q(o,n),(r=new Uint8Array(a.length+16*o.length)).set(a),i=a.length,d=0;d<o.length;d++)s=o[d],r[i++]=(4278190080&s.duration)>>>24,r[i++]=(16711680&s.duration)>>>16,r[i++]=(65280&s.duration)>>>8,r[i++]=255&s.duration,r[i++]=(4278190080&s.size)>>>24,r[i++]=(16711680&s.size)>>>16,r[i++]=(65280&s.size)>>>8,r[i++]=255&s.size,r[i++]=s.flags.isLeading<<2|s.flags.dependsOn,r[i++]=s.flags.isDependedOn<<6|s.flags.hasRedundancy<<4|s.flags.paddingValue<<1|s.flags.isNonSyncSample,r[i++]=61440&s.flags.degradationPriority,r[i++]=15&s.flags.degradationPriority,r[i++]=(4278190080&s.compositionTimeOffset)>>>24,r[i++]=(16711680&s.compositionTimeOffset)>>>16,r[i++]=(65280&s.compositionTimeOffset)>>>8,r[i++]=255&s.compositionTimeOffset;return t(S.trun,r)},B=function(e,n){var i,r,a,o,s,d;for(n+=20+8*(o=e.samples||[]).length,a=q(o,n),(i=new Uint8Array(a.length+8*o.length)).set(a),r=a.length,d=0;d<o.length;d++)s=o[d],i[r++]=(4278190080&s.duration)>>>24,i[r++]=(16711680&s.duration)>>>16,i[r++]=(65280&s.duration)>>>8,i[r++]=255&s.duration,i[r++]=(4278190080&s.size)>>>24,i[r++]=(16711680&s.size)>>>16,i[r++]=(65280&s.size)>>>8,i[r++]=255&s.size;return t(S.trun,i)},w=function(e,t){return"audio"===e.type?B(e,t):F(e,t)},a=function(){return t(S.ftyp,k,I,k,C)};var $,G,K,X,Z,Y,J,Q,ee=function(e){return t(S.mdat,e)},te=d,ne=function(e,t){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=t,n.compositionTimeOffset=e.pts-e.dts,n.duration=e.duration,n.size=4*e.length,n.size+=e.byteLength,e.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},ie=[33,16,5,32,164,27],re=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ae=function(e){for(var t=[];e--;)t.push(0);return t},oe=9e4;Y=function(e,t){return G(Z(e,t))},J=function(e,t){return K(X(e),t)},Q=function(e,t,n){return X(n?e:e-t)};var se=oe,de=G=function(e){return e*oe},le=(K=function(e,t){return e*t},X=function(e){return e/oe}),ue=(Z=function(e,t){return e/t},Y),ce=J,pe=Q,he=function(e,t,n,i){var r,a,o,s,d,l=0,u=0,c=0;if(t.length&&(r=ue(e.baseMediaDecodeTime,e.samplerate),a=Math.ceil(se/(e.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),c=(u=Math.floor(l/a))*a),!(u<1||c>45e3))){for((o=function(){if(!$){var e={96e3:[ie,[227,64],ae(154),[56]],88200:[ie,[231],ae(170),[56]],64e3:[ie,[248,192],ae(240),[56]],48e3:[ie,[255,192],ae(268),[55,148,128],ae(54),[112]],44100:[ie,[255,192],ae(268),[55,163,128],ae(84),[112]],32e3:[ie,[255,192],ae(268),[55,234],ae(226),[112]],24e3:[ie,[255,192],ae(268),[55,255,128],ae(268),[111,112],ae(126),[224]],16e3:[ie,[255,192],ae(268),[55,255,128],ae(268),[111,255],ae(269),[223,108],ae(195),[1,192]],12e3:[re,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,253,128],ae(259),[56]],11025:[re,ae(268),[3,127,248],ae(268),[6,255,240],ae(268),[13,255,224],ae(268),[27,255,192],ae(268),[55,175,128],ae(108),[112]],8e3:[re,ae(268),[3,121,16],ae(47),[7]]};t=e,$=Object.keys(t).reduce((function(e,n){return e[n]=new Uint8Array(t[n].reduce((function(e,t){return e.concat(t)}),[])),e}),{})}var t;return $}()[e.samplerate])||(o=t[0].data),s=0;s<u;s++)d=t[0],t.splice(0,0,{data:o,dts:d.dts-a,pts:d.pts-a});return e.baseMediaDecodeTime-=Math.floor(ce(c,e.samplerate)),c}},fe=function(e){delete e.minSegmentDts,delete e.maxSegmentDts,delete e.minSegmentPts,delete e.maxSegmentPts},ge=function(e,t){var n,i=e.minSegmentDts;return t||(i-=e.timelineStartInfo.dts),n=e.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===e.type&&(n*=e.samplerate/9e4,n=Math.floor(n)),n},me=function(e,t){"number"==typeof t.pts&&(void 0===e.timelineStartInfo.pts&&(e.timelineStartInfo.pts=t.pts),void 0===e.minSegmentPts?e.minSegmentPts=t.pts:e.minSegmentPts=Math.min(e.minSegmentPts,t.pts),void 0===e.maxSegmentPts?e.maxSegmentPts=t.pts:e.maxSegmentPts=Math.max(e.maxSegmentPts,t.pts)),"number"==typeof t.dts&&(void 0===e.timelineStartInfo.dts&&(e.timelineStartInfo.dts=t.dts),void 0===e.minSegmentDts?e.minSegmentDts=t.dts:e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),void 0===e.maxSegmentDts?e.maxSegmentDts=t.dts:e.maxSegmentDts=Math.max(e.maxSegmentDts,t.dts))},ve=function e(t){t=t||{},e.prototype.init.call(this),this.parse708captions_="boolean"!=typeof t.parse708captions||t.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Ee(0,0),new Ee(0,1),new Ee(1,0),new Ee(1,1)],this.parse708captions_&&(this.cc708Stream_=new we({captionServices:t.captionServices})),this.reset(),this.ccStreams_.forEach((function(e){e.on("data",this.trigger.bind(this,"data")),e.on("partialdone",this.trigger.bind(this,"partialdone")),e.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(ve.prototype=new V).push=function(e){var t,n,i;if("sei_rbsp"===e.nalUnitType&&(t=function(e){for(var t=0,n={payloadType:-1,payloadSize:0},i=0,r=0;t<e.byteLength&&128!==e[t];){for(;255===e[t];)i+=255,t++;for(i+=e[t++];255===e[t];)r+=255,t++;if(r+=e[t++],!n.payload&&4===i){if("GA94"===String.fromCharCode(e[t+3],e[t+4],e[t+5],e[t+6])){n.payloadType=i,n.payloadSize=r,n.payload=e.subarray(t,t+r);break}n.payload=void 0}t+=r,i=0,r=0}return n}(e.escapedRBSP)).payload&&4===t.payloadType&&(n=function(e){return 181!==e.payload[0]||49!=(e.payload[1]<<8|e.payload[2])||"GA94"!==String.fromCharCode(e.payload[3],e.payload[4],e.payload[5],e.payload[6])||3!==e.payload[7]?null:e.payload.subarray(8,e.payload.length-1)}(t)))if(e.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(e.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=function(e,t){var n,i,r,a,o=[];if(!(64&t[0]))return o;for(i=31&t[0],n=0;n<i;n++)a={type:3&t[2+(r=3*n)],pts:e},4&t[r+2]&&(a.ccData=t[r+3]<<8|t[r+4],o.push(a));return o}(e.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts}},ve.prototype.flushCCStreams=function(e){this.ccStreams_.forEach((function(t){return"flush"===e?t.flush():t.partialFlush()}),this)},ve.prototype.flushStream=function(e){this.captionPackets_.length?(this.captionPackets_.forEach((function(e,t){e.presortIndex=t})),this.captionPackets_.sort((function(e,t){return e.pts===t.pts?e.presortIndex-t.presortIndex:e.pts-t.pts})),this.captionPackets_.forEach((function(e){e.type<2?this.dispatchCea608Packet(e):this.dispatchCea708Packet(e)}),this),this.captionPackets_.length=0,this.flushCCStreams(e)):this.flushCCStreams(e)},ve.prototype.flush=function(){return this.flushStream("flush")},ve.prototype.partialFlush=function(){return this.flushStream("partialFlush")},ve.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(e){e.reset()}))},ve.prototype.dispatchCea608Packet=function(e){this.setsTextOrXDSActive(e)?this.activeCea608Channel_[e.type]=null:this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1),null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)},ve.prototype.setsChannel1Active=function(e){return 4096==(30720&e.ccData)},ve.prototype.setsChannel2Active=function(e){return 6144==(30720&e.ccData)},ve.prototype.setsTextOrXDSActive=function(e){return 256==(28928&e.ccData)||4138==(30974&e.ccData)||6186==(30974&e.ccData)},ve.prototype.dispatchCea708Packet=function(e){this.parse708captions_&&this.cc708Stream_.push(e)};var ye={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},be=function(e){return 32<=e&&e<=127||160<=e&&e<=255},_e=function(e){this.windowNum=e,this.reset()};_e.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},_e.prototype.getText=function(){return this.rows.join("\n")},_e.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},_e.prototype.newLine=function(e){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(e),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},_e.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},_e.prototype.addText=function(e){this.rows[this.rowIdx]+=e},_e.prototype.backspace=function(){if(!this.isEmpty()){var e=this.rows[this.rowIdx];this.rows[this.rowIdx]=e.substr(0,e.length-1)}};var Te=function(e,t,n){this.serviceNum=e,this.text="",this.currentWindow=new _e(-1),this.windows=[],this.stream=n,"string"==typeof t&&this.createTextDecoder(t)};Te.prototype.init=function(e,t){this.startPts=e;for(var n=0;n<8;n++)this.windows[n]=new _e(n),"function"==typeof t&&(this.windows[n].beforeRowOverflow=t)},Te.prototype.setCurrentWindow=function(e){this.currentWindow=this.windows[e]},Te.prototype.createTextDecoder=function(e){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(e)}catch(t){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+e+" encoding. "+t})}};var we=function e(t){t=t||{},e.prototype.init.call(this);var n,i=this,r=t.captionServices||{},a={};Object.keys(r).forEach((function(e){n=r[e],/^SERVICE/.test(e)&&(a[e]=n.encoding)})),this.serviceEncodings=a,this.current708Packet=null,this.services={},this.push=function(e){3===e.type?(i.new708Packet(),i.add708Bytes(e)):(null===i.current708Packet&&i.new708Packet(),i.add708Bytes(e))}};we.prototype=new V,we.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},we.prototype.add708Bytes=function(e){var t=e.ccData,n=t>>>8,i=255&t;this.current708Packet.ptsVals.push(e.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},we.prototype.push708Packet=function(){var e=this.current708Packet,t=e.data,n=null,i=null,r=0,a=t[r++];for(e.seq=a>>6,e.sizeCode=63&a;r<t.length;r++)i=31&(a=t[r++]),7==(n=a>>5)&&i>0&&(n=a=t[r++]),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},we.prototype.pushServiceBlock=function(e,t,n){var i,r=t,a=this.current708Packet.data,o=this.services[e];for(o||(o=this.initService(e,r));r<t+n&&r<a.length;r++)i=a[r],be(i)?r=this.handleText(r,o):24===i?r=this.multiByteCharacter(r,o):16===i?r=this.extendedCommands(r,o):128<=i&&i<=135?r=this.setCurrentWindow(r,o):152<=i&&i<=159?r=this.defineWindow(r,o):136===i?r=this.clearWindows(r,o):140===i?r=this.deleteWindows(r,o):137===i?r=this.displayWindows(r,o):138===i?r=this.hideWindows(r,o):139===i?r=this.toggleWindows(r,o):151===i?r=this.setWindowAttributes(r,o):144===i?r=this.setPenAttributes(r,o):145===i?r=this.setPenColor(r,o):146===i?r=this.setPenLocation(r,o):143===i?o=this.reset(r,o):8===i?o.currentWindow.backspace():12===i?o.currentWindow.clearText():13===i?o.currentWindow.pendingNewLine=!0:14===i?o.currentWindow.clearText():141===i&&r++},we.prototype.extendedCommands=function(e,t){var n=this.current708Packet.data[++e];return be(n)&&(e=this.handleText(e,t,{isExtended:!0})),e},we.prototype.getPts=function(e){return this.current708Packet.ptsVals[Math.floor(e/2)]},we.prototype.initService=function(e,t){var n,i,r=this;return(n="SERVICE"+e)in this.serviceEncodings&&(i=this.serviceEncodings[n]),this.services[e]=new Te(e,i,r),this.services[e].init(this.getPts(t),(function(t){r.flushDisplayed(t,r.services[e])})),this.services[e]},we.prototype.handleText=function(e,t,n){var i,r,a,o,s=n&&n.isExtended,d=n&&n.isMultiByte,l=this.current708Packet.data,u=s?4096:0,c=l[e],p=l[e+1],h=t.currentWindow;return t.textDecoder_&&!s?(d?(r=[c,p],e++):r=[c],i=t.textDecoder_.decode(new Uint8Array(r))):(o=ye[a=u|c]||a,i=4096&a&&a===o?"":String.fromCharCode(o)),h.pendingNewLine&&!h.isEmpty()&&h.newLine(this.getPts(e)),h.pendingNewLine=!1,h.addText(i),e},we.prototype.multiByteCharacter=function(e,t){var n=this.current708Packet.data,i=n[e+1],r=n[e+2];return be(i)&&be(r)&&(e=this.handleText(++e,t,{isMultiByte:!0})),e},we.prototype.setCurrentWindow=function(e,t){var n=7&this.current708Packet.data[e];return t.setCurrentWindow(n),e},we.prototype.defineWindow=function(e,t){var n=this.current708Packet.data,i=n[e],r=7&i;t.setCurrentWindow(r);var a=t.currentWindow;return i=n[++e],a.visible=(32&i)>>5,a.rowLock=(16&i)>>4,a.columnLock=(8&i)>>3,a.priority=7&i,i=n[++e],a.relativePositioning=(128&i)>>7,a.anchorVertical=127&i,i=n[++e],a.anchorHorizontal=i,i=n[++e],a.anchorPoint=(240&i)>>4,a.rowCount=15&i,i=n[++e],a.columnCount=63&i,i=n[++e],a.windowStyle=(56&i)>>3,a.penStyle=7&i,a.virtualRowCount=a.rowCount+1,e},we.prototype.setWindowAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.winAttr;return i=n[++e],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++e],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++e],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++e],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,e},we.prototype.flushDisplayed=function(e,t){for(var n=[],i=0;i<8;i++)t.windows[i].visible&&!t.windows[i].isEmpty()&&n.push(t.windows[i].getText());t.endPts=e,t.text=n.join("\n\n"),this.pushCaption(t),t.startPts=e},we.prototype.pushCaption=function(e){""!==e.text&&(this.trigger("data",{startPts:e.startPts,endPts:e.endPts,text:e.text,stream:"cc708_"+e.serviceNum}),e.text="",e.startPts=e.endPts)},we.prototype.displayWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=1);return e},we.prototype.hideWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible=0);return e},we.prototype.toggleWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&(t.windows[r].visible^=1);return e},we.prototype.clearWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].clearText();return e},we.prototype.deleteWindows=function(e,t){var n=this.current708Packet.data[++e],i=this.getPts(e);this.flushDisplayed(i,t);for(var r=0;r<8;r++)n&1<<r&&t.windows[r].reset();return e},we.prototype.setPenAttributes=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penAttr;return i=n[++e],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++e],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,e},we.prototype.setPenColor=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penColor;return i=n[++e],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++e],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++e],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,e},we.prototype.setPenLocation=function(e,t){var n=this.current708Packet.data,i=n[e],r=t.currentWindow.penLoc;return t.currentWindow.pendingNewLine=!0,i=n[++e],r.row=15&i,i=n[++e],r.column=63&i,e},we.prototype.reset=function(e,t){var n=this.getPts(e);return this.flushDisplayed(n,t),this.initService(t.serviceNum,e)};var Se={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ke=function(e){return null===e?"":(e=Se[e]||e,String.fromCharCode(e))},Ie=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ce=function(){for(var e=[],t=15;t--;)e.push("");return e},Ee=function e(t,n){e.prototype.init.call(this),this.field_=t||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(e){var t,n,i,r,a;if((t=32639&e.ccData)!==this.lastControlCode_){if(4096==(61440&t)?this.lastControlCode_=t:t!==this.PADDING_&&(this.lastControlCode_=null),i=t>>>8,r=255&t,t!==this.PADDING_)if(t===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(t===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(e.pts),this.flushDisplayed(e.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=e.pts;else if(t===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(e.pts);else if(t===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(e.pts);else if(t===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(e.pts);else if(t===this.CARRIAGE_RETURN_)this.clearFormatting(e.pts),this.flushDisplayed(e.pts),this.shiftRowsUp_(),this.startPts_=e.pts;else if(t===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(t===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(e.pts),this.displayed_=Ce();else if(t===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ce();else if(t===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(e.pts),this.displayed_=Ce()),this.mode_="paintOn",this.startPts_=e.pts;else if(this.isSpecialCharacter(i,r))a=ke((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ke((i=(3&i)<<8)|r),this[this.mode_](e.pts,a),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(e.pts),this[this.mode_](e.pts," "),this.column_++,14==(14&r)&&this.addFormatting(e.pts,["i"]),1==(1&r)&&this.addFormatting(e.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var o=Ie.indexOf(7968&t);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(e.pts,o)),o!==this.row_&&(this.clearFormatting(e.pts),this.row_=o),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(e.pts,["u"]),16==(16&t)&&(this.column_=4*((14&t)>>1)),this.isColorPAC(r)&&14==(14&r)&&this.addFormatting(e.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),a=ke(i),a+=ke(r),this[this.mode_](e.pts,a),this.column_+=a.length)}else this.lastControlCode_=null}};Ee.prototype=new V,Ee.prototype.flushDisplayed=function(e){var t=this.displayed_.map((function(e,t){try{return e.trim()}catch(e){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+t+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");t.length&&this.trigger("data",{startPts:this.startPts_,endPts:e,text:t,stream:this.name_})},Ee.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ce(),this.nonDisplayed_=Ce(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Ee.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Ee.prototype.isSpecialCharacter=function(e,t){return e===this.EXT_&&t>=48&&t<=63},Ee.prototype.isExtCharacter=function(e,t){return(e===this.EXT_+1||e===this.EXT_+2)&&t>=32&&t<=63},Ee.prototype.isMidRowCode=function(e,t){return e===this.EXT_&&t>=32&&t<=47},Ee.prototype.isOffsetControlCode=function(e,t){return e===this.OFFSET_&&t>=33&&t<=35},Ee.prototype.isPAC=function(e,t){return e>=this.BASE_&&e<this.BASE_+8&&t>=64&&t<=127},Ee.prototype.isColorPAC=function(e){return e>=64&&e<=79||e>=96&&e<=127},Ee.prototype.isNormalChar=function(e){return e>=32&&e<=127},Ee.prototype.setRollUp=function(e,t){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(e),this.nonDisplayed_=Ce(),this.displayed_=Ce()),void 0!==t&&t!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[t-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===t&&(t=this.row_),this.topRow_=t-this.rollUpRows_+1},Ee.prototype.addFormatting=function(e,t){this.formatting_=this.formatting_.concat(t);var n=t.reduce((function(e,t){return e+"<"+t+">"}),"");this[this.mode_](e,n)},Ee.prototype.clearFormatting=function(e){if(this.formatting_.length){var t=this.formatting_.reverse().reduce((function(e,t){return e+"</"+t+">"}),"");this.formatting_=[],this[this.mode_](e,t)}},Ee.prototype.popOn=function(e,t){var n=this.nonDisplayed_[this.row_];n+=t,this.nonDisplayed_[this.row_]=n},Ee.prototype.rollUp=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n},Ee.prototype.shiftRowsUp_=function(){var e;for(e=0;e<this.topRow_;e++)this.displayed_[e]="";for(e=this.row_+1;e<15;e++)this.displayed_[e]="";for(e=this.topRow_;e<this.row_;e++)this.displayed_[e]=this.displayed_[e+1];this.displayed_[this.row_]=""},Ee.prototype.paintOn=function(e,t){var n=this.displayed_[this.row_];n+=t,this.displayed_[this.row_]=n};var Ae={CaptionStream:ve,Cea608Stream:Ee,Cea708Stream:we},Pe={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},xe="shared",Oe=function(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=8589934592*n;return e},De=function e(t){var n,i;e.prototype.init.call(this),this.type_=t||xe,this.push=function(e){this.type_!==xe&&e.type!==this.type_||(void 0===i&&(i=e.dts),e.dts=Oe(e.dts,i),e.pts=Oe(e.pts,i),n=e.dts,this.trigger("data",e))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};De.prototype=new V;var Re,Le=De,Me=Oe,Ue=function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r},je=function(e,t,n){return decodeURIComponent(Ue(e,t,n))},Ne=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},Be={TXXX:function(e){var t;if(3===e.data[0]){for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.value=je(e.data,t+1,e.data.length).replace(/\0*$/,"");break}e.data=e.value}},WXXX:function(e){var t;if(3===e.data[0])for(t=1;t<e.data.length;t++)if(0===e.data[t]){e.description=je(e.data,1,t),e.url=je(e.data,t+1,e.data.length);break}},PRIV:function(e){var t,n;for(t=0;t<e.data.length;t++)if(0===e.data[t]){e.owner=(n=e.data,unescape(Ue(n,0,t)));break}e.privateData=e.data.subarray(t+1),e.data=e.privateData}};Re=function(e){var t,n={descriptor:e&&e.descriptor},i=0,r=[],a=0;if(Re.prototype.init.call(this),this.dispatchType=Pe.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(t=0;t<n.descriptor.length;t++)this.dispatchType+=("00"+n.descriptor[t].toString(16)).slice(-2);this.push=function(e){var t,n,o,s,d;if("timed-metadata"===e.type)if(e.dataAlignmentIndicator&&(a=0,r.length=0),0===r.length&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(e),a+=e.data.byteLength,1===r.length&&(i=Ne(e.data.subarray(6,10)),i+=10),!(a<i)){for(t={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},d=0;d<i;)t.data.set(r[0].data.subarray(0,i-d),d),d+=r[0].data.byteLength,a-=r[0].data.byteLength,r.shift();n=10,64&t.data[5]&&(n+=4,n+=Ne(t.data.subarray(10,14)),i-=Ne(t.data.subarray(16,20)));do{if((o=Ne(t.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((s={id:String.fromCharCode(t.data[n],t.data[n+1],t.data[n+2],t.data[n+3]),data:t.data.subarray(n+10,n+o+10)}).key=s.id,Be[s.id]&&(Be[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var l=s.data,u=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;u*=4,u+=3&l[7],s.timeStamp=u,void 0===t.pts&&void 0===t.dts&&(t.pts=s.timeStamp,t.dts=s.timeStamp),this.trigger("timestamp",s)}t.frames.push(s),n+=10,n+=o}while(n<i);this.trigger("data",t)}}},Re.prototype=new V;var Fe,qe,Ve,He=Re,ze=Le,We=188;(Fe=function(){var e=new Uint8Array(We),t=0;Fe.prototype.init.call(this),this.push=function(n){var i,r=0,a=We;for(t?((i=new Uint8Array(n.byteLength+t)).set(e.subarray(0,t)),i.set(n,t),t=0):i=n;a<i.byteLength;)71!==i[r]||71!==i[a]?(r++,a++):(this.trigger("data",i.subarray(r,a)),r+=We,a+=We);r<i.byteLength&&(e.set(i.subarray(r),0),t=i.byteLength-r)},this.flush=function(){t===We&&71===e[0]&&(this.trigger("data",e),t=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){t=0,this.trigger("reset")}}).prototype=new V,qe=function(){var e,t,n,i;qe.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,e=function(e,i){var r=0;i.payloadUnitStartIndicator&&(r+=e[r]+1),"pat"===i.type?t(e.subarray(r),i):n(e.subarray(r),i)},t=function(e,t){t.section_number=e[7],t.last_section_number=e[8],i.pmtPid=(31&e[10])<<8|e[11],t.pmtPid=i.pmtPid},n=function(e,t){var n,r;if(1&e[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&e[1])<<8|e[2])-4,r=12+((15&e[10])<<8|e[11]);r<n;){var a=e[r],o=(31&e[r+1])<<8|e[r+2];a===Pe.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=o:a===Pe.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=o:a===Pe.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][o]=a),r+=5+((15&e[r+3])<<8|e[r+4])}t.programMapTable=i.programMapTable}},this.push=function(t){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&t[1]),n.pid=31&t[1],n.pid<<=8,n.pid|=t[2],(48&t[3])>>>4>1&&(i+=t[i]+1),0===n.pid)n.type="pat",e(t.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",e(t.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([t,i,n]):this.processPes_(t,i,n)},this.processPes_=function(e,t,n){n.pid===this.programMapTable.video?n.streamType=Pe.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Pe.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=e.subarray(t),this.trigger("data",n)}},qe.prototype=new V,qe.STREAM_TYPES={h264:27,adts:15},Ve=function(){var e,t=this,n=!1,i={data:[],size:0},r={data:[],size:0},a={data:[],size:0},o=function(e,n,i){var r,a,o=new Uint8Array(e.size),s={type:n},d=0,l=0;if(e.data.length&&!(e.size<9)){for(s.trackId=e.data[0].pid,d=0;d<e.data.length;d++)a=e.data[d],o.set(a.data,l),l+=a.data.byteLength;var u,c,p,h;c=s,h=(u=o)[0]<<16|u[1]<<8|u[2],c.data=new Uint8Array,1===h&&(c.packetLength=6+(u[4]<<8|u[5]),c.dataAlignmentIndicator=0!=(4&u[6]),192&(p=u[7])&&(c.pts=(14&u[9])<<27|(255&u[10])<<20|(254&u[11])<<12|(255&u[12])<<5|(254&u[13])>>>3,c.pts*=4,c.pts+=(6&u[13])>>>1,c.dts=c.pts,64&p&&(c.dts=(14&u[14])<<27|(255&u[15])<<20|(254&u[16])<<12|(255&u[17])<<5|(254&u[18])>>>3,c.dts*=4,c.dts+=(6&u[18])>>>1)),c.data=u.subarray(9+u[8])),r="video"===n||s.packetLength<=e.size,(i||r)&&(e.size=0,e.data.length=0),r&&t.trigger("data",s)}};Ve.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var e,t;switch(s.streamType){case Pe.H264_STREAM_TYPE:e=i,t="video";break;case Pe.ADTS_STREAM_TYPE:e=r,t="audio";break;case Pe.METADATA_STREAM_TYPE:e=a,t="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&o(e,t,!0),e.data.push(s),e.size+=s.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(e=s.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),n=!0,t.trigger("data",i)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){o(i,"video"),o(r,"audio"),o(a,"timed-metadata")},this.flush=function(){if(!n&&e){var i={type:"metadata",tracks:[]};null!==e.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.video,codec:"avc",type:"video"}),null!==e.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+e.audio,codec:"adts",type:"audio"}),t.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}},Ve.prototype=new V;var $e={PAT_PID:0,MP2T_PACKET_LENGTH:We,TransportPacketStream:Fe,TransportParseStream:qe,ElementaryStream:Ve,TimestampRolloverStream:ze,CaptionStream:Ae.CaptionStream,Cea608Stream:Ae.Cea608Stream,Cea708Stream:Ae.Cea708Stream,MetadataStream:He};for(var Ge in Pe)Pe.hasOwnProperty(Ge)&&($e[Ge]=Pe[Ge]);var Ke,Xe=$e,Ze=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];Ke=function(e){var t,n=0;Ke.prototype.init.call(this),this.skipWarn_=function(e,t){this.trigger("log",{level:"warn",message:"adts skiping bytes "+e+" to "+t+" in frame "+n+" outside syncword"})},this.push=function(i){var r,a,o,s,d,l=0;if(e||(n=0),"audio"===i.type){var u;for(t&&t.length?(o=t,(t=new Uint8Array(o.byteLength+i.data.byteLength)).set(o),t.set(i.data,o.byteLength)):t=i.data;l+7<t.length;)if(255===t[l]&&240==(246&t[l+1])){if("number"==typeof u&&(this.skipWarn_(u,l),u=null),a=2*(1&~t[l+1]),r=(3&t[l+3])<<11|t[l+4]<<3|(224&t[l+5])>>5,d=9e4*(s=1024*(1+(3&t[l+6])))/Ze[(60&t[l+2])>>>2],t.byteLength-l<r)break;this.trigger("data",{pts:i.pts+n*d,dts:i.dts+n*d,sampleCount:s,audioobjecttype:1+(t[l+2]>>>6&3),channelcount:(1&t[l+2])<<2|(192&t[l+3])>>>6,samplerate:Ze[(60&t[l+2])>>>2],samplingfrequencyindex:(60&t[l+2])>>>2,samplesize:16,data:t.subarray(l+7+a,l+r)}),n++,l+=r}else"number"!=typeof u&&(u=l),l++;"number"==typeof u&&(this.skipWarn_(u,l),u=null),t=t.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){t=void 0,this.trigger("reset")},this.endTimeline=function(){t=void 0,this.trigger("endedtimeline")}},Ke.prototype=new V;var Ye,Je=Ke;Ye=function(e){var t=e.byteLength,n=0,i=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+i},this.loadWord=function(){var r=e.byteLength-t,a=new Uint8Array(4),o=Math.min(4,t);if(0===o)throw new Error("no bytes available");a.set(e.subarray(r,r+o)),n=new DataView(a.buffer).getUint32(0),i=8*o,t-=o},this.skipBits=function(e){var r;i>e?(n<<=e,i-=e):(e-=i,e-=8*(r=Math.floor(e/8)),t-=r,this.loadWord(),n<<=e,i-=e)},this.readBits=function(e){var r=Math.min(i,e),a=n>>>32-r;return(i-=r)>0?n<<=r:t>0&&this.loadWord(),(r=e-r)>0?a<<r|this.readBits(r):a},this.skipLeadingZeros=function(){var e;for(e=0;e<i;++e)if(0!=(n&2147483648>>>e))return n<<=e,i-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Qe,et,tt,nt=Ye;et=function(){var e,t,n=0;et.prototype.init.call(this),this.push=function(i){var r;t?((r=new Uint8Array(t.byteLength+i.data.byteLength)).set(t),r.set(i.data,t.byteLength),t=r):t=i.data;for(var a=t.byteLength;n<a-3;n++)if(1===t[n+2]){e=n+5;break}for(;e<a;)switch(t[e]){case 0:if(0!==t[e-1]){e+=2;break}if(0!==t[e-2]){e++;break}n+3!==e-2&&this.trigger("data",t.subarray(n+3,e-2));do{e++}while(1!==t[e]&&e<a);n=e-2,e+=3;break;case 1:if(0!==t[e-1]||0!==t[e-2]){e+=3;break}this.trigger("data",t.subarray(n+3,e-2)),n=e-2,e+=3;break;default:e+=3}t=t.subarray(n),e-=n,n=0},this.reset=function(){t=null,n=0,this.trigger("reset")},this.flush=function(){t&&t.byteLength>3&&this.trigger("data",t.subarray(n+3)),t=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},et.prototype=new V,tt={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Qe=function(){var e,t,n,i,r,a,o,s=new et;Qe.prototype.init.call(this),e=this,this.push=function(e){"video"===e.type&&(t=e.trackId,n=e.pts,i=e.dts,s.push(e))},s.on("data",(function(o){var s={trackId:t,pts:n,dts:i,data:o,nalUnitTypeCode:31&o[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(o.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(o.subarray(1)),s.config=a(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}e.trigger("data",s)})),s.on("done",(function(){e.trigger("done")})),s.on("partialdone",(function(){e.trigger("partialdone")})),s.on("reset",(function(){e.trigger("reset")})),s.on("endedtimeline",(function(){e.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},o=function(e,t){var n,i=8,r=8;for(n=0;n<e;n++)0!==r&&(r=(i+t.readExpGolomb()+256)%256),i=0===r?i:r},r=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},a=function(e){var t,n,i,r,a,s,d,l,u,c,p,h,f=0,g=0,m=0,v=0,y=[1,1];if(n=(t=new nt(e)).readUnsignedByte(),r=t.readUnsignedByte(),i=t.readUnsignedByte(),t.skipUnsignedExpGolomb(),tt[n]&&(3===(a=t.readUnsignedExpGolomb())&&t.skipBits(1),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipBits(1),t.readBoolean()))for(p=3!==a?8:12,h=0;h<p;h++)t.readBoolean()&&o(h<6?16:64,t);if(t.skipUnsignedExpGolomb(),0===(s=t.readUnsignedExpGolomb()))t.readUnsignedExpGolomb();else if(1===s)for(t.skipBits(1),t.skipExpGolomb(),t.skipExpGolomb(),d=t.readUnsignedExpGolomb(),h=0;h<d;h++)t.skipExpGolomb();if(t.skipUnsignedExpGolomb(),t.skipBits(1),l=t.readUnsignedExpGolomb(),u=t.readUnsignedExpGolomb(),0===(c=t.readBits(1))&&t.skipBits(1),t.skipBits(1),t.readBoolean()&&(f=t.readUnsignedExpGolomb(),g=t.readUnsignedExpGolomb(),m=t.readUnsignedExpGolomb(),v=t.readUnsignedExpGolomb()),t.readBoolean()&&t.readBoolean()){switch(t.readUnsignedByte()){case 1:y=[1,1];break;case 2:y=[12,11];break;case 3:y=[10,11];break;case 4:y=[16,11];break;case 5:y=[40,33];break;case 6:y=[24,11];break;case 7:y=[20,11];break;case 8:y=[32,11];break;case 9:y=[80,33];break;case 10:y=[18,11];break;case 11:y=[15,11];break;case 12:y=[64,33];break;case 13:y=[160,99];break;case 14:y=[4,3];break;case 15:y=[3,2];break;case 16:y=[2,1];break;case 255:y=[t.readUnsignedByte()<<8|t.readUnsignedByte(),t.readUnsignedByte()<<8|t.readUnsignedByte()]}y&&(y[0],y[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(l+1)-2*f-2*g,height:(2-c)*(u+1)*16-2*m-2*v,sarRatio:y}}},Qe.prototype=new V;var it,rt={H264Stream:Qe,NalByteStream:et},at=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],ot=function(e,t){var n=e[t+6]<<21|e[t+7]<<14|e[t+8]<<7|e[t+9];return n=n>=0?n:0,(16&e[t+5])>>4?n+20:n+10},st=function e(t,n){return t.length-n<10||t[n]!=="I".charCodeAt(0)||t[n+1]!=="D".charCodeAt(0)||t[n+2]!=="3".charCodeAt(0)?n:e(t,n+=ot(t,n))},dt=function(e){return e[0]<<21|e[1]<<14|e[2]<<7|e[3]},lt={isLikelyAacData:function(e){var t=st(e,0);return e.length>=t+2&&255==(255&e[t])&&240==(240&e[t+1])&&16==(22&e[t+1])},parseId3TagSize:ot,parseAdtsSize:function(e,t){var n=(224&e[t+5])>>5,i=e[t+4]<<3;return 6144&e[t+3]|i|n},parseType:function(e,t){return e[t]==="I".charCodeAt(0)&&e[t+1]==="D".charCodeAt(0)&&e[t+2]==="3".charCodeAt(0)?"timed-metadata":!0&e[t]&&240==(240&e[t+1])?"audio":null},parseSampleRate:function(e){for(var t=0;t+5<e.length;){if(255===e[t]&&240==(246&e[t+1]))return at[(60&e[t+2])>>>2];t++}return null},parseAacTimestamp:function(e){var t,n,i;t=10,64&e[5]&&(t+=4,t+=dt(e.subarray(10,14)));do{if((n=dt(e.subarray(t+4,t+8)))<1)return null;if("PRIV"===String.fromCharCode(e[t],e[t+1],e[t+2],e[t+3])){i=e.subarray(t+10,t+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(e,t,n){var i,r="";for(i=t;i<n;i++)r+="%"+("00"+e[i].toString(16)).slice(-2);return r}(i,0,r))){var a=i.subarray(r+1),o=(1&a[3])<<30|a[4]<<22|a[5]<<14|a[6]<<6|a[7]>>>2;return(o*=4)+(3&a[7])}break}}t+=10,t+=n}while(t<e.byteLength);return null}};(it=function(){var e=new Uint8Array,t=0;it.prototype.init.call(this),this.setTimestamp=function(e){t=e},this.push=function(n){var i,r,a,o,s=0,d=0;for(e.length?(o=e.length,(e=new Uint8Array(n.byteLength+o)).set(e.subarray(0,o)),e.set(n,o)):e=n;e.length-d>=3;)if(e[d]!=="I".charCodeAt(0)||e[d+1]!=="D".charCodeAt(0)||e[d+2]!=="3".charCodeAt(0))if(255!=(255&e[d])||240!=(240&e[d+1]))d++;else{if(e.length-d<7)break;if(d+(s=lt.parseAdtsSize(e,d))>e.length)break;a={type:"audio",data:e.subarray(d,d+s),pts:t,dts:t},this.trigger("data",a),d+=s}else{if(e.length-d<10)break;if(d+(s=lt.parseId3TagSize(e,d))>e.length)break;r={type:"timed-metadata",data:e.subarray(d,d+s)},this.trigger("data",r),d+=s}i=e.length-d,e=i>0?e.subarray(d):new Uint8Array},this.reset=function(){e=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){e=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new V;var ut,ct,pt,ht,ft=it,gt=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],mt=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],vt=rt.H264Stream,yt=lt.isLikelyAacData,bt=function(e,t){t.stream=e,this.trigger("log",t)},_t=function(e,t){for(var n=Object.keys(t),i=0;i<n.length;i++){var r=n[i];"headOfPipeline"!==r&&t[r].on&&t[r].on("log",bt.bind(e,r))}},Tt=function(e,t){var n;if(e.length!==t.length)return!1;for(n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},wt=function(e,t,n,i,r,a){return{start:{dts:e,pts:e+(n-t)},end:{dts:e+(i-t),pts:e+(r-n)},prependedContentDuration:a,baseMediaDecodeTime:e}};ct=function(e,t){var n,i=[],r=0,a=0,o=1/0;n=(t=t||{}).firstSequenceNumber||0,ct.prototype.init.call(this),this.push=function(t){me(e,t),e&&gt.forEach((function(n){e[n]=t[n]})),i.push(t)},this.setEarliestDts=function(e){r=e},this.setVideoBaseMediaDecodeTime=function(e){o=e},this.setAudioAppendStart=function(e){a=e},this.flush=function(){var s,d,l,u,c,p,h;0!==i.length?(s=function(e,t,n){return t.minSegmentDts>=n?e:(t.minSegmentDts=1/0,e.filter((function(e){return e.dts>=n&&(t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),t.minSegmentPts=t.minSegmentDts,!0)})))}(i,e,r),e.baseMediaDecodeTime=ge(e,t.keepOriginalTimestamps),h=he(e,s,a,o),e.samples=function(e){var t,n,i=[];for(t=0;t<e.length;t++)n=e[t],i.push({size:n.data.byteLength,duration:1024});return i}(s),l=ee(function(e){var t,n,i=0,r=new Uint8Array(function(e){var t,n=0;for(t=0;t<e.length;t++)n+=e[t].data.byteLength;return n}(e));for(t=0;t<e.length;t++)n=e[t],r.set(n.data,i),i+=n.data.byteLength;return r}(s)),i=[],d=te(n,[e]),u=new Uint8Array(d.byteLength+l.byteLength),n++,u.set(d),u.set(l,d.byteLength),fe(e),c=Math.ceil(9216e4/e.samplerate),s.length&&(p=s.length*c,this.trigger("segmentTimingInfo",wt(ue(e.baseMediaDecodeTime,e.samplerate),s[0].dts,s[0].pts,s[0].dts+p,s[0].pts+p,h||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+p})),this.trigger("data",{track:e,boxes:u}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){fe(e),i=[],this.trigger("reset")}},ct.prototype=new V,ut=function(e,t){var n,i,r,a=[],o=[];n=(t=t||{}).firstSequenceNumber||0,ut.prototype.init.call(this),delete e.minPTS,this.gopCache_=[],this.push=function(t){me(e,t),"seq_parameter_set_rbsp"!==t.nalUnitType||i||(i=t.config,e.sps=[t.data],mt.forEach((function(t){e[t]=i[t]}),this)),"pic_parameter_set_rbsp"!==t.nalUnitType||r||(r=t.data,e.pps=[t.data]),a.push(t)},this.flush=function(){for(var i,r,s,d,l,u,c,p,h=0;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0===a.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=function(e){var t,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,t=0;t<e.length;t++)"access_unit_delimiter_rbsp"===(n=e[t]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r}(a),(s=function(e){var t,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=e[0].pts,i.dts=e[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=e[0].pts,r.dts=e[0].dts,t=0;t<e.length;t++)(n=e[t]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r}(i))[0][0].keyFrame||((r=this.getGopForFusion_(a[0],e))?(h=r.duration,s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=function(e){var t;return!e[0][0].keyFrame&&e.length>1&&(t=e.shift(),e.byteLength-=t.byteLength,e.nalCount-=t.nalCount,e[0][0].dts=t.dts,e[0][0].pts=t.pts,e[0][0].duration+=t.duration),e}(s)),o.length){var f;if(!(f=t.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");fe(e),s=f}me(e,s),e.samples=function(e,t){var n,i,r,a,o,s=t||0,d=[];for(n=0;n<e.length;n++)for(a=e[n],i=0;i<a.length;i++)o=a[i],s+=(r=ne(o,s)).size,d.push(r);return d}(s),l=ee(function(e){var t,n,i,r,a,o,s=0,d=e.byteLength,l=e.nalCount,u=new Uint8Array(d+4*l),c=new DataView(u.buffer);for(t=0;t<e.length;t++)for(r=e[t],n=0;n<r.length;n++)for(a=r[n],i=0;i<a.length;i++)o=a[i],c.setUint32(s,o.data.byteLength),s+=4,u.set(o.data,s),s+=o.data.byteLength;return u}(s)),e.baseMediaDecodeTime=ge(e,t.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(e){return{pts:e.pts,dts:e.dts,byteLength:e.byteLength}}))),c=s[0],p=s[s.length-1],this.trigger("segmentTimingInfo",wt(e.baseMediaDecodeTime,c.dts,c.pts,p.dts+p.duration,p.pts+p.duration,h)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:e.pps,sps:e.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),a=[],this.trigger("baseMediaDecodeTime",e.baseMediaDecodeTime),this.trigger("timelineStartInfo",e.timelineStartInfo),d=te(n,[e]),u=new Uint8Array(d.byteLength+l.byteLength),n++,u.set(d),u.set(l,d.byteLength),this.trigger("data",{track:e,boxes:u}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),a=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){fe(e),i=void 0,r=void 0},this.getGopForFusion_=function(t){var n,i,r,a,o,s=1/0;for(o=0;o<this.gopCache_.length;o++)r=(a=this.gopCache_[o]).gop,e.pps&&Tt(e.pps[0],a.pps[0])&&e.sps&&Tt(e.sps[0],a.sps[0])&&(r.dts<e.timelineStartInfo.dts||(n=t.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||s>n)&&(i=a,s=n));return i?i.gop:null},this.alignGopsAtStart_=function(e){var t,n,i,r,a,s,d,l;for(a=e.byteLength,s=e.nalCount,d=e.duration,t=n=0;t<o.length&&n<e.length&&(i=o[t],r=e[n],i.pts!==r.pts);)r.pts>i.pts?t++:(n++,a-=r.byteLength,s-=r.nalCount,d-=r.duration);return 0===n?e:n===e.length?null:((l=e.slice(n)).byteLength=a,l.duration=d,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(e){var t,n,i,r,a,s,d;for(t=o.length-1,n=e.length-1,a=null,s=!1;t>=0&&n>=0;){if(i=o[t],r=e[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?t--:(t===o.length-1&&(a=n),n--)}if(!s&&null===a)return null;if(0===(d=s?n:a))return e;var l=e.slice(d),u=l.reduce((function(e,t){return e.byteLength+=t.byteLength,e.duration+=t.duration,e.nalCount+=t.nalCount,e}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=u.byteLength,l.duration=u.duration,l.nalCount=u.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(e){o=e}},ut.prototype=new V,ht=function(e,t){this.numberOfTracks=0,this.metadataStream=t,void 0!==(e=e||{}).remux?this.remuxTracks=!!e.remux:this.remuxTracks=!0,"boolean"==typeof e.keepOriginalTimestamps?this.keepOriginalTimestamps=e.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,ht.prototype.init.call(this),this.push=function(e){return e.text?this.pendingCaptions.push(e):e.frames?this.pendingMetadata.push(e):(this.pendingTracks.push(e.track),this.pendingBytes+=e.boxes.byteLength,"video"===e.track.type&&(this.videoTrack=e.track,this.pendingBoxes.push(e.boxes)),void("audio"===e.track.type&&(this.audioTrack=e.track,this.pendingBoxes.unshift(e.boxes))))}},ht.prototype=new V,ht.prototype.flush=function(e){var t,n,i,r,o=0,s={captions:[],captionStreams:{},metadata:[],info:{}},d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==e&&"AudioSegmentStream"!==e)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(d=this.videoTrack.timelineStartInfo.pts,mt.forEach((function(e){s.info[e]=this.videoTrack[e]}),this)):this.audioTrack&&(d=this.audioTrack.timelineStartInfo.pts,gt.forEach((function(e){s.info[e]=this.audioTrack[e]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,i=function(e){var t,n=a(),i=l(e);return(t=new Uint8Array(n.byteLength+i.byteLength)).set(n),t.set(i,n.byteLength),t}(this.pendingTracks),s.initSegment=new Uint8Array(i.byteLength),s.initSegment.set(i),s.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)s.data.set(this.pendingBoxes[r],o),o+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(t=this.pendingCaptions[r]).startTime=pe(t.startPts,d,this.keepOriginalTimestamps),t.endTime=pe(t.endPts,d,this.keepOriginalTimestamps),s.captionStreams[t.stream]=!0,s.captions.push(t);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=pe(n.pts,d,this.keepOriginalTimestamps),s.metadata.push(n);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),r=0;r<s.captions.length;r++)t=s.captions[r],this.trigger("caption",t);for(r=0;r<s.metadata.length;r++)n=s.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},ht.prototype.setRemux=function(e){this.remuxTracks=e},pt=function(e){var t,n,i=this,r=!0;pt.prototype.init.call(this),e=e||{},this.baseMediaDecodeTime=e.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new Xe.MetadataStream,r.aacStream=new ft,r.audioTimestampRolloverStream=new Xe.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new Xe.TimestampRolloverStream("timed-metadata"),r.adtsStream=new Je,r.coalesceStream=new ht(e,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(e){r.aacStream.setTimestamp(e.timeStamp)})),r.aacStream.on("data",(function(a){"timed-metadata"!==a.type&&"audio"!==a.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ct(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,r)},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new Xe.MetadataStream,r.packetStream=new Xe.TransportPacketStream,r.parseStream=new Xe.TransportParseStream,r.elementaryStream=new Xe.ElementaryStream,r.timestampRolloverStream=new Xe.TimestampRolloverStream,r.adtsStream=new Je,r.h264Stream=new vt,r.captionStream=new Xe.CaptionStream(e),r.coalesceStream=new ht(e,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(a){var o;if("metadata"===a.type){for(o=a.tracks.length;o--;)t||"video"!==a.tracks[o].type?n||"audio"!==a.tracks[o].type||((n=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(t=a.tracks[o]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;t&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ut(t,e),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(t){n&&!e.keepOriginalTimestamps&&(n.timelineStartInfo=t,r.audioSegmentStream.setEarliestDts(t.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(e){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(e)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new ct(n,e),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!t})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(e){e.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",e)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done")),_t(this,r)},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;e.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,fe(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),t&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),t.timelineStartInfo.dts=void 0,t.timelineStartInfo.pts=void 0,fe(t),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(e){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(e)},this.setRemux=function(t){var n=this.transmuxPipeline_;e.remux=t,n&&n.coalesceStream&&n.coalesceStream.setRemux(t)},this.alignGopsWith=function(e){t&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(e)},this.getLogTrigger_=function(e){var t=this;return function(n){n.stream=e,t.trigger("log",n)}},this.push=function(e){if(r){var t=yt(e);t&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():t||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),r=!1}this.transmuxPipeline_.headOfPipeline.push(e)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},pt.prototype=new V;var St,kt,It,Ct={Transmuxer:pt,VideoSegmentStream:ut,AudioSegmentStream:ct,AUDIO_PROPERTIES:gt,VIDEO_PROPERTIES:mt,generateSegmentTimingInfo:wt},Et=function(e){return e>>>0},At=function(e){var t="";return t+=String.fromCharCode(e[0]),t+=String.fromCharCode(e[1]),(t+=String.fromCharCode(e[2]))+String.fromCharCode(e[3])},Pt=Et,xt=function e(t,n){var i,r,a,o,s,d=[];if(!n.length)return null;for(i=0;i<t.byteLength;)r=Pt(t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3]),a=At(t.subarray(i+4,i+8)),o=r>1?i+r:t.byteLength,a===n[0]&&(1===n.length?d.push(t.subarray(i+8,o)):(s=e(t.subarray(i+8,o),n.slice(1))).length&&(d=d.concat(s))),i=o;return d},Ot=Et,Dt=z.getUint64,Rt=function(e){return{isLeading:(12&e[0])>>>2,dependsOn:3&e[0],isDependedOn:(192&e[1])>>>6,hasRedundancy:(48&e[1])>>>4,paddingValue:(14&e[1])>>>1,isNonSyncSample:1&e[1],degradationPriority:e[2]<<8|e[3]}},Lt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},Mt="undefined"!=typeof window?window:void 0!==Lt?Lt:"undefined"!=typeof self?self:{},Ut=function(e){for(var t,n,i=e.byteLength,r=[],a=1;a<i-2;)0===e[a]&&0===e[a+1]&&3===e[a+2]?(r.push(a+2),a+=2):a++;if(0===r.length)return e;t=i-r.length,n=new Uint8Array(t);var o=0;for(a=0;a<t;o++,a++)o===r[0]&&(o++,r.shift()),n[a]=e[o];return n},jt=Ae.CaptionStream,Nt=function(e,t){for(var n=e,i=0;i<t.length;i++){var r=t[i];if(n<r.size)return r;n-=r.size}return null},Bt=function(e,t){var n=xt(e,["moof","traf"]),i=xt(e,["mdat"]),r={},a=[];return i.forEach((function(e,t){var i=n[t];a.push({mdat:e,traf:i})})),a.forEach((function(e){var n,i,a=e.mdat,o=e.traf,s=function(e){var t,n=new DataView(e.buffer,e.byteOffset,e.byteLength),i={version:e[0],flags:new Uint8Array(e.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],a=2&i.flags[2],o=8&i.flags[2],s=16&i.flags[2],d=32&i.flags[2],l=65536&i.flags[0],u=131072&i.flags[0];return t=8,r&&(t+=4,i.baseDataOffset=n.getUint32(12),t+=4),a&&(i.sampleDescriptionIndex=n.getUint32(t),t+=4),o&&(i.defaultSampleDuration=n.getUint32(t),t+=4),s&&(i.defaultSampleSize=n.getUint32(t),t+=4),d&&(i.defaultSampleFlags=n.getUint32(t)),l&&(i.durationIsEmpty=!0),!r&&u&&(i.baseDataOffsetIsMoof=!0),i}(xt(o,["tfhd"])[0]),d=s.trackId,l=xt(o,["tfdt"]),u=l.length>0?function(e){var t={version:e[0],flags:new Uint8Array(e.subarray(1,4))};return 1===t.version?t.baseMediaDecodeTime=Dt(e.subarray(4)):t.baseMediaDecodeTime=Ot(e[4]<<24|e[5]<<16|e[6]<<8|e[7]),t}(l[0]).baseMediaDecodeTime:0,c=xt(o,["trun"]);t===d&&c.length>0&&(n=function(e,t,n){var i=t,r=n.defaultSampleDuration||0,a=n.defaultSampleSize||0,o=n.trackId,s=[];return e.forEach((function(e){var t=function(e){var t,n={version:e[0],flags:new Uint8Array(e.subarray(1,4)),samples:[]},i=new DataView(e.buffer,e.byteOffset,e.byteLength),r=1&n.flags[2],a=4&n.flags[2],o=1&n.flags[1],s=2&n.flags[1],d=4&n.flags[1],l=8&n.flags[1],u=i.getUint32(4),c=8;for(r&&(n.dataOffset=i.getInt32(c),c+=4),a&&u&&(t={flags:Rt(e.subarray(c,c+4))},c+=4,o&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(c):t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t),u--);u--;)t={},o&&(t.duration=i.getUint32(c),c+=4),s&&(t.size=i.getUint32(c),c+=4),d&&(t.flags=Rt(e.subarray(c,c+4)),c+=4),l&&(1===n.version?t.compositionTimeOffset=i.getInt32(c):t.compositionTimeOffset=i.getUint32(c),c+=4),n.samples.push(t);return n}(e).samples;t.forEach((function(e){void 0===e.duration&&(e.duration=r),void 0===e.size&&(e.size=a),e.trackId=o,e.dts=i,void 0===e.compositionTimeOffset&&(e.compositionTimeOffset=0),"bigint"==typeof i?(e.pts=i+Mt.BigInt(e.compositionTimeOffset),i+=Mt.BigInt(e.duration)):(e.pts=i+e.compositionTimeOffset,i+=e.duration)})),s=s.concat(t)})),s}(c,u,s),i=function(e,t,n){var i,r,a,o,s=new DataView(e.buffer,e.byteOffset,e.byteLength),d={logs:[],seiNals:[]};for(r=0;r+4<e.length;r+=a)if(a=s.getUint32(r),r+=4,!(a<=0))switch(31&e[r]){case 6:var l=e.subarray(r+1,r+1+a),u=Nt(r,t);if(i={nalUnitType:"sei_rbsp",size:a,data:l,escapedRBSP:Ut(l),trackId:n},u)i.pts=u.pts,i.dts=u.dts,o=u;else{if(!o){d.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=o.pts,i.dts=o.dts}d.seiNals.push(i)}return d}(a,n,d),r[d]||(r[d]={seiNals:[],logs:[]}),r[d].seiNals=r[d].seiNals.concat(i.seiNals),r[d].logs=r[d].logs.concat(i.logs))})),r},Ft=function(){var e,t,n,i,r,a,o=!1;this.isInitialized=function(){return o},this.init=function(t){e=new jt,o=!0,a=!!t&&t.isPartial,e.on("data",(function(e){e.startTime=e.startPts/i,e.endTime=e.endPts/i,r.captions.push(e),r.captionStreams[e.stream]=!0})),e.on("log",(function(e){r.logs.push(e)}))},this.isNewInit=function(e,t){return!(e&&0===e.length||t&&"object"==typeof t&&0===Object.keys(t).length||n===e[0]&&i===t[n])},this.parse=function(e,a,o){var s;if(!this.isInitialized())return null;if(!a||!o)return null;if(this.isNewInit(a,o))n=a[0],i=o[n];else if(null===n||!i)return t.push(e),null;for(;t.length>0;){var d=t.shift();this.parse(d,a,o)}return s=function(e,t,n){if(null===t)return null;var i=Bt(e,t)[t]||{};return{seiNals:i.seiNals,logs:i.logs,timescale:n}}(e,n,i),s&&s.logs&&(r.logs=r.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(t){if(!this.isInitialized()||!t||0===t.length)return null;t.forEach((function(t){e.push(t)}))},this.flushStream=function(){if(!this.isInitialized())return null;a?e.partialFlush():e.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;e.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){t=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},qt=Et,Vt=function(e){return("00"+e.toString(16)).slice(-2)},Ht=z.getUint64;St=function(e,t){var n=xt(t,["moof","traf"]).reduce((function(t,n){var i,r,a=xt(n,["tfhd"])[0],o=qt(a[4]<<24|a[5]<<16|a[6]<<8|a[7]),s=e[o]||9e4,d=xt(n,["tfdt"])[0],l=new DataView(d.buffer,d.byteOffset,d.byteLength);return"bigint"==typeof(i=1===d[0]?Ht(d.subarray(4,12)):l.getUint32(4))?r=i/Mt.BigInt(s):"number"!=typeof i||isNaN(i)||(r=i/s),r<Number.MAX_SAFE_INTEGER&&(r=Number(r)),r<t&&(t=r),t}),1/0);return"bigint"==typeof n||isFinite(n)?n:0},It=function(e){var t=0===e[0]?12:20;return qt(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])},kt=function(e){var t=xt(e,["moov","trak"]),n=[];return t.forEach((function(e){var t,i,r={},a=xt(e,["tkhd"])[0];a&&(i=(t=new DataView(a.buffer,a.byteOffset,a.byteLength)).getUint8(0),r.id=0===i?t.getUint32(12):t.getUint32(20));var o=xt(e,["mdia","hdlr"])[0];if(o){var s=At(o.subarray(8,12));r.type="vide"===s?"video":"soun"===s?"audio":s}var d=xt(e,["mdia","minf","stbl","stsd"])[0];if(d){var l=d.subarray(8);r.codec=At(l.subarray(4,8));var u,c=xt(l,[r.codec])[0];c&&(/^[asm]vc[1-9]$/i.test(r.codec)?(u=c.subarray(78),"avcC"===At(u.subarray(4,8))&&u.length>11?(r.codec+=".",r.codec+=Vt(u[9]),r.codec+=Vt(u[10]),r.codec+=Vt(u[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(u=c.subarray(28),"esds"===At(u.subarray(4,8))&&u.length>20&&0!==u[19]?(r.codec+="."+Vt(u[19]),r.codec+="."+Vt(u[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var p=xt(e,["mdia","mdhd"])[0];p&&(r.timescale=It(p)),n.push(r)})),n};var zt=St,Wt=kt,$t=function(e){var t=31&e[1];return(t<<=8)|e[2]},Gt=function(e){return!!(64&e[1])},Kt=function(e){var t=0;return(48&e[3])>>>4>1&&(t+=e[4]+1),t},Xt=function(e){switch(e){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Zt={parseType:function(e,t){var n=$t(e);return 0===n?"pat":n===t?"pmt":t?"pes":null},parsePat:function(e){var t=Gt(e),n=4+Kt(e);return t&&(n+=e[n]+1),(31&e[n+10])<<8|e[n+11]},parsePmt:function(e){var t={},n=Gt(e),i=4+Kt(e);if(n&&(i+=e[i]+1),1&e[i+5]){var r;r=3+((15&e[i+1])<<8|e[i+2])-4;for(var a=12+((15&e[i+10])<<8|e[i+11]);a<r;){var o=i+a;t[(31&e[o+1])<<8|e[o+2]]=e[o],a+=5+((15&e[o+3])<<8|e[o+4])}return t}},parsePayloadUnitStartIndicator:Gt,parsePesType:function(e,t){switch(t[$t(e)]){case Pe.H264_STREAM_TYPE:return"video";case Pe.ADTS_STREAM_TYPE:return"audio";case Pe.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(e){if(!Gt(e))return null;var t=4+Kt(e);if(t>=e.byteLength)return null;var n,i=null;return 192&(n=e[t+7])&&((i={}).pts=(14&e[t+9])<<27|(255&e[t+10])<<20|(254&e[t+11])<<12|(255&e[t+12])<<5|(254&e[t+13])>>>3,i.pts*=4,i.pts+=(6&e[t+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&e[t+14])<<27|(255&e[t+15])<<20|(254&e[t+16])<<12|(255&e[t+17])<<5|(254&e[t+18])>>>3,i.dts*=4,i.dts+=(6&e[t+18])>>>1)),i},videoPacketContainsKeyFrame:function(e){for(var t=4+Kt(e),n=e.subarray(t),i=0,r=0,a=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===Xt(31&n[r+3])&&(a=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===Xt(31&n[r+3])&&(a=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===Xt(31&n[r+3])&&(a=!0),a}},Yt=Me,Jt={};Jt.ts=Zt,Jt.aac=lt;var Qt=se,en=188,tn=71,nn=function(e,t,n){for(var i,r,a,o,s=0,d=en,l=!1;d<=e.byteLength;)if(e[s]!==tn||e[d]!==tn&&d!==e.byteLength)s++,d++;else{if(i=e.subarray(s,d),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=Jt.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),l=!0)),l)break;s+=en,d+=en}for(s=(d=e.byteLength)-en,l=!1;s>=0;)if(e[s]!==tn||e[d]!==tn&&d!==e.byteLength)s--,d--;else{if(i=e.subarray(s,d),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&a&&(o=Jt.ts.parsePesTime(i))&&(o.type="audio",n.audio.push(o),l=!0)),l)break;s-=en,d-=en}},rn=function(e,t,n){for(var i,r,a,o,s,d,l,u=0,c=en,p=!1,h={data:[],size:0};c<e.byteLength;)if(e[u]!==tn||e[c]!==tn)u++,c++;else{if(i=e.subarray(u,c),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(a&&!p&&(o=Jt.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0),!n.firstKeyFrame))){if(a&&0!==h.size){for(s=new Uint8Array(h.size),d=0;h.data.length;)l=h.data.shift(),s.set(l,d),d+=l.byteLength;if(Jt.ts.videoPacketContainsKeyFrame(s)){var f=Jt.ts.parsePesTime(s);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}h.size=0}h.data.push(i),h.size+=i.byteLength}if(p&&n.firstKeyFrame)break;u+=en,c+=en}for(u=(c=e.byteLength)-en,p=!1;u>=0;)if(e[u]!==tn||e[c]!==tn)u--,c--;else{if(i=e.subarray(u,c),"pes"===Jt.ts.parseType(i,t.pid)&&(r=Jt.ts.parsePesType(i,t.table),a=Jt.ts.parsePayloadUnitStartIndicator(i),"video"===r&&a&&(o=Jt.ts.parsePesTime(i))&&(o.type="video",n.video.push(o),p=!0)),p)break;u-=en,c-=en}},an=function(e,t){var n;return n=Jt.aac.isLikelyAacData(e)?function(e){for(var t,n=!1,i=0,r=null,a=null,o=0,s=0;e.length-s>=3;){switch(Jt.aac.parseType(e,s)){case"timed-metadata":if(e.length-s<10){n=!0;break}if((o=Jt.aac.parseId3TagSize(e,s))>e.length){n=!0;break}null===a&&(t=e.subarray(s,s+o),a=Jt.aac.parseAacTimestamp(t)),s+=o;break;case"audio":if(e.length-s<7){n=!0;break}if((o=Jt.aac.parseAdtsSize(e,s))>e.length){n=!0;break}null===r&&(t=e.subarray(s,s+o),r=Jt.aac.parseSampleRate(t)),i++,s+=o;break;default:s++}if(n)return null}if(null===r||null===a)return null;var d=Qt/r;return{audio:[{type:"audio",dts:a,pts:a},{type:"audio",dts:a+1024*i*d,pts:a+1024*i*d}]}}(e):function(e){var t={pid:null,table:null},n={};for(var i in function(e,t){for(var n,i=0,r=en;r<e.byteLength;)if(e[i]!==tn||e[r]!==tn)i++,r++;else{switch(n=e.subarray(i,r),Jt.ts.parseType(n,t.pid)){case"pat":t.pid=Jt.ts.parsePat(n);break;case"pmt":var a=Jt.ts.parsePmt(n);t.table=t.table||{},Object.keys(a).forEach((function(e){t.table[e]=a[e]}))}i+=en,r+=en}}(e,t),t.table)if(t.table.hasOwnProperty(i))switch(t.table[i]){case Pe.H264_STREAM_TYPE:n.video=[],rn(e,t,n),0===n.video.length&&delete n.video;break;case Pe.ADTS_STREAM_TYPE:n.audio=[],nn(e,t,n),0===n.audio.length&&delete n.audio}return n}(e),n&&(n.audio||n.video)?(function(e,t){if(e.audio&&e.audio.length){var n=t;(void 0===n||isNaN(n))&&(n=e.audio[0].dts),e.audio.forEach((function(e){e.dts=Yt(e.dts,n),e.pts=Yt(e.pts,n),e.dtsTime=e.dts/Qt,e.ptsTime=e.pts/Qt}))}if(e.video&&e.video.length){var i=t;if((void 0===i||isNaN(i))&&(i=e.video[0].dts),e.video.forEach((function(e){e.dts=Yt(e.dts,i),e.pts=Yt(e.pts,i),e.dtsTime=e.dts/Qt,e.ptsTime=e.pts/Qt})),e.firstKeyFrame){var r=e.firstKeyFrame;r.dts=Yt(r.dts,i),r.pts=Yt(r.pts,i),r.dtsTime=r.dts/Qt,r.ptsTime=r.pts/Qt}}}(n,t),n):null},on=function(){function e(e,t){this.options=t||{},this.self=e,this.init()}var t=e.prototype;return t.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Ct.Transmuxer(this.options),function(e,t){t.on("data",(function(t){var n=t.initSegment;t.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var i=t.data;t.data=i.buffer,e.postMessage({action:"data",segment:t,byteOffset:i.byteOffset,byteLength:i.byteLength},[t.data])})),t.on("done",(function(t){e.postMessage({action:"done"})})),t.on("gopInfo",(function(t){e.postMessage({action:"gopInfo",gopInfo:t})})),t.on("videoSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),t.on("audioSegmentTimingInfo",(function(t){var n={start:{decode:le(t.start.dts),presentation:le(t.start.pts)},end:{decode:le(t.end.dts),presentation:le(t.end.pts)},baseMediaDecodeTime:le(t.baseMediaDecodeTime)};t.prependedContentDuration&&(n.prependedContentDuration=le(t.prependedContentDuration)),e.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),t.on("id3Frame",(function(t){e.postMessage({action:"id3Frame",id3Frame:t})})),t.on("caption",(function(t){e.postMessage({action:"caption",caption:t})})),t.on("trackinfo",(function(t){e.postMessage({action:"trackinfo",trackInfo:t})})),t.on("audioTimingInfo",(function(t){e.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("videoTimingInfo",(function(t){e.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:le(t.start),end:le(t.end)}})})),t.on("log",(function(t){e.postMessage({action:"log",log:t})}))}(this.self,this.transmuxer)},t.pushMp4Captions=function(e){this.captionParser||(this.captionParser=new Ft,this.captionParser.init());var t=new Uint8Array(e.data,e.byteOffset,e.byteLength),n=this.captionParser.parse(t,e.trackIds,e.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:t.buffer},[t.buffer])},t.probeMp4StartTime=function(e){var t=e.timescales,n=e.data,i=zt(t,n);this.self.postMessage({action:"probeMp4StartTime",startTime:i,data:n},[n.buffer])},t.probeMp4Tracks=function(e){var t=e.data,n=Wt(t);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:t},[t.buffer])},t.probeTs=function(e){var t=e.data,n=e.baseStartTime,i="number"!=typeof n||isNaN(n)?void 0:n*se,r=an(t,i),a=null;r&&((a={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(a.videoStart=r.video[0].ptsTime),a.hasAudio&&(a.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:a,data:t},[t.buffer])},t.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},t.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},t.push=function(e){var t=new Uint8Array(e.data,e.byteOffset,e.byteLength);this.transmuxer.push(t)},t.reset=function(){this.transmuxer.reset()},t.setTimestampOffset=function(e){var t=e.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(de(t)))},t.setAudioAppendStart=function(e){this.transmuxer.setAudioAppendStart(Math.ceil(de(e.appendStart)))},t.setRemux=function(e){this.transmuxer.setRemux(e.remux)},t.flush=function(e){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},t.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},t.alignGopsWith=function(e){this.transmuxer.alignGopsWith(e.gopsToAlignWith.slice())},e}();self.onmessage=function(e){"init"===e.data.action&&e.data.options?this.messageHandlers=new on(self,e.data.options):(this.messageHandlers||(this.messageHandlers=new on(self)),e.data&&e.data.action&&"init"!==e.data.action&&this.messageHandlers[e.data.action]&&this.messageHandlers[e.data.action](e.data))}}))),SO=bO(wO),kO=function(e){var t=e.transmuxer,n=e.bytes,i=e.audioAppendStart,r=e.gopsToAlignWith,a=e.remux,o=e.onData,s=e.onTrackInfo,d=e.onAudioTimingInfo,l=e.onVideoTimingInfo,u=e.onVideoSegmentTimingInfo,c=e.onAudioSegmentTimingInfo,p=e.onId3,h=e.onCaptions,f=e.onDone,g=e.onEndedTimeline,m=e.onTransmuxerLog,v=e.isEndOfTimeline,y={buffer:[]},b=v;if(t.onmessage=function(n){t.currentTransmux===e&&("data"===n.data.action&&function(e,t,n){var i=e.data.segment,r=i.type,a=i.initSegment,o=i.captions,s=i.captionStreams,d=i.metadata,l=i.videoFrameDtsTime,u=i.videoFramePtsTime;t.buffer.push({captions:o,captionStreams:s,metadata:d});var c=e.data.segment.boxes||{data:e.data.segment.data},p={type:r,data:new Uint8Array(c.data,c.data.byteOffset,c.data.byteLength),initSegment:new Uint8Array(a.data,a.byteOffset,a.byteLength)};void 0!==l&&(p.videoFrameDtsTime=l),void 0!==u&&(p.videoFramePtsTime=u),n(p)}(n,y,o),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&function(e,t){t.gopInfo=e.data.gopInfo}(n,y),"audioTimingInfo"===n.data.action&&d(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&u(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&c(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&p([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&h(n.data.caption),"endedtimeline"===n.data.action&&(b=!1,g()),"log"===n.data.action&&m(n.data.log),"transmuxed"===n.data.type&&(b||(t.onmessage=null,function(e){var t=e.transmuxedData,n=e.callback;t.buffer=[],n(t)}({transmuxedData:y,callback:f}),IO(t))))},i&&t.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&t.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),void 0!==a&&t.postMessage({action:"setRemux",remux:a}),n.byteLength){var _=n instanceof ArrayBuffer?n:n.buffer,T=n instanceof ArrayBuffer?0:n.byteOffset;t.postMessage({action:"push",data:_,byteOffset:T,byteLength:n.byteLength},[_])}v&&t.postMessage({action:"endTimeline"}),t.postMessage({action:"flush"})},IO=function(e){e.currentTransmux=null,e.transmuxQueue.length&&(e.currentTransmux=e.transmuxQueue.shift(),"function"==typeof e.currentTransmux?e.currentTransmux():kO(e.currentTransmux))},CO=function(e,t){e.postMessage({action:t}),IO(e)},EO=function(e){!function(e,t){if(!t.currentTransmux)return t.currentTransmux=e,void CO(t,e);t.transmuxQueue.push(CO.bind(null,t,e))}("reset",e)},AO=function(e){var t=e.transmuxer,n=e.endAction||e.action,i=e.callback,r=Oh({},e,{endAction:null,transmuxer:null,callback:null});if(t.addEventListener("message",(function r(a){a.data.action===n&&(t.removeEventListener("message",r),a.data.data&&(a.data.data=new Uint8Array(a.data.data,e.byteOffset||0,e.byteLength||a.data.data.byteLength),e.data&&(e.data=a.data.data)),i(a.data))})),e.data){var a=e.data instanceof ArrayBuffer;r.byteOffset=a?0:e.data.byteOffset,r.byteLength=e.data.byteLength;var o=[a?e.data:e.data.buffer];t.postMessage(r,o)}else t.postMessage(r)},PO=-101,xO=-102,OO=function(e){e.forEach((function(e){e.abort()}))},DO=function(e,t){return t.timedout?{status:t.status,message:"HLS request timed-out at URL: "+t.uri,code:PO,xhr:t}:t.aborted?{status:t.status,message:"HLS request aborted at URL: "+t.uri,code:xO,xhr:t}:e?{status:t.status,message:"HLS request errored at URL: "+t.uri,code:2,xhr:t}:"arraybuffer"===t.responseType&&0===t.response.byteLength?{status:t.status,message:"Empty HLS response at URL: "+t.uri,code:2,xhr:t}:null},RO=function(e,t,n){return function(i,r){var a=r.response,o=DO(i,r);if(o)return n(o,e);if(16!==a.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:2,xhr:r},e);for(var s=new DataView(a),d=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),l=0;l<t.length;l++)t[l].bytes=d;return n(null,e)}},LO=function(e,t){var n=Xg(e.map.bytes);if("mp4"!==n){var i=e.map.resolvedUri||e.map.uri;return t({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:2})}AO({action:"probeMp4Tracks",data:e.map.bytes,transmuxer:e.transmuxer,callback:function(n){var i=n.tracks,r=n.data;return e.map.bytes=r,i.forEach((function(t){e.map.tracks=e.map.tracks||{},e.map.tracks[t.type]||(e.map.tracks[t.type]=t,"number"==typeof t.id&&t.timescale&&(e.map.timescales=e.map.timescales||{},e.map.timescales[t.id]=t.timescale))})),t(null)}})},MO=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog,f=t.map&&t.map.tracks||{},g=Boolean(f.audio&&f.video),m=r.bind(null,t,"audio","start"),v=r.bind(null,t,"audio","end"),y=r.bind(null,t,"video","start"),b=r.bind(null,t,"video","end");AO({action:"probeTs",transmuxer:t.transmuxer,data:n,baseStartTime:t.baseStartTime,callback:function(e){t.bytes=n=e.data;var r=e.result;r&&(i(t,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:g}),i=null,r.hasAudio&&!g&&m(r.audioStart),r.hasVideo&&y(r.videoStart),m=null,y=null),function(e){if(!e.transmuxer.currentTransmux)return e.transmuxer.currentTransmux=e,void kO(e);e.transmuxer.transmuxQueue.push(e)}({bytes:n,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,remux:g,onData:function(e){e.type="combined"===e.type?"video":e.type,c(t,e)},onTrackInfo:function(e){i&&(g&&(e.isMuxed=!0),i(t,e))},onAudioTimingInfo:function(e){m&&void 0!==e.start&&(m(e.start),m=null),v&&void 0!==e.end&&v(e.end)},onVideoTimingInfo:function(e){y&&void 0!==e.start&&(y(e.start),y=null),b&&void 0!==e.end&&b(e.end)},onVideoSegmentTimingInfo:function(e){a(e)},onAudioSegmentTimingInfo:function(e){o(e)},onId3:function(e,n){s(t,e,n)},onCaptions:function(e){d(t,[e])},isEndOfTimeline:l,onEndedTimeline:function(){u()},onTransmuxerLog:h,onDone:function(e){p&&(e.type="combined"===e.type?"video":e.type,p(null,t,e))}})}})},UO=function(e){var t=e.segment,n=e.bytes,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog,f=new Uint8Array(n);if(Zg(f)){t.isFmp4=!0;var g=t.map.tracks,m={isFmp4:!0,hasVideo:!!g.video,hasAudio:!!g.audio};g.audio&&g.audio.codec&&"enca"!==g.audio.codec&&(m.audioCodec=g.audio.codec),g.video&&g.video.codec&&"encv"!==g.video.codec&&(m.videoCodec=g.video.codec),g.video&&g.audio&&(m.isMuxed=!0),i(t,m);var v=function(e){c(t,{data:f,type:m.hasAudio&&!m.isMuxed?"audio":"video"}),e&&e.length&&d(t,e),p(null,t,{})};AO({action:"probeMp4StartTime",timescales:t.map.timescales,data:f,transmuxer:t.transmuxer,callback:function(e){var i=e.data,a=e.startTime;n=i.buffer,t.bytes=f=i,m.hasAudio&&!m.isMuxed&&r(t,"audio","start",a),m.hasVideo&&r(t,"video","start",a),g.video&&i.byteLength&&t.transmuxer?AO({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:t.transmuxer,data:f,timescales:t.map.timescales,trackIds:[g.video.id],callback:function(e){n=e.data.buffer,t.bytes=f=e.data,e.logs.forEach((function(e){h(nx.mergeOptions(e,{stream:"mp4CaptionParser"}))})),v(e.captions)}}):v()}})}else if(t.transmuxer){if(void 0===t.container&&(t.container=Xg(f)),"ts"!==t.container&&"aac"!==t.container)return i(t,{hasAudio:!1,hasVideo:!1}),void p(null,t,{});MO({segment:t,bytes:n,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h})}else p(null,t,{})},jO=function(e,t){var n,i=e.id,r=e.key,a=e.encryptedBytes,o=e.decryptionWorker;o.addEventListener("message",(function e(n){if(n.data.source===i){o.removeEventListener("message",e);var r=n.data.decrypted;t(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),n=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),o.postMessage(rO({source:i,encrypted:a,key:n,iv:r.iv}),[a.buffer,n.buffer])},NO=function(e){var t=e.xhr,n=e.xhrOptions,i=e.decryptionWorker,r=e.segment,a=e.abortFn,o=e.progressFn,s=e.trackInfoFn,d=e.timingInfoFn,l=e.videoSegmentTimingInfoFn,u=e.audioSegmentTimingInfoFn,c=e.id3Fn,p=e.captionsFn,h=e.isEndOfTimeline,f=e.endedTimelineFn,g=e.dataFn,m=e.doneFn,v=e.onTransmuxerLog,y=[],b=function(e){var t=e.activeXhrs,n=e.decryptionWorker,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog,f=0,g=!1;return function(e,m){if(!g){if(e)return g=!0,OO(t),p(e,m);if((f+=1)===t.length){var v=function(){if(m.encryptedBytes)return function(e){var t=e.decryptionWorker,n=e.segment,i=e.trackInfoFn,r=e.timingInfoFn,a=e.videoSegmentTimingInfoFn,o=e.audioSegmentTimingInfoFn,s=e.id3Fn,d=e.captionsFn,l=e.isEndOfTimeline,u=e.endedTimelineFn,c=e.dataFn,p=e.doneFn,h=e.onTransmuxerLog;jO({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:t},(function(e){n.bytes=e,UO({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h})}))}({decryptionWorker:n,segment:m,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h});UO({segment:m,bytes:m.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:a,audioSegmentTimingInfoFn:o,id3Fn:s,captionsFn:d,isEndOfTimeline:l,endedTimelineFn:u,dataFn:c,doneFn:p,onTransmuxerLog:h})};if(m.endOfAllRequests=Date.now(),m.map&&m.map.encryptedBytes&&!m.map.bytes)return jO({decryptionWorker:n,id:m.requestId+"-init",encryptedBytes:m.map.encryptedBytes,key:m.map.key},(function(e){m.map.bytes=e,LO(m,(function(e){if(e)return OO(t),p(e,m);v()}))}));v()}}}}({activeXhrs:y,decryptionWorker:i,trackInfoFn:s,timingInfoFn:d,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:p,isEndOfTimeline:h,endedTimelineFn:f,dataFn:g,doneFn:m,onTransmuxerLog:v});if(r.key&&!r.key.bytes){var _=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&_.push(r.map.key);var T=t(nx.mergeOptions(n,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),RO(r,_,b));y.push(T)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var w=t(nx.mergeOptions(n,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),RO(r,[r.map.key],b));y.push(w)}var S=nx.mergeOptions(n,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:eO(r.map)}),k=function(e){var t=e.segment,n=e.finishProcessingFn;return function(e,i){var r=DO(e,i);if(r)return n(r,t);var a=new Uint8Array(i.response);if(t.map.key)return t.map.encryptedBytes=a,n(null,t);t.map.bytes=a,LO(t,(function(e){if(e)return e.xhr=i,e.status=i.status,n(e,t);n(null,t)}))}}({segment:r,finishProcessingFn:b}),I=t(S,k);y.push(I)}var C=nx.mergeOptions(n,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:eO(r)}),E=t(C,function(e){var t=e.segment,n=e.finishProcessingFn,i=e.responseType;return function(e,r){var a=DO(e,r);if(a)return n(a,t);var o="arraybuffer"!==i&&r.responseText?function(e){for(var t=new Uint8Array(new ArrayBuffer(e.length)),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t.buffer}(r.responseText.substring(t.lastReachedChar||0)):r.response;return t.stats=function(e){return{bandwidth:e.bandwidth,bytesReceived:e.bytesReceived||0,roundTripTime:e.roundTripTime||0}}(r),t.key?t.encryptedBytes=new Uint8Array(o):t.bytes=new Uint8Array(o),n(null,t)}}({segment:r,finishProcessingFn:b,responseType:C.responseType}));E.addEventListener("progress",function(e){var t=e.segment,n=e.progressFn;return e.trackInfoFn,e.timingInfoFn,e.videoSegmentTimingInfoFn,e.audioSegmentTimingInfoFn,e.id3Fn,e.captionsFn,e.isEndOfTimeline,e.endedTimelineFn,e.dataFn,function(e){if(!e.target.aborted)return t.stats=nx.mergeOptions(t.stats,function(e){var t=e.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-t.requestTime||0};return n.bytesReceived=e.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(e)),!t.stats.firstBytesReceivedAt&&t.stats.bytesReceived&&(t.stats.firstBytesReceivedAt=Date.now()),n(e,t)}}({segment:r,progressFn:o,trackInfoFn:s,timingInfoFn:d,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:u,id3Fn:c,captionsFn:p,isEndOfTimeline:h,endedTimelineFn:f,dataFn:g})),y.push(E);var A={};return y.forEach((function(e){e.addEventListener("loadend",function(e){var t=e.loadendState,n=e.abortFn;return function(e){e.target.aborted&&n&&!t.calledAbortFn&&(n(),t.calledAbortFn=!0)}}({loadendState:A,abortFn:a}))})),function(){return OO(y)}},BO=sx("CodecUtils"),FO=function(e,t){var n=t.attributes||{};return e&&e.mediaGroups&&e.mediaGroups.AUDIO&&n.AUDIO&&e.mediaGroups.AUDIO[n.AUDIO]},qO=function(e){var t={};return e.forEach((function(e){var n=e.mediaType,i=e.type,r=e.details;t[n]=t[n]||[],t[n].push(ff(""+i+r))})),Object.keys(t).forEach((function(e){if(t[e].length>1)return BO("multiple "+e+" codecs found as attributes: "+t[e].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(t[e]=null);t[e]=t[e][0]})),t},VO=function(e){var t=0;return e.audio&&t++,e.video&&t++,t},HO=function(e,t){var n=t.attributes||{},i=qO(function(e){var t=e.attributes||{};if(t.CODECS)return gf(t.CODECS)}(t)||[]);if(FO(e,t)&&!i.audio&&!function(e,t){if(!FO(e,t))return!0;var n=t.attributes||{},i=e.mediaGroups.AUDIO[n.AUDIO];for(var r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1}(e,t)){var r=qO(mf(e,n.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},zO=sx("PlaylistSelector"),WO=function(e){if(e&&e.playlist){var t=e.playlist;return JSON.stringify({id:t.id,bandwidth:e.bandwidth,width:e.width,height:e.height,codecs:t.attributes&&t.attributes.CODECS||""})}},$O=function(e,t){if(!e)return"";var n=Ah().getComputedStyle(e);return n?n[t]:""},GO=function(e,t){var n=e.slice();e.sort((function(e,i){var r=t(e,i);return 0===r?n.indexOf(e)-n.indexOf(i):r}))},KO=function(e,t){var n,i;return e.attributes.BANDWIDTH&&(n=e.attributes.BANDWIDTH),n=n||Ah().Number.MAX_VALUE,t.attributes.BANDWIDTH&&(i=t.attributes.BANDWIDTH),n-(i||Ah().Number.MAX_VALUE)},XO=function(e,t,n,i,r,a){if(e){var o={bandwidth:t,width:n,height:i,limitRenditionByPlayerDimensions:r},s=e.playlists;Mx.isAudioOnly(e)&&(s=a.getAudioTrackPlaylists_(),o.audioOnly=!0);var d=s.map((function(e){var t=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width,n=e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.height;return{bandwidth:e.attributes&&e.attributes.BANDWIDTH||Ah().Number.MAX_VALUE,width:t,height:n,playlist:e}}));GO(d,(function(e,t){return e.bandwidth-t.bandwidth}));var l=(d=d.filter((function(e){return!Mx.isIncompatible(e.playlist)}))).filter((function(e){return Mx.isEnabled(e.playlist)}));l.length||(l=d.filter((function(e){return!Mx.isDisabled(e.playlist)})));var u=l.filter((function(e){return e.bandwidth*vO.BANDWIDTH_VARIANCE<t})),c=u[u.length-1],p=u.filter((function(e){return e.bandwidth===c.bandwidth}))[0];if(!1===r){var h=p||l[0]||d[0];if(h&&h.playlist){var f="sortedPlaylistReps";return p&&(f="bandwidthBestRep"),l[0]&&(f="enabledPlaylistReps"),zO("choosing "+WO(h)+" using "+f+" with options",o),h.playlist}return zO("could not choose a playlist with options",o),null}var g=u.filter((function(e){return e.width&&e.height}));GO(g,(function(e,t){return e.width-t.width}));var m=g.filter((function(e){return e.width===n&&e.height===i}));c=m[m.length-1];var v,y,b,_,T=m.filter((function(e){return e.bandwidth===c.bandwidth}))[0];if(T||(y=(v=g.filter((function(e){return e.width>n||e.height>i}))).filter((function(e){return e.width===v[0].width&&e.height===v[0].height})),c=y[y.length-1],b=y.filter((function(e){return e.bandwidth===c.bandwidth}))[0]),a.experimentalLeastPixelDiffSelector){var w=g.map((function(e){return e.pixelDiff=Math.abs(e.width-n)+Math.abs(e.height-i),e}));GO(w,(function(e,t){return e.pixelDiff===t.pixelDiff?t.bandwidth-e.bandwidth:e.pixelDiff-t.pixelDiff})),_=w[0]}var S=_||b||T||p||l[0]||d[0];if(S&&S.playlist){var k="sortedPlaylistReps";return _?k="leastPixelDiffRep":b?k="resolutionPlusOneRep":T?k="resolutionBestRep":p?k="bandwidthBestRep":l[0]&&(k="enabledPlaylistReps"),zO("choosing "+WO(S)+" using "+k+" with options",o),S.playlist}return zO("could not choose a playlist with options",o),null}},ZO=function(){var e=this.useDevicePixelRatio&&Ah().devicePixelRatio||1;return XO(this.playlists.master,this.systemBandwidth,parseInt($O(this.tech_.el(),"width"),10)*e,parseInt($O(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},YO=function(e,t,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=e&&r.endTime<=t&&n.removeCue(r)},JO=function(e){return"number"==typeof e&&isFinite(e)},QO=1/60,eD=function(e){var t=e.startOfSegment,n=e.duration,i=e.segment,r=e.part,a=e.playlist,o=a.mediaSequence,s=a.id,d=a.segments,l=void 0===d?[]:d,u=e.mediaIndex,c=e.partIndex,p=e.timeline,h=l.length-1,f="mediaIndex/partIndex increment";e.getMediaInfoForTime?f="getMediaInfoForTime ("+e.getMediaInfoForTime+")":e.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)"),e.independent&&(f+=" with independent "+e.independent);var g="number"==typeof c,m=e.segment.uri?"segment":"pre-segment",v=g?Tx({preloadSegment:i})-1:0;return m+" ["+(o+u)+"/"+(o+h)+"]"+(g?" part ["+c+"/"+v+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+(g?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+t+"] duration ["+n+"] timeline ["+p+"] selected by ["+f+"] playlist ["+s+"]"},tD=function(e){return e+"TimingInfo"},nD=function(e){var t=e.timelineChangeController,n=e.currentTimeline,i=e.segmentTimeline,r=e.loaderType,a=e.audioDisabled;if(n===i)return!1;if("audio"===r){var o=t.lastTimelineChange({type:"main"});return!o||o.to!==i}if("main"===r&&a){var s=t.pendingTimelineChange({type:"audio"});return!s||s.to!==i}return!1},iD=function(e){var t=e.segmentDuration,n=e.maxDuration;return!!t&&Math.round(t)>n+dx},rD=function(e){function t(t,n){var i;if(i=e.call(this)||this,!t)throw new TypeError("Initialization settings are required");if("function"!=typeof t.currentTime)throw new TypeError("No currentTime getter specified");if(!t.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=t.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=t.hasPlayed,i.currentTime_=t.currentTime,i.seekable_=t.seekable,i.seeking_=t.seeking,i.duration_=t.duration,i.mediaSource_=t.mediaSource,i.vhs_=t.vhs,i.loaderType_=t.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=t.segmentMetadataTrack,i.goalBufferLength_=t.goalBufferLength,i.sourceType_=t.sourceType,i.sourceUpdater_=t.sourceUpdater,i.inbandTextTracks_=t.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=t.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=t.parse708captions,i.useDtsForTimestampOffset_=t.useDtsForTimestampOffset,i.captionServices_=t.captionServices,i.experimentalExactManifestTimings=t.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=nx.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=t.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=t.decrypter,i.syncController_=t.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=sx("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(Lh(i),"state",{get:function(){return this.state_},set:function(e){e!==this.state_&&(this.logger_(this.state_+" -> "+e),this.state_=e,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",(function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}Uh(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return function(e){var t=new SO;t.currentTransmux=null,t.transmuxQueue=[];var n=t.terminate;return t.terminate=function(){return t.currentTransmux=null,t.transmuxQueue.length=0,n.call(t)},t.postMessage({action:"init",options:e}),t}({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&Ah().clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,Ah().clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(e){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==e:(this.state="READY",!0)},n.error=function(e){return void 0!==e&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&EO(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return nx.createTimeRanges();if("main"===this.loaderType_){var t=e.hasAudio,n=e.hasVideo,i=e.isMuxed;if(n&&t&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=aO(e),i=this.initSegments_[n];return t&&!i&&e.bytes&&(this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),i||e},n.segmentKey=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=oO(e),i=this.keyCache_[n];this.cacheEncryptionKeys_&&t&&!i&&e.bytes&&(this.keyCache_[n]=i={resolvedUri:e.resolvedUri,bytes:e.bytes});var r={resolvedUri:(i||e).resolvedUri};return i&&(r.bytes=i.bytes),r},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(e,t){if(void 0===t&&(t={}),e){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=t,"INIT"===this.state&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(e));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update ["+r+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==e.uri)return null!==this.mediaIndex&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var a=e.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+a+"]"),null!==this.mediaIndex)if(this.mediaIndex-=a,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var o=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!o.parts||!o.parts.length||!o.parts[this.partIndex])){var s=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=s}}i&&(i.mediaIndex-=a,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=e.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,e)}},n.pause=function(){this.checkBufferTimeout_&&(Ah().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(e){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&EO(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(e,t,n,i){if(void 0===n&&(n=function(){}),void 0===i&&(i=!1),t===1/0&&(t=this.duration_()),t<=e)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,a=function(){0==--r&&n()};for(var o in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(e,t,a)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=function(e,t,n,i){for(var r=Math.ceil((t-i)*Yg.ONE_SECOND_IN_TS),a=Math.ceil((n-i)*Yg.ONE_SECOND_IN_TS),o=e.slice(),s=e.length;s--&&!(e[s].pts<=a););if(-1===s)return o;for(var d=s+1;d--&&!(e[d].pts<=r););return d=Math.max(d,0),o.splice(d,s-d+1),o}(this.gopBuffer_,e,t,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(e,t,a)),this.inbandTextTracks_)YO(e,t,this.inbandTextTracks_[o]);YO(e,t,this.segmentMetadataTrack_),a()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&Ah().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ah().setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&Ah().clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=Ah().setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&("number"==typeof e.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},n.isEndOfStream_=function(e,t,n){if(void 0===e&&(e=this.mediaIndex),void 0===t&&(t=this.playlist_),void 0===n&&(n=this.partIndex),!t||!this.mediaSource_)return!1;var i="number"==typeof e&&t.segments[e],r=e+1===t.segments.length,a=!i||!i.parts||n+1===i.parts.length;return t.endList&&"open"===this.mediaSource_.readyState&&r&&a},n.chooseNextRequest_=function(){var e=this.buffered_(),t=gx(e)||0,n=mx(e,this.currentTime_()),i=!this.hasPlayed_()&&n>=1,r=n>=this.goalBufferLength_(),a=this.playlist_.segments;if(!a.length||i||r)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(e,t,n){t=t||[];for(var i=[],r=0,a=0;a<t.length;a++){var o=t[a];if(e===o.timeline&&(i.push(a),(r+=o.duration)>n))return a}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,a,t);else if(null!==this.mediaIndex){var s=a[this.mediaIndex],d="number"==typeof this.partIndex?this.partIndex:-1;o.startOfSegment=s.end?s.end:t,s.parts&&s.parts[d+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=d+1):o.mediaIndex=this.mediaIndex+1}else{var l=Mx.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),u=l.segmentIndex,c=l.startTime,p=l.partIndex;o.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+t:"currentTime "+this.currentTime_(),o.mediaIndex=u,o.startOfSegment=c,o.partIndex=p}var h=a[o.mediaIndex],f=h&&"number"==typeof o.partIndex&&h.parts&&h.parts[o.partIndex];if(!h||"number"==typeof o.partIndex&&!f)return null;if("number"!=typeof o.partIndex&&h.parts&&(o.partIndex=0,f=h.parts[0]),!n&&f&&!f.independent)if(0===o.partIndex){var g=a[o.mediaIndex-1],m=g.parts&&g.parts.length&&g.parts[g.parts.length-1];m&&m.independent&&(o.mediaIndex-=1,o.partIndex=g.parts.length-1,o.independent="previous segment")}else h.parts[o.partIndex-1].independent&&(o.partIndex-=1,o.independent="previous part");var v=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=a.length-1&&v&&!this.seeking_()?null:this.generateSegmentInfo_(o)},n.generateSegmentInfo_=function(e){var t=e.independent,n=e.playlist,i=e.mediaIndex,r=e.startOfSegment,a=e.isSyncRequest,o=e.partIndex,s=e.forceTimestampOffset,d=e.getMediaInfoForTime,l=n.segments[i],u="number"==typeof o&&l.parts[o],c={requestId:"segment-loader-"+Math.random(),uri:u&&u.resolvedUri||l.resolvedUri,mediaIndex:i,partIndex:u?o:null,isSyncRequest:a,startOfSegment:r,playlist:n,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:u&&u.duration||l.duration,segment:l,part:u,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:d,independent:t},p=void 0!==s?s:this.isPendingTimestampOffset_;c.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:l.timeline,currentTimeline:this.currentTimeline_,startOfSegment:r,buffered:this.buffered_(),overrideCheck:p});var h=gx(this.sourceUpdater_.audioBuffered());return"number"==typeof h&&(c.audioAppendStart=h-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(c.gopsToAlignWith=function(e,t,n){if(null==t||!e.length)return[];var i,r=Math.ceil((t-n+3)*Yg.ONE_SECOND_IN_TS);for(i=0;i<e.length&&!(e[i].pts>r);i++);return e.slice(i)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),c},n.timestampOffsetForSegment_=function(e){return n=(t=e).segmentTimeline,i=t.currentTimeline,r=t.startOfSegment,a=t.buffered,t.overrideCheck||n!==i?n<i?r:a.length?a.end(a.length-1):r:null;var t,n,i,r,a},n.earlyAbortWhenNeeded_=function(e){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var t=this.currentTime_(),n=e.bandwidth,i=this.pendingSegment_.duration,r=Mx.estimateSegmentRequestTime(i,n,this.playlist_,e.bytesReceived),a=function(e,t,n){return void 0===n&&(n=1),((e.length?e.end(e.length-1):0)-t)/n}(this.buffered_(),t,this.vhs_.tech_.playbackRate())-1;if(!(r<=a)){var o=function(e){var t=e.currentTime,n=e.bandwidth,i=e.duration,r=e.segmentDuration,a=e.timeUntilRebuffer,o=e.currentTimeline,s=e.syncController,d=e.master.playlists.filter((function(e){return!Mx.isIncompatible(e)})),l=d.filter(Mx.isEnabled);l.length||(l=d.filter((function(e){return!Mx.isDisabled(e)})));var u=l.filter(Mx.hasAttribute.bind(null,"BANDWIDTH")).map((function(e){var d=s.getSyncPoint(e,i,o,t)?1:2;return{playlist:e,rebufferingImpact:Mx.estimateSegmentRequestTime(r,n,e)*d-a}})),c=u.filter((function(e){return e.rebufferingImpact<=0}));return GO(c,(function(e,t){return KO(t.playlist,e.playlist)})),c.length?c[0]:(GO(u,(function(e,t){return e.rebufferingImpact-t.rebufferingImpact})),u[0]||null)}({master:this.vhs_.playlists.master,currentTime:t,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(o){var s=r-a-o.rebufferingImpact,d=.5;a<=dx&&(d=1),!o.playlist||o.playlist.uri===this.playlist_.uri||s<d||(this.bandwidth=o.playlist.attributes.BANDWIDTH*vO.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(e){this.logger_("Aborting "+eD(e)),this.mediaRequestsAborted+=1},n.handleProgress_=function(e,t){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(e,t){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.checkForIllegalMediaSwitch(t)||(t=t||{},function(e,t){if(!e&&!t||!e&&t||e&&!t)return!1;if(e===t)return!0;var n=Object.keys(e).sort(),i=Object.keys(t).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var a=n[r];if(a!==i[r])return!1;if(e[a]!==t[a])return!1}return!0}(this.currentMediaInfo_,t)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=t,this.currentMediaInfo_=t,this.logger_("trackinfo update",t),this.trigger("trackinfo")),this.checkForAbort_(e.requestId)||(this.pendingSegment_.trackInfo=t,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(e,t,n,i){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var r=this.pendingSegment_,a=tD(t);r[a]=r[a]||{},r[a][n]=i,this.logger_("timinginfo: "+t+" - "+n+" - "+i),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(e,t){var n=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(0!==t.length)if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};t.forEach((function(e){r[e.stream]=r[e.stream]||{startTime:1/0,captions:[],endTime:0};var t=r[e.stream];t.startTime=Math.min(t.startTime,e.startTime+i),t.endTime=Math.max(t.endTime,e.endTime+i),t.captions.push(e)})),Object.keys(r).forEach((function(e){var t=r[e],a=t.startTime,o=t.endTime,s=t.captions,d=n.inbandTextTracks_;n.logger_("adding cues from "+a+" -> "+o+" for "+e),function(e,t,n){if(!e[n]){t.trigger({type:"usage",name:"vhs-608"}),t.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var r=t.textTracks().getTrackById(i);if(r)e[n]=r;else{var a=n,o=n,s=!1,d=(t.options_.vhs&&t.options_.vhs.captionServices||{})[i];d&&(a=d.label,o=d.language,s=d.default),e[n]=t.addRemoteTextTrack({kind:"captions",id:i,default:s,label:a,language:o},!1).track}}}(d,n.vhs_.tech_,e),YO(a,o,d[e]),function(e){var t=e.inbandTextTracks,n=e.captionArray,i=e.timestampOffset;if(n){var r=Ah().WebKitDataCue||Ah().VTTCue;n.forEach((function(e){var n=e.stream;t[n].addCue(new r(e.startTime+i,e.endTime+i,e.text))}))}}({captionArray:s,inbandTextTracks:d,timestampOffset:i})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,t));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(e,t,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(e,t,n){e.metadataTrack_||(e.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,e.metadataTrack_.inBandMetadataTrackDispatchType=t)}(this.inbandTextTracks_,n,this.vhs_.tech_),function(e){var t=e.inbandTextTracks,n=e.metadataArray,i=e.timestampOffset,r=e.videoDuration;if(n){var a=Ah().WebKitDataCue||Ah().VTTCue,o=t.metadataTrack_;if(o&&(n.forEach((function(e){var t=e.cueTime+i;!("number"!=typeof t||Ah().isNaN(t)||t<0)&&t<1/0&&e.frames.forEach((function(e){var n=new a(t,t,e.value||e.url||e.data||"");n.frame=e,n.value=e,function(e){Object.defineProperties(e.frame,{id:{get:function(){return nx.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),e.value.key}},value:{get:function(){return nx.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),e.value.data}},privateData:{get:function(){return nx.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),e.value.data}}})}(n),o.addCue(n)}))})),o.cues&&o.cues.length)){for(var s=o.cues,d=[],l=0;l<s.length;l++)s[l]&&d.push(s[l]);var u=d.reduce((function(e,t){var n=e[t.startTime]||[];return n.push(t),e[t.startTime]=n,e}),{}),c=Object.keys(u).sort((function(e,t){return Number(e)-Number(t)}));c.forEach((function(e,t){var n=u[e],i=Number(c[t+1])||r;n.forEach((function(e){e.endTime=i}))}))}}}({inbandTextTracks:this.inbandTextTracks_,metadataArray:t,timestampOffset:i,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,t,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(e){return e()})),this.metadataQueue_.caption.forEach((function(e){return e()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach((function(e){return e()}))},n.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach((function(e){return e()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var e=this.pendingSegment_;return!(!e||this.getCurrentMediaInfo_()&&nD({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(e){return void 0===e&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,t=this.getCurrentMediaInfo_();if(!e||!t)return!1;var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed;return!(i&&!e.videoTimingInfo||n&&!this.audioDisabled_&&!r&&!e.audioTimingInfo||nD({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(e,t){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.part||n.segment),"closed"!==this.mediaSource_.readyState){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),n.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),n.isFmp4=e.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[tD(t.type)].start;else{var i,r=this.getCurrentMediaInfo_(),a="main"===this.loaderType_&&r&&r.hasVideo;a&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:a,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,t.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var o=this.chooseNextRequest_();if(o.mediaIndex!==n.mediaIndex||o.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,t)}}else this.callQueue_.push(this.handleData_.bind(this,e,t))},n.updateAppendInitSegmentStatus=function(e,t){"main"!==this.loaderType_||"number"!=typeof e.timestampOffset||e.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[t]!==e.playlist&&(this.appendInitSegment_[t]=!0)},n.getInitSegmentAndUpdateState_=function(e){var t=e.type,n=e.initSegment,i=e.map,r=e.playlist;if(i){var a=aO(i);if(this.activeInitSegmentId_===a)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=a}return n&&this.appendInitSegment_[t]?(this.playlistOfLastInitSegment_[t]=r,this.appendInitSegment_[t]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes,o=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();o.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+fx(o).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+fx(s).join(", "));var d=o.length?o.start(0):0,l=o.length?o.end(o.length-1):0,u=s.length?s.start(0):0,c=s.length?s.end(s.length-1):0;if(l-d<=1&&c-u<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+a.byteLength+", audio buffer: "+fx(o).join(", ")+", video buffer: "+fx(s).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:r,bytes:a}));var p=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+p),this.remove(0,p,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=Ah().setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(e,t){var n=e.segmentInfo,i=e.type,r=e.bytes;t&&(22!==t.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",t),this.error(i+" append of "+r.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:i,bytes:r}))},n.appendToSourceBuffer_=function(e){var t,n,i,r=e.segmentInfo,a=e.type,o=e.initSegment,s=e.data,d=e.bytes;if(!d){var l=[s],u=s.byteLength;o&&(l.unshift(o),u+=o.byteLength),i=0,(t={bytes:u,segments:l}).bytes&&(n=new Uint8Array(t.bytes),t.segments.forEach((function(e){n.set(e,i),i+=e.byteLength}))),d=n}this.sourceUpdater_.appendBuffer({segmentInfo:r,type:a,bytes:d},this.handleAppendError_.bind(this,{segmentInfo:r,type:a,bytes:d}))},n.handleSegmentTimingInfo_=function(e,t,n){if(this.pendingSegment_&&t===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment,r=e+"TimingInfo";i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(e,t){var n=t.type,i=t.data;if(i&&i.byteLength&&("audio"!==n||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:n,initSegment:t.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:n,initSegment:r,data:i})}},n.loadSegment_=function(e){var t=this;this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),"number"==typeof e.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(e):this.loadQueue_.push((function(){var n=Oh({},e,{forceTimestampOffset:!0});Oh(e,t.generateSegmentInfo_(n)),t.isPendingTimestampOffset_=!1,t.updateTransmuxerAndRequestSegment_(e)}))},n.updateTransmuxerAndRequestSegment_=function(e){var t=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var n=this.createSimplifiedSegmentObj_(e),i=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),r=null!==this.mediaIndex,a=e.timeline!==this.currentTimeline_&&e.timeline>0,o=i||r&&a;this.logger_("Requesting "+eD(e)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=NO({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:o,endedTimelineFn:function(){t.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var i=n.message,r=n.level,a=n.stream;t.logger_(eD(e)+" logged from transmuxer stream "+a+" as a "+r+": "+i)}})},n.trimBackBuffer_=function(e){var t=function(e,t,n){var i=t-vO.BACK_BUFFER_LENGTH;e.length&&(i=Math.max(i,e.start(0)));var r=t-n;return Math.min(r,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);t>0&&this.remove(0,t)},n.createSimplifiedSegmentObj_=function(e){var t=e.segment,n=e.part,i={resolvedUri:n?n.resolvedUri:t.resolvedUri,byterange:n?n.byterange:t.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},r=e.playlist.segments[e.mediaIndex-1];if(r&&r.timeline===t.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),t.key){var a=t.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);i.key=this.segmentKey(t.key),i.key.iv=a}return t.map&&(i.map=this.initSegmentForMap(t.map)),i},n.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},n.saveBandwidthRelatedStats_=function(e,t){this.pendingSegment_.byteLength=t.bytesReceived,e<QO?this.logger_("Ignoring segment's bandwidth because its duration of "+e+" is less than the min to record 0.016666666666666666"):(this.bandwidth=t.bandwidth,this.roundTrip=t.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(e,t,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,t,n));else if(this.saveTransferStats_(t.stats),this.pendingSegment_&&t.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===xO)return;return this.pause(),e.code===PO?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(e),void this.trigger("error"))}var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,t.stats),i.endOfAllRequests=t.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(e,t,n){if(!t.length)return e;if(n)return t.slice();for(var i=t[0].pts,r=0;r<e.length&&!(e[r].pts>=i);r++);return e.slice(0,r).concat(t)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}},n.setTimeMapping_=function(e){var t=this.syncController_.mappingForTimeline(e);null!==t&&(this.timeMapping_=t)},n.updateMediaSecondsLoaded_=function(e){"number"==typeof e.start&&"number"==typeof e.end?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(e){return null!==e&&("main"===this.loaderType_&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(e){var t=e.currentStart,n=e.playlist,i=e.mediaIndex,r=e.firstVideoFrameTimeForData,a=e.currentVideoTimestampOffset,o=e.useVideoTimingInfo,s=e.videoTimingInfo,d=e.audioTimingInfo;if(void 0!==t)return t;if(!o)return d.start;var l=n.segments[i-1];return 0!==i&&l&&void 0!==l.start&&l.end===r+a?s.start:r},n.waitForAppendsToComplete_=function(e){var t=this.getCurrentMediaInfo_(e);if(!t)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=t.hasAudio,i=t.hasVideo,r=t.isMuxed,a="main"===this.loaderType_&&i,o=!this.audioDisabled_&&n&&!r;if(e.waitingOnAppends=0,!e.hasAppendedData_)return e.timingInfo||"number"!=typeof e.timestampOffset||(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),void this.checkAppendsDone_(e);a&&e.waitingOnAppends++,o&&e.waitingOnAppends++,a&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),o&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},n.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,0===e.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(e){var t=function(e,t,n){return"main"===e&&t&&n?n.hasAudio||n.hasVideo?t.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!t.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),e);return!!t&&(this.error({message:t,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(e){if(null!==e.timestampOffset&&"number"==typeof e.timingInfo.start&&!e.changedTimestampOffset&&"main"===this.loaderType_){var t=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),t=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),t=!0),t&&this.trigger("timestampoffset")}},n.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var t=e.videoTimingInfo,n=e.audioTimingInfo,i=e.timingInfo;return this.useDtsForTimestampOffset_?t&&"number"==typeof t.transmuxedDecodeStart?t.transmuxedDecodeStart:n&&"number"==typeof n.transmuxedDecodeStart?n.transmuxedDecodeStart:i.start:i.start},n.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var t=this.getMediaInfo_(),n="main"===this.loaderType_&&t&&t.hasVideo&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;n&&(e.timingInfo.end="number"==typeof n.end?n.end:n.start+e.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:"main"===this.loaderType_});var t=function(e,t){if("hls"!==t)return null;var n,i,r=(n={audioTimingInfo:e.audioTimingInfo,videoTimingInfo:e.videoTimingInfo},i=0,["video","audio"].forEach((function(e){var t=n[e+"TimingInfo"];if(t){var r,a=t.start,o=t.end;"bigint"==typeof a||"bigint"==typeof o?r=Ah().BigInt(o)-Ah().BigInt(a):"number"==typeof a&&"number"==typeof o&&(r=o-a),void 0!==r&&r>i&&(i=r)}})),"bigint"==typeof i&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i);if(!r)return null;var a=e.playlist.targetDuration,o=iD({segmentDuration:r,maxDuration:2*a}),s=iD({segmentDuration:r,maxDuration:a}),d="Segment with index "+e.mediaIndex+" from playlist "+e.playlist.id+" has a duration of "+r+" when the reported duration is "+e.duration+" and the target duration is "+a+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return o||s?{severity:o?"warn":"info",message:d}:null}(e,this.sourceType_);if(t&&("warn"===t.severity?nx.log.warn(t.message):this.logger_(t.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",!e.isSyncRequest||(this.trigger("syncinfoupdate"),e.hasAppendedData_)){this.logger_("Appended "+eD(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var n=e.segment,i=e.part,r=n.end&&this.currentTime_()-n.end>3*e.playlist.targetDuration,a=i&&i.end&&this.currentTime_()-i.end>3*e.playlist.partTargetDuration;if(r||a)return this.logger_("bad "+(r?"segment":"part")+" "+eD(e)),void this.resetEverything();null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+eD(e))},n.recordThroughput_=function(e){if(e.duration<QO)this.logger_("Ignoring segment's throughput because its duration of "+e.duration+" is less than the min to record 0.016666666666666666");else{var t=this.throughput.rate,n=Date.now()-e.endOfAllRequests+1,i=Math.floor(e.byteLength/n*8*1e3);this.throughput.rate+=(i-t)/++this.throughput.count}},n.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var t=e.segment,n=t.start,i=t.end;if(JO(n)&&JO(i)){YO(n,i,this.segmentMetadataTrack_);var r=Ah().WebKitDataCue||Ah().VTTCue,a={custom:t.custom,dateTimeObject:t.dateTimeObject,dateTimeString:t.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:n,end:i},o=new r(n,i,JSON.stringify(a));o.value=a,this.segmentMetadataTrack_.addCue(o)}}},t}(nx.EventTarget);function aD(){}var oD,sD=function(e){return"string"!=typeof e?e:e.replace(/./,(function(e){return e.toUpperCase()}))},dD=["video","audio"],lD=function(e,t){var n=t[e+"Buffer"];return n&&n.updating||t.queuePending[e]},uD=function e(t,n){if(0!==n.queue.length){var i=0,r=n.queue[i];if("mediaSource"!==r.type){if("mediaSource"!==t&&n.ready()&&"closed"!==n.mediaSource.readyState&&!lD(t,n)){if(r.type!==t){if(i=function(e,t){for(var n=0;n<t.length;n++){var i=t[n];if("mediaSource"===i.type)return null;if(i.type===e)return n}return null}(t,n.queue),null===i)return;r=n.queue[i]}return n.queue.splice(i,1),n.queuePending[t]=r,r.action(t,n),r.doneFn?void 0:(n.queuePending[t]=null,void e(t,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),r.action(n),r.doneFn&&r.doneFn(),e("audio",n),e("video",n))}},cD=function(e,t){var n=t[e+"Buffer"],i=sD(e);n&&(n.removeEventListener("updateend",t["on"+i+"UpdateEnd_"]),n.removeEventListener("error",t["on"+i+"Error_"]),t.codecs[e]=null,t[e+"Buffer"]=null)},pD=function(e,t){return e&&t&&-1!==Array.prototype.indexOf.call(e.sourceBuffers,t)},hD=function(e,t,n){return function(i,r){var a=r[i+"Buffer"];if(pD(r.mediaSource,a)){r.logger_("Appending segment "+t.mediaIndex+"'s "+e.length+" bytes to "+i+"Buffer");try{a.appendBuffer(e)}catch(e){r.logger_("Error with code "+e.code+" "+(22===e.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+t.mediaIndex+" to "+i+"Buffer"),r.queuePending[i]=null,n(e)}}}},fD=function(e,t){return function(n,i){var r=i[n+"Buffer"];if(pD(i.mediaSource,r)){i.logger_("Removing "+e+" to "+t+" from "+n+"Buffer");try{r.remove(e,t)}catch(r){i.logger_("Remove "+e+" to "+t+" from "+n+"Buffer failed")}}}},gD=function(e){return function(t,n){var i=n[t+"Buffer"];pD(n.mediaSource,i)&&(n.logger_("Setting "+t+"timestampOffset to "+e),i.timestampOffset=e)}},mD=function(e){return function(t,n){e()}},vD=function(e){return function(t){if("open"===t.mediaSource.readyState){t.logger_("Calling mediaSource endOfStream("+(e||"")+")");try{t.mediaSource.endOfStream(e)}catch(e){nx.log.warn("Failed to call media source endOfStream",e)}}}},yD=function(e,t){return function(n){var i=sD(e),r=yf(t);n.logger_("Adding "+e+"Buffer with codec "+t+" to mediaSource");var a=n.mediaSource.addSourceBuffer(r);a.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),a.addEventListener("error",n["on"+i+"Error_"]),n.codecs[e]=t,n[e+"Buffer"]=a}},bD=function(e){return function(t){var n=t[e+"Buffer"];if(cD(e,t),pD(t.mediaSource,n)){t.logger_("Removing "+e+"Buffer with codec "+t.codecs[e]+" from mediaSource");try{t.mediaSource.removeSourceBuffer(n)}catch(t){nx.log.warn("Failed to removeSourceBuffer "+e+"Buffer",t)}}}},_D=function(e){return function(t,n){var i=n[t+"Buffer"],r=yf(e);pD(n.mediaSource,i)&&n.codecs[t]!==e&&(n.logger_("changing "+t+"Buffer codec from "+n.codecs[t]+" to "+e),i.changeType(r),n.codecs[t]=e)}},TD=function(e){var t=e.type,n=e.sourceUpdater,i=e.action,r=e.doneFn,a=e.name;n.queue.push({type:t,action:i,doneFn:r,name:a}),uD(t,n)},wD=function(e,t){return function(n){if(t.queuePending[e]){var i=t.queuePending[e].doneFn;t.queuePending[e]=null,i&&i(t[e+"Error_"])}uD(e,t)}},SD=function(e){function t(t){var n;return(n=e.call(this)||this).mediaSource=t,n.sourceopenListener_=function(){return uD("mediaSource",Lh(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=sx("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=wD("video",Lh(n)),n.onAudioUpdateEnd_=wD("audio",Lh(n)),n.onVideoError_=function(e){n.videoError_=e},n.onAudioError_=function(e){n.audioError_=e},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}Uh(t,e);var n=t.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(e,t){TD({type:"mediaSource",sourceUpdater:this,action:yD(e,t),name:"addSourceBuffer"})},n.abort=function(e){TD({type:e,sourceUpdater:this,action:function(e,t){if("open"===t.mediaSource.readyState){var n=t[e+"Buffer"];if(pD(t.mediaSource,n)){t.logger_("calling abort on "+e+"Buffer");try{n.abort()}catch(t){nx.log.warn("Failed to abort on "+e+"Buffer",t)}}}},name:"abort"})},n.removeSourceBuffer=function(e){this.canRemoveSourceBuffer()?TD({type:"mediaSource",sourceUpdater:this,action:bD(e),name:"removeSourceBuffer"}):nx.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!nx.browser.IE_VERSION&&!nx.browser.IS_FIREFOX&&Ah().MediaSource&&Ah().MediaSource.prototype&&"function"==typeof Ah().MediaSource.prototype.removeSourceBuffer},t.canChangeType=function(){return Ah().SourceBuffer&&Ah().SourceBuffer.prototype&&"function"==typeof Ah().SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(e,t){this.canChangeType()?TD({type:e,sourceUpdater:this,action:_D(t),name:"changeType"}):nx.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(e){var t=this;if(!e||"object"!=typeof e||0===Object.keys(e).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach((function(n){var i=e[n];if(!t.hasCreatedSourceBuffers())return t.addSourceBuffer(n,i);t.canChangeType()&&t.changeType(n,i)}))},n.appendBuffer=function(e,t){var n=this,i=e.segmentInfo,r=e.type,a=e.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([e,t]),void this.logger_("delayed audio append of "+a.length+" until video append");if(TD({type:r,sourceUpdater:this,action:hD(a,i||{mediaIndex:-1},t),doneFn:t,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var o=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+o.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,o.forEach((function(e){n.appendBuffer.apply(n,e)}))}},n.audioBuffered=function(){return pD(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:nx.createTimeRange()},n.videoBuffered=function(){return pD(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:nx.createTimeRange()},n.buffered=function(){var e=pD(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,t=pD(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return t&&!e?this.audioBuffered():e&&!t?this.videoBuffered():function(e,t){var n=null,i=null,r=0,a=[],o=[];if(!(e&&e.length&&t&&t.length))return nx.createTimeRange();for(var s=e.length;s--;)a.push({time:e.start(s),type:"start"}),a.push({time:e.end(s),type:"end"});for(s=t.length;s--;)a.push({time:t.start(s),type:"start"}),a.push({time:t.end(s),type:"end"});for(a.sort((function(e,t){return e.time-t.time})),s=0;s<a.length;s++)"start"===a[s].type?2==++r&&(n=a[s].time):"end"===a[s].type&&1==--r&&(i=a[s].time),null!==n&&null!==i&&(o.push([n,i]),n=null,i=null);return nx.createTimeRanges(o)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(e,t){var n;void 0===t&&(t=aD),TD({type:"mediaSource",sourceUpdater:this,action:(n=e,function(e){e.logger_("Setting mediaSource duration to "+n);try{e.mediaSource.duration=n}catch(e){nx.log.warn("Failed to set media source duration",e)}}),name:"duration",doneFn:t})},n.endOfStream=function(e,t){void 0===e&&(e=null),void 0===t&&(t=aD),"string"!=typeof e&&(e=void 0),TD({type:"mediaSource",sourceUpdater:this,action:vD(e),name:"endOfStream",doneFn:t})},n.removeAudio=function(e,t,n){void 0===n&&(n=aD),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?TD({type:"audio",sourceUpdater:this,action:fD(e,t),doneFn:n,name:"remove"}):n()},n.removeVideo=function(e,t,n){void 0===n&&(n=aD),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?TD({type:"video",sourceUpdater:this,action:fD(e,t),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!lD("audio",this)&&!lD("video",this))},n.audioTimestampOffset=function(e){return void 0!==e&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(TD({type:"audio",sourceUpdater:this,action:gD(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},n.videoTimestampOffset=function(e){return void 0!==e&&this.videoBuffer&&this.videoTimestampOffset!==e&&(TD({type:"video",sourceUpdater:this,action:gD(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},n.audioQueueCallback=function(e){this.audioBuffer&&TD({type:"audio",sourceUpdater:this,action:mD(e),name:"callback"})},n.videoQueueCallback=function(e){this.videoBuffer&&TD({type:"video",sourceUpdater:this,action:mD(e),name:"callback"})},n.dispose=function(){var e=this;this.trigger("dispose"),dD.forEach((function(t){e.abort(t),e.canRemoveSourceBuffer()?e.removeSourceBuffer(t):e[t+"QueueCallback"]((function(){return cD(t,e)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(nx.EventTarget),kD=function(e){return decodeURIComponent(escape(String.fromCharCode.apply(null,e)))},ID=new Uint8Array("\n\n".split("").map((function(e){return e.charCodeAt(0)}))),CD=function(e){function t(t,n){var i;return void 0===n&&(n={}),(i=e.call(this,t,n)||this).mediaSource_=null,i.subtitlesTrack_=null,i.loaderType_="subtitle",i.featuresNativeTextTracks_=t.featuresNativeTextTracks,i.shouldSaveSegmentTimingInfo_=!1,i}Uh(t,e);var n=t.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return nx.createTimeRanges();var e=this.subtitlesTrack_.cues,t=e[0].startTime,n=e[e.length-1].startTime;return nx.createTimeRanges([[t,n]])},n.initSegmentForMap=function(e,t){if(void 0===t&&(t=!1),!e)return null;var n=aO(e),i=this.initSegments_[n];if(t&&!i&&e.bytes){var r=ID.byteLength+e.bytes.byteLength,a=new Uint8Array(r);a.set(e.bytes),a.set(ID,e.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:a}}return i||e},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(e){return void 0===e||(this.subtitlesTrack_=e,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(e,t){YO(e,t,this.subtitlesTrack_)},n.fillBuffer_=function(){var e=this,t=this.chooseNextRequest_();if(t){if(null===this.syncController_.timestampOffsetForTimeline(t.timeline))return this.syncController_.one("timestampoffset",(function(){e.state="READY",e.paused()||e.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE");this.loadSegment_(t)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(e.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},n.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(e,t,n){var i=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(t.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(e)return e.code===PO&&this.handleTimeout_(),e.code===xO?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(e);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,t.stats),this.state="APPENDING",this.trigger("appending");var a=r.segment;if(a.map&&(a.map.bytes=t.map.bytes),r.bytes=t.bytes,"function"!=typeof Ah().WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var o,s=function(){i.subtitlesTrack_.tech_.off("vttjsloaded",o),i.stopForError({message:"Error loading vtt.js"})};return o=function(){i.subtitlesTrack_.tech_.off("vttjserror",s),i.segmentRequestFinished_(e,t,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",o),void this.subtitlesTrack_.tech_.one("vttjserror",s)}a.requested=!0;try{this.parseVTTCues_(r)}catch(e){return void this.stopForError({message:e.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=a.duration,r.cues.forEach((function(e){i.subtitlesTrack_.addCue(i.featuresNativeTextTracks_?new(Ah().VTTCue)(e.startTime,e.endTime,e.text):e)})),function(e){var t=e.cues;if(t)for(var n=0;n<t.length;n++){for(var i=[],r=0,a=0;a<t.length;a++)t[n].startTime===t[a].startTime&&t[n].endTime===t[a].endTime&&t[n].text===t[a].text&&++r>1&&i.push(t[a]);i.length&&i.forEach((function(t){return e.removeCue(t)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(e){var t,n=!1;"function"==typeof Ah().TextDecoder?t=new(Ah().TextDecoder)("utf8"):(t=Ah().WebVTT.StringDecoder(),n=!0);var i=new(Ah().WebVTT.Parser)(Ah(),Ah().vttjs,t);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=e.cues.push.bind(e.cues),i.ontimestampmap=function(t){e.timestampmap=t},i.onparsingerror=function(e){nx.log.warn("Error encountered when parsing cues: "+e.message)},e.segment.map){var r=e.segment.map.bytes;n&&(r=kD(r)),i.parse(r)}var a=e.bytes;n&&(a=kD(a)),i.parse(a),i.flush()},n.updateTimeMapping_=function(e,t,n){var i=e.segment;if(t)if(e.cues.length){var r=e.timestampmap,a=r.MPEGTS/Yg.ONE_SECOND_IN_TS-r.LOCAL+t.mapping;if(e.cues.forEach((function(e){e.startTime+=a,e.endTime+=a})),!n.syncInfo){var o=e.cues[0].startTime,s=e.cues[e.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+e.mediaIndex,time:Math.min(o,s-i.duration)}}}else i.empty=!0},t}(rD),ED=function(e,t){for(var n=e.cues,i=0;i<n.length;i++){var r=n[i];if(t>=r.adStartTime&&t<=r.adEndTime)return r}return null},AD=[{name:"VOD",run:function(e,t,n,i,r){return n!==1/0?{time:0,segmentIndex:0,partIndex:null}:null}},{name:"ProgramDateTime",run:function(e,t,n,i,r){if(!Object.keys(e.timelineToDatetimeMappings).length)return null;var a=null,o=null,s=bx(t);r=r||0;for(var d=0;d<s.length;d++){var l=s[t.endList||0===r?d:s.length-(d+1)],u=l.segment,c=e.timelineToDatetimeMappings[u.timeline];if(c&&u.dateTimeObject){var p=u.dateTimeObject.getTime()/1e3+c;if(u.parts&&"number"==typeof l.partIndex)for(var h=0;h<l.partIndex;h++)p+=u.parts[h].duration;var f=Math.abs(r-p);if(null!==o&&(0===f||o<f))break;o=f,a={time:p,segmentIndex:l.segmentIndex,partIndex:l.partIndex}}}return a}},{name:"Segment",run:function(e,t,n,i,r){var a=null,o=null;r=r||0;for(var s=bx(t),d=0;d<s.length;d++){var l=s[t.endList||0===r?d:s.length-(d+1)],u=l.segment,c=l.part&&l.part.start||u&&u.start;if(u.timeline===i&&void 0!==c){var p=Math.abs(r-c);if(null!==o&&o<p)break;(!a||null===o||o>=p)&&(o=p,a={time:c,segmentIndex:l.segmentIndex,partIndex:l.partIndex})}}return a}},{name:"Discontinuity",run:function(e,t,n,i,r){var a=null;if(r=r||0,t.discontinuityStarts&&t.discontinuityStarts.length)for(var o=null,s=0;s<t.discontinuityStarts.length;s++){var d=t.discontinuityStarts[s],l=t.discontinuitySequence+s+1,u=e.discontinuities[l];if(u){var c=Math.abs(r-u.time);if(null!==o&&o<c)break;(!a||null===o||o>=c)&&(o=c,a={time:u.time,segmentIndex:d,partIndex:null})}}return a}},{name:"Playlist",run:function(e,t,n,i,r){return t.syncInfo?{time:t.syncInfo.time,segmentIndex:t.syncInfo.mediaSequence-t.mediaSequence,partIndex:null}:null}}],PD=function(e){function t(t){var n;return(n=e.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=sx("SyncController"),n}Uh(t,e);var n=t.prototype;return n.getSyncPoint=function(e,t,n,i){var r=this.runStrategies_(e,t,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null},n.getExpiredTime=function(e,t){if(!e||!e.segments)return null;var n=this.runStrategies_(e,t,e.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+Ix({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:i.segmentIndex,endIndex:0}))},n.runStrategies_=function(e,t,n,i){for(var r=[],a=0;a<AD.length;a++){var o=AD[a],s=o.run(this,e,t,n,i);s&&(s.strategy=o.name,r.push({strategy:o.name,syncPoint:s}))}return r},n.selectSyncPoint_=function(e,t){for(var n=e[0].syncPoint,i=Math.abs(e[0].syncPoint[t.key]-t.value),r=e[0].strategy,a=1;a<e.length;a++){var o=Math.abs(e[a].syncPoint[t.key]-t.value);o<i&&(i=o,n=e[a].syncPoint,r=e[a].strategy)}return this.logger_("syncPoint for ["+t.key+": "+t.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"==typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(e,t){var n=t.mediaSequence-e.mediaSequence;if(n>86400)nx.log.warn("Not saving expired segment info. Media sequence gap "+n+" is too large.");else for(var i=n-1;i>=0;i--){var r=e.segments[i];if(r&&void 0!==r.start){t.syncInfo={mediaSequence:e.mediaSequence+i,time:r.start},this.logger_("playlist refresh sync: [time:"+t.syncInfo.time+", mediaSequence: "+t.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var t=e.segments[0],n=t.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[t.timeline]=-n}},n.saveSegmentTimingInfo=function(e){var t=e.segmentInfo,n=e.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(t,t.timingInfo,n),r=t.segment;i&&(this.saveDiscontinuitySyncInfo_(t),t.playlist.syncInfo||(t.playlist.syncInfo={mediaSequence:t.playlist.mediaSequence+t.mediaIndex,time:r.start}));var a=r.dateTimeObject;r.discontinuity&&n&&a&&(this.timelineToDatetimeMappings[r.timeline]=-a.getTime()/1e3)},n.timestampOffsetForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].time},n.mappingForTimeline=function(e){return void 0===this.timelines[e]?null:this.timelines[e].mapping},n.calculateSegmentTimeMapping_=function(e,t,n){var i,r,a=e.segment,o=e.part,s=this.timelines[e.timeline];if("number"==typeof e.timestampOffset)s={time:e.startOfSegment,mapping:e.startOfSegment-t.start},n&&(this.timelines[e.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": [time: "+s.time+"] [mapping: "+s.mapping+"]")),i=e.startOfSegment,r=t.end+s.mapping;else{if(!s)return!1;i=t.start+s.mapping,r=t.end+s.mapping}return o&&(o.start=i,o.end=r),(!a.start||i<a.start)&&(a.start=i),a.end=r,!0},n.saveDiscontinuitySyncInfo_=function(e){var t=e.playlist,n=e.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(t.discontinuityStarts&&t.discontinuityStarts.length)for(var i=0;i<t.discontinuityStarts.length;i++){var r=t.discontinuityStarts[i],a=t.discontinuitySequence+i+1,o=r-e.mediaIndex,s=Math.abs(o);if(!this.discontinuities[a]||this.discontinuities[a].accuracy>s){var d;d=o<0?n.start-Ix({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex,endIndex:r}):n.end+Ix({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:e.mediaIndex+1,endIndex:r}),this.discontinuities[a]={time:d,accuracy:s}}}},n.dispose=function(){this.trigger("dispose"),this.off()},t}(nx.EventTarget),xD=function(e){function t(){var t;return(t=e.call(this)||this).pendingTimelineChanges_={},t.lastTimelineChanges_={},t}Uh(t,e);var n=t.prototype;return n.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(e){var t=e.type,n=e.from,i=e.to;return"number"==typeof n&&"number"==typeof i&&(this.pendingTimelineChanges_[t]={type:t,from:n,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[t]},n.lastTimelineChange=function(e){var t=e.type,n=e.from,i=e.to;return"number"==typeof n&&"number"==typeof i&&(this.lastTimelineChanges_[t]={type:t,from:n,to:i},delete this.pendingTimelineChanges_[t],this.trigger("timelinechange")),this.lastTimelineChanges_[t]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(nx.EventTarget),OD=_O(TO((function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{};function t(e,t,n){return e(n={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&n.path)}},n.exports),n.exports}var i=t((function(e){function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e},e.exports.default=e.exports,e.exports.__esModule=!0})),r=t((function(e){function t(n,i){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(n,i)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),a=t((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,r(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),o=function(){function e(){this.listeners={}}var t=e.prototype;return t.on=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)},t.off=function(e,t){if(!this.listeners[e])return!1;var n=this.listeners[e].indexOf(t);return this.listeners[e]=this.listeners[e].slice(0),this.listeners[e].splice(n,1),n>-1},t.trigger=function(e){var t=this.listeners[e];if(t)if(2===arguments.length)for(var n=t.length,i=0;i<n;++i)t[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;++o)t[o].apply(this,r)},t.dispose=function(){this.listeners={}},t.pipe=function(e){this.on("data",(function(t){e.push(t)}))},e}(),s=null,d=function(){function e(e){var t,n,i;s||(s=function(){var e,t,n,i,r,a,o,s,d=[[[],[],[],[],[]],[[],[],[],[],[]]],l=d[0],u=d[1],c=l[4],p=u[4],h=[],f=[];for(e=0;e<256;e++)f[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=n=0;!c[t];t^=i||1,n=f[n]||1)for(a=(a=n^n<<1^n<<2^n<<3^n<<4)>>8^255&a^99,c[t]=a,p[a]=t,s=16843009*h[r=h[i=h[t]]]^65537*r^257*i^16843008*t,o=257*h[a]^16843008*a,e=0;e<4;e++)l[e][t]=o=o<<24^o>>>8,u[e][a]=s=s<<24^s>>>8;for(e=0;e<5;e++)l[e]=l[e].slice(0),u[e]=u[e].slice(0);return d}()),this._tables=[[s[0][0].slice(),s[0][1].slice(),s[0][2].slice(),s[0][3].slice(),s[0][4].slice()],[s[1][0].slice(),s[1][1].slice(),s[1][2].slice(),s[1][3].slice(),s[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],o=e.length,d=1;if(4!==o&&6!==o&&8!==o)throw new Error("Invalid aes key size");var l=e.slice(0),u=[];for(this._key=[l,u],t=o;t<4*o+28;t++)i=l[t-1],(t%o==0||8===o&&t%o==4)&&(i=r[i>>>24]<<24^r[i>>16&255]<<16^r[i>>8&255]<<8^r[255&i],t%o==0&&(i=i<<8^i>>>24^d<<24,d=d<<1^283*(d>>7))),l[t]=l[t-o]^i;for(n=0;t;n++,t--)i=l[3&n?t:t-4],u[n]=t<=4||n<4?i:a[0][r[i>>>24]]^a[1][r[i>>16&255]]^a[2][r[i>>8&255]]^a[3][r[255&i]]}return e.prototype.decrypt=function(e,t,n,i,r,a){var o,s,d,l,u=this._key[1],c=e^u[0],p=i^u[1],h=n^u[2],f=t^u[3],g=u.length/4-2,m=4,v=this._tables[1],y=v[0],b=v[1],_=v[2],T=v[3],w=v[4];for(l=0;l<g;l++)o=y[c>>>24]^b[p>>16&255]^_[h>>8&255]^T[255&f]^u[m],s=y[p>>>24]^b[h>>16&255]^_[f>>8&255]^T[255&c]^u[m+1],d=y[h>>>24]^b[f>>16&255]^_[c>>8&255]^T[255&p]^u[m+2],f=y[f>>>24]^b[c>>16&255]^_[p>>8&255]^T[255&h]^u[m+3],m+=4,c=o,p=s,h=d;for(l=0;l<4;l++)r[(3&-l)+a]=w[c>>>24]<<24^w[p>>16&255]<<16^w[h>>8&255]<<8^w[255&f]^u[m++],o=c,c=p,p=h,h=f,f=o},e}(),l=function(e){function t(){var t;return(t=e.call(this,o)||this).jobs=[],t.delay=1,t.timeout_=null,t}a(t,e);var n=t.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},t}(o),u=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},c=function(){function e(t,n,i,r){var a=e.STEP,o=new Int32Array(t.buffer),s=new Uint8Array(t.byteLength),d=0;for(this.asyncStream_=new l,this.asyncStream_.push(this.decryptChunk_(o.subarray(d,d+a),n,i,s)),d=a;d<o.length;d+=a)i=new Uint32Array([u(o[d-4]),u(o[d-3]),u(o[d-2]),u(o[d-1])]),this.asyncStream_.push(this.decryptChunk_(o.subarray(d,d+a),n,i,s));this.asyncStream_.push((function(){var e;r(null,(e=s).subarray(0,e.byteLength-e[e.byteLength-1]))}))}return e.prototype.decryptChunk_=function(e,t,n,i){return function(){var r=function(e,t,n){var i,r,a,o,s,l,c,p,h,f=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),g=new d(Array.prototype.slice.call(t)),m=new Uint8Array(e.byteLength),v=new Int32Array(m.buffer);for(i=n[0],r=n[1],a=n[2],o=n[3],h=0;h<f.length;h+=4)s=u(f[h]),l=u(f[h+1]),c=u(f[h+2]),p=u(f[h+3]),g.decrypt(s,l,c,p,v,h),v[h]=u(v[h]^i),v[h+1]=u(v[h+1]^r),v[h+2]=u(v[h+2]^a),v[h+3]=u(v[h+3]^o),i=s,r=l,a=c,o=p;return m}(e,t,n);i.set(r,e.byteOffset)}},i(e,null,[{key:"STEP",get:function(){return 32e3}}]),e}(),p=("undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{}).BigInt||Number;p("0x1"),p("0x100"),p("0x10000"),p("0x1000000"),p("0x100000000"),p("0x10000000000"),p("0x1000000000000"),p("0x100000000000000"),p("0x10000000000000000");self.onmessage=function(e){var t=e.data,n=new Uint8Array(t.encrypted.bytes,t.encrypted.byteOffset,t.encrypted.byteLength),i=new Uint32Array(t.key.bytes,t.key.byteOffset,t.key.byteLength/4),r=new Uint32Array(t.iv.bytes,t.iv.byteOffset,t.iv.byteLength/4);new c(n,i,r,(function(e,n){var i,r;self.postMessage((i={source:t.source,decrypted:n},r={},Object.keys(i).forEach((function(e){var t=i[e];!function(e){return"function"===ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer}(t)?r[e]=t:r[e]={bytes:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}})),r),[n.buffer])}))}}))),DD=bO(OD),RD=function(e){var t=e.default?"main":"alternative";return e.characteristics&&e.characteristics.indexOf("public.accessibility.describes-video")>=0&&(t="main-desc"),t},LD=function(e,t){e.abort(),e.pause(),t&&t.activePlaylistLoader&&(t.activePlaylistLoader.pause(),t.activePlaylistLoader=null)},MD=function(e,t){t.activePlaylistLoader=e,e.load()},UD={AUDIO:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e],r=t.blacklistCurrentPlaylist;LD(n,i);var a=i.activeTrack(),o=i.activeGroup(),s=(o.filter((function(e){return e.default}))[0]||o[0]).id,d=i.tracks[s];if(a!==d){for(var l in nx.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[l].enabled=i.tracks[l]===d;i.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(e,t){return function(){var n=t.segmentLoaders[e],i=t.mediaTypes[e];nx.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),LD(n,i);var r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}}},jD={AUDIO:function(e,t,n){if(t){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",UD[e](e,n))}},SUBTITLES:function(e,t,n){var i=n.tech,r=n.requestOptions,a=n.segmentLoaders[e],o=n.mediaTypes[e];t.on("loadedmetadata",(function(){var e=t.media();a.playlist(e,r),a.track(o.activeTrack()),(!i.paused()||e.endList&&"none"!==i.preload())&&a.load()})),t.on("loadedplaylist",(function(){a.playlist(t.media(),r),i.paused()||a.load()})),t.on("error",UD[e](e,n))}},ND={AUDIO:function(e,t){var n=t.vhs,i=t.sourceType,r=t.segmentLoaders[e],a=t.requestOptions,o=t.master.mediaGroups,s=t.mediaTypes[e],d=s.groups,l=s.tracks,u=s.logger_,c=t.masterPlaylistLoader,p=Lx(c.master);for(var h in o[e]&&0!==Object.keys(o[e]).length||(o[e]={main:{default:{default:!0}}},p&&(o[e].main.default.playlists=c.master.playlists)),o[e])for(var f in d[h]||(d[h]=[]),o[e][h]){var g=o[e][h][f],m=void 0;if(p?(u("AUDIO group '"+h+"' label '"+f+"' is a master playlist"),g.isMasterPlaylist=!0,m=null):m="vhs-json"===i&&g.playlists?new Xx(g.playlists[0],n,a):g.resolvedUri?new Xx(g.resolvedUri,n,a):g.playlists&&"dash"===i?new mO(g.playlists[0],n,a,c):null,g=nx.mergeOptions({id:f,playlistLoader:m},g),jD[e](e,g.playlistLoader,t),d[h].push(g),void 0===l[f]){var v=new nx.AudioTrack({id:f,kind:RD(g),enabled:!1,language:g.language,default:g.default,label:f});l[f]=v}}r.on("error",UD[e](e,t))},SUBTITLES:function(e,t){var n=t.tech,i=t.vhs,r=t.sourceType,a=t.segmentLoaders[e],o=t.requestOptions,s=t.master.mediaGroups,d=t.mediaTypes[e],l=d.groups,u=d.tracks,c=t.masterPlaylistLoader;for(var p in s[e])for(var h in l[p]||(l[p]=[]),s[e][p])if(!s[e][p][h].forced){var f=s[e][p][h],g=void 0;if("hls"===r)g=new Xx(f.resolvedUri,i,o);else if("dash"===r){if(!f.playlists.filter((function(e){return e.excludeUntil!==1/0})).length)return;g=new mO(f.playlists[0],i,o,c)}else"vhs-json"===r&&(g=new Xx(f.playlists?f.playlists[0]:f.resolvedUri,i,o));if(f=nx.mergeOptions({id:h,playlistLoader:g},f),jD[e](e,f.playlistLoader,t),l[p].push(f),void 0===u[h]){var m=n.addRemoteTextTrack({id:h,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:h},!1).track;u[h]=m}}a.on("error",UD[e](e,t))},"CLOSED-CAPTIONS":function(e,t){var n=t.tech,i=t.master.mediaGroups,r=t.mediaTypes[e],a=r.groups,o=r.tracks;for(var s in i[e])for(var d in a[s]||(a[s]=[]),i[e][s]){var l=i[e][s][d];if(/^(?:CC|SERVICE)/.test(l.instreamId)){var u=n.options_.vhs&&n.options_.vhs.captionServices||{},c={label:d,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(u[c.instreamId]&&(c=nx.mergeOptions(c,u[c.instreamId])),void 0===c.default&&delete c.default,a[s].push(nx.mergeOptions({id:d},l)),void 0===o[d]){var p=n.addRemoteTextTrack({id:c.instreamId,kind:"captions",default:c.default,language:c.language,label:c.label},!1).track;o[d]=p}}}}},BD=function e(t,n){for(var i=0;i<t.length;i++){if(Dx(n,t[i]))return!0;if(t[i].playlists&&e(t[i].playlists,n))return!0}return!1},FD={AUDIO:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(e,t){return function(){var n=t.mediaTypes[e].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},qD=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],VD=function(e){return this.audioSegmentLoader_[e]+this.mainSegmentLoader_[e]},HD=function(e){function t(t){var n;n=e.call(this)||this;var i=t.src,r=t.handleManifestRedirects,a=t.withCredentials,o=t.tech,s=t.bandwidth,d=t.externVhs,l=t.useCueTags,u=t.blacklistDuration,c=t.enableLowInitialPlaylist,p=t.sourceType,h=t.cacheEncryptionKeys,f=t.experimentalBufferBasedABR,g=t.experimentalLeastPixelDiffSelector,m=t.captionServices;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var v=t.maxPlaylistRetries;null==v&&(v=1/0),oD=d,n.experimentalBufferBasedABR=Boolean(f),n.experimentalLeastPixelDiffSelector=Boolean(g),n.withCredentials=a,n.tech_=o,n.vhs_=o.vhs,n.sourceType_=p,n.useCueTags_=l,n.blacklistDuration=u,n.maxPlaylistRetries=v,n.enableLowInitialPlaylist=c,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:a,handleManifestRedirects:r,maxPlaylistRetries:v,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=function(){var e={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){e[t]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:aD,activeTrack:aD,getActiveGroup:aD,onGroupChanged:aD,onTrackChanged:aD,lastTrack_:null,logger_:sx("MediaGroups["+t+"]")}})),e}(),n.mediaSource=new(Ah().MediaSource),n.handleDurationChange_=n.handleDurationChange_.bind(Lh(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(Lh(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(Lh(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=nx.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new PD(t),n.segmentMetadataTrack_=o.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new DD,n.sourceUpdater_=new SD(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new xD;var y={vhs:n.vhs_,parse708captions:t.parse708captions,useDtsForTimestampOffset:t.useDtsForTimestampOffset,captionServices:m,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:s,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:h,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:t.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new mO(i,n.vhs_,n.requestOptions_):new Xx(i,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new rD(nx.mergeOptions(y,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),t),n.audioSegmentLoader_=new rD(nx.mergeOptions(y,{loaderType:"audio"}),t),n.subtitleSegmentLoader_=new CD(nx.mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),t),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),qD.forEach((function(e){n[e+"_"]=VD.bind(Lh(n),e)})),n.logger_=sx("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var b="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(b,(function(){var e=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-e,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}Uh(t,e);var n=t.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),t=this.audioAppendsToLoadedData_();return-1===e||-1===t?-1:e+t},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var e=this.selectPlaylist();e&&this.shouldSwitchToMedia_(e)&&this.switchMedia_(e,"abr")},n.switchMedia_=function(e,t,n){var i=this.media(),r=i&&(i.id||i.uri),a=e.id||e.uri;r&&r!==a&&(this.logger_("switch media "+r+" -> "+a+" from "+t),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+t})),this.masterPlaylistLoader_.media(e,n)},n.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=Ah().setInterval((function(){return e.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(Ah().clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var e=this.master(),t=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return t;var n,i=e.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var a=i.main||r.length&&i[r[0]];for(var o in a)if(a[o].default){n={label:o};break}}if(!n)return t;var s=[];for(var d in i)if(i[d][n.label]){var l=i[d][n.label];if(l.playlists&&l.playlists.length)s.push.apply(s,l.playlists);else if(l.uri)s.push(l);else if(e.playlists.length)for(var u=0;u<e.playlists.length;u++){var c=e.playlists[u];c.attributes&&c.attributes.AUDIO&&c.attributes.AUDIO===d&&s.push(c)}}return s.length?s:t},n.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ox(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,t.endList&&"none"!==e.tech_.preload()&&(e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load()),function(e){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(t){ND[t](t,e)}));var t=e.mediaTypes,n=e.masterPlaylistLoader,i=e.tech,r=e.vhs,a=e.segmentLoaders,o=a.AUDIO,s=a.main;["AUDIO","SUBTITLES"].forEach((function(n){t[n].activeGroup=function(e,t){return function(n){var i=t.masterPlaylistLoader,r=t.mediaTypes[e].groups,a=i.media();if(!a)return null;var o=null;a.attributes[e]&&(o=r[a.attributes[e]]);var s=Object.keys(r);if(!o)if("AUDIO"===e&&s.length>1&&Lx(t.master))for(var d=0;d<s.length;d++){var l=r[s[d]];if(BD(l,a)){o=l;break}}else r.main?o=r.main:1===s.length&&(o=r[s[0]]);return void 0===n?o:null!==n&&o&&o.filter((function(e){return e.id===n.id}))[0]||null}}(n,e),t[n].activeTrack=FD[n](n,e),t[n].onGroupChanged=function(e,t){return function(){var n=t.segmentLoaders,i=n[e],r=n.main,a=t.mediaTypes[e],o=a.activeTrack(),s=a.getActiveGroup(),d=a.activePlaylistLoader,l=a.lastGroup_;s&&l&&s.id===l.id||(a.lastGroup_=s,a.lastTrack_=o,LD(i,a),s&&!s.isMasterPlaylist&&(s.playlistLoader?(i.resyncLoader(),MD(s.playlistLoader,a)):d&&r.resetEverything()))}}(n,e),t[n].onGroupChanging=function(e,t){return function(){var n=t.segmentLoaders[e];t.mediaTypes[e].lastGroup_=null,n.abort(),n.pause()}}(n,e),t[n].onTrackChanged=function(e,t){return function(){var n=t.masterPlaylistLoader,i=t.segmentLoaders,r=i[e],a=i.main,o=t.mediaTypes[e],s=o.activeTrack(),d=o.getActiveGroup(),l=o.activePlaylistLoader,u=o.lastTrack_;if((!u||!s||u.id!==s.id)&&(o.lastGroup_=d,o.lastTrack_=s,LD(r,o),d)){if(d.isMasterPlaylist){if(!s||!u||s.id===u.id)return;var c=t.vhs.masterPlaylistController_,p=c.selectPlaylist();if(c.media()===p)return;return o.logger_("track change. Switching master audio from "+u.id+" to "+s.id),n.pause(),a.resetEverything(),void c.fastQualityChange_(p)}if("AUDIO"===e){if(!d.playlistLoader)return a.setAudio(!0),void a.resetEverything();r.setAudio(!0),a.setAudio(!1)}l!==d.playlistLoader?(r.track&&r.track(s),r.resetEverything(),MD(d.playlistLoader,o)):MD(d.playlistLoader,o)}}}(n,e),t[n].getActiveGroup=function(e,t){var n=t.mediaTypes;return function(){var t=n[e].activeTrack();return t?n[e].activeGroup(t):null}}(n,e)}));var d=t.AUDIO.activeGroup();if(d){var l=(d.filter((function(e){return e.default}))[0]||d[0]).id;t.AUDIO.tracks[l].enabled=!0,t.AUDIO.onGroupChanged(),t.AUDIO.onTrackChanged(),t.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),o.setAudio(!0)):s.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(e){return t[e].onGroupChanging()}))}));var u=function(){t.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};for(var c in i.audioTracks().addEventListener("change",u),i.remoteTextTracks().addEventListener("change",t.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",u),i.remoteTextTracks().removeEventListener("change",t.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),t.AUDIO.tracks)i.audioTracks().addTrack(t.AUDIO.tracks[c])}({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),t),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){e.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var t=e.masterPlaylistLoader_.media();if(!t){var n;if(e.excludeUnsupportedVariants_(),e.enableLowInitialPlaylist&&(n=e.selectInitialPlaylist()),n||(n=e.selectPlaylist()),!n||!e.shouldSwitchToMedia_(n))return;if(e.initialMedia_=n,e.switchMedia_(e.initialMedia_,"initial"),"vhs-json"!==e.sourceType_||!e.initialMedia_.segments)return;t=e.initialMedia_}e.handleUpdatedMediaPlaylist(t)})),this.masterPlaylistLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var t=e.masterPlaylistLoader_.media(),n=1.5*t.targetDuration*1e3;Ox(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=n,e.mainSegmentLoader_.playlist(t,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var t=e.masterPlaylistLoader_.media();"playlist-unchanged"!==t.lastExcludeReason_&&e.stuckAtPlaylistEnd_(t)&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(e,t){var n=e.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var a in n.AUDIO)for(var o in n.AUDIO[a])n.AUDIO[a][o].uri||(i=!1);i&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),oD.Playlist.isAes(t)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(e){var t=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,n=this.tech_.currentTime(),i=this.bufferLowWaterLine(),r=this.bufferHighWaterLine();return function(e){var t=e.currentPlaylist,n=e.buffered,i=e.currentTime,r=e.nextPlaylist,a=e.bufferLowWaterLine,o=e.bufferHighWaterLine,s=e.duration,d=e.experimentalBufferBasedABR,l=e.log;if(!r)return nx.log.warn("We received no playlist to switch to. Please check your stream."),!1;var u="allowing switch "+(t&&t.id||"null")+" -> "+r.id;if(!t)return l(u+" as current playlist is not set"),!0;if(r.id===t.id)return!1;var c=Boolean(cx(n,i).length);if(!t.endList)return c||"number"!=typeof t.partTargetDuration?(l(u+" as current playlist is live"),!0):(l("not "+u+" as current playlist is live llhls, but currentTime isn't in buffered."),!1);var p=mx(n,i),h=d?vO.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:vO.MAX_BUFFER_LOW_WATER_LINE;if(s<h)return l(u+" as duration < max low water line ("+s+" < "+h+")"),!0;var f=r.attributes.BANDWIDTH,g=t.attributes.BANDWIDTH;if(f<g&&(!d||p<o)){var m=u+" as next bandwidth < current bandwidth ("+f+" < "+g+")";return d&&(m+=" and forwardBuffer < bufferHighWaterLine ("+p+" < "+o+")"),l(m),!0}if((!d||f>g)&&p>=a){var v=u+" as forwardBuffer >= bufferLowWaterLine ("+p+" >= "+a+")";return d&&(v+=" and next bandwidth > current bandwidth ("+f+" > "+g+")"),l(v),!0}return l("not "+u+" as no switching criteria met"),!1}({buffered:this.tech_.buffered(),currentTime:n,currentPlaylist:t,nextPlaylist:e,bufferLowWaterLine:i,bufferHighWaterLine:r,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var e=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var t=e.selectPlaylist();e.shouldSwitchToMedia_(t)&&e.switchMedia_(t,"bandwidthupdate"),e.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){e.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){e.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){e.logger_("main segment loader ended"),e.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(t){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var t=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var t=e.getCodecsOrExclude_();t&&e.sourceUpdater_.addOrChangeSourceBuffers(t)};this.mainSegmentLoader_.on("trackinfo",t),this.audioSegmentLoader_.on("trackinfo",t),this.mainSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(e){void 0===e&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},n.fastQualityChange_=function(e){var t=this;void 0===e&&(e=this.selectPlaylist()),e!==this.masterPlaylistLoader_.media()?(this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){nx.browser.IE_VERSION||nx.browser.IS_EDGE?t.tech_.setCurrentTime(t.tech_.currentTime()+.04):t.tech_.setCurrentTime(t.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0)?this.tech_.setCurrentTime(e.end(e.length-1)):void 0}},n.setupFirstPlay=function(){var e=this,t=this.masterPlaylistLoader_.media();if(!t||this.tech_.paused()||this.hasPlayed_)return!1;if(!t.endList){var n=this.seekable();if(!n.length)return!1;if(nx.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){e.trigger("firstplay"),e.tech_.setCurrentTime(n.end(0)),e.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();void 0!==e&&"function"==typeof e.then&&e.then(null,(function(e){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(e&&e.length){var t=this.duration();e[e.length-1].endTime=isNaN(t)||Math.abs(t)===1/0?Number.MAX_VALUE:t}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var t=this.mainSegmentLoader_.getCurrentMediaInfo_();e=!t||t.hasVideo?e&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(e){if(!this.seekable().length)return!1;var t=this.syncController_.getExpiredTime(e,this.duration());if(null===t)return!1;var n=oD.Playlist.playlistEnd(e,t),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=lx;var a=r.end(r.length-1);return a-i<=lx&&n-a<=lx},n.blacklistCurrentPlaylist=function(e,t){void 0===e&&(e={});var n=e.playlist||this.masterPlaylistLoader_.media();if(t=t||e.blacklistDuration||this.blacklistDuration,!n)return this.error=e,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var i,r=this.masterPlaylistLoader_.master.playlists,a=r.filter(Px),o=1===a.length&&a[0]===n;if(1===r.length&&t!==1/0)return nx.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(o);if(o){var s=!1;r.forEach((function(e){if(e!==n){var t=e.excludeUntil;void 0!==t&&t!==1/0&&(s=!0,delete e.excludeUntil)}})),s&&(nx.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*t,n.excludeUntil=i,e.reason&&(n.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var d=this.selectPlaylist();if(!d)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=e.internal?this.logger_:nx.log.warn,u=e.message?" "+e.message:"";l((e.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+u+" Switching to playlist "+d.id+"."),d.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),d.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var c=d.targetDuration/2*1e3||5e3,p="number"==typeof d.lastRequest&&Date.now()-d.lastRequest<=c;return this.switchMedia_(d,"exclude",o||p)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(e,t){var n=this,i=[],r="all"===e;(r||"main"===e)&&i.push(this.masterPlaylistLoader_);var a=[];(r||"audio"===e)&&a.push("AUDIO"),(r||"subtitle"===e)&&(a.push("CLOSED-CAPTIONS"),a.push("SUBTITLES")),a.forEach((function(e){var t=n.mediaTypes_[e]&&n.mediaTypes_[e].activePlaylistLoader;t&&i.push(t)})),["main","audio","subtitle"].forEach((function(t){var r=n[t+"SegmentLoader_"];!r||e!==t&&"all"!==e||i.push(r)})),i.forEach((function(e){return t.forEach((function(t){"function"==typeof e[t]&&e[t]()}))}))},n.setCurrentTime=function(e){var t=cx(this.tech_.buffered(),e);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?t&&t.length?e:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:oD.Playlist.duration(e):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var t=this.masterPlaylistLoader_.media();if(t){var n=this.syncController_.getExpiredTime(t,this.duration());if(null!==n){var i=this.masterPlaylistLoader_.master,r=oD.Playlist.seekable(t,n,oD.Playlist.liveEdgeDelay(i,t));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(t=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(t,this.duration())))return;if(0===(e=oD.Playlist.seekable(t,n,oD.Playlist.liveEdgeDelay(i,t))).length)return}var a,o;this.seekable_&&this.seekable_.length&&(a=this.seekable_.end(0),o=this.seekable_.start(0)),e?e.start(0)>r.end(0)||r.start(0)>e.end(0)?this.seekable_=r:this.seekable_=nx.createTimeRanges([[e.start(0)>r.start(0)?e.start(0):r.start(0),e.end(0)<r.end(0)?e.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===a&&this.seekable_.start(0)===o||(this.logger_("seekable updated ["+hx(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,e),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(e){var t=this.seekable();if(!t.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<t.end(t.length-1))&&this.sourceUpdater_.setDuration(t.end(t.length-1))}else{var n=this.tech_.buffered(),i=oD.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}},n.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(t){var n=e.mediaTypes_[t].groups;for(var i in n)n[i].forEach((function(e){e.playlistLoader&&e.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,t=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!e||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!t||!n)},n.getCodecsOrExclude_=function(){var e=this,t={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};t.video=t.main;var n=HO(this.master(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(t.main.hasVideo&&(i.video=n.video||t.main.videoCodec||wf),t.main.isMuxed&&(i.video+=","+(n.audio||t.main.audioCodec||Tf)),(t.main.hasAudio&&!t.main.isMuxed||t.audio.hasAudio||r)&&(i.audio=n.audio||t.main.audioCodec||t.audio.audioCodec||Tf,t.audio.isFmp4=t.main.hasAudio&&!t.main.isMuxed?t.main.isFmp4:t.audio.isFmp4),i.audio||i.video){var a,o={};if(["video","audio"].forEach((function(e){if(i.hasOwnProperty(e)&&(r=t[e].isFmp4,s=i[e],!(r?bf(s):_f(s)))){var n=t[e].isFmp4?"browser":"muxer";o[n]=o[n]||[],o[n].push(i[e]),"audio"===e&&(a=n)}var r,s})),r&&a&&this.media().attributes.AUDIO){var s=this.media().attributes.AUDIO;this.master().playlists.forEach((function(t){(t.attributes&&t.attributes.AUDIO)===s&&t!==e.media()&&(t.excludeUntil=1/0)})),this.logger_("excluding audio group "+s+" as "+a+' does not support codec(s): "'+i.audio+'"')}if(!Object.keys(o).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var d=[];if(["video","audio"].forEach((function(t){var n=(gf(e.sourceUpdater_.codecs[t]||"")[0]||{}).type,r=(gf(i[t]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&d.push('"'+e.sourceUpdater_.codecs[t]+'" -> "'+i[t]+'"')})),d.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+d.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}var l=Object.keys(o).reduce((function(e,t){return e&&(e+=", "),e+(t+' does not support codec(s): "')+o[t].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:l,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var t=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(t)}}},n.excludeUnsupportedVariants_=function(){var e=this,t=this.master().playlists,n=[];Object.keys(t).forEach((function(i){var r=t[i];if(-1===n.indexOf(r.id)){n.push(r.id);var a=HO(e.master,r),o=[];!a.audio||_f(a.audio)||bf(a.audio)||o.push("audio codec "+a.audio),!a.video||_f(a.video)||bf(a.video)||o.push("video codec "+a.video),a.text&&"stpp.ttml.im1t"===a.text&&o.push("text codec "+a.text),o.length&&(r.excludeUntil=1/0,e.logger_("excluding "+r.id+" for unsupported: "+o.join(", ")))}}))},n.excludeIncompatibleVariants_=function(e){var t=this,n=[],i=this.master().playlists,r=qO(gf(e)),a=VO(r),o=r.video&&gf(r.video)[0]||null,s=r.audio&&gf(r.audio)[0]||null;Object.keys(i).forEach((function(e){var r=i[e];if(-1===n.indexOf(r.id)&&r.excludeUntil!==1/0){n.push(r.id);var d=[],l=HO(t.masterPlaylistLoader_.master,r),u=VO(l);if(l.audio||l.video){if(u!==a&&d.push('codec count "'+u+'" !== "'+a+'"'),!t.sourceUpdater_.canChangeType()){var c=l.video&&gf(l.video)[0]||null,p=l.audio&&gf(l.audio)[0]||null;c&&o&&c.type.toLowerCase()!==o.type.toLowerCase()&&d.push('video codec "'+c.type+'" !== "'+o.type+'"'),p&&s&&p.type.toLowerCase()!==s.type.toLowerCase()&&d.push('audio codec "'+p.type+'" !== "'+s.type+'"')}d.length&&(r.excludeUntil=1/0,t.logger_("blacklisting "+r.id+": "+d.join(" && ")))}}}))},n.updateAdCues_=function(e){var t=0,n=this.seekable();n.length&&(t=n.start(0)),function(e,t,n){if(void 0===n&&(n=0),e.segments)for(var i,r=n,a=0;a<e.segments.length;a++){var o=e.segments[a];if(i||(i=ED(t,r+o.duration/2)),i){if("cueIn"in o){i.endTime=r,i.adEndTime=r,r+=o.duration,i=null;continue}if(r<i.endTime){r+=o.duration;continue}i.endTime+=o.duration}else if("cueOut"in o&&((i=new(Ah().VTTCue)(r,r+o.duration,o.cueOut)).adStartTime=r,i.adEndTime=r+parseFloat(o.cueOut),t.addCue(i)),"cueOutCont"in o){var s=o.cueOutCont.split("/").map(parseFloat),d=s[0],l=s[1];(i=new(Ah().VTTCue)(r,r+o.duration,"")).adStartTime=r-d,i.adEndTime=i.adStartTime+l,t.addCue(i)}r+=o.duration}}(e,this.cueTagsTrack_,t)},n.goalBufferLength=function(){var e=this.tech_.currentTime(),t=vO.GOAL_BUFFER_LENGTH,n=vO.GOAL_BUFFER_LENGTH_RATE,i=Math.max(t,vO.MAX_GOAL_BUFFER_LENGTH);return Math.min(t+e*n,i)},n.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),t=vO.BUFFER_LOW_WATER_LINE,n=vO.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(t,vO.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(t,vO.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(t+e*n,this.experimentalBufferBasedABR?r:i)},n.bufferHighWaterLine=function(){return vO.BUFFER_HIGH_WATER_LINE},t}(nx.EventTarget),zD=function(e,t,n){var i,r,a,o=e.masterPlaylistController_,s=o[(e.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(o);if(t.attributes){var d=t.attributes.RESOLUTION;this.width=d&&d.width,this.height=d&&d.height,this.bandwidth=t.attributes.BANDWIDTH}this.codecs=HO(o.master(),t),this.playlist=t,this.id=n,this.enabled=(i=e.playlists,r=t.id,a=s,function(e){var t=i.master.playlists[r],n=Ax(t),o=Px(t);return void 0===e?o:(e?delete t.disabled:t.disabled=!0,e===o||n||(a(),e?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),e)})},WD=["seeking","seeked","pause","playing","error"],$D=function(){function e(e){var t=this;this.masterPlaylistController_=e.masterPlaylistController,this.tech_=e.tech,this.seekable=e.seekable,this.allowSeeksWithinUnsafeLiveWindow=e.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=e.liveRangeSafeTimeDelta,this.media=e.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=sx("PlaybackWatcher"),this.logger_("initialize");var n=function(){return t.monitorCurrentTime_()},i=function(){return t.monitorCurrentTime_()},r=function(){return t.techWaiting_()},a=function(){return t.cancelTimer_()},o=this.masterPlaylistController_,s=["main","subtitle","audio"],d={};s.forEach((function(e){d[e]={reset:function(){return t.resetSegmentDownloads_(e)},updateend:function(){return t.checkSegmentDownloads_(e)}},o[e+"SegmentLoader_"].on("appendsdone",d[e].updateend),o[e+"SegmentLoader_"].on("playlistupdate",d[e].reset),t.tech_.on(["seeked","seeking"],d[e].reset)}));var l=function(e){["main","audio"].forEach((function(n){o[n+"SegmentLoader_"][e]("appended",t.seekingAppendCheck_)}))};this.seekingAppendCheck_=function(){t.fixesBadSeeks_()&&(t.consecutiveUpdates=0,t.lastRecordedTime=t.tech_.currentTime(),l("off"))},this.clearSeekingAppendCheck_=function(){return l("off")},this.watchForBadSeeking_=function(){t.clearSeekingAppendCheck_(),l("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",r),this.tech_.on(WD,a),this.tech_.on("canplay",i),this.tech_.one("play",n),this.dispose=function(){t.clearSeekingAppendCheck_(),t.logger_("dispose"),t.tech_.off("waiting",r),t.tech_.off(WD,a),t.tech_.off("canplay",i),t.tech_.off("play",n),t.tech_.off("seeking",t.watchForBadSeeking_),t.tech_.off("seeked",t.clearSeekingAppendCheck_),s.forEach((function(e){o[e+"SegmentLoader_"].off("appendsdone",d[e].updateend),o[e+"SegmentLoader_"].off("playlistupdate",d[e].reset),t.tech_.off(["seeked","seeking"],d[e].reset)})),t.checkCurrentTimeTimeout_&&Ah().clearTimeout(t.checkCurrentTimeTimeout_),t.cancelTimer_()}}var t=e.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&Ah().clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=Ah().setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(e){var t=this.masterPlaylistController_[e+"SegmentLoader_"];this[e+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+e+" loader"),this[e+"StalledDownloads_"]=0,this[e+"Buffered_"]=t.buffered_()},t.checkSegmentDownloads_=function(e){var t=this.masterPlaylistController_,n=t[e+"SegmentLoader_"],i=n.buffered_(),r=function(e,t){if(e===t)return!1;if(!e&&t||!t&&e)return!0;if(e.length!==t.length)return!0;for(var n=0;n<e.length;n++)if(e.start(n)!==t.start(n)||e.end(n)!==t.end(n))return!0;return!1}(this[e+"Buffered_"],i);this[e+"Buffered_"]=i,r?this.resetSegmentDownloads_(e):(this[e+"StalledDownloads_"]++,this.logger_("found #"+this[e+"StalledDownloads_"]+" "+e+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:fx(i)}),this[e+"StalledDownloads_"]<10||(this.logger_(e+" loader stalled download exclusion"),this.resetSegmentDownloads_(e),this.tech_.trigger({type:"usage",name:"vhs-"+e+"-download-exclusion"}),"subtitle"!==e&&t.blacklistCurrentPlaylist({message:"Excessive "+e+" segment downloading detected."},1/0)))},t.checkCurrentTime_=function(){if(!this.tech_.paused()&&!this.tech_.seeking()){var e=this.tech_.currentTime(),t=this.tech_.buffered();if(this.lastRecordedTime===e&&(!t.length||e+lx>=t.end(t.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&e===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):e===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=e)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var e,t=this.seekable(),n=this.tech_.currentTime();if(this.afterSeekableWindow_(t,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(e=t.end(t.length-1)),this.beforeSeekableWindow_(t,n)){var i=t.start(0);e=i+(i===t.end(0)?0:lx)}if(void 0!==e)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+hx(t)+". Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0;for(var r=this.masterPlaylistController_.sourceUpdater_,a=this.tech_.buffered(),o=r.audioBuffer?r.audioBuffered():null,s=r.videoBuffer?r.videoBuffered():null,d=this.media(),l=d.partTargetDuration?d.partTargetDuration:2*(d.targetDuration-dx),u=[o,s],c=0;c<u.length;c++)if(u[c]&&mx(u[c],n)<l)return!1;var p=px(a,n);return 0!==p.length&&(e=p.start(0)+lx,this.logger_("Buffered region starts ("+p.start(0)+")  just beyond seek point ("+n+"). Seeking to "+e+"."),this.tech_.setCurrentTime(e),!0)},t.waiting_=function(){if(!this.techWaiting_()){var e=this.tech_.currentTime(),t=this.tech_.buffered(),n=cx(t,e);return n.length&&e+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(e),this.logger_("Stopped at "+e+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},t.techWaiting_=function(){var e=this.seekable(),t=this.tech_.currentTime();if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(e,t)){var n=e.end(e.length-1);return this.logger_("Fell out of live window at time "+t+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:t}))return this.cancelTimer_(),this.tech_.setCurrentTime(t),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var a=px(r,t);if(a.length>0){var o=a.start(0)-t;return this.logger_("Stopped at "+t+", setting timer for "+o+", seeking to "+a.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*o,t),!0}return!1},t.afterSeekableWindow_=function(e,t,n,i){if(void 0===i&&(i=!1),!e.length)return!1;var r=e.end(e.length-1)+lx;return!n.endList&&i&&(r=e.end(e.length-1)+3*n.targetDuration),t>r},t.beforeSeekableWindow_=function(e,t){return!!(e.length&&e.start(0)>0&&t<e.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(e){var t=e.videoBuffered,n=e.audioBuffered,i=e.currentTime;if(t){var r;if(t.length&&n.length){var a=cx(t,i-3),o=cx(t,i),s=cx(n,i);s.length&&!o.length&&a.length&&(r={start:a.end(0),end:s.end(0)})}else px(t,i).length||(r=this.gapFromVideoUnderflow_(t,i));return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+i),!0)}},t.skipTheGap_=function(e){var t=this.tech_.buffered(),n=this.tech_.currentTime(),i=px(t,n);this.cancelTimer_(),0!==i.length&&n===e&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",e,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+dx),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(e,t){for(var n=function(e){if(e.length<2)return nx.createTimeRanges();for(var t=[],n=1;n<e.length;n++){var i=e.end(n-1),r=e.start(n);t.push([i,r])}return nx.createTimeRanges(t)}(e),i=0;i<n.length;i++){var r=n.start(i),a=n.end(i);if(t-r<4&&t-r>2)return{start:r,end:a}}return null},e}(),GD={errorInterval:30,getSource:function(e){return e(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},KD=function e(t,n){var i=0,r=0,a=nx.mergeOptions(GD,n);t.ready((function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var o=function(){r&&t.currentTime(r)},s=function(e){null!=e&&(r=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",o),t.src(e),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},d=function(){return Date.now()-i<1e3*a.errorInterval?(t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void t.trigger({type:"usage",name:"hls-error-reload-canceled"})):a.getSource&&"function"==typeof a.getSource?(i=Date.now(),a.getSource.call(t,s)):void nx.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},l=function e(){t.off("loadedmetadata",o),t.off("error",d),t.off("dispose",e)};t.on("error",d),t.on("dispose",l),t.reloadSourceOnError=function(n){l(),e(t,n)}},XD="2.14.2",ZD={PlaylistLoader:Xx,Playlist:Mx,utils:dO,STANDARD_PLAYLIST_SELECTOR:ZO,INITIAL_PLAYLIST_SELECTOR:function(){var e=this,t=this.playlists.master.playlists.filter(Mx.isEnabled);return GO(t,(function(e,t){return KO(e,t)})),t.filter((function(t){return!!HO(e.playlists.master,t).video}))[0]||null},lastBandwidthSelector:ZO,movingAverageBandwidthSelector:function(e){var t=-1,n=-1;if(e<0||e>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&Ah().devicePixelRatio||1;return t<0&&(t=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(t=e*this.systemBandwidth+(1-e)*t,n=this.systemBandwidth),XO(this.playlists.master,t,parseInt($O(this.tech_.el(),"width"),10)*i,parseInt($O(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:KO,comparePlaylistResolution:function(e,t){var n,i;return e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(n=e.attributes.RESOLUTION.width),n=n||Ah().Number.MAX_VALUE,t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(i=t.attributes.RESOLUTION.width),n===(i=i||Ah().Number.MAX_VALUE)&&e.attributes.BANDWIDTH&&t.attributes.BANDWIDTH?e.attributes.BANDWIDTH-t.attributes.BANDWIDTH:n-i},xhr:Qx()};Object.keys(vO).forEach((function(e){Object.defineProperty(ZD,e,{get:function(){return nx.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),vO[e]},set:function(t){nx.log.warn("using Vhs."+e+" is UNSAFE be sure you know what you are doing"),"number"!=typeof t||t<0?nx.log.warn("value of Vhs."+e+" must be greater than or equal to 0"):vO[e]=t}})}));var YD="videojs-vhs",JD=function(e,t){for(var n=t.media(),i=-1,r=0;r<e.length;r++)if(e[r].id===n.id){i=r;break}e.selectedIndex_=i,e.trigger({selectedIndex:i,type:"change"})};ZD.canPlaySource=function(){return nx.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var QD=function(){if(!Ah().localStorage)return null;var e=Ah().localStorage.getItem(YD);if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};ZD.supportsNativeHls=function(){if(!xh()||!xh().createElement)return!1;var e=xh().createElement("video");return!!nx.getTech("Html5").isSupported()&&["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(t){return/maybe|probably/i.test(e.canPlayType(t))}))}(),ZD.supportsNativeDash=!!(xh()&&xh().createElement&&nx.getTech("Html5").isSupported())&&/maybe|probably/i.test(xh().createElement("video").canPlayType("application/dash+xml")),ZD.supportsTypeNatively=function(e){return"hls"===e?ZD.supportsNativeHls:"dash"===e&&ZD.supportsNativeDash},ZD.isSupported=function(){return nx.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var eR=function(e){function t(t,n,i){var r;if(r=e.call(this,n,nx.mergeOptions(i.hls,i.vhs))||this,i.hls&&Object.keys(i.hls).length&&nx.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),"number"==typeof i.initialBandwidth&&(r.options_.bandwidth=i.initialBandwidth),r.logger_=sx("VhsHandler"),n.options_&&n.options_.playerId){var a=nx(n.options_.playerId);a.hasOwnProperty("hls")||Object.defineProperty(a,"hls",{get:function(){return nx.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),Lh(r)},configurable:!0}),a.hasOwnProperty("vhs")||Object.defineProperty(a,"vhs",{get:function(){return nx.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),Lh(r)},configurable:!0}),a.hasOwnProperty("dash")||Object.defineProperty(a,"dash",{get:function(){return nx.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Lh(r)},configurable:!0}),r.player_=a}if(r.tech_=n,r.source_=t,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(xh(),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(e){var t=xh().fullscreenElement||xh().webkitFullscreenElement||xh().mozFullScreenElement||xh().msFullscreenElement;t&&t.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}Uh(t,e);var n=t.prototype;return n.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=void 0!==this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!=typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!=typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var t=QD();t&&t.bandwidth&&(this.options_.bandwidth=t.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),t&&t.throughput&&(this.options_.throughput=t.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!=typeof this.options_.bandwidth&&(this.options_.bandwidth=vO.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===vO.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(t){void 0!==e.source_[t]&&(e.options_[t]=e.source_[t])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(e,t){var n=this;if(e){var i;this.setOptions_(),this.options_.src=0===(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=ZD,this.options_.sourceType=If(t),this.options_.seekTo=function(e){n.tech_.setCurrentTime(e)},this.options_.smoothQualityChange&&nx.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new HD(this.options_);var r=nx.mergeOptions({liveRangeSafeTimeDelta:lx},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new $D(r),this.masterPlaylistController_.on("error",(function(){var e=nx.players[n.tech_.options_.playerId],t=n.masterPlaylistController_.error;"object"!=typeof t||t.code?"string"==typeof t&&(t={message:t,code:3}):t.code=3,e.error(t)}));var a=this.options_.experimentalBufferBasedABR?ZD.movingAverageBandwidthSelector(.55):ZD.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):a.bind(this),this.masterPlaylistController_.selectInitialPlaylist=ZD.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(e){this.masterPlaylistController_.selectPlaylist=e.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=e,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var e=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,t=Ah().navigator.connection||Ah().navigator.mozConnection||Ah().navigator.webkitConnection,n=1e7;if(this.options_.useNetworkInformationApi&&t){var i=1e3*t.downlink*1e3;e=i>=n&&e>=n?Math.max(e,i):i}return e},set:function(e){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=e,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var e,t=1/(this.bandwidth||1);return e=this.throughput>0?1/this.throughput:0,Math.floor(1/(t+e))},set:function(){nx.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return fx(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return fx(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(e){if(!Ah().localStorage)return!1;var t=QD();t=t?nx.mergeOptions(t,e):e;try{Ah().localStorage.setItem(YD,JSON.stringify(t))}catch(e){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e;(e=n).representations=function(){var t=e.masterPlaylistController_.master(),n=Lx(t)?e.masterPlaylistController_.getAudioTrackPlaylists_():t.playlists;return n?n.filter((function(e){return!Ax(e)})).map((function(t,n){return new zD(e,t,t.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=Ah().URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.createKeySessions_=function(){var e=this,t=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),function(e){var t=e.player,n=e.sourceKeySystems,i=e.audioMedia,r=e.mainPlaylists;if(!t.eme.initializeMediaKeys)return Promise.resolve();var a,o,s=(a=i?r.concat([i]):r,o=Object.keys(n),a.reduce((function(e,t){if(!t.contentProtection)return e;var n=o.reduce((function(e,n){var i=t.contentProtection[n];return i&&i.pssh&&(e[n]={pssh:i.pssh}),e}),{});return Object.keys(n).length&&e.push(n),e}),[])),d=[],l=[];return s.forEach((function(e){l.push(new Promise((function(e,n){t.tech_.one("keysessioncreated",e)}))),d.push(new Promise((function(n,i){t.eme.initializeMediaKeys({keySystems:e},(function(e){e?i(e):n()}))})))})),Promise.race([Promise.all(d),Promise.race(l)])}({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:t&&t.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(t){e.logger_("error while creating EME key session",t),e.player_.error({message:"Failed to initialize media keys for EME",code:3})}))},n.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},n.setupEme_=function(){var e,t,n,i=this,r=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,a=(e={player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:r&&r.media()},t=e.player,!(!(n=function(e,t,n){if(!e)return e;var i={};t&&t.attributes&&t.attributes.CODECS&&(i=qO(gf(t.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r=yf(i.video),a=yf(i.audio),o={};for(var s in e)o[s]={},a&&(o[s].audioContentType=a),r&&(o[s].videoContentType=r),t.contentProtection&&t.contentProtection[s]&&t.contentProtection[s].pssh&&(o[s].pssh=t.contentProtection[s].pssh),"string"==typeof e[s]&&(o[s].url=e[s]);return nx.mergeOptions(e,o)}(e.sourceKeySystems,e.media,e.audioMedia))||(t.currentSource().keySystems=n,n&&!t.eme&&(nx.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),1))));this.player_.tech_.on("keystatuschange",(function(e){"output-restricted"===e.status&&i.masterPlaylistController_.blacklistCurrentPlaylist({playlist:i.masterPlaylistController_.media(),message:"DRM keystatus changed to "+e.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})})),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),11!==nx.browser.IE_VERSION&&a?this.createKeySessions_():this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var e=this,t=nx.players[this.tech_.options_.playerId];t&&t.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=t.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t,n;t=e.qualityLevels_,(n=e).representations().forEach((function(e){t.addQualityLevel(e)})),JD(t,n.playlists)})),this.playlists.on("mediachange",(function(){JD(e.qualityLevels_,e.playlists)})))},t.version=function(){return{"@videojs/http-streaming":XD,"mux.js":"6.0.1","mpd-parser":"0.21.1","m3u8-parser":"4.7.1","aes-decrypter":"3.1.3"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return SD.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&Ah().URL.revokeObjectURL&&(Ah().URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),e.prototype.dispose.call(this)},n.convertToProgramTime=function(e,t){return function(e){var t=e.playlist,n=e.time,i=void 0===n?void 0:n,r=e.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!t||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var a=function(e,t){if(!t||!t.segments||0===t.segments.length)return null;for(var n,i=0,r=0;r<t.segments.length&&!(e<=(i=(n=t.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var a=t.segments[t.segments.length-1];if(a.videoTimingInfo&&a.videoTimingInfo.transmuxedPresentationEnd<e)return null;if(e>i){if(e>i+.25*a.duration)return null;n=a}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(i,t);if(!a)return r({message:"valid programTime was not found"});if("estimate"===a.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:a.estimatedStart});var o={mediaSeconds:i},s=function(e,t){if(!t.dateTimeObject)return null;var n=t.videoTimingInfo.transmuxerPrependedSeconds,i=e-(t.videoTimingInfo.transmuxedPresentationStart+n);return new Date(t.dateTimeObject.getTime()+1e3*i)}(i,a.segment);return s&&(o.programDateTime=s.toISOString()),r(null,o)}({playlist:this.masterPlaylistController_.media(),time:e,callback:t})},n.seekToProgramTime=function(e,t,n,i){return void 0===n&&(n=!0),void 0===i&&(i=2),lO({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:t})},t}(nx.getComponent("Component")),tR={name:"videojs-http-streaming",VERSION:XD,canHandleSource:function(e,t){void 0===t&&(t={});var n=nx.mergeOptions(nx.options,t);return tR.canPlayType(e.type,n)},handleSource:function(e,t,n){void 0===n&&(n={});var i=nx.mergeOptions(nx.options,n);return t.vhs=new eR(e,t,i),nx.hasOwnProperty("hls")||Object.defineProperty(t,"hls",{get:function(){return nx.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),t.vhs},configurable:!0}),t.vhs.xhr=Qx(),t.vhs.src(e.src,e.type),t.vhs},canPlayType:function(e,t){void 0===t&&(t={});var n=nx.mergeOptions(nx.options,t),i=n.vhs,r=(i=void 0===i?{}:i).overrideNative,a=void 0===r?!nx.browser.IS_ANY_SAFARI:r,o=n.hls,s=(o=void 0===o?{}:o).overrideNative,d=void 0!==s&&s,l=If(e);return l&&(!ZD.supportsTypeNatively(l)||d||a)?"maybe":""}};bf("avc1.4d400d,mp4a.40.2")&&nx.getTech("Html5").registerSourceHandler(tR,0),nx.VhsHandler=eR,Object.defineProperty(nx,"HlsHandler",{get:function(){return nx.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),eR},configurable:!0}),nx.VhsSourceHandler=tR,Object.defineProperty(nx,"HlsSourceHandler",{get:function(){return nx.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),tR},configurable:!0}),nx.Vhs=ZD,Object.defineProperty(nx,"Hls",{get:function(){return nx.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),ZD},configurable:!0}),nx.use||(nx.registerComponent("Hls",ZD),nx.registerComponent("Vhs",ZD)),nx.options.vhs=nx.options.vhs||{},nx.options.hls=nx.options.hls||{},nx.getPlugin&&nx.getPlugin("reloadSourceOnError")||(nx.registerPlugin||nx.plugin)("reloadSourceOnError",(function(e){KD(this,e)}));const nR=nx;var iR=function(e,t,n){this.vjsPlayer=e,this.controller=n,this.contentTrackingTimer=null,this.contentComplete=!1,this.updateTimeIntervalHandle=null,this.updateTimeInterval=1e3,this.seekCheckIntervalHandle=null,this.seekCheckInterval=1e3,this.resizeCheckIntervalHandle=null,this.resizeCheckInterval=250,this.seekThreshold=100,this.contentEndedListeners=[],this.contentSource="",this.contentSourceType="",this.contentPlayheadTracker={currentTime:0,previousTime:0,seeking:!1,duration:0},this.vjsPlayerDimensions={width:this.getPlayerWidth(),height:this.getPlayerHeight()},this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this)),this.boundContentEndedListener=this.localContentEndedListener.bind(this),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("readyforpreroll",this.onReadyForPreroll.bind(this)),this.vjsPlayer.on("adtimeout",this.onAdTimeout.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),"onPlay"===this.controller.getSettings().requestMode&&this.vjsPlayer.one("play",this.controller.requestAds.bind(this.controller)),this.vjsPlayer.ads(t)};iR.prototype.setUpPlayerIntervals=function(){this.updateTimeIntervalHandle=setInterval(this.updateCurrentTime.bind(this),this.updateTimeInterval),this.seekCheckIntervalHandle=setInterval(this.checkForSeeking.bind(this),this.seekCheckInterval),this.resizeCheckIntervalHandle=setInterval(this.checkForResize.bind(this),this.resizeCheckInterval)},iR.prototype.updateCurrentTime=function(){this.contentPlayheadTracker.seeking||(this.contentPlayheadTracker.currentTime=this.vjsPlayer.currentTime())},iR.prototype.checkForSeeking=function(){var e=1e3*(this.vjsPlayer.currentTime()-this.contentPlayheadTracker.previousTime);Math.abs(e)>this.seekCheckInterval+this.seekThreshold?this.contentPlayheadTracker.seeking=!0:this.contentPlayheadTracker.seeking=!1,this.contentPlayheadTracker.previousTime=this.vjsPlayer.currentTime()},iR.prototype.checkForResize=function(){var e=this.getPlayerWidth(),t=this.getPlayerHeight();e==this.vjsPlayerDimensions.width&&t==this.vjsPlayerDimensions.height||(this.vjsPlayerDimensions.width=e,this.vjsPlayerDimensions.height=t,this.controller.onPlayerResize(e,t))},iR.prototype.localContentEndedListener=function(){for(var e in this.contentComplete||(this.contentComplete=!0,this.controller.onContentComplete()),this.contentEndedListeners)"function"==typeof this.contentEndedListeners[e]&&this.contentEndedListeners[e]();clearInterval(this.updateTimeIntervalHandle),clearInterval(this.seekCheckIntervalHandle),clearInterval(this.resizeCheckIntervalHandle),this.vjsPlayer.el()&&this.vjsPlayer.one("play",this.setUpPlayerIntervals.bind(this))},iR.prototype.onNoPostroll=function(){this.vjsPlayer.trigger("nopostroll")},iR.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.controller.onPlayerDisposed(),this.contentComplete=!0,this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.adTimeoutTimeout&&clearTimeout(this.vjsPlayer.ads.adTimeoutTimeout);var e=[this.updateTimeIntervalHandle,this.seekCheckIntervalHandle,this.resizeCheckIntervalHandle];for(var t in e)e[t]&&clearInterval(e[t])},iR.prototype.onReadyForPreroll=function(){this.controller.onPlayerReadyForPreroll()},iR.prototype.onAdTimeout=function(){this.controller.onAdTimeout()},iR.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.h5Player.hasAttribute("autoplay")&&this.controller.setSetting("adWillAutoPlay",!0),this.onVolumeChange(),this.vjsPlayer.on("fullscreenchange",this.onFullscreenChange.bind(this)),this.vjsPlayer.on("volumechange",this.onVolumeChange.bind(this)),this.controller.onPlayerReady()},iR.prototype.onFullscreenChange=function(){this.vjsPlayer.isFullscreen()?this.controller.onPlayerEnterFullscreen():this.controller.onPlayerExitFullscreen()},iR.prototype.onVolumeChange=function(){var e=this.vjsPlayer.muted()?0:this.vjsPlayer.volume();this.controller.onPlayerVolumeChanged(e)},iR.prototype.injectAdContainerDiv=function(e){this.vjsControls.el().parentNode.appendChild(e)},iR.prototype.getContentPlayer=function(){return this.h5Player},iR.prototype.getVolume=function(){return this.vjsPlayer.muted()?0:this.vjsPlayer.volume()},iR.prototype.setVolume=function(e){this.vjsPlayer.volume(e),0==e?this.vjsPlayer.muted(!0):this.vjsPlayer.muted(!1)},iR.prototype.unmute=function(){this.vjsPlayer.muted(!1)},iR.prototype.mute=function(){this.vjsPlayer.muted(!0)},iR.prototype.play=function(){this.vjsPlayer.play()},iR.prototype.togglePlayback=function(){this.vjsPlayer.paused()?this.vjsPlayer.play():this.vjsPlayer.pause()},iR.prototype.getPlayerWidth=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).width;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).width),parseFloat(e)||this.vjsPlayer.width()},iR.prototype.getPlayerHeight=function(){var e=(getComputedStyle(this.vjsPlayer.el())||{}).height;return e&&0!==parseFloat(e)||(e=(this.vjsPlayer.el().getBoundingClientRect()||{}).height),parseFloat(e)||this.vjsPlayer.height()},iR.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},iR.prototype.getPlayerId=function(){return this.vjsPlayer.id()},iR.prototype.toggleFullscreen=function(){this.vjsPlayer.isFullscreen()?this.vjsPlayer.exitFullscreen():this.vjsPlayer.requestFullscreen()},iR.prototype.getContentPlayheadTracker=function(){return this.contentPlayheadTracker},iR.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},iR.prototype.onAdLog=function(e){var t=e.getAdData(),n=void 0!==t.adError?t.adError.getMessage():void 0;this.vjsPlayer.trigger({type:"adslog",data:{AdError:n,AdEvent:e}})},iR.prototype.onAdBreakStart=function(){this.contentSource=this.vjsPlayer.currentSrc(),this.contentSourceType=this.vjsPlayer.currentType(),this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.startLinearAdMode(),this.vjsControls.hide(),this.vjsPlayer.pause()},iR.prototype.onAdBreakEnd=function(){this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.vjsControls.show()},iR.prototype.onAdStart=function(){this.vjsPlayer.trigger("ads-ad-started")},iR.prototype.onAllAdsCompleted=function(){1==this.contentComplete&&(this.contentSource&&this.vjsPlayer.currentSrc()!=this.contentSource&&this.vjsPlayer.src({src:this.contentSource,type:this.contentSourceType}),this.controller.onContentAndAdsCompleted())},iR.prototype.onAdsReady=function(){this.vjsPlayer.trigger("adsready")},iR.prototype.changeSource=function(e){this.vjsPlayer.currentSrc()&&(this.vjsPlayer.currentTime(0),this.vjsPlayer.pause()),e&&this.vjsPlayer.src(e),this.vjsPlayer.one("loadedmetadata",this.seekContentToZero.bind(this))},iR.prototype.seekContentToZero=function(){this.vjsPlayer.currentTime(0)},iR.prototype.triggerPlayerEvent=function(e,t){this.vjsPlayer.trigger(e,t)},iR.prototype.addContentEndedListener=function(e){this.contentEndedListeners.push(e)},iR.prototype.reset=function(){this.vjsPlayer.off("contentended",this.boundContentEndedListener),this.vjsPlayer.on("contentended",this.boundContentEndedListener),this.vjsControls.show(),this.vjsPlayer.ads.inAdBreak()&&this.vjsPlayer.ads.endLinearAdMode(),this.contentPlayheadTracker.currentTime=0,this.contentComplete=!1};var rR=function(e){this.controller=e,this.adContainerDiv=document.createElement("div"),this.controlsDiv=document.createElement("div"),this.countdownDiv=document.createElement("div"),this.seekBarDiv=document.createElement("div"),this.progressDiv=document.createElement("div"),this.playPauseDiv=document.createElement("div"),this.muteDiv=document.createElement("div"),this.sliderDiv=document.createElement("div"),this.sliderLevelDiv=document.createElement("div"),this.fullscreenDiv=document.createElement("div"),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.adPlayheadTracker={currentTime:0,duration:0,isPod:!1,adPosition:0,totalAds:0},this.controlPrefix=this.controller.getPlayerId()+"_",this.showCountdown=!0,!1===this.controller.getSettings().showCountdown&&(this.showCountdown=!1),this.isAdNonlinear=!1,this.createAdContainer()};rR.prototype.createAdContainer=function(){this.assignControlAttributes(this.adContainerDiv,"ima-ad-container"),this.adContainerDiv.style.position="absolute",this.adContainerDiv.style.zIndex=1111,this.adContainerDiv.addEventListener("mouseenter",this.showAdControls.bind(this),!1),this.adContainerDiv.addEventListener("mouseleave",this.hideAdControls.bind(this),!1),this.adContainerDiv.addEventListener("click",this.onAdContainerClick.bind(this),!1),this.createControls(),this.controller.injectAdContainerDiv(this.adContainerDiv)},rR.prototype.createControls=function(){this.assignControlAttributes(this.controlsDiv,"ima-controls-div"),this.controlsDiv.style.width="100%",this.controller.getIsMobile()?this.countdownDiv.style.display="none":(this.assignControlAttributes(this.countdownDiv,"ima-countdown-div"),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel,this.countdownDiv.style.display=this.showCountdown?"block":"none"),this.assignControlAttributes(this.seekBarDiv,"ima-seek-bar-div"),this.seekBarDiv.style.width="100%",this.assignControlAttributes(this.progressDiv,"ima-progress-div"),this.assignControlAttributes(this.playPauseDiv,"ima-play-pause-div"),this.addClass(this.playPauseDiv,"ima-playing"),this.playPauseDiv.addEventListener("click",this.onAdPlayPauseClick.bind(this),!1),this.assignControlAttributes(this.muteDiv,"ima-mute-div"),this.addClass(this.muteDiv,"ima-non-muted"),this.muteDiv.addEventListener("click",this.onAdMuteClick.bind(this),!1),this.assignControlAttributes(this.sliderDiv,"ima-slider-div"),this.sliderDiv.addEventListener("mousedown",this.onAdVolumeSliderMouseDown.bind(this),!1),this.controller.getIsIos()&&(this.sliderDiv.style.display="none"),this.assignControlAttributes(this.sliderLevelDiv,"ima-slider-level-div"),this.assignControlAttributes(this.fullscreenDiv,"ima-fullscreen-div"),this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.fullscreenDiv.addEventListener("click",this.onAdFullscreenClick.bind(this),!1),this.adContainerDiv.appendChild(this.controlsDiv),this.controlsDiv.appendChild(this.countdownDiv),this.controlsDiv.appendChild(this.seekBarDiv),this.controlsDiv.appendChild(this.playPauseDiv),this.controlsDiv.appendChild(this.muteDiv),this.controlsDiv.appendChild(this.sliderDiv),this.controlsDiv.appendChild(this.fullscreenDiv),this.seekBarDiv.appendChild(this.progressDiv),this.sliderDiv.appendChild(this.sliderLevelDiv)},rR.prototype.onAdPlayPauseClick=function(){this.controller.onAdPlayPauseClick()},rR.prototype.onAdMuteClick=function(){this.controller.onAdMuteClick()},rR.prototype.onAdFullscreenClick=function(){this.controller.toggleFullscreen()},rR.prototype.onAdsPaused=function(){this.controller.sdkImpl.adPlaying=!1,this.addClass(this.playPauseDiv,"ima-paused"),this.removeClass(this.playPauseDiv,"ima-playing"),this.showAdControls()},rR.prototype.onAdsResumed=function(){this.onAdsPlaying(),this.showAdControls()},rR.prototype.onAdsPlaying=function(){this.controller.sdkImpl.adPlaying=!0,this.addClass(this.playPauseDiv,"ima-playing"),this.removeClass(this.playPauseDiv,"ima-paused")},rR.prototype.updateAdUi=function(e,t,n,i,r){var a=Math.floor(t/60),o=Math.floor(t%60);o.toString().length<2&&(o="0"+o);var s=": ";r>1&&(s=" ("+i+" "+this.controller.getSettings().adLabelNofN+" "+r+"): "),this.countdownDiv.innerHTML=this.controller.getSettings().adLabel+s+a+":"+o;var d=e/n*100;this.progressDiv.style.width=d+"%"},rR.prototype.unmute=function(){this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*this.controller.getPlayerVolume()+"%"},rR.prototype.mute=function(){this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"},rR.prototype.onAdVolumeSliderMouseDown=function(){document.addEventListener("mouseup",this.boundOnMouseUp,!1),document.addEventListener("mousemove",this.boundOnMouseMove,!1)},rR.prototype.onMouseMove=function(e){this.changeVolume(e)},rR.prototype.onMouseUp=function(e){this.changeVolume(e),document.removeEventListener("mouseup",this.boundOnMouseUp),document.removeEventListener("mousemove",this.boundOnMouseMove)},rR.prototype.changeVolume=function(e){var t=(e.clientX-this.sliderDiv.getBoundingClientRect().left)/this.sliderDiv.offsetWidth;t*=100,t=Math.min(Math.max(t,0),100),this.sliderLevelDiv.style.width=t+"%",0==this.percent?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted")):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted")),this.controller.setVolume(t/100)},rR.prototype.showAdContainer=function(){this.adContainerDiv.style.display="block"},rR.prototype.hideAdContainer=function(){this.adContainerDiv.style.display="none"},rR.prototype.onAdContainerClick=function(){this.isAdNonlinear&&this.controller.togglePlayback()},rR.prototype.reset=function(){this.hideAdContainer()},rR.prototype.onAdError=function(){this.hideAdContainer()},rR.prototype.onAdBreakStart=function(e){this.showAdContainer(),"application/javascript"!==e.getAd().getContentType()||this.controller.getSettings().showControlsForJSAds?this.controlsDiv.style.display="block":this.controlsDiv.style.display="none",this.onAdsPlaying(),this.hideAdControls()},rR.prototype.onAdBreakEnd=function(){var e=this.controller.getCurrentAd();(null==e||e.isLinear())&&this.hideAdContainer(),this.controlsDiv.style.display="none",this.countdownDiv.innerHTML=""},rR.prototype.onAllAdsCompleted=function(){this.hideAdContainer()},rR.prototype.onLinearAdStart=function(){this.removeClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!1},rR.prototype.onNonLinearAdLoad=function(){this.adContainerDiv.style.display="block",this.addClass(this.adContainerDiv,"bumpable-ima-ad-container"),this.isAdNonlinear=!0},rR.prototype.onPlayerEnterFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-non-fullscreen")},rR.prototype.onPlayerExitFullscreen=function(){this.addClass(this.fullscreenDiv,"ima-non-fullscreen"),this.removeClass(this.fullscreenDiv,"ima-fullscreen")},rR.prototype.onPlayerVolumeChanged=function(e){0==e?(this.addClass(this.muteDiv,"ima-muted"),this.removeClass(this.muteDiv,"ima-non-muted"),this.sliderLevelDiv.style.width="0%"):(this.addClass(this.muteDiv,"ima-non-muted"),this.removeClass(this.muteDiv,"ima-muted"),this.sliderLevelDiv.style.width=100*e+"%")},rR.prototype.showAdControls=function(){this.controller.getSettings().disableAdControls||this.addClass(this.controlsDiv,"ima-controls-div-showing")},rR.prototype.hideAdControls=function(){this.removeClass(this.controlsDiv,"ima-controls-div-showing")},rR.prototype.assignControlAttributes=function(e,t){e.id=this.controlPrefix+t,e.className=this.controlPrefix+t+" "+t},rR.prototype.getClassRegexp=function(e){return new RegExp("(^|[^A-Za-z-])"+e+"((?![A-Za-z-])|$)","gi")},rR.prototype.elementHasClass=function(e,t){return this.getClassRegexp(t).test(e.className)},rR.prototype.addClass=function(e,t){e.className=e.className.trim()+" "+t},rR.prototype.removeClass=function(e,t){var n=this.getClassRegexp(t);e.className=e.className.trim().replace(n,"")},rR.prototype.getAdContainerDiv=function(){return this.adContainerDiv},rR.prototype.setShowCountdown=function(e){this.showCountdown=e,this.countdownDiv.style.display=this.showCountdown?"block":"none"};var aR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oR=function(e){this.controller=e,this.adDisplayContainer=null,this.adDisplayContainerInitialized=!1,this.adsLoader=null,this.adsManager=null,this.adsRenderingSettings=null,this.adsResponse=null,this.currentAd=null,this.adTrackingTimer=null,this.allAdsCompleted=!1,this.adsActive=!1,this.adPlaying=!1,this.adMuted=!1,this.adBreakReadyListener=void 0,this.contentCompleteCalled=!1,this.isAdTimedOut=!1,this.adsManagerDimensions={width:0,height:0},this.autoPlayAdBreaks=!0,!1===this.controller.getSettings().autoPlayAdBreaks&&(this.autoPlayAdBreaks=!1),this.controller.getSettings().locale&&google.ima.settings.setLocale(this.controller.getSettings().locale),this.controller.getSettings().disableFlashAds&&google.ima.settings.setDisableFlashAds(this.controller.getSettings().disableFlashAds),this.controller.getSettings().disableCustomPlaybackForIOS10Plus&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.controller.getSettings().disableCustomPlaybackForIOS10Plus),this.controller.getSettings().ppid&&google.ima.settings.setPpid(this.controller.getSettings().ppid),this.controller.getSettings().featureFlags&&google.ima.settings.setFeatureFlags(this.controller.getSettings().featureFlags)};oR.prototype.initAdObjects=function(){this.adDisplayContainer=new google.ima.AdDisplayContainer(this.controller.getAdContainerDiv(),this.controller.getContentPlayer()),this.adsLoader=new google.ima.AdsLoader(this.adDisplayContainer),this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),0==this.controller.getSettings().vpaidAllowed&&this.adsLoader.getSettings().setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.DISABLED),void 0!==this.controller.getSettings().vpaidMode&&this.adsLoader.getSettings().setVpaidMode(this.controller.getSettings().vpaidMode),this.controller.getSettings().locale&&this.adsLoader.getSettings().setLocale(this.controller.getSettings().locale),this.controller.getSettings().numRedirects&&this.adsLoader.getSettings().setNumRedirects(this.controller.getSettings().numRedirects),this.controller.getSettings().sessionId&&this.adsLoader.getSettings().setSessionId(this.controller.getSettings().sessionId),this.adsLoader.getSettings().setPlayerType("videojs-ima"),this.adsLoader.getSettings().setPlayerVersion("2.1.0"),this.adsLoader.getSettings().setAutoPlayAdBreaks(this.autoPlayAdBreaks),this.adsLoader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded.bind(this),!1),this.adsLoader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdsLoaderError.bind(this),!1),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-loader",adsLoader:this.adsLoader})},oR.prototype.requestAds=function(){var e=new google.ima.AdsRequest;if(this.controller.getSettings().adTagUrl?e.adTagUrl=this.controller.getSettings().adTagUrl:e.adsResponse=this.controller.getSettings().adsResponse,this.controller.getSettings().forceNonLinearFullSlot&&(e.forceNonLinearFullSlot=!0),this.controller.getSettings().vastLoadTimeout&&(e.vastLoadTimeout=this.controller.getSettings().vastLoadTimeout),this.controller.getSettings().omidMode&&window.console.warn("The additional setting `omidMode` has been removed. Use `omidVendorAccess` instead."),this.controller.getSettings().omidVendorAccess){e.omidAccessModeRules={};var t=this.controller.getSettings().omidVendorAccess;Object.keys(t).forEach((function(n){e.omidAccessModeRules[n]=t[n]}))}e.linearAdSlotWidth=this.controller.getPlayerWidth(),e.linearAdSlotHeight=this.controller.getPlayerHeight(),e.nonLinearAdSlotWidth=this.controller.getSettings().nonLinearWidth||this.controller.getPlayerWidth(),e.nonLinearAdSlotHeight=this.controller.getSettings().nonLinearHeight||this.controller.getPlayerHeight(),e.setAdWillAutoPlay(this.controller.adsWillAutoplay()),e.setAdWillPlayMuted(this.controller.adsWillPlayMuted());var n=this.controller.getSettings().adsRequest;n&&"object"===(void 0===n?"undefined":aR(n))&&Object.keys(n).forEach((function(t){e[t]=n[t]})),this.adsLoader.requestAds(e),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-request",AdsRequest:e})},oR.prototype.onAdsManagerLoaded=function(e){this.createAdsRenderingSettings(),this.adsManager=e.getAdsManager(this.controller.getContentPlayheadTracker(),this.adsRenderingSettings),this.adsManager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.AD_BREAK_READY,this.onAdBreakReady.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,this.onContentPauseRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,this.onContentResumeRequested.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,this.onAllAdsCompleted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOADED,this.onAdLoaded.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.STARTED,this.onAdStarted.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.COMPLETE,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.SKIPPED,this.onAdComplete.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.LOG,this.onAdLog.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.PAUSED,this.onAdPaused.bind(this)),this.adsManager.addEventListener(google.ima.AdEvent.Type.RESUMED,this.onAdResumed.bind(this)),this.controller.playerWrapper.vjsPlayer.trigger({type:"ads-manager",adsManager:this.adsManager}),this.autoPlayAdBreaks||this.initAdsManager();var t=this.controller.getSettings().preventLateAdStart;t?t&&!this.isAdTimedOut&&this.controller.onAdsReady():this.controller.onAdsReady(),this.controller.getSettings().adsManagerLoadedCallback&&this.controller.getSettings().adsManagerLoadedCallback()},oR.prototype.onAdsLoaderError=function(e){window.console.warn("AdsLoader error: "+e.getError()),this.controller.onErrorLoadingAds(e),this.adsManager&&this.adsManager.destroy()},oR.prototype.initAdsManager=function(){try{var e=this.controller.getPlayerWidth(),t=this.controller.getPlayerHeight();this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.init(e,t,google.ima.ViewMode.NORMAL),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.initializeAdDisplayContainer()}catch(e){this.onAdError(e)}},oR.prototype.createAdsRenderingSettings=function(){if(this.adsRenderingSettings=new google.ima.AdsRenderingSettings,this.adsRenderingSettings.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.controller.getSettings().adsRenderingSettings)for(var e in this.controller.getSettings().adsRenderingSettings)""!==e&&(this.adsRenderingSettings[e]=this.controller.getSettings().adsRenderingSettings[e])},oR.prototype.onAdError=function(e){var t=void 0!==e.getError?e.getError():e.stack;window.console.warn("Ad error: "+t),this.adsManager.destroy(),this.controller.onAdError(e),this.adsActive=!1,this.adPlaying=!1},oR.prototype.onAdBreakReady=function(e){this.adBreakReadyListener(e)},oR.prototype.onContentPauseRequested=function(e){this.adsActive=!0,this.adPlaying=!0,this.controller.onAdBreakStart(e)},oR.prototype.onContentResumeRequested=function(e){this.adsActive=!1,this.adPlaying=!1,this.controller.onAdBreakEnd()},oR.prototype.onAllAdsCompleted=function(e){this.allAdsCompleted=!0,this.controller.onAllAdsCompleted()},oR.prototype.onAdLoaded=function(e){e.getAd().isLinear()||(this.controller.onNonLinearAdLoad(),this.controller.playContent())},oR.prototype.onAdStarted=function(e){this.currentAd=e.getAd(),this.currentAd.isLinear()?(this.adTrackingTimer=setInterval(this.onAdPlayheadTrackerInterval.bind(this),250),this.controller.onLinearAdStart()):this.controller.onNonLinearAdStart()},oR.prototype.onAdPaused=function(){this.controller.onAdsPaused()},oR.prototype.onAdResumed=function(e){this.controller.onAdsResumed()},oR.prototype.onAdComplete=function(){this.currentAd.isLinear()&&clearInterval(this.adTrackingTimer)},oR.prototype.onAdLog=function(e){this.controller.onAdLog(e)},oR.prototype.onAdPlayheadTrackerInterval=function(){if(null!==this.adsManager){var e=this.adsManager.getRemainingTime(),t=this.currentAd.getDuration(),n=t-e;n=n>0?n:0;var i=0,r=void 0;this.currentAd.getAdPodInfo()&&(r=this.currentAd.getAdPodInfo().getAdPosition(),i=this.currentAd.getAdPodInfo().getTotalAds()),this.controller.onAdPlayheadUpdated(n,e,t,r,i)}},oR.prototype.onContentComplete=function(){this.adsLoader&&(this.adsLoader.contentComplete(),this.contentCompleteCalled=!0),(this.adsManager&&this.adsManager.getCuePoints()&&!this.adsManager.getCuePoints().includes(-1)||!this.adsManager)&&this.controller.onNoPostroll(),this.allAdsCompleted&&this.controller.onContentAndAdsCompleted()},oR.prototype.onPlayerDisposed=function(){this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null)},oR.prototype.onPlayerReadyForPreroll=function(){if(this.autoPlayAdBreaks){this.initAdsManager();try{this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start()}catch(e){this.onAdError(e)}}},oR.prototype.onAdTimeout=function(){this.isAdTimedOut=!0},oR.prototype.onPlayerReady=function(){this.initAdObjects(),(this.controller.getSettings().adTagUrl||this.controller.getSettings().adsResponse)&&"onLoad"===this.controller.getSettings().requestMode&&this.requestAds()},oR.prototype.onPlayerEnterFullscreen=function(){this.adsManager&&this.adsManager.resize(window.screen.width,window.screen.height,google.ima.ViewMode.FULLSCREEN)},oR.prototype.onPlayerExitFullscreen=function(){this.adsManager&&this.adsManager.resize(this.controller.getPlayerWidth(),this.controller.getPlayerHeight(),google.ima.ViewMode.NORMAL)},oR.prototype.onPlayerVolumeChanged=function(e){this.adsManager&&this.adsManager.setVolume(e),this.adMuted=0==e},oR.prototype.onPlayerResize=function(e,t){this.adsManager&&(this.adsManagerDimensions.width=e,this.adsManagerDimensions.height=t,this.adsManager.resize(e,t,google.ima.ViewMode.NORMAL))},oR.prototype.getCurrentAd=function(){return this.currentAd},oR.prototype.setAdBreakReadyListener=function(e){this.adBreakReadyListener=e},oR.prototype.isAdPlaying=function(){return this.adPlaying},oR.prototype.isAdMuted=function(){return this.adMuted},oR.prototype.pauseAds=function(){this.adsManager.pause(),this.adPlaying=!1},oR.prototype.resumeAds=function(){this.adsManager.resume(),this.adPlaying=!0},oR.prototype.unmute=function(){this.adsManager.setVolume(1),this.adMuted=!1},oR.prototype.mute=function(){this.adsManager.setVolume(0),this.adMuted=!0},oR.prototype.setVolume=function(e){this.adsManager.setVolume(e),this.adMuted=0==e},oR.prototype.initializeAdDisplayContainer=function(){this.adDisplayContainer&&(this.adDisplayContainerInitialized||(this.adDisplayContainer.initialize(),this.adDisplayContainerInitialized=!0))},oR.prototype.playAdBreak=function(){this.autoPlayAdBreaks||(this.controller.showAdContainer(),this.adsManager.setVolume(this.controller.getPlayerVolume()),this.adsManager.start())},oR.prototype.addEventListener=function(e,t){this.adsManager&&this.adsManager.addEventListener(e,t)},oR.prototype.getAdsManager=function(){return this.adsManager},oR.prototype.reset=function(){this.adsActive=!1,this.adPlaying=!1,this.adTrackingTimer&&clearInterval(this.adTrackingTimer),this.adsManager&&(this.adsManager.destroy(),this.adsManager=null),this.adsLoader&&!this.contentCompleteCalled&&this.adsLoader.contentComplete(),this.contentCompleteCalled=!1,this.allAdsCompleted=!1};var sR=function(e,t){this.settings={},this.contentAndAdsEndedListeners=[],this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},i=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new iR(e,i,this),this.adUi=new rR(this),this.sdkImpl=new oR(this)};sR.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,prerollTimeout:1e3,preventLateAdStart:!1,requestMode:"onLoad",showControlsForJSAds:!0,timeout:5e3},sR.prototype.initWithSettings=function(e){this.settings=Object.assign({},sR.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},sR.prototype.warnAboutDeprecatedSettings=function(){var e=this;["adWillAutoplay","adsWillAutoplay","adWillPlayMuted","adsWillPlayMuted"].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.ima setting "+t+" is deprecated")}))},sR.prototype.getSettings=function(){return this.settings},sR.prototype.getIsMobile=function(){return this.isMobile},sR.prototype.getIsIos=function(){return this.isIos},sR.prototype.injectAdContainerDiv=function(e){this.playerWrapper.injectAdContainerDiv(e)},sR.prototype.getAdContainerDiv=function(){return this.adUi.getAdContainerDiv()},sR.prototype.getContentPlayer=function(){return this.playerWrapper.getContentPlayer()},sR.prototype.getContentPlayheadTracker=function(){return this.playerWrapper.getContentPlayheadTracker()},sR.prototype.requestAds=function(){this.sdkImpl.requestAds()},sR.prototype.setSetting=function(e,t){this.settings[e]=t},sR.prototype.onErrorLoadingAds=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},sR.prototype.onAdPlayPauseClick=function(){this.sdkImpl.isAdPlaying()?(this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()):(this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds())},sR.prototype.onAdMuteClick=function(){this.sdkImpl.isAdMuted()?(this.playerWrapper.unmute(),this.adUi.unmute(),this.sdkImpl.unmute()):(this.playerWrapper.mute(),this.adUi.mute(),this.sdkImpl.mute())},sR.prototype.setVolume=function(e){this.playerWrapper.setVolume(e),this.sdkImpl.setVolume(e)},sR.prototype.getPlayerVolume=function(){return this.playerWrapper.getVolume()},sR.prototype.toggleFullscreen=function(){this.playerWrapper.toggleFullscreen()},sR.prototype.onAdError=function(e){this.adUi.onAdError(),this.playerWrapper.onAdError(e)},sR.prototype.onAdBreakStart=function(e){this.playerWrapper.onAdBreakStart(),this.adUi.onAdBreakStart(e)},sR.prototype.showAdContainer=function(){this.adUi.showAdContainer()},sR.prototype.onAdBreakEnd=function(){this.playerWrapper.onAdBreakEnd(),this.adUi.onAdBreakEnd()},sR.prototype.onAllAdsCompleted=function(){this.adUi.onAllAdsCompleted(),this.playerWrapper.onAllAdsCompleted()},sR.prototype.onAdsPaused=function(){this.adUi.onAdsPaused()},sR.prototype.onAdsResumed=function(){this.adUi.onAdsResumed()},sR.prototype.onAdPlayheadUpdated=function(e,t,n,i,r){this.adUi.updateAdUi(e,t,n,i,r)},sR.prototype.onAdLog=function(e){this.playerWrapper.onAdLog(e)},sR.prototype.getCurrentAd=function(){return this.sdkImpl.getCurrentAd()},sR.prototype.playContent=function(){this.playerWrapper.play()},sR.prototype.onLinearAdStart=function(){this.adUi.onLinearAdStart(),this.playerWrapper.onAdStart()},sR.prototype.onNonLinearAdLoad=function(){this.adUi.onNonLinearAdLoad()},sR.prototype.onNonLinearAdStart=function(){this.adUi.onNonLinearAdLoad(),this.playerWrapper.onAdStart()},sR.prototype.getPlayerWidth=function(){return this.playerWrapper.getPlayerWidth()},sR.prototype.getPlayerHeight=function(){return this.playerWrapper.getPlayerHeight()},sR.prototype.onAdsReady=function(){this.playerWrapper.onAdsReady()},sR.prototype.onPlayerResize=function(e,t){this.sdkImpl.onPlayerResize(e,t)},sR.prototype.onContentComplete=function(){this.sdkImpl.onContentComplete()},sR.prototype.onNoPostroll=function(){this.playerWrapper.onNoPostroll()},sR.prototype.onContentAndAdsCompleted=function(){for(var e in this.contentAndAdsEndedListeners)"function"==typeof this.contentAndAdsEndedListeners[e]&&this.contentAndAdsEndedListeners[e]()},sR.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},sR.prototype.onPlayerReadyForPreroll=function(){this.sdkImpl.onPlayerReadyForPreroll()},sR.prototype.onAdTimeout=function(){this.sdkImpl.onAdTimeout()},sR.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},sR.prototype.onPlayerEnterFullscreen=function(){this.adUi.onPlayerEnterFullscreen(),this.sdkImpl.onPlayerEnterFullscreen()},sR.prototype.onPlayerExitFullscreen=function(){this.adUi.onPlayerExitFullscreen(),this.sdkImpl.onPlayerExitFullscreen()},sR.prototype.onPlayerVolumeChanged=function(e){this.adUi.onPlayerVolumeChanged(e),this.sdkImpl.onPlayerVolumeChanged(e)},sR.prototype.setContentWithAdTag=function(e,t){this.reset(),this.settings.adTagUrl=t||this.settings.adTagUrl,this.playerWrapper.changeSource(e)},sR.prototype.setContentWithAdsResponse=function(e,t){this.reset(),this.settings.adsResponse=t||this.settings.adsResponse,this.playerWrapper.changeSource(e)},sR.prototype.setContentWithAdsRequest=function(e,t){this.reset(),this.settings.adsRequest=t||this.settings.adsRequest,this.playerWrapper.changeSource(e)},sR.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset(),this.adUi.reset()},sR.prototype.addContentEndedListener=function(e){this.playerWrapper.addContentEndedListener(e)},sR.prototype.addContentAndAdsEndedListener=function(e){this.contentAndAdsEndedListeners.push(e)},sR.prototype.setAdBreakReadyListener=function(e){this.sdkImpl.setAdBreakReadyListener(e)},sR.prototype.setShowCountdown=function(e){this.adUi.setShowCountdown(e),this.showCountdown=e,this.adUi.countdownDiv.style.display=this.showCountdown?"block":"none"},sR.prototype.initializeAdDisplayContainer=function(){this.sdkImpl.initializeAdDisplayContainer()},sR.prototype.playAdBreak=function(){this.sdkImpl.playAdBreak()},sR.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},sR.prototype.getAdsManager=function(){return this.sdkImpl.getAdsManager()},sR.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},sR.prototype.changeAdTag=function(e){this.reset(),this.settings.adTagUrl=e},sR.prototype.pauseAd=function(){this.adUi.onAdsPaused(),this.sdkImpl.pauseAds()},sR.prototype.resumeAd=function(){this.adUi.onAdsPlaying(),this.sdkImpl.resumeAds()},sR.prototype.togglePlayback=function(){this.playerWrapper.togglePlayback()},sR.prototype.adsWillAutoplay=function(){return void 0!==this.settings.adsWillAutoplay?this.settings.adsWillAutoplay:void 0!==this.settings.adWillAutoplay?this.settings.adWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},sR.prototype.adsWillPlayMuted=function(){return void 0!==this.settings.adsWillPlayMuted?this.settings.adsWillPlayMuted:void 0!==this.settings.adWillPlayMuted?this.settings.adWillPlayMuted:void 0!==this.playerWrapper.getPlayerOptions().muted?this.playerWrapper.getPlayerOptions().muted:0==this.playerWrapper.getVolume()},sR.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var dR=function(e,t,n){this.vjsPlayer=e,this.daiController=n,this.vjsControls=this.vjsPlayer.getChild("controlBar"),this.h5Player=null,this.vjsPlayer.on("dispose",this.playerDisposedListener.bind(this)),this.vjsPlayer.on("pause",this.onPause.bind(this)),this.vjsPlayer.on("play",this.onPlay.bind(this)),this.vjsPlayer.on("seeked",this.onSeekEnd.bind(this)),this.vjsPlayer.ready(this.onPlayerReady.bind(this)),this.vjsPlayer.ads(t)};dR.prototype.playerDisposedListener=function(){this.contentEndedListeners=[],this.daiController.onPlayerDisposed()},dR.prototype.onPause=function(){this.daiController.isInAdBreak()&&this.vjsControls.show()},dR.prototype.onPlay=function(){this.daiController.isInAdBreak()&&this.vjsControls.hide()},dR.prototype.onSeekEnd=function(){this.daiController.onSeekEnd(this.vjsPlayer.currentTime())},dR.prototype.onPlayerReady=function(){this.h5Player=document.getElementById(this.getPlayerId()).getElementsByClassName("vjs-tech")[0],this.daiController.onPlayerReady()},dR.prototype.getStreamPlayer=function(){return this.h5Player},dR.prototype.getVjsPlayer=function(){return this.vjsPlayer},dR.prototype.getPlayerOptions=function(){return this.vjsPlayer.options_},dR.prototype.getPlayerId=function(){return this.vjsPlayer.id()},dR.prototype.onAdError=function(e){this.vjsControls.show();var t=void 0!==e.getError?e.getError():e.stack;this.vjsPlayer.trigger({type:"adserror",data:{AdError:t,AdErrorEvent:e}})},dR.prototype.onAdBreakStart=function(){this.vjsControls.hide()},dR.prototype.onAdBreakEnd=function(){this.vjsControls.show()},dR.prototype.reset=function(){this.vjsControls.show()};var lR=function(e){this.daiController=e,this.streamPlayer=null,this.vjsPlayer=null,this.streamManager=null,this.uiSettings=new google.ima.dai.api.UiSettings,this.isAdBreak=!1,this.isSnapback=!1,this.snapForwardTime=0,this.timedMetadata,this.metadataLoaded={},this.SOURCE_TYPES={hls:"application/x-mpegURL",dash:"application/dash+xml"}};lR.prototype.initImaDai=function(){this.streamPlayer=this.daiController.getStreamPlayer(),this.vjsPlayer=this.daiController.getVjsPlayer(),this.createAdUiDiv(),this.daiController.getSettings().locale&&this.uiSettings.setLocale(this.daiController.getSettings().locale),this.streamManager=new google.ima.dai.api.StreamManager(this.streamPlayer,this.adUiDiv,this.uiSettings),this.streamPlayer.addEventListener("pause",this.onStreamPause),this.streamPlayer.addEventListener("play",this.onStreamPlay),this.streamManager.addEventListener([google.ima.dai.api.StreamEvent.Type.LOADED,google.ima.dai.api.StreamEvent.Type.ERROR,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED],this.onStreamEvent.bind(this),!1),this.vjsPlayer.textTracks().onaddtrack=this.onAddTrack.bind(this),this.vjsPlayer.trigger({type:"stream-manager",StreamManager:this.streamManager}),this.requestStream()},lR.prototype.onAddTrack=function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.oncuechange=function(e){var i=!0,r=!1,a=void 0;try{for(var o,s=n.activeCues_[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var d=o.value,l={};l[d.value.key]=d.value.data,t.streamManager.onTimedMetadata(l)}}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}})},lR.prototype.createAdUiDiv=function(){var e=document.createElement("div");e.id="ad-ui",e.style.height="calc(100% - 3em)",this.streamPlayer.parentNode.appendChild(e),this.adUiDiv=e},lR.prototype.onStreamPause=function(){this.isAdBreak&&(this.adUiDiv.style.display="none")},lR.prototype.onStreamPlay=function(){this.isAdBreak&&(this.adUiDiv.style.display="block")},lR.prototype.onSeekEnd=function(e){if("live"!==this.daiController.getSettings().streamType)if(this.isSnapback)this.isSnapback=!1;else{var t=this.streamManager.previousCuePointForStreamTime(e);t&&!t.played&&(this.isSnapback=!0,this.snapForwardTime=e,this.vjsPlayer.currentTime(t.start))}},lR.prototype.onStreamEvent=function(e){switch(e.type){case google.ima.dai.api.StreamEvent.Type.LOADED:this.loadUrl(e.getStreamData().url);break;case google.ima.dai.api.StreamEvent.Type.ERROR:window.console.warn("Error loading stream, attempting to play backup stream. "+e.getStreamData().errorMessage),this.daiController.onErrorLoadingAds(e),this.daiController.getSettings().fallbackStreamUrl&&this.loadurl(this.daiController.getSettings().fallbackStreamUrl);break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED:this.isAdBreak=!0,this.adUiDiv.style.display="block",this.daiController.onAdBreakStart();break;case google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED:this.isAdBreak=!1,this.adUiDiv.style.display="none",this.daiController.onAdBreakEnd(),this.snapForwardTime&&this.snapForwardTime>this.vjsPlayer.currentTime()&&(this.vjsPlayer.currentTime(this.snapForwardTime),this.snapForwardTime=0)}},lR.prototype.loadUrl=function(e){this.vjsPlayer.ready(function(){var t=this.daiController.getSettings().streamFormat;this.vjsPlayer.src({src:e,type:this.SOURCE_TYPES[t]});var n=this.daiController.getSettings().bookmarkTime;if(n){var i=this.streamManager.streamTimeForContentTime(n);this.isSnapback=!0,this.vjsPlayer.currentTime(i)}}.bind(this))},lR.prototype.requestStream=function(){var e=void 0,t=this.daiController.getSettings().streamType;if("vod"===t?((e=new google.ima.dai.api.VODStreamRequest).contentSourceId=this.daiController.getSettings().cmsId,e.videoId=this.daiController.getSettings().videoId):"live"===t?(e=new google.ima.dai.api.LiveStreamRequest).assetKey=this.daiController.getSettings().assetKey:window.console.warn("No valid stream type selected"),e.format=this.daiController.getSettings().streamFormat,this.daiController.getSettings().apiKey&&(e.apiKey=this.daiController.getSettings().apiKey),this.daiController.getSettings().authToken&&(e.authToken=this.daiController.getSettings().authToken),this.daiController.getSettings().adTagParameters&&(e.adTagParameters=this.daiController.getSettings().adTagParameters),this.daiController.getSettings().streamActivityMonitorId&&(e.streamActivityMonitorId=this.daiController.getSettings().streamActivityMonitorId),this.daiController.getSettings().omidMode){e.omidAccessModeRules={};var n=this.daiController.getSettings().omidMode;n.FULL&&(e.omidAccessModeRules[google.ima.OmidAccessMode.FULL]=n.FULL),n.DOMAIN&&(e.omidAccessModeRules[google.ima.OmidAccessMode.DOMAIN]=n.DOMAIN),n.LIMITED&&(e.omidAccessModeRules[google.ima.OmidAccessMode.LIMITED]=n.LIMITED)}this.streamManager.requestStream(e),this.vjsPlayer.trigger({type:"stream-request",StreamRequest:e})},lR.prototype.onPlayerReady=function(){this.initImaDai()},lR.prototype.onPlayerDisposed=function(){this.streamManager&&this.streamManager.reset()},lR.prototype.getStreamManager=function(){return this.StreamManager},lR.prototype.reset=function(){this.StreamManager&&this.StreamManager.reset()};var uR=function(e,t){this.inAdBreak=!1,this.settings={},this.isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),this.isIos=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i),this.initWithSettings(t);var n={debug:this.settings.debug,timeout:this.settings.timeout,prerollTimeout:this.settings.prerollTimeout},i=Object.assign({},n,t.contribAdsSettings||{});this.playerWrapper=new dR(e,i,this),this.sdkImpl=new lR(this)};function cR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}uR.IMA_DEFAULTS={adLabel:"Advertisement",adLabelNofN:"of",debug:!1,disableAdControls:!1,showControlsForJSAds:!0},uR.prototype.initWithSettings=function(e){this.settings=Object.assign({},uR.IMA_DEFAULTS,e||{}),this.warnAboutDeprecatedSettings(),this.showCountdown=!0,!1===this.settings.showCountdown&&(this.showCountdown=!1)},uR.prototype.warnAboutDeprecatedSettings=function(){var e=this;[].forEach((function(t){void 0!==e.settings[t]&&console.warn("WARNING: videojs.imaDai setting "+t+" is deprecated")}))},uR.prototype.getSettings=function(){return this.settings},uR.prototype.getIsMobile=function(){return this.isMobile},uR.prototype.getIsIos=function(){return this.isIos},uR.prototype.getStreamPlayer=function(){return this.playerWrapper.getStreamPlayer()},uR.prototype.getVjsPlayer=function(){return this.playerWrapper.getVjsPlayer()},uR.prototype.requestStream=function(){this.sdkImpl.requestStream()},uR.prototype.setSetting=function(e,t){this.settings[e]=t},uR.prototype.onErrorLoadingAds=function(e){this.playerWrapper.onAdError(e)},uR.prototype.onAdError=function(e){this.playerWrapper.onAdError(e)},uR.prototype.onAdBreakStart=function(){this.inAdBreak=!0,this.playerWrapper.onAdBreakStart()},uR.prototype.onAdBreakEnd=function(){this.inAdBreak=!1,this.playerWrapper.onAdBreakEnd()},uR.prototype.onPlayerDisposed=function(){this.contentAndAdsEndedListeners=[],this.sdkImpl.onPlayerDisposed()},uR.prototype.isInAdBreak=function(){return this.inAdBreak},uR.prototype.onSeekEnd=function(e){this.sdkImpl.onSeekEnd(e)},uR.prototype.onPlayerReady=function(){this.sdkImpl.onPlayerReady()},uR.prototype.reset=function(){this.sdkImpl.reset(),this.playerWrapper.reset()},uR.prototype.addEventListener=function(e,t){this.sdkImpl.addEventListener(e,t)},uR.prototype.getStreamManager=function(){return this.sdkImpl.getStreamManager()},uR.prototype.getPlayerId=function(){return this.playerWrapper.getPlayerId()},uR.prototype.streamWillAutoplay=function(){return void 0!==this.settings.streamWillAutoplay?this.settings.streamWillAutoplay:!!this.playerWrapper.getPlayerOptions().autoplay},uR.prototype.triggerPlayerEvent=function(e,t){this.playerWrapper.triggerPlayerEvent(e,t)};var pR=function(e,t){this.controller=new sR(e,t),this.addContentAndAdsEndedListener=function(e){this.controller.addContentAndAdsEndedListener(e)}.bind(this),this.addContentEndedListener=function(e){this.controller.addContentEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.changeAdTag=function(e){this.controller.changeAdTag(e)}.bind(this),this.getAdsManager=function(){return this.controller.getAdsManager()}.bind(this),this.initializeAdDisplayContainer=function(){this.controller.initializeAdDisplayContainer()}.bind(this),this.pauseAd=function(){this.controller.pauseAd()}.bind(this),this.playAdBreak=function(){this.controller.playAdBreak()}.bind(this),this.requestAds=function(){this.controller.requestAds()}.bind(this),this.resumeAd=function(){this.controller.resumeAd()}.bind(this),this.setAdBreakReadyListener=function(e){this.controller.setAdBreakReadyListener(e)}.bind(this),this.setContentWithAdTag=function(e,t){this.controller.setContentWithAdTag(e,t)}.bind(this),this.setContentWithAdsResponse=function(e,t){this.controller.setContentWithAdsResponse(e,t)}.bind(this),this.setContentWithAdsRequest=function(e,t){this.controller.setContentWithAdsRequest(e,t)}.bind(this),this.setShowCountdown=function(e){this.controller.setShowCountdown(e)}.bind(this)},hR=function(e,t){this.controller=new uR(e,t),this.streamEndedListener=function(e){this.controller.addStreamEndedListener(e)}.bind(this),this.addEventListener=function(e,t){this.controller.addEventListener(e,t)}.bind(this),this.getStreamManager=function(){return this.controller.getStreamManager()}.bind(this)},fR=function e(t,n){cR(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?(this.streamFormat=t,this.assetKey=n):window.console.error("assetKey error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},gR=function e(t,n,i){cR(this,e),"hls"===(t=t.toLowerCase())||"dash"===t?"dash"!==t?"string"==typeof n?"string"==typeof i?(this.streamFormat=t,this.cmsId=n,this.videoId=i):window.console.error("videoId error: value must be string."):window.console.error("cmsId error: value must be string."):window.console.error("streamFormat error: DASH streams are notcurrently supported by this plugin."):window.console.error("VodStream error: incorrect streamFormat.")},mR=nR.registerPlugin||nR.plugin;function vR(e,t,n){e.on("timeupdate",r);const i=()=>e.off("timeupdate",r);return i;function r(){const r=e.currentTime();r>=t&&(i(),n(r))}}function yR(e){var t,n;let{log:i,player:r}=e;null!==(t=r.ads)&&void 0!==t&&t.isInAdMode()&&null!==(n=r.ima)&&void 0!==n&&n.controller.sdkImpl.isAdPlaying()?(i.extend("ad")(""),r.ima.pauseAd()):(i.extend("player")(""),r.pause())}function bR(e){let{log:t,player:n}=e;n.addClass("vjs-waiting"),yR({log:t,player:n}),t("adding spinner")}function _R(e,t,n){return e.has(t)?e.get(t):n}function TR(e,t,n){return function(e,t,n){return new Map(e).set(t,n)}(e,t,n(_R(e,t)))}function wR(e,t){const n=new Map;for(const[i,r]of e)n.set(i,t(i,r));return n}function SR(e,t){return function(e,t){const n=new Map;for(const[i,r]of e)t(i)&&n.set(i,r);return n}(e,(e=>e!==t))}function kR(e){return e.playerState&&["contentWaiting","contentPlaying","adPlaying","adsWaiting","started"].includes(e.playerState.getStateName())}function IR(e,t){return _R(e.molFeVideoPlayers,t,{}).playing}function CR(e){return function(e,t){for(const[n,i]of e)if(t(0,i))return!0;return!1}(e,((e,t)=>{let{playing:n}=t;return n}))}function ER(){const{DM:e}=n.g,t=new Map;return e&&e.molFeVideoplayer&&e.molFeVideoplayer.forEachPlayer&&e.molFeVideoplayer.forEachPlayer((function(){const e=kR(this);t.set(this,{inView:Qu(this.el()),playing:e,shouldResume:e})})),t}function AR(e,t){return t.playing||e.seeking||t.mpuPlayerDisplayed?t:{...t,adInteraction:!1,playing:t.focused,shouldResume:!0,molFeVideoPlayers:wR(t.molFeVideoPlayers,((e,t)=>({...t,playing:!1,shouldResume:!1})))}}function PR(e,t){return!t.playing||e.seeking?t:{...t,playing:!1,shouldResume:!(t.focused&&!t.adInteraction)&&t.shouldResume}}function xR(e,t){let{playing:n}=e;var i;n?kR(i=t)||i.play():function(e){kR(e)&&e.pause()}(t)}function OR(e){let{handleInitAcitivity:t,broker:i,log:r,player:a,store:o}=e;const s=new tn.JT;s.add(function(e){const t=new tn.JT;return t.addEventListener(window,"blur",(()=>e.dispatch({type:"blur"}))),t.addEventListener(window,"focus",(()=>e.dispatch({type:"focus"}))),()=>t.dispose()}(o)),s.add(function(e,t){const{DM:i}=n.g;if(!i)return void t("no mol-fe video players");const r=new Ju({threshold:.5}),a=new tn.JT;return i.later("videoplayer-ready",(()=>{function o(n){t("setupHandlers",n);const i=a.on(n,"play",(()=>{e.dispatch({type:"playMolFeVideoPlayer",molFeVideoPlayer:n})})),r=a.on(n,"pause",(()=>{e.dispatch({type:"pauseMolFeVideoPlayer",molFeVideoPlayer:n})}));n.on("dispose",(()=>{t("DISPOSING",n.id()),i(),r(),a.remove(i),a.remove(r),e.dispatch({type:"disposeMolFeVideoPlayer",molFeVideoPlayer:n})}))}i.molFeVideoplayer.forEachPlayer((function(){o(this),a.add(r.observe(this.el(),((t,n)=>{n?e.dispatch({type:"scrollMolFeVideoPlayerInToView",molFeVideoPlayer:this}):e.dispatch({type:"scrollMolFeVideoPlayerOutOfView",molFeVideoPlayer:this})})))})),t("molFeVideoPlayers Found",Object.keys(e.state.molFeVideoPlayers)),n.g.DM.molFeVideoplayer.on("videoPlaying",(n=>{e.state.molFeVideoPlayers.has(n.player)||(t("new molFeVideoPlayer detected",n.player.id()),o(n.player),e.dispatch({type:"newMolFeVideoPlayerDetected",molFeVideoPlayer:n.player}))}))})),()=>a.dispose()}(o,r)),s.add(function(e,t,i){const r=new tn.JT;return r.on(e,"play",(function(){t.dispatch({type:"loading"})})),r.on(e,"playing",(function(){t.dispatch({type:"loaded"})})),r.on(e,"play/pause toggle",(function(){t.dispatch({type:"togglePlay",seeking:e.seeking()})})),r.on(e,"ads-manager",(r=>function(i,r){let{adsManager:a}=i;const{google:o}=n.g;t.dispatch({type:"startAdMode"}),a.addEventListener(o.ima.AdEvent.Type.CLICK,(()=>{!function(e){t.dispatch({type:"ad click"}),e.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"videoAdClicked"}})}(r)})),a.addEventListener(o.ima.AdEvent.Type.RESUMED,(()=>{return n=!0,void t.dispatch({type:"play",ad:n,seeking:e.seeking()});var n})),a.addEventListener(o.ima.AdEvent.Type.PAUSED,(()=>{return n=!0,void t.dispatch({type:"pause",ad:n,seeking:e.seeking()});var n}))}(r,i))),r.on(e,"adstart",(function(){t.dispatch({type:"startAdMode"})})),r.on(e,"adend",a),r.on(e,"adskip",a),r.on(e,"ads-ad-started",(function(){t.dispatch({type:"adHasStarted"})})),()=>r.dispose();function a(){t.dispatch({type:"finishAdMode"})}}(a,o,i));const d=s.add(o.subscribe(((e,n)=>{let{playing:i}=n;i&&(d(),t())})));s.add(o.subscribe(((e,t)=>function(e,t,n,i){for(const[e,t]of i.molFeVideoPlayers)xR(t,e);!function(e,t,n){let{playing:i}=n;i?function(e){var t;let{log:n,player:i}=e;i.ima&&null!==(t=i.ads)&&void 0!==t&&t.inAdBreak()?(n.extend("ad")(""),i.ima.resumeAd()):i.paused()&&(n.extend("player")(""),i.play())}({log:t,player:e}):yR({log:t,player:e})}(e,t,i)}(a,r,0,t))));const{cancel:l}=i.on("display mpu_player",(()=>{o.dispatch({type:"displayMpuPlayer"})}));s.add(l);const{cancel:u}=i.on("destroy mpu_player",(()=>{o.dispatch({type:"destroyMpuPlayer"})}));s.add(u),a.on("dispose",(()=>s.dispose()))}function DR(e){let{broker:t,getConfig:n,log:i}=e;const{pauseAdsOnBlur:r=!0,pauseContentIfAdNotPaused:a=!0}=n("players.flyoutConfig")||{},o=async function(e){let{broker:t,getConfig:n,log:i}=e;const r=t.until("ad rendered","billboard");let a=n("players.chromeless.dmplayer.v3.delayBeforeStartPlayer",2e3);if(n("plugins.enabled").includes("chromelessWaitForBillboard")){const e=Date.now();await r;const t=Date.now()-e;a=t>a?0:a-t}i(`Waiting ${a}ms until I allow you to play`),await(0,et.Vs)(a)}({broker:t,getConfig:n,log:i}),s=function(e){let{log:t,pauseAdsOnBlur:n=!0,pauseContentOnBlur:i=!0}=e;return new Qt(function(e){let{pauseAdsOnBlur:t,pauseContentOnBlur:n}=e;return(e,i)=>{let r,a;switch(e.type){case"ad click":return{...i,adInteraction:!0,shouldResume:!0};case"blur":return i.focused?{...i,focused:!1,playing:!(i.adMode?t:n),molFeVideoPlayers:wR(i.molFeVideoPlayers,((e,r)=>({...r,playing:!(i.adMode?t:n)})))}:i;case"focus":return i.focused?i:(r=wR(i.molFeVideoPlayers,((e,t)=>({...t,playing:t.inView&&t.shouldResume}))),{...i,adInteraction:!1,focused:!0,molFeVideoPlayers:r,playing:i.shouldResume&&!CR(r)&&!i.mpuPlayerDisplayed});case"play":return AR(e,i);case"pause":return PR(e,i);case"togglePlay":return i.playing?PR(e,i):AR(e,i);case"startAdMode":return i.adMode?i:{...i,adMode:!0,loading:!0};case"adHasStarted":return{...i,loading:!1};case"finishAdMode":return i.adMode?{...i,adInteraction:!1,adMode:!1,loading:!1}:i;case"loading":return i.loading?i:{...i,loading:!0};case"loaded":return i.loading?{...i,loading:!1}:i;case"scrollMolFeVideoPlayerInToView":return r=TR(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!0,playing:i.focused&&e.shouldResume}})),{...i,molFeVideoPlayers:r,playing:i.focused&&!CR(r),shouldResume:i.focused?i.playing:i.shouldResume};case"scrollMolFeVideoPlayerOutOfView":return r=TR(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...e,inView:!1,playing:!1,shouldResume:i.focused?e.playing:e.shouldResume}})),{...i,molFeVideoPlayers:r,playing:i.focused&&i.shouldResume&&!CR(r)};case"playMolFeVideoPlayer":return IR(i,e.molFeVideoPlayer)?i:{...i,playing:!1,shouldResume:i.playing||i.mpuPlayerDisplayed,molFeVideoPlayers:TR(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!0,shouldResume:!0}}))};case"pauseMolFeVideoPlayer":return IR(i,e.molFeVideoPlayer)?{...i,playing:i.shouldResume,molFeVideoPlayers:TR(i.molFeVideoPlayers,e.molFeVideoPlayer,(function(){return{...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},playing:!1,shouldResume:!1}}))}:i;case"newMolFeVideoPlayerDetected":return a=i.focused&&kR(e.molFeVideoPlayer),r=i.molFeVideoPlayers.set(e.molFeVideoPlayer,{inView:Qu(e.molFeVideoPlayer.el()),playing:a,shouldResume:a}),{...i,playing:i.focused&&!CR(r),shouldResume:i.focused?i.playing:i.shouldResume,molFeVideoPlayers:r};case"disposeMolFeVideoPlayer":return{...i,molFeVideoPlayers:SR(i.molFeVideoPlayers,e.molFeVideoPlayer),playing:!0,shouldResume:!0};case"displayMpuPlayer":return{...i,mpuPlayerDisplayed:!0,playing:!1};case"destroyMpuPlayer":return{...i,mpuPlayerDisplayed:!1,playing:i.shouldResume&&i.focused&&!CR(i.molFeVideoPlayers)};case"__INIT__":return{adInteraction:!1,adMode:!1,focused:document.hasFocus(),loading:!1,pauseTriggeredDuringLoad:!1,playing:document.hasFocus(),shouldResume:!0,molFeVideoPlayers:ER(),mpuPlayerDisplayed:!1};default:return i}}}({pauseAdsOnBlur:n,pauseContentOnBlur:i}),{adInteraction:!1,adMode:!1,focused:!1,loading:!1,pauseTriggeredDuringLoad:!1,playing:!1,shouldResume:!1,molFeVideoPlayers:new Map,mpuPlayerDisplayed:!1},t)}({log:i.extend("store"),pauseAdsOnBlur:r,pauseContentOnBlur:a});return function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};OR({handleInitAcitivity:n,broker:t,log:i,player:e,store:s}),o.then((()=>s.init()))}}mR("ima",(function(e){this.ima=new pR(this,e)})),mR("imaDai",(function(e,t){if(e instanceof fR)t.streamType="live",t.assetKey=e.assetKey;else{if(!(e instanceof gR))return void window.console.error("initDai() first parameter must be an instance of LiveStream or VodStream.");t.streamType="vod",t.cmsId=e.cmsId,t.videoId=e.videoId}t.streamFormat=e.streamFormat,this.imaDai=new hR(this,t)}));let RR=e=>{const t=e.playlist.autoadvance_;t.timeout&&e.clearTimeout(t.timeout),t.trigger&&e.off("ended",t.trigger),t.timeout=null,t.trigger=null};const LR=(e,t)=>{var n;RR(e),"number"==typeof(n=t)&&!isNaN(n)&&n>=0&&n<1/0?(e.playlist.autoadvance_.delay=t,e.playlist.autoadvance_.trigger=function(){const n=()=>LR(e,t);e.one("play",n),e.playlist.autoadvance_.timeout=e.setTimeout((()=>{RR(e),e.off("play",n),e.playlist.next()}),1e3*t)},e.one("ended",e.playlist.autoadvance_.trigger)):e.playlist.autoadvance_.delay=null},MR=e=>!!e&&"object"==typeof e,UR=(e,t)=>{let n=e,i=t;return"object"==typeof e&&(n=e.src),"object"==typeof t&&(i=t.src),/^\/\//.test(n)&&(i=i.slice(i.indexOf("//"))),/^\/\//.test(i)&&(n=n.slice(n.indexOf("//"))),n===i},jR=(e,t)=>{for(let n=0;n<e.length;n++){const i=e[n].sources;if(Array.isArray(i))for(let e=0;e<i.length;e++){const r=i[e];if(r&&UR(r,t))return n}}return-1};const NR=function(e,t){!function(e,t,n=0){let i=null,r=!1;const a=e.playlist=(t,n=0)=>{if(r)throw new Error("do not call playlist() during a playlist change");if(Array.isArray(t)){const o=Array.isArray(i)?i.slice():null,s=t.slice();i=s.slice(),i.filter((e=>MR(e))).length!==i.length&&(i=(e=>{const t=[];let n;return e.forEach((e=>{MR(e)?n=e:(n=Object(e),n.originalValue=e),t.push(n)})),t})(i)),(e=>{let t=1;e.forEach((e=>{e.playlistItemId_=t++}))})(i),r=!0,e.trigger({type:"duringplaylistchange",nextIndex:n,nextPlaylist:s,previousIndex:a.currentIndex_,previousPlaylist:o||[]}),r=!1,-1!==n&&a.currentItem(n),o&&e.setTimeout((()=>{e.trigger("playlistchange")}),0)}return i.map((e=>e.originalValue||e)).slice()};e.on("loadstart",(()=>{-1===a.currentItem()&&RR(e)})),a.currentIndex_=-1,a.player_=e,a.autoadvance_={},a.repeat_=!1,a.currentPlaylistItemId_=null,a.currentItem=e=>{if(r)return a.currentIndex_;if("number"==typeof e&&a.currentIndex_!==e&&e>=0&&e<i.length)return a.currentIndex_=e,((e,t)=>{const n=!e.paused()||e.ended();e.trigger("beforeplaylistitem",t.originalValue||t),t.playlistItemId_&&(e.playlist.currentPlaylistItemId_=t.playlistItemId_),e.poster(t.poster||""),e.src(t.sources),(e=>{const t=e.remoteTextTracks();let n=t&&t.length||0;for(;n--;)e.removeRemoteTextTrack(t[n])})(e),e.ready((()=>{if((t.textTracks||[]).forEach(e.addRemoteTextTrack.bind(e)),e.trigger("playlistitem",t.originalValue||t),n){const t=e.play();void 0!==t&&"function"==typeof t.then&&t.then(null,(e=>{}))}LR(e,e.playlist.autoadvance_.delay)}))})(a.player_,i[a.currentIndex_]),a.currentIndex_;const t=a.player_.currentSrc()||"";if(a.currentPlaylistItemId_){const e=((e,t)=>{for(let n=0;n<e.length;n++)if(e[n].playlistItemId_===t)return n;return-1})(i,a.currentPlaylistItemId_),n=i[e];if(n&&Array.isArray(n.sources)&&jR([n],t)>-1)return a.currentIndex_=e,a.currentIndex_;a.currentPlaylistItemId_=null}return a.currentIndex_=a.indexOf(t),a.currentIndex_},a.contains=e=>-1!==a.indexOf(e),a.indexOf=e=>{if("string"==typeof e)return jR(i,e);const t=Array.isArray(e)?e:e.sources;for(let e=0;e<t.length;e++){const n=t[e];if("string"==typeof n)return jR(i,n);if(n.src)return jR(i,n.src)}return-1},a.currentIndex=()=>a.currentItem(),a.lastIndex=()=>i.length-1,a.nextIndex=()=>{const e=a.currentItem();if(-1===e)return-1;const t=a.lastIndex();return a.repeat_&&e===t?0:Math.min(e+1,t)},a.previousIndex=()=>{const e=a.currentItem();return-1===e?-1:a.repeat_&&0===e?a.lastIndex():Math.max(e-1,0)},a.first=()=>{if(r)return;const e=a.currentItem(0);if(i.length)return i[e].originalValue||i[e];a.currentIndex_=-1},a.last=()=>{if(r)return;const e=a.currentItem(a.lastIndex());if(i.length)return i[e].originalValue||i[e];a.currentIndex_=-1},a.next=()=>{if(r)return;const e=a.nextIndex();if(e!==a.currentIndex_){const t=a.currentItem(e);return i[t].originalValue||i[t]}},a.previous=()=>{if(r)return;const e=a.previousIndex();if(e!==a.currentIndex_){const t=a.currentItem(e);return i[t].originalValue||i[t]}},a.autoadvance=e=>{LR(a.player_,e)},a.repeat=e=>void 0===e?a.repeat_:"boolean"==typeof e?(a.repeat_=!!e,a.repeat_):void lk.log.error("videojs-playlist: Invalid value for repeat",e),a.sort=t=>{i.length&&(i.sort(t),r||e.trigger("playlistsorted"))},a.reverse=()=>{i.length&&(i.reverse(),r||e.trigger("playlistsorted"))},a.shuffle=({rest:t}={})=>{let n=0,o=i;t&&(n=a.currentIndex_+1,o=i.slice(n)),o.length<=1||((e=>{let t=-1;const n=e.length-1;for(;++t<e.length;){const i=t+Math.floor(Math.random()*(n-t+1)),r=e[i];e[i]=e[t],e[t]=r}})(o),t&&i.splice(...[n,o.length].concat(o)),r||e.trigger("playlistsorted"))},Array.isArray(t)?a(t.slice(),n):i=[]}(this,e,t)};function BR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(lk.registerPlugin||lk.plugin)("playlist",NR),NR.VERSION="5.0.0";var FR={align:"top-left",class:"",content:"This overlay will show up while the video is playing",debug:!1,showBackground:!0,attachToControlBar:!1,overlays:[{start:"playing",end:"paused"}]},qR=lk.getComponent("Component"),VR=lk.dom||lk,HR=lk.registerPlugin||lk.plugin,zR=function(e){return"number"==typeof e&&e==e},WR=function(e){return"string"==typeof e&&/^\S+$/.test(e)},$R=function(e){var t,n;function i(t,n){var r;return r=e.call(this,t,n)||this,["start","end"].forEach((function(e){var t=r.options_[e];if(zR(t))r[e+"Event_"]="timeupdate";else if(WR(t))r[e+"Event_"]=t;else if("start"===e)throw new Error('invalid "start" option; expected number or string')})),["endListener_","rewindListener_","startListener_"].forEach((function(e){r[e]=function(t){return i.prototype[e].call(BR(BR(r)),t)}})),"timeupdate"===r.startEvent_&&r.on(t,"timeupdate",r.rewindListener_),r.debug('created, listening to "'+r.startEvent_+'" for "start" and "'+(r.endEvent_||"nothing")+'" for "end"'),r.hide(),r}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var r=i.prototype;return r.createEl=function(){var e=this.options_,t=e.content,n=e.showBackground?"vjs-overlay-background":"vjs-overlay-no-background",i=VR.createEl("div",{className:"\n        vjs-overlay\n        vjs-overlay-"+e.align+"\n        "+e.class+"\n        "+n+"\n        vjs-hidden\n      "});return"string"==typeof t?i.innerHTML=t:t instanceof Ah().DocumentFragment?i.appendChild(t):VR.appendContent(i,t),i},r.debug=function(){if(this.options_.debug){for(var e=lk.log,t=e,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];e.hasOwnProperty(i[0])&&"function"==typeof e[i[0]]&&(t=e[i.shift()]),t.apply(void 0,["overlay#"+this.id()+": "].concat(i))}},r.hide=function(){return e.prototype.hide.call(this),this.debug("hidden"),this.debug('bound `startListener_` to "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('unbound `endListener_` from "'+this.endEvent_+'"'),this.off(this.player(),this.endEvent_,this.endListener_)),this.on(this.player(),this.startEvent_,this.startListener_),this},r.shouldHide_=function(e,t){var n=this.options_.end;return zR(n)?e>=n:n===t},r.show=function(){return e.prototype.show.call(this),this.off(this.player(),this.startEvent_,this.startListener_),this.debug("shown"),this.debug('unbound `startListener_` from "'+this.startEvent_+'"'),this.endEvent_&&(this.debug('bound `endListener_` to "'+this.endEvent_+'"'),this.on(this.player(),this.endEvent_,this.endListener_)),this},r.shouldShow_=function(e,t){var n=this.options_.start,i=this.options_.end;return zR(n)?zR(i)?e>=n&&e<i:this.hasShownSinceSeek_?Math.floor(e)===n:(this.hasShownSinceSeek_=!0,e>=n):n===t},r.startListener_=function(e){var t=this.player().currentTime();this.shouldShow_(t,e.type)&&this.show()},r.endListener_=function(e){var t=this.player().currentTime();this.shouldHide_(t,e.type)&&this.hide()},r.rewindListener_=function(e){var t=this.player().currentTime(),n=this.previousTime_,i=this.options_.start,r=this.options_.end;t<n&&(this.debug("rewind detected"),zR(r)&&!this.shouldShow_(t)?(this.debug("hiding; "+r+" is an integer and overlay should not show at this time"),this.hasShownSinceSeek_=!1,this.hide()):WR(r)&&t<i&&(this.debug("hiding; show point ("+i+") is before now ("+t+") and end point ("+r+") is an event"),this.hasShownSinceSeek_=!1,this.hide())),this.previousTime_=t},i}(qR);lk.registerComponent("Overlay",$R);var GR=function(e){var t=this,n=lk.mergeOptions(FR,e);Array.isArray(this.overlays_)&&this.overlays_.forEach((function(e){t.removeChild(e),t.controlBar&&t.controlBar.removeChild(e),e.dispose()}));var i=n.overlays;delete n.overlays,this.overlays_=i.map((function(e){var i=lk.mergeOptions(n,e),r="string"==typeof i.attachToControlBar||!0===i.attachToControlBar;if(!t.controls()||!t.controlBar)return t.addChild("overlay",i);if(r&&-1!==i.align.indexOf("bottom")){var a=t.controlBar.children()[0];if(void 0!==t.controlBar.getChild(i.attachToControlBar)&&(a=t.controlBar.getChild(i.attachToControlBar)),a){var o=t.controlBar.children().indexOf(a);return t.controlBar.addChild("overlay",i,o)}}var s=t.addChild("overlay",i);return t.el().insertBefore(s.el(),t.controlBar.el()),s}))};GR.VERSION="2.1.5",HR("overlay",GR);var KR=n(7430),XR=n.n(KR);(0,tt.fo)("players.commercial",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},init(e){let{getConfig:t,isHomepage:i,removePlugins:r}=e;r(["players.onlyOneActivePlayer","chromelessv2.dmplayer"]);const a=!t("plugins.enabled").includes("players.flyoutManager")&&(n.g.PageCriteria.containsVideo||n.g.document.querySelector('meta[property="og:video"]')),o=t("players.chromeless.dmplayer.v3.domainExclusions",[]),s=t("players.chromeless.dmplayer.v3.articleIdExclusions",[]).map((e=>e.toString())),d=o.length&&(o.includes(n.g.location.hostname)||o.includes(n.g.location.hostname.replace(/www./,"")))||n.g.PageCriteria.articleId&&s.length&&s.includes(n.g.PageCriteria.articleId),l=t("players.chromeless.dmplayer.v3.enableWifiDetection",!1),u=navigator.connection&&"wifi"===navigator.connection.type;(d||a||Fa&&(!i||!Fa||"desktop"!==(0,K.ej)("mol-home")&&"true"!==(0,K.ej)("mol-desktop"))||l&&!u||!l&&Fa)&&r(["players.commercial"])},run:async function(e){let{broker:t,doc:i,getConfig:r,log:a,pageCriteria:o}=e;const s=DR({broker:t,getConfig:r,log:a.extend("mediator")}),d=function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("slotDescriptions.initial",{}).mpu_player;return r?e=>{const n=()=>{i("forcing pauseAndLoad"),bR({log:i,player:e})},a=(0,tn.Vl)(e,"adserror",(async()=>{const a=new tn.JT;a.on(e,"play",n),a.on(e,"playing",n),t.emit("display mpu_player"),bR({log:i,player:e}),await async function(e){let{broker:t,mpuPlayerConfig:n,log:i,player:r}=e;return new Promise((e=>{var a;const o="mpu_player",s=(null==n||null===(a=n.bannerFallback)||void 0===a?void 0:a.displayTimeout)||5e3,{id:d=o,parentId:l=o,pos:u=o}=n;t.once("ad rendered","mpu_player",(async n=>{let{isEmpty:a}=n;const o=r.el().parentNode;i("ad rendered"),a?i("ad empty"):(o.classList.add("mpu-ad-displayed"),await(0,et.Vs)(s),o.classList.remove("mpu-ad-displayed")),t.emit("destroy slot","mpu_player"),e()})),t.emit("slot mounted",{id:d,parentId:l,pos:u})}))}({broker:t,mpuPlayerConfig:r,log:i,player:e}),a.dispose(),t.emit("destroy mpu_player"),e.removeClass("vjs-waiting"),i("resume player")}));e.on("dispose",a)}:()=>{}}({broker:t,getConfig:r,log:a.extend("mpuPlayer")}),l=r("players.commercial.poster","//creative.dailymail.co.uk/videos/top-videos.jpg"),u=function(e){let{broker:t,getConfig:i,log:r}=e;const a="chromelessPlayer"===i("players.commercial.closeButton.style","commercialPlayer")?"commercial-player-close-chromeless":"commercial-player-close",o=i("players.commercial.closeButton.addAfterImpression",!1),s=i("players.commercial.closeButton.addAfterTimeout",6e4);return e=>{var i;function d(){r("closing the player"),e.dispose(),t.emit("set slots enabled",["chromeless"],!1),t.emit("chromeless player closed"),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}})}r("adding");const l=null!==(i=n.g.MobileUtils)&&void 0!==i&&i.isMobile()?"touchend":"click",u=e.addChild("button",{text:"Close"}),c=new tn.JT;let p;const h=()=>{u.addClass(a),u.on(l,d),e.on("dispose",(()=>u.off(l,d))),c.dispose(),clearTimeout(p)};o?(()=>{const t=()=>{p||(i(),p=setTimeout((()=>{r("adding closebutton due to timeout"),h()}),s))},i=c.one(e,"playing",t);c.one(e,"adserror",h),c.one(e,"ads-manager",(i=>{let{adsManager:a}=i;c.addEventListener(a,n.g.google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,h),c.addEventListener(a,n.g.google.ima.AdEvent.Type.SKIPPED,h),c.one(e,"ads-ad-started",(()=>{c.one(e,"playing",(()=>{r("playing, show close button"),h()}))})),t()}))})():h()}}({broker:t,getConfig:r,log:a.extend("closeButton")}),c=function(e){let{log:t}=e;return e=>{var i;t("adding");const r=null!==(i=n.g.MobileUtils)&&void 0!==i&&i.isMobile()?"touchend":"click",a=e.addChild("component");a.addClass("commercial-player-big-controls"),a.hide(),e.one("playing",(()=>{a.show()}));const o=a.addChild("button",{text:"previous"});o.addClass("commercial-player-big-control"),o.addClass("commercial-player-previous"),o.on(r,(()=>e.trigger("skip to previous item")));const s=a.addChild("playToggle");s.addClass("commercial-player-big-control"),s.addClass("commercial-player-big-control"),s.on(r,(()=>e.trigger("play/pause toggle")));const d=a.addChild("button",{text:"Next"});d.addClass("commercial-player-big-control"),d.addClass("commercial-player-next"),d.on(r,(()=>e.trigger("skip to next item"))),e.on("playlistitem",(()=>{e.playlist.previousIndex()===e.playlist.currentIndex()?(t("disabling previous control"),o.disable()):o.enable()}))}}({log:a.extend("bigControls")}),{applyPlaylist:p,playlistItems:h}=await async function(e){var t;let{log:i,poster:r,url:a}=e;i("fetching top videos",a);const o=await fetch(a),s=await o.json(),d=(0,ne.TV)((0,ne.DZ)((e=>!!e.url),(e=>({articleUrl:e.articleUrl,videoId:e.externalVideoIdent,headline:e.headline,poster:r,provider:e.source,sources:[{src:e.url,type:"video/mp4"}]})),s[null===(t=n.g.PageCriteria)||void 0===t?void 0:t.channel]||Object.values(s).flat()));return i(d),{applyPlaylist:function(e){e.playlist(d),e.ima||(e.on("skip to next item",(()=>e.playlist.next())),e.on("skipt to previous item",(()=>e.playlist.previous())))},playlistItems:d}}({log:a.extend("playlist"),poster:l,url:r("players.commerical.playlistURL","https://secured.dailymail.co.uk/feeds/commercial/topVideos.json")}),f=function(e){let{broker:t,log:n}=e;const i=new Promise((e=>{t.once("creative updated plugins",(t=>{((0,Y.nr)(t,"chromeless.dmplayer")&&!t["chromeless.dmplayer"]||(0,Y.nr)(t,"players.commercial")&&!t["players.commercial"])&&(n("plugin cancelled by creative"),e())}))}));return e=>{i.then((()=>{e.dispose()}))}}({broker:t,log:a}),g=await async function(e){let{poster:t,videoId:n}=e;await(0,Ne.untilBodyAvailable)();const i=document.createElement("div");return i.id="commercial-player",i.classList.add("hide"),i.innerHTML=XR()({poster:t,videoId:n}),document.body.appendChild(i),i}({poster:l,videoId:"commercial-player-video"}),{applyIMA:m,initAdRequest:v}=await async function(e){let{broker:t,doc:i,getConfig:r,log:a,pageCriteria:o,playlist:s}=e;await t.invoke("load script","//imasdk.googleapis.com/js/sdkloader/ima3.js");const d=r("dfpAccountCode",5765),{pageLoadTimeout:l=5e3}=r("plugins.slots.jwplayer.v2",{});let u=1;const c=m(s[0]);let p="",h=0;return{applyIMA:function(e){if(a("initializing ads"),e.isDisposed())return;e.ima({contribAdsSettings:{debug:a.enabled},debug:a.enabled,numRedirects:10});const o=i.getElementById("commercial-player-video_html5_api");async function d(t){bR({log:a,player:e});const n=await m(t);e.one("playlistitem",((t,i)=>{u++;const r=f(i,n,u);a("requesting ads",{src:i.sources[0].src,adTagUrl:r}),e.ima.setContentWithAdTag(i.sources[0].src,r),e.ima.requestAds()}))}(navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i))&&null!=o&&o.hasAttribute("controls")&&(null==o||o.removeAttribute("controls")),e.ima.initializeAdDisplayContainer(),e.on("adserror",(e=>{let{data:n}=e;const{AdErrorEvent:i}=n;if(void 0===i.getError)return;const r={adErrorCode:i.getError().getErrorCode()||i.getError().getVastErrorCode(),errorMessage:i.getError().getMessage(),offset:h,platform:"chromeless",playerId:"jwplayer",trackingType:"chromeless"};a("adserror",r),t.emit("video.advert-failed",r),t.emit("video.no-ad-shown",r)})),e.on("ads-manager",(e=>{let{adsManager:i}=e;const r=a.extend("adsManager");r("created"),i.addEventListener(n.g.google.ima.AdEvent.Type.IMPRESSION,(e=>{const n={adPodInfo:{maxDuration:(i=e.getAd()).getAdPodInfo().getMaxDuration()},adWrapperSystems:i.getWrapperAdSystems(),title:i.getTitle(),adSystem:i.getAdSystem(),contentType:i.getContentType(),adWrapperCreativeIds:i.getWrapperCreativeIds(),adWrapperIds:i.getWrapperAdIds(),mediaUrl:i.getMediaUrl(),skippable:-1!==i.getSkipTimeOffset(),height:i.getVastMediaHeight(),width:i.getVastMediaWidth()};var i;r("impression",n),t.emit("video.ad-impression",{adImpression:n,offset:h,platform:"chromeless",playerId:"jwplayer",tag:p})}))})),e.on("playlistitem",(async function(){let t=!1;const n=r("players.commercial.midRoll",[]).map(Number),i=new tn.JT,o=a.extend("midroll"),d=(e,t,n)=>{const i=document.createElement("div");return i.className="vjs-marker",i.style.left=`${Math.ceil(n/t*100)}%`,o("elem.style.left",i.style.left),i.innerHTML='<div class="top">\n                                      <p>Advertisement</p>\n                                      <i></i>\n                                  </div>',e.appendChild(i),i};function l(){t=!0,i.dispose()}async function c(n,i,r){if(t)return;o("time to build ad tag url",n);const a=p=f({...n,midroll:!0},await r,u);h=i,o("requesting ads",{src:n.sources[0].src,nextAdTagUrl:a}),t||(e.ima.changeAdTag(a),e.ima.requestAds())}i.one(e,"loadeddata",(async()=>{const t=n.filter((t=>e.duration()>t+5));o("Setting up midrolls",{config:n,filtered:t,mediaDuration:e.duration()});const r=e.$(".vjs-progress-control.vjs-control");for(const n of t){const t=d(r,e.duration(),n),a=s[e.playlist.currentIndex()],l=m({...a,offset:n});l.then((e=>o(`auction finished for midroll offset ${n}`,e)));const u=()=>t.parentNode.removeChild(t),p=i.one(e,"skip to next item",u),h=i.one(e,"skip to previous item",u),f=i.one(e,"playlistitem",u);i.add(vR(e,n,(e=>{const t=e-n;u(),p(),h(),f(),t>=0&&t<2?c(a,n,l).catch((e=>o.error(e))):o(`skipping midroll offset: ${n}`)})))}})),i.one(e,"playlistitem",(()=>l)),i.on(e,"skip to next item",l),i.on(e,"skip to previous item",l)})),e.on("playlistitem",(function(){let t,n;const i=new tn.JT;i.add(function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e.on("timeupdate",r);const i=()=>e.off("timeupdate",r);return i;function r(){e.duration()-e.currentTime()<=n&&(i(),t())}}(e,(function(){const n=s[e.playlist.nextIndex()];a("time to build ad tag url",{nextItem:n}),t=m(n)}),l/1e3)),i.one(e,"ended",(async()=>{n=await t,e.playlist.next()})),i.one(e,"playlistitem",((t,i)=>{r(),o(),u++;const s=p=f(i,n,u);h=0,a("requesting ads",{src:i.sources[0].src,nextAdTagUrl:s}),e.ima.setContentWithAdTag(i.sources[0].src,s),e.ima.requestAds()}));const r=i.one(e,"skip to next item",d),o=i.one(e,"skip to previous item",d);function d(){i.dispose()}})),e.on("skip to next item",(async()=>{await d(s[e.playlist.nextIndex()]),e.playlist.next()})),e.on("skip to previous item",(async()=>{await d(s[e.playlist.previousIndex()]),e.playlist.previous()}))},initAdRequest:async function(e){const t=p=f(s[0],await c,u);e.ima.setContentWithAdTag(s[0].sources[0].src,t),e.ima.requestAds()}};function f(e,t,n){let{articleUrl:i,headline:s,midroll:l,provider:u,videoId:c}=e;const p=Z()({correlator:Date.now(),description_url:i,env:"vp",gdfp_req:"1",impl:1,iu:`/${d}/dm.chromelessvideo/${r("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros")}/${l?"midroll":"preroll"}`,output:"xml_vast4",vpa:"auto",sz:"401x225",unviewed_position_start:"1",url:`${location.protocol}//${location.hostname}${location.pathname}`,vid:c,vpmute:"1",cust_params:{channel:null==o?void 0:o.channel,oov:!document.hasFocus(),length:30,videoWidth:401,videoHeight:225,play:n,embed:!1,ttid:c,domain:"dailymail",flyaway:!1,s:"off",videoTitle:s,video:u,environment:"production",pos:l?"jw_midroll":"jw_preroll",sz:"401x225"}},t,te()),h=new URL("https://pubads.g.doubleclick.net/gampad/ads");for(const[e,t]of Object.entries(p))e&&(a("adding",e,t),h.searchParams.set(e,g(t)));return a("adTag",h.toString()),h.toString()}function g(e){switch(typeof e){case"string":return e;case"number":return e.toString();case"boolean":return e?"1":"0";default:return new URLSearchParams(e).toString()}}async function m(e){let{articleUrl:n,videoId:i,offset:r=0}=e;return a("getAsyncVideoTags",r),new Promise((e=>{let o={};Q({args:{articleURL:n,videoId:i,offset:r,platform:"chromeless",pos:"jwplayer",screen:{width:401,height:225},timeout:l},broker:t,observable:(t,n)=>{t?(a.error("error getting tags",t),e(o)):n?o=(0,Y.Yb)({...o,...n,cust_params:{...o.cust_params||{},...n.cust_params||{}}}):e(o)},log:a})}))}}({broker:t,doc:i,getConfig:r,log:a.extend("ima"),pageCriteria:o,playlist:h}),y=function(e){let{broker:t,log:i}=e;return e=>{var r;const a=null!==(r=n.g.MobileUtils)&&void 0!==r&&r.isMobile()?"touchend":"click";let o,s,d,l,u=!0;function c(){u&&s&&o?p(o,s):!u&&s&&p("Read more",s)}function p(n,r){const o=n+r;o!==l&&(l=o,i(n,r),e.overlay({overlays:[{align:"top",class:"commercial-player-headline",content:n,start:"playing",end:"ended"}]}),function(n){if(d&&d(),n){const r=()=>{t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"articleUrlClicked"}}),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"close"}}),location.href=n},o=e.$(".vjs-overlay");i("adding click event",{overlay:o,articleUrl:n}),e.on(o,a,r),d=()=>{i("removing click event",{overlay:o,articleUrl:n}),e.off(o,a,r)}}}(r))}p("",""),e.on("playlistitem",((e,t)=>{let{articleUrl:n,headline:i}=t;o=i,s=n,c()})),e.on("userinactive",(()=>{u=!1,c()})),e.on("useractive",(()=>{u=!0,c()}))}}({broker:t,log:a.extend("headline")}),b=function(e){let{broker:t,log:n,container:i,poster:r,videoId:a}=e;document.documentElement.classList.add("molads_chromeless_on"),n("instatiating videojs");const o=nR(a,{children:{mediaLoader:!0,posterImage:!!r,textTrackDisplay:!0,loadingSpinner:!0,bigPlayButton:!1,liveTracker:!0,errorDisplay:!0,textTrackSettings:!0,resizeManager:!0,controlBar:{children:["currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","volumePanel","remainingTimeDisplay","fullscreenToggle"]}}});return o.el()._player=o,delete o.el().player,o.muted(!0),o.one("play",(()=>{i.classList.remove("hide"),t.emit("send event to bidmax",{type:"custom",payload:{module:"chromeless",event:"open"}})})),o.one("playing",(()=>{setTimeout((()=>{const e=document.getElementById("commercial-player-video_html5_api");e&&(e.style.height="",e.style.width="")}))})),o.on("dispose",(()=>{i.remove()})),o}({broker:t,container:g,log:a.extend(""),poster:l,videoId:"commercial-player-video"});f(b);try{m(b),d(b),p(b),y(b),u(b),c(b),s(b,(async()=>{a("try to start the player");try{b.autoplay("muted"),await v(b)}catch(e){a.warn("could not play",e)}}))}catch(e){a.warn(e)}}}),(0,tt.fo)("players.remixd",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("plugins.players.remixd.scriptUrl","//tags.remixd.com/player/v5/index.js"),o=i("plugin.player.remixd.paragraphIndex",5),s={insertMethod:async e=>{if(!e)return void t.emit("send event to bidmax",{type:"custom",payload:{event:"noPlacement",module:ZR}});const i=function(e,t){const n={"remixd-player-complete":"complete","remixd-player-error":"error","remixd-player-impression":"impression","remixd-player-mute":"mute","remixd-player-pause":"pause","remixd-player-play":"play"},i=t.extend("event received");return(0,tn.Oo)(window,"message",(t=>{if(!t.data||"remixd"!==t.data.scope||!t.data.data)return;const r=t.data.data,a=null==r?void 0:r.event,o=null==r?void 0:r.error,s=null==n?void 0:n[a];s&&(i(t.data.data),e.emit("send event to bidmax",{type:"custom",payload:{event:s,module:ZR,error:o}}))}))}(t,r);!function(e,t){const n=document.createElement("div");n.id="remixd-audio-player";const i=document.createElement("script");i.id="remixd-audio-player-script",i.src=e,i.async=!0,n.appendChild(i),t.parentElement.insertBefore(n,t)}(a,e);try{await(0,et.gb)((()=>n.g._rmxd)),r("script loaded"),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoaded",module:ZR}})}catch(e){r("error while loading",a,":",e),t.emit("send event to bidmax",{type:"custom",payload:{event:"scriptLoadErr",module:ZR,error:e}}),i()}},log:r,margin:i("plugin.player.remixd.margin",{top:30,bottom:60}),sourcePlugin:"remixd",targetParagraphIndex:o};r("requesting placement",o),t.register("placement requests",(()=>s))},vendorIds:{gdpr:[768]}});const ZR="remixd";(0,tt.fo)("bidders.yahoossp.display",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:i}=e;const r=n("plugins.bidders.verizon.v2.display",{});t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})}));const a=Object.entries(r.adUnits).filter((e=>{let[t]=e;return!!n(`slotDescription.${t}`)})).map((e=>{var t;let[i,a]=e;return{code:i,bids:[{bidder:"yahoossp",params:{dcn:r.dcn,pos:`${r.posPrefix}_${i}`}}],mediaTypes:{banner:{sizes:null!==(t=null==a?void 0:a.sizes)&&void 0!==t?t:n(`slotDescription.${i}.size`,[])}}}}));i.extend("adUnitTemplates")(a),t.register("provide prebid adUnits",(()=>a))}}),(0,tt.fo)("bidders.yahoossp.video",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[25]},run(e){let{broker:t,getConfig:n,log:i}=e;t.once("prebid loaded",(e=>{e.setConfig({yahoossp:{endpoint:"https://webc2s.pubgw.yahoo.com/pubgw/v1/hb/web/prebid",mode:"all"}})})),t.register("provide video adUnits",((e,t,r)=>{const a=n("plugins.bidders.yahoossp.video",{});if(!a)return{};const o={code:e,bids:[{bidder:"yahoossp",params:{dcn:a.siteId,pos:"jwplayer"===e?a.adUnits[e][0===r?"preroll":"midroll"].placementId:"video"===e?a.adUnits[e][t?"autoplay":"ctp"].placementId:void 0}}]};return i.extend("ad unit")(o),o}))}}),(0,tt.fo)("userId",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;const i=function(){const e="ads.user.id";let t=localStorage.getItem(e);return t||(t=(0,mo.Z)(),localStorage.setItem(e,t)),t}();n("userId",i),t.register("provide userId",(()=>i))}}),(0,tt.fo)("trackers.pubProvidedId",{purposeIds:{gdpr:[1,3,4]},vendorIds:{gdpr:"N/A"},async run(e){let{broker:t,log:n}=e;const[i,[r],a]=await Promise.all([t.invoke("provide userId"),t.until("prebid loaded"),t.invoke("provide domain")]);if(n({userId:i,domain:a}),r&&i&&a){const e={userSync:Mu(r.getConfig("userSync"),{userIds:[{name:"pubProvidedId",params:{eids:[{source:a,uids:[{id:i,atype:1,ext:{stype:"ppuid"}}],atype:"ppuid"}]}}]})};n(e),r.setConfig(e)}}}),(0,tt.fo)("trackers.applePrivateRelay",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run(e){let{broker:t,log:n,win:i}=e;n({applePrivateRelay:i.applePrivateRelay}),t.emit("set page level targeting",{applerelay:!!i.applePrivateRelay})}});const YR=["left","top","width","height"];function JR(e){if(!e)return;e.nodeType===Node.TEXT_NODE&&(e=e.parentNode);const t=e.id?`#${e.id}`:"",n=Array.from(e.classList||[]),i=n.length?`.${n.join(".")}`:"";return(t||i?"":`${JR(e.parentElement)} > `)+`${e.tagName.toLowerCase()}${t}${i}`}function QR(){try{return window.location.hash||"none"}catch(e){return"none"}}function eL(e,t,n){tL(e,t),t.set(e,n)}function tL(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function nL(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,rL(e,t,"get"))}function iL(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,rL(e,t,"set"),n),n}function rL(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}(0,tt.fo)("analytics.cwv.cls",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:async function(e){let{broker:t,getConfig:i,log:r}=e;const a=i("analytics.cwv.cls.totalThreshold",.08),o=i("analytics.cwv.cls.entryThreshold",.01),s=i("analytics.cwv.cls.maxEntries",20),d=new Set(i("analytic.cwv.cls.slotsOfInterest",["billboard","billboard-oop","leader_top"])),l=i("analytic.cwv.cls.slotsShelfLife",5e3);r("config:",{totalThreshold:a,entryThreshold:o,maxEntries:s,interestingSlots:d,slotsShelfLife:l});const u=[],c=new Set;let p=[];t.on("ad rendered",((e,t)=>{let{isEmpty:n,lineItemId:i,creativeId:r,sourceAgnosticCreativeId:a,sourceAgnosticLineItemId:o}=t;!n&&d.has(e)&&p.push({time:Date.now(),pos:e,lineItemId:i||o,creativeId:r||a})})),n.g.DM.molFeWebVitals.webVitals.getCLS((e=>{let{entries:t}=e;for(const e of t){if(e.value<o||e.hadRecentInput||c.has(e))continue;c.add(e);const t=e.sources,i=t.length,a=t.map((e=>JR(e.node)));for(const o of t){const t=YR.filter((e=>o.currentRect[e]!==o.previousRect[e])),s=t.map((e=>`${e}: ${o.previousRect[e]}->${o.currentRect[e]}`)),d=JR(o.node),{before:c,after:h}=(n=o.node)?{before:n.previousElementSibling,next:n.nextElementSibling}:{};r("entry above threshold:",d,e.value,s);const g=Date.now()-l,m=p.filter((e=>e.time>=g)).map((e=>{let{pos:t,lineItemId:n,creativeId:i}=e;return`${t}=${n}/${i}`}));p=p.filter((e=>e.time<g)),r("recentPositions",m),u.push({type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"element",changes:s,selector:d,value:Math.round(1e3*e.value)/1e3,accomplicesCount:i-1,accomplices:a.filter((e=>e!==d)),clsHash:QR(),propertiesChanged:t,total:f,startTimeInSecs:Math.round(e.startTime/1e3),previous:JR(c),next:JR(h),recentPositions:m}})}}var n}),!0),await t.until("call for page-unload");const h=n.g.DM.molFeWebVitals.getUpdated(),f=Math.round(1e3*h.CLS)/1e3;if(h.CLS&&f>a){r("cls",f,"above threshold",a),r("cls entries:",u.length);const e=u.sort(((e,t)=>t.value-e.value)).slice(0,s),n=u.length>e.length;n&&r("too many entries, truncating it from",u.length,"to",e.length),t.emit("send event to bidmax",{type:"custom",payload:{module:"ads.cwv.cls",trigger:"page-unload",event:"total",clsHash:QR(),value:f,heavyElements:e.length>0,truncatedEntries:n}}),e.forEach((e=>t.emit("send event to bidmax",e)))}}});var aL=new WeakMap,oL=new WeakMap,sL=new WeakMap,dL=new WeakMap,lL=new WeakSet;class uL{constructor(){let{events:e=[[document,["mousemove","keypress","scroll","mousewheel","touchmove"]],[window,["focus","scroll"]]],throttleMs:t=1e4}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){tL(e,t),t.add(e)}(this,lL),eL(this,aL,{writable:!0,value:void 0}),eL(this,oL,{writable:!0,value:void 0}),eL(this,sL,{writable:!0,value:void 0}),eL(this,dL,{writable:!0,value:[]}),iL(this,aL,new tn.JT),iL(this,oL,e),iL(this,sL,(0,nn.FU)(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,lL,cL).bind(this),t))}start(){nL(this,oL).forEach((e=>{let[t,n]=e;t&&n.forEach((e=>{nL(this,aL).addEventListener(t,e,nL(this,sL))}))}))}stop(){nL(this,aL).dispose()}add(e){return nL(this,dL).push(e),()=>{this.remove(e)}}remove(e){iL(this,dL,(0,ne.cl)(e,nL(this,dL)))}whenActive(){return new Promise((e=>{const t=()=>{this.remove(t),e()};this.add(t)}))}}function cL(e){nL(this,dL).forEach((t=>t(e)))}(0,tt.fo)("adPageType",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,DM:n,getConfig:i,log:r,adPageType:a}=e;r("running");const o=localStorage.getItem(pL);localStorage.removeItem(pL);const s=i("adPageType.usePageAdTypeOverride",!1);if(r(`autorefresh pageAutoRefreshStatus: ${o}, usePageAdTypeOverride: ${s}`),t.on("dom ready",(()=>{n.pageEvents.subscribe("page.autorefresh-event",(()=>{localStorage.setItem(pL,!0)}))})),!s||!o||"art"===a)return r("setting 'page' targeting to",a),void t.emit("set page level targeting",{page:a});r("setting 'page' targeting to hp_inactive"),t.emit("set page level targeting",{page:"hp_inactive"});const d=t.until("ad rendered"),l=new uL;l.whenActive().then((async()=>{l.stop(),await d,r("setting 'page' targeting to hp"),t.emit("set page level targeting",{page:"hp"})})),l.start()}});const pL="mol.ads.pageautorefresh";(0,tt.fo)("takeovers.videowallpaper",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,log:n}=e;function i(e){4===e.readyState?(e.muted=!0,e.play(),n("Video background play")):(n("Loading"),setTimeout((()=>i(e)),100))}t.on("takeover","videowallpaper",(e=>{t.emit("stop refreshing ads"),t.emit("disable chromeless-player"),t.emit("collapseAdByPos",["sky_left_top","sky_left_bottom","sky_right_top","sky_right_bottom"]);const{clickUrl:n,video:r}=e,a=(e=>{let{backupSkin:t,skinBGColor:n}=e;return`\n.fullscreen-bg {\n  background-image: url(${t});\n  background-size: contain;\n  background-position: top center;\n  background-repeat: no-repeat;\n  background-color: ${n};\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n  z-index: 1;\n}\n\n\n#billBoard {\n  background-color: transparent!important;\n  position: relative!important;\n  top: -30px !important;\n  box-shadow: none!important;\n  left: 0!important;\n}\n\n.cleared.lead-alpha, #content > .cleared {\n  background-color: #fff!important;\n}\n\n.articleWide {\n  background-color: #fff;\n}\n\n#top {\n  position: relative;\n  z-index: 2;\n}\n\nvideo#backgroundvideo {\n  position: fixed;\n  top: 0;\n  left: 50%;\n  min-width: 100%;\n  width: 100%;\n  height: auto;\n  z-index: -100;\n  animation: translate-video;\n  animation-fill-mode: forwards;\n}\n\n@keyframes translate-video {\n  to {\n    transform: translateX(-50%) translateY(0%);\n  }\n}\n\n.page-container-cover {\n  position: absolute;\n  width: 994px;\n  background: #fff;\n  z-index: 1;\n  margin-left: auto;\n  margin-right: auto;\n  height: 100%;\n  left: -16px;\n  right: 0;\n  top: 465px;\n}\n\n.page-header-cover {\n  position: absolute;\n  width: 994px;\n  height: 186px;\n  background: #fff;\n  left: 0;\n  right: 0;\n  z-index: 2;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n#content {\n  z-index: 1;\n  animation: shift-content-down 500ms;\n  animation-fill-mode: forwards;\n}\n\n@keyframes shift-content-down {\n  to {\n    transform: translateY(30px);\n  }\n}\n\n#ad_skinHolder {\n  width: 100%;\n  height: 100%;\n  margin: auto;\n  position: fixed;\n  top: 0;\n  left: 0;\n  z-index: 1;\n`})(r.styles);(0,Ne.appendStyle)(a);const o=document.createElement("template");o.innerHTML='<div class="page-header-cover"></div>'.trim(),document.body.insertBefore(o.content,document.body.firstChild);const s=document.createElement("template");s.innerHTML='<div class="page-container-cover"></div>'.trim();const d=document.getElementById("page-container");d.insertBefore(s.content.firstChild,d.firstChild);const l=(e=>{let{attributes:t,sources:n}=e;const i=document.createElement("div");i.setAttribute("id","ad_video"),i.classList.add("fullscreen-bg"),i.setAttribute("post","");const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;e.id="backgroundvideo";const n=document.createElement("video");return Object.entries(e).forEach((e=>{let[t,i]=e;n.setAttribute(t,i)})),t.forEach((e=>{let{type:t,src:i}=e;const r=document.createElement("source");r.setAttribute("type",t),r.setAttribute("src",i),n.appendChild(r)})),n}(t,n);return i.appendChild(r),i})(r);document.body.append(l),document.querySelector(".billboard-container").classList.remove("watermark");const u=(e=>{const t=document.createElement("template");return t.innerHTML=`\n      <a id="ad_skinHolder" href="${e}" target="_blank">\n        <div class="extra-static-skin"></div> \n      </a>\n    `.trim(),t.content})(n);document.body.append(u),i(document.getElementById("backgroundvideo"))}))}}),(0,tt.fo)("site",{init:function(e){let{broker:t,log:i,setConfig:r,getConfig:a}=e;const o=a("site","mol");r("site",o),n.g.PageCriteria.pageViewId=(0,un.kb)(),t.register("call for page analytics",(()=>({account:o}))),function(e,t){const i=(0,T.U2)("tcfv2.enabled",!1),r="US"===PageCriteria.geo;t("cmp.model",(r?"ccpa":i&&"gdpr")||void 0),t("cmp.shouldBeEnforced",r&&"CA"===n.g.PageCriteria.region||i),t("cmp.keyNameForGPTVideoConsent",r?"rdp":"npa"),t("cmp.apiHandler",(r?"__uspapi":i&&"__tcfapi")||void 0),e("cmp:",(0,T.U2)("cmp"))}(i,r);const s={...fL},d=a("tcfv2.branding.includePrimaryVendor",!0),l=a("tcfv2.branding.providerUrl"),u={level1Paragraphs:hL};d&&(u.primaryVendor=s),l&&(u.providerUrl=l),r("tcfv2.brand",u),"object"==typeof n.g.DM&&"function"==typeof n.g.DM.getPageMetadata&&r("tcfv2.renderPlatform",n.g.DM.getPageMetadata().renderPlatform)},ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},isAdsFreeSupported:!0});const hL=["We and our partners process, store and/or access data such as IP address, unique ID and browsing data based on your consent to display personalised ads and content, ad and content measurement, audience insights and product development, use precise geolocation data, and actively scan device characteristics for identification.","Sometimes we and/or our partners dont rely on your consent but rely on legitimate interest to process your data. Click Cookie Settings below to see our partners, why they rely on legitimate interest and how you can object.","Control how your data is used and view more info at any time via the Cookie Settings link in the Privacy Policy."],fL={features:[1,2,3],flexiblePurposes:[],headingName:"Associated Newspapers Ltd.",legIntPurposes:[5,6,8,10],name:"Associated Newspapers Ltd. (MailOnline, ThisIsMoney & Metro)",policyUrl:(0,T.U2)("tcfv2.policyUrl","/home/article-7759273/Privacy-Cookies-Policy-Policy.html"),purposes:[1,2,3,4,7,9],specialFeatures:[1],specialPurposes:[1,2]},gL=DM.molFeAsync;var mL=n(9796);function vL(e){const t=e("slotDescription",{});return e("plugins.adservers.openweb.slots",[]).filter((e=>e in t)).map((e=>[e,t[e]]))}(0,tt.fo)("skimlinks",{purposeIds:{gdpr:"N/A"},run:function(e){let{getConfig:t}=e;const n=t("skimlinks",{enabled:!1});n.enabled&&(0,gL.later)("DOM_READY").then((()=>{const e=n.filename||(()=>{const e=document.querySelector(".skimlinks");return null===e?null:e.getAttribute("data-tracking-id")})();if(e){const t="//s.skimresources.com/js/"+e+".skimlinks.js",n=document.createElement("script"),i=document.querySelector("script");n.async=!0,n.src=t,i.parentNode.insertBefore(n,i)}})).catch((e=>{mL.logger.error("Error during skimlinks initialisation: ",e)}))},vendorIds:{gdpr:[46]}}),(0,tt.fo)("slotDefinition",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,doc:n,getConfig:i,log:r}=e;const a=i("slots.enabled"),o=["gpt","gptOOP"];t.on("slot defined",(e=>{t.emit("update description",e.pos,e),o.some((t=>e.slotTypes.includes(t)))?(r("dispatching 'slot ready'",e.pos),t.emit("slot ready",e)):r("unsupported slot type, bailing",e.pos,e.slotTypes)})),t.on("slot mounted",(async e=>{var n;const i=(0,Le.get)(e.pos);if(!a[e.pos])return void r("slot not enabled, bailing",e.pos);if(!i)return void r("unable to find description for slot, bailing",e);const o=((e,t)=>t.id||e.id||t.containerId||t.pos+"_"+(new Date).getTime())(i,e),{isTemplate:s,pos:d,regex:l,...u}=i,c=s&&l?{...(p=u,JSON.parse(JSON.stringify(p))),adUnit:(0,Th.Z)(o),dfpPos:d,id:o,isTemplate:s,pos:o,parentId:o,targeting:{puff_offset:null===(n=new RegExp(l).exec(o))||void 0===n?void 0:n[1]}}:{...u,id:o,pos:"fff"===d?o:d};var p;r("slotDefintion",c),await t.invoke("verify slot ready",c),t.emit("slot defined",c)}))}}),(0,tt.fo)("googlePPID",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,log:n}=e;n("running googlePPID");const i=t.invoke("provide userId");t.on("gpt initialized",(async e=>{const t=await i;n("setting googlePPID",t),e.pubads().setPublisherProvidedId(t)})),i.then((e=>{t.emit("sync video tags update",{ppid:e})}))},vendorIds:{gdpr:"N/A"}}),(0,tt.fo)("adservers.openweb",{init:function({getConfig:e,log:t,setConfig:n}){const i=vL(e);i.length?(t("enabled openwebSlots slots",i),i.forEach((([i,r])=>{r.slotTypes=["openweb"],r.earlyBidding=!1,t("setting",i,r),n(`slotDescription.${i}`,r),e("slotDescriptions.initial")&&(t("updating slotDescription.initial",i,r),n(`slotDescriptions.initial.${i}`,r))}))):t("no enabled openweb slots, bailing")},purposeIds:{gdpr:"N/A"},run:function({broker:e,getConfig:t,log:n}){const i=vL(t).map((([e])=>e));if(!i.length)return void n("no enabled openweb slots, bailing");const r=t("plugins.adservers.openweb.scriptUrl","//launcher-sa.spot.im/spot/sp_jhHPoiRK");e.invoke("import script",r,{"data-spotim-autorun":!1,"data-spotim-module":"spotim-launcher"}),n("enabled openweb slots",i),e.on("slot defined",(t=>{if(!i.includes(t.dfpPos||t.pos))return;n("slot defined",t.pos,t);const r=document.getElementById(t.id);if(!r)return void n("unabled to find element, bailing",t.pos,t.id);const a=t?.openweb?.dataset.column||"1";r.dataset.openwebAd="",r.dataset.row="1",r.dataset.column=a,e.emit("send event to bidmax",{type:"custom",payload:{event:"slotDefined",module:"openweb",pos:t.pos}}),(new Image).src="https://t.cdnopw.com/b.gif"}))},vendorIds:{gdpr:[280]}}),(0,tt.fo)("modifiers.takeovers",{gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const i="campaigns.rules-linteItem-",r=t("__generated.modifiers.applied",[]).filter((e=>e.startsWith(i))).map((e=>e.substring(i.length)));r.length?(n("liveTakeovers applied",r),e.register("call for page analytics",(()=>({takeoverLineItems:r})))):n("no takeovers applied, bailing")}}),(0,tt.fo)("slots.display-handlers.skies",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function({broker:e,getConfig:t,log:n}){const i=new Set(["sky_left_top","sky_right_top","sky_left_bottom","sky_right_bottom"].filter((e=>t(`slots.enabled.${e}`))));if(!K.s$||!i.size)return void n("no supported slots, bailing");n("supported slots",i);const{cancel:r}=e.on("ad requested",(e=>{n("display",e),i.has(e)&&(document.documentElement.classList.add("has-skies"),r())}))}});var yL=n(7019),bL=n.n(yL);class _L{constructor({broker:e}){const t={};this.broker=e,t.auctions={},t.pendingStreams={},this.priv=t}_createPendingStreamForPosition(e){const t=this.broker.createReadObjectStream();return this.priv.pendingStreams[e]=t,t}_createAuctionForPositions(e,t){const n=(0,mo.Z)(),i=e.reduce(((e,n)=>{const i=t?this._createPendingStreamForPosition(n):this.broker.createReadObjectStream();return i.bids=[],{...e,[n]:{stream:i}}}),{});return this.priv.auctions[n]=i,{auctionId:n,positions:i}}createAuctionWithPendingStreams(e){return this._createAuctionForPositions(e,!0)}resolveStreamForPosition(e){let t={};if(this.priv.pendingStreams[e])t.stream=this.priv.pendingStreams[e],delete this.priv.pendingStreams[e];else{const n=this._createAuctionForPositions([e],!1);t={auctionId:n.auctionId,stream:n.positions[e].stream}}return t}createAuctionForAdUnitCode(e,t,n,i){const r=t||(0,mo.Z)(),a=this.broker.createReadObjectStream();a.bids=[];const o={stream:a,offset:n,platform:i};return this.priv.auctions[r]={[e]:o},{auctionId:r,positions:{[e]:o}}}getStreamForAdUnitCode(e,t){return this.priv.auctions[e]&&this.priv.auctions[e][t]||{}}dispose(e){const t=this.priv.auctions[e];t?(Object.values(t).forEach((({stream:e})=>{e.push(null),e.ended=!0})),delete this.priv.auctions[e]):console.error(`Unabled to find auctionId: ${e}`)}}function TL(e,t,n){return e.bidderSettings.standard.adserverTargeting.filter((e=>void 0===t[e.key])).map((e=>[e.key,e.val(n)])).filter((e=>{let[t,n]=e;return void 0!==n})).forEach((e=>{let[n,i]=e;return t[n]=i})),t}function wL(e,t){return Object.keys(t).reduce(((n,i)=>("hb_bidder"===i||(n[`${i}_${e}`.substring(0,20)]=t[i]),n)),{})}const SL=e=>JSON.parse(JSON.stringify(e));var kL=n(8622),IL=n.n(kL);(0,tt.fo)("prebid",{ccpa:{enabledIfDissent:!0},purposeIds:{gdpr:[1]},run:async function({broker:e,getConfig:t}){let i;const r=t("slots.enabled",{}),a=e.invokeAll("prebid prerequisites",{timeout:t("plugins.prebid.prequisiteTimeout",3e3)}),o=new Promise((async t=>{await a,({default:i}=n(3789)),e.emit("prebid loaded",i),t(i)})),s=new _L({broker:e}),d=new Set,l={},u=t("slotDescriptions.initial",{}),c=(0,Y.ei)(u,Object.keys(r));Object.entries(r).forEach((([e,t])=>{c[e]&&(c[e].loadSettings=t)}));const p=t("prebid.globalPlacementIds.display",{}),h=t("prebid.globalPlacementIds.video",{}),f={},g={},m=e=>{const t={},n=e.filter((e=>{const t=e&&"code"in e;return t||CL("ignoring invalid adUnit"),t}));n.forEach((e=>{const{bids:n,code:i,sizes:r}=e,a=r.map((([e,t])=>`${e}x${t}`));(0,ne.jj)(n.map((({bidder:e})=>e))).forEach((e=>{t[i]=t[i]||{},t[i][e]=t[i][e]||{};const n=t[i][e].requestSizes||[];n.push(a),t[i][e]={requestSizes:(0,ne.jj)(n)}}))})),Object.entries(t).forEach((([e,t])=>{const n=Object.entries(t).reduce(((e,[t,n])=>({...e,[t]:{requestSizes:n.requestSizes.flat()}})),{});g[e]=n})),CL("addAdUnits",n),i.addAdUnits(n),n.map((e=>e.code)).forEach((e=>d.add(e))),n.forEach((({code:e,bids:t})=>{f[e]=[...new Set([...f[e]||[],...t.map((({bidder:e})=>e))])]}))},v=t("auction.priceGranularity",{buckets:[{min:0,max:20,increment:.01},{min:20,max:50,increment:.1}]});e.register("prebid config async update",(async e=>{await o,i.setConfig(e)}));const y=(e,t,n)=>i=>{CL("auctionId:",e,", ",t,"auctionEnded, bids:",Object.keys(i||{}).length);try{n&&n()}finally{s.dispose(e)}},b=(t,n)=>{CL("auctionId:",t,", bidOnAdUnitCodes: ",n),i.requestBids({adUnitCodes:n,auctionId:t,bidsBackHandler:y(t,n)}),e.emit("bids requested",{positions:n})},_=t("prebid.videoAuctionOffset",500),T={standard:{adserverTargeting:[{key:"hb_bidder",val:({bidderCode:e})=>e},{key:"hb_adid",val:({adId:e})=>e},{key:"hb_pb",val:e=>{switch(v){case"auto":return e.pbAg;case"dense":return e.pbDg;case"high":return e.pbHg;case"low":return e.pbLg;case"medium":return e.pbMg;default:return"object"==typeof v?e.pbCg:e.pbHg}}},{key:"hb_size",val:({size:e})=>e},{key:"hb_source",val:({source:e})=>e},{key:"hb_format",val:({mediaType:e})=>e},{key:"hb_skin",val:({bidderCode:e})=>"inskin"===e},{key:"hb_cache_id",val:({videoCacheKey:e})=>e},{key:"hb_uuid",val:({videoCacheKey:e})=>e},{key:"fb_bidid",val:e=>e.fb_bidid}]}};e.on("plugins enabled",(async t=>{const n=(await e.invokeAll("provide prebid adUnits")).flat();await o,i.bidderSettings=await e.invokeChainMutable("prebid reduce bidderSettings",T),(await e.invokeAll("provide bidder alias")).forEach((({adapterName:e,aliasedName:t})=>{i.aliasBidder(e,t)})),e.emit("configure and start prebid",t,n)}));const w=e=>[...new Set([...e.banner&&e.banner.sizes||[],...e.video&&[e.video.playerSize]||[]])].sort(AL),S=async function(r,a){const o={"bidders.adform.display":"adf","bidders.adform.v2.display":"adf","bidders.adform.video":"adf","bidders.mediagrid":"grid","bidders.mediagrid.v2.display":"grid","bidders.mediagridVideo":"grid","bidders.brightroll":"brightroll","bidders.appnexusPSP":"appnexus"};CL.info("pluginToS2SBidderNameMap",o);const d=bL()(r,Object.keys(o));CL.info("enabledS2SPlugins",d);const u=new Set(d.map((e=>o[e]))),h=Array.from(u);CL.info("enabledS2SBidders",u);const f=((e,t)=>{const{s2sAdUnits:n,headerAdUnits:i}=t.reduce(((t,n)=>(e.has(n.bids[0].bidder)?t.s2sAdUnits.push(n):t.headerAdUnits.push(n),t)),{s2sAdUnits:[],headerAdUnits:[]});CL("S2S AdUnits",n);const r=n.reduce(((e,{code:t,bids:n,mediaTypes:i})=>{const r=[...e[t]&&e[t].bids||[],...n],a=(0,ne.jj)([...e[t]&&e[t].mediaTypes.banner.sizes||[],...i.banner.sizes.map((e=>e.toString()))]);return{...e,[t]:{code:t,bids:r,mediaTypes:{banner:{sizes:a}}}}}),{}),a=Object.values(r).map((({code:e,bids:t,mediaTypes:n})=>({code:e,bids:t,mediaTypes:{banner:{sizes:n.banner.sizes.map((e=>e.split(",").map((e=>parseInt(e)))))}}})));return CL("merged S2S AdUnits",a),[...i,...a]})(u,a),y=(e=>Object.values(e.reduce(((e,{code:t,bids:n,mediaTypes:i})=>{const r=t+JSON.stringify(i),a=e[r]=e[r]||{code:t,mediaTypes:i,bids:[],sizes:w(i)};return a.bids=[...a.bids,...n],e}),{})))(f);CL("mergedAdUnits",y);const _=y.map((e=>((e,t)=>(e[t.code]&&IL()(t,"ortb2Imp.ext.data.pbadslot",e[t.code]),t))(p,e)));CL("allAdUnits",_);const T=[...new Set(EL(_,c))],S=t("topPageUrl"),k={debug:t("prebid.debug",!1)||K.SP.pbjs_debug||!1,enableSendAllBids:!1,priceGranularity:v,cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},s2sConfig:{accountId:t("auction.accountId","37643165-9d8c-4c14-9e55-57b51f032308"),defaultVendor:"appnexus",enabled:!!h.length,bidders:h,timeout:t("auction.maxTime",2e3),adapter:t("auction.adapter","prebidServer"),endpoint:t("auction.endpoint","https://prebid.adnxs.com/pbs/v1/openrtb2/auction"),syncEndpoint:"https://prebid.adnxs.com/pbs/v1/cookie_sync",secure:t("auction.secure",0)},currency:t("prebid.currency",{adServerCurrency:"USD",granularityMultiplier:1,conversionRateFile:"https://currency.prebid.org/latest.json",defaultRates:{GBP:{USD:1.2764213953}}}),sizeConfig:t("plugins.prebid.sizeConfig",[]),targetingControls:{allowTargetingKeys:["BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","CACHE_HOST","ADOMAIN"]}};S&&(k.pageUrl=S),n.g.__tcfapi?k.consentManagement={...k.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,defaultGdprScope:!0}}:n.g.__cmp&&(k.consentManagement={...k.consentManagement||{},gdpr:{cmpApi:"iab",timeout:5e3,allowAuctionWithoutConsent:!1}}),n.g.__uspapi&&(k.consentManagement={...k.consentManagement||{},usp:{cmpApi:"iab",timeout:500}}),CL("config:",k),i.setConfig(k);const I=((e,t)=>{const n=new Set(["mpu_puff_others","puff_ad_others","mpu_mobile_others","mpu_factbox","mpu_mobile_factbox"]),i=t.filter((t=>n.has(t.code)?(t.bids&&t.bids.length&&(e[t.code]=e[t.code]||[],e[t.code].push(t)),!1):t.bids&&t.bids.length));return i})(l,_);CL("adUnits",I),CL("othersAdsPos templates",l),m(I),((e,t,n,i)=>{t.onEvent("bidderDone",(({bidderCode:t,bids:n})=>{new Set(n.map((({adUnitCode:e})=>e))).forEach((n=>e.emit("plugin done",n,t)))})),t.onEvent("bidResponse",(r=>{CL(`auctionId: ${r.auctionId}, bidResponse, adUnitCode: ${r.adUnitCode}, bidderCode: ${r.bidderCode}, adId: ${r.adId}, cpm: ${r.cpm}`);const{stream:a,offset:o,platform:s}=n.getStreamForAdUnitCode(r.auctionId,r.adUnitCode),d=Math.round(100*r.cpm),l=i[r.adUnitCode]&&i[r.adUnitCode][r.bidderCode]&&i[r.adUnitCode][r.bidderCode].requestSizes;e.emit("bid",r.adUnitCode,{bidder:r.bidderCode,cpm:d,offset:o,platform:s,requestSizes:l}),CL("bid requestSize",r.adUnitCode,r.bidderCode,l),a?a.ended?CL(`auctionId: ${r.auctionId}, streamEnded, adUnitCode: ${r.adUnitCode}, bidder: ${r.bidderCode}, adId: ${r.adId}, bailing`):function(e){let t,{stream:n,log:i,bid:r,broker:a,pbjs:o,requestSizes:s}=e;if(!(n.bids&&n.bids[r.bidderCode]&&(i(`auctionId: ${r.auctionId}, additional bid, adUnitCode: ${r.adUnitCode}, ${r.bidderCode}, cpm: ${r.cpm}, slotSize: ${r.size}`),n.bids[r.bidderCode].cpm>=r.cpm))){if(["video","jwplayer"].includes(r.adUnitCode))i(`auctionId: ${r.auctionId}, bid caching not supported for slot: ${r.adUnitCode}`),n.highestBidder=n.highestBidder&&r.cpm<=n.highestBidder.cpm?n.highestBidder:r,t=n.highestBidder;else{const e=o.getHighestUnusedBidResponseForAdUnitCode(r.adUnitCode);i(`auctionId: ${r.auctionId}, bidResponse, adUnitCode: ${r.adUnitCode}, highestCachedBid: ${e&&e.bidderCode}, adId: ${e&&e.adId}, cpm: ${e&&e.cpm}, from auctionId: ${e.auctionId}`),t=e&&!(0,Y.xb)(e)&&e.cpm>=r.cpm?e:r,i(`auctionId: ${r.auctionId}, bidResponse, adUnitCode: ${r.adUnitCode}, selected bidder isCached: ${r.auctionId!==t.auctionId},  bidderCode: ${t.bidderCode}, adId: ${t.adId}, cpm: ${t.cpm}`)}!function(e){let{broker:t,log:n,pbjs:i,stream:r,bidResponse:a,selectedBid:o,requestSizes:s}=e;r.bids=r.bids||{},r.cachedBid=r.cachedBid||{},r.bids[a.bidderCode]=r.bids[a.bidderCode]||{};const d=TL(i,SL(o.adserverTargeting),o),l=wL(a.bidderCode,TL(i,SL(a.adserverTargeting),a)),u=o.auctionId!==a.auctionId?1:0;var c;if(void 0===r.highestCpm&&(r.highestCpm=0),r.highestCpm=a.cpm>r.highestCpm?a.cpm:r.highestCpm,d.bc=u,d.bc_diff=(c=u?o.cpm-r.highestCpm:0,Math.round(100*c)/100),n(`auctionId: ${a.auctionId}, streamBid, adUnitCode: ${o.adUnitCode}, bidder: ${o.bidderCode}, adId: ${o.adId}, cpm: ${o.cpm}, from auctionId: ${o.auctionId}, cachedBidDiff: ${d.bc_diff}`),r.bids[a.bidderCode].bidderTargeting=l,r.bids[a.bidderCode].cpm=a.cpm,u&&!r.cachedBid.hasUsedCachedBid){const e=wL(o.bidderCode,TL(i,SL(o.adserverTargeting),o));r.cachedBid={hasUsedCachedBid:!0,targeting:e,bidderCode:o.bidderCode};const n={cached:!0,bidder:o.bidderCode,cpm:Math.round(100*o.cpm)};t.emit("bid",o.adUnitCode,n)}else!u&&r.cachedBid.hasUsedCachedBid?(r.bids[r.cachedBid.bidderCode]?r.cachedBid.targeting=r.bids[r.cachedBid.bidderCode].bidderTargeting:r.cachedBid.targeting=r.cachedBid.targeting?Object.fromEntries(Object.keys(r.cachedBid.targeting).map((e=>[e,void 0]))):{},r.cachedBid.hasUsedCachedBid=!1):u||(r.cachedBid.targeting={});const p={...d,...l,...r.cachedBid.targeting},h={type:"bid",pos:a.adUnitCode,cpm:Math.round(100*a.cpm)/100,bidderCode:a.bidderCode,tags:p};u&&(h.cachedBid={bidderCode:o.bidderCode,cpm:Math.round(100*o.cpm)/100}),r.push([h])}({broker:a,log:i,pbjs:o,stream:n,bidResponse:r,selectedBid:t})}}({broker:e,log:CL,pbjs:t,stream:a,bid:r,requestSizes:l}):console.error(`[PREBID] auctionId: ${r.auctionId},  Unknown stream for ${r.adUnitCode}, bidder: ${r.bidderCode}`)}))})(e,i,s,g),e.emit("prebid adunits added",I,T);const{auctionId:C}=s.createAuctionWithPendingStreams(T);CL(`auctionId: ${C}, requestBids. adUnitCodes: ${T}`),b(C,T)},k=new Promise((t=>{e.on("configure and start prebid",(async(e,n=[])=>{await S(e,n),t()}))})),I=(e,t,n)=>{let i=l[e]&&JSON.parse(JSON.stringify(l[e]))||[];return i=i.map((i=>{if(i.code=t,n[e]){const r=n[e].split(",");r[r.length-1]=t,IL()(i,"ortb2Imp.ext.data.pbadslot",r.join(","))}return i})),m(i),i};e.registerStream("get tags",(async({slot:t})=>{await k;const{pos:n}=t;if(CL("get tags, pos:",n,t),n.startsWith("mpu_puff_other"))I("mpu_puff_others",n,p);else if(n.startsWith("puff_ad_other"))I("puff_ad_others",n,p);else if(n.startsWith("mpu_mobile_other"))I("mpu_mobile_others",n,p);else if(n.startsWith("mpu_factbox"))I("mpu_factbox",n,p);else if(n.startsWith("mpu_mobile_factbox"))I("mpu_mobile_factbox",n,p);else if(!c[n]||!d.has(n))return void CL("unable to run auction for pos:",n,c[n],d.has(n));const i=s.resolveStreamForPosition(n);return i.auctionId&&b(i.auctionId,[n]),e.emit("auction event",n,"interested endpoint",{endpoints:f[n]}),i.stream}));const C=t("plugins.enabled").filter((e=>e.includes("konduit"))).length>0;async function E({platform:n,offset:r=0,timeout:a,slot:o,autoplay:d,videoId:l,auctionId:u}){await k;const c=(e=>t(`plugins.slots.${e}.v2`,{}))(o.pos),{code:p,mediaTypes:f}=c,g=o.pos||"video",m=(await e.invokeAll("provide video adUnits",g,d,r,l)).filter((e=>e)),{adUnits:v,bids:b,pbjsConfig:T}=m.reduce(((e,t)=>{if(t.pbjsConfig&&(e.pbjsConfig=Z()({},e.pbjsConfig,t.pbjsConfig)),t.mediaTypes){const{bids:n,code:i,mediaTypes:r}=t;e.adUnits.push({bids:n,code:i,mediaTypes:r})}else t.bids&&(e.bids=[...e.bids,...t.bids]);return e}),{adUnits:[],bids:[],pbjsConfig:{}}),w=[...v,{bids:b,code:p,mediaTypes:f}].map((e=>((e,t,n)=>{const i=0===n?"preroll":"midroll";return e?.[t.code]?.[i]&&IL()(t,"ortb2Imp.ext.data.pbadslot",e?.[t.code]?.[i]),t})(h,e,r)));let S;if(CL(`video auctionId: ${u}, adUnit config`,w,T),w.length){(0,Y.xb)(T)||i.setConfig(T);const t=((t,n,r,a,o)=>{const d=t[0].code,l=s.createAuctionForAdUnitCode(d,r,a,o);CL("auctionId:",l.auctionId,", adUnit: ",t),e.emit("bids requested",{positions:[d]});const u=n-_;return i.requestBids({adUnits:t,auctionId:l.auctionId,timeout:u,bidsBackHandler:y(l.auctionId,[d],(()=>e.emit("prebid video auction ended",[d],l.auctionId)))}),{stream:l.positions[d].stream,auctionId:l.auctionId}})(w,a,u,r,n);S=t.stream,e.emit("prebid video auction started",u,g,r)}const I=w.map((({bids:e})=>e)).flat().map((({bidder:e})=>e));return CL("Interested endpoints:",I),e.emit("auction event",g,"interested endpoint",{endpoints:I}),function(e,t,n,i){return kr.UI(e,(e=>{if(e.length){const{bidderCode:r,cpm:a,cachedBid:o}=e[0],s=e[0].tags;return{auctionId:n,pos:t,offset:i,type:"bid",cpm:a,bidderCode:r,cachedBid:o,tags:{cust_params:{...s}}}}return{}}))}(S,g,u,r)}return CL("konduitEnabled:",C),C?e.registerStream("konduit get video tags",E):e.registerStream("get video tags",E),e.on("prepare to refresh ads",(e=>{const{auctionId:t}=s.createAuctionWithPendingStreams(e);CL(`auctionId: ${t}, requestBids refresh, adUnitCodes: ${e}`),b(t,e)})),o},vendorIds:{gdpr:"N/A"}});const CL=(0,S.x)("prebid"),EL=(e,t)=>(0,ne.DZ)((e=>{return(n=t[e.code])&&"immediate"===n.loadSettings.type&&n.earlyBidding;var n}),(e=>e.code),e||[]);function AL(e,t){const n=e[0]*e[1],i=t[0]*t[1],r=e[0]<t[0]?1:e[0]>t[0]?-1:0;return n<i?1:n>i?-1:r}(0,tt.fo)("gpid",{ccpa:{enabledIfDissent:!0},init:function({getConfig:e,setConfig:t,log:n}){const i=Object.keys(e("slots.enabled",{})),r=e("dfp.networkCode"),a=Object.fromEntries(i.map((e=>[e,`${r},${(0,Th.Z)(e).replace(/\//g,",")}`])));n("setting display globalPlacementIds",a),t("prebid.globalPlacementIds.display",a);const o=e("players.chromeless.dmplayer.v3.dfpAccountCode","5765"),s=e("players.chromeless.dmplayer.v3.adUnitNameLevel1","dm.chromelessvideo"),d=e("players.chromeless.dmplayer.v3.adUnitNameLevel2","dm_dmros_ros"),l=e("players.editorial.v2.gpid.adUnitNameLevel1","dm.video"),u=e("players.editorial.v2.gpid.adUnitNameLevel2","dm_ros"),c=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${o},${s},${d},${e}`]))),p=Object.fromEntries(["preroll","midroll"].map((e=>[e,`${o},${l},${u},${e}`])));n("setting video globalPlacementIds",c,p),t("prebid.globalPlacementIds.video",{jwplayer:c,video:p})},purposeIds:{gdpr:[1]},vendorIds:{gdpr:"N/A"}}),(0,tt.fo)("prebid.permutiveRtd",{purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("permutive.rtd.acBidders",["appnexus","rubicon","ozone"]),a=n("permutive.rtd.maxSegs",500),o=n("permutive.rtd.auctionDelay",2e3),s={name:"permutive",params:{acBidders:r,maxSegs:a}},d=[o?{...s,waitForIt:!0}:s],l=o?{auctionDelay:o,dataProviders:d}:{dataProviders:d};t.once("prebid loaded",(e=>{i("setting realTimeData rtd",l),e.setConfig({realTimeData:l})}))},vendorIds:{gdpr:[361]}}),(0,tt.fo)("trackers.exitbee",{purposeIds:{gdpr:"N/A"},run:function(e){let{broker:t,getConfig:i,log:r}=e;r("start");const a=i("plugins.exitbee.loadSite","8038");n.g.ExitBeeObject="xtb",n.g.xtb=n.g.xtb||function(){(n.g.xtb.args=n.g.xtb.args||[]).push(arguments)},t.invoke("import script","https://cdn.exitbee.com/xtb.min.js").then((()=>{r("loaded")})),n.g.xtb("loadSite",a)},vendorIds:{gdpr:[1027]}}),(0,tt.fo)("slots.InreadPlayerTop",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function({broker:e,log:t,getConfig:n,pageCriteria:i,pageMeta:r}){if("article"!==i.pageType)return void t("Not suitable for PageCriteria.pageType:",i.pageType);const a=n("pos.inread_player_top.paragraphIndex",2),o={insertMethod:t=>{const i="inread_player_top",a="desktop"===r.renderPlatform?((e,t)=>{const[n,i]=PL(t),[r,a]=xL(e,n,i);a.className=`adHolder molads_${e}`,r.classList.add("watermark"),r.style.width=`${n}px`,r.style.height=`${i}px`;const o=At();return r.appendChild(o),r.appendChild(a),r})(i,n):((e,t)=>{const[n,i]=PL(t),[r,a]=xL(e,n,i);return a.className=`adHolder mpu molads_${e} watermark`,r.dataset.swipeArticle="false",r.appendChild(a),r})(i,n),o={pos:i};t.parentElement.insertBefore(a,t),e.emit("slot mounted",o)},log:t,margin:n("pos.inread_player_top.margin",{top:30,bottom:30}),sourcePlugin:"inreadPlayerTop",targetParagraphIndex:a};t("requesting placement",a),e.register("placement requests",(()=>o))}});const PL=e=>{const t=e("slotDescription.inread_player_top.size",[[300,250]]);return(e=>Array.isArray(e)&&e.every(Array.isArray)&&e.every((e=>2==e.length&&e.every((e=>!isNaN(e))))))(t)?t.reduce(((e,t)=>[Math.max(e[0],t[0]),Math.max(e[1],t[1])]),[0,0]):[300,250]},xL=(e,t,n)=>{const i=document.createElement("div");i.id=e,i.style.width=`${t}px`,i.style.height=`${n}px`;const r=document.createElement("div");return r.classList.add("inread_player_top_container"),r.appendChild(i),[r,i]};(0,tt.fo)("bidders.33across.video",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[58]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.33across.video.${e}`);if(i({code:e,siteId:t}),!t)return console.warn(`no site id found for pos ${e}`),{};const r={bids:[{bidder:"33across",params:{productId:"instream",siteId:t}}]};return i.info("prioviding ad unit",r),r}))}}),(0,tt.fo)("bidders.kargo.video",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[972]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.kargo.video.${e}`);if(i({code:e,placementId:t}),!t)return console.warn(`no placement id found for pos ${e}`),{};const r={bids:[{bidder:"kargo",params:{placementId:t}}]};return i.info("prioviding ad unit",r),r}))}}),(0,tt.fo)("bidders.sharethrough.video",{purposeIds:{gdpr:[1]},vendorIds:{gdpr:[80]},run(e){let{broker:t,getConfig:n,log:i}=e;t.register("provide video adUnits",(e=>{const t=n(`plugins.bidders.sharethrough.video.${e}`);if(i({code:e,pkey:t}),!t)return console.warn(`no pkey found for pos ${e}`),{};const r={bids:[{bidder:"sharethrough",params:{pkey:t}}]};return i.info("prioviding ad unit",r),r}))}});const OL="_dm_ads_message\n";(0,tt.fo)("exposeUserData",{ccpa:{enabledIfDissent:!0},gdpr:{enabledIfDissent:!0},run:function(e){let{broker:t,getConfig:n,log:i}=e;i("running");const r=n("exposeUserData.origins",[""]);let a={};t.on("external user ids",(e=>{a=Z()(a,e)})),window.addEventListener("message",(e=>{if(r.includes(e.origin)&&e.source)try{if("string"!=typeof e.data||!e.data.startsWith(OL))return void i(`unsupported message: ${"string"==typeof e.data?e.data:JSON.stringify(e.data,null,2)}, bailing`);const t=JSON.parse(e.data.split(OL)[1]);if("getExternalIds"!==t.scope)return void i(`unsupported scope: ${null==e?void 0:e.data.scope}, bailing`);i("request received"),e.source.postMessage(`${OL}${JSON.stringify({schemaVersion:1,responseTo:t.messageId,data:{payload:a}})}`,{targetOrigin:e.origin})}catch(e){i.error("error handling request",e)}}),!1)}}),(0,tt.fo)("taboola.slots",{init:function(e){let{log:t,removePlugins:n}=e;const i=["taboolaAds"];t("removing plugins",i),n(i)},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:i,log:r}=e;r("taboola running");const a=new Lc({broker:t,log:r.extend("tracking"),rta:n.g.RTA}),o=((e,t)=>{var i,r;const a=e("taboola.scriptDir","dailymail-row"),o=e("taboola.pageType","article"),s="//cdn.taboola.com/libtrc/"+a+"/loader.js";n.g._taboola=n.g._taboola||[];const d=n.g._taboola;d.push({[o]:"auto"}),d.push({listenTo:"render",handler:t.fireRenderEvent}),d.push({listenTo:"visible",handler:t.fireVisibleEvent}),d.push({listenTo:"nocontent",handler:()=>t.fireEvent("taboola nocontent")}),d.push({listenTo:"click",handler:t.fireClickEvent});const l=document.createElement("script"),u=document.querySelector("script");return t.fireRTAEvent({status:"scriptLoading"}),l.addEventListener("load",(()=>t.fireRTAEvent({status:"scriptLoaded"}))),l.async=!0,l.src=s,l.onerror=()=>t.fireEvent("taboola failed to load"),u.parentNode.insertBefore(l,u),null===(i=window.performance)||void 0===i||null===(r=i.mark)||void 0===r||r.call(i,"tbl_ic"),d})(i,a);t.on("slot defined",(function(e){const{pos:t,slotTypes:n,id:s}=e,d=RL[t]||t;if(!n.includes("taboola"))return void r(`slotType not supported by taboola for pos: ${d}, bailing`);const l=i(`taboola.${d}`);if(!l)return void r(`config missing for pos: ${d}, bailing`);"thumbnail"===d||"thumbnailChannel"===d?a.addWidget(d,{mode:"thumbnails-feed",placement:l.placement}):a.addWidget(d,{mode:l.mode,placement:l.placement}),r("adding taboola",d,e,l);const u={...l,id:s};"pufflist"===d?((e,t)=>{setTimeout((()=>{let{start:n,every:i,ulId:r,targetType:a,mode:o}=t;const s=document.getElementById(r);if(!s)return;const d=s.querySelectorAll("li");for(const r of Array.from(d))if(!r.classList.contains("mpu_puff_wrapper")&&(n--,0===n)){const s=++DL,d=ML(r,s,t,"afterend");LL(e,{id:d,mode:o,placement:`${t.placement} ${DL}`,targetType:a}),n=i}}),100)})(o,{...l,ulId:s}):(["thumbnail","thumbnailChannel"].includes(d)&&a.fireRTAEvent({status:"widgetCall",placement:"thumbnails-feed"}),LL(o,u))}));const s=i("taboola.infiniteScroll");i("slots.enabled",[]).infinite_scroll&&s.every&&(r("infinite_scroll enabled, adding listener"),a.addWidget("infiniteScroll",{mode:s.mode,placement:s.placement}),((e,t,n)=>{let{start:i,every:r,platform:a}=n;e.on("infinite-list append",(async e=>{for(const o of Array.from(e.querySelectorAll((e=>"mobile"===e?"li":"div.article")(a))))if(0===i){const e=++DL,a=ML(o,e,n,"beforebegin"),{mode:s,placement:d,targetType:l}=Object.assign({},n,{placement:n.placement+" "+e,container:a});LL(t,{id:a,mode:s,placement:d,targetType:l}),i=r-1}else i--}))})(t,o,s)),t.on("add taboola",(function(e,t){if(r("add taboola event received",e,t),"pufflist"===e)return void r("no removal required for pufflist");const{id:n}=t,i=document.getElementById(n);i&&(r("removing id",n),i.remove())}))},vendorIds:{gdpr:[42]}});let DL=0;const RL={after_article:"afterArticle",before_article:"beforeArticle",channel_feed:"thumbnailChannel",infinite_scroll:"infiniteScroll",mobile_bottom:"bottom",mobile_top:"top",puff_list:"pufflist",smart_feed:"thumbnail",under_article:"underArticle",taboola_outstream:"outStream"},LL=(e,t)=>{const{id:n,mode:i,placement:r,targetType:a}=t;e.push({container:n,mode:i,placement:r,targetType:a}),e.push({flush:!0})},ML=(e,t,n,i)=>{const{containerStr:r,platform:a}=n,o=r+t,s=((e,t)=>"mobile"===t?`<li id="${e}"></li>`:`<div id="${e}" style="min-height: 280px;"></div>`)(o,a);return e.insertAdjacentHTML(i,s),o};function UL(e){n.g.RTA.tedEvent("page_event",{action:"increment",name:e})}function jL(e,t){n.g.RTA.tedEvent("page_event",{action:"set",name:e,value:t})}(0,tt.fo)("googleAdSense",{run:function(e){let t,{broker:i,log:r}=e;i.on("slot defined",(e=>{const{slotTypes:a,pos:o,id:s}=e;a.includes("googleAdSense")?(t=t||(r("loading adSense for",o,s),i.invoke("import script","//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")),t.then((()=>{r("requesting ad",o,s),n.g.adsbygoogle.push({})}))):r("slot type not supported, bail",a)}))},vendorIds:{gdpr:[755]},purposeIds:{gdpr:"N/A"}}),(0,tt.fo)("amazonNative",{run:function(e){let{broker:t,getConfig:n,log:i}=e;t.on("slot defined",(e=>{let{slotTypes:r,id:a}=e;if(!r.includes("amazon"))return void i("slot type not supported, bailing",r);if(!document.getElementById(a))return void i("unable to fine element id:",a,", bailing");const o=`${n("pos.under-article.amazon.url","//z-na.amazon-adsystem.com/widgets/onejs")}?MarketPlace=US&adInstanceId=${n("pos.under-article.amazon.id","df745670-1d9e-4f8c-890c-b2e54a92586a")}`;i("loading scriptUrl",o),t.invoke("import script",o).then((()=>{i("script loaded")})).catch((e=>{i("error loading",o),i("error",e)}))}))},vendorIds:{gdpr:[793]},purposeIds:{gdpr:"N/A"}}),(0,tt.fo)("widgets",{init:async function(e){let{getConfig:t,log:n,removePlugins:i}=e;const r=t("plugins.widgets.safeguard",!1);if(i(["taboolaAds","trackers.taboola","taboola.Outstream","taboola.slots","taboola"]),r){i(["prebid","adservers.openweb","amazonNative","bidders.spotx2","bidders.amazon","dmp.airgrid","dmp.moat","dmp.permutive.indexedDBUsage","dmp.permutive.video","trackers.exitbee","nativo","permutive","permutive.rtd","prebid.permutiveRtd","players.dmplayer","trackers.quantcast.userSync","slots.connatix","slots.InreadPlayerTop","slots.minuteMedia","trackers.admantx","trackers.adxChannel","trackers.applePrivateRelay","trackers.id5","trackers.ixIdentity","trackers.pubcommon","trackers.pubProvidedId","trackers.smartclip","trackers.taboola","trackers.unifiedid","trackers.universalid","trackers.viewability","chromelessv2.dmplayer"]);try{await vt("//cdn.taboola.com/libtrc/dailymail-uk/loader.js"),n("taboola loaded, bailing"),i(["widgets"])}catch(e){n("unable to load taboola, proceeding")}}else n("safeguard disabled, loading outbrain")},purposeIds:{gdpr:[1]},run:function(e){let{broker:t,getConfig:n,log:i}=e;i("running");const r=n("plugins.widgets.detailedTracking",!0);let a=!1;t.on("slot defined",(function(e){let{pos:o,slotTypes:s}=e;if(i("slot defined",o,s),s.includes("widgets")){if(!a){jL("outbrain","scriptLoading"),function(){function e(e,n){if(!r)return;const{abtest:i,version:a,servedWidgetId:o,data:{message:s}={}}=n;t.emit("send event to bidmax",{type:"custom",payload:{module:"outbrain",widget:o,type:e,abtest:i,outbrainVersion:a,message:s}})}window.OBREvents=window.OBREvents||[],window.OBREvents.push({name:"all",callback:function(e){o(n[e.name],e),o(a[e.name],e)},widgetId:"all",feedCards:1});const n={viewability:n=>{t.emit("outbrain visible"),e("visible",n)},click:n=>{t.emit("outbrain click"),e("click",n)},norecs:n=>{t.emit("outbrain nocontent"),e("norecs",n)},issue:n=>{t.emit("outbrain issue"),e("issue",n)},rendered:n=>{"feedIndex"in n?(t.emit("outbrain render"),e("render",n)):(t.emit("outbrain container render"),e("containerRender",n))}},a={viewability:()=>UL("outbrainView"),click:()=>UL("outbrainClick"),norecs:()=>UL("outbrainNoContent"),issue:()=>UL("outbrainIssue"),rendered:e=>{"feedIndex"in e?UL("outbrainRender"):jL("outbrain","rendered")}};function o(e,t){if(e)try{e(t)}catch(t){i.warn("error while running callback:",t.name),i.warn(t)}else i.warn("no event handler for:",t.name)}}(),a=!0;const e=n("widgetsScript",(0,k.decode)("iuuqt;00xjehfut/pvucsbjo/dpn0pvucsbjo/kt"));i("loading",e);try{t.invoke("import script",e),jL("outbrain","scriptLoaded")}catch(e){i.warn("unable to load script",e),t.emit("outbrain failed to load"),jL("outbrain","scriptFailed")}}}else i(`slotType not supported by mf for pos: ${o}, bailing`)}))},vendorIds:{gdpr:[164]},initTimeout:un.RD}),(0,tt.fo)("nonRegisteredVendors",{run:async function(e){let{broker:t,getConfig:n,log:i}=e;const r=n("tcfv2.nonRegisteredVenders",[{provider_id:"1",provider_name:"SofaScore",policy_url:"https://www.sofascore.com/privacy-policy"},{provider_id:"2",provider_name:"Qualifio",policy_url:"https://qualifio.com/privacy-policy/"},{provider_id:"3",provider_name:"Piwik PRO",policy_url:"https://piwik.pro/privacy-policy/"},{provider_id:"4",provider_name:"Mixpanel",policy_url:"https://mixpanel.com/legal/privacy-policy/"}]).map((e=>{let{provider_id:t}=e;return t}));t.on("TCData",(e=>{var n,a,o;if(i("TCData received",e),null!==(n=e.nrvString)&&void 0!==n&&null!==(a=n.startsWith)&&void 0!==a&&a.call(n,"1~")){const n=(".",""===(o=e.nrvString.slice(2))?[]:o.split(".")),a=(0,ne.zu)(r,n);a.length&&(i("setting unconsenting targeting",a),t.emit("set page level targeting",{unconsentednrv:a}))}}))},gdpr:{enabledIfDissent:!0}});const NL=(0,S.x)("processQueue"),BL=w.ZP.broker("processQueue");function FL(e){!function(e){return"object"==typeof e&&null!==e&&"string"==typeof e.scope}(e)?function(e){const{adverts:t}=n.g;return Array.isArray(e)&&3===e.length&&"FacadeQueueItem"===e[0]&&"function"==typeof t[e[1]]&&Array.isArray(e[2])}(e)?function(e){const{adverts:t}=n.g,[,i,r]=e;NL("calling",i,r);try{t[i](...r)}catch(e){NL.error(e)}}(e):NL.error("error processing item",e):function(e){NL("api item",e),BL.emit("api message",e.scope,e.data)}(e)}Object.assign(n.g.adverts,i);const qL=Ee;n.g.adverts.startTime=_.B,n.g.adListLoader=se,n.g.adsDescriptions=Le,n.g.adsRenderer=Me,n.g.DfpServer=Ue,n.g.adsTrackers={getRequestedAds:qL},n.g.AdIntegrator=je,n.g.AdBehaviour=r,n.g.AdImpression=Ke(),n.g.AdEvents=Ze(),w.ZP.broker("molEntry").register("call for page analytics",(()=>({configVersion:(0,T.U2)("__generated.commit.sha"),bundle:"mol",cmVersion:(0,T.U2)("__generated.rulesJs.version"),cmCluster:(0,T.U2)("__generated.rulesJs.cluster")})));const VL=(e,t,n={})=>Object.entries(e).reduce(((e,[n,i])=>{const r=(t?t+".":"")+n;if("default"===n)e[t]=i;else if("function"==typeof i)e[r]=i;else{if(i)return VL(i,r,e);console.warn(`Plugin "${r}" does not export anything. Check the way it's being imported in to the project.`)}return e}),n),HL=Object.assign({},a,VL(b)),zL=["api","site","adsFree","message-trace","conditionalEnable","imageGallery","adListLoader","scriptLoader","prebid","pageVisibility","runtimeMessages","sticky.mpus","sticky.banner","version","slots.mpuPuffOthers","skins","performance","nonAdServable","smartScheduler","messagePluginsFromCreatives","slots.descriptions","conditionalLoad","analytics.coreMetrics","analytics.reportPlugins","takeovers.videowallpaper","adPageType","slotDefinition","slots.delayMount","userId","domain","page.placement","slots.display-handlers.skies",...(0,T.U2)("plugins.enabled",[])];async function WL(){await async function(e){let{plugins:t=ot,context:n={},mandatory:i=st,messageBus:r}=e;t={...t,...mt((0,tt.uM)())},at=[],it=r,rt=it.broker("plugin-manager"),await(async(e,t)=>{const n=(0,T.U2)("pluginManager.setupTimeout",5e3),i=async(e,i,r)=>{try{const a={...ht(e,t),pluginsAlreadyRun:r};(0,T.t8)("pluginManager.setupTimeout",i.plugiSetupTimeout||n);const o=i.pluginSetup(a),s=(0,T.U2)("pluginManager.setupTimeout",n);return await(0,et.yq)(s,o)}catch(t){console.error(`Error calling pluginSetup on plugin '${e}':`,t)}},r=new Set;let a=null;for(;;){const t=(0,T.U2)("plugins.enabled").filter((e=>!r.has(e))).shift();if(!t)break;if(a===t){nt.warn("Plugin",t,"just ran and its asking to run again, ignoring it"),r.add(t);continue}a=t;let n="object"==typeof(o=e[t])&&o.default?o.default:o;n="object"==typeof n?n.default:n,n&&"function"==typeof n.pluginSetup?(nt("setup plugin",t),"not yet"!==await i(t,n,r)?(nt("ran:",t),r.add(t)):nt("plugin",t,"asked to be called again")):r.add(t)}var o})(t,n),rt.emit("plugins initialized"),rt.register("get all plugins",(()=>t));for(const e of i)gt(t,e,n);const a=ut.length?await async function(e){const t=Qe(),n=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return t})),i=t.map((t=>[t,e[t]])).filter((e=>{let[,t]=e;return!t})).map((e=>{let[t]=e;return t})),r=(await Promise.all(n.map((async e=>{let[t,n]=e;return await pt(t,n)&&t})))).filter((e=>e));return(0,T.t8)("plugins.enabled",[...r,...i]),r}(t):Qe();for(const e of a)gt(t,e,n);rt.emit("plugins enabled",at),it.start()}({plugins:HL,messageBus:w.ZP,context:fh}),Object.assign(n.g.adverts,i),function(){const{adverts:e}=n.g,t=Array.isArray(e.queue)?e.queue:[];for(NL("There are",t.length,"items on the queue");t.length;)FL(t.shift());e.queue={push(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach((e=>FL(e)))}}}()}(0,T.t8)("plugins.enabled",zL),(0,T.t8)("tcfv2.uuid.useRtaId",!0);const $L=(0,T.U2)("cwv.barriers.global","ads");$L?DM.later($L,WL):WL()},9978:(e,t,n)=>{"use strict";function i(e){const t=e.id&&document.getElementById(e.id);if(t)return t;const n=document.currentScript||r(document.querySelectorAll(`*[id^=${e.pos}] script`))||r(document.scripts);if(!n||"BODY"===n.parentNode.nodeName)throw new Error(`Cannot find current script for ${e.pos}`);return n.parentNode}function r(e){return e[e.length-1]}n(8728),n(5622);var a=n(6663),o=n(1430);var s=n(422),d=n(816),l=n(4252),u=n(1191),c=n(6716);var p,h=n(6212),f=n(2423),g=n(3838),m=n(5966),v=n(7134);if(~(0,h.U2)("plugins.enabled",[]).indexOf("reconfigureSlotsEnabled")&&(0,v.d)(),~(0,h.U2)("plugins.enabled",[]).indexOf("mvt")&&function(e){const{tests:t,scenarios:n,selectedScenarios:i}=(0,g.s)((0,f.x)("mvt").extend("facade"),e),r=t.map((e=>[e.name,i[e.name]])).filter((e=>{let[,t]=e;return t})).map((e=>e.join("="))).join(",");(0,m.m)(h.U2,h.t8,n),(0,h._D)(),(0,c.j)({mvt:r})}((0,h.U2)("mvt.tests",{})),function(e){for(const t of e)document.documentElement.classList.add(`molads_${t}_on`)}(Object.keys((0,h.U2)("slots.enabled",{}))),function(){const e=PageCriteria.geo;e&&document.documentElement.classList.add(`${e.toLowerCase()}_country`)}(),p=(0,h.U2)("plugins.enabled",[]),!(0,o.ej)("smart-banner")&&Array.isArray(p)&&~p.indexOf("smartBanner")&&(window.PageCriteria&&(window.PageCriteria.isTablet||window.PageCriteria.isMobile)||function(){const e=navigator.userAgent;try{return(Boolean(e.match(/iPad/i))||"iPad"===navigator.platform||"MacIntel"===navigator.platform&&"ontouchend"in document)&&!Boolean(navigator.userAgent.match(/Windows Phone|iemobile|WPDesktop/i))}catch(e){return!1}}()||(0,o.bP)())&&!/^https?:\/\/t\.co(\/.*)?$/.test(document.referrer)&&!/[?&]source=newzit\.app/.test(location.search)&&document.documentElement.classList.add("smart-banner-enabled"),n.g.isAdFreeEntitled&&n.g.isAdFreeEntitled()&&document.documentElement.classList.add("molads_ads_free"),o.s$&&document.documentElement.classList.add("is_safari"),n.g.adverts.queue=n.g.adverts.queue||[],n.g.adverts.addToArray=function(e){n.g.adverts.queue.push(["FacadeQueueItem","addToArray",[e,i(e)]])},n.g.adverts.initEmergencyRules=y("initEmergencyRules"),n.g.adverts.initSlots=y("initSlots"),n.g.adverts.addFBRemarketingPixel=y("addFBRemarketingPixel"),n.g.adverts.on=y("on"),n.g.adverts.getRendered=()=>[],n.g.adverts.addTaboolaPosition=y("addTaboolaPosition"),n.g.adverts.setSupportedSlots=y("setSupportedSlots"),n.g.adverts.requestAdByGoogle=n.g.adverts.requestGoogleAd=y("requestAdByGoogle"),n.g.adverts.stopRefreshingAds=y("stopRefreshingAds"),n.g.adverts.forceRefreshAds=y("forceRefreshAds"),n.g.adverts.appendToInfiniteList=y("appendToInfiniteList"),(0,h.U2)("abe.detection.enabled")){const e=(0,f.x)("abe");(0,c.j)({abdEnabled:!0});const t={delay:(0,h.U2)("abe.detection.delay",0),maxGAMAdRenderTime:(0,h.U2)("abe.detection.maxGAMAdRenderTime",3e3),sessionDepth:(0,h.U2)("abe.detection.sessionDepth",1/0),testMethodName:(0,h.U2)("abe.detection.testMethod","none"),peelTimeout:(0,h.U2)("abe.detection.peelTimeout",1e3),dummyId:(0,h.U2)("abe.detection.dummyId","tlz.sjhiu"),testMethod:()=>Promise.resolve([!1])};e("options:",t);const i=function(e){const t=[s.decode("uftuXjuiEvnnzBe"),s.decode("uftuXjuiHbnBcfBe"),s.decode("uftuXjuiQffm")].includes(e.testMethodName)?s[e.testMethodName]:e.testMethod;return e.sessionDepth>0?function(e){const t=e.testMethodName,n=(0,s.getBlockerDepth)();return n<e.sessionDepth?(function(e){let t=!1;const n=()=>(0,s.registerDetection)(t),i=()=>{t=!1,window.removeEventListener("unload",n),(0,s.registerDetection)(t)};window.addEventListener("unload",n),(0,s.onPosHasRendered)(i),(0,u.untilBodyAvailable)().then((()=>e.testMethod(e))).then((e=>{let[n]=e;t=n})).catch((e=>{i(),console.error(e)}))}(e),s.CANCEL_ABD):(window.addEventListener("unload",(()=>{(0,s.getBlockerDepth)()>0&&(0,s.incrementAdBlockerDepth)()})),(0,c.H)({payload:{abdReason:t,adblocker:!0,adblockerDepth:n,method:"multi-page",adIframes:(0,s.getAdIFrames)().length,adIframeAccounts:(0,s.getAdIframeAccounts)()}}).then((()=>({blocked:!0,reason:t}))))}({...e,testMethod:t}):function(e){const t=e.testMethodName,n=(0,s.listenToPosRendered)();return(0,u.untilBodyAvailable)().then((()=>function(e){const{resolve:t,promise:n}=(0,l.PQ)(),i=(0,d.Ds)(t,e);return i(),(0,s.onPosRequest)(i),n}(e.delay))).then((()=>e.testMethod(e))).then((e=>{let[i,r]=e;return(0,c.H)({payload:{...r,abdReason:t,adblocker:i&&!n(),method:"one-page",posRenderedDuringABD:n(),adIframes:(0,s.getAdIFrames)().length,adIframeAccounts:(0,s.getAdIframeAccounts)()},type:"abd"}).then((()=>[i,r]))})).then((e=>{let[n,i]=e;return{blocked:n,reason:t,...i}}),(e=>(console.error(e),{blocked:!1,reason:t})))}({...e,testMethod:t})}(t);i!==s.CANCEL_ABD?i.then((({blocked:t,reason:i,...r})=>(e("result:",{blocked:t,reason:i,...r}),n.g.adverts.queue.push({scope:(0,s.decode)("beCmpdlfsEfufdujpo"),data:{adblocker:t,reason:i,...r}}),t))).then((e=>e&&(0,h.U2)("abe.displayDialog",!1)&&(0,s.displayAdblockerDialog)().then((e=>e&&(0,c.H)({type:"abe"}))))).catch(console.error):e("cancelled")}function y(e,t){return(...i)=>(n.g.adverts.queue.push(["FacadeQueueItem",e,i]),t)}~(0,h.U2)("plugins.enabled",[]).indexOf("tcfv2")&&(0,a.oP)()},3789:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>tp});var i=n(1303),r=n(4880),a=n(5446),o=n(6959),s=n(4018),d=n(7926),l=n(1047),u=n(6222),c=n(7730),p=n(753),h=d.FP,f=h.AD_RENDER_FAILED,g=h.AD_RENDER_SUCCEEDED;function m(e){var t=e.reason,n=e.message,i=e.bid,a=e.id,s={reason:t,message:n};i&&(s.bid=i),a&&(s.adId=a),(0,r.H)(n),o.j8(f,s)}function v(e){var t=e.doc,n=e.bid,i=e.id,r={doc:t};n&&(r.bid=n),i&&(r.adId=i),o.j8(g,r)}var y=d.FP.BID_WON,b=d.FP.STALE_RENDER,_={"Prebid Request":function(e,t,n){if(null!=n){if(n.status!==d.UE.fe||((0,r.yN)("Ad id ".concat(n.adId," has been rendered before")),o.j8(b,n),!(0,a.Z)(p.vc.getConfig("auctionOptions"),"suppressStaleRender"))){try{!function(e,t){var n=e.adId,i=e.ad,a=e.adUrl,o=e.width,s=e.height,d=e.renderer,l=e.cpm,u=e.originalCpm;(0,c.Pd)(d)?(0,c._U)(d,e):n&&(w(e),t({message:"Prebid Response",ad:(0,r.ew)(i,u||l),adUrl:(0,r.ew)(a,u||l),adId:n,width:o,height:s}))}(n,e)}catch(e){return void m({reason:d.q_.EXCEPTION,message:e.message,id:t.adId,bid:n})}l.K.addWinningBid(n),o.j8(y,n)}}else m({reason:d.q_.CANNOT_FIND_AD,message:"Cannot find ad '".concat(t.adId,"' for cross-origin render request"),id:t.adId})},"Prebid Native":function(e,t,n){if(null!=n)switch(t.action){case"assetRequest":e((0,s.eK)(t,n));break;case"allAssetRequest":e((0,s.JL)(t,n));break;case"resizeNativeHeight":n.height=t.height,n.width=t.width,w(n);break;default:if("click"===(0,s.e6)(t,n))return;l.K.addWinningBid(n),o.j8(y,n)}else(0,r.H)("Cannot find ad '".concat(t.adId,"' for x-origin event request"))},"Prebid Event":function(e,t,n){if(null!=n)if(n.status===d.UE.fe)switch(t.event){case d.FP.AD_RENDER_FAILED:m({bid:n,id:t.adId,reason:t.info.reason,message:t.info.message});break;case d.FP.AD_RENDER_SUCCEEDED:v({doc:null,bid:n,id:t.adId});break;default:(0,r.H)("Received x-origin event request for unsupported event: '".concat(t.event,"' (adId: '").concat(t.adId,"')"))}else(0,r.yN)("Received x-origin event request without corresponding render request for ad '".concat(t.adId,"'"));else(0,r.H)("Cannot find ad '".concat(t.adId,"' for x-origin event request"))}};function T(e){var t=e.message?"message":"data",n={};try{n=JSON.parse(e[t])}catch(e){return}if(n&&n.adId&&n.message){var i=(0,u.sE)(l.K.getBidsReceived(),(function(e){return e.adId===n.adId}));_.hasOwnProperty(n.message)&&_[n.message](function(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,r.H)(e),new Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}(e),n,i)}}function w(e){var t=e.adId,n=e.adUnitCode,i=e.width,a=e.height;["div","iframe"].forEach((function(e){var o=function(e){var i=function(e,t){return(0,r.T9)()?function(e){var t=(0,u.sE)(window.googletag.pubads().getSlots(),(function(t){return(0,u.sE)(t.getTargetingKeys(),(function(n){return(0,u.q9)(t.getTargeting(n),e)}))}));return t?t.getSlotElementId():null}(e):(0,r.X4)()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,n),a=document.getElementById(i);return a&&a.querySelector(e)}(e+':not([style*="display: none"])');if(o){var s=o.style;s.width=i+"px",s.height=a+"px"}else(0,r.yN)("Unable to locate matching page element for adUnitCode ".concat(n,".  Can't resize it to ad's dimensions.  Please review setup."))}))}var S=n(8098),k=n(9994),I=n(3794),C=n(7273),E=n(4039);function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},A.apply(this,arguments)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var D=[],R="targetingControls.allowTargetingKeys",L="targetingControls.addTargetingKeys",M='Only one of "'.concat(R,'" or "').concat(L,'" can be set'),U=Object.keys(d.TD).map((function(e){return d.TD[e]})),j=function(e){return e.responseTimestamp+1e3*e.ttl-1e3>(0,r.AB)()},N=function(e){return e&&(e.status&&!(0,u.q9)([d.UE.fe],e.status)||!e.status)},B=(0,C.z3)("sync",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!i){var a=[],o=p.vc.getConfig("sendBidsControl.dealPrioritization"),s=(0,r.vM)(e,"adUnitCode");return Object.keys(s).forEach((function(e){var i=[],d=(0,r.vM)(s[e],"bidderCode");Object.keys(d).forEach((function(e){return i.push(d[e].reduce(t))})),n>0?(i=o?i.sort(F(!0)):i.sort((function(e,t){return t.cpm-e.cpm})),a.push.apply(a,x(i.slice(0,n)))):a.push.apply(a,x(i))})),a}return e}));function F(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t,n){return void 0!==t.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===t.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?n.cpm-t.cpm:n.adserverTargeting.hb_pb-t.adserverTargeting.hb_pb}}var q,V,H=function(e){var t={},n={};function i(e,t){return e.adserverTargeting&&t&&((0,r.kJ)(t)&&(0,u.q9)(t,e.adUnitCode)||"string"==typeof t&&e.adUnitCode===t)}function o(e,t){if(!0===p.vc.getConfig("targetingControls.alwaysIncludeDeals")){var n=U.concat(s.xc);return B(t,r.ZH).map((function(t){if(t.dealId&&i(t,e))return P({},t.adUnitCode,S(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]}))))})).filter((function(e){return e}))}return[]}function l(e,t){var n=A({},d.TD,d.FY),i=Object.keys(n),a={};(0,r.PN)("allowTargetingKeys - allowed keys [ ".concat(t.map((function(e){return n[e]})).join(", ")," ]")),e.map((function(e){var r=Object.keys(e)[0],o=e[r].filter((function(e){var r=Object.keys(e)[0],o=0===i.filter((function(e){return 0===r.indexOf(n[e])})).length||(0,u.sE)(t,(function(e){var t=n[e];return 0===r.indexOf(t)}));return a[r]=!o,o}));e[r]=o}));var o=Object.keys(a).filter((function(e){return a[e]}));return(0,r.PN)("allowTargetingKeys - removed keys [ ".concat(o.join(", ")," ]")),e.filter((function(e){return e[Object.keys(e)[0]].length>0}))}function c(e,t){var n=(0,r.I8)(e);return Object.keys(n).map((function(e){return{adUnitCode:e,adserverTargeting:n[e]}})).sort(F()).reduce((function(e,i,a,o){var s,d=(s=i.adserverTargeting,Object.keys(s).reduce((function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(s[t]),"%26")}),""));a+1===o.length&&(d=d.slice(0,-3));var l=i.adUnitCode,u=d.length;return u<=t?(t-=u,(0,r.PN)("AdUnit '".concat(l,"' auction keys comprised of ").concat(u," characters.  Deducted from running threshold; new limit is ").concat(t),n[l]),e[l]=n[l]):(0,r.yN)("The following keys for adUnitCode '".concat(l,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(u,", the current allotted amount was ").concat(t,".\n"),n[l]),a+1===o.length&&0===Object.keys(e).length&&(0,r.H)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e}),{})}function h(e){var t=e.map((function(e){return P({},Object.keys(e)[0],e[Object.keys(e)[0]].map((function(e){return P({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))})).reduce((function(e,t){return A(t,e)}),{}))})).reduce((function(e,t){var n=Object.keys(t)[0];return e[n]=A({},e[n],t[n]),e}),{});return t}function f(t){return"string"==typeof t?[t]:(0,r.kJ)(t)?t:e.getAdUnitCodes()||[]}function g(){var t=e.getBidsReceived();if(p.vc.getConfig("useBidCache")){var i=p.vc.getConfig("bidCacheFilterFunction");"function"==typeof i&&(t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId||!!i(e)})))}else t=t.filter((function(e){return n[e.adUnitCode]===e.auctionId}));return t=t.filter((function(e){return(0,a.Z)(e,"video.context")!==I.Oh})).filter((function(e){return"banner"!==e.mediaType||(0,k.lO)([e.width,e.height])})).filter(N).filter(j),B(t,r.K$)}function m(e,n){var i=t.getWinningBids(e,n),r=v();return i=i.map((function(e){return P({},e.adUnitCode,Object.keys(e.adserverTargeting).filter((function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===r.indexOf(t)})).reduce((function(t,n){var i=[e.adserverTargeting[n]],r=P({},n.substring(0,20),i);if(n===d.TD.DEAL){var a=P({},"".concat(n,"_").concat(e.bidderCode).substring(0,20),i);return[].concat(x(t),[r,a])}return[].concat(x(t),[r])}),[]))})),i}function v(){return e.getStandardBidderAdServerTargeting().map((function(e){return e.key})).concat(U).filter(r.tT)}function y(e,t,n,i){return Object.keys(t.adserverTargeting).filter(b()).forEach((function(n){e.length&&e.filter(function(e){return function(n){return n.adUnitCode===t.adUnitCode&&n.adserverTargeting[e]}}(n)).forEach(function(e){return function(n){(0,r.kJ)(n.adserverTargeting[e])||(n.adserverTargeting[e]=[n.adserverTargeting[e]]),n.adserverTargeting[e]=n.adserverTargeting[e].concat(t.adserverTargeting[e]).filter(r.tT),delete t.adserverTargeting[e]}}(n))})),e.push(t),e}function b(){var e=v().concat(s.xc);return function(t){return-1===e.indexOf(t)}}function _(e){return P({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(b()).map((function(t){return P({},t.substring(0,20),[e.adserverTargeting[t]])})))}function T(e,t){return t.filter((function(t){return(0,u.q9)(e,t.adUnitCode)})).map((function(e){return A({},e)})).reduce(y,[]).map(_).filter((function(e){return e}))}function w(e,t){var n=U.concat(s.xc),a=p.vc.getConfig("sendBidsControl.bidLimit"),o=B(t,r.ZH,a),l=p.vc.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),u=l?l.map((function(e){return d.TD[e]})):n;return o.map((function(t){if(i(t,e))return P({},t.adUnitCode,S(t,n.filter((function(e){return void 0!==t.adserverTargeting[e]&&-1!==u.indexOf(e)}))))})).filter((function(e){return e}))}function S(e,t){return t.map((function(t){return P({},"".concat(t,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[t]])}))}function C(t){function n(e){return(0,a.Z)(e,d.k2.xn)}return e.getAdUnits().filter((function(e){return(0,u.q9)(t,e.code)&&n(e)})).map((function(e){return P({},e.code,function(e){var t=n(e);return Object.keys(t).map((function(e){return(0,r.d8)(t[e])&&(t[e]=t[e].split(",").map((function(e){return e.trim()}))),(0,r.kJ)(t[e])||(t[e]=[t[e]]),P({},e,t[e])}))}(e))}))}return t.setLatestAuctionForAdUnit=function(e,t){n[e]=t},t.resetPresetTargeting=function(t,n){if((0,r.T9)()){var i=f(t),a=e.getAdUnits().filter((function(e){return(0,u.q9)(i,e.code)})),o=D.reduce((function(e,t){return e[t]=null,e}),{});window.googletag.pubads().getSlots().forEach((function(e){var t=(0,r.LQ)(n)&&n(e);a.forEach((function(n){(n.code===e.getAdUnitPath()||n.code===e.getSlotElementId()||(0,r.LQ)(t)&&t(n.code))&&e.updateTargetingFromMap(o)}))}))}},t.resetPresetTargetingAST=function(e){f(e).forEach((function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var n=Object.keys(t.keywords),i={};n.forEach((function(e){(0,u.q9)(D,e.toLowerCase())||(i[e]=t.keywords[e])})),window.apntag.modifyTag(e,{keywords:i})}}))},t.getAllTargeting=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),n=f(e),i=m(n,t).concat(T(n,t)).concat(p.vc.getConfig("enableSendAllBids")?w(n,t):o(n,t)).concat(C(n));i.map((function(e){Object.keys(e).map((function(t){e[t].map((function(e){-1===D.indexOf(Object.keys(e)[0])&&(D=Object.keys(e).concat(D))}))}))}));var a=Object.keys(A({},d.kF,d.FY)),s=p.vc.getConfig(R),u=p.vc.getConfig(L);if(null!=u&&null!=s)throw new Error(M);s=null!=u?a.concat(u):s||a,Array.isArray(s)&&s.length>0&&(i=l(i,s)),i=h(i);var v=p.vc.getConfig("targetingControls.auctionKeyMaxChars");return v&&((0,r.PN)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(v," characters.  Running checks on auction keys...")),i=c(i,v)),n.forEach((function(e){i[e]||(i[e]={})})),i},p.vc.getConfig("targetingControls",(function(e){null!=(0,a.Z)(e,R)&&null!=(0,a.Z)(e,L)&&(0,r.H)(M)})),t.setTargetingForGPT=function(e,t){window.googletag.pubads().getSlots().forEach((function(n){Object.keys(e).filter(t?t(n):(0,r.zV)(n)).forEach((function(t){Object.keys(e[t]).forEach((function(n){var i=e[t][n];"string"==typeof i&&-1!==i.indexOf(",")&&(i=i.split(",")),e[t][n]=i})),(0,r.ji)("Attempting to set targeting-map for slot: ".concat(n.getSlotElementId()," with targeting-map:"),e[t]),n.updateTargetingFromMap(e[t])}))}))},t.getWinningBids=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g(),n=f(e);return t.filter((function(e){return(0,u.q9)(n,e.adUnitCode)})).filter((function(e){return!0===E.S.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0})).map((function(e){return e.adUnitCode})).filter(r.tT).map((function(e){return t.filter((function(t){return t.adUnitCode===e?t:null})).reduce(r.ZH)}))},t.setTargetingForAst=function(e){var n=t.getAllTargeting(e);try{t.resetPresetTargetingAST(e)}catch(e){(0,r.H)("unable to reset targeting for AST"+e)}Object.keys(n).forEach((function(e){return Object.keys(n[e]).forEach((function(t){if((0,r.ji)("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),(0,r.d8)(n[e][t])||(0,r.kJ)(n[e][t])){var i={};t.search(/pt[0-9]/)<0?i[t.toUpperCase()]=n[e][t]:i[t]=n[e][t],window.apntag.setKeywords(e,i,{overrideKeyValue:!0})}}))}))},t.isApntagDefined=function(){if(window.apntag&&(0,r.LQ)(window.apntag.setKeywords))return!0},t}(l.K),z=n(2198),W=(0,r.qp)("DEBUG:"),$=W.logWarn,G=W.logMessage,K="pbjs:debugging",X=[function(e){Y(),function(e){q=ie.bind(e),z.Yt.before(q,5),V=re.bind(e),z.e0.before(V,5)}(e)}],Z=[Y];function Y(){z.Yt.getHooks({hook:q}).remove(),z.e0.getHooks({hook:V}).remove()}function J(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];p.vc.setConfig({debug:!0}),X.forEach((function(t){return t(e)})),G("bidder overrides enabled".concat(t?" from session":""))}function Q(){Z.forEach((function(e){return e()})),G("bidder overrides disabled")}function ee(e,t,n){return!(!e.bidder||e.bidder===t)||!(!e.adUnitCode||e.adUnitCode===n)}function te(e,t){return Array.isArray(e)&&-1===e.indexOf(t)}function ne(e,t,n){return Object.keys(e).filter((function(e){return-1===["adUnitCode","bidder"].indexOf(e)})).reduce((function(t,i){return G("bidder overrides changed '".concat(t.adUnitCode,"/").concat(t.bidderCode,"' ").concat(n,".").concat(i," from '").concat(t[i],".js' to '").concat(e[i],"'")),t[i]=e[i],t.isDebug=!0,t}),t)}function ie(e,t,n){var i=this;te(i.bidders,n.bidderCode)?$("bidder '".concat(n.bidderCode,"' excluded from auction by bidder overrides")):(Array.isArray(i.bids)&&i.bids.forEach((function(e){ee(e,n.bidderCode,t)||ne(e,n,"bidder")})),e(t,n))}function re(e,t){var n=this,i=t.filter((function(e){return!te(n.bidders,e.bidderCode)||($("bidRequest '".concat(e.bidderCode,"' excluded from auction by bidder overrides")),!1)}));Array.isArray(n.bidRequests)&&i.forEach((function(e){n.bidRequests.forEach((function(t){e.bids.forEach((function(n){ee(t,e.bidderCode,n.adUnitCode)||ne(t,n,"bidRequest")}))}))})),e(i)}var ae=(0,C.z3)("sync",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sessionStorage,i=void 0===n?window.sessionStorage:n;if(e.enabled)try{i.setItem(K,JSON.stringify(e))}catch(e){}else try{i.removeItem(K)}catch(e){}}));p.vc.getConfig("debugging",(function(e){return function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).sessionStorage,n=void 0===t?window.sessionStorage:t;ae(e,{sessionStorage:n}),e.enabled?J(e):Q()}(e.debugging)}));var oe=n(3083),se=n(4202),de=n(4447),le=n(9584);function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ue.apply(this,arguments)}var ce=(0,i.R)(),pe=S.k_.triggerUserSyncs,he=d.FP,fe=he.ADD_AD_UNITS,ge=he.BID_WON,me=he.REQUEST_BIDS,ve=he.SET_TARGETING,ye=he.STALE_RENDER,be=d.q_,_e=be.PREVENT_WRITING_ON_MAIN_DOCUMENT,Te=be.NO_AD,we=be.EXCEPTION,Se=be.CANNOT_FIND_AD,ke=be.MISSING_DOC_OR_ADID,Ie={bidWon:function(e){var t=l.K.getBidsRequested().map((function(e){return e.bids.map((function(e){return e.adUnitCode}))})).reduce(r.xH).filter(r.tT);if((0,r.r3)(t,e))return!0;(0,r.H)('The "'+e+'" placement is not defined.')}};function Ce(e,t,n){e.defaultView&&e.defaultView.frameElement&&(e.defaultView.frameElement.width=t,e.defaultView.frameElement.height=n)}function Ee(e,t){var n=[];return(0,r.kJ)(e)&&(t?e.length===t:e.length>0)&&(e.every((function(e){return(0,r.HC)(e,2)}))?n=e:(0,r.HC)(e,2)&&n.push(e)),n}function Ae(e,t){var n=(0,a.Z)(e,"mediaTypes.".concat(t,".pos"));if(!(0,r.hj)(n)||isNaN(n)||!isFinite(n)){var i="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");(0,r.yN)(i),o.j8(d.FP.AUCTION_DEBUG,{type:"WARNING",arguments:i}),delete e.mediaTypes[t].pos}return e}!function(e){var t;try{e=e||window.sessionStorage,t=JSON.parse(e.getItem(K))}catch(e){}t&&J(t,!0)}(),ce.bidderSettings=ce.bidderSettings||{},ce.libLoaded=!0,ce.version="v6.24.1",(0,r.PN)("Prebid.js v6.24.1 loaded"),ce.installedModules=ce.installedModules||[],ce.adUnits=ce.adUnits||[],ce.triggerUserSyncs=pe;var Pe=(0,C.z3)("sync",(function(e){var t=[];return e.forEach((function(e){if(null!=(e=function(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},n=e.mediaTypes,i=e.bids;return null==i||(0,r.kJ)(i)?null==i&&null==e.ortb2Imp?((0,r.H)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):n&&0!==Object.keys(n).length?(null==e.ortb2Imp||null!=i&&0!==i.length||(e.bids=[{bidder:null}],(0,r.ji)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,r.H)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,r.H)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}(e))){var n,i,a,o=e.mediaTypes;o.banner&&(n=function(e){var t=(0,r.I8)(e),n=t.mediaTypes.banner,i=Ee(n.sizes);return i.length>0?(n.sizes=i,t.sizes=i):((0,r.H)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),t}(e),o.banner.hasOwnProperty("pos")&&(n=Ae(n,"banner"))),o.video&&(i=function(e){var t=(0,r.I8)(e),n=t.mediaTypes.video;if(n.playerSize){var i="number"==typeof n.playerSize[0]?2:1,a=Ee(n.playerSize,i);a.length>0?(2===i&&(0,r.PN)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),n.playerSize=a,t.sizes=a):((0,r.H)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return t}(n||e),o.video.hasOwnProperty("pos")&&(i=Ae(i,"video"))),o.native&&(a=function(e){var t=(0,r.I8)(e),n=t.mediaTypes.native;return n.image&&n.image.sizes&&!Array.isArray(n.image.sizes)&&((0,r.H)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete t.mediaTypes.native.image.sizes),n.image&&n.image.aspect_ratios&&!Array.isArray(n.image.aspect_ratios)&&((0,r.H)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete t.mediaTypes.native.image.aspect_ratios),n.icon&&n.icon.sizes&&!Array.isArray(n.icon.sizes)&&((0,r.H)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete t.mediaTypes.native.icon.sizes),t}(i||n||e));var s=ue({},n,i,a);t.push(s)}})),t}),"checkAdUnitSetup");function xe(e){var t=l.K[e]().filter(r.ak.call(r.IK,this,l.K.getAdUnitCodes())),n=l.K.getLastAuctionId();return t.map((function(e){return e.adUnitCode})).filter(r.tT).map((function(e){return t.filter((function(t){return t.auctionId===n&&t.adUnitCode===e}))})).filter((function(e){return e&&e[0]&&e[0].adUnitCode})).map((function(e){return t={},i={bids:e},(n=e[0].adUnitCode)in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t;var t,n,i})).reduce((function(e,t){return ue(e,t)}),{})}function Oe(e,t,n){var i=t.querySelector(n);e.parentNode&&e.parentNode===i||(0,r.jC)(e,t,n)}ce.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,r.PN)("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=ce.getAdserverTargetingForAdUnitCode(e);return(0,r.Ob)(t)}(0,r.ji)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},ce.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=l.K.getAllBidsForAdUnitCode(e).filter(N).filter(j);return t.length?t.reduce(r.ZH):{}}(0,r.ji)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},ce.getAdserverTargetingForAdUnitCode=function(e){return ce.getAdserverTargeting(e)[e]},ce.getAdserverTargeting=function(e){return(0,r.PN)("Invoking pbjs.getAdserverTargeting",arguments),H.getAllTargeting(e)},ce.getConsentMetadata=function(){return(0,r.PN)("Invoking pbjs.getConsentMetadata"),{gdpr:le.rp.getConsentMeta(),usp:le.nX.getConsentMeta(),coppa:!!p.vc.getConfig("coppa")}},ce.getNoBids=function(){return(0,r.PN)("Invoking pbjs.getNoBids",arguments),xe("getNoBids")},ce.getNoBidsForAdUnitCode=function(e){return{bids:l.K.getNoBids().filter((function(t){return t.adUnitCode===e}))}},ce.getBidResponses=function(){return(0,r.PN)("Invoking pbjs.getBidResponses",arguments),xe("getBidsReceived")},ce.getBidResponsesForAdUnitCode=function(e){return{bids:l.K.getBidsReceived().filter((function(t){return t.adUnitCode===e}))}},ce.setTargetingForGPTAsync=function(e,t){if((0,r.PN)("Invoking pbjs.setTargetingForGPTAsync",arguments),(0,r.T9)()){var n=H.getAllTargeting(e);H.resetPresetTargeting(e,t),H.setTargetingForGPT(n,t),Object.keys(n).forEach((function(e){Object.keys(n[e]).forEach((function(t){"hb_adid"===t&&l.K.setStatusForBids(n[e][t],d.UE.CK)}))})),o.j8(ve,n)}else(0,r.H)("window.googletag is not defined on the page")},ce.setTargetingForAst=function(e){(0,r.PN)("Invoking pbjs.setTargetingForAn",arguments),H.isApntagDefined()?(H.setTargetingForAst(e),o.j8(ve,H.getAllTargeting())):(0,r.H)("window.apntag is not defined on the page")},ce.renderAd=(0,C.z3)("async",(function(e,t,n){if((0,r.PN)("Invoking pbjs.renderAd",arguments),(0,r.ji)("Calling renderAd with adId :"+t),e&&t)try{var i=l.K.findBidByAdId(t);if(i){var s=!0;if(i&&i.status===d.UE.fe&&((0,r.yN)("Ad id ".concat(i.adId," has been rendered before")),o.j8(ye,i),(0,a.Z)(p.vc.getConfig("auctionOptions"),"suppressStaleRender")&&(s=!1)),s){if(i.ad=(0,r.ew)(i.ad,i.originalCpm||i.cpm),i.adUrl=(0,r.ew)(i.adUrl,i.originalCpm||i.cpm),n&&n.clickThrough){var u=n.clickThrough;i.ad=(0,r.x_)(i.ad,u),i.adUrl=(0,r.x_)(i.adUrl,u)}l.K.addWinningBid(i),o.j8(ge,i);var h=i.height,f=i.width,g=i.ad,y=i.mediaType,b=i.adUrl,_=i.renderer,T=document.createComment("Creative ".concat(i.creativeId," served by ").concat(i.bidder," Prebid.js Header Bidding"));if((0,r.jC)(T,e,"html"),(0,c.Pd)(_))(0,c._U)(_,i,e),Oe(T,e,"html"),v({doc:e,bid:i,id:t});else if(e===document&&!(0,r.yL)()||"video"===y){var w="Error trying to write ad. Ad render call ad id ".concat(t," was prevented from writing to the main document.");m({reason:_e,message:w,bid:i,id:t})}else if(g)e.write(g),e.close(),Ce(e,f,h),Oe(T,e,"html"),(0,r.R_)(i),v({doc:e,bid:i,id:t});else if(b){var S=(0,r.$u)();S.height=h,S.width=f,S.style.display="inline",S.style.overflow="hidden",S.src=b,(0,r.jC)(S,e,"body"),Ce(e,f,h),Oe(T,e,"html"),(0,r.R_)(i),v({doc:e,bid:i,id:t})}else{var k="Error trying to write ad. No ad for bid response id: ".concat(t);m({reason:Te,message:k,bid:i,id:t})}}}else{var I="Error trying to write ad. Cannot find ad by given id : ".concat(t);m({reason:Se,message:I,id:t})}}catch(e){var C="Error trying to write ad Id :".concat(t," to the page:").concat(e.message);m({reason:we,message:C,id:t})}else{var E="Error trying to write ad Id :".concat(t," to the page. Missing document or adId");m({reason:ke,message:E,id:t})}})),ce.removeAdUnit=function(e){(0,r.PN)("Invoking pbjs.removeAdUnit",arguments),e?((0,r.kJ)(e)?e:[e]).forEach((function(e){for(var t=ce.adUnits.length-1;t>=0;t--)ce.adUnits[t].code===e&&ce.adUnits.splice(t,1)})):ce.adUnits=[]},ce.requestBids=(0,C.z3)("async",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,n=e.timeout,i=e.adUnits,a=e.adUnitCodes,s=e.labels,d=e.auctionId;o.j8(me);var c=n||p.vc.getConfig("bidderTimeout");i=i&&p.vc.convertAdUnitFpd((0,r.kJ)(i)?i:[i])||ce.adUnits,(0,r.PN)("Invoking pbjs.requestBids",arguments);var h=(0,le.uV)(p.vc.getConfig("s2sConfig")||[]);if(i=Pe(i),a&&a.length?i=i.filter((function(e){return(0,u.q9)(a,e.code)})):a=i&&i.map((function(e){return e.code})),i.forEach((function(e){var t=Object.keys(e.mediaTypes||{banner:"banner"}),n=e.bids.map((function(e){return e.bidder})),i=le.ZP.bidderRegistry,a=n.filter((function(e){return!h.has(e)}));e.transactionId=(0,r.DO)(),a.forEach((function(n){var a=i[n],o=a&&a.getSpec&&a.getSpec(),s=o&&o.supportedMediaTypes||["banner"];t.some((function(e){return(0,u.q9)(s,e)}))?oe.f.incrementBidderRequestsCounter(e.code,n):((0,r.yN)((0,r.or)(e,n)),e.bids=e.bids.filter((function(e){return e.bidder!==n})))})),oe.f.incrementRequestsCounter(e.code)})),i&&0!==i.length){var f=l.K.createAuction({adUnits:i,adUnitCodes:a,callback:t,cbTimeout:c,labels:s,auctionId:d}),g=i.length;g>15&&(0,r.PN)("Current auction ".concat(f.getAuctionId()," contains ").concat(g," adUnits."),i),a.forEach((function(e){return H.setLatestAuctionForAdUnit(e,f.getAuctionId())})),f.callBids()}else if((0,r.ji)("No adUnits configured. No bids requested."),"function"==typeof t)try{t()}catch(e){(0,r.H)("Error executing bidsBackHandler",null,e)}})),ce.requestBids.before((function(e,t){function n(e){for(var t;t=e.shift();)t()}n(de.Ld),n(De),e.call(this,t)}),49),ce.addAdUnits=function(e){(0,r.PN)("Invoking pbjs.addAdUnits",arguments),ce.adUnits.push.apply(ce.adUnits,p.vc.convertAdUnitFpd((0,r.kJ)(e)?e:[e])),o.j8(fe)},ce.onEvent=function(e,t,n){(0,r.PN)("Invoking pbjs.onEvent",arguments),(0,r.LQ)(t)?!n||Ie[e].call(null,n)?o.on(e,t,n):(0,r.H)('The id provided is not valid for event "'+e+'" and no handler was set.'):(0,r.H)('The event handler provided is not a function and was not set on event "'+e+'".')},ce.offEvent=function(e,t,n){(0,r.PN)("Invoking pbjs.offEvent",arguments),n&&!Ie[e].call(null,n)||o.S1(e,t,n)},ce.getEvents=function(){return(0,r.PN)("Invoking pbjs.getEvents"),o.vw()},ce.registerBidAdapter=function(e,t){(0,r.PN)("Invoking pbjs.registerBidAdapter",arguments);try{le.ZP.registerBidAdapter(e(),t)}catch(e){(0,r.H)("Error registering bidder adapter : "+e.message)}},ce.registerAnalyticsAdapter=function(e){(0,r.PN)("Invoking pbjs.registerAnalyticsAdapter",arguments);try{le.ZP.registerAnalyticsAdapter(e)}catch(e){(0,r.H)("Error registering analytics adapter : "+e.message)}},ce.createBid=function(e){return(0,r.PN)("Invoking pbjs.createBid",arguments),(0,se.m)(e)};var De=[],Re=(0,C.z3)("async",(function(e){e&&!(0,r.xb)(e)?((0,r.PN)("Invoking pbjs.enableAnalytics for: ",e),le.ZP.enableAnalytics(e)):(0,r.H)("pbjs.enableAnalytics should be called with option {}")}),"enableAnalyticsCb");function Le(e){e.forEach((function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,r.H)("Error processing command :","prebid.js",e)}}))}ce.enableAnalytics=function(e){De.push(Re.bind(this,e))},ce.aliasBidder=function(e,t,n){(0,r.PN)("Invoking pbjs.aliasBidder",arguments),e&&t?le.ZP.aliasBidAdapter(e,t,n):(0,r.H)("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},ce.getAllWinningBids=function(){return l.K.getAllWinningBids()},ce.getAllPrebidWinningBids=function(){return l.K.getBidsReceived().filter((function(e){return e.status===d.UE.CK}))},ce.getHighestCpmBids=function(e){return H.getWinningBids(e)},ce.markWinningBidAsUsed=function(e){var t=[];e.adUnitCode&&e.adId?t=l.K.getBidsReceived().filter((function(t){return t.adId===e.adId&&t.adUnitCode===e.adUnitCode})):e.adUnitCode?t=H.getWinningBids(e.adUnitCode):e.adId?t=l.K.getBidsReceived().filter((function(t){return t.adId===e.adId})):(0,r.yN)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(t[0].status=d.UE.fe)},ce.getConfig=p.vc.getConfig,ce.readConfig=p.vc.readConfig,ce.mergeConfig=p.vc.mergeConfig,ce.mergeBidderConfig=p.vc.mergeBidderConfig,ce.setConfig=p.vc.setConfig,ce.setBidderConfig=p.vc.setBidderConfig,ce.que.push((function(){window.addEventListener("message",T,!1)})),ce.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){(0,r.H)("Error processing command :",e.message,e.stack)}else(0,r.H)("Commands written into pbjs.cmd.push must be wrapped in a function")},ce.que.push=ce.cmd.push,ce.processQueue=function(){C.z3.ready(),Le(ce.que),Le(ce.cmd)};const Me=ce;var Ue=n(8393);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fe.apply(this,arguments)}var qe="33across",Ve=/^[a-zA-Z0-9_-]{22}$/,He="instream",ze=["mimes","minduration","maxduration","placement","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],We={uniqueSiteIds:[]};function $e(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function Ge(e){return"".concat(e.bidId)}function Ke(e){var t=e.bidRequests,n=e.gdprConsent,i=void 0===n?{}:n,o=e.uspConsent,s=e.pageUrl,d=e.ttxSettings,l={},u=t[0].params,c=u.siteId,p=u.test;return l.imp=[],t.forEach((function(e){var t,n;l.imp.push((n={id:(t=e).bidId,ext:{ttx:{prod:(0,a.Z)(t,"params.productId")}}},(0,a.Z)(t,"mediaTypes.banner")&&(n.banner=Ne({},function(e){var t,n,i=(0,a.Z)(e,"mediaTypes.banner",{}),o=(n=e.adUnitCode,document.getElementById(n)||document.getElementById(function(e){if((0,r.T9)())for(var t=googletag.pubads().getSlots(),n=(0,r.CS)(e),i=0;i<t.length;i++)if(n(t[i])){var a=t[i].getSlotElementId();return(0,r.PN)("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(a)),a}return(0,r.yN)("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(n))),s=function(e){return(0,r.kJ)(e)&&2===e.length&&!(0,r.kJ)(e[0])?[Ze(e)]:e.map(Ze)}(i.sizes);t="function"==typeof e.getFloor?s.map((function(t){var n,i=Qe(e,t,I.Mk);return i&&(n={ext:{ttx:{bidfloors:[i]}}}),Fe({},t,n)})):s;var d,l=function(e){return e.reduce((function(e,t){return t.h*t.w<e.h*e.w?t:e}))}(s),u=(d=function(e){return!function(){try{return(0,r.e7)()!==(0,r.Zy)()}catch(e){return!0}}()&&null!==e}(o)?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.w,r=n.h;return"visible"===t.document.visibilityState?nt(e,t,{w:i,h:r}):0}(o,(0,r.Zy)(),l):"nm",{ttx:{viewability:{amount:isNaN(d)?d:Math.round(d)}}});return{format:t,ext:u}}(t))),(0,a.Z)(t,"mediaTypes.video")&&(n.video=function(e){var t=(0,a.Z)(e,"mediaTypes.video",{}),n=(0,a.Z)(e,"params.video",{}),i=Ne(Ne({},t),n),r={},o=Ze(i.playerSize[0]),s=o.w,d=o.h;r.w=s,r.h=d,ze.forEach((function(e){i.hasOwnProperty(e)&&(r[e]=i[e])}));var l=Je(e);if(r.placement=r.placement||2,l===He&&(r.startdelay=r.startdelay||0,r.placement=1),"function"==typeof e.getFloor){var u=Qe(e,{w:r.w,h:r.h},I.pX);u&&Fe(r,{ext:{ttx:{bidfloors:[u]}}})}return r}(t)),n))})),l.site={id:c},s&&(l.site.page=s),l.id=t[0].auctionId,i.consentString&&(l.user=Xe(l.user,{consent:i.consentString})),Array.isArray(t[0].userIdAsEids)&&t[0].userIdAsEids.length>0&&(l.user=Xe(l.user,{eids:t[0].userIdAsEids})),l.regs=Xe(l.regs,{gdpr:Number(i.gdprApplies)}),o&&(l.regs=Xe(l.regs,{us_privacy:o})),l.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"6.24.1"}]}},t[0].schain&&(l.source=Xe(l.source,{schain:t[0].schain})),1===p&&(l.test=1),{method:"POST",url:d&&d.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(c),data:JSON.stringify(l),options:{contentType:"text/plain",withCredentials:!0}}}function Xe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,r.Ee)({},e,{ext:t})}function Ze(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function Ye(e){return(0,r.Ee)({},e,{params:{productId:Je(e)}})}function Je(e){var t=e.params,n=e.mediaTypes,i=n.banner,r=n.video;return r&&!i&&"instream"===r.context?He:"inview"===t.productId?t.productId:"siab"}function Qe(e,t,n){var i=e.getFloor({currency:"USD",mediaType:n,size:[t.w,t.h]});if(!isNaN(i.floor)&&"USD"===i.currency)return i.floor}function et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.w,i=t.h,r=e.getBoundingClientRect(),a=r.width,o=r.height,s=r.left,d=r.top,l=r.right,u=r.bottom;return(0===a||0===o)&&n&&i&&(a=n,o=i,l=s+n,u=d+i),{width:a,height:o,left:s,top:d,right:l,bottom:u}}function tt(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},n=1;n<e.length;++n){if(t.left=Math.max(t.left,e[n].left),t.right=Math.min(t.right,e[n].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[n].top),t.bottom=Math.min(t.bottom,e[n].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}function nt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.w,r=n.h,a=et(e,{w:i,h:r}),o=tt([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},a]);return null!==o?o.width*o.height/(a.width*a.height)*100:0}var it={NON_MEASURABLE:"nm",code:qe,supportedMediaTypes:[I.Mk,I.pX],gvlid:58,isBidRequestValid:function(e){return function(e){return e.bidder===qe&&void 0!==e.params&&!!function(e){return null!==((0,a.Z)(e,"params.siteId","")||"").trim().match(Ve)}(e)}(e)&&function(e){var t=(0,a.Z)(e,"mediaTypes.banner");return void 0===t||!!Array.isArray(t.sizes)}(e)&&function(e){var t=(0,a.Z)(e,"mediaTypes.video"),n=(0,a.Z)(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize))return!1;if(!t.context)return!1;var i=Ne(Ne({},t),n);return!(!Array.isArray(i.mimes)||0===i.mimes.length)&&(!(!Array.isArray(i.protocols)||0===i.protocols.length)&&((void 0===i.placement||"number"==typeof i.placement)&&("instream"!==t.context||void 0===i.startdelay||"number"==typeof i.startdelay)))}(e)},buildRequests:function(e,t){var n=function(e,t){var n=Fe({},p.vc.getConfig("ttxSettings")),i=Fe({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent),a=t&&t.uspConsent,o=t&&t.refererInfo?t.refererInfo.referer:void 0;return We.uniqueSiteIds=e.map((function(e){return e.params.siteId})).filter(r.tT),{ttxSettings:n,gdprConsent:i,uspConsent:a,pageUrl:o}}(e,t),i=n.ttxSettings,a=n.gdprConsent,o=n.uspConsent,s=n.pageUrl,d=function(e,t){return function(e,t){var n={};return e.forEach((function(e){var i=t(e);n[i]=n[i]||[],n[i].push(e)})),n}(t.map(Ye),!0===(e&&e.enableSRAMode)?$e:Ge)}(i,e),l=[];for(var u in d)l.push(Ke({bidRequests:d[u],gdprConsent:a,uspConsent:o,pageUrl:s,ttxSettings:i}));return l},interpretResponse:function(e,t){var n=e.body,i=n.seatbid,o=n.cur,s=void 0===o?"USD":o;return(0,r.kJ)(i)?i.filter((function(e){return(0,r.kJ)(e.bid)&&e.bid.length>0})).reduce((function(e,t){return e.concat(t.bid.map((function(e){return function(e,t){var n=e.adomain&&e.adomain.length,i={requestId:e.impid,bidderCode:qe,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:(0,a.Z)(e,"ext.ttx.mediaType",I.Mk),currency:t,netRevenue:!0};return n&&(i.meta={advertiserDomains:e.adomain}),i.mediaType===I.pX&&("xml"===(0,a.Z)(e,"ext.ttx.vastType","xml")?i.vastXml=i.ad:i.vastUrl=i.ad),i}(e,s)})))}),[]):[]},getUserSyncs:function(e,t,n,i){var r=e.iframeEnabled?We.uniqueSiteIds.map((function(e){return function(e){var t=e.siteId,n=void 0===t?"zzz000000000003zzz":t,i=e.gdprConsent,r=void 0===i?{}:i,a=e.uspConsent,o=p.vc.getConfig("ttxSettings"),s=o&&o.syncUrl||"https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",d=r.consentString,l=r.gdprApplies,u={type:"iframe",url:"".concat(s,"&id=").concat(n,"&gdpr_consent=").concat(encodeURIComponent(d),"&us_privacy=").concat(encodeURIComponent(a))};return"boolean"==typeof l&&(u.url+="&gdpr=".concat(Number(l))),u}({gdprConsent:n,uspConsent:i,siteId:e})})):[];return We.uniqueSiteIds=[],r}};function rt(e,t,n){t.split&&(t=t.split("."));for(var i,r=0,a=t.length,o=e;r<a;++r)i=o[t[r]],o=o[t[r]]=r===a-1?n:null!=i?i:!~t[r+1].indexOf(".")&&+t[r+1]>-1?[]:{}}function at(e,t){if(e){if("string"==typeof e)return ot(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function st(e){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},st(e)}(0,Ue.dX)(it),window.pbjs.installedModules.push("33acrossBidAdapter");var dt=p.vc.getConfig,lt={0:"title",2:"icon",3:"image",5:"sponsoredBy",4:"body",1:"cta"},ut={title:{id:0,name:"title"},icon:{id:2,type:1,name:"img"},image:{id:3,type:3,name:"img"},sponsoredBy:{id:5,name:"data",type:1},body:{id:4,name:"data",type:2},cta:{id:1,type:12,name:"data"}},ct={code:"adf",aliases:[{code:"adformOpenRTB",gvlid:50},{code:"adform",gvlid:50}],gvlid:50,supportedMediaTypes:[I.B5,I.Mk,I.pX],isBidRequestValid:function(e){var t=e.params||{},n=t.mid,i=t.inv,r=t.mname;return!!(n||i&&r)},buildRequests:function(e,t){var n,i,o=dt("ortb2")||{},s=o.user;"object"===st(dt("app"))?(n=dt("app")||{},o.app&&(0,r.Ee)(n,o.app)):(i=dt("site")||{},o.site&&(0,r.Ee)(i,o.site),i.page||(i.page=t.refererInfo.referer));var d=dt("device")||{};d.w=d.w||window.innerWidth,d.h=d.h||window.innerHeight,d.ua=d.ua||navigator.userAgent;var l=pt(e,"params.adxDomain")||"adx.adform.net",u=pt(e,"params.pt")||pt(e,"params.priceType")||"net",c=e[0].transactionId,h=pt(e,"params.test"),f=dt("currency.adServerCurrency"),g=f&&[f],m=pt(e,"userIdAsEids"),v=pt(e,"schain"),y=e.map((function(e,t){e.netRevenue=u;var n=e.getFloor?e.getFloor({currency:f||"USD"}):{},i=n.floor,o=n.currency,s=e.params,d={id:t+1,tagid:s.mid,bidfloor:i,bidfloorcur:o,ext:{bidder:{inv:s.inv,mname:s.mname}}},l=(0,r.HA)(e.nativeParams,(function(e,t){var n=ut[t],i={required:1&e.required};if(n){var r,a,o,s;i.id=n.id;var d=e.aspect_ratios;if(d&&d[0]&&(r=(d=d[0]).min_width||0,a=d.ratio_height*r/d.ratio_width|0),e.sizes){var l=ht(e.sizes);o=l[0],s=l[1]}return i[n.name]={len:e.len,type:n.type,wmin:r,hmin:a,w:o,h:s},i}})).filter(Boolean);l.length&&(d.native={request:{assets:l}});var c=(0,a.Z)(e,"mediaTypes.banner");if(c&&c.sizes){var p=(0,r.sF)(c.sizes).map((function(e){var t,n,i=(t=e.split("x"),n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(t,n)||at(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),r=i[0],a=i[1];return{w:parseInt(r,10),h:parseInt(a,10)}}));d.banner={format:p}}var h=(0,a.Z)(e,"mediaTypes.video");return h&&(d.video=h),d})),b={id:t.auctionId,site:i,app:n,user:s,device:d,source:{tid:c,fd:1},ext:{pt:u},cur:g,imp:y};return h&&(b.is_debug=!!h,b.test=1),p.vc.getConfig("coppa")&&rt(b,"regs.coppa",1),void 0!==(0,a.Z)(t,"gdprConsent.gdprApplies")&&(rt(b,"user.ext.consent",t.gdprConsent.consentString),rt(b,"regs.ext.gdpr",1&t.gdprConsent.gdprApplies)),t.uspConsent&&rt(b,"regs.ext.us_privacy",t.uspConsent),m&&rt(b,"user.ext.eids",m),v&&rt(b,"source.ext.schain",v),{method:"POST",url:"https://"+l+"/adx/openrtb",data:JSON.stringify(b),options:{contentType:"application/json"},bids:e}},interpretResponse:function(e,t){var n=t.bids;if(e.body){var i=e.body,r=i.seatbid,o=i.cur,s=ht(r.map((function(e){return e.bid}))).reduce((function(e,t){return e[t.impid-1]=t,e}),[]);return n.map((function(e,t){var n=s[t];if(n){var i=(0,a.Z)(n,"ext.prebid.type"),r={requestId:e.bidId,cpm:n.price,creativeId:n.crid,ttl:360,netRevenue:"net"===e.netRevenue,currency:o,mediaType:i,width:n.w,height:n.h,dealId:n.dealid,meta:{mediaType:i,advertiserDomains:n.adomain}};return n.native?r.native=function(e){var t=e.native,n=t.assets,i=t.link,r=t.imptrackers,a=t.jstracker,o={clickUrl:i.url,clickTrackers:i.clicktrackers||void 0,impressionTrackers:r||void 0,javascriptTrackers:a?[a]:void 0};return n.forEach((function(e){var t=lt[e.id],n=t&&e[ut[t].name];n&&(o[t]=n.text||n.value||{url:n.url,width:n.w,height:n.h})})),o}(n):r[i===I.pX?"vastXml":"ad"]=n.adm,e.renderer||i!==I.pX||"outstream"!==(0,a.Z)(e,"mediaTypes.video.context")||(r.renderer=c.Th.install({id:e.bidId,url:"https://s2.adform.net/banners/scripts/video/outstream/render.js",adUnitCode:e.adUnitCode}),r.renderer.setRender(ft)),r}})).filter(Boolean)}}};function pt(e,t){for(var n,i=0;i<e.length;i++)if(n=(0,a.Z)(e[i],t))return n}function ht(e){var t;return(t=[]).concat.apply(t,function(e){return function(e){if(Array.isArray(e))return ot(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||at(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e))}function ft(e){e.renderer.push((function(){window.Adform.renderOutstream(e)}))}(0,Ue.dX)(ct),window.pbjs.installedModules.push("adfBidAdapter");var gt={trustpid:{source:"trustpid.com",atype:1,getValue:function(e){return e}},intentIqId:{source:"intentiq.com",atype:1},naveggId:{source:"navegg.com",atype:1},justId:{source:"justtag.com",atype:1},pubcid:{source:"pubcid.org",atype:1},tdid:{source:"adserver.org",atype:1,getUidExt:function(){return{rtiPartner:"TDID"}}},id5id:{getValue:function(e){return e.uid},source:"id5-sync.com",atype:1,getUidExt:function(e){if(e.ext)return e.ext}},ftrackId:{source:"flashtalking.com",atype:1,getValue:function(e){return e.uid},getUidExt:function(e){if(e.ext)return e.ext}},parrableId:{source:"parrable.com",atype:1,getValue:function(e){return e.eid?e.eid:e.ccpaOptout?"":null},getUidExt:function(e){var t=(0,r.ei)(e,["ibaOptout","ccpaOptout"]);if(Object.keys(t).length)return t}},idl_env:{source:"liveramp.com",atype:3},lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},britepoolid:{source:"britepool.com",atype:3},dmdId:{source:"hcn.health",atype:3},lotamePanoramaId:{source:"crwdcntrl.net",atype:1},criteoId:{source:"criteo.com",atype:1},merkleId:{source:"merkleinc.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){return e&&e.keyID?{keyID:e.keyID}:void 0}},netId:{source:"netid.de",atype:1},IDP:{source:"zeotap.com",atype:1},hadronId:{source:"audigent.com",atype:1},haloId:{source:"audigent.com",atype:1},quantcastId:{source:"quantcast.com",atype:1},nextrollId:{source:"nextroll.com",atype:1},idx:{source:"idx.lat",atype:1},connectid:{source:"verizonmedia.com",atype:3},fabrickId:{source:"neustar.biz",atype:1},mwOpenLinkId:{source:"mediawallahscript.com",atype:1},tapadId:{source:"tapad.com",atype:1},novatiq:{getValue:function(e){return e.snowflake},source:"novatiq.com",atype:1},uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id}},dapId:{source:"akamai.com",atype:1},deepintentId:{source:"deepintent.com",atype:3},admixerId:{source:"admixer.net",atype:3},adtelligentId:{source:"adtelligent.com",atype:3},amxId:{source:"amxrtb.com",atype:1},publinkId:{source:"epsilon.com",atype:3},kpuid:{source:"kpuid.com",atype:3},imuid:{source:"intimatemerger.com",atype:1},connectId:{source:"yahoo.com",atype:3},qid:{source:"adquery.io",atype:1},dacId:{source:"impact-ad.jp",atype:1},"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}}};function mt(e,t){var n=gt[t];if(n&&e){var i={};i.source=n.source;var a=(0,r.LQ)(n.getValue)?n.getValue(e):e;if((0,r.d8)(a)){var o={id:a,atype:n.atype};if((0,r.LQ)(n.getUidExt)){var s=n.getUidExt(e);s&&(o.ext=s)}if(i.uids=[o],(0,r.LQ)(n.getEidExt)){var d=n.getEidExt(e);d&&(i.ext=d)}return i}}return null}function vt(e){var t=[];for(var n in e)if(e.hasOwnProperty(n))if("pubProvidedId"===n)t=t.concat(e.pubProvidedId);else{var i=mt(e[n],n);i&&t.push(i)}return t}function yt(e){return yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yt(e)}function bt(){return bt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},bt.apply(this,arguments)}var _t,Tt,wt,St="USD",kt={image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1},cta:{required:!1}},It={code:"adyoulike",gvlid:259,supportedMediaTypes:[I.Mk,I.B5,I.pX],aliases:["ayl"],isBidRequestValid:function(e){var t=xt(Pt(e)),n=t.width>0&&t.height>0;return e.params&&e.params.placement&&(n||e.mediaTypes&&e.mediaTypes.native)},buildRequests:function(e,t){var n=!1,i={Version:"1.0",Bids:e.reduce((function(e,t){var i,r=(i=t,(0,a.Z)(i,"mediaTypes.banner")?I.Mk:(0,a.Z)(i,"mediaTypes.video")?I.pX:(0,a.Z)(i,"mediaTypes.native")?I.B5:void 0),o=Pt(t),s=xt(o);if(e[t.bidId]={},e[t.bidId].PlacementID=t.params.placement,e[t.bidId].TransactionID=t.transactionId,e[t.bidId].Width=s.width,e[t.bidId].Height=s.height,e[t.bidId].AvailableSizes=o.join(","),"function"==typeof t.getFloor&&(e[t.bidId].Pricing=function(e,t,n){var i=e.getFloor({currency:St,mediaType:n,size:[t.width,t.height]});if(!isNaN(i.floor)&&i.currency===St)return i.floor}(t,s,r)),r===I.B5){var d=t.mediaTypes.native;"image"===d.type&&(d=bt({},kt,d)),d.clickUrl={required:!0},e[t.bidId].Native=d}if(r===I.pX){n=!0,e[t.bidId].Video=t.mediaTypes.video;var l=t.mediaTypes.video.playerSize;Array.isArray(l)&&!Array.isArray(l[0])&&(e[t.bidId].Video.playerSize=[l])}return e}),{}),PageRefreshed:Ct()};t.gdprConsent&&(i.gdprConsent={consentString:t.gdprConsent.consentString,consentRequired:"boolean"==typeof t.gdprConsent.gdprApplies?t.gdprConsent.gdprApplies:null}),t.uspConsent&&(i.uspConsent=t.uspConsent),(0,a.Z)(t,"userId")&&(i.userId=vt(t.userId));var r=JSON.stringify(i);return{method:"POST",url:Et(e,t,n),data:r,options:{withCredentials:!0}}},interpretResponse:function(e,t){var n=[],i={};try{i=JSON.parse(t.data).Bids}catch(e){}return e.body.forEach((function(e){var t=function(e,t){if(e&&(e.Ad||e.Native||e.Vast)){var n=t&&t[e.BidID];n&&(e.Width&&"0"!==e.Width||(e.Width=n.Width),e.Height&&"0"!==e.Height||(e.Height=n.Height));var i={requestId:e.BidID,ttl:3600,creativeId:e.CreativeID,cpm:e.Price,netRevenue:!0,currency:St,meta:e.Meta||{advertiserDomains:[]}},r=e.Vast;return r?(i.width=e.Width,i.height=e.Height,i.vastXml=window.atob(r),i.mediaType="video"):n.Native?(i.native=function(e,t){if("object"===yt(e.Native))return e.Native;var n={},i={},r={};if("string"==typeof e.Ad){i=JSON.parse(e.Ad.match(/\/\*PREBID\*\/(.*)\/\*PREBID\*\//)[1]),r=i.Content.Preview.Text;var o=i.TrackingPrefix+"/pixel?event_kind=IMPRESSION&attempt="+i.Attempt,s=i.TrackingPrefix+"/pixel?event_kind=INSERTION&attempt="+i.Attempt;i.Campaign&&(o+="&campaign="+i.Campaign,s+="&campaign="+i.Campaign),n.clickUrl=i.TrackingPrefix+"/ar?event_kind=CLICK&attempt="+i.Attempt+"&campaign="+i.Campaign+"&url="+encodeURIComponent(i.Content.Landing.Url),i.OnEvents?(n.clickTrackers=Rt(i.OnEvents.CLICK),n.impressionTrackers=Rt(i.OnEvents.IMPRESSION),n.javascriptTrackers=Rt(i.OnEvents.IMPRESSION,!0)):n.impressionTrackers=[],n.impressionTrackers.push(o,s)}return Object.keys(t).map((function(o,s){switch(o){case"title":n[o]=r.TITLE;break;case"body":n[o]=r.DESCRIPTION;break;case"cta":n[o]=r.CALLTOACTION;break;case"sponsoredBy":n[o]=i.Content.Preview.Sponsor.Name;break;case"image":var d=t.image.sizes||[];d.length||(d[0]=e.Width||300,d[1]=e.Height||250);var l=Dt(i,(0,a.Z)(i,"Content.Preview.Thumbnail.Image"),d[0],d[1]);l&&(n[o]={url:l,width:d[0],height:d[1]});break;case"icon":var u=t.icon.sizes||[];u.length||(u[0]=50,u[1]=50);var c=Dt(i,(0,a.Z)(i,"Content.Preview.Sponsor.Logo.Resource"),u[0],u[1]);c&&(n[o]={url:c,width:u[0],height:u[1]});break;case"privacyIcon":n[o]=Dt(i,(0,a.Z)(i,"Content.Preview.Credit.Logo.Resource"),25,25);break;case"privacyLink":n[o]=(0,a.Z)(i,"Content.Preview.Credit.Url")}})),n}(e,n.Native),i.mediaType="native"):(i.width=e.Width,i.height=e.Height,i.ad=e.Ad),i}}(e,i);t&&n.push(t)})),n}};function Ct(){try{if(performance&&performance.navigation)return performance.navigation.type===performance.navigation.TYPE_RELOAD}catch(e){}return!1}function Et(e,t,n){var i=function(e){var t=(0,u.sE)(e,(function(e){return e.params.DC}));return t?"-"+t.params.DC:""}(e),a=n?"/hb-api/prebid-video/v1":"/hb-api/prebid/v1";return(0,r.Q2)({protocol:"https",host:"".concat("hb-api").concat(i,".omnitagjs.com"),pathname:a,search:At(t)})}function At(e){var t={};if(e){var n=e.refererInfo;n&&(t.RefererUrl=encodeURIComponent(n.referer),n.numIframes>0&&(t.SafeFrame=!0))}var i=function(){var e;if(window.self!==window.top)try{e=window.top.document.head.querySelector('link[rel="canonical"][href]')}catch(e){}else e=document.head.querySelector('link[rel="canonical"][href]');return e?e.href:""}();i&&(t.CanonicalUrl=encodeURIComponent(i));var r=p.vc.getConfig("publisherDomain");return r&&(t.PublisherDomain=encodeURIComponent(r)),t}function Pt(e){var t=e.sizes||[];return e.mediaTypes&&e.mediaTypes.banner&&(t=e.mediaTypes.banner.sizes||[]),e.params&&Array.isArray(e.params.size)&&(t=e.params.size,Array.isArray(t[0])||(t=[t])),(0,r.sF)(t)}function xt(e){var t={},n=e[0];if("string"!=typeof n)return t;var i=n.toUpperCase().split("X"),r=parseInt(i[0],10);r&&(t.width=r);var a=parseInt(i[1],10);return a&&(t.height=a),t}function Ot(e){return e?"https://blobs.omnitagjs.com/blobs/"+e.substr(16,2)+"/"+e.substr(16)+"/"+e:""}function Dt(e,t,n,i){var r="";if(t&&t.Kind)switch(t.Kind){case"INTERNAL":r=Ot(t.Data.Internal.BlobReference.Uid);break;case"EXTERNAL":var a=e.DynamicPrefix,o=t.Data.External.Url;if((o=(o=o.replace(/\[height\]/i,""+i)).replace(/\[width\]/i,""+n)).indexOf(a)>=0){var s=/.*url=([^&]*)/gm.exec(o);(r=s?s[1]:"")||(r=Ot(/.*key=([^&]*)/gm.exec(o)[1]))}else r=o}return r}function Rt(e,t){var n=[];return e?(e.map((function(e,i){(t&&"JAVASCRIPT_URL"===e.Kind||!t&&"PIXEL_URL"===e.Kind)&&n.push(e.Url)})),n):n}function Lt(){return Lt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Lt.apply(this,arguments)}function Mt(e){return Mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(e)}function Ut(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(0,Ue.dX)(It),window.pbjs.installedModules.push("adyoulikeBidAdapter");var jt="aol",Nt="verizon",Bt="onemobile",Ft="onedisplay",qt="display-get",Vt="mobile-get",Ht="mobile-post",zt="iframe",Wt="img",$t="image",Gt=["adserver.org","criteo.com","id5-sync.com","intentiq.com","liveintent.com","quantcast.com","verizonmedia.com","liveramp.com","yahoo.com"],Kt=Qt(_t||(_t=Ut(["","/pubapi/3.0/","/","/","/","/ADTECH;v=2;cmd=bid;cors=yes;alias=",";misc=",";",""])),"host","network","placement","pageid","sizeid","alias","misc","dynamicParams"),Xt=Qt(Tt||(Tt=Ut(["","/bidRequest?"])),"host"),Zt=Qt(wt||(wt=Ut(["dcn=","&pos=","&cmd=bid",""])),"dcn","pos","dynamicParams"),Yt={us:"adserver-us.adtech.advertising.com",eu:"adserver-eu.adtech.advertising.com",as:"adserver-as.adtech.advertising.com"},Jt="https";function Qt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var o=i[i.length-1]||{},s=[e[0]];return n.forEach((function(t,n){var a=(0,r.U)(t)?i[t]:o[t];s.push(a,e[n+1])})),s.join("")}}function en(e){return e===jt||e===Nt||e===Bt}function tn(e){if(en(e.bidder)&&e.params.id&&e.params.imp&&e.params.imp[0]){var t=e.params.imp[0];return t.id&&t.tagid&&t.banner&&t.banner.w&&t.banner.h}}function nn(e){return en(e.bidder)&&e.params.dcn&&e.params.pos}function rn(e){return((t=e.bidder)===jt||t===Nt||t===Ft)&&e.params.placement&&e.params.network;var t}function an(e){return e.userIdAsEids.filter((function(e){return-1!==Gt.indexOf(e.source)}))}var on={code:jt,gvlid:25,aliases:[Bt,Ft,Nt],supportedMediaTypes:[I.Mk],isBidRequestValid:function(e){return rn(e)||function(e){return nn(e)||tn(e)}(e)},buildRequests:function(e,t){var n=this,i={};return t&&(i.gdpr=t.gdprConsent,i.uspConsent=t.uspConsent),e.map((function(e){var t=function(e){return nn(e)?Vt:tn(e)?Ht:rn(e)?qt:void 0}(e);if(t)return n.formatBidRequest(t,e,i)}))},interpretResponse:function(e,t){var n=e.body;if(n){var i=this._parseBidResponse(n,t);if(i)return i}else(0,r.H)("Empty bid response",t.bidderCode,n)},getUserSyncs:function(e,t){var n=!(0,r.xb)(t)&&t[0].body;return n&&n.ext&&n.ext.pixels?this.parsePixelItems(n.ext.pixels):[]},formatBidRequest:function(e,t,n){var i;switch(e){case qt:i={url:this.buildMarketplaceUrl(t,n),method:"GET",ttl:60};break;case Vt:i={url:this.buildOneMobileGetUrl(t,n),method:"GET",ttl:3600};break;case Ht:i={url:this.buildOneMobileBaseUrl(t),method:"POST",ttl:3600,data:this.buildOpenRtbRequestData(t,n),options:{contentType:"application/json",customHeaders:{"x-openrtb-version":"2.2"}}}}return i.bidderCode=t.bidder,i.bidId=t.bidId,i.userSyncOn=t.params.userSyncOn,i},buildMarketplaceUrl:function(e,t){var n,i=e.params,a=i.server,o=i.region||"us";return Yt.hasOwnProperty(o)||((0,r.yN)("Unknown region '".concat(o,"' for AOL bidder.")),o="us"),n=a||Yt[o],i.region=o,this.applyProtocol(Kt({host:n,network:i.network,placement:parseInt(i.placement),pageid:i.pageId||0,sizeid:i.sizeId||0,alias:i.alias||(0,r._d)(),misc:(new Date).getTime(),dynamicParams:this.formatMarketplaceDynamicParams(i,t)}))},buildOneMobileGetUrl:function(e,t){var n=e.params,i=n.dcn,r=n.pos,a=n.ext;"object"===Mt(e.userId)&&(a=a||{},an(e).forEach((function(e){a["eid"+e.source]=e.uids[0].id})));var o=this.buildOneMobileBaseUrl(e);if(i&&r){var s=this.formatOneMobileDynamicParams(a,t);o+=Zt({dcn:i,pos:r,dynamicParams:s})}return o},buildOneMobileBaseUrl:function(e){return this.applyProtocol(Xt({host:e.params.host||"c2shb.ssp.yahoo.com"}))},applyProtocol:function(e){return/^https?:\/\//i.test(e)?e:0===e.indexOf("//")?"".concat(Jt,":").concat(e):"".concat(Jt,"://").concat(e)},formatMarketplaceDynamicParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};Lt(n,this.formatKeyValues(e.keyValues)),Lt(n,this.formatConsentData(t));var i="";return(0,r.yi)(n,(function(e,t){i+="".concat(t,"=").concat(encodeURIComponent(e),";")})),i},formatOneMobileDynamicParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isSecureProtocol()&&(e.secure=1),Lt(e,this.formatConsentData(t));var n="";return(0,r.yi)(e,(function(e,t){n+="&".concat(t,"=").concat(encodeURIComponent(e))})),n},buildOpenRtbRequestData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={id:e.params.id,imp:e.params.imp};if(this.isEUConsentRequired(t)&&(rt(n,"regs.ext.gdpr",1),t.gdpr.consentString&&rt(n,"user.ext.consent",t.gdpr.consentString)),t.uspConsent&&rt(n,"regs.ext.us_privacy",t.uspConsent),"object"===Mt(e.userId)){n.user=n.user||{},n.user.ext=n.user.ext||{};var i=an(e);i.length>0&&(n.user.ext.eids=i)}return n},isEUConsentRequired:function(e){return!!(e&&e.gdpr&&e.gdpr.gdprApplies)},formatKeyValues:function(e){var t={};return(0,r.yi)(e,(function(e,n){t["kv".concat(n)]=e})),t},formatConsentData:function(e){var t={};return this.isEUConsentRequired(e)&&(t.gdpr=1,e.gdpr.consentString&&(t.euconsent=e.gdpr.consentString)),e.uspConsent&&(t.us_privacy=e.uspConsent),t},parsePixelItems:function(e){var t=/\w*(?=\s)/,n=/src=("|')(.*?)\1/,i=[];if(e){var r=e.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);r&&r.forEach((function(e){var r=e.match(t)[0],a=e.match(n)[2];r&&a&&i.push({type:r===Wt?$t:zt,url:a})}))}return i},_parseBidResponse:function(e,t){var n,i;try{n=e.seatbid[0].bid[0]}catch(e){return}if(n.ext&&n.ext.encp)i=n.ext.encp;else if(null===(i=n.price)||isNaN(i))return void(0,r.H)("Invalid price in bid response",jt,n);return{bidderCode:t.bidderCode,requestId:t.bidId,ad:n.adm,cpm:i,width:n.w,height:n.h,creativeId:n.crid||0,pubapiId:e.id,currency:e.cur||"USD",dealId:n.dealid,netRevenue:!0,meta:{advertiserDomains:n&&n.adomain?n.adomain:[]},ttl:t.ttl}},isOneMobileBidder:en,isSecureProtocol:function(){return"https:"===document.location.protocol}};(0,Ue.dX)(on),window.pbjs.installedModules.push("aolBidAdapter");var sn=n(1539);function dn(e){return dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(e)}function ln(){return ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ln.apply(this,arguments)}function un(e){return function(e){if(Array.isArray(e))return cn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return cn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var pn="appnexus",hn=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],fn=["minduration","maxduration","skip","skipafter","playbackmethod","api"],gn=["age","externalUid","segments","gender","dnt","language"],mn=["geo","device_id"],vn=["enabled","dongle","member_id","debug_timeout"],yn={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5}},bn={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},_n=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,Tn=(0,de.df)({gvlid:32,bidderCode:pn}),wn={code:pn,gvlid:32,aliases:[{code:"appnexusAst",gvlid:32},{code:"brealtime"},{code:"emxdigital",gvlid:183},{code:"pagescience"},{code:"defymedia"},{code:"gourmetads"},{code:"matomy"},{code:"featureforward"},{code:"oftmedia"},{code:"districtm",gvlid:144},{code:"adasta"},{code:"beintoo",gvlid:618}],supportedMediaTypes:[I.Mk,I.pX,I.B5],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var n=e.map(En),i=(0,u.sE)(e,Pn),o={};!0===p.vc.getConfig("coppa")&&(o={coppa:!0}),i&&Object.keys(i.params.user).filter((function(e){return(0,u.q9)(gn,e)})).forEach((function(e){var t=(0,r.G2)(e);if("segments"===e&&(0,r.kJ)(i.params.user[e])){var n=[];i.params.user[e].forEach((function(e){(0,r.hj)(e)?n.push({id:e}):(0,r.PO)(e)&&n.push(e)})),o[t]=n}else"segments"!==e&&(o[t]=i.params.user[e])}));var s,d=(0,u.sE)(e,On);d&&d.params&&d.params.app&&(s={},Object.keys(d.params.app).filter((function(e){return(0,u.q9)(mn,e)})).forEach((function(e){return s[e]=d.params.app[e]})));var l,c=(0,u.sE)(e,Dn);c&&c.params&&d.params.app&&d.params.app.id&&(l={appid:c.params.app.id});var h={},f={},g=Tn.getCookie("apn_prebid_debug")||null;if(g)try{h=JSON.parse(g)}catch(e){(0,r.H)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{var m=(0,u.sE)(e,Rn);m&&m.debug&&(h=m.debug)}h&&h.enabled&&Object.keys(h).filter((function(e){return(0,u.q9)(vn,e)})).forEach((function(e){f[e]=h[e]}));var v=(0,u.sE)(e,xn),y=v?parseInt(v.params.member,10):0,b=e[0].schain,_=(0,u.sE)(e,Mn),T={tags:un(n),user:o,sdk:{source:"pbjs",version:"6.24.1"},schain:b};_&&(T.iab_support={omidpn:"Appnexus",omidpv:"6.24.1"}),y>0&&(T.member_id=y),d&&(T.device=s),c&&(T.app=l);var w=p.vc.getConfig("appnexusAuctionKeywords");if((0,r.PO)(w)){var S=(0,r.Bq)(w);S.length>0&&S.forEach(kn),T.keywords=S}if(p.vc.getConfig("adpod.brandCategoryExclusion")&&(T.brand_category_uniqueness=!0),f.enabled&&(T.debug=f,(0,r.PN)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(f,null,4))),t&&t.gdprConsent&&(T.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var k=t.gdprConsent.addtlConsent,I=k.substring(k.indexOf("~")+1);T.gdpr_consent.addtl_consent=I.split(".").map((function(e){return parseInt(e,10)}))}if(t&&t.uspConsent&&(T.us_privacy=t.uspConsent),t&&t.refererInfo){var C={rd_ref:encodeURIComponent(t.refererInfo.referer),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map((function(e){return encodeURIComponent(e)})).join(",")},E=p.vc.getConfig("pageUrl");(0,r.d8)(E)&&""!==E&&(C.rd_can=E),T.referrer_detection=C}if((0,u.sE)(e,Ln)&&e.filter(Ln).forEach((function(e){var t=function(e,t){var n=t.mediaTypes.video,i=n.durationRangeSec,a=n.requireExactDuration,o=function(e){var t=e.adPodDurationSec,n=e.durationRangeSec,i=e.requireExactDuration,a=(0,r.XV)(n),o=Math.floor(t/a);return i?Math.max(o,n.length):o}(t.mediaTypes.video),s=(0,r.d5)(i),d=e.filter((function(e){return e.uuid===t.bidId})),l=r.hl.apply(void 0,un(d).concat([o]));if(a){var u=Math.ceil(o/i.length),c=(0,r.yo)(l,u);i.forEach((function(e,t){c[t].map((function(t){Un(t,"minduration",e),Un(t,"maxduration",e)}))}))}else l.map((function(e){return Un(e,"maxduration",s)}));return l}(n,e),i=T.tags.filter((function(t){return t.uuid!==e.bidId}));T.tags=[].concat(un(i),un(t))})),e[0].userId){var A=[];Bn(A,(0,a.Z)(e[0],"userId.flocId.id"),"chrome.com",null),Bn(A,(0,a.Z)(e[0],"userId.criteoId"),"criteo.com",null),Bn(A,(0,a.Z)(e[0],"userId.netId"),"netid.de",null),Bn(A,(0,a.Z)(e[0],"userId.idl_env"),"liveramp.com",null),Bn(A,(0,a.Z)(e[0],"userId.tdid"),"adserver.org","TDID"),Bn(A,(0,a.Z)(e[0],"userId.uid2.id"),"uidapi.com","UID2"),e[0].userId.pubProvidedId&&e[0].userId.pubProvidedId.forEach((function(e){e.uids.forEach((function(t){A.push({source:e.source,id:t.id})}))})),A.length&&(T.eids=A)}n[0].publisher_id&&(T.publisher_id=n[0].publisher_id);var P=function(e,t){var n=[],i={withCredentials:!0},a="https://ib.adnxs.com/ut/v3/prebid";if(Cn(t)||(a="https://ib.adnxs-simple.com/ut/v3/prebid"),"TRUE"!==(0,r.rD)("apn_test").toUpperCase()&&!0!==p.vc.getConfig("apn_test")||(i.customHeaders={"X-Is-Test":1}),e.tags.length>15){var o=(0,r.I8)(e);(0,r.yo)(e.tags,15).forEach((function(e){o.tags=e;var r=JSON.stringify(o);n.push({method:"POST",url:a,data:r,bidderRequest:t,options:i})}))}else{var s=JSON.stringify(e);n={method:"POST",url:a,data:s,bidderRequest:t,options:i}}return n}(T,t);return P},interpretResponse:function(e,t){var n=this,i=t.bidderRequest;e=e.body;var o=[];if(!e||e.error){var s="in response for ".concat(i.bidderCode," adapter");return e&&e.error&&(s+=": ".concat(e.error)),(0,r.H)(s),o}if(e.tags&&e.tags.forEach((function(e){var t,s=(t=e)&&t.ads&&t.ads.length&&(0,u.sE)(t.ads,(function(e){return e.rtb}));if(s&&(!0===E.S.get(i.bidderCode,"allowZeroCpmBids")?s.cpm>=0:s.cpm>0)&&(0,u.q9)(n.supportedMediaTypes,s.ad_type)){var d=function(e,t,n){var i=(0,r.zE)(e.uuid,[n]),o={requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:i.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};if(t.adomain&&(o.meta=ln({},o.meta,{advertiserDomains:[]})),t.advertiser_id&&(o.meta=ln({},o.meta,{advertiserId:t.advertiser_id})),t.buyer_member_id&&(o.meta=ln({},o.meta,{dchain:function(e){return{ver:"1.0",complete:0,nodes:[{bsid:e.buyer_member_id.toString()}]}}(t)})),t.brand_id&&(o.meta=ln({},o.meta,{brandId:t.brand_id})),t.rtb.video)switch(ln(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),(0,a.Z)(i,"mediaTypes.video.context")){case I.Oh:var s=(0,Ue.Q1)(i.bidder,t.brand_category_id);o.meta=ln({},o.meta,{primaryCatId:s});var d=t.deal_priority;o.video={context:I.Oh,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:d},o.vastUrl=t.rtb.video.asset_url;break;case sn.gZ:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var l=(0,u.sE)(n.bids,(function(t){return t.bidId===e.uuid})),p=(0,a.Z)(l,"mediaTypes.video.renderer.options");p||(p=(0,a.Z)(l,"renderer.options")),o.renderer=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=c.Th.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1,adUnitCode:e});try{i.setRender(jn)}catch(e){(0,r.yN)("Prebid Error calling setRender on renderer",e)}return i.setEventHandlers({impression:function(){return(0,r.ji)("AppNexus outstream video impression event")},loaded:function(){return(0,r.ji)("AppNexus outstream video loaded event")},ended:function(){(0,r.ji)("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),i}(o.adUnitCode,t,p)}break;case sn.LD:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[I.B5]){var h=t.rtb[I.B5],f=t.viewability.config.replace("src=","data-src="),g=h.javascript_trackers;null==g?g=f:(0,r.d8)(g)?g=[g,f]:g.push(f),o[I.B5]={title:h.title,body:h.desc,body2:h.desc2,cta:h.ctatext,rating:h.rating,sponsoredBy:h.sponsored,privacyLink:h.privacy_link,address:h.address,downloads:h.downloads,likes:h.likes,phone:h.phone,price:h.price,salePrice:h.saleprice,clickUrl:h.link.url,displayUrl:h.displayurl,clickTrackers:h.link.click_trackers,impressionTrackers:h.impression_trackers,javascriptTrackers:g},h.main_img&&(o.native.image={url:h.main_img.url,height:h.main_img.height,width:h.main_img.width}),h.icon&&(o.native.icon={url:h.icon.url,height:h.icon.height,width:h.icon.width})}else{ln(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var m=0;m<t.rtb.trackers[0].impression_urls.length;m++){var v=t.rtb.trackers[0].impression_urls[m],y=(0,r.SG)(v);o.ad+=y}}catch(e){(0,r.H)("Error appending tracking pixel",e)}}return o}(e,s,i);d.mediaType=function(e){var t=e.ad_type;return t===I.pX?I.pX:t===I.B5?I.B5:I.Mk}(s),o.push(d)}})),e.debug&&e.debug.debug_info){var d="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;d=d.replace(/(<td>|<th>)/gm,"\t").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/gim,""),(0,r.ji)("https://console.appnexus.com/docs/understanding-the-debug-auction"),(0,r.ji)(d)}return o},getMappingFileInfo:function(){return{url:"https://acdn.adnxs-simple.com/prebid/appnexus-mapping/mappings.json",refreshInDays:2}},getUserSyncs:function(e,t,n){if(e.iframeEnabled&&Cn({gdprConsent:n}))return[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]},transformBidParams:function(e,t){var n=r.Bq;if(!0===t){var i=p.vc.getConfig("s2sConfig"),o=(0,a.Z)(i,"endpoint.p1Consent");o&&o.match("/openrtb2/prebid")&&(n=Fn)}return e=(0,r.uh)({member:"string",invCode:"string",placementId:"number",keywords:n,publisherId:"number"},e),t&&(e.use_pmt_rule="boolean"==typeof e.usePaymentRule&&e.usePaymentRule,e.usePaymentRule&&delete e.usePaymentRule,Sn(e.keywords)&&e.keywords.forEach(kn),Object.keys(e).forEach((function(t){var n=(0,r.G2)(t);n!==t&&(e[n]=e[t],delete e[t])}))),e},onBidWon:function(e){e.native&&function(e){var t=function(e){var t;if((0,r.d8)(e)&&In(e))t=e;else if((0,r.kJ)(e))for(var n=0;n<e.length;n++){var i=e[n];In(i)&&(t=i)}return t}(e.native.javascriptTrackers);if(t)for(var n="pbjs_adid="+e.adId+";pbjs_auc="+e.adUnitCode,i=function(e){var t=e.indexOf('src="')+5,n=e.indexOf('"',t);return e.substring(t,n)}(t),a=i.replace("dom_id=%native_dom_id%",n),o=document.getElementsByTagName("iframe"),s=!1,d=0;d<o.length&&!s;d++){var l=o[d];try{var u=l.contentDocument||l.contentWindow.document;if(u)for(var c=u.getElementsByTagName("script"),p=0;p<c.length&&!s;p++){var h=c[p];h.getAttribute("data-src")==i&&(h.setAttribute("src",a),h.setAttribute("data-src",""),h.removeAttribute&&h.removeAttribute("data-src"),s=!0)}}catch(e){if(!(e instanceof DOMException&&"SecurityError"===e.name))throw e}}}(e)}};function Sn(e){return!!((0,r.kJ)(e)&&e.length>0)}function kn(e){Sn(e.value)&&""===e.value[0]&&delete e.value}function In(e){var t=e.match(_n),n=null!=t&&t.length>=1,i=e.match("trk.js"),r=null!=i&&i.length>=1;return e.startsWith("<script")&&r&&n}function Cn(e){var t=!0;return e&&e.gdprConsent&&e.gdprConsent.gdprApplies&&2===e.gdprConsent.apiVersion&&(t=!(!0!==(0,a.Z)(e.gdprConsent,"vendorData.purpose.consents.1"))),t}function En(e){var t={};t.sizes=An(e.sizes),t.primary_size=t.sizes[0],t.ad_types=[],t.uuid=e.bidId,e.params.placementId?t.id=parseInt(e.params.placementId,10):t.code=e.params.invCode,t.allow_smaller_sizes=e.params.allowSmallerSizes||!1,t.use_pmt_rule=e.params.usePaymentRule||!1,t.prebid=!0,t.disable_psa=!0;var n=function(e){if(!(0,r.LQ)(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return(0,r.PO)(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(n&&(t.reserve=n),e.params.position)t.position={above:1,below:2}[e.params.position]||0;else{var i=(0,a.Z)(e,"mediaTypes.banner.pos")||(0,a.Z)(e,"mediaTypes.video.pos");0!==i&&1!==i&&3!==i||(t.position=3===i?2:i)}if(e.params.trafficSourceCode&&(t.traffic_source_code=e.params.trafficSourceCode),e.params.privateSizes&&(t.private_sizes=An(e.params.privateSizes)),e.params.supplyType&&(t.supply_type=e.params.supplyType),e.params.pubClick&&(t.pubclick=e.params.pubClick),e.params.extInvCode&&(t.ext_inv_code=e.params.extInvCode),e.params.publisherId&&(t.publisher_id=parseInt(e.params.publisherId,10)),e.params.externalImpId&&(t.external_imp_id=e.params.externalImpId),!(0,r.xb)(e.params.keywords)){var o=(0,r.Bq)(e.params.keywords);o.length>0&&o.forEach(kn),t.keywords=o}var s,d,c=(0,a.Z)(e,"ortb2Imp.ext.data.pbadslot");if(c&&(t.gpid=c),(e.mediaType===I.B5||(0,a.Z)(e,"mediaTypes.".concat(I.B5)))&&(t.ad_types.push(I.B5),0===t.sizes.length&&(t.sizes=An([1,1])),e.nativeParams)){var p=(s=e.nativeParams,d={},Object.keys(s).forEach((function(e){var t=bn[e]&&bn[e].serverName||bn[e]||e,n=bn[e]&&bn[e].requiredParams;if(d[t]=ln({},n,s[e]),(t===bn.image.serverName||t===bn.icon.serverName)&&d[t].sizes){var i=d[t].sizes;((0,r.HC)(i)||(0,r.kJ)(i)&&i.length>0&&i.every((function(e){return(0,r.HC)(e)})))&&(d[t].sizes=An(d[t].sizes))}t===bn.privacyLink&&(d.privacy_supported=!0)})),d);t[I.B5]={layouts:[p]}}var h=(0,a.Z)(e,"mediaTypes.".concat(I.pX)),f=(0,a.Z)(e,"mediaTypes.video.context");t.hb_source=h&&"adpod"===f?7:1,(e.mediaType===I.pX||h)&&t.ad_types.push(I.pX),(e.mediaType===I.pX||h&&"outstream"!==f)&&(t.require_asset_url=!0),e.params.video&&(t.video={},Object.keys(e.params.video).filter((function(e){return(0,u.q9)(hn,e)})).forEach((function(n){switch(n){case"context":case"playback_method":var i=e.params.video[n];i=(0,r.kJ)(i)?i[0]:i,t.video[n]=yn[n][i];break;case"frameworks":break;default:t.video[n]=e.params.video[n]}})),e.params.video.frameworks&&(0,r.kJ)(e.params.video.frameworks)&&(t.video_frameworks=e.params.video.frameworks)),h&&(t.video=t.video||{},Object.keys(h).filter((function(e){return(0,u.q9)(fn,e)})).forEach((function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof t.video[e]&&(t.video[e]=h[e]);break;case"skip":"boolean"!=typeof t.video.skippable&&(t.video.skippable=1===h[e]);break;case"skipafter":"number"!=typeof t.video.skipoffset&&(t.video.skippoffset=h[e]);break;case"playbackmethod":if("number"!=typeof t.video.playback_method){var n=h[e];(n=(0,r.kJ)(n)?n[0]:n)>=1&&n<=4&&(t.video.playback_method=n)}break;case"api":if(!t.video_frameworks&&(0,r.kJ)(h[e])){var i=h[e].map((function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t})).filter((function(e){return e}));t.video_frameworks=i}}}))),e.renderer&&(t.video=ln({},t.video,{custom_renderer_present:!0})),e.params.frameworks&&(0,r.kJ)(e.params.frameworks)&&(t.banner_frameworks=e.params.frameworks);var g=(0,u.sE)(l.K.getAdUnits(),(function(t){return e.transactionId===t.transactionId}));return g&&g.mediaTypes&&g.mediaTypes.banner&&t.ad_types.push(I.Mk),0===t.ad_types.length&&delete t.ad_types,t}function An(e){var t=[],n={};if((0,r.kJ)(e)&&2===e.length&&!(0,r.kJ)(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===dn(e))for(var i=0;i<e.length;i++){var a=e[i];(n={}).width=parseInt(a[0],10),n.height=parseInt(a[1],10),t.push(n)}return t}function Pn(e){return!!e.params.user}function xn(e){return!!parseInt(e.params.member,10)}function On(e){if(e.params)return!!e.params.app}function Dn(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function Rn(e){return!!e.debug}function Ln(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===I.Oh}function Mn(e){var t=!1,n=e.params,i=e.params.video;return n.frameworks&&(0,r.kJ)(n.frameworks)&&(t=(0,u.q9)(e.params.frameworks,6)),!t&&i&&i.frameworks&&(0,r.kJ)(i.frameworks)&&(t=(0,u.q9)(e.params.video.frameworks,6)),t}function Un(e,t,n){(0,r.xb)(e.video)&&(e.video={}),e.video[t]=n}function jn(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push((function(){((0,r.W$)(t)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Nn.bind(null,e))}))}function Nn(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}function Bn(e,t,n,i){return t&&(i?e.push({source:n,id:t,rti_partner:i}):e.push({source:n,id:t})),e}function Fn(e){var t="";return Object.keys(e).forEach((function(n){(0,r.d8)(e[n])?""!==e[n]?t+="".concat(n,"=").concat(e[n],","):t+="".concat(n,","):(0,r.kJ)(e[n])&&(""===e[n][0]?t+="".concat(n,","):e[n].forEach((function(e){t+="".concat(n,"=").concat(e,",")})))})),t=t.substring(0,t.length-1)}function qn(e){return qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qn(e)}function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Ue.dX)(wn),window.pbjs.installedModules.push("appnexusBidAdapter");var Wn,$n,Gn,Kn,Xn,Zn={value:!0,definedInConfig:!1},Yn=0,Jn=!1,Qn={iab:function(e){var t=e.onSuccess,n=e.onError,i=e.width,a=e.height;function o(e,i){(0,r.PN)("Received a response from CMP",e),i?!1!==e.gdprApplies&&"tcloaded"!==e.eventStatus&&"useractioncomplete"!==e.eventStatus||ni(e,{onSuccess:t,onError:n}):n("CMP unable to register callback function.  Please check CMP setup.")}var s=function(){var e={};function i(){e.getConsentData&&e.getVendorConsents&&((0,r.PN)("Received all requested responses from CMP",e),ni(e,{onSuccess:t,onError:n}))}return{consentDataCallback:function(t){e.getConsentData=t,i()},vendorConsentsCallback:function(t){e.getVendorConsents=t,i()}}}(),d={},l=function(){for(var e,t,n=window;!e;){try{if("function"==typeof n.__tcfapi||"function"==typeof n.__cmp){"function"==typeof n.__tcfapi?(Yn=2,t=n.__tcfapi):(Yn=1,t=n.__cmp),e=n;break}}catch(e){}try{if(n.frames.__tcfapiLocator){Yn=2,e=n;break}}catch(e){}try{if(n.frames.__cmpLocator){Yn=1,e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{cmpFrame:e,cmpFunction:t}}(),c=l.cmpFrame,p=l.cmpFunction;if(!c)return n("CMP not found.");function h(e,t){window.$sf.ext.register(i,a,(function(n,i){if("cmpReturn"===n){var r="getConsentData"===e?i.vendorConsentData:i.vendorConsents;t(r)}})),window.$sf.ext.cmp(e)}function f(e,t,n){var i=2===Yn?"__tcfapi":"__cmp",r="".concat(i,"Call");function a(e){var t="".concat(i,"Return"),n="string"==typeof e.data&&(0,u.q9)(e.data,t)?JSON.parse(e.data):e.data;if(n[t]&&n[t].callId){var r=n[t];void 0!==d[r.callId]&&d[r.callId](r.returnValue,r.success)}}2===Yn?(window[i]=function(e,n,i,a){var o=Math.random()+"",s=zn({},r,{command:e,version:n,parameter:a,callId:o});d[o]=i,t.postMessage(s,"*")},window.addEventListener("message",a,!1),window[i](e,Yn,n)):(window[i]=function(e,n,i){var a=Math.random()+"",o=zn({},r,{command:e,parameter:n,callId:a});d[a]=i,t.postMessage(o,"*")},window.addEventListener("message",a,!1),window[i](e,void 0,n))}(0,r.LQ)(p)?((0,r.PN)("Detected CMP API is directly accessible, calling it now..."),1===Yn?(p("getConsentData",null,s.consentDataCallback),p("getVendorConsents",null,s.vendorConsentsCallback)):2===Yn&&p("addEventListener",Yn,o)):1===Yn&&window.$sf&&window.$sf.ext&&"function"==typeof window.$sf.ext.cmp?((0,r.PN)("Detected Prebid.js is encased in a SafeFrame and CMP is registered, calling it now..."),h("getConsentData",s.consentDataCallback),h("getVendorConsents",s.vendorConsentsCallback)):((0,r.PN)("Detected CMP is outside the current iframe where Prebid.js is located, calling it now..."),1===Yn?(f("getConsentData",c,s.consentDataCallback),f("getVendorConsents",c,s.vendorConsentsCallback)):2===Yn&&f("addEventListener",c,o))},static:function(e){var t=e.onSuccess,n=e.onError;ni(Kn,{onSuccess:t,onError:n})}};function ei(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=!1,r=null;function a(t,n,a){if(null!=r&&clearTimeout(r),i=!0,le.rp.setConsentData(t),null!=e){for(var o=arguments.length,s=new Array(o>3?o-3:0),d=3;d<o;d++)s[d-3]=arguments[d];e.apply(void 0,[n,a].concat(s))}}if((0,u.q9)(Object.keys(Qn),Wn)){var o={onSuccess:function(e){return a(e,!1)},onError:function(e){var t=null,n=!0;Zn.value&&1===Yn&&(t=ii(void 0),n=!1);for(var i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];a.apply(void 0,[t,n,e].concat(r))}};Qn[Wn](Hn({width:t,height:n},o)),i||(0===$n?ni(void 0,o):r=setTimeout((function(){2===Yn?a(ii(void 0),!1,"No response from CMP, continuing auction..."):o.onError("CMP workflow exceeded timeout threshold.")}),$n))}else a(null,!1,"CMP framework (".concat(Wn,") is not a supported framework.  Aborting consentManagement module and resuming auction."))}function ti(e,t){!function(){if(Xn)return(0,r.PN)("User consent information already known.  Pulling internally stored information..."),function(e){e(!1)};var e=t.adUnits||pbjs.adUnits,n=1,i=1;if(Array.isArray(e)&&e.length>0){var a,o,s=(0,r.pw)(e[0]);n=(null==s||null===(a=s[0])||void 0===a?void 0:a[0])||1,i=(null==s||null===(o=s[0])||void 0===o?void 0:o[1])||1}return function(e){ei(e,n,i)}}()((function(n,i){if(i){var a=r.yN;1!==Yn||n?n&&(a=r.H,i="".concat(i," Canceling auction as per consentManagement config.")):i="".concat(i," 'allowAuctionWithoutConsent' activated.");for(var o=arguments.length,s=new Array(o>2?o-2:0),d=2;d<o;d++)s[d-2]=arguments[d];a.apply(void 0,[i].concat(s))}n?"function"==typeof t.bidsBackHandler?t.bidsBackHandler():(0,r.H)("Error executing bidsBackHandler"):e.call(this,t)}))}function ni(e,t){var n=t.onSuccess,i=t.onError;"static"===Wn&&2==(Yn=e.getConsentData?1:e.getTCData?2:0)&&(e=e.getTCData);var a=1===Yn?function(e){var t=e&&e.getConsentData&&e.getConsentData.gdprApplies;return!("boolean"==typeof t&&(!0!==t||(0,r.d8)(e.getConsentData.consentData)&&(0,r.PO)(e.getVendorConsents)&&Object.keys(e.getVendorConsents).length>1))}:2===Yn?function(){var t=e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:Gn,n=e&&e.tcString;return!("boolean"==typeof t&&(!0!==t||(0,r.d8)(n)))}:null;(0,r.LQ)(a)?a(e)?i("CMP returned unexpected value during lookup process.",e):n(ii(e)):i("Unable to derive CMP version to process data.  Consent object does not conform to TCF v1 or v2 specs.",e)}function ii(e){return 1===Yn?Xn={consentString:e?e.getConsentData.consentData:void 0,vendorData:e?e.getVendorConsents:void 0,gdprApplies:e?e.getConsentData.gdprApplies:Gn}:(Xn={consentString:e?e.tcString:void 0,vendorData:e||void 0,gdprApplies:e&&"boolean"==typeof e.gdprApplies?e.gdprApplies:Gn},e&&e.addtlConsent&&(0,r.d8)(e.addtlConsent)&&(Xn.addtlConsent=e.addtlConsent)),Xn.apiVersion=Yn,Xn}function ri(e){return ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ri(e)}p.vc.getConfig("consentManagement",(function(e){return function(e){(e=e&&(e.gdpr||e.usp?e.gdpr:e))&&"object"===qn(e)?((0,r.d8)(e.cmpApi)?Wn=e.cmpApi:(Wn="iab",(0,r.PN)("consentManagement config did not specify cmp.  Using system default setting (".concat("iab",")."))),(0,r.hj)(e.timeout)?$n=e.timeout:($n=1e4,(0,r.PN)("consentManagement config did not specify timeout.  Using system default setting (".concat(1e4,")."))),"boolean"==typeof e.allowAuctionWithoutConsent&&(Zn.value=e.allowAuctionWithoutConsent,Zn.definedInConfig=!0),Gn=!0===e.defaultGdprScope,(0,r.PN)("consentManagement module has been activated..."),"static"===Wn&&((0,r.PO)(e.consentData)?(Kn=e.consentData,$n=0):(0,r.H)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),Jn||pbjs.requestBids.before(ti,50),Jn=!0,le.rp.enable(),ei(),Zn.definedInConfig&&2===Yn?(0,r.yN)("'allowAuctionWithoutConsent' ignored for TCF 2"):Zn.definedInConfig||1!==Yn||(0,r.PN)("'allowAuctionWithoutConsent' using system default: (".concat(!0,")."))):(0,r.yN)("consentManagement config not defined, exiting consent manager")}(e.consentManagement)})),window.pbjs.installedModules.push("consentManagement");var ai,oi,si,di,li=!1,ui={iab:function(e){var t,n=e.onSuccess,i=e.onError,a=(t={},{consentDataCallback:function(e,r){r&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?hi(t,{onSuccess:n,onError:i}):i("Unable to get USP consent string.")}}),o={},s=function(){for(var e,t,n=window;!e;){try{if("function"==typeof n.__uspapi){t=n.__uspapi,e=n;break}}catch(e){}try{if(n.frames.__uspapiLocator){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}return{uspapiFrame:e,uspapiFunction:t}}(),d=s.uspapiFrame,l=s.uspapiFunction;if(!d)return i("USP CMP not found.");(0,r.LQ)(l)?((0,r.PN)("Detected USP CMP is directly accessible, calling it now..."),l("getUSPData",1,a.consentDataCallback)):((0,r.PN)("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),function(e,t,n){window.__uspapi=function(e,n,i){var r=Math.random()+"",a={__uspapiCall:{command:e,version:n,callId:r}};o[r]=i,t.postMessage(a,"*")},window.addEventListener("message",(function(e){var t=e&&e.data&&e.data.__uspapiReturn;t&&t.callId&&void 0!==o[t.callId]&&(o[t.callId](t.returnValue,t.success),delete o[t.callId])}),!1),window.__uspapi("getUSPData",1,n)}(0,d,a.consentDataCallback))},static:function(e){var t=e.onSuccess,n=e.onError;hi(si,{onSuccess:t,onError:n})}};function ci(e){var t=null,n=!1;function i(i,r){if(null!=t&&clearTimeout(t),n=!0,le.nX.setConsentData(i),null!=e){for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];e.apply(void 0,[r].concat(o))}}if(ui[ai]){var r={onSuccess:i,onError:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(n))}};ui[ai](r),n||(0===oi?hi(void 0,r):t=setTimeout(r.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),oi))}else i(null,"USP framework (".concat(ai,") is not a supported framework. Aborting consentManagement module and resuming auction."))}function pi(e,t){var n=this;ci((function(i){if(null!=i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];r.yN.apply(void 0,[i].concat(o))}e.call(n,t)}))}function hi(e,t){var n=t.onSuccess,i=t.onError;e&&e.usPrivacy?(function(e){e&&e.usPrivacy&&(di=e.usPrivacy)}(e),n(di)):i("USPAPI returned unexpected value during lookup process.",e)}p.vc.getConfig("consentManagement",(function(e){return function(e){(e=e&&e.usp)&&"object"===ri(e)?((0,r.d8)(e.cmpApi)?ai=e.cmpApi:(ai="iab",(0,r.PN)("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat("iab",")."))),(0,r.hj)(e.timeout)?oi=e.timeout:(oi=50,(0,r.PN)("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),(0,r.PN)("USPAPI consentManagement module has been activated..."),"static"===ai&&((0,r.PO)(e.consentData)&&(0,r.PO)(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(si={usPrivacy:e.consentData.getUSPData.uspString}),oi=0):(0,r.H)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),li||pbjs.requestBids.before(pi,50),li=!0,le.nX.enable(),ci()):(0,r.yN)("consentManagement.usp config not defined, exiting usp consent manager")}(e.consentManagement)})),window.pbjs.installedModules.push("consentManagementUsp"),n(1921);var fi=n(9287);function gi(e){return gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gi(e)}var mi,vi="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$",yi=[],bi={},_i=!1,Ti=!0,wi="USD",Si=!1,ki={},Ii={},Ci=function(){var e,t,n;function i(){e=!1,t=null,n=new Promise((function(n){t=n,e&&n()}))}return i(),{done:function(){e=!0,null!=t&&t()},reset:i,promise:function(){return n}}}();function Ei(e){mi?((0,r.yN)(e),(0,r.yN)("Currency failed loading rates, falling back to currency.defaultRates")):(0,r.H)(e)}function Ai(e){bi={},Si=!0,(0,r.PN)("Installing addBidResponse decorator for currency module",arguments),(0,i.R)().convertCurrency=function(e,t,n){return parseFloat(e)*Di(t,n)},(0,C.v5)("addBidResponse").before(xi,100),Ti?(Ti=!1,(0,fi.h)(e,{success:function(e){try{ki=JSON.parse(e),(0,r.PN)("currencyRates set to "+JSON.stringify(ki)),_i=!0,Oi(),Ci.done()}catch(t){Ei("Failed to parse currencyRates response: "+e)}},error:function(){Ei.apply(void 0,arguments),Ci.done()}})):Ci.done()}function Pi(){(0,r.PN)("Uninstalling addBidResponse decorator for currency module",arguments),(0,C.v5)("addBidResponse").getHooks({hook:xi}).remove(),delete(0,i.R)().convertCurrency,wi="USD",bi={},Si=!1,_i=!1,Ti=!0,ki={},Ii={}}function xi(e,t,n){if(!n)return e.call(this,t);var i=n.bidderCode||n.bidder;if(Ii[i]){var a=Ii[i];n.currency&&a!==n.currency?(0,r.yN)("Currency default '".concat(i,": ").concat(a,"' ignored. adapter specified '").concat(n.currency,"'")):n.currency=a}if(n.currency||((0,r.yN)('Currency not specified on bid.  Defaulted to "USD"'),n.currency="USD"),n.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*Di(this.currency,e)).toFixed(3)},n.currency===wi)return e.call(this,t,n);yi.push(function(e,t,n){return function(){var i=n[1];if(void 0!==i&&"currency"in i&&"cpm"in i){var a=i.currency;try{var o=Di(a);1!==o&&(i.cpm=(parseFloat(i.cpm)*o).toFixed(4),i.currency=wi)}catch(e){(0,r.yN)("Returning NO_BID, getCurrencyConversion threw error: ",e),n[1]=(0,se.m)(d.Q_.H,i.getIdentifiers())}}return e.apply(t,n)}}(e,this,[t,n])),!Si||_i?Oi():e.bail(Ci.promise())}function Oi(){for(;yi.length>0;)yi.shift()()}function Di(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wi,i=null,a="".concat(e,"->").concat(n);if(a in bi)i=bi[a],(0,r.ji)("Using conversionCache value "+i+" for "+a);else if(!1===Si){if("USD"!==e)throw new Error("Prebid currency support has not been enabled and fromCurrency is not USD");i=1}else if(e===n)i=1;else if(e in ki.conversions){if(!(n in(t=ki.conversions[e])))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");i=t[n],(0,r.PN)("getCurrencyConversion using direct "+e+" to "+n+" conversionRate "+i)}else if(n in ki.conversions){if(!(e in(t=ki.conversions[n])))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");i=Ri(1/t[e],4),(0,r.PN)("getCurrencyConversion using reciprocal "+e+" to "+n+" conversionRate "+i)}else{var o=Object.keys(ki.conversions)[0];if(!(e in ki.conversions[o]))throw new Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var s=1/ki.conversions[o][e];if(!(n in ki.conversions[o]))throw new Error("Specified adServerCurrency in config '"+n+"' not found in the currency rates file");var d=ki.conversions[o][n];i=Ri(s*d,4),(0,r.PN)("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+n+" conversionRate "+i)}return a in bi||((0,r.ji)("Adding conversionCache value "+i+" for "+a),bi[a]=i),i}function Ri(e,t){for(var n=1,i=0;i<t;i++)n+="0";return Math.round(e*n)/n}function Li(e){return Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Li(e)}function Mi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ui(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mi(Object(n),!0).forEach((function(t){ji(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ji(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ni(e){return function(e){if(Array.isArray(e))return Fi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Bi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bi(e,t){if(e){if("string"==typeof e)return Fi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fi(e,t):void 0}}function Fi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}p.vc.getConfig("currency",(function(e){return function(e){var t=vi;if("object"===gi(e.rates)&&(ki.conversions=e.rates,_i=!0,Ti=!1),"object"===gi(e.defaultRates)&&(mi=e.defaultRates,ki.conversions=mi,_i=!0),"string"==typeof e.adServerCurrency){(0,r.PN)("enabling currency support",arguments),wi=e.adServerCurrency,e.conversionRateFile&&((0,r.PN)("currency using override conversionRateFile:",e.conversionRateFile),t=e.conversionRateFile);var n=t.indexOf("$$TODAY$$");if(-1!==n){var i=new Date,a="".concat(i.getMonth()+1),o="".concat(i.getDate());a.length<2&&(a="0".concat(a)),o.length<2&&(o="0".concat(o));var s="".concat(i.getFullYear()).concat(a).concat(o);t="".concat(t.substring(0,n)).concat(s).concat(t.substring(n+9,t.length))}Ai(t)}else(0,r.PN)("disabling currency support"),Pi();"object"===gi(e.bidderCurrencyDefault)&&(Ii=e.bidderCurrencyDefault)}(e.currency)})),window.pbjs.installedModules.push("currency");var qi="grid",Vi="tmguid",Hi=(0,de.df)({gvlid:686,bidderCode:qi}),zi=!1,Wi={code:qi,aliases:["playwire","adlivetech"],supportedMediaTypes:[I.Mk,I.pX],isBidRequestValid:function(e){return!!e.params.uid},buildRequests:function(e,t){if(!e.length)return null;var n=null,i=null,o=null,s=null,d=null,l=null,u=null,c=t||{},h=c.bidderRequestId,f=c.auctionId,g=c.gdprConsent,m=c.uspConsent,v=c.timeout,y=c.refererInfo,b=y?encodeURIComponent(y.referer):"",_=[],T={};e.forEach((function(e){h||(h=e.bidderRequestId),f||(f=e.auctionId),s||(s=e.schain),d||(d=e.userIdAsEids);var t=e.params,a=t.uid,l=t.keywords,u=e.mediaTypes,c=e.bidId,p=e.adUnitCode,g=e.rtd,m=e.ortb2Imp;T[c]=e;var v=function(e,t){var n=e.video?"video":"banner",i=t.params.bidFloor||0;if("function"==typeof t.getFloor){var r=t.getFloor({currency:"USD",mediaType:n,size:t.sizes.map((function(e){var t,n,i=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(t,n)||Bi(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{w:i[0],h:i[1]}}))});"object"!==Li(r)||"USD"!==r.currency||isNaN(parseFloat(r.floor))||(i=Math.max(i,parseFloat(r.floor)))}return i}(u||{},e),y=g&&g.jwplayer&&g.jwplayer.targeting;y&&(!i&&y.segments&&(i=y.segments),!o&&y.content&&(o=y.content));var b={id:c.toString(),tagid:a.toString(),ext:{divid:p.toString()}};if(m&&(m.instl&&(b.instl=m.instl),m.ext&&m.ext.data&&(b.ext.data=m.ext.data,b.ext.data.adserver&&b.ext.data.adserver.adslot?b.ext.gpid=b.ext.data.adserver.adslot.toString():b.ext.gpid=m.ext.data.pbadslot&&m.ext.data.pbadslot.toString())),(0,r.xb)(l)||(n||(n=l),b.ext.bidder={keywords:l}),v&&(b.bidfloor=v),!u||u[I.Mk]){var w=function(e,t){var n=t.sizes||e.sizes;if(n&&n.length){var i=n.map((function(e){return(0,r.NI)(e)})),a=(0,r.NI)(n[0]);return i.length&&(a.format=i),a}}(e,u?u[I.Mk]:{});w&&(b.banner=w)}if(u&&u[I.pX]){var S=function(e,t){var n=t.playerSize,i=t.mimes,a=t.durationRangeSec,o=t.protocols,s=(n||e.sizes||[])[0];if(s){var d=(0,r.NI)(s);return i&&(d.mimes=i),a&&2===a.length&&(d.minduration=a[0],d.maxduration=a[1]),o&&o.length&&(d.protocols=o),d}}(e,u[I.pX]);S&&(b.video=S)}(b.banner||b.video)&&_.push(b)}));var w={tid:f&&f.toString(),ext:{wrapper:"Prebid_js",wrapper_version:"6.24.1"}};s&&(w.ext.schain=s);var S,k,C=p.vc.getConfig("bidderTimeout")||v,E=v?Math.min(C,v):C,A={id:h&&h.toString(),site:{page:b},tmax:E,source:w,imp:_};o&&(A.site.content=o),i&&i.length&&(l={data:[{name:"iow_labs_pub_data",segment:(S=i,k="jwpseg",S.map((function(e){var t=e&&(e.value||e.id||e);return"string"==typeof t||"number"==typeof t?Ui(Ui({value:t.toString()},{name:k}),e.name&&{name:e.name}):null})).filter((function(e){return!!e})))}]});var P=p.vc.getConfig("ortb2.user.data");P&&P.length&&(l||(l={data:[]}),l=(0,r.Ee)(l,{data:Ni(P)})),g&&g.consentString&&(u={consent:g.consentString});var x=p.vc.getConfig("ortb2.user.ext.device");x&&((u=u||{}).device=Ui({},x)),d&&d.length&&((u=u||{}).eids=Ni(d)),u&&Object.keys(u).length&&((l=l||{}).ext=u);var O=Hi.getDataFromLocalStorage(Vi)||function(){if(p.vc.getConfig("localStorageWriteAllowed")){var e=(0,r.DO)().replace(/-/g,"");return Hi.setDataInLocalStorage(Vi,e),e}return null}();O&&((l=l||{}).id=O.toString()),l&&(A.user=l);var D=(0,a.Z)(p.vc.getConfig("ortb2.user"),"keywords")||null,R=(0,a.Z)(p.vc.getConfig("ortb2.site"),"keywords")||null;D&&((n=n||{}).user=n.user||{},n.user.ortb2=[{name:"keywords",keywords:D.split(",")}]),R&&((n=n||{}).site=n.site||{},n.site.ortb2=[{name:"keywords",keywords:R.split(",")}]),n&&(n=function(e){var t={};return Object.keys(e).forEach((function(n){var i=e[n];if(i)if("site"===n||"user"===n){var r={};Object.keys(i).forEach((function(e){if(Array.isArray(i[e])){var t=[];i[e].forEach((function(e){if("object"===Li(e)&&e.name){var n={name:e.name,segments:[]};Object.keys(e).forEach((function(t){Array.isArray(e[t])&&e[t].forEach((function(e){e&&("string"==typeof e?n.segments.push({name:t,value:e}):"segments"===t&&"string"==typeof e.name&&"string"==typeof e.value&&n.segments.push(e))}))})),n.segments.length&&t.push(n)}})),t.length&&(r[e]=t)}})),t[n]=r}else t[n]=i})),Object.keys(t).length&&t}(n))&&(A.ext={keywords:n}),g&&g.gdprApplies&&(A.regs={ext:{gdpr:g.gdprApplies?1:0}}),m&&(A.regs||(A.regs={ext:{}}),A.regs.ext.us_privacy=m),!0===p.vc.getConfig("coppa")&&(A.regs||(A.regs={}),A.regs.coppa=1);var L=p.vc.getConfig("ortb2.site");if(L){var M=[].concat(Ni(L.cat||[]),Ni(L.pagecat||[])).filter((function(e){return e&&"string"==typeof e}));M.length&&(A.site.cat=M);var U=(0,a.Z)(L,"content.genre");U&&"string"==typeof U&&(A.site.content=Ui(Ui({},A.site.content),{},{genre:U}));var j=(0,a.Z)(L,"content.data");if(j&&j.length){var N=A.site.content||{};A.site.content=(0,r.Ee)(N,{data:j})}}return{method:"POST",url:"https://grid.bidswitch.net/hbjson",data:JSON.stringify(A),newFormat:!0,bidsMap:T}},interpretResponse:function(e,t){e=e&&e.body;var n,i=[];return e?e.seatbid&&!e.seatbid.length&&(n="Response has empty seatbid array"):n="Response is empty",!n&&e.seatbid&&e.seatbid.forEach((function(e){!function(e,t,n){if(e){var i;if(e.auid||(i="Bid from response has no auid parameter - "+JSON.stringify(e)),i||e.adm||e.nurl){var a=t.bidsMap[e.impid];if(a){var o={requestId:a.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.auid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(o.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},o.meta.demandSource=e.ext.bidder.grid.demandSource),"video"===e.content_type?(e.adm?(o.vastXml=e.adm,o.adResponse={content:o.vastXml}):e.nurl&&(o.vastUrl=e.nurl),o.mediaType=I.pX,a.renderer||a.mediaTypes&&a.mediaTypes.video&&"outstream"!==a.mediaTypes.video.context||(o.renderer=function(e,t){var n=c.Th.install({id:t.id,url:t.url,loaded:!1});try{n.setRender($i)}catch(e){(0,r.yN)("Prebid Error calling setRender on renderer",e)}return n}(0,{id:a.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"}))):(o.ad=e.adm,o.mediaType=I.Mk),n.push(o)}}else i="Bid from response has no adm parameter - "+JSON.stringify(e);i&&(0,r.H)(i)}}(function(e){return e?e.bid?e.bid[0]||(0,r.H)("Array of bid objects is empty"):(0,r.H)("Seatbid from response has no array of bid objects - "+JSON.stringify(e)):(0,r.H)("Seatbid array from response has empty item"),e&&e.bid&&e.bid[0]}(e),t,i)})),n&&(0,r.H)(n),i},getUserSyncs:function(e,t,n,i){if(!zi&&e.pixelEnabled){var r="";return n&&("boolean"==typeof n.gdprApplies&&(r+="&gdpr=".concat(Number(n.gdprApplies))),"string"==typeof n.consentString&&(r+="&gdpr_consent=".concat(n.consentString))),i&&(r+="&us_privacy=".concat(i)),zi=!0,{type:"image",url:"https://x.bidswitch.net/sync?ssp=themediagrid"+r}}}};function $i(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})}))}function Gi(e){return Gi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gi(e)}function Ki(){return Ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ki.apply(this,arguments)}function Xi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,Ue.dX)(Wi),window.pbjs.installedModules.push("gridBidAdapter");var Zi=function(e,t){return e.find(t)},Yi=function(e,t){return e.includes(t)},Ji=["id","mimes","minduration","maxduration","startdelay","skippable","playback_method","frameworks"],Qi=["age","external_uid","segments","gender","dnt","language"],er={body:"description",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},icon:{serverName:"icon",requiredParams:{required:!0},minimumParams:{sizes:[{}]}},sponsoredBy:"sponsored_by"},tr={code:"groupm",aliases:["groupm","xaxis"],supportedMediaTypes:[I.Mk,I.pX,I.B5],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.member&&e.params.invCode)},buildRequests:function(e,t){var n,i=e.map(ir),r=Zi(e,ar);r&&(n={},Object.keys(r.params.user).filter((function(e){return Yi(Qi,e)})).forEach((function(e){n[e]=r.params.user[e]})));var a,o=Zi(e,or),s=o?parseInt(o.params.member,10):0,d={tags:(a=i,function(e){if(Array.isArray(e))return Xi(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return Xi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xi(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),user:n,sdk:{source:"pbjs",version:"6.24.1"}};return s>0&&(d.member_id=s),t&&t.gdprConsent&&(d.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies}),{method:"POST",url:"//ib.adnxs.com/ut/v3/prebid",data:JSON.stringify(d),bidderRequest:t}},interpretResponse:function(e,t){var n=this,i=t.bidderRequest;e=e.body;var o=[];if(!e||e.error){var s="in response for ".concat(i.bidderCode," adapter");return e&&e.error&&(s+=": ".concat(e.error)),r.H(s),o}return e.tags&&e.tags.forEach((function(e){var t,s=(t=e)&&t.ads&&t.ads.length&&Zi(t.ads,(function(e){return e.rtb}));if(s&&0!==s.cpm&&Yi(n.supportedMediaTypes,s.ad_type)){var d=function(e,t,n){var i={requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:99999999,currency:"USD",netRevenue:!0,ttl:300,appnexus:{buyerMemberId:t.buyer_member_id}};if(t.rtb.video){if(Ki(i,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastUrl:t.rtb.video.asset_url,vastImpUrl:t.notify_url,ttl:3600}),t.renderer_url){var o=a.Z(n.bids[0],"renderer.options");Ki(i,{adResponse:e,renderer:nr(i.adUnitCode,t,o)}),i.adResponse.ad=i.adResponse.ads[0],i.adResponse.ad.video=i.adResponse.ad.rtb.video}}else if(t.rtb[I.B5]){var s=t.rtb[I.B5];i[I.B5]={title:s.title,body:s.desc,cta:s.ctatext,sponsoredBy:s.sponsored,clickUrl:s.link.url,clickTrackers:s.link.click_trackers,impressionTrackers:s.impression_trackers,javascriptTrackers:s.javascript_trackers},s.main_img&&(i.native.image={url:s.main_img.url,height:s.main_img.height,width:s.main_img.width}),s.icon&&(i.native.icon={url:s.icon.url,height:s.icon.height,width:s.icon.width})}else{Ki(i,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{var d=t.rtb.trackers[0].impression_urls[0],l=r.SG(d);i.ad+=l}catch(e){r.H("Error appending tracking pixel",e)}}return i}(e,s,i);d.mediaType=function(e){var t=e.ad_type;return t===I.pX?I.pX:t===I.B5?I.B5:I.Mk}(s),o.push(d)}})),o},getUserSyncs:function(e){if(e.iframeEnabled)return[{type:"iframe",url:"//acdn.adnxs.com/ib/static/usersync/v3/async_usersync.html"}]}};function nr(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=c.Th.install({id:t.renderer_id,url:t.renderer_url,config:n,loaded:!1});try{i.setRender(sr)}catch(e){r.yN("Prebid Error calling setRender on renderer",e)}return i.setEventHandlers({impression:function(){return r.ji("GroupM outstream video impression event")},loaded:function(){return r.ji("GroupM outstream video loaded event")},ended:function(){r.ji("GroupM outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),i}function ir(e){var t,n,i={};if(i.sizes=rr(e.sizes),i.primary_size=i.sizes[0],i.ad_types=[],i.uuid=e.bidId,e.params.placementId?i.id=parseInt(e.params.placementId,10):i.code=e.params.invCode,i.allow_smaller_sizes=e.params.allowSmallerSizes||!1,i.use_pmt_rule=e.params.usePaymentRule||!1,i.prebid=!0,i.disable_psa=!0,e.params.reserve&&(i.reserve=e.params.reserve),e.params.position&&(i.position={above:1,below:2}[e.params.position]||0),e.params.trafficSourceCode&&(i.traffic_source_code=e.params.trafficSourceCode),e.params.privateSizes&&(i.private_sizes=rr(e.params.privateSizes)),e.params.supplyType&&(i.supply_type=e.params.supplyType),e.params.pubClick&&(i.pubclick=e.params.pubClick),e.params.extInvCode&&(i.ext_inv_code=e.params.extInvCode),e.params.externalImpId&&(i.external_imp_id=e.params.externalImpId),r.xb(e.params.keywords)||(i.keywords=r.Bq(e.params.keywords)),(e.mediaType===I.B5||a.Z(e,"mediaTypes.".concat(I.B5)))&&(i.ad_types.push(I.B5),e.nativeParams)){var o=(t=e.nativeParams,n={},Object.keys(t).forEach((function(e){var i=er[e]&&er[e].serverName||er[e]||e,r=er[e]&&er[e].requiredParams;n[i]=Ki({},r,t[e]);var a=er[e]&&er[e].minimumParams;if(r&&a){var o=Object.keys(t[e]),s=Object.keys(r),d=o.filter((function(e){return!Yi(s,e)}));0===d.length&&(n[i]=Ki({},n[i],a))}})),n);i[I.B5]={layouts:[o]}}var s=a.Z(e,"mediaTypes.".concat(I.pX)),d=a.Z(e,"mediaTypes.video.context");return(e.mediaType===I.pX||s)&&i.ad_types.push(I.pX),(e.mediaType===I.pX||s&&"outstream"!==d)&&(i.require_asset_url=!0),e.params.video&&(i.video={},Object.keys(e.params.video).filter((function(e){return Yi(Ji,e)})).forEach((function(t){i.video[t]=e.params.video[t]}))),(r.xb(e.mediaType)&&r.xb(e.mediaTypes)||e.mediaType===I.Mk||e.mediaTypes&&e.mediaTypes[I.Mk])&&i.ad_types.push(I.Mk),i}function rr(e){var t=[],n={};if(r.kJ(e)&&2===e.length&&!r.kJ(e[0]))n.width=parseInt(e[0],10),n.height=parseInt(e[1],10),t.push(n);else if("object"===Gi(e))for(var i=0;i<e.length;i++){var a=e[i];(n={}).width=parseInt(a[0],10),n.height=parseInt(a[1],10),t.push(n)}return t}function ar(e){return!!e.params.user}function or(e){return!!parseInt(e.params.member,10)}function sr(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},dr.bind(null,e))}))}function dr(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}(0,Ue.dX)(tr);var lr=n(4611),ur="id5id",cr="".concat(ur,"_privacy"),pr="html5",hr="User ID - ID5 submodule: ",fr=["pbjs-id5id","id5id.1st","id5id"],gr=(0,de.df)({gvlid:131,moduleName:"id5Id"}),mr={name:"id5Id",gvlid:131,decode:function(e,t){var n=0;if(e&&"string"==typeof e.universal_uid){var i={id5id:{uid:e.universal_uid,ext:{linkType:n=e.link_type||n}}};switch((0,a.Z)(e,"ab_testing.result")){case"control":(0,r.PN)(hr+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),rt(i,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,r.H)(hr+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,r.PN)(hr+"A/B Testing - user is NOT in the Control Group"),rt(i,"id5id.ext.abTestingControlGroup",!1)}return(0,r.PN)(hr+"Decoded ID",i),i}},getId:function(e,t,n){if(vr(e)){var i,o="https://id5-sync.com/g/v2/".concat(e.params.partner,".json"),s=t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies?1:0,d=le.nX.getConsentData(),l=(0,lr.n)(),u=n&&n.signature?n.signature:(fr.forEach((function(e){gr.getCookie(e)&&(i=(0,r.dj)(gr.getCookie(e))||i)})),i&&i.signature||""),c={partner:e.params.partner,gdpr:s,nbPage:Tr(e.params.partner),o:"pbjs",rf:l.referer,top:l.reachedTop?1:0,u:l.stack[0]||window.location.href,v:"6.24.1"};!s||void 0===t.consentString||(0,r.xb)(t.consentString)||(0,r.jH)(t.consentString)||(c.gdpr_consent=t.consentString),void 0===d||(0,r.xb)(d)||(0,r.jH)(d)||(c.us_privacy=d),void 0===u||(0,r.jH)(u)||(c.s=u),void 0===e.params.pd||(0,r.jH)(e.params.pd)||(c.pd=e.params.pd),void 0===e.params.provider||(0,r.jH)(e.params.provider)||(c.provider=e.params.provider);var p=function(e){return(0,a.Z)(e,"params.abTesting",{enabled:!1})}(e);return!0===p.enabled&&(c.ab_testing={enabled:!0,control_group_pct:p.controlGroupPct}),{callback:function(t){var n={success:function(n){var i,a;if(n)try{i=JSON.parse(n),(0,r.PN)(hr+"response received from the server",i),_r(e.params.partner,0),i.privacy&&wr(cr,JSON.stringify(i.privacy),30),e.storage.type===pr&&(a=e.params.partner,(0,r.PN)(hr+"removing legacy cookies"),fr.forEach((function(e){gr.setCookie("".concat(e)," ",yr(-1)),gr.setCookie("".concat(e,"_nb")," ",yr(-1)),gr.setCookie("".concat(e,"_").concat(a,"_nb")," ",yr(-1)),gr.setCookie("".concat(e,"_last")," ",yr(-1))})))}catch(e){(0,r.H)(hr+e)}t(i)},error:function(e){(0,r.H)(hr+"getId fetch encountered an error",e),t()}};(0,r.PN)(hr+"requesting an ID from the server",c),(0,fi.h)(o,n,JSON.stringify(c),{method:"POST",withCredentials:!0})}}}},extendId:function(e,t,n){return vr(e),Tr(e&&e.params&&e.params.partner||0),(0,r.PN)(hr+"using cached ID",n),n}};function vr(e){return e&&e.params&&e.params.partner&&"number"==typeof e.params.partner?e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==pr&&(0,r.yN)(hr+"storage type recommended to be '".concat(pr,"'. In a future release this may become a strict requirement")),e.storage.name!==ur&&(0,r.yN)(hr+"storage name recommended to be '".concat(ur,"'. In a future release this may become a strict requirement")),!0):((0,r.H)(hr+"storage required to be set"),!1):((0,r.H)(hr+"partner required to be defined as a number"),!1)}function yr(e){return new Date(Date.now()+864e5*e).toUTCString()}function br(e){return"".concat(ur,"_").concat(e,"_nb")}function _r(e,t){wr(br(e),t,30)}function Tr(e){var t=function(e){var t,n,i=(t=br(e),""===(n=gr.getDataFromLocalStorage("".concat(t,"_exp")))||n&&new Date(n).getTime()-Date.now()>0?gr.getDataFromLocalStorage(t):(gr.removeDataFromLocalStorage(t),null));return i?parseInt(i):0}(e)+1;return _r(e,t),t}function wr(e,t,n){gr.setDataInLocalStorage("".concat(e,"_exp"),yr(n)),gr.setDataInLocalStorage("".concat(e),t)}function Sr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sr(Object(n),!0).forEach((function(t){Ir(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ir(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cr(e){return Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cr(e)}(0,C.Bx)("userId",mr),window.pbjs.installedModules.push("id5IdSystem");var Er="improvedigital",Ar={DEFAULT_MIMES:["video/mp4"],SUPPORTED_PROPERTIES:["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext"],PLACEMENT_TYPE:{INSTREAM:1,OUTSTREAM:3}},Pr={VERSION:"1.2",ASSET_TYPES:{TITLE:"title",IMG:"img",DATA:"data"},ASSETS:{title:{id:0,name:"title",assetType:"title",default:{len:140}},sponsoredBy:{id:1,name:"sponsoredBy",assetType:"data",type:1},icon:{id:2,name:"icon",assetType:"img",type:2},body:{id:3,name:"body",assetType:"data",type:2},image:{id:4,name:"image",assetType:"img",type:3},rating:{id:5,name:"rating",assetType:"data",type:3},likes:{id:6,name:"likes",assetType:"data",type:4},downloads:{id:7,name:"downloads",assetType:"data",type:5},price:{id:8,name:"price",assetType:"data",type:6},salePrice:{id:9,name:"salePrice",assetType:"data",type:7},phone:{id:10,name:"phone",assetType:"data",type:8},address:{id:11,name:"address",assetType:"data",type:9},body2:{id:12,name:"body2",assetType:"data",type:10},displayUrl:{id:13,name:"displayUrl",assetType:"data",type:11},cta:{id:14,name:"cta",assetType:"data",type:12}},getAssetById:function(e){return Object.values(this.ASSETS).find((function(t){return e===t.id}))}},xr={code:Er,gvlid:253,aliases:["id"],supportedMediaTypes:[I.Mk,I.B5,I.pX],isBidRequestValid:function(e){return!!(e&&e.params&&(e.params.placementId||e.params.placementKey&&e.params.publisherId))},buildRequests:function(e,t){var n={id:(0,r._d)(),cur:[p.vc.getConfig("currency.adServerCurrency")||"USD"],ext:{improvedigital:{sdk:{name:"pbjs",version:"6.24.1"}}}};n.device="object"===Cr(p.vc.getConfig("device"))?p.vc.getConfig("device"):{},n.device.w=n.device.w||window.innerWidth,n.device.h=n.device.h||window.innerHeight,(0,r.oV)()&&(n.device.dnt=1);var i=p.vc.getConfig("coppa");if("boolean"==typeof i&&rt(n,"regs.coppa",Mr.toBit(i)),t){var o=(0,a.Z)(t,"gdprConsent");if(o){"boolean"==typeof o.gdprApplies&&rt(n,"regs.ext.gdpr",Mr.toBit(o.gdprApplies)),rt(n,"user.ext.consent",o.consentString);var s=(0,a.Z)(o,"addtlConsent");if(s&&-1!==s.indexOf("~")){var d=s.substring(s.indexOf("~")+1);d&&rt(n,"user.ext.consented_providers_settings.consented_providers",d.split(".").map((function(e){return parseInt(e,10)})))}}t.timeout&&(n.tmax=parseInt(t.timeout)),"undefined"!==Cr(t.uspConsent)&&rt(n,"regs.ext.us_privacy",t.uspConsent)}Or.buildSiteOrApp(n,t);var l=e[0];if(rt(n,"source.ext.schain",l.schain),rt(n,"source.tid",l.transactionId),l.userId){var u=vt(l.userId);rt(n,"user.ext.eids",u.length?u:void 0)}return Or.buildServerRequests(n,e,t)},interpretResponse:function(e,t){var n=t.bidderRequest;if(!Array.isArray((0,a.Z)(e,"body.seatbid")))return[];var i=[];return e.body.seatbid.forEach((function(t){Array.isArray(t.bid)&&t.bid.forEach((function(t){if(t.adm&&t.price&&!t.hasOwnProperty("errorCode")){var o=(0,r.zE)(t.impid,[n]),s=(0,a.Z)(t,"ext.".concat(Er)),d={requestId:t.impid,cpm:t.price,creativeId:t.crid,currency:e.body.cur.toUpperCase()||"USD",dealId:"string"==typeof s.buying_type&&"rtb"!==s.buying_type?s.line_item_id:void 0,meta:{advertiserDomains:t.adomain?t.adomain:[]},netRevenue:s.is_net||!1,ttl:300};Dr.buildAd(d,o,t),Lr.addBidData({bidRequest:o,bid:d}),i.push(d)}}))})),i},getUserSyncs:function(e,t){if(e.pixelEnabled){var n=[];return t.forEach((function(e){(0,a.Z)(e,"body.ext.".concat(Er,".sync"),[]).forEach((function(e){-1===n.indexOf(e)&&n.push(e)}))})),n.map((function(e){return{type:"image",url:e}}))}return[]}};(0,Ue.dX)(xr);var Or={buildServerRequests:function(e,t,n){var i=this,a=[];return!0===p.vc.getConfig("improvedigital.singleRequest")?(e.imp=t.map((function(e){return i.buildImp(e)})),a[0]=this.formatRequest(e,n)):t.map((function(t){var o=(0,r.I8)(e);o.id=t.bidId||(0,r._d)(),o.imp=[i.buildImp(t)],rt(o,"source.tid",t.transactionId),a.push(i.formatRequest(o,n))})),a},formatRequest:function(e,t){return{method:"POST",url:"https://ad.360yield.com/pb",data:JSON.stringify(e),bidderRequest:t}},buildImp:function(e){var t={id:(0,r.An)("bidId",e)||(0,r._d)(),secure:Mr.toBit("https:"===window.location.protocol)},n=this.getBidFloor(e)||(0,r.An)("bidFloor",e.params);if(n){var i=(0,r.An)("bidFloorCur",e.params)||"USD";rt(t,"bidfloor",n),rt(t,"bidfloorcur",i?i.toUpperCase():void 0)}var o=(0,r.An)("placementId",e.params);o?rt(t,"ext.bidder.placementId",o):(rt(t,"ext.bidder.publisherId",(0,r.An)("publisherId",e.params)),rt(t,"ext.bidder.placementKey",(0,r.An)("placementKey",e.params))),rt(t,"ext.bidder.keyValues",(0,r.An)("keyValues",e.params)||void 0),rt(t,"ext.gpid",(0,a.Z)(e,"ortb2Imp.ext.gpid")||(0,a.Z)(e,"ortb2Imp.ext.data.pbadslot")||(0,a.Z)(e,"ortb2Imp.ext.data.adserver.adslot")),(0,a.Z)(e,"ortb2Imp.instl")&&(t.instl=1);var s=(0,a.Z)(e,"mediaTypes.video");if(s&&(t.video=this.buildVideoRequest(e),rt(t,"ext.is_rewarded_inventory",1===s.rewarded||1===(0,a.Z)(s,"ext.rewarded")||void 0)),(0,a.Z)(e,"mediaTypes.banner")&&(t.banner=this.buildBannerRequest(e)),(0,a.Z)(e,"mediaTypes.native")){var d=this.buildNativeRequest(e);d&&(t.native=d)}return t},buildVideoRequest:function(e){var t=(0,r.I8)(e.mediaTypes.video),n=(0,r.I8)((0,a.Z)(e,"params.video",{})),i=kr(kr({},t),n);if(Array.isArray(i.playerSize)){var o=Array.isArray(i.playerSize[0])?i.playerSize[0]:i.playerSize;i.w=o[0],i.h=o[1]}return i.placement=this.isOutstreamVideo(e)?Ar.PLACEMENT_TYPE.OUTSTREAM:Ar.PLACEMENT_TYPE.INSTREAM,i.mimes||(i.mimes=Ar.DEFAULT_MIMES),1!==i.skip&&(delete i.skipmin,delete i.skipafter,0!==i.skip&&((0,r.yN)("video.skip: invalid value '".concat(i.skip,"'. Expected 0 or 1")),delete i.skip)),Object.keys(i).forEach((function(e){-1===Ar.SUPPORTED_PROPERTIES.indexOf(e)&&delete i[e]})),i},buildBannerRequest:function(e){var t={};return!0===p.vc.getConfig("improvedigital.usePrebidSizes")&&e.sizes&&(t.format=e.sizes.map((function(e){return{w:e[0],h:e[1]}}))),t},buildNativeRequest:function(e){var t=e.nativeParams;if(!t)return null;for(var n={assets:[]},i=0,o=Object.keys(t);i<o.length;i++){var s=o[i],d=Pr.ASSETS[s];if(d){var l=t[s],u={id:d.id,required:Mr.toBit(l.required)};switch(d.assetType){case Pr.ASSET_TYPES.TITLE:u.title={len:l.len||d.default.len};break;case Pr.ASSET_TYPES.DATA:u.data=(0,r.fz)({type:d.type,len:l.len});break;case Pr.ASSET_TYPES.IMG:u.img=(0,r.fz)({type:d.type,w:(0,a.Z)(l,"sizes.0"),h:(0,a.Z)(l,"sizes.1"),wmin:(0,a.Z)(l,"aspect_ratios.0.min_width"),hmin:(0,a.Z)(l,"aspect_ratios.0.min_height")});break;default:return}n.assets.push(u)}}return n.assets.length?{ver:Pr.VERSION,request:JSON.stringify(n)}:((0,r.yN)("No native assets recognized. Ignoring native ad request"),null)},isOutstreamVideo:function(e){return"outstream"===(0,a.Z)(e,"mediaTypes.video.context")},getBidFloor:function(e){if(!(0,r.LQ)(e.getFloor))return null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return(0,r.PO)(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null},buildSiteOrApp:function(e,t){var n={},i=p.vc.getConfig("app")||{},o=p.vc.getConfig("ortb2.app")||{};if((0,r.Ee)(n,i,o),0!==Object.keys(n).length)e.app=n;else{var s={},d=p.vc.getConfig("pageUrl")||(0,a.Z)(t,"refererInfo.referer");d&&(s.page=d,s.domain=(0,r.en)(d).hostname);var l=p.vc.getConfig("site")||{},u=p.vc.getConfig("ortb2.site")||{};(0,r.Ee)(s,l,u),e.site=s}}},Dr={buildAd:function(e,t,n){t.mediaTypes&&1===Object.keys(t.mediaTypes).length?(0,a.Z)(t,"mediaTypes.video")?this.buildVideoAd(e,t,n):(0,a.Z)(t,"mediaTypes.banner")?this.buildBannerAd(e,t,n):(0,a.Z)(t,"mediaTypes.native")&&this.buildNativeAd(e,t,n):0===n.adm.search(/^<vast/i)?this.buildVideoAd(e,t,n):0===n.adm.indexOf("{")?this.buildNativeAd(e,t,n):this.buildBannerAd(e,t,n)},buildVideoAd:function(e,t,n){e.mediaType=I.pX,e.vastXml=n.adm,Or.isOutstreamVideo(t)&&(e.adResponse={content:e.vastXml},e.renderer=Rr.createRenderer(t))},buildBannerAd:function(e,t,n){e.mediaType=I.Mk,e.ad=n.adm,e.width=n.w,e.height=n.h},buildNativeAd:function(e,t,n){e.mediaType=I.B5;var i=JSON.parse(n.adm),r={clickUrl:(0,a.Z)(i,"link.url"),clickTrackers:(0,a.Z)(i,"link.clicktrackers"),privacyLink:i.privacy};i.eventtrackers?(r.impressionTrackers=[],i.eventtrackers.forEach((function(e){if(1===e.event)switch(e.method){case 1:r.impressionTrackers.push(e.url);break;case 2:r.javascriptTrackers='<script src="'.concat(e.url,'"><\/script>')}}))):(r.impressionTrackers=i.imptrackers||[],r.javascriptTrackers=i.jstracker),i.assets.map((function(e){var t=Pr.getAssetById(e.id);switch(t.assetType){case Pr.ASSET_TYPES.TITLE:r.title=e.title.text;break;case Pr.ASSET_TYPES.DATA:r[t.name]=e.data.value;break;case Pr.ASSET_TYPES.IMG:r[t.name]={url:e.img.url,width:e.img.w,height:e.img.h}}})),e.native=r}},Rr={RENDERER_URL:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js",createRenderer:function(e){var t=c.Th.install({id:e.adUnitCode,url:this.RENDERER_URL,config:(0,a.Z)(e,"renderer.options"),adUnitCode:e.adUnitCode});try{t.setRender(this.render)}catch(e){(0,r.yN)("Prebid Error calling setRender on renderer",e)}return t},render:function(e){e.renderer.push((function(){window.ANOutstreamVideo.renderAd({sizes:[e.width,e.height],targetId:e.adUnitCode,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},Rr.handleRendererEvents.bind(null,e))}))},handleRendererEvents:function(e,t,n){e.renderer.handleVideoEvent({id:t,eventName:n})}},Lr={RENDERER_URL:"https://razr.improvedigital.com/renderer.js",addBidData:function(e){var t=e.bid,n=e.bidRequest;this.isValidBid(t)&&(t.renderer=c.Th.install({url:this.RENDERER_URL,config:{bidRequest:n}}),t.renderer.setRender(this.render))},isValidBid:function(e){return e&&/razr:\/\//.test(e.ad)},render:function(e){var t=e.renderer.getConfig().bidRequest,n={type:"prebid",bidRequest:t,bid:e,config:(0,r.Ee)({},p.vc.getConfig("improvedigital.rendererConfig"),(0,a.Z)(t,"params.rendererConfig"))},i=window.razr=window.razr||{};i.queue=i.queue||[],i.queue.push(n)}},Mr={toBit:function(e){return e?1:0}};function Ur(){return Ur=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Ur.apply(this,arguments)}window.pbjs.installedModules.push("improvedigitalBidAdapter");var jr={code:"inskin",isBidRequestValid:function(e){return!(!e.params.networkId||!e.params.siteId)},buildRequests:function(e,t){var n,i={method:"POST",url:"",data:"",bidRequest:[]};if(e.length<1)return i;var r=Ur({placements:[],time:Date.now(),user:{},url:t.refererInfo.referer,enableBotFiltering:!0,includePricingData:!0,parallel:!0},e[0].params);e[0].schain?r.rtb={schain:e[0].schain}:r.publisherId&&(r.rtb={schain:{ext:{sid:String(r.publisherId)}}}),delete r.publisherId,r.keywords=r.keywords||[];var a=[];if(t&&t.gdprConsent&&(r.consent={gdprVendorId:150,gdprConsentString:t.gdprConsent.consentString,gdprConsentRequired:"boolean"!=typeof t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies},2===t.gdprConsent.apiVersion)){var o=t.gdprConsent.vendorData;o&&(o.purposeOneTreatment&&(r.keywords.push("cst-nodisclosure"),a.push("nodisclosure")),[{id:1,kw:"nocookies"},{id:2,kw:"nocontext"},{id:3,kw:"nodmp"},{id:4,kw:"nodata"},{id:7,kw:"noclicks"},{id:9,kw:"noresearch"}].map((function(e){(function(e,t){var n={150:{id:150,name:"Inskin Media LTD",purposes:{1:1,3:3,4:4,9:9,10:10},legIntPurposes:{2:2,7:7},flexiblePurposes:{2:2,7:7},specialPurposes:{1:1,2:2},features:{3:3},specialFeatures:{},policyUrl:"http://www.inskinmedia.com/privacy-policy.html"}},i=150;try{if(n[i].purposes[e]&&!n[i].flexiblePurposes[e]&&t.purpose.consents[e]&&t.vendor.consents[i])return!0}catch(e){}try{if(n[i].legIntPurposes[e]&&!n[i].flexiblePurposes[e]&&t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[i])return!0}catch(e){}try{if(n[i].legIntPurposes[e]&&n[i].flexiblePurposes[e]&&(t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[i]||t.purpose.consents[e]&&t.vendor.consents[i]))return!0}catch(e){}try{if(n[i].legIntPurposes[e]&&n[i].flexiblePurposes[e]&&t.purpose.consents[e]&&t.vendor.consents[i])return!0}catch(e){}try{if(n[i].purposes[e]&&n[i].flexiblePurposes[e]&&(t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[i]||t.purpose.consents[e]&&t.vendor.consents[i]))return!0}catch(e){}try{if(n[i].purposes[e]&&n[i].flexiblePurposes[e]&&t.purpose.legitimateInterests[e]&&t.vendor.legitimateInterests[i])return!0}catch(e){}return!1})(e.id,o)||(r.keywords.push("cst-"+e.kw),a.push(e.kw))})))}return e.map((function(e){n="https://mfad.inskinad.com/api/v2";var t,i,o=Ur({divName:e.bidId,adTypes:e.adTypes||(t=e.sizes,i=[],t.forEach((function(e){var t=Nr.indexOf(e[0]+"x"+e[1]);t>=0&&i.push(t)})),i),eventIds:[40,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,277,278,279,280,281,282,283,284,285,286,287,288,289,290,291,292,293,294,295]},e.params);o.adTypes.push(5,9,163,2163,3006),o.properties=o.properties||{},o.properties.screenWidth=screen.width,o.properties.screenHeight=screen.height,a.length&&(o.properties.restrictions=a),o.networkId&&o.siteId&&r.placements.push(o)})),i.data=JSON.stringify(r),i.bidRequest=e,i.url=n,i},interpretResponse:function(e,t){var n,i,r,a,o=[],s={};i=t.bidRequest,e=(e||{}).body;for(var d=0;d<i.length;d++)if(n={},r=(a=i[d]).bidId,s[r]=a,e){var l=e.decisions&&e.decisions[r],u=l&&l.contents&&l.contents[0]&&l.contents[0].data,c=u&&u.customData&&u.customData.pubCPM,p=l&&l.pricing&&l.pricing.clearPrice,h=c||p;l&&h&&(l.impressionUrl+="&property:pubcpm="+h,a.price=h,n.requestId=r,n.cpm=h,n.width=l.width,n.height=l.height,n.ad=Br(r,l),n.currency="USD",n.creativeId=l.adId,n.ttl=360,n.meta={advertiserDomains:l.adomain?l.adomain:[]},n.netRevenue=!0,o.push(n))}return o.length&&window.addEventListener("message",(function(t){if(t.data&&"ism-bid"===t.data.from&&e.decisions&&e.decisions[t.data.bidId]){var n="ism_tag_"+Math.floor(1e17*Math.random());window[n]={plr_AdSlot:t.source&&t.source.frameElement,bidId:t.data.bidId,bidPrice:s[t.data.bidId].price,serverResponse:e};var i=document.createElement("script");i.src="https://cdn.inskinad.com/isfe/publishercode/"+s[t.data.bidId].params.siteId+"/default.js?autoload&id="+n,document.getElementsByTagName("head")[0].appendChild(i)}})),o},getUserSyncs:function(e){var t=[];return e.pixelEnabled&&(t.push({type:"image",url:"https://e.serverbid.com/udb/9969/match?redir=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fpool%2Fset%2Fi.gif%3FpoolId%3D9969%26poolKey%3D"}),t.push({type:"image",url:"https://ssum.casalemedia.com/usermatchredir?s=185638&cb=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fsync%2Fi.gif%3FpartnerId%3D1%26userId%3D"})),e.iframeEnabled&&t.push({type:"iframe",url:"https://ssum-sec.casalemedia.com/usermatch?s=184665&cb=https%3A%2F%2Fmfad.inskinad.com%2Fudb%2F9874%2Fsync%2Fi.gif%3FpartnerId%3D1%26userId%3D"}),t}},Nr=[null,"120x90","120x90","468x60","728x90","300x250","160x600","120x600","300x100","180x150","336x280","240x400","234x60","88x31","120x60","120x240","125x125","220x250","250x250","250x90","0x0","200x90","300x50","320x50","320x480","185x185","620x45","300x125","800x250"];function Br(e,t){return"<script>window.top.postMessage({from: 'ism-bid', bidId: '"+e+"'}, '*');<\/script>"+(0,r.SG)(t.impressionUrl)}function Fr(e){return function(e){if(Array.isArray(e))return Gr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$r(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(e){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qr(e)}function Vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vr(Object(n),!0).forEach((function(t){zr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=$r(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function $r(e,t){if(e){if("string"==typeof e)return Gr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gr(e,t):void 0}}function Gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}Nr[77]="970x90",Nr[123]="970x250",Nr[43]="300x600",(0,Ue.dX)(jr),window.pbjs.installedModules.push("inskinBidAdapter");var Kr="ix",Xr="roundel",Zr=[I.Mk,I.pX],Yr=8e3,Jr={JPY:1},Qr={SITE:["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],USER:["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"]},ea={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID","id5-sync.com":"","crwdcntrl.net":"","epsilon.com":"","audigent.com":"","pubcid.org":"","trustpid.com":""},ta=["britepoolid","lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","flocId","pubProvidedId"],na=["mimes","minduration","maxduration"],ia=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h"],ra="ixdiag",aa=!1,oa=(0,de.df)({gvlid:10,bidderCode:Kr});function sa(e){var t={};return t.id=e.bidId,t.ext={},t.ext.siteID=e.params.siteId.toString(),!e.params.hasOwnProperty("id")||"string"!=typeof e.params.id&&"number"!=typeof e.params.id||(t.ext.sid=String(e.params.id)),t}function da(e,t,n){var i=null,a=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(i={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,r.LQ)(e.getFloor)){var o="*",s="*";if(n&&(0,r.r3)(Zr,n)){var d=t[n];o=n,s=[d.w,d.h]}try{a=e.getFloor({mediaType:o,size:s})}catch(e){(0,r.yN)("priceFloors module call getFloor failed, error : ",e)}}a?(t.bidfloor=a.floor,t.bidfloorcur=a.currency,t.ext.fl="p"):i&&(t.bidfloor=i.floor,t.bidfloorcur=i.currency,t.ext.fl="x")}function la(e,t,n){var i={},o=!(!(0,a.Z)(e,"exp")||!(0,r.U)(e.exp)),s=(0,a.Z)(e,"dealid")||(0,a.Z)(e,"ext.dealid");return Jr.hasOwnProperty(t)?i.cpm=e.price/Jr[t]:i.cpm=e.price/100,i.requestId=e.impid,s&&(i.dealId=s),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",2==e.mtype?i.vastXml=e.adm:e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl),e.ext&&e.ext.vasturl||2==e.mtype?(i.width=n.video.w,i.height=n.video.h,i.mediaType=I.pX,i.mediaTypes=n.mediaTypes,i.ttl=o?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=I.Mk,i.ttl=o?e.exp:300),i.meta={},i.meta.networkId=(0,a.Z)(e,"ext.dspid"),i.meta.brandId=(0,a.Z)(e,"ext.advbrandid"),i.meta.brandName=(0,a.Z)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(i.meta.advertiserDomains=e.adomain),i}function ua(e){return Array.isArray(e)&&2===e.length&&(0,r.U)(e[0])&&(0,r.U)(e[1])}function ca(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(ua(e))return e[0]===t[0]&&e[1]===t[1];for(var n=0;n<e.length;n++)if(e[n][0]===t[0]&&e[n][1]===t[1])return!0;return!1}function pa(e,t){var n=[];e||(0,r.yN)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var i,a=Wr(na);try{for(a.s();!(i=a.n()).done;){var o=i.value,s=e&&e.hasOwnProperty(o),d=t&&t.hasOwnProperty(o);s||d||n.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){a.e(e)}finally{a.f()}var l=e&&e.hasOwnProperty("protocol"),u=e&&e.hasOwnProperty("protocols"),c=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return l||u||c||p||n.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),n}function ha(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return ua(e)?e:!!ua(e[0])&&e[0]}function fa(e,t,n){if(e)return Hr(Hr({},(0,u.sE)(n,(function(t){return t.bidId===e}))),(0,u.sE)(t,(function(t){return t.id===e})))}function ga(e,t,n,i){var o="https://htlb.casalemedia.com/cygnus",s=function(e,t){var n=[],i={};if((0,r.kJ)(e)){var o,s=Wr(e);try{for(s.s();!(o=s.n()).done;){var d=o.value;ea.hasOwnProperty(d.source)&&(0,a.Z)(d,"uids.0")&&(i[d.source]=!0,""!=ea[d.source]&&(d.uids[0].ext={rtiPartner:ea[d.source]}),delete d.uids[0].atype,n.push(d))}}catch(e){s.e(e)}finally{s.f()}}if(t&&t.id&&t.version){var l={source:"chrome.com",uids:[{id:t.id,ext:{rtiPartner:"flocId",ver:t.version}}]};n.push(l),i["chrome.com"]=!0}return{toSend:n,seenSources:i}}((0,a.Z)(e,"0.userIdAsEids"),(0,a.Z)(e,"0.userId.flocId")),d=s.toSend,l=function(){var e=p.vc.getConfig("pageUrl");try{return new URL(e).href}catch(t){return void(0,r.yN)("IX Bid Adapter: invalid pageUrl config property value set: ".concat(e))}}()||(0,a.Z)(t,"refererInfo.referer");if(window.headertag&&"function"==typeof window.headertag.getIdentityInfo){var u=window.headertag.getIdentityInfo();if(u&&"object"===qr(u))for(var c in u)if(u.hasOwnProperty(c)){var h=u[c];!h.responsePending&&h.data&&"object"===qr(h.data)&&Object.keys(h.data).length&&!s.seenSources[h.data.source]&&d.push(h.data)}}if(t&&t.bidderCode===Xr&&!s.seenSources["liveramp.com"])return[];var f={};f.id=e[0].bidderRequestId.toString(),f.site={},f.ext={},f.ext.source="prebid",f.ext.ixdiag={},f.ext.ixdiag.msd=0,f.ext.ixdiag.msi=0,f.imp=[],f.at=1;var g=function(e){for(var t=e.map((function(e){return e.transactionId})).filter((function(e,t,n){return n.indexOf(e)===t})),n={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"6.24.1",userIds:ma(e[0])},i=function(i){if(o=e.filter((function(e){return e.transactionId===t[i]}))[0],(0,a.Z)(o,"mediaTypes")){if(Object.keys(o.mediaTypes).length>1&&n.mfu++,(0,a.Z)(o,"mediaTypes.native")&&n.nu++,(0,a.Z)(o,"mediaTypes.banner")&&n.bu++,"outstream"===(0,a.Z)(o,"mediaTypes.video.context")){n.ou++;var r="object"===qr((0,a.Z)(o,"renderer")||(0,a.Z)(o,"mediaTypes.video.renderer"));n.ren=n.ren&&r?(0,a.Z)(n,"ren"):r}"instream"===(0,a.Z)(o,"mediaTypes.video.context")&&n.iu++,n.allu++}},r=0;r<t.length;r++){var o;i(r)}return n}(e);for(var m in g)f.ext.ixdiag[m]=g[m];var v=function(){if(oa.localStorageIsEnabled()){var e,t={};try{e=JSON.parse(oa.getDataFromLocalStorage(ra)||"{}")}catch(e){return(0,r.H)("ix can not read ixdiag from localStorage."),null}return Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(i){"number"==typeof e[n][i]&&(t[i]=t[i]?t[i]+e[n][i]:e[n][i])}))})),t}}();if((0,r.xb)(v)||(f.ext.ixdiag.err=v),e[0].schain&&(f.source={ext:{schain:e[0].schain}}),d.length>0&&(f.user={},f.user.eids=d),document.referrer&&""!==document.referrer&&(f.site.ref=document.referrer),t){if(t.gdprConsent){var y=t.gdprConsent;y.hasOwnProperty("gdprApplies")&&(f.regs={ext:{gdpr:y.gdprApplies?1:0}}),y.hasOwnProperty("consentString")&&(f.user=f.user||{},f.user.ext={consent:y.consentString||""},y.hasOwnProperty("addtlConsent")&&y.addtlConsent&&(f.user.ext.consented_providers_settings={consented_providers:y.addtlConsent}))}t.uspConsent&&rt(f,"regs.ext.us_privacy",t.uspConsent),l&&(f.site.page=l)}p.vc.getConfig("coppa")&&rt(f,"regs.coppa",1);var b={};b.s=e[0].params.siteId,b.v=i,b.ac="j",b.sd=1,8.1===i&&(b.nf=1);var _=t&&t.bidderCode||"ix",T=p.vc.getConfig(_),w=[],S=0,k=Object.keys(n),C="".concat(o).concat((0,r.Re)(Hr(Hr({},b),{},{r:JSON.stringify(f)}))).length;if(C>Yr)return(0,r.H)("IX Bid Adapter: Base request size has exceeded maximum request size.",{bidder:Kr,code:7}),w;var E=C,A=0,P=!1;if(T){if("object"===qr(T.firstPartyData)){var x=T.firstPartyData,O="?";for(var D in x)x.hasOwnProperty(D)&&(O+="".concat(encodeURIComponent(D),"=").concat(encodeURIComponent(x[D]),"&"));O=O.slice(0,-1),(A=encodeURIComponent(O).length)<Yr?("page"in f.site?f.site.page+=O:f.site.page=O,E+=A):(0,r.H)("IX Bid Adapter: IX config FPD request size has exceeded maximum request size.",{bidder:Kr,code:6})}"number"==typeof T.timeout&&(b.t=T.timeout),"boolean"==typeof T.detectMissingSizes?f.ext.ixdiag.dms=T.detectMissingSizes:f.ext.ixdiag.dms=!0}for(var R=function(t){if(E>=Yr||w.length>=4)return"break";for(var i=n[k[t]],a=i.missingCount,s=void 0===a?0:a,d=i.missingImps,l=void 0===d?[]:d,u=i.ixImps,c=!1,h=Yr-E,g={ixImps:void 0===u?[]:u,missingBannerImpressions:l},m=Object.keys(g).map((function(e){return g[e]})).filter((function(e){return Array.isArray(e)})).reduce((function(e,t){return e.concat.apply(e,Fr(t))}),[]),v=encodeURIComponent(JSON.stringify({impressionObjects:m})).length;m.length&&v>h;)c=!0,m.pop(),v=encodeURIComponent(JSON.stringify({impressionObjects:m})).length;var y=n[k[t]].gpid,_=n[k[t]].dfp_ad_unit_code;if(m.length&&I.Mk in m[0]){var T=m[0],A={id:T.id,banner:{topframe:T.banner.topframe,format:m.map((function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}}))}};(_||y)&&(A.ext={},A.ext.dfp_ad_unit_code=_,A.ext.gpid=y),"bidfloor"in m[0]&&(A.bidfloor=m[0].bidfloor),"bidfloorcur"in m[0]&&(A.bidfloorcur=m[0].bidfloorcur),f.imp.push(A),f.ext.ixdiag.msd+=s,f.ext.ixdiag.msi+=l.length}else{var x;m.forEach((function(e){return rt(e,"ext.gpid",y)})),(x=f.imp).push.apply(x,Fr(m))}E+=v;var O=p.vc.getConfig("ortb2")||{};if(!(0,r.xb)(O)&&!P){f.ext.ixdiag.fpd=!0;var D=Hr({},O.site||O.context);Object.keys(D).forEach((function(e){-1===Qr.SITE.indexOf(e)&&delete D[e]}));var R=Hr({},O.user);Object.keys(R).forEach((function(e){-1===Qr.USER.indexOf(e)&&delete R[e]}));var L=(0,r.I8)(f);if(L.site=(0,r.Ee)({},L.site,D),L.user=(0,r.Ee)({},L.user,R),"".concat(o).concat((0,r.Re)(Hr(Hr({},b),{},{r:JSON.stringify(L)}))).length<Yr){f.site=(0,r.Ee)({},f.site,D),f.user=(0,r.Ee)({},f.user,R),P=!0;var M=encodeURIComponent(JSON.stringify(Hr(Hr({},D),R))).length;E+=M}else(0,r.H)("IX Bid Adapter: FPD request size has exceeded maximum request size.",{bidder:Kr,code:8})}var U=t===k.length-1;if(c||U){var j=(0,r.I8)(b);U&&!S||(f.ext.ixdiag.sn=S,j.sn=S),S++,j.r=JSON.stringify(f),w.push({method:"GET",url:o,data:j,validBidRequests:e}),E=C,f.imp=[],f.ext.ixdiag.msd=0,f.ext.ixdiag.msi=0,P=!1}},L=0;L<k.length&&"break"!==R(L);L++);return w}function ma(e){var t=e.userId||{};return ta.filter((function(e){return t[e]}))}function va(e,t){if(t)for(var n=0;n<e.length;n++){var i=e[n];if(t[0]===i[0]&&t[1]===i[1]){e.splice(n,1);break}}}function ya(e,t){var n=function(e){var t=sa(e),n=(0,a.Z)(e,"mediaTypes.video"),i=(0,a.Z)(e,"params.video");if(pa(n,i).length)return{};for(var o in t.video=i?(0,r.I8)(e.params.video):{},n)-1===ia.indexOf(o)||t.video.hasOwnProperty(o)||(t.video[o]=n[o]);if(t.video.minduration>t.video.maxduration)return(0,r.H)("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]"),{bidder:Kr,code:9}),{};var s=i&&i.context||n&&n.context;if(s&&!t.video.hasOwnProperty("placement")&&(s===sn.LD?t.video.placement=1:s===sn.gZ?t.video.placement=4:(0,r.yN)("IX Bid Adapter: Video context '".concat(s,"' is not supported"))),!t.video.w||!t.video.h){var d=ha((0,a.Z)(t,"video.playerSize"))||ha((0,a.Z)(e,"params.size"));if(!d)return(0,r.yN)("IX Bid Adapter: Video size is missing in [mediaTypes.video] missing"),{};t.video.w=d[0],t.video.h=d[1],(0,a.Z)(t,"ext.sid")||(t.ext.sid=(0,r.s)(d))}return da(e,t,I.pX),t}(e);0!=Object.keys(n).length&&(t[e.transactionId]={},t[e.transactionId].ixImps=[],t[e.transactionId].ixImps.push(n),t[e.transactionId].gpid=(0,a.Z)(e,"ortb2Imp.ext.gpid"))}function ba(e,t,n){var i=Hr(Hr({},{detectMissingSizes:!0}),p.vc.getConfig("ix")),o=function(e){var t=sa(e);t.banner={};var n=(0,a.Z)(e,"params.size");return n&&(t.banner.w=n[0],t.banner.h=n[1],(0,a.Z)(t,"ext.sid")||(t.ext.sid=(0,r.s)(n))),t.banner.topframe=(0,r.yL)()?0:1,da(e,t,I.Mk),t}(e),s=ca((0,a.Z)(e,"mediaTypes.banner.sizes"),(0,a.Z)(e,"params.size"));n.hasOwnProperty(e.transactionId)||(n[e.transactionId]={}),n[e.transactionId].gpid=(0,a.Z)(e,"ortb2Imp.ext.gpid"),n[e.transactionId].dfp_ad_unit_code=(0,a.Z)(e,"ortb2Imp.ext.data.adserver.adslot"),s&&(n[e.transactionId].hasOwnProperty("ixImps")||(n[e.transactionId].ixImps=[]),n[e.transactionId].ixImps.push(o)),i.hasOwnProperty("detectMissingSizes")&&i.detectMissingSizes&&function(e,t,n){var i=e.transactionId;if(t.hasOwnProperty(i)){var o=[];t[i].hasOwnProperty("missingSizes")&&(o=t[i].missingSizes),va(o,e.params.size),t[i].missingSizes=o}else if((0,a.Z)(e,"mediaTypes.banner.sizes")){var s=(0,r.I8)(e.mediaTypes.banner.sizes);va(s,e.params.size);var d={missingSizes:s,impression:n};t[i]=d}}(e,t,o)}function _a(e,t,n){var i=(0,r.I8)(t);return i.ext.sid=(0,r.s)(n),i.banner.w=n[0],i.banner.h=n[1],da(e,i,I.Mk),i}function Ta(e){if("ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===Kr){var t={hasEnforcementHook:!1,valid:(0,r.wn)()};(0,de.S6)(10,Kr,t,(function(t){t.valid&&function(e){if(oa.localStorageIsEnabled()){var t;try{t=JSON.parse(oa.getDataFromLocalStorage(ra)||"{}")}catch(e){(0,r.yN)("ix can not read ixdiag from localStorage.")}var n=new Date;if(Object.keys(t).map((function(e){var i=new Date(e);i.setDate(i.getDate()+7)-n<0&&delete t[e]})),"ERROR"===e.type&&e.arguments&&e.arguments[1]&&e.arguments[1].bidder===Kr){var i=n.toISOString().slice(0,10),a=e.arguments[1].code;a&&(t[i]=t[i]||{},Number(t[i][a])||(t[i][a]=0),t[i][a]++)}oa.setDataInLocalStorage(ra,JSON.stringify(t))}}(e)}))}}function wa(e){e.renderer.push((function(){var t={width:e.width,height:e.height,timeout:3e3};e.vastXml?window.IXOutstreamPlayer(e.vastXml,e.adUnitCode,t):window.IXOutstreamPlayer(e.vastUrl,e.adUnitCode,t)}))}function Sa(e){var t=c.Th.install({id:e,url:"https://js-sec.indexww.com/htv/video-player.js",loaded:!1});try{t.setRender(wa)}catch(e){(0,r.yN)("Prebid Error calling setRender on renderer",e)}return t}var ka={code:Kr,gvlid:10,aliases:[{code:Xr,gvlid:10,skipPbsAliasing:!1}],supportedMediaTypes:Zr,isBidRequestValid:function(e){aa||(o.on(d.FP.AUCTION_DEBUG,Ta),o.on(d.FP.AD_RENDER_FAILED,Ta),aa=!0);var t,n,i=(0,a.Z)(e,"params.video"),s=(0,a.Z)(e,"params.size"),l=(0,a.Z)(e,"mediaTypes.banner.sizes"),u=(0,a.Z)(e,"mediaTypes.video"),c=(0,a.Z)(e,"mediaTypes.video.playerSize"),p=e.params.hasOwnProperty("bidFloor"),h=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,r.r3)(Zr,e.mediaType))return(0,r.yN)("IX Bid Adapter: media type is not supported."),!1;if((0,a.Z)(e,"mediaTypes.banner")&&!l)return!1;if(s){var f=ha(s);if(!f)return(0,r.H)("IX Bid Adapter: size has invalid format.",{bidder:Kr,code:1}),!1;if(!ca(e.sizes,f)&&!ca(c,f)&&!ca(l,f))return(0,r.H)("IX Bid Adapter: bid size is not included in ad unit sizes or player size.",{bidder:Kr,code:2}),!1}if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,r.H)("IX Bid Adapter: siteId must be string or number type.",{bidder:Kr,code:4}),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,r.H)("IX Bid Adapter: siteId must valid value",{bidder:Kr,code:4}),!1;if((p||h)&&!(p&&h&&(t=e.params.bidFloor,n=e.params.bidFloorCur,Boolean("number"==typeof t&&"string"==typeof n&&n.match(/^[A-Z]{3}$/)))))return(0,r.H)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format.",{bidder:Kr,code:5}),!1;if(u&&i){var g=pa(u,i);if(g.length)return g.forEach((function(e){(0,r.H)(e,{bidder:Kr,code:3})})),!1}return!0},buildRequests:function(e,t){var n=[],i={},r={},o={},s={};for(var d in e.forEach((function(e){var t=Object.keys((0,a.Z)(e,"mediaTypes",{}));switch(function(e){return(0,a.Z)(e,"params.video")&&(0,a.Z)(e,"mediaTypes.video")?I.pX:I.Mk}(e)){case I.Mk:ba(e,s,i);break;case I.pX:ya(e,r)}(0,u.q9)(t,I.Mk)&&(0,u.q9)(t,I.pX)&&(o[e.transactionId]=e)})),Object.keys(o).forEach((function(e){var t=o[e];i[e]||ba(t,s,i),r[e]||ya(t,r)})),s)if(s.hasOwnProperty(d)){var l=s[d].missingSizes;i.hasOwnProperty(d)||(i[d]={}),i[d].hasOwnProperty("missingImps")||(i[d].missingImps=[],i[d].missingCount=0);for(var c=s[d].impression,p=0;p<l.length;p++){var h=_a(e[0],c,l[p]);i[d].missingImps.push(h),i[d].missingCount++}}return Object.keys(i).length>0&&n.push.apply(n,Fr(ga(e,t,i,7.2))),Object.keys(r).length>0&&n.push.apply(n,Fr(ga(e,t,r,8.1))),n},interpretResponse:function(e,t){var n=[],i=null;if(!e.hasOwnProperty("body")||!e.body.hasOwnProperty("seatbid"))return n;for(var o=e.body,s=o.seatbid,d=0;d<s.length;d++)if(s[d].hasOwnProperty("bid")){for(var l=s[d].bid,u=JSON.parse(t.data.r),c=0;c<l.length;c++){var p=fa(l[c].impid,u.imp,t.validBidRequests);i=la(l[c],o.cur,p),(0,a.Z)(i,"mediaTypes.video.renderer")||"outstream"!==(0,a.Z)(i,"mediaTypes.video.context")||(i.renderer=Sa(l[c].bidId)),n.push(i)}if((0,a.Z)(u,"ext.ixdiag.err")&&oa.localStorageIsEnabled())try{oa.removeDataFromLocalStorage(ra)}catch(e){(0,r.H)("ix can not clear ixdiag from localStorage.")}}return n},transformBidParams:function(e,t){return(0,r.uh)({siteID:"number"},e)},getUserSyncs:function(e,t){return e.iframeEnabled?[{type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"}]:[]}};function Ia(e){return function(e){if(Array.isArray(e))return Ea(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ca(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ca(e,t){if(e){if("string"==typeof e)return Ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(e,t):void 0}}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,Ue.dX)(ka),window.pbjs.installedModules.push("ixBidAdapter");var Aa={code:"justpremium",gvlid:62,time:6e4,isBidRequestValid:function(e){return!!(e&&e.params&&e.params.zone)},buildRequests:function(e,t){var n,i,r=(n={},i={},e.forEach((function(e){var t=e.params,r=t.zone;if(1!==n[r]){var a=t.allow||t.formats||[],o=t.exclude||[];if(0===a.length&&0===o.length)return n[t.zone]=1;n[r]=n[r]||[[],{}],n[r][0]=function(e){for(var t=e.concat(),n=0;n<t.length;++n)for(var i=n+1;i<t.length;++i)t[n]===t[i]&&t.splice(i--,1);return t}(n[r][0].concat(a)),o.forEach((function(e){n[r][1][e]?n[r][1][e]++:n[r][1][e]=1})),i[r]=i[r]||0,o.length&&i[r]++}})),Object.keys(i).forEach((function(e){if(1!==n[e]){var t=[];Object.keys(n[e][1]).forEach((function(r){n[e][1][r]===i[e]&&t.push(r)})),n[e][1]=t}})),Object.keys(n).forEach((function(e){1!==n[e]&&n[e][1].length&&(n[e][0].forEach((function(t){var i=n[e][1].indexOf(t);i>-1&&n[e][1].splice(i,1)})),n[e][0].length=0),1===n[e]||n[e][0].length||n[e][1].length||(n[e]=1)})),n),o=function(){var e;try{e=window.top}catch(t){e=window}return{screenWidth:e.screen.width,screenHeight:e.screen.height,innerWidth:e.innerWidth,innerHeight:e.innerHeight}}(),s=function(){if(!window.top)return null;var e,t=new URLSearchParams(window.top.location.search);return function(e){return 0===Object.keys(e).length?null:e}((e={ggAdbuyid:t.get("gg_adbuyid"),ggDealid:t.get("gg_dealid"),ggEadbuyid:t.get("gg_eadbuyid")},Object.fromEntries(Object.entries(e).filter((function(e){var t,n,i=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(t,n)||Ca(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return i[0],null!=i[1]})))))}(),d={zone:e.map((function(e){return parseInt(e.params.zone)})).filter((function(e,t,n){return n.indexOf(e)===t})),referer:t.refererInfo.referer,sw:o.screenWidth,sh:o.screenHeight,ww:o.innerWidth,wh:o.innerHeight,c:r,id:e[0].params.zone,sizes:{},ggExt:s};e.forEach((function(e){var t=e.params.zone,n=d.sizes;n[t]=n[t]||[],n[t].push.apply(n[t],e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes)})),(0,a.Z)(e[0],"userId.pubcid")?d.pubcid=(0,a.Z)(e[0],"userId.pubcid"):(0,a.Z)(e[0],"crumbs.pubcid")&&(d.pubcid=(0,a.Z)(e[0],"crumbs.pubcid")),d.uids=e[0].userId,t&&t.gdprConsent&&(d.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:"boolean"!=typeof t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies}),t&&t.uspConsent&&(d.us_privacy=t.uspConsent),d.version={prebid:"6.24.1",jp_adapter:"1.8.3"},e[0].schain&&(d.schain=e[0].schain);var l=JSON.stringify(d);return{method:"POST",url:"https://pre.ads.justpremium.com/v/2.0/t/xhr?i="+ +new Date,data:l,bids:e}},interpretResponse:function(e,t){var n=e.body,i=[];return t.bids.forEach((function(e){var t=function(e,t){var n=e.zone;if(t[n])for(var i=t[n].length;i--;)if(Pa(e,t[n][i]))return t[n].splice(i,1).pop();return!1}(e.params,n.bid);if(t){var r=e.mediaTypes&&e.mediaTypes.banner&&e.mediaTypes.banner.sizes&&e.mediaTypes.banner.sizes.length&&e.mediaTypes.banner.sizes[0]||[],a={requestId:e.bidId,creativeId:t.id,width:r[0]||t.width,height:r[1]||t.height,ad:t.adm,cpm:t.price,netRevenue:!0,currency:t.currency||"USD",ttl:t.ttl||Aa.time,format:t.format,meta:{advertiserDomains:t.adomain&&t.adomain.length>0?t.adomain:[]}};t.ext&&t.ext.pg&&(a.adserverTargeting={hb_deal_justpremium:"jp_pg"}),i.push(a)}})),i},getUserSyncs:function(e,t,n,i){var r="https://pre.ads.justpremium.com/v/1.0/t/sync?_c=a"+Math.random().toString(36).substring(7)+Date.now(),a=[];if(n&&"boolean"==typeof n.gdprApplies&&n.gdprApplies&&n.consentString&&(r=r+"&consentString="+encodeURIComponent(n.consentString)),i&&(r=r+"&usPrivacy="+encodeURIComponent(i)),e.iframeEnabled&&a.push({type:"iframe",url:r}),e.pixelEnabled&&0!==t.length){var o=t.map((function(e){var t;return null==e||null===(t=e.body)||void 0===t?void 0:t.pxs})).reduce((function(e,t){return e.concat(t)}),[]).filter((function(e){return void 0!==e}));a=[].concat(Ia(a),Ia(o))}return a}};function Pa(e,t){var n=t.format;return e.allow&&e.allow.length?e.allow.indexOf(n)>-1:!e.exclude||!e.exclude.length||e.exclude.indexOf(n)<0}function xa(){return xa=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},xa.apply(this,arguments)}(0,Ue.dX)(Aa),window.pbjs.installedModules.push("justpremiumBidAdapter");var Oa,Da,Ra,La="kargo",Ma=[I.Mk,I.pX],Ua=(0,de.df)({gvlid:972,bidderCode:La}),ja={gvlid:972,code:La,isBidRequestValid:function(e){return!(!e||!e.params||!e.params.placementId)},buildRequests:function(e,t){var n,i=p.vc.getConfig("currency"),a=i&&i.adServerCurrency||"USD",o={},s={};(0,r.yi)(e,(function(e){o[e.bidId]=e.params.placementId,s[e.bidId]=e.sizes})),e.length>0&&e[0].userId&&e[0].userId.tdid&&(n=e[0].userId.tdid);var d=xa({},{sessionId:ja._getSessionId(),requestCount:ja._getRequestCount(),timeout:t.timeout,currency:a,cpmGranularity:1,timestamp:(new Date).getTime(),cpmRange:{floor:0,ceil:20},bidIDs:o,bidSizes:s,prebidRawBidRequests:e},ja._getAllMetadata(n,t.uspConsent,t.gdprConsent)),l=encodeURIComponent(JSON.stringify(d));return xa({},t,{method:"GET",url:"".concat("https://krk.kargo.com","/api/v2/bid"),data:"json=".concat(l),currency:a})},interpretResponse:function(e,t){var n=e.body,i=[];for(var r in n){var a=n[r],o=void 0;a.metadata&&a.metadata.landingPageDomain&&(o={clickUrl:a.metadata.landingPageDomain[0],advertiserDomains:a.metadata.landingPageDomain}),i.push({requestId:r,cpm:Number(a.cpm),width:a.width,height:a.height,ad:a.adm,ttl:300,creativeId:a.id,dealId:a.targetingCustom,netRevenue:!0,currency:a.currency||t.currency,meta:o})}return i},getUserSyncs:function(e,t,n,i){var r=[],a=ja._generateRandomUuid(),o=ja._getClientId(),s=n&&n.gdprApplies?1:0,d=n&&n.consentString?n.consentString:"";if("string"==typeof i&&4==i.length&&1==i[0]&&"Y"==i[2])return r;if(e.iframeEnabled&&a&&o)for(var l=0;l<5;l++)r.push({type:"iframe",url:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&idx={INDEX}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}".replace("{UUID}",o).replace("{SEED}",a).replace("{INDEX}",l).replace("{GDPR}",s).replace("{GDPR_CONSENT}",d).replace("{US_PRIVACY}",i||"")});return r},supportedMediaTypes:Ma,_readCookie:function(e){if(!Ua.cookiesAreEnabled())return null;for(var t="".concat(e,"="),n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return null},_getCrbFromCookie:function(){try{var e=JSON.parse(decodeURIComponent(ja._readCookie("krg_crb")));if(e&&e.v){var t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}},_getCrbFromLocalStorage:function(){try{return JSON.parse(atob(ja._getLocalStorageSafely("krg_crb")))}catch(e){return{}}},_getCrb:function(){var e=ja._getCrbFromLocalStorage();return Object.keys(e).length?e:ja._getCrbFromCookie()},_getLocalStorageSafely:function(e){try{return Ua.getDataFromLocalStorage(e)}catch(e){return null}},_getUserIds:function(e,t,n){var i=ja._getCrb(),r={kargoID:i.lexId,clientID:i.clientId,crbIDs:i.syncIds||{},optOut:i.optOut,usp:t};try{n&&(r.gdpr={consent:n.consentString||"",applies:!!n.gdprApplies})}catch(e){}return e&&(r.tdID=e),r},_getClientId:function(){return ja._getCrb().clientId},_getAllMetadata:function(e,t,n){return{userIDs:ja._getUserIds(e,t,n),pageURL:window.location.href,rawCRB:ja._readCookie("krg_crb"),rawCRBLocalStorage:ja._getLocalStorageSafely("krg_crb")}},_getSessionId:function(){return Oa||(Oa=ja._generateRandomUuid()),Oa},_getRequestCount:function(){return Da===window.location.pathname?++Ra:(Da=window.location.pathname,Ra=0)},_generateRandomUuid:function(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),(function(e){return("00"+e.toString(16)).slice(-2)})).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}};function Na(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ba(e){return Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(e)}(0,Ue.dX)(ja),window.pbjs.installedModules.push("kargoBidAdapter");var Fa,qa=d.FP,Va=qa.AUCTION_INIT,Ha=qa.AUCTION_END,za=qa.REQUEST_BIDS,Wa=qa.BID_REQUESTED,$a=qa.BID_TIMEOUT,Ga=qa.BID_RESPONSE,Ka=qa.NO_BID,Xa=qa.BID_WON,Za=qa.BID_ADJUSTMENT,Ya=qa.BIDDER_DONE,Ja=qa.SET_TARGETING,Qa=qa.AD_RENDER_FAILED,eo=qa.AD_RENDER_SUCCEEDED,to=qa.AUCTION_DEBUG,no=qa.ADD_AD_UNITS,io=qa.BILLABLE_EVENT,ro="endpoint",ao="bundle";function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},oo.apply(this,arguments)}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lo=(so(Fa={},d.FP.AUCTION_INIT,co),so(Fa,d.FP.AUCTION_END,co),so(Fa,d.FP.BID_REQUESTED,(function(e){return{bidderCode:e.bidderCode,time:e.start,bids:e.bids.map((function(e){return{transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId,startTime:e.startTime,sizes:(0,r.sF)(e.sizes).toString(),params:e.params}}))}})),so(Fa,d.FP.BID_TIMEOUT,(function(e){return e.map((function(e){return e.bidder})).filter(r.tT)})),so(Fa,d.FP.BID_RESPONSE,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.bidId,requestId:e.requestId,creativeId:e.creativeId}})),so(Fa,d.FP.BID_WON,(function(e){return{adId:e.adId,bidderCode:e.bidder,adUnitCode:e.adUnitCode,statusMessage:e.statusMessage,mediaType:e.mediaType,renderedSize:e.size,cpm:e.cpm,currency:e.currency,netRevenue:e.netRevenue,timeToRespond:e.timeToRespond,bidId:e.requestId,dealId:e.dealId,status:e.status,creativeId:e.creativeId}})),so(Fa,d.FP.NO_BID,(function(e){return{bidderCode:e.bidder,transactionId:e.transactionId,adUnitCode:e.adUnitCode,bidId:e.bidId}})),Fa);var uo=oo(function(e){var t,n=e.url,i=e.analyticsType,a=e.global,s=e.handler,d=[],l=0,u=!0;return function(){if(u){for(var e=0;e<d.length;e++)d[e]();d.push=function(e){e()},u=!1}(0,r.ji)("event count sent to ".concat(a,": ").concat(l))}(),{track:function(e){var t=e.eventType,n=e.args;this.getAdapterType()===ao&&window[a](s,t,n),this.getAdapterType()===ro&&c.apply(void 0,arguments)},enqueue:p,enableAnalytics:h,disableAnalytics:function(){(0,r.yi)(t,(function(e,t){o.S1(t,e)})),this.enableAnalytics=this._oldEnable?this._oldEnable:h},getAdapterType:function(){return i},getGlobal:function(){return a},getHandler:function(){return s},getUrl:function(){return n}};function c(e){var t=e.eventType,i=e.args,r=e.callback;(0,fi.h)(n,r,JSON.stringify({eventType:t,args:i}))}function p(e){var t=e.eventType,n=e.args,i=this;a&&window[a]&&t&&n?this.track({eventType:t,args:n}):d.push((function(){l++,i.track({eventType:t,args:n})}))}function h(e){var n,i=this,s=this;"object"!==Ba(e)||"object"!==Ba(e.options)||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling)?(o.vw().forEach((function(e){if(e){var t=e.eventType,n=e.args;t!==$a&&p.call(s,{eventType:t,args:n})}})),Na(n={},za,(function(e){return i.enqueue({eventType:za,args:e})})),Na(n,Wa,(function(e){return i.enqueue({eventType:Wa,args:e})})),Na(n,Ga,(function(e){return i.enqueue({eventType:Ga,args:e})})),Na(n,Ka,(function(e){return i.enqueue({eventType:Ka,args:e})})),Na(n,$a,(function(e){return i.enqueue({eventType:$a,args:e})})),Na(n,Xa,(function(e){return i.enqueue({eventType:Xa,args:e})})),Na(n,Za,(function(e){return i.enqueue({eventType:Za,args:e})})),Na(n,Ya,(function(e){return i.enqueue({eventType:Ya,args:e})})),Na(n,Ja,(function(e){return i.enqueue({eventType:Ja,args:e})})),Na(n,Ha,(function(e){return i.enqueue({eventType:Ha,args:e})})),Na(n,Qa,(function(e){return i.enqueue({eventType:Qa,args:e})})),Na(n,eo,(function(e){return i.enqueue({eventType:eo,args:e})})),Na(n,to,(function(e){return i.enqueue({eventType:to,args:e})})),Na(n,no,(function(e){return i.enqueue({eventType:no,args:e})})),Na(n,io,(function(e){return i.enqueue({eventType:io,args:e})})),Na(n,Va,(function(t){t.config="object"===Ba(e)&&e.options||{},i.enqueue({eventType:Va,args:t})})),t=n,(0,r.yi)(t,(function(e,t){o.on(t,e)}))):(0,r.ji)('Analytics adapter for "'.concat(a,'" disabled by sampling')),this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return(0,r.ji)('Analytics adapter for "'.concat(a,'" already enabled, unnecessary call to `enableAnalytics`.'))}}}({analyticsType:"endpoint"}),{track:function(e){var t,n,i=e.eventType,r=e.args;if(d.FP.AUCTION_INIT===i&&uo.context.aggregatedEvents.splice(0),lo[i]&&uo.context.aggregatedEvents.push({eventType:i,data:lo[i](r)}),i===d.FP.AUCTION_END){if(!uo.context.aggregatedEvents.filter((function(e){return e.eventType===d.FP.BID_WON}))[0]&&H.getWinningBids()[0]){var a=lo[d.FP.BID_WON](H.getWinningBids()[0]);uo.context.aggregatedEvents.push({eventType:d.FP.BID_WON,data:a})}!function(e){var t=e.host,n=e.method,i=e.payload,r={protocol:"https",hostname:void 0===t?"tracker.konduit.me":t,pathname:e.path};"GET"===n&&(r.search=i);var a,o,s=((a=r).protocol||"http")+"://"+(a.host||a.hostname+(a.port?":".concat(a.port):""))+(a.pathname||"")+(a.search?"?".concat((o=a.search||"",Object.keys(o).map((function(e){return Array.isArray(o[e])?o[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(o[e])})).join("&"))):"")+(a.hash?"#".concat(a.hash):"");(0,fi.h)(s,void 0,"POST"===n?JSON.stringify(i):null,{contentType:"application/json",method:n,withCredentials:!0})}({method:"POST",path:"/analytics-initial-event",payload:(t=p.vc.getConfig("konduit.konduitId"),n=window.screen,{konduitId:t,prebidVersion:"6.24.1",konduitPrebidModuleVersion:"1.0.0",environment:{screen:{width:n.width,height:n.height},language:navigator.language},events:uo.context.aggregatedEvents})})}}});function co(e){return{auctionId:e.auctionId,timestamp:e.timestamp,auctionEnd:e.auctionEnd,auctionStatus:e.auctionStatus,adUnitCodes:e.adUnitCodes,labels:e.labels,timeout:e.timeout}}uo.originEnableAnalytics=uo.enableAnalytics,uo.enableAnalytics=function(e){p.vc.getConfig("konduit.konduitId")?(uo.context={aggregatedEvents:[]},uo.originEnableAnalytics(e)):(0,r.H)("A konduitId in config is required to use konduitAnalyticsAdapter")},le.ZP.registerAnalyticsAdapter({adapter:uo,code:"konduit"}),window.pbjs.installedModules.push("konduitAnalyticsAdapter");var po=(0,i.R)(),ho=n(3536);function fo(e){return function(e){if(Array.isArray(e))return go(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?go(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function go(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var mo="1.0.0",vo="konduit.konduitId",yo="enableSendAllBids",bo="A konduitId param is required to be in configs",_o="No bids received in the auction",To="A bid was not cached";function wo(e){return(e=[].slice.call(e)).unshift("".concat("Konduit",": ")),e}function So(){r.PN.apply(void 0,fo(wo(arguments)))}function ko(){r.H.apply(void 0,fo(wo(arguments)))}function Io(e){var t=e.host,n=void 0===t?"p.konduit.me":t,i=e.protocol,r=void 0===i?"https":i,a=e.method,o=void 0===a?"GET":a,s=e.path,d=e.payload,l=e.callbacks,u=e.timeout,c={protocol:r,hostname:n,pathname:s};"GET"===o&&(c.search=d);var p,h,f=((p=c).protocol||"http")+"://"+(p.host||p.hostname+(p.port?":".concat(p.port):""))+(p.pathname||"")+(p.search?"?".concat((h=p.search||"",Object.keys(h).map((function(e){return Array.isArray(h[e])?h[e].map((function(t){return"".concat(e,"[]=").concat(t)})).join("&"):"".concat(e,"=").concat(h[e])})).join("&"))):"")+(p.hash?"#".concat(p.hash):"");(0,fi.O)(u)(f,l,"POST"===o?JSON.stringify(d):null,{contentType:"application/json",method:o,withCredentials:!0})}function Co(e){return{auctionId:e.auctionId,vastUrl:e.vastUrl,bidderCode:e.bidderCode,creativeId:e.creativeId,adUnitCode:e.adUnitCode,cpm:e.cpm,currency:e.currency}}function Eo(e,t,n){e.kCpm=e.cpm,e.adserverTargeting||(e.adserverTargeting={});var i=(0,z.dg)(n)(e);p.vc.getConfig(yo)&&(e.adserverTargeting["k_cpm_".concat(e.bidderCode)]=i),t.bidderCode===e.bidderCode&&t.creativeId===e.creativeId&&(e.adserverTargeting.k_cpm=i)}function Ao(e,t,n,i){if((0,r.hj)(e)){t.kCpm=e;var a=(0,ho.D)(e,p.vc.getConfig("customPriceBucket"),p.vc.getConfig("currency.granularityMultiplier")),o=a.custom||a[i]||a.med;p.vc.getConfig(yo)&&(t.adserverTargeting["k_cpm_".concat(t.bidderCode)]=o),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cpm=o)}}function Po(e,t,n){(0,r.d8)(e)&&(t.konduitCacheKey=e,p.vc.getConfig(yo)&&(t.adserverTargeting["k_cache_key_".concat(t.bidderCode)]=e),n.bidderCode===t.bidderCode&&n.creativeId===t.creativeId&&(t.adserverTargeting.k_cache_key=e,t.adserverTargeting.konduit_cache_key=e))}function xo(e,t){if(e){if("string"==typeof e)return Oo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Oo(e,t):void 0}}function Oo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}!function(e,t){po.adServers=po.adServers||{},po.adServers[e]=po.adServers[e]||{},Object.keys(t).forEach((function(n){po.adServers[e][n]?(0,r.yN)("Attempting to add an already registered function property ".concat(n," for AdServer ").concat(e,".")):po.adServers[e][n]=t[n]}))}("konduit",{processBids:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=p.vc.getConfig(vo);if(e=e||{},!t)return ko(bo),e.callback&&e.callback(new Error(bo),[]),null;var n=e.bids||l.K.getBidsReceived(),i=e.bid||H.getWinningBids(e.adUnitCode,n)[0],a=[];if(p.vc.getConfig(yo)?a.push.apply(a,fo(n)):i&&a.push(i),!a.length)return ko(_o),e.callback&&e.callback(new Error(_o),[]),null;var o=p.vc.getConfig("priceGranularity"),s=[];a.forEach((function(e){Eo(e,i,o),s.push(Co(e))})),Io({method:"POST",path:"/api/bidsProcessor",timeout:e.timeout||1e3,payload:{clientId:t,konduitPrebidModuleVersion:mo,enableSendAllBids:p.vc.getConfig(yo),bids:s,bidResponsesCount:l.K.getBidsReceived().length},callbacks:{success:function(n){var s=null;So("Bids processed successfully ",n);try{var d=JSON.parse(n),l=d.kCpmData,u=d.cacheData;if((0,r.xb)(u))throw new Error(To);i.adserverTargeting.konduit_id=t,i.adserverTargeting.k_id=t,a.forEach((function(e){var t="".concat(e.bidderCode,":").concat(e.creativeId);Ao(l[t],e,i,o),Po(u[t],e,i)}))}catch(e){s=e,ko("Error parsing JSON response for bidsProcessor data: ",e)}e.callback&&e.callback(s,a)},error:function(t){ko("Bids were not processed successfully ",t),e.callback&&e.callback((0,r.d8)(t)?new Error(t):t,a)}}})}}),window.pbjs.installedModules.push("konduitWrapper");var Do=[I.Mk,I.pX],Ro="6.0.0",Lo="USD",Mo="https://hb.minutemedia-prebid.com/",Uo={code:"minutemedia",gvlid:918,version:Ro,supportedMediaTypes:Do,isBidRequestValid:function(e){return e.params?!!e.params.org||((0,r.yN)("org is a mandatory param for MinuteMedia adapter"),!1):((0,r.yN)("no params have been set to MinuteMedia adapter"),!1)},buildRequests:function(e,t){var n={},i=e[0],o=i.params.testMode;return n.params=function(e,t){var n,i=window.location.hostname,o=p.vc.getConfig("userSync")||{},s=o.syncEnabled,d=o.filterSettings,l=t.bidderCode,u=e.params,c=p.vc.getConfig("bidderTimeout"),h={wrapper_type:"prebidjs",wrapper_vendor:"pbjs",wrapper_version:"6.24.1",adapter_version:Ro,auction_start:(0,r.AB)(),publisher_id:u.org,publisher_name:i,site_domain:i,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,device_type:(n=navigator.userAgent,/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(n.toLowerCase())?"5":/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(n.toLowerCase())?"4":/smart[-_\s]?tv|hbbtv|appletv|googletv|hdmi|netcast|viera|nettv|roku|\bdtv\b|sonydtv|inettvbrowser|\btv\b/i.test(n.toLowerCase())?"3":"1"),ua:navigator.userAgent,session_id:(0,r.An)("auctionId",e),tmax:c},f=(0,r.An)("userId",e);f&&(h.userIds=JSON.stringify(f));var g=p.vc.getConfig("ortb2")||{};if(g.site&&(h.site_metadata=JSON.stringify(g.site)),g.user&&(h.user_metadata=JSON.stringify(g.user)),s){var m=function(e,t){return e&&["all","iframe"].some((function(n){return Bo(e[n],t)}))?"iframe":e&&e.image&&!Bo(e.image,t)?void 0:"pixel"}(d,l);m&&(h.cs_method=m)}return t.uspConsent&&(h.us_privacy=t.uspConsent),t&&t.gdprConsent&&t.gdprConsent.gdprApplies&&(h.gdpr=t.gdprConsent.gdprApplies,h.gdpr_consent=t.gdprConsent.consentString),u.ifa&&(h.ifa=u.ifa),e.schain&&(h.schain=function(e){if((0,r.xb)(e))return"";var t="".concat(e.ver,",").concat(e.complete);return e.nodes.forEach((function(e){t+="!",t+="".concat(No(e.asi),","),t+="".concat(No(e.sid),","),t+="".concat(e.hp?encodeURIComponent(e.hp):"",","),t+="".concat(No(e.rid),","),t+="".concat(No(e.name),","),t+="".concat(No(e.domain))})),t}(e.schain)),t&&t.refererInfo&&(h.referrer=(0,a.Z)(t,"refererInfo.referer"),h.page_url=p.vc.getConfig("pageUrl")||(0,a.Z)(window,"location.href")),h}(i,t),n.bids=function(e,t){var n=[];return e.length&&e.forEach((function(e){n.push(function(e,t){var n=e.params,i=function(e){return e.mediaTypes&&e.mediaTypes.banner}(e)?I.Mk:I.pX,o=function(e,t){var n=[];return(0,a.Z)(e,"mediaTypes.".concat(t,".sizes"))?n=e.mediaTypes[t].sizes:Array.isArray(e.sizes)&&e.sizes.length>0&&(n=e.sizes),n}(e,i);isNaN(n.floorPrice)&&(n.floorPrice=0);var s={mediaType:i,adUnitCode:(0,r.An)("adUnitCode",e),sizes:o,floorPrice:Math.max(jo(e,i),n.floorPrice),bidId:(0,r.An)("bidId",e),bidderRequestId:(0,r.An)("bidderRequestId",e),transactionId:(0,r.An)("transactionId",e)},d=(0,a.Z)(e,"mediaTypes.".concat(i,".pos"));d&&(s.pos=d);var l=(0,a.Z)(e,"ortb2Imp.ext.gpid");l&&(s.gpid=l);var u=n.placementId||(0,a.Z)(e,"mediaTypes.".concat(i,".name"));if(u&&(s.placementId=u),i===I.pX){var c,p=(0,a.Z)(e,"mediaTypes.video.playbackmethod");Array.isArray(p)&&(0,r.U)(p[0])?c=p[0]:(0,r.U)(p)&&(c=p),c&&(s.playbackMethod=c);var h=(0,a.Z)(e,"mediaTypes.video.placement");h&&(s.placement=h);var f=(0,a.Z)(e,"mediaTypes.video.minduration");f&&(s.minDuration=f);var g=(0,a.Z)(e,"mediaTypes.video.maxduration");g&&(s.maxDuration=g);var m=(0,a.Z)(e,"mediaTypes.video.skip");m&&(s.skip=m);var v=(0,a.Z)(e,"mediaTypes.video.linearity");v&&(s.linearity=v)}return s}(e))})),n}(e),{method:"POST",url:Fo(o),data:n}},interpretResponse:function(e){var t=e.body,n=[];return t.bids&&t.bids.forEach((function(e){var t={requestId:e.requestId,cpm:e.cpm,currency:e.currency||Lo,width:e.width,height:e.height,ttl:e.ttl||360,creativeId:e.requestId,netRevenue:e.netRevenue||!0,nurl:e.nurl,mediaType:e.mediaType,meta:{mediaType:e.mediaType}};e.mediaType===I.pX?t.vastXml=e.vastXml:e.mediaType===I.Mk&&(t.ad=e.ad),e.adomain&&e.adomain.length&&(t.meta.advertiserDomains=e.adomain),n.push(t)})),n},getUserSyncs:function(e,t){var n,i,a=[],o=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xo(e))){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;if(e.iframeEnabled&&s.body.params.userSyncURL&&a.push({type:"iframe",url:s.body.params.userSyncURL}),e.pixelEnabled&&(0,r.kJ)(s.body.params.userSyncPixels)){var d=s.body.params.userSyncPixels.map((function(e){return{type:"image",url:e}}));a.push.apply(a,function(e){if(Array.isArray(e))return Oo(e)}(i=d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(i)||xo(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}}catch(e){o.e(e)}finally{o.f()}return a},onBidWon:function(e){null!=e&&((0,r.PN)("onBidWon:",e),e.hasOwnProperty("nurl")&&e.nurl.length>0&&(0,r.hq)(e.nurl))}};function jo(e,t){if(!(0,r.LQ)(e.getFloor))return 0;var n=e.getFloor({currency:Lo,mediaType:t,size:"*"});return n.currency===Lo&&n.floor?n.floor:0}function No(e){return(0,r.xb)(e)?"":encodeURIComponent(e)}function Bo(e,t){if(!e)return!1;var n="include"===e.filter,i=(0,r.kJ)(e.bidders)?e.bidders:[t];return n&&(0,r.r3)(i,t)}function Fo(e){return e?Mo+"hb-multi-mm-test":Mo+"hb-mm-multi"}function qo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,Ue.dX)(Uo),window.pbjs.installedModules.push("minutemediaBidAdapter");var Vo={code:"oneVideo",VERSION:"3.1.2",ENDPOINT:"https://ads.adaptv.advertising.com/rtb/openrtb?ext_id=",E2ETESTENDPOINT:"https://ads-wc.v.ssp.yahoo.com/rtb/openrtb?ext_id=",SYNC_ENDPOINT1:"https://pixel.advertising.com/ups/57304/sync?gdpr=&gdpr_consent=&_origin=0&redir=true",SYNC_ENDPOINT2:"https://match.adsrvr.org/track/cmf/generic?ttd_pid=adaptv&ttd_tpi=1",supportedMediaTypes:["video","banner"],gvlid:25,isBidRequestValid:function(e){if("oneVideo"!==e.bidder||void 0===e.params)return!1;if(e.params&&e.params.video&&e.params.video.e2etest)return!0;if(void 0===e.mediaTypes.video&&void 0===e.mediaTypes.banner)return(0,r.H)("Failed validation: adUnit mediaTypes.video OR mediaTypes.banner not declared"),!1;if(e.mediaTypes.video){if(void 0===e.mediaTypes.video.playerSize&&e.params.video&&(void 0===e.params.video.playerWidth||void 0===e.params.video.playerHeight))return(0,r.H)("Failed validation: Player size not declared in either mediaTypes.playerSize OR bid.params.video.plauerWidth & bid.params.video.playerHeight."),!1;if(void 0===e.mediaTypes.video.mimes&&(!e.params.video||void 0===e.params.video.mimes))return(0,r.H)("Failed validation: adUnit mediaTypes.mimes OR params.video.mimes not declared"),!1;if("outstream"===e.mediaTypes.video.context&&e.params.video&&1===e.params.video.display)return(0,r.H)("Failed validation: Dynamic Ad Placement cannot be used with context Outstream (params.video.display=1)"),!1}return void 0!==e.params.pubId||((0,r.H)("Failed validation: Adapter cannot send requests without bid.params.pubId"),!1)},buildRequests:function(e,t){var n=t?t.gdprConsent:null;return e.map((function(e){var i=Vo.ENDPOINT,r=e.params.pubId;return e.params.video.e2etest&&(i=Vo.E2ETESTENDPOINT,r="HBExchange"),{method:"POST",url:i+r,data:Wo(e,n,t),bidRequest:e}}))},interpretResponse:function(e,t){var n,i,a,o=t.bidRequest;try{n=(e=e.body).seatbid[0].bid[0]}catch(t){e=null}return e&&n&&(n.adm||n.nurl)&&n.price?(i=Ho(o.sizes),(a={requestId:o.bidId,bidderCode:Vo.code,cpm:n.price,creativeId:n.crid,width:i.width,height:i.height,currency:e.cur,ttl:o.params.video.ttl>0&&o.params.video.ttl<=3600?o.params.video.ttl:300,netRevenue:!0,adUnitCode:o.adUnitCode,meta:{advertiserDomains:n.adomain}}).mediaType=o.mediaTypes.banner?"banner":"video",n.nurl?a.vastUrl=n.nurl:n.adm&&1===o.params.video.display?a.ad=n.adm:n.adm&&(a.vastXml=n.adm),o.mediaTypes.video&&(a.renderer="outstream"===o.mediaTypes.video.context?function(e,t){e.renderer||(e.renderer={},e.renderer.url="https://cdn.vidible.tv/prod/hb-outstream-renderer/renderer.js",e.renderer.render=function(e){setTimeout((function(){o2PlayerRender(e)}),700)})}(o):void 0),a):((0,r.yN)("No valid bids from ".concat(Vo.code," bidder")),[])},getUserSyncs:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.gdprApplies,r=n.consentString,a=void 0===r?"":r;if(e.pixelEnabled)return[{type:"image",url:Vo.SYNC_ENDPOINT1},{type:"image",url:"https://sync-tm.everesttech.net/upi/pid/m7y5t93k?gdpr=".concat(i?1:0,"&gdpr_consent=").concat(a,"&redir=https%3A%2F%2Fpixel.advertising.com%2Fups%2F55986%2Fsync%3Fuid%3D%24%7BUSER_ID%7D%26_origin%3D0")+encodeURI("&gdpr=".concat(i?1:0,"&gdpr_consent=").concat(a))},{type:"image",url:Vo.SYNC_ENDPOINT2}]}};function Ho(e){var t,n,i=(0,r.sF)(e),a=(t=i.length?i[0].split("x"):[],n=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(t,n)||function(e,t){if(e){if("string"==typeof e)return qo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qo(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],s=a[1];return{width:parseInt(o,10)||void 0,height:parseInt(s,10)||void 0}}function zo(e){return!(!e||!e.gdprApplies)}function Wo(e,t,n){var i=n.refererInfo.referer,a=e.params.site&&e.params.site.page?e.params.site.page:i.href,o=e.params.site&&e.params.site.referrer?e.params.site.referrer:n.refererInfo.referer,s={currency:e.params.cur||"USD",mediaType:"video",size:"*"},d={id:(0,r.DO)(),at:2,imp:[{id:"1",secure:"https:"===document.location.protocol,ext:{hb:1,prebidver:"6.24.1",adapterver:Vo.VERSION}}],site:{page:a,ref:o},device:{ua:navigator.userAgent},tmax:200};if(null==e.params.video.display||1!=e.params.video.display){if(d.imp[0].video={linearity:1},e.params.video.playerWidth&&e.params.video.playerHeight)d.imp[0].video.w=e.params.video.playerWidth,d.imp[0].video.h=e.params.video.playerHeight;else{var l=Ho(e.mediaTypes.video.playerSize);d.imp[0].video.w=l.width,d.imp[0].video.h=l.height}e.params.video.mimes?d.imp[0].video.mimes=e.params.video.mimes:d.imp[0].video.mimes=e.mediaTypes.video.mimes,(e.mediaTypes.video.maxbitrate||e.params.video.maxbitrate)&&(d.imp[0].video.maxbitrate=e.params.video.maxbitrate||e.mediaTypes.video.maxbitrate),(e.mediaTypes.video.maxduration||e.params.video.maxduration)&&(d.imp[0].video.maxduration=e.params.video.maxduration||e.mediaTypes.video.maxduration),(e.mediaTypes.video.minduration||e.params.video.minduration)&&(d.imp[0].video.minduration=e.params.video.minduration||e.mediaTypes.video.minduration),(e.mediaTypes.video.api||e.params.video.api)&&(d.imp[0].video.api=e.params.video.api||e.mediaTypes.video.api),(e.mediaTypes.video.delivery||e.params.video.delivery)&&(d.imp[0].video.delivery=e.params.video.delivery||e.mediaTypes.video.delivery),(e.mediaTypes.video.position||e.params.video.position)&&(d.imp[0].video.pos=e.params.video.position||e.mediaTypes.video.position),(e.mediaTypes.video.playbackmethod||e.params.video.playbackmethod)&&(d.imp[0].video.playbackmethod=e.params.video.playbackmethod||e.mediaTypes.video.playbackmethod),(e.mediaTypes.video.placement||e.params.video.placement)&&(d.imp[0].video.placement=e.params.video.placement||e.mediaTypes.video.placement),e.params.video.rewarded&&(d.imp[0].ext.rewarded=e.params.video.rewarded),(e.mediaTypes.video.linearity||e.params.video.linearity)&&(d.imp[0].video.linearity=e.params.video.linearity||e.mediaTypes.video.linearity||1),(e.mediaTypes.video.protocols||e.params.video.protocols)&&(d.imp[0].video.protocols=e.params.video.protocols||e.mediaTypes.video.protocols||[2,5])}else 1==e.params.video.display&&(s.mediaType="banner",d.imp[0].banner={mimes:e.params.video.mimes,w:e.params.video.playerWidth,h:e.params.video.playerHeight,pos:e.params.video.position},e.params.video.placement&&(d.imp[0].banner.placement=e.params.video.placement),e.params.video.maxduration&&(d.imp[0].banner.ext=d.imp[0].banner.ext||{},d.imp[0].banner.ext.maxduration=e.params.video.maxduration),e.params.video.minduration&&(d.imp[0].banner.ext=d.imp[0].banner.ext||{},d.imp[0].banner.ext.minduration=e.params.video.minduration));if((0,r.LQ)(e.getFloor)){var u=e.getFloor(s);d.imp[0].bidfloor=u.floor,d.cur=u.currency}else d.imp[0].bidfloor=e.params.bidfloor;if(e.params.video.inventoryid&&(d.imp[0].ext.inventoryid=e.params.video.inventoryid),e.params.video.sid?(d.source={ext:{schain:{complete:1,nodes:[{sid:e.params.video.sid,rid:d.id}]}}},1==e.params.video.hp&&(d.source.ext.schain.nodes[0].hp=e.params.video.hp)):e.schain&&(d.source={ext:{schain:e.schain}},d.source.ext.schain.nodes[0].rid=d.id),e.params.site&&e.params.site.id&&(d.site.id=e.params.site.id),(zo(t)||n&&n.uspConsent)&&(d.regs={ext:{}},zo(t)&&(d.regs.ext.gdpr=1),t&&t.consentString&&(d.user={ext:{consent:t.consentString}}),n&&n.uspConsent&&(d.regs.ext.us_privacy=n.uspConsent)),e.params.video.e2etest&&((0,r.ji)("E2E test mode enabled: \n The following parameters are being overridden by e2etest mode:\n* bidfloor:null\n* width:300\n* height:250\n* mimes: video/mp4, application/javascript\n* api:2\n* site.page/ref: verizonmedia.com\n* tmax:1000"),d.imp[0].bidfloor=null,d.imp[0].video.w=300,d.imp[0].video.h=250,d.imp[0].video.mimes=["video/mp4","application/javascript"],d.imp[0].video.api=[2],d.site.page="https://verizonmedia.com",d.site.ref="https://verizonmedia.com",d.tmax=1e3),e.params.video.custom&&(0,r.PO)(e.params.video.custom))for(var c in d.imp[0].ext.custom={},e.params.video.custom)((0,r.d8)(e.params.video.custom[c])||(0,r.hj)(e.params.video.custom[c]))&&(d.imp[0].ext.custom[c]=e.params.video.custom[c]);if(e.params.video.content&&(0,r.PO)(e.params.video.content)){d.site.content={};var p=["id","title","series","season","genre","contentrating","language"],h=["episode","prodq","context","livestream","len"],f=["cat"],g=["ext"];for(var m in e.params.video.content)p.indexOf(m)>-1&&(0,r.d8)(e.params.video.content[m])||h.indexOf(m)>-1&&(0,r.hj)(e.params.video.content[m])||g.indexOf(m)>-1&&(0,r.PO)(e.params.video.content[m])||f.indexOf(m)>-1&&(0,r.kJ)(e.params.video.content[m])&&e.params.video.content[m].every((function(e){return(0,r.d8)(e)}))?d.site.content[m]=e.params.video.content[m]:(0,r.ji)("oneVideo bid adapter validation error: ",m," is either not supported is OpenRTB V2.5 or value is undefined")}return d}function $o(e){return $o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$o(e)}function Go(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,Ue.dX)(Vo),window.pbjs.installedModules.push("oneVideoBidAdapter");var Ko=[I.Mk,I.pX],Xo=["startdelay","mimes","minduration","maxduration","startdelay","skippable","playbackmethod","api","protocols","boxingallowed","linearity","delivery","protocol","placement","minbitrate","maxbitrate"],Zo={britepoolid:"britepoolid",criteoId:"criteoid",fabrickId:"nuestarid",haloId:"audigentid",id5id:"id5id",idl_env:"lre",IDP:"zeotapid",idxId:"idxid",intentIqId:"intentiqid",lipb:"lipbid",lotamePanoramaId:"lotameid",merkleId:"merkleid",netId:"netid",parrableId:"parrableid",pubcid:"pubcid",quantcastId:"quantcastid",tapadId:"tapadid",tdid:"ttduuid",uid2:"uid2",flocId:"floc",admixerId:"admixerid",deepintentId:"deepintentid",dmdId:"dmdid",nextrollId:"nextrollid",novatiq:"novatiqid",mwOpenLinkId:"mwopenlinkid",dapId:"dapid",amxId:"amxid",kpuid:"kpuid",publinkId:"publinkid",naveggId:"naveggid",imuid:"imuid",adtelligentId:"adtelligentid"},Yo={code:"openx",gvlid:69,supportedMediaTypes:Ko,isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return(0,a.Z)(e,"mediaTypes.banner")&&t?!!e.params.unit||(0,a.Z)(e,"mediaTypes.banner.sizes.length")>0:!(!e.params.unit||!t)},buildRequests:function(e,t){if(0===e.length)return[];var n,i,o=[],s=function(e){return e.reduce((function(e,t){var n;return n=t,(0,a.Z)(n,"mediaTypes.video")&&!(0,a.Z)(n,"mediaTypes.banner")||n.mediaType===I.pX?e[0].push(t):e[1].push(t),e}),[[],[]])}(e),d=(i=2,function(e){if(Array.isArray(e))return e}(n=s)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(n,i)||function(e,t){if(e){if("string"==typeof e)return Go(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Go(e,t):void 0}}(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=d[0],c=d[1];return c.length>0&&o.push(function(e,t){var n=[],i=!1,o=Qo(e,t),s=(0,r.HA)(e,(function(e){return e.params.unit}));return o.aus=(0,r.HA)(e,(function(e){return(0,r.sF)(e.mediaTypes.banner.sizes).join(",")})).join("|"),o.divids=(0,r.HA)(e,(function(e){return encodeURIComponent(e.adUnitCode)})).join(","),o.aucs=(0,r.HA)(e,(function(e){var t=(0,a.Z)(e,"ortb2Imp.ext.data.pbadslot");return encodeURIComponent(t||"")})).join(","),s.some((function(e){return e}))&&(o.auid=s.join(",")),e.some((function(e){return e.params.doNotTrack}))&&(o.ns=1),(!0===p.vc.getConfig("coppa")||e.some((function(e){return e.params.coppa})))&&(o.tfcd=1),e.forEach((function(e){if(e.params.customParams){var t=(0,r.HA)(Object.keys(e.params.customParams),(function(t){return function(e,t){var n=t[e];return(0,r.kJ)(n)&&(n=n.join(",")),(e.toLowerCase()+"="+n.toLowerCase()).replace("+",".").replace("/","_")}(t,e.params.customParams)})),a=window.btoa(t.join("&"));i=!0,n.push(a)}else n.push("")})),i&&(o.tps=n.join(",")),ts(o,I.Mk,e),{method:"GET",url:o.ph?"https://u.openx.net/w/1.0/arj":"https://".concat(e[0].params.delDomain,"/w/1.0/arj"),data:o,payload:{bids:e,startTime:new Date}}}(c,t)),l.length>0&&l.forEach((function(e){o.push(function(e,t){var n=function(e,t){var n,i,o=(0,a.Z)(e,"mediaTypes.video"),s=Qo([e],t),d=(0,a.Z)(e,"params.video")||{},l=(0,a.Z)(e,"mediaTypes.video.context"),c=(0,a.Z)(e,"mediaTypes.video.playerSize");(0,r.kJ)(e.sizes)&&2===e.sizes.length&&!(0,r.kJ)(e.sizes[0])?(n=parseInt(e.sizes[0],10),i=parseInt(e.sizes[1],10)):(0,r.kJ)(e.sizes)&&(0,r.kJ)(e.sizes[0])&&2===e.sizes[0].length?(n=parseInt(e.sizes[0][0],10),i=parseInt(e.sizes[0][1],10)):(0,r.kJ)(c)&&2===c.length&&(n=parseInt(c[0],10),i=parseInt(c[1],10));var p={w:n,h:i},h=e.params.video||e.params.openrtb||{};h.openrtb&&(h=h.openrtb),(0,r.kJ)(h.imp)&&(h=h.imp[0].video),Object.keys(h).filter((function(e){return(0,u.q9)(Xo,e)})).forEach((function(e){return p[e]=h[e]})),Object.keys(o).filter((function(e){return(0,u.q9)(Xo,e)})).forEach((function(e){return p[e]=o[e]}));var f={imp:[{video:p}]};s.openrtb=JSON.stringify(f),s.auid=e.params.unit,s.vwd=n||d.vwd,s.vht=i||d.vht,"outstream"===l&&(s.vos="101"),d.mimes&&(s.vmimes=d.mimes),e.params.test&&(s.vtest=1);var g=(0,a.Z)(e,"ortb2Imp.ext.data.pbadslot");return g&&(s.aucs=encodeURIComponent(g)),ts(s,I.pX,[e]),s}(e,t);return{method:"GET",url:n.ph?"https://u.openx.net/v/1.0/avjp":"https://".concat(e.params.delDomain,"/v/1.0/avjp"),data:n,payload:{bid:e,startTime:new Date}}}(e,t))})),o},interpretResponse:function(e,t){var n=e.body,i=function(e){return/avjp$/.test(e.url)?I.pX:I.Mk}(t);return i===I.pX?function(e,t){var n=t.bid,i=(t.startTime,[]);if(void 0!==e&&""!==e.vastUrl&&e.pub_rev>0){var a=(0,r.en)(e.vastUrl).search||{},o={};o.requestId=n.bidId,e.deal_id&&(o.dealId=e.deal_id),o.ttl=300,o.netRevenue=!0,o.currency=e.currency,o.cpm=parseInt(e.pub_rev,10)/1e3,o.width=parseInt(e.width,10),o.height=parseInt(e.height,10),o.creativeId=e.adid,o.vastUrl=e.vastUrl,o.mediaType=I.pX,e.ph=a.ph,e.colo=a.colo,e.ts=a.ts,i.push(o)}return i}(n,t.payload):function(e,t){for(var n=t.bids,i=(t.startTime,e.ads.ad),r=[],a=0;a<i.length;a++){var o=i[a],s=parseInt(o.idx,10),d={};if(d.requestId=n[s].bidId,o.pub_rev){d.cpm=Number(o.pub_rev)/1e3;var l=o.creative[0];l&&(d.width=l.width,d.height=l.height),d.creativeId=l.id,d.ad=o.html,o.deal_id&&(d.dealId=o.deal_id),d.ttl=300,d.netRevenue=!0,d.currency=o.currency,o.tbd&&(d.tbd=o.tbd),d.ts=o.ts,d.meta={},o.brand_id&&(d.meta.brandId=o.brand_id),o.adomain&&length(o.adomain)>0?d.meta.advertiserDomains=o.adomain:d.meta.advertiserDomains=[],o.adv_id&&(d.meta.dspid=o.adv_id),r.push(d)}}return r}(n,t.payload)},getUserSyncs:function(e,t,n,i){if(e.iframeEnabled||e.pixelEnabled){var r=e.iframeEnabled?"iframe":"image",o=(0,a.Z)(t,"0.body.ads.pixels")||(0,a.Z)(t,"0.body.pixels")||function(e,t){var n=[];return e&&(n.push("gdpr="+(e.gdprApplies?1:0)),n.push("gdpr_consent="+encodeURIComponent(e.consentString||""))),t&&n.push("us_privacy="+encodeURIComponent(t)),"".concat("https://u.openx.net/w/1.0/pd").concat(n.length>0?"?"+n.join("&"):"")}(n,i);return[{type:r,url:o}]}},transformBidParams:function(e,t){return(0,r.uh)({unit:"string",customFloor:"number"},e)}};function Jo(e){var t,n,i,r=window,a=document,o=a.documentElement;if(e){try{r=window.top,a=window.top.document}catch(e){return}o=a.documentElement,i=a.body,t=r.innerWidth||o.clientWidth||i.clientWidth,n=r.innerHeight||o.clientHeight||i.clientHeight}else o=a.documentElement,t=r.innerWidth||o.clientWidth,n=r.innerHeight||o.clientHeight;return"".concat(t,"x").concat(n)}function Qo(e,t){var n,i=(0,r.yL)();n={ju:p.vc.getConfig("pageUrl")||t.refererInfo.referer,ch:document.charSet||document.characterSet,res:"".concat(screen.width,"x").concat(screen.height,"x").concat(screen.colorDepth),ifr:i,tz:(new Date).getTimezoneOffset(),tws:Jo(i),be:1,bc:e[0].params.bc||"".concat("hb_pb","_").concat("3.0.3"),dddid:(0,r.HA)(e,(function(e){return e.transactionId})).join(","),nocache:(new Date).getTime()};var o=es("ortb2.user.data");o.length>0&&(n.sm=o);var s,d,l,u,c,h=es("ortb2.site.content.data");if(h.length>0&&(n.scsm=h),e[0].params.platform&&(n.ph=e[0].params.platform),t.gdprConsent){var f=t.gdprConsent;void 0!==f.consentString&&(n.gdpr_consent=f.consentString),void 0!==f.gdprApplies&&(n.gdpr=f.gdprApplies?1:0),"iab"===p.vc.getConfig("consentManagement.cmpApi")&&(n.x_gdpr_f=1)}return t&&t.uspConsent&&(n.us_privacy=t.uspConsent),(0,a.Z)(e[0],"crumbs.pubcid")&&rt(e[0],"userId.pubcid",(0,a.Z)(e[0],"crumbs.pubcid")),s=n,d=e[0].userId,(0,r.yi)(d,(function(e,t){var n=Zo[t];if(Zo.hasOwnProperty(t))switch(t){case"merkleId":case"flocId":case"uid2":s[n]=e.id;break;case"lipb":if(s[n]=e.lipbid,Array.isArray(e.segments)&&e.segments.length>0){var i="liveintent:"+e.segments.join("|");s.sm="".concat(s.sm?s.sm+",":"").concat(i)}break;case"parrableId":s[n]=e.eid;break;case"id5id":s[n]=e.uid;break;case"novatiq":s[n]=e.snowflake;break;default:s[n]=e}})),n=s,e[0].schain&&(n.schain=(l=e[0].schain,"".concat(l.ver,",").concat(l.complete,"!").concat((u=l.nodes,c=["asi","sid","hp","rid","name","domain"],u.map((function(e){return c.map((function(t){return e[t]||""})).join(",")})).join("!"))))),n}function es(e){var t=p.vc.getConfig(e);if(!Array.isArray(t)||!t.length)return"";var n=t.filter((function(e){return Array.isArray(e.segment)&&e.segment.length>0&&void 0!==e.name&&e.name.length>0})).reduce((function(e,t){var n="object"===$o(t.ext)&&t.ext.segtax?"".concat(t.name,"/").concat(t.ext.segtax):t.name;return e[n]=(e[n]||[]).concat(t.segment.map((function(e){return e.id}))),e}),{});return Object.keys(n).map((function(e,t){return e+":"+n[e].join("|")})).join(",")}function ts(e,t,n){var i=[],r=!1;n.forEach((function(e){var n=function(e,t){var n={},i=p.vc.getConfig("currency.adServerCurrency")||"USD";"function"==typeof e.getFloor&&(n=e.getFloor({currency:i,mediaType:t,size:"*"}));var r=n.floor||e.params.customFloor||0;return Math.round(1e3*r)}(e,t);n?(i.push(n),r=!0):i.push(0)})),r&&(e.aumfs=i.join(","))}function ns(){return ns=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},ns.apply(this,arguments)}function is(e){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},is(e)}(0,Ue.dX)(Yo),window.pbjs.installedModules.push("openxBidAdapter");var rs="https://elb.the-ozone-project.com",as="/openrtb2/auction",os="/static/load-cookie.html",ss="https://test.ozpr.net",ds="2.7.0",ls={gvlid:524,aliases:[{code:"lmc",gvlid:524},{code:"newspassid",gvlid:524}],version:ds,code:"ozone",supportedMediaTypes:[I.pX,I.Mk],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0,endpointOverride:null},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:rs+as,cookieSyncUrl:rs+os,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js"},loadWhitelabelData:function(e){if(!this.propertyBag.whitelabel){this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults));var t=e.bidder||"ozone";this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t;var n=p.vc.getConfig(t)||{};(0,r.PN)("got bidderConfig: ",JSON.parse(JSON.stringify(n))),n.kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=n.kvpPrefix);var i=this.getGetParametersAsObject();n.endpointOverride&&(n.endpointOverride.origin&&(this.propertyBag.endpointOverride=n.endpointOverride.origin,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.origin+as,this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.origin+os),i.hasOwnProperty("renderer")?i.renderer.match("%3A%2F%2F")?this.propertyBag.whitelabel.rendererUrl=decodeURIComponent(i.renderer):this.propertyBag.whitelabel.rendererUrl=i.renderer:n.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=n.endpointOverride.rendererUrl),n.endpointOverride.cookieSyncUrl&&(this.propertyBag.whitelabel.cookieSyncUrl=n.endpointOverride.cookieSyncUrl),n.endpointOverride.auctionUrl&&(this.propertyBag.endpointOverride=n.endpointOverride.auctionUrl,this.propertyBag.whitelabel.auctionUrl=n.endpointOverride.auctionUrl));try{i.hasOwnProperty("auction")&&"dev"===i.auction&&((0,r.PN)("GET: auction=dev"),this.propertyBag.whitelabel.auctionUrl=ss+as),i.hasOwnProperty("cookiesync")&&"dev"===i.cookiesync&&((0,r.PN)("GET: cookiesync=dev"),this.propertyBag.whitelabel.cookieSyncUrl=ss+os)}catch(e){}(0,r.PN)("set propertyBag.whitelabel to",this.propertyBag.whitelabel)}},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},isBidRequestValid:function(e){this.loadWhitelabelData(e),(0,r.PN)("isBidRequestValid : ",p.vc.getConfig(),e);var t=e.adUnitCode,n="VALIDATION FAILED : missing {param} : siteId, placementId and publisherId are REQUIRED";if(!e.params.hasOwnProperty("placementId"))return(0,r.H)(n.replace("{param}","placementId"),t),!1;if(!this.isValidPlacementId(e.params.placementId))return(0,r.H)("VALIDATION FAILED : placementId must be exactly 10 numeric characters",t),!1;if(!e.params.hasOwnProperty("publisherId"))return(0,r.H)(n.replace("{param}","publisherId"),t),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return(0,r.H)("VALIDATION FAILED : publisherId must be exactly 12 alphanumieric characters including hyphens",t),!1;if(!e.params.hasOwnProperty("siteId"))return(0,r.H)(n.replace("{param}","siteId"),t),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return(0,r.H)("VALIDATION FAILED : siteId must be exactly 10 numeric characters",t),!1;if(e.params.hasOwnProperty("customParams"))return(0,r.H)("VALIDATION FAILED : customParams should be renamed to customData",t),!1;if(e.params.hasOwnProperty("customData")){if(!Array.isArray(e.params.customData))return(0,r.H)("VALIDATION FAILED : customData is not an Array",t),!1;if(e.params.customData.length<1)return(0,r.H)("VALIDATION FAILED : customData is an array but does not contain any elements",t),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return(0,r.H)('VALIDATION FAILED : customData[0] does not contain "targeting"',t),!1;if("object"!=is(e.params.customData[0].targeting))return(0,r.H)("VALIDATION FAILED : customData[0] targeting is not an object",t),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(I.pX)){if(!e.mediaTypes[I.pX].hasOwnProperty("context"))return(0,r.H)("No video context key/value in bid. Rejecting bid: ",e),!1;if("instream"!==e.mediaTypes[I.pX].context&&"outstream"!==e.mediaTypes[I.pX].context)return(0,r.H)("video.context is invalid. Only instream/outstream video is supported. Rejecting bid: ",e),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,t){var n=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=(new Date).getTime();var i=this.propertyBag.whitelabel.bidder,o=this.propertyBag.whitelabel.keyPrefix;if((0,r.PN)("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(ds," validBidRequests"),JSON.parse(JSON.stringify(e)),"bidderRequest",JSON.parse(JSON.stringify(t))),this.blockTheRequest())return[];var s={publisherId:"",siteId:""};e.length>0&&(this.cookieSyncBag.userIdObject=ns(this.cookieSyncBag.userIdObject,this.findAllUserIds(e[0])),this.cookieSyncBag.siteId=(0,a.Z)(e[0],"params.siteId"),this.cookieSyncBag.publisherId=(0,a.Z)(e[0],"params.publisherId"),s=e[0].params),(0,r.PN)("cookie sync bag",this.cookieSyncBag);var d=this.getWhitelabelConfigItem("ozone.singleRequest");d=!1!==d,(0,r.PN)("config ".concat(i,".singleRequest : "),d);var l={};delete l.test;var u=p.vc.getConfig("ortb2");u&&(0,a.Z)(u,"user")&&((0,r.PN)("added FPD user object"),l.user=u.user);var c=this.getGetParametersAsObject(),h=o+"testmode",f=c[h]||null;l.device={w:window.innerWidth,h:window.innerHeight};var g=this.getPlacementIdOverrideFromGetParam(),m=null,v=e.map((function(e){var t={},o=g||n.getPlacementId(e);t.id=e.bidId,t.tagid=o,t.secure="https:"===window.location.protocol?1:0;var s,d,l=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(I.Mk)&&(l=e.mediaTypes[I.Mk].sizes,(0,r.PN)("setting banner size from the mediaTypes.banner element for bidId "+t.id+": ",l)),e.mediaTypes.hasOwnProperty(I.pX)){if((0,r.PN)("openrtb 2.5 compliant video"),"object"==is(e.mediaTypes[I.pX])){var c=(0,a.Z)(e,"params.video",{});t.video=n.unpackVideoConfigIntoIABformat(e.mediaTypes[I.pX],c),t.video=n.addVideoDefaults(t.video,e.mediaTypes[I.pX],c)}var p=(s=t.video,(d=ms(s))?d[0]&&"object"===is(d[0])&&((0,r.PN)("getWidthAndHeightFromVideoObject found nested array inside playerSize.",d[0]),"number"!=typeof(d=d[0])[0]&&"string"!=typeof d[0])?((0,r.PN)("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",d[0]),null):2!==d.length?((0,r.PN)("getWidthAndHeightFromVideoObject found playerSize with length of "+d.length+". This is totally wrong - cannot continue."),null):{w:d[0],h:d[1]}:null);(0,r.PN)("setting video object from the mediaTypes.video element: "+t.id+":",t.video,"wh=",p),p&&"object"===is(p)?(t.video.w=p.w,t.video.h=p.h,function(e){var t=ms(e);return t?t.length<1?null:t[0]&&"object"===is(t[0]):null}(t.video)?((0,r.PN)("setting obj.video.format to be an array of objects"),t.video.ext.format=[p]):((0,r.PN)("setting obj.video.format to be an object"),t.video.ext.format=p)):(0,r.yN)("cannot set w, h & format values for video; the config is not right")}e.mediaTypes.hasOwnProperty(I.B5)&&(t.native=e.mediaTypes[I.B5],(0,r.PN)("setting native object from the mediaTypes.native element: "+t.id+":",t.native)),e.hasOwnProperty("getFloor")?((0,r.PN)("This bidRequest object has property: getFloor"),t.floor=n.getFloorObjectForAuction(e),(0,r.PN)("obj.floor is : ",t.floor)):(0,r.PN)("This bidRequest object DOES NOT have property: getFloor")}else e.hasOwnProperty("sizes")?((0,r.PN)("no mediaTypes detected - will use the sizes array in the config root"),l=e.sizes):(0,r.PN)("no mediaTypes detected, no sizes array in the config root either. Cannot set sizes for banner type");if(l.length>0&&(t.banner={topframe:1,w:l[0][0]||0,h:l[0][1]||0,format:l.map((function(e){return{w:e[0],h:e[1]}}))}),t.placementId=o,rt(t,"ext.prebid",{storedrequest:{id:o}}),t.ext[i]={},t.ext[i].adUnitCode=e.adUnitCode,t.ext[i].transactionId=e.transactionId,e.params.hasOwnProperty("customData")&&(t.ext[i].customData=e.params.customData),(0,r.PN)("obj.ext.".concat(i," is "),t.ext[i]),null!=f)if((0,r.PN)("setting isTestMode to ",f),t.ext[i].hasOwnProperty("customData"))for(var v=0;v<t.ext[i].customData.length;v++)t.ext[i].customData[v].targeting[h]=f;else t.ext[i].customData=[{settings:{},targeting:{}}],t.ext[i].customData[0].targeting[h]=f;return u&&(0,a.Z)(u,"site")&&((0,r.PN)("added fpd.site"),(0,a.Z)(t,"ext."+i+".customData.0.targeting",!1)?t.ext[i].customData[0].targeting=ns(t.ext[i].customData[0].targeting,u.site):rt(t,"ext."+i+".customData.0.targeting",u.site)),!m&&(0,a.Z)(e,"schain")&&(m=e.schain),t})),y={};if(y[i]={},y[i][o+"_pb_v"]=ds,y[i][o+"_rw"]=g?1:0,e.length>0){var b=this.cookieSyncBag.userIdObject;b.hasOwnProperty("pubcid")&&(y[i].pubcid=b.pubcid)}y[i].pv=this.getPageId();var _=this.getWhitelabelConfigItem("ozone.oz_omp_floor");(0,r.PN)("".concat(o,"_omp_floor dollar value = "),_),"number"==typeof _?y[i][o+"_omp_floor"]=_:void 0!==_&&(0,r.H)("".concat(o,"_omp_floor is invalid - IF SET then this must be a number, representing dollar value eg. ").concat(o,"_omp_floor: 1.55. You have it set as a ")+is(_));var T=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),w=(0,r.kJ)(T)&&T.length>0;y[i][o+"_kvp_rw"]=w?1:0,"ozone"!=i&&((0,r.PN)("setting aliases object"),y.prebid={aliases:{ozone:i}}),c.hasOwnProperty("ozf")&&(y[i].ozf="true"==c.ozf||1==c.ozf?1:0),c.hasOwnProperty("ozpf")&&(y[i].ozpf="true"==c.ozpf||1==c.ozpf?1:0),c.hasOwnProperty("ozrp")&&c.ozrp.match(/^[0-3]$/)&&(y[i].ozrp=parseInt(c.ozrp)),c.hasOwnProperty("ozip")&&c.ozip.match(/^\d+$/)&&(y[i].ozip=parseInt(c.ozip)),null!=this.propertyBag.endpointOverride&&(y[i].origin=this.propertyBag.endpointOverride);var S=this.generateEids(e);if(l.site={publisher:{id:s.publisherId},page:document.location.href,id:s.siteId},l.test=c.hasOwnProperty("pbjs_debug")&&"true"===c.pbjs_debug?1:0,t&&t.gdprConsent){(0,r.PN)("ADDING GDPR info");var k=(0,a.Z)(t,"gdprConsent.apiVersion",1);l.regs={ext:{gdpr:t.gdprConsent.gdprApplies?1:0,apiVersion:k}},(0,a.Z)(l,"regs.ext.gdpr")?rt(l,"user.ext.consent",t.gdprConsent.consentString):(0,r.PN)("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else(0,r.PN)("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");if(t&&t.uspConsent?((0,r.PN)("ADDING CCPA info"),rt(l,"user.ext.uspConsent",t.uspConsent)):(0,r.PN)("WILL NOT ADD CCPA info; no bidderRequest.uspConsent."),m&&((0,r.PN)("schain found"),rt(l,"source.ext.schain",m)),!0===p.vc.getConfig("coppa")&&rt(l,"regs.coppa",1),d){(0,r.PN)("buildRequests starting to generate response for a single request"),l.id=t.auctionId,l.auctionId=t.auctionId,l.imp=v,l.ext=y,rt(l,"source.tid",t.auctionId),rt(l,"user.ext.eids",S);var C={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(l),bidderRequest:t};return(0,r.PN)("buildRequests request data for single = ",JSON.parse(JSON.stringify(l))),this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,r.PN)("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),C),C}var E=v.map((function(e){(0,r.PN)("buildRequests starting to generate non-single response, working on imp : ",e);var a=ns({},l);return e.ext[i].pageAuctionId=t.auctionId,a.id=e.ext[i].transactionId,a.auctionId=e.ext[i].transactionId,a.imp=[e],a.ext=y,rt(a,"source.tid",e.ext[i].transactionId),rt(a,"user.ext.eids",S),(0,r.PN)("buildRequests RequestSingle (for non-single) = ",a),{method:"POST",url:n.getAuctionUrl(),data:JSON.stringify(a),bidderRequest:t}}));return this.propertyBag.buildRequestsEnd=(new Date).getTime(),(0,r.PN)("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),E),E},getFloorObjectForAuction:function(e){var t={banner:(0,a.Z)(e,"mediaTypes.banner.sizes",null),video:(0,a.Z)(e,"mediaTypes.video.playerSize",null),native:(0,a.Z)(e,"mediaTypes.native.image.sizes",null)};(0,r.PN)("getFloorObjectForAuction mediaTypesSizes : ",t);var n={};return t.banner&&(n.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner})),t.video&&(n.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video})),t.native&&(n.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native})),(0,r.PN)("getFloorObjectForAuction returning : ",JSON.parse(JSON.stringify(n))),n},interpretResponse:function(e,t){var n=this;t&&t.bidderRequest&&t.bidderRequest.bids&&this.loadWhitelabelData(t.bidderRequest.bids[0]);var i=(new Date).getTime(),o=this.propertyBag.whitelabel.bidder,s=this.propertyBag.whitelabel.keyPrefix;if((0,r.PN)("interpretResponse time: ".concat(i," . Time between buildRequests done and interpretResponse start was ").concat(i-this.propertyBag.buildRequestsEnd,"ms")),(0,r.PN)("serverResponse, request",JSON.parse(JSON.stringify(e)),JSON.parse(JSON.stringify(t))),!(e=e.body||{}).hasOwnProperty("seatbid"))return[];if("object"!==is(e.seatbid))return[];var d=[],l=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");(0,r.PN)("enhancedAdserverTargeting",l),void 0===l&&(l=!0),(0,r.PN)("enhancedAdserverTargeting",l),e.seatbid=function(e){(0,r.PN)("injectAdIdsIntoAllBidResponses",e);for(var t=0;t<e.length;t++)for(var n=e[t],i=0;i<n.bid.length;i++)n.bid[i].adId="".concat(n.bid[i].impid,"-").concat(t,"-").concat(ls.propertyBag.whitelabel.keyPrefix,"-").concat(i);return e}(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);for(var u=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),c="number"==typeof u,p=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),h=(0,r.kJ)(p)&&p.length>0,f=0;f<e.seatbid.length;f++)for(var g=e.seatbid[f],m=function(i){var m=n.getBidRequestForBidId(g.bid[i].impid,t.bidderRequest.bids);(0,r.PN)("seatbid:".concat(f,", bid:").concat(i," Going to set default w h for seatbid/bidRequest"),g.bid[i],m);var v=cs(m),y=v.defaultWidth,b=v.defaultHeight,_=gs(g.bid[i],y,b);_.meta={advertiserDomains:_.adomain||[]};var T=null,w=!1,S=(0,a.Z)(_,"ext.prebid.type");(0,r.PN)("this bid type is : ".concat(S),i),S===I.pX&&(w=!0,"outstream"===(T=n.getVideoContextForBidId(_.bidId,t.bidderRequest.bids))?((0,r.PN)("going to attach a renderer to OUTSTREAM video : ",i),_.renderer=vs(_.bidId)):(0,r.PN)("bid is not an outstream video, will not attach a renderer: ",i));var k={};if(l){var C=hs(_.bidId,e.seatbid);(0,r.PN)("Going to iterate allBidsForThisBidId",C),Object.keys(C).forEach((function(e,t,n){(0,r.PN)("adding adserverTargeting for ".concat(e," for bidId ").concat(_.bidId)),k[s+"_"+e]=e,k[s+"_"+e+"_crid"]=String(C[e].crid),k[s+"_"+e+"_adv"]=String(C[e].adomain),k[s+"_"+e+"_adId"]=String(C[e].adId),k[s+"_"+e+"_pb_r"]=fs(C[e].price,C[e].ext.prebid.type),C[e].hasOwnProperty("dealid")&&(k[s+"_"+e+"_dealid"]=String(C[e].dealid)),c&&(k[s+"_"+e+"_omp"]=C[e].price>=u?"1":"0"),w&&(k[s+"_"+e+"_vid"]=T);var i=(0,a.Z)(C[e],"ext.bidder.".concat(o,".floor"),null);null!=i&&(k[s+"_"+e+"_flr"]=i);var d=(0,a.Z)(C[e],"ext.bidder.".concat(o,".ruleId"),null);null!=d&&(k[s+"_"+e+"_rid"]=d),e.match(/^ozappnexus/)&&(k[s+"_"+e+"_sid"]=String(C[e].cid))}))}else h?(0,r.yN)("You have set a whitelist of adserver keys but this will be ignored because ".concat(o,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.")):(0,r.PN)("".concat(o,".enhancedAdserverTargeting is set to false, so no per-bid keys will be sent to adserver."));var E=ps(_.bidId,e.seatbid),A=E.seat,P=E.bid;k[s+"_auc_id"]=String(t.bidderRequest.auctionId),k[s+"_winner"]=String(A),k[s+"_bid"]="true",l&&(k[s+"_imp_id"]=String(P.impid),k[s+"_pb_v"]=ds,k[s+"_pb"]=P.price,k[s+"_pb_r"]=fs(P.price,S),k[s+"_adId"]=String(P.adId),k[s+"_size"]="".concat(P.width,"x").concat(P.height)),h&&((0,r.PN)("Going to filter out adserver targeting keys not in the whitelist: ",p),Object.keys(k).forEach((function(e){-1===p.indexOf(e)&&delete k[e]}))),_.adserverTargeting=k,d.push(_)},v=0;v<g.bid.length;v++)m(v);var y=(new Date).getTime();return(0,r.PN)("interpretResponse going to return at time ".concat(y," (took ").concat(y-i,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(y-this.propertyBag.buildRequestsStart,"ms"),d),d},getWhitelabelConfigItem:function(e){if("ozone"==this.propertyBag.whitelabel.bidder)return p.vc.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder);return t=t.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_"),p.vc.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],n=0;n<e.length;n++){for(var i=e[n],a={seat:i.seat,bid:[]},o=[],s=0;s<i.bid.length;s++){var d=i.bid[s];if(!(0,r.r3)(o,d.impid)){o.push(d.impid);for(var l=s+1;l<i.bid.length;l++)i.bid[l].impid===d.impid&&i.bid[l].price>d.price&&(d=i.bid[l]);a.bid.push(d)}}t.push(a)}return t},getUserSyncs:function(e,t,n,i){if((0,r.PN)("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",n,"usPrivacy",i,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];if(e.iframeEnabled){var o=[];for(var s in document.location.search.match(/pbjs_debug=true/)&&o.push("pbjs_debug=true"),o.push("gdpr="+((0,a.Z)(n,"gdprApplies",!1)?"1":"0")),o.push("gdpr_consent="+(0,a.Z)(n,"consentString","")),o.push("usp_consent="+(i||"")),this.cookieSyncBag.userIdObject)o.push(s+"="+this.cookieSyncBag.userIdObject[s]);o.push("publisherId="+this.cookieSyncBag.publisherId),o.push("siteId="+this.cookieSyncBag.siteId),o.push("cb="+Date.now()),o.push("bidder="+this.propertyBag.whitelabel.bidder);var d=o.join("&");return d.length>0&&(d="?"+d),(0,r.PN)("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+d),[{type:"iframe",url:this.getCookieSyncUrl()+d}]}},getBidRequestForBidId:function(e,t){for(var n=0;n<t.length;n++)if(t[n].bidId===e)return t[n];return null},getVideoContextForBidId:function(e,t){var n=this.getBidRequestForBidId(e,t);return null!=n?(0,a.Z)(n,"mediaTypes.video.context","unknown"):null},findAllUserIds:function(e){var t={},n=["pubcid","tdid","idl_env","criteoId","lotamePanoramaId","fabrickId"];if(e.hasOwnProperty("userId")){for(var i in n){var o=n[i];e.userId.hasOwnProperty(o)&&("string"==typeof e.userId[o]?t[o]=e.userId[o]:"object"==is(e.userId[o])?((0,r.H)("WARNING: findAllUserIds had to use first key in user object to get value for bid.userId key: ".concat(o,". Prebid adapter should be updated.")),t[o]=e.userId[o][Object.keys(e.userId[o])[0]]):(0,r.H)("failed to get string key value for userId : ".concat(o)))}var s=(0,a.Z)(e.userId,"lipb.lipbid");s&&(t.lipb={lipbid:s});var d=(0,a.Z)(e.userId,"id5id.uid");d&&(t.id5id=d);var l=(0,a.Z)(e.userId,"parrableId.eid");l&&(t.parrableId=l);var u=(0,a.Z)(e.userId,"sharedid.id");u&&(t.sharedid=u);var c=(0,a.Z)(e.userId,"sharedid.third");c&&(t.sharedidthird=c)}if(!t.hasOwnProperty("pubcid")){var p=(0,a.Z)(e,"crumbs.pubcid");p&&(t.pubcid=p)}return t},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest")){if(this.isValidPlacementId(t[e+"storedrequest"]))return(0,r.PN)("using GET ".concat(e,"storedrequest ")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];(0,r.H)("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"))}return null},generateEids:function(e){var t,n=e[0];return n&&n.userId&&(t=n.userIdAsEids,this.handleTTDId(t,e)),t},handleTTDId:function(e,t){var n=null,i=p.vc.getConfig("adsrvrOrgId");(0,r.d8)((0,a.Z)(t,"0.userId.tdid"))?n=t[0].userId.tdid:i&&(0,r.d8)(i.TDID)&&(n=i.TDID),null!==n&&e.push({source:"adserver.org",uids:[{id:n,atype:1,ext:{rtiPartner:"TDID"}}]})},getGetParametersAsObject:function(){for(var e=location.search.substr(1).split("&"),t={},n=null,i=0;i<e.length;i++)t[(n=e[i].split("="))[0]]=n[1];return t},blockTheRequest:function(){var e=this.getWhitelabelConfigItem("ozone.oz_request");return"boolean"==typeof e&&!e&&((0,r.yN)("Will not allow auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"one.").concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=(new Date).getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var n={ext:{}};return n=this._unpackVideoConfigIntoIABformat(n,e),this._unpackVideoConfigIntoIABformat(n,t)},_unpackVideoConfigIntoIABformat:function(e,t){var n=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],i=function(i){o=!1,n.forEach((function(n){n===i&&(e[i]=t[i],o=!0)})),o||(e.ext[i]=t[i])};for(var a in t){var o;i(a)}return t.hasOwnProperty("ext")&&"object"===is(t.ext)&&(t.hasOwnProperty("ext")?e.ext=(0,r.Ee)(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults:function(e,t,n){return e=this._addVideoDefaults(e,t,!1),this._addVideoDefaults(e,n,!0)},_addVideoDefaults:function(e,t,n){var i=(0,a.Z)(t,"context");"outstream"===i?e.placement=3:"instream"===i&&(e.placement=1);var r=(0,a.Z)(t,"skippable",null);return null==r?n&&!e.hasOwnProperty("skip")&&(e.skip=r?1:0):e.skip=r?1:0,e}};function us(e){return Array.isArray(e)&&Array.isArray(e[0])?e[0]:e}function cs(e){if(!e)return(0,r.PN)("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,n={};return n.defaultWidth=us(t)[0],n.defaultHeight=us(t)[1],n}function ps(e,t){for(var n=null,i=null,r=0;r<t.length;r++)for(var a=t[r].bid,o=t[r].seat,s=0;s<a.length;s++)if(a[s].impid===e&&(null==n||n.price<a[s].price)){n=a[s],i=o;break}return{seat:i,bid:n}}function hs(e,t){for(var n={},i=0;i<t.length;i++)for(var r=t[i].bid,a=t[i].seat,o=0;o<r.length;o++)r[o].impid===e&&(n.hasOwnProperty(a)?n[a].price<r[o].price&&(n[a]=r[o]):n[a]=r[o]);return n}function fs(e,t){var n=p.vc.getConfig("mediaTypePriceGranularity.".concat(t)),i=p.vc.getConfig("customPriceBucket"),a=p.vc.getConfig("priceGranularity"),o=function(e,t,n,i){return"object"===is(t)?t:"custom"===n?i:""}(0,n,a,i),s=function(e,t,n){return"string"==typeof t?t:"object"===is(t)?"custom":"string"==typeof n?n:"auto"}(0,n,a);(0,r.PN)("getRoundedBid. price:",e,"mediaType:",t,"configkey:",s,"configObject:",o,"mediaTypeGranularity:",n,"strBuckets:",a);var d=(0,ho.D)(e,o,p.vc.getConfig("currency.granularityMultiplier"));(0,r.PN)("priceStringsObj",d);var l={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(l.hasOwnProperty(s)){var u=l[s];return(0,r.PN)("getRoundedBid: looking for priceStringsKey:",u),d[u]}return d.auto}function gs(e,t,n){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||n,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function ms(e){(0,r.PN)("getPlayerSizeFromObject received object",e);var t=(0,a.Z)(e,"playerSize");return t||(t=(0,a.Z)(e,"ext.playerSize")),t?"object"!==is(t)?((0,r.H)("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:((0,r.H)("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function vs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=window.ozoneVideo;(0,r.PN)("newRenderer going to set loaded to ".concat(n?"true":"false"));var i=c.Th.install({url:ls.getRendererUrl(),config:t,loaded:n,adUnitCode:e});try{i.setRender(ys)}catch(e){(0,r.H)("Prebid Error when calling setRender on renderer",JSON.parse(JSON.stringify(i)),e)}return i}function ys(e){(0,r.PN)("outstreamRender called. Going to push the call to window.ozoneVideo.outstreamRender(bid) bid =",JSON.parse(JSON.stringify(e))),e.renderer.push((function(){window.ozoneVideo.outstreamRender(e)}))}function bs(e){return function(e){if(Array.isArray(e))return _s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return _s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,Ue.dX)(ls),(0,r.PN)("*BidAdapter ".concat(ds," was loaded")),window.pbjs.installedModules.push("ozoneBidAdapter");var Ts="permutive",ws=(0,de.df)({gvlid:null,moduleName:Ts});function Ss(e){return(0,r.Ee)({waitForIt:!1,params:{maxSegs:500,acBidders:[],overwrites:{}}},e)}function ks(e,t,n){var o=e&&e.adUnits||(0,i.R)().adUnits,s={deepSetValue:rt,deepAccess:a.Z,isFn:r.LQ,mergeDeep:r.Ee},d={appnexusAst:"appnexus"};o&&o.forEach((function(e){e.bids.forEach((function(e){var i=e.bidder;void 0!==d[i]&&(i=d[i]);var o=function(e,t){var n=(0,a.Z)(e,"params.acBidders")||[];return(0,u.q9)(n,t)}(t,i),l=function(e,t){var n=(0,a.Z)(e,"params.overwrites.".concat(t));return n&&(0,r.LQ)(n)?n:null}(t,i),c=function(e){var t={appnexus:function(e,t,n){return n&&t.ac&&t.ac.length&&rt(e,"params.keywords.p_standard",t.ac),t.appnexus&&t.appnexus.length&&rt(e,"params.keywords.permutive",t.appnexus),e},rubicon:function(e,t,n){return n&&t.ac&&t.ac.length&&rt(e,"params.visitor.p_standard",t.ac),t.rubicon&&t.rubicon.length&&rt(e,"params.visitor.permutive",t.rubicon),e},ozone:function(e,t,n){return n&&t.ac&&t.ac.length&&rt(e,"params.customData.0.targeting.p_standard",t.ac),e}};return t[e]}(i);l?l(e,n,o,s,c):c&&c(e,n,o)}))}))}function Is(e){try{e()}catch(e){(0,r.H)(e)}}function Cs(e){var t=Es("_psegs").map(Number).filter((function(e){return e>=1e6})).map(String),n=Es("_ppam"),i=Es("_pcrprs"),r={ac:[].concat(bs(i),bs(n),bs(t)),rubicon:Es("_prubicons"),appnexus:Es("_papns"),gam:Es("_pdfps")};for(var a in r)r[a]=r[a].slice(0,e);return r}function Es(e){try{return JSON.parse(ws.getDataFromLocalStorage(e)||"[]")}catch(e){return[]}}var As="_unknown_",Ps={iab:function(e,t){return{name:e.name,ext:{segtax:t.segtax},segment:(e.segment||[]).map((function(e){return{id:(n=e.id,i=t.iabIds,i[n]||As)};var n,i})).filter((function(e){return e.id!==As}))}}},xs={name:Ts,getBidRequestData:function(e,t,n){Is((function(){!function(e,t,n){var i=void 0!==window.permutive&&"function"==typeof window.permutive.ready,r=Ss(n),a=Cs(r.params.maxSegs);ks(e,r,a),r.waitForIt&&i?window.permutive.ready((function(){ks(e,r,a),t()}),"realtime"):t()}(e,t,n)}))},onAuctionInitEvent:function(e,t){Is((function(){!function(e,t){var n=p.vc.getBidderConfig(),i=Ss(t),o=(0,a.Z)(i,"params.acBidders"),s=(0,a.Z)(i,"params.maxSegs"),d=(0,a.Z)(i,"params.transformations")||[],l=Cs(s);o.forEach((function(e){var t=function(e,t,n){var i="permutive.com",o={name:i,segment:t.map((function(e){return{id:e}}))},s=n.filter((function(e){var t=e.id;return Ps.hasOwnProperty(t)})).map((function(e){var t=e.id,n=e.config;return Ps[t](o,n)})),d=(0,r.Ee)({},e);return rt(d,"ortb2.user.data",((0,a.Z)(d,"ortb2.user.data")||[]).filter((function(e){return e.name!==i})).concat(o,s)),d}(n[e]||{},l.ac,d);p.vc.setBidderConfig({bidders:[e],config:t})}))}(0,t)}))},init:function(e,t){return!0}};(0,C.Bx)("realTimeData",xs),window.pbjs.installedModules.push("permutiveRtdProvider");var Os=n(2435),Ds={appnexus:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.adnxs.com/pbs/v1/cookie_sync",noP1Consent:"https://prebid.adnxs-simple.com/pbs/v1/cookie_sync"},timeout:1e3},appnexuspsp:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://ib.adnxs.com/openrtb2/prebid",noP1Consent:"https://ib.adnxs-simple.com/openrtb2/prebid"},timeout:1e3},rubicon:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction",noP1Consent:"https://prebid-server.rubiconproject.com/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid-server.rubiconproject.com/cookie_sync",noP1Consent:"https://prebid-server.rubiconproject.com/cookie_sync"},timeout:500},openx:{adapter:"prebidServer",enabled:!0,endpoint:{p1Consent:"https://prebid.openx.net/openrtb2/auction",noP1Consent:"https://prebid.openx.net/openrtb2/auction"},syncEndpoint:{p1Consent:"https://prebid.openx.net/cookie_sync",noP1Consent:"https://prebid.openx.net/cookie_sync"},timeout:1e3}};function Rs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rs(Object(n),!0).forEach((function(t){Ms(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Us(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function js(){return js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},js.apply(this,arguments)}function Ns(e){return Ns="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ns(e)}var Bs,Fs,qs=p.vc.getConfig,Vs=d.os.YZ,Hs=0,zs={bidders:Object.freeze([]),timeout:1e3,syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{}};function Ws(e,t){if(0!==e.length){var n=e.shift();n.no_cookie?function(e,t,n,i,a){a.syncUrlModifier&&"function"==typeof a.syncUrlModifier[n]&&(t=a.syncUrlModifier[n](e,t,n)),function(e,t,n,i,a){t?"image"===e||"redirect"===e?((0,r.ji)('Invoking image pixel user sync for bidder: "'.concat(n,'"')),(0,r.hq)(t,i,a)):"iframe"===e?((0,r.ji)('Invoking iframe user sync for bidder: "'.concat(n,'"')),(0,r.Vs)(t,i,a)):((0,r.H)('User sync type "'.concat(e,'" not supported for bidder: "').concat(n,'"')),i()):((0,r.H)('No sync url for bidder "'.concat(n,'": ').concat(t)),i())}(e,t,n,i,a.syncTimeout)}(n.usersync.type,n.usersync.url,n.bidder,r.ak.call(Ws,null,e,t),t):Ws(e,t)}}p.vc.setDefaults({s2sConfig:zs}),qs("s2sConfig",(function(e){return function(e){if(e){var t=Array.isArray(e)?e:[e],n=[];return t.every((function(t,i,a){!function(e){["endpoint","syncEndpoint"].forEach((function(t){if((0,r.d8)(e[t])){var n=e[t];e[t]={p1Consent:n,noP1Consent:n}}!(0,r.PO)(e[t])||e[t].p1Consent&&e[t].noP1Consent||["p1Consent","noP1Consent"].forEach((function(n){e[t][n]||(0,r.yN)("s2sConfig.".concat(t,".").concat(n," not defined.  PBS request will be skipped in some P1 scenarios."))}))}))}(e);var o=function(e){if(e.defaultVendor){var t=e.defaultVendor,n=Object.keys(e);if(!Ds[t])return(0,r.H)("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(Ds[t]).forEach((function(i){zs[i]!==e[i]&&(0,u.q9)(n,i)||(e[i]=Ds[t][i])}))}return e.enabled="boolean"==typeof e.enabled&&e.enabled}(t);if(!1!==o){var s=function(e){var t=Object.keys(e);if(["accountId","endpoint"].filter((function(e){return!(0,u.q9)(t,e)&&((0,r.H)(e+" missing in server to server config"),!0)})).length>0)return!1}(t);if(!1!==s)return Array.isArray(t.bidders)&&(a[i].bidders=t.bidders.filter((function(e){return-1===n.indexOf(e)&&(n.push(e),!0)}))),!0}return(0,r.yN)("prebidServer: s2s config is disabled"),!1}))?Bs=t:void 0}}(e.s2sConfig)}));var $s={sponsoredBy:1,body:2,rating:3,likes:4,downloads:5,price:6,salePrice:7,phone:8,address:9,body2:10,cta:12},Gs=Object.keys($s),Ks={icon:1,image:3},Xs={img:1,js:2};[$s,Ks,{impression:1,"viewable-mrc50":2,"viewable-mrc100":3,"viewable-video50":4},Xs].forEach((function(e){Object.keys(e).forEach((function(t){e[e[t]]=t}))}));var Zs={},Ys={};function Js(e,t,n,i){this.s2sBidRequest=e,this.bidderRequests=t,this.adUnits=n,this.s2sConfig=e.s2sConfig,this.requestedBidders=i,this.bidIdMap={},this.adUnitsByImp={},this.impRequested={},this.auctionId=t.map((function(e){return e.auctionId})).reduce((function(e,t){return(null==e||e===t)&&t})),this.requestTimestamp=(0,r.AB)()}function Qs(e){var t,n,i=function(e,t){if([e,t].every(r.d8))return Ys["".concat(e).concat(t)]}(e.auctionId,e.adId);(0,r.d8)(i)&&((0,r.ji)('Invoking image pixel for wurl on BID_WIN: "'.concat(i,'"')),(0,r.hq)(i),[t=e.auctionId,n=e.adId].every(r.d8)&&(Ys["".concat(t).concat(n)]=void 0))}function ed(e,t){return function(e){var t=!0;return e&&e.gdprApplies&&2===e.apiVersion&&(t=!(!0!==(0,a.Z)(e,"vendorData.purpose.consents.1"))),t}(t)?e.p1Consent:e.noP1Consent}function td(e){var t,n;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,n=e[0].uspConsent),{gdprConsent:t,uspConsent:n}}js(Js.prototype,{buildRequest:function(){var e=this,t=this.s2sBidRequest,n=this.bidderRequests,o=this.adUnits,s=this.s2sConfig,d=this.requestedBidders,l=[],c={},h=n[0],f=new Set;if(o.forEach((function(t){t.bids.forEach((function(e){null!=e.mediaTypes&&(0,r.yN)("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(t.code,", bidder: ").concat(e.bidder))}));for(var o=t.code,d=1;f.has(o);)d++,o="".concat(t.code,"-").concat(d);f.add(o),e.adUnitsByImp[o]=t;var g,m=t.nativeParams;if(m){var v=-1;try{g=Zs[o]=Object.keys(m).reduce((function(e,t){var n=m[t];function i(e){return v++,js({required:n.required?1:0,id:(0,r.hj)(n.id)?v=n.id:v},e?(0,r.fz)(e):{})}switch(t){case"image":case"icon":var o=Ks[t],s=(0,r.fz)({type:o,w:(0,a.Z)(n,"sizes.0"),h:(0,a.Z)(n,"sizes.1"),wmin:(0,a.Z)(n,"aspect_ratios.0.min_width"),hmin:(0,a.Z)(n,"aspect_ratios.0.min_height")});if(!(s.w&&s.h||s.hmin&&s.wmin))throw"invalid img sizes (must provide sizes or min_height & min_width if using aspect_ratios)";if(Array.isArray(n.aspect_ratios)){var d=n.aspect_ratios.filter((function(e){return e.ratio_width&&e.ratio_height})).map((function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)}));d.length>0&&(s.ext={aspectratios:d})}e.push(i({img:s}));break;case"title":if(!n.len)throw"invalid title.len";e.push(i({title:{len:n.len}}));break;default:var l=$s[t];l&&e.push(i({data:{type:l,len:n.len}}))}return e}),[])}catch(e){(0,r.H)("error creating native request: "+String(e))}}var y=(0,a.Z)(t,"mediaTypes.video"),b=(0,a.Z)(t,"mediaTypes.banner");t.bids.forEach((function(t){if(e.setBidRequestId(o,t.bidder,t.bid_id),le.ZP.aliasRegistry[t.bidder]){var n=le.ZP.bidderRegistry[t.bidder];n&&!n.getSpec().skipPbsAliasing&&(c[t.bidder]=le.ZP.aliasRegistry[t.bidder])}}));var _={};if(b&&b.sizes){var T=(0,r.sF)(b.sizes).map((function(e){var t=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Us(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Us(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e.split("x"),2),n=t[0],i=t[1];return{w:parseInt(n,10),h:parseInt(i,10)}}));_.banner={format:T},b.pos&&(_.banner.pos=b.pos)}if((0,r.xb)(y)||("outstream"!==y.context||y.renderer||t.renderer?("instream"!==y.context||y.hasOwnProperty("placement")||(y.placement=1),_.video=Object.keys(y).filter((function(e){return"context"!==e})).reduce((function(e,t){return"playerSize"===t?(e.w=(0,a.Z)(y,"".concat(t,".0.0")),e.h=(0,a.Z)(y,"".concat(t,".0.1"))):e[t]=y[t],e}),{})):(0,r.H)("Outstream bid without renderer cannot be sent to Prebid Server.")),g)try{_.native={request:JSON.stringify({context:1,plcmttype:1,eventtrackers:[{event:1,methods:[1]}],assets:g}),ver:"1.2"}}catch(e){(0,r.H)("error creating native request: "+String(e))}var w=t.bids.reduce((function(e,i){if(null==i.bidder)return e;var r=le.ZP.bidderRegistry[i.bidder];return r&&r.getSpec().transformBidParams&&(i.params=r.getSpec().transformBidParams(i.params,!0,t,n)),e[i.bidder]=s.adapterOptions&&s.adapterOptions[i.bidder]?js({},i.params,s.adapterOptions[i.bidder]):i.params,e}),Ls({},(0,a.Z)(t,"ortb2Imp.ext"))),S=Ls(Ls({},t.ortb2Imp),{},{id:o,ext:w,secure:s.secure}),k=Ls({},(0,a.Z)(t,"ortb2Imp.ext.data"));Object.keys(k).forEach((function(e){"pbadslot"===e?"string"==typeof k[e]&&k[e]?rt(S,"ext.data.pbadslot",k[e]):delete S.ext.data.pbadslot:"adserver"===e?["name","adslot"].forEach((function(e){var t=(0,a.Z)(k,"adserver.".concat(e));"string"==typeof t&&t&&rt(S,"ext.data.adserver.".concat(e.toLowerCase()),t)})):rt(S,"ext.data.".concat(e),k[e])})),(0,r.Ee)(S,_);var I=(0,u.sE)(h.bids,(function(e){return e.adUnitCode===t.code&&e.storedAuctionResponse}));I&&rt(S,"ext.prebid.storedauctionresponse.id",I.storedAuctionResponse.toString());var C,E,A=(C="function"!=typeof(0,i.R)().convertCurrency?function(e){return e}:function(e,t,n){if(t===n)return e;var r=null;try{r=(0,i.R)().convertCurrency(e,t,n)}catch(e){}return r},E=p.vc.getConfig("currency.adServerCurrency")||"USD",t.bids.map((function(t){return e.getBidRequest(S.id,t.bidder)})).map((function(e){if(e&&"function"==typeof e.getFloor)try{var t=e.getFloor({currency:E}),n=t.currency,i=t.floor;return{currency:n,floor:parseFloat(i)}}catch(e){(0,r.H)("PBS: getFloor threw an error: ",e)}})).reduce((function(e,t){if((null==t||null==t.currency||null==t.floor||isNaN(t.floor))&&(e.min=null),null===e.min)return e;if(null==e.ref)e.ref=e.min=t;else{var n=C(t.floor,t.currency,e.ref.currency);null!=n&&n<e.ref.floor&&(e.ref.floor=n,e.min=t)}return e}),{}).min);A&&(S.bidfloor=A.floor,S.bidfloorcur=A.currency),(S.banner||S.video||S.native)&&l.push(S)})),l.length){var g={id:h.auctionId,source:{tid:t.tid},tmax:s.timeout,imp:l,test:0,ext:{prebid:{auctiontimestamp:h.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}}}};"object"===Ns((0,a.Z)(h,"bids.0.floorData"))&&(g.ext.prebid.floors={enabled:!1}),g.ext.prebid=js(g.ext.prebid,{channel:{name:"pbjs",version:pbjs.version}}),qs("debug")&&(g.ext.prebid=js(g.ext.prebid,{debug:!0})),s.extPrebid&&"object"===Ns(s.extPrebid)&&(g.ext.prebid=(0,r.Ee)(g.ext.prebid,s.extPrebid));var m=p.vc.getConfig("currency.adServerCurrency");m&&"string"==typeof m?g.cur=[m]:Array.isArray(m)&&m.length&&(g.cur=[m[0]]),function(e,t,n){e&&("object"===Ns(p.vc.getConfig("app"))?(e.app=p.vc.getConfig("app"),e.app.publisher={id:n}):(e.site={},(0,r.PO)(p.vc.getConfig("site"))&&(e.site=p.vc.getConfig("site")),(0,a.Z)(e.site,"publisher.id")||rt(e.site,"publisher.id",n),e.site.page||(e.site.page=t)),"object"===Ns(p.vc.getConfig("device"))&&(e.device=p.vc.getConfig("device")),e.device||(e.device={}),e.device.w||(e.device.w=window.innerWidth),e.device.h||(e.device.h=window.innerHeight))}(g,n[0].refererInfo.referer,s.accountId);var v=(0,a.Z)(n,"0.bids.0.schain");v&&(g.source.ext={schain:v}),(0,r.xb)(c)||(g.ext.prebid.aliases=Ls(Ls({},g.ext.prebid.aliases),c));var y=(0,a.Z)(n,"0.bids.0.userIdAsEids");(0,r.kJ)(y)&&y.length>0&&rt(g,"user.ext.eids",y),(0,r.kJ)(Fs)&&Fs.length>0&&(d&&(0,r.kJ)(d)&&Fs.forEach((function(e){e.bidders&&(e.bidders=e.bidders.filter((function(e){return(0,u.q9)(d,e)})))})),rt(g,"ext.prebid.data.eidpermissions",Fs));var b,_=p.vc.getConfig("multibid");if(_&&rt(g,"ext.prebid.multibid",_.reduce((function(e,t){var n={};return Object.keys(t).forEach((function(e){n[e.toLowerCase()]=t[e]})),e.push(n),e}),[])),n)h.gdprConsent&&("boolean"==typeof h.gdprConsent.gdprApplies&&(b=h.gdprConsent.gdprApplies?1:0),rt(g,"regs.ext.gdpr",b),rt(g,"user.ext.consent",h.gdprConsent.consentString),h.gdprConsent.addtlConsent&&"string"==typeof h.gdprConsent.addtlConsent&&rt(g,"user.ext.ConsentedProvidersSettings.consented_providers",h.gdprConsent.addtlConsent)),h.uspConsent&&rt(g,"regs.ext.us_privacy",h.uspConsent);!0===qs("coppa")&&rt(g,"regs.coppa",1);var T=qs("ortb2")||{};return(0,r.Ee)(g,T),function(e){var t=p.vc.getBidderConfig(),n=Object.keys(t).reduce((function(e,n){var i=t[n];if(i.ortb2){var a=(0,r.Ee)({},i.ortb2);e.push({bidders:[n],config:{ortb2:a}})}return e}),[]);n.length&&rt(e,"ext.prebid.bidderconfig",n)}(g),g.imp.forEach((function(t){return e.impRequested[t.id]=t})),g}(0,r.H)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},interpretResponse:function(e){var t=this,n=this.bidderRequests,i=this.s2sConfig,o=[];return[["errors","serverErrors"],["responsetimemillis","serverResponseTimeMs"]].forEach((function(t){return function(e,t,n,i){var r=(0,a.Z)(t,"ext.".concat(n));r&&Object.keys(r).forEach((function(t){var n=(0,u.sE)(e,(function(e){return e.bidderCode===t}));n&&(n[i]=r[t])}))}(n,e,t[0],t[1])})),e.seatbid&&e.seatbid.forEach((function(n){(n.bid||[]).forEach((function(s){var l=t.getBidRequest(s.impid,n.seat);if(null==l){if(!i.allowUnknownBidderCodes)return void(0,r.yN)("PBS adapter received bid from unknown bidder (".concat(n.seat,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid."));l=t.getBidRequest(s.impid,null)}var u=s.price,c=0!==u?d.Q_.Q:d.Q_.H,p=(0,se.m)(c,{bidder:n.seat,src:Vs,bidId:l?l.bidId||l.bid_Id:null,transactionId:t.adUnitsByImp[s.impid].transactionId,auctionId:t.auctionId});p.requestTimestamp=t.requestTimestamp,p.cpm=u;var h=(0,a.Z)(e,["ext","responsetimemillis",n.seat].join("."));l&&h&&(l.serverResponseTimeMs=h);var f,g,m,v=(0,a.Z)(s,"ext.prebid.bidid");(0,r.d8)(v)&&(p.pbsBidId=v),(0,r.d8)((0,a.Z)(s,"ext.prebid.events.win"))&&(f=t.auctionId,g=p.adId,m=(0,a.Z)(s,"ext.prebid.events.win"),[f,g].every(r.d8)&&(Ys["".concat(f).concat(g)]=m));var y=(0,a.Z)(s,"ext.prebid.targeting");if((0,r.PO)(y)&&((0,r.d8)((0,a.Z)(s,"ext.prebid.events.win"))&&(y=(0,r.iG)(y,Object.keys(y).filter((function(e){return-1===e.indexOf("hb_winurl")&&-1===e.indexOf("hb_bidid")})))),p.adserverTargeting=y),p.seatBidId=s.id,(0,a.Z)(s,"ext.prebid.type")===I.pX){p.mediaType=I.pX;var b=t.impRequested[s.impid],_=[b.video.w,b.video.h];p.playerWidth=_[0],p.playerHeight=_[1],s.ext.prebid.cache&&"object"===Ns(s.ext.prebid.cache.vastXml)&&s.ext.prebid.cache.vastXml.cacheId&&s.ext.prebid.cache.vastXml.url?(p.videoCacheKey=s.ext.prebid.cache.vastXml.cacheId,p.vastUrl=s.ext.prebid.cache.vastXml.url):y&&y.hb_uuid&&y.hb_cache_host&&y.hb_cache_path&&(p.videoCacheKey=y.hb_uuid,p.vastUrl="https://".concat(y.hb_cache_host).concat(y.hb_cache_path,"?uuid=").concat(y.hb_uuid)),s.adm&&(p.vastXml=s.adm),!p.vastUrl&&s.nurl&&(p.vastUrl=s.nurl)}else if((0,a.Z)(s,"ext.prebid.type")===I.B5){var T,w;p.mediaType=I.B5,w="string"==typeof s.adm?p.adm=JSON.parse(s.adm):p.adm=s.adm;var S=(Ms(T={},Xs.img,w.imptrackers||[]),Ms(T,Xs.js,w.jstracker?[w.jstracker]:[]),T);if(w.eventtrackers&&w.eventtrackers.forEach((function(e){switch(e.method){case Xs.img:S[Xs.img].push(e.url);break;case Xs.js:S[Xs.js].push(e.url)}})),(0,r.PO)(w)&&Array.isArray(w.assets)){var k=Zs[s.impid];p.native=(0,r.fz)(w.assets.reduce((function(e,t){var n=k[t.id];return(0,r.PO)(t.img)?e[n.img.type?Ks[n.img.type]:"image"]=(0,r.ei)(t.img,["url","w as width","h as height"]):(0,r.PO)(t.title)?e.title=t.title.text:(0,r.PO)(t.data)&&Gs.forEach((function(i){$s[i]===n.data.type&&(e[i]=t.data.value)})),e}),(0,r.fz)({clickUrl:w.link,clickTrackers:(0,a.Z)(w,"link.clicktrackers"),impressionTrackers:S[Xs.img],javascriptTrackers:S[Xs.js]})))}else(0,r.H)("prebid server native response contained no assets")}else s.adm&&s.nurl?(p.ad=s.adm,p.ad+=(0,r.SG)(decodeURIComponent(s.nurl))):s.adm?p.ad=s.adm:s.nurl&&(p.adUrl=s.nurl);p.width=s.w,p.height=s.h,s.dealid&&(p.dealId=s.dealid),p.creative_id=s.crid,p.creativeId=s.crid,s.burl&&(p.burl=s.burl),p.currency=e.cur?e.cur:"USD",p.meta={};var C=(0,a.Z)(s,"ext.prebid.meta");C&&(0,r.PO)(C)&&(p.meta=(0,r.I8)(C)),s.adomain&&(p.meta.advertiserDomains=s.adomain);var E=i.defaultTtl||60;p.ttl=s.exp?s.exp:E,p.netRevenue=!s.netRevenue||s.netRevenue,o.push({adUnit:t.adUnitsByImp[s.impid].code,bid:p})}))})),o},setBidRequestId:function(e,t,n){this.bidIdMap[this.impBidderKey(e,t)]=n},getBidRequest:function(e,t){var n=this.impBidderKey(e,t);return this.bidIdMap[n]&&(0,r.zE)(this.bidIdMap[n],this.bidderRequests)},impBidderKey:function(e,t){return"".concat(e).concat(t)}});var nd=(0,C.z3)("sync",(function(e,t,n,i){var a=i.onResponse,o=i.onError,s=i.onBid,d=td(t).gdprConsent,l=(0,r.I8)(e.ad_units),c=l.map((function(e){return e.bids.map((function(e){return e.bidder})).filter(r.tT)})).reduce(r.xH,[]).filter(r.tT),p=new Js(e,t,l,c),h=p.buildRequest(),f=h&&JSON.stringify(h);(0,r.PN)("BidRequest: "+f);var g=ed(e.s2sConfig.endpoint,d);h&&f&&g?n(g,{success:function(e){var t;try{t=JSON.parse(e),p.interpretResponse(t).forEach(s)}catch(e){(0,r.H)(e)}!t||t.status&&(0,u.q9)(t.status,"Error")?((0,r.H)("error parsing response: ",t?t.status:"not valid JSON"),a(!1,c)):a(!0,c)},error:o},f,{contentType:"text/plain",withCredentials:!0}):(0,r.H)("PBS request not made.  Check endpoints.")}),"processPBSRequest");function id(){return id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},id.apply(this,arguments)}function rd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ad(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function od(e){return od="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},od(e)}(0,r.EE)().setEidPermissions=function(e){Fs=e},le.ZP.registerBidAdapter(new function(){var e=new Os.Z("prebidServer");return e.callBids=function(e,t,n,i,a){var s=td(t),l=s.gdprConsent,u=s.uspConsent;Array.isArray(Bs)&&(e.s2sConfig&&e.s2sConfig.syncEndpoint&&ed(e.s2sConfig.syncEndpoint,l)&&function(e,t,n,i){if(Bs.length!==Hs){Hs++;var a={uuid:(0,r.DO)(),bidders:e,account:i.accountId},o=i.userSyncLimit;(0,r.hj)(o)&&o>0&&(a.limit=o),t&&(a.gdpr=t.gdprApplies?1:0,!1!==t.gdprApplies&&(a.gdpr_consent=t.consentString)),n&&(a.us_privacy=n),"boolean"==typeof i.coopSync&&(a.coopSync=i.coopSync);var s=JSON.stringify(a);(0,fi.h)(ed(i.syncEndpoint,t),(function(e){try{Ws((e=JSON.parse(e)).bidder_status,i)}catch(e){(0,r.H)(e)}}),s,{contentType:"text/plain",withCredentials:!0})}}(e.s2sConfig.bidders.map((function(e){return le.ZP.aliasRegistry[e]||e})).filter((function(e,t,n){return n.indexOf(e)===t})),l,u,e.s2sConfig),nd(e,t,a,{onResponse:function(e,n){e&&t.forEach((function(e){return o.j8(d.FP.BIDDER_DONE,e)})),i(),function(e,t,n){e.forEach((function(e){var i=le.ZP.getBidAdapter(e);i&&i.registerSyncs&&p.vc.runWithBidder(e,r.ak.call(i.registerSyncs,i,[],t,n))}))}(n,l,u)},onError:i,onBid:function(e){var t=e.adUnit,i=e.bid;(0,Ue.JY)(t,i)&&n(t,i)}}))},o.on(d.FP.BID_WON,Qs),js(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:Vs})},"prebidServer"),window.pbjs.installedModules.push("prebidServerBidAdapter");var sd="PubMatic: ",dd="USD",ld=void 0,ud="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),cd={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},pd="number",hd="array",fd={mimes:hd,minduration:pd,maxduration:pd,startdelay:pd,playbackmethod:hd,api:hd,protocols:hd,w:pd,h:pd,battr:hd,linearity:pd,placement:pd,minbitrate:pd,maxbitrate:pd,skip:pd},gd={TITLE:{ID:1,KEY:"title",TYPE:0},IMAGE:{ID:2,KEY:"image",TYPE:0},ICON:{ID:3,KEY:"icon",TYPE:0},SPONSOREDBY:{ID:4,KEY:"sponsoredBy",TYPE:1},BODY:{ID:5,KEY:"body",TYPE:2},CLICKURL:{ID:6,KEY:"clickUrl",TYPE:0},VIDEO:{ID:7,KEY:"video",TYPE:0},EXT:{ID:8,KEY:"ext",TYPE:0},DATA:{ID:9,KEY:"data",TYPE:0},LOGO:{ID:10,KEY:"logo",TYPE:0},SPONSORED:{ID:11,KEY:"sponsored",TYPE:1},DESC:{ID:12,KEY:"data",TYPE:2},RATING:{ID:13,KEY:"rating",TYPE:3},LIKES:{ID:14,KEY:"likes",TYPE:4},DOWNLOADS:{ID:15,KEY:"downloads",TYPE:5},PRICE:{ID:16,KEY:"price",TYPE:6},SALEPRICE:{ID:17,KEY:"saleprice",TYPE:7},PHONE:{ID:18,KEY:"phone",TYPE:8},ADDRESS:{ID:19,KEY:"address",TYPE:9},DESC2:{ID:20,KEY:"desc2",TYPE:10},DISPLAYURL:{ID:21,KEY:"displayurl",TYPE:11},CTA:{ID:22,KEY:"cta",TYPE:12}},md=[{id:gd.SPONSOREDBY.ID,required:!0,data:{type:1}},{id:gd.TITLE.ID,required:!0},{id:gd.IMAGE.ID,required:!0}],vd={1:"PMP",5:"PREF",6:"PMPG"},yd={bootstrapPlayer:function(e){var t={code:e.adUnitCode};if(e.vastXml?t.vastXml=e.vastXml:e.vastUrl&&(t.vastUrl=e.vastUrl),e.vastXml||e.vastUrl){for(var n,i=yd.getRendererId("pubmatic",e.rendererCode),a=document.getElementById(e.adUnitCode),o=0;o<window.bluebillywig.renderers.length;o++)if(window.bluebillywig.renderers[o]._id===i){n=window.bluebillywig.renderers[o];break}n?n.bootstrap(t,a):(0,r.yN)("".concat(sd,": Couldn't find a renderer with ").concat(i))}else(0,r.yN)("".concat(sd,": No vastXml or vastUrl on bid, bailing..."))},newRenderer:function(e,t){var n=ud.replace("$RENDERER",e),i=c.Th.install({url:n,loaded:!1,adUnitCode:t});try{i.setRender(yd.outstreamRender)}catch(e){(0,r.yN)("".concat(sd,": Error tying to setRender on renderer"),e)}return i},outstreamRender:function(e){e.renderer.push((function(){yd.bootstrapPlayer(e)}))},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},bd=[I.Mk,I.pX,I.B5],_d=0,Td=!1,wd={},Sd={};function kd(e,t){if(!(0,r.d8)(t))return t&&(0,r.yN)("PubMatic: Ignoring param key: "+e+", expects string-value, found "+od(t)),ld;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map((function(e){return e.trim()})).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||ld;case"yob":return parseInt(t)||ld;default:return t}}function Id(e,t,n){var i,a="Ignoring param key: "+e+", expects "+n+", found "+od(t);switch(n){case"boolean":i=r.jn;break;case pd:i=r.hj;break;case"string":i=r.d8;break;case hd:i=r.kJ}return i(t)?t:((0,r.yN)(sd+a),ld)}function Cd(e,t){var n=e.KEY;return{id:e.ID,required:t[n].required?1:0,data:{type:e.TYPE,len:t[n].len,ext:t[n].ext}}}function Ed(e){var t={assets:[]};for(var n in e){if(e.hasOwnProperty(n)){var i={};if(!(t.assets&&t.assets.length>0&&t.assets.hasOwnProperty(n)))switch(n){case gd.TITLE.KEY:e[n].len||e[n].length?i={id:gd.TITLE.ID,required:e[n].required?1:0,title:{len:e[n].len||e[n].length,ext:e[n].ext}}:(0,r.yN)("PubMatic: Error: Title Length is required for native ad: "+JSON.stringify(e));break;case gd.IMAGE.KEY:e[n].sizes&&e[n].sizes.length>0?i={id:gd.IMAGE.ID,required:e[n].required?1:0,img:{type:3,w:e[n].w||e[n].width||(e[n].sizes?e[n].sizes[0]:ld),h:e[n].h||e[n].height||(e[n].sizes?e[n].sizes[1]:ld),wmin:e[n].wmin||e[n].minimumWidth||(e[n].minsizes?e[n].minsizes[0]:ld),hmin:e[n].hmin||e[n].minimumHeight||(e[n].minsizes?e[n].minsizes[1]:ld),mimes:e[n].mimes,ext:e[n].ext}}:(0,r.yN)("PubMatic: Error: Image sizes is required for native ad: "+JSON.stringify(e));break;case gd.ICON.KEY:e[n].sizes&&e[n].sizes.length>0?i={id:gd.ICON.ID,required:e[n].required?1:0,img:{type:1,w:e[n].w||e[n].width||(e[n].sizes?e[n].sizes[0]:ld),h:e[n].h||e[n].height||(e[n].sizes?e[n].sizes[1]:ld)}}:(0,r.yN)("PubMatic: Error: Icon sizes is required for native ad: "+JSON.stringify(e));break;case gd.VIDEO.KEY:i={id:gd.VIDEO.ID,required:e[n].required?1:0,video:{minduration:e[n].minduration,maxduration:e[n].maxduration,protocols:e[n].protocols,mimes:e[n].mimes,ext:e[n].ext}};break;case gd.EXT.KEY:i={id:gd.EXT.ID,required:e[n].required?1:0};break;case gd.LOGO.KEY:i={id:gd.LOGO.ID,required:e[n].required?1:0,img:{type:2,w:e[n].w||e[n].width||(e[n].sizes?e[n].sizes[0]:ld),h:e[n].h||e[n].height||(e[n].sizes?e[n].sizes[1]:ld)}};break;case gd.SPONSOREDBY.KEY:case gd.BODY.KEY:case gd.RATING.KEY:case gd.LIKES.KEY:case gd.DOWNLOADS.KEY:case gd.PRICE.KEY:case gd.SALEPRICE.KEY:case gd.PHONE.KEY:case gd.ADDRESS.KEY:case gd.DESC2.KEY:case gd.DISPLAYURL.KEY:case gd.CTA.KEY:i=Cd(Sd[n],e)}}i&&i.id&&(t.assets[t.assets.length]=i)}var a=md.length,o=0;return md.forEach((function(e){for(var n=t.assets.length,i=0;i<n;i++)if(e.id==t.assets[i].id){o++;break}})),Td=a!=o,t}function Ad(e){var t,n=e.mediaTypes.banner.sizes,i=[];if(n!==ld&&(0,r.kJ)(n)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===n.length)return t=ld,(0,r.yN)("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(n[0][0],10),t.h=parseInt(n[0][1],10),n=n.splice(1,n.length-1)}n.length>0&&(i=[],n.forEach((function(e){e.length>1&&i.push({w:e[0],h:e[1]})})),i.length>0&&(t.format=i)),t.pos=0,t.topframe=(0,r.yL)()?0:1}else(0,r.yN)("PubMatic: Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=ld;return t}function Pd(e){var t,n=(0,r.Ee)((0,a.Z)(e.mediaTypes,"video"),e.params.video);if(n!==ld){for(var i in t={},function(e,t){(0,a.Z)(e,"placement")||(0,r.yN)("Video.Placement param missing for "+t)}(n,e.adUnitCode),fd)n.hasOwnProperty(i)&&(t[i]=Id(i,n[i],fd[i]));(0,r.kJ)(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):(0,r.hj)(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=ld,(0,r.yN)("PubMatic: Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}function xd(e,t,n){var i=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,r="";if(void 0!==i&&""!==i&&i.hasOwnProperty("segments")){var a,o=i.segments.length;r+="jw-id="+i.content.id;for(var s=0;s<o;s++)r+="|jw-"+i.segments[s]+"=1";n?void 0===e.dctr||0==e.dctr.length?e.dctr=r:e.dctr+="|"+r:(a=e.ext)&&void 0===a.key_val?a.key_val=r:a.key_val+="|"+r}}function Od(e,t){var n=null,i=(0,a.Z)(e,"0.userId.flocId");return i&&i.id&&(n=2===t?{id:"FLOC",name:"FLOC",ext:{ver:i.version},segment:[{id:i.id,name:"chrome.com",value:i.id.toString()}]}:{source:"chrome.com",uids:[{atype:1,id:i.id,ext:{ver:i.version}}]}),n}function Dd(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,r.yN)("PubMatic: acat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){return n.indexOf(e)===t}))).length>0&&((0,r.yN)("PubMatic: acat: Selected: ",t),e.ext.acat=t)}function Rd(e){return!0===(0,r.kJ)(e)&&e.length>0}(0,r.yi)(gd,(function(e){wd[e.ID]=e.KEY})),(0,r.yi)(gd,(function(e){Sd[e.KEY]=e}));var Ld={code:"pubmatic",gvlid:76,supportedMediaTypes:[I.Mk,I.pX,I.B5],isBidRequestValid:function(e){if(e&&e.params){if(!(0,r.d8)(e.params.publisherId))return(0,r.yN)("PubMatic: Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(I.pX)){var t=(0,a.Z)(e.mediaTypes,"video.mimes"),n=(0,a.Z)(e,"params.video.mimes");if(!1===Rd(t)&&!1===Rd(n))return(0,r.yN)("PubMatic: Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[I.pX].hasOwnProperty("context"))return(0,r.H)("".concat(sd,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[I.pX].context&&!(0,r.d8)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[I.pX].hasOwnProperty("renderer"))return e.mediaTypes.hasOwnProperty(I.Mk)||e.mediaTypes.hasOwnProperty(I.B5)?(delete e.mediaTypes[I.pX],(0,r.yN)("".concat(sd,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e),!0):((0,r.H)("".concat(sd,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1)}return!0}return!1},buildRequests:function(e,t){var n,i,o,s,d;t&&t.refererInfo&&(d=t.refererInfo);var l,u=function(e){return{pageURL:e&&e.referer?e.referer:window.location.href,refURL:window.document.referrer}}(d),c=function(e){return{id:""+(new Date).getTime(),at:1,cur:[dd],imp:[],site:{page:e.pageURL,ref:e.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language},user:{},ext:{}}}(u),h="",f=[],g=[],m=[];if(e.forEach((function(e){if((l=(0,r.I8)(e)).params.adSlot=l.params.adSlot||"",function(e){var t;e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,(0,r.d8)(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&(0,r.yN)("pubmatic: adSlot must be a string. Ignoring adSlot"),""));var n=e.params.adSlot,i=n.split(":");if(n=i[0],2==i.length&&(e.params.adUnitIndex=i[1]),i=n.split("@"),e.params.adUnit=i[0],i.length>1){if(2!=(i=i[1].split("x")).length)return void(0,r.yN)("PubMatic: AdSlot Error: adSlot not in required format");e.params.width=parseInt(i[0],10),e.params.height=parseInt(i[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(I.Mk)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var a=0,o=[];a<e.mediaTypes.banner.sizes.length;a++)2===e.mediaTypes.banner.sizes[a].length&&o.push(e.mediaTypes.banner.sizes[a]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(l),l.mediaTypes&&l.mediaTypes.hasOwnProperty("video")||l.params.hasOwnProperty("video"));else if(!(l.hasOwnProperty("mediaTypes")&&l.mediaTypes.hasOwnProperty(I.B5)||0!==l.params.width||0!==l.params.height))return void(0,r.yN)("PubMatic: Skipping the non-standard adslot: ",l.params.adSlot,JSON.stringify(l));u.pubId=u.pubId||l.params.publisherId,(u=function(e,t){var n,i,a;for(n in t.kadpageurl||(t.kadpageurl=t.pageURL),cd)cd.hasOwnProperty(n)&&(i=e[n])&&("object"===od(a=cd[n])&&(i=a.f(i,t)),(0,r.d8)(i)?t[n]=i:(0,r.yN)("PubMatic: Ignoring param : "+n+" with value : "+cd[n]+", expects string-value, found "+od(i)));return t}(l.params,u)).transactionId=l.transactionId,""===h?h=l.params.currency||ld:l.params.hasOwnProperty("currency")&&h!==l.params.currency&&(0,r.yN)("PubMatic: Currency specifier ignored. Only one currency permitted."),l.params.currency=h,l.params.hasOwnProperty("dctr")&&(0,r.d8)(l.params.dctr)&&f.push(l.params.dctr),l.params.hasOwnProperty("bcat")&&(0,r.kJ)(l.params.bcat)&&(g=g.concat(l.params.bcat)),l.params.hasOwnProperty("acat")&&(0,r.kJ)(l.params.acat)&&(m=m.concat(l.params.acat));var t=function(e,t){var n,i,o={},s={},d=e.hasOwnProperty("sizes")?e.sizes:[],l="",u=[];if(function(e,t){t.params.deals&&((0,r.kJ)(t.params.deals)?t.params.deals.forEach((function(t){(0,r.d8)(t)&&t.length>3?(e.pmp||(e.pmp={private_auction:0,deals:[]}),e.pmp.deals.push({id:t})):(0,r.yN)("PubMatic: Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+t)})):(0,r.yN)("PubMatic: Error: bid.params.deals should be an array of strings."))}(o={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:kd("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:kd("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?kd("currency",e.params.currency):dd},e),function(e,t){var n,i="";if(t.params.dctr)if(i=t.params.dctr,(0,r.d8)(i)&&i.length>0){var a=i.split("|");i="",a.forEach((function(e){i+=e.length>0?e.trim()+"|":""})),n=i.length,"|"===i.substring(n,n-1)&&(i=i.substring(0,n-1)),e.ext.key_val=i.trim()}else(0,r.yN)("PubMatic: Ignoring param : dctr with value : "+i+", expects string-value, found empty or non-string value")}(o,e),xd(o,e),e.hasOwnProperty("mediaTypes"))for(l in e.mediaTypes)switch(l){case I.Mk:(n=Ad(e))!==ld&&(o.banner=n);break;case I.B5:s.request=JSON.stringify(Ed(e.nativeParams)),Td?(0,r.yN)("PubMatic: Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."):o.native=s;break;case I.pX:(i=Pd(e))!==ld&&(o.video=i)}else n={pos:0,w:e.params.width,h:e.params.height,topframe:(0,r.yL)()?0:1},(0,r.kJ)(d)&&d.length>1&&((d=d.splice(1,d.length-1)).forEach((function(e){u.push({w:e[0],h:e[1]})})),n.format=u),o.banner=n;return function(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rd(Object(n),!0).forEach((function(t){ad(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},(0,a.Z)(t,"ortb2Imp.ext.data"));Object.keys(n).forEach((function(t){"pbadslot"===t?"string"==typeof n[t]&&n[t]&&rt(e,"ext.data.pbadslot",n[t]):"adserver"===t?["name","adslot"].forEach((function(t){var i=(0,a.Z)(n,"adserver.".concat(t));"string"==typeof i&&i&&(rt(e,"ext.data.adserver.".concat(t.toLowerCase()),i),"adslot"===t&&rt(e,"ext.dfp_ad_unit_code",i))})):rt(e,"ext.data.".concat(t),n[t])}))}(o,e),function(e,t){var n=-1;"function"!=typeof t.getFloor||p.vc.getConfig("pubmatic.disableFloors")||[I.Mk,I.pX,I.B5].forEach((function(i){if(e.hasOwnProperty(i)){var a=[];"banner"===i&&(e[i].w&&e[i].h&&a.push([e[i].w,e[i].h]),(0,r.kJ)(e[i].format)&&e[i].format.forEach((function(e){return a.push([e.w,e.h])}))),0===a.length&&a.push("*"),a.forEach((function(a){var o=t.getFloor({currency:e.bidfloorcur,mediaType:i,size:a});if((0,r.PN)(sd,"floor from floor module returned for mediatype:",i," and size:",a," is: currency",o.currency,"floor",o.floor),"object"===od(o)&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){var s=parseFloat(o.floor);(0,r.PN)(sd,"floor from floor module:",s,"previous floor value",n,"Min:",Math.min(s,n)),n=-1===n?s:Math.min(s,n),(0,r.PN)(sd,"new floor value:",n)}}))}})),e.bidfloor&&((0,r.PN)(sd,"floor from floor module:",n,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(n,e.bidfloor)),n=Math.max(n,e.bidfloor)),e.bidfloor=!isNaN(n)&&n>0?n:ld,(0,r.PN)(sd,"new impObj.bidfloor value:",e.bidfloor)}(o,e),o.hasOwnProperty(I.Mk)||o.hasOwnProperty(I.B5)||o.hasOwnProperty(I.pX)?o:ld}(l);t&&c.imp.push(t)})),0!=c.imp.length){var v,y;c.site.publisher.id=u.pubId.trim(),_d=u.pubId.trim(),c.ext.wrapper={},c.ext.wrapper.profile=parseInt(u.profId)||ld,c.ext.wrapper.version=parseInt(u.verId)||ld,c.ext.wrapper.wiid=u.wiid||t.auctionId,c.ext.wrapper.wv="prebid_prebid_6.24.1",c.ext.wrapper.transactionId=u.transactionId,c.ext.wrapper.wp="pbjs",t&&t.bidderCode&&(c.ext.allowAlternateBidderCodes=E.S.get(t.bidderCode,"allowAlternateBidderCodes"),c.ext.allowedAlternateBidderCodes=E.S.get(t.bidderCode,"allowedAlternateBidderCodes")),c.user.gender=u.gender?u.gender.trim():ld,c.user.geo={},c.user.geo.lat=kd("lat",u.lat),c.user.geo.lon=kd("lon",u.lon),c.user.yob=kd("yob",u.yob),c.device.geo=c.user.geo,c.site.page=u.kadpageurl.trim()||c.site.page.trim(),c.site.domain=(v=c.site.page,(y=document.createElement("a")).href=v,y.hostname),"object"===od(p.vc.getConfig("content"))&&(c.site.content=p.vc.getConfig("content")),"object"===od(p.vc.getConfig("device"))&&(c.device=id(c.device,p.vc.getConfig("device"))),rt(c,"source.tid",u.transactionId),-1!==window.location.href.indexOf("pubmaticTest=true")&&(c.test=1),e[0].schain&&rt(c,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&(rt(c,"user.ext.consent",t.gdprConsent.consentString),rt(c,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&rt(c,"regs.ext.us_privacy",t.uspConsent),!0===p.vc.getConfig("coppa")&&rt(c,"regs.coppa",1),function(e,t){var n=(0,a.Z)(t,"0.userIdAsEids"),i=Od(t,1);i&&(n||(n=[]),n.push(i)),(0,r.kJ)(n)&&n.length>0&&rt(e,"user.eids",n)}(c,e),function(e,t){var n=Od(t,2);n&&(e.user||(e.user={}),e.user.data||(e.user.data=[]),e.user.data.push(n))}(c,e);var b=p.vc.getConfig("ortb2")||{};if(b.site&&(0,r.Ee)(c,{site:b.site}),b.user&&(0,r.Ee)(c,{user:b.user}),b.bcat&&(g=g.concat(b.bcat)),null!==(n=b.ext)&&void 0!==n&&null!==(i=n.prebid)&&void 0!==i&&null!==(o=i.bidderparams)&&void 0!==o&&null!==(s=o[t.bidderCode])&&void 0!==s&&s.acat){var _=b.ext.prebid.bidderparams[t.bidderCode].acat;Dd(c,_)}else m.length&&Dd(c,m);return function(e,t){(t=t.filter((function(e){return"string"==typeof e||((0,r.yN)("PubMatic: bcat: Each category should be a string, ignoring category: "+e),!1)})).map((function(e){return e.trim()})).filter((function(e,t,n){if(e.length>3)return n.indexOf(e)===t;(0,r.yN)("PubMatic: bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)}))).length>0&&((0,r.yN)("PubMatic: bcat: Selected: ",t),e.bcat=t)}(c,g),"object"===od(p.vc.getConfig("app"))&&(c.app=p.vc.getConfig("app"),c.app.publisher=c.site.publisher,c.app.ext=c.site.ext||ld,"object"!==od(c.app.content)&&(c.app.content=c.site.content||ld),delete c.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(c),bidderRequest:t}}},interpretResponse:function(e,t){var n=[],i=dd,a=JSON.parse(t.data),o=a.site&&a.site.ref?a.site.ref:"";try{e.body&&e.body.seatbid&&(0,r.kJ)(e.body.seatbid)&&(i=e.body.cur||i,e.body.seatbid.forEach((function(e){e.bid&&(0,r.kJ)(e.bid)&&e.bid.forEach((function(s){var d={requestId:s.impid,cpm:(parseFloat(s.price)||0).toFixed(2),width:s.w,height:s.h,creativeId:s.crid||s.id,dealId:s.dealid,currency:i,netRevenue:!0,ttl:300,referrer:o,ad:s.adm,pm_seat:e.seat||null,pm_dspid:s.ext&&s.ext.dspid?s.ext.dspid:null,partnerImpId:s.id||""};a.imp&&a.imp.length>0&&a.imp.forEach((function(e){if(s.impid===e.id)switch(function(e,t){if(e.ext&&null!=e.ext.bidtype)t.mediaType=bd[e.ext.bidtype];else{(0,r.PN)("PubMatic: bid.ext.bidtype does not exist, checking alternatively for mediaType");var n=e.adm,i="",a=new RegExp(/VAST\s+version/);if(n.indexOf('span class="PubAPIAd"')>=0)t.mediaType=I.Mk;else if(a.test(n))t.mediaType=I.pX;else try{(i=JSON.parse(n.replace(/\\/g,"")))&&i.native&&(t.mediaType=I.B5)}catch(e){(0,r.yN)("PubMatic: Error: Cannot parse native reponse for ad response: "+n)}}}(s,d),d.mediaType){case I.Mk:break;case I.pX:d.width=s.hasOwnProperty("w")?s.w:e.video.w,d.height=s.hasOwnProperty("h")?s.h:e.video.h,d.vastXml=s.adm,function(e,t){var n,i,r;if(t.bidderRequest&&t.bidderRequest.bids){for(var a=0;a<t.bidderRequest.bids.length;a++)t.bidderRequest.bids[a].bidId===e.requestId&&(n=t.bidderRequest.bids[a].params,i=t.bidderRequest.bids[a].mediaTypes[I.pX].context,r=t.bidderRequest.bids[a].adUnitCode);i&&"outstream"===i&&n&&n.outstreamAU&&r&&(e.rendererCode=n.outstreamAU,e.renderer=yd.newRenderer(e.rendererCode,r))}}(d,t);break;case I.B5:!function(e,t){if(t.native={},e.hasOwnProperty("adm")){var n="";try{n=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){return void(0,r.yN)("PubMatic: Error: Cannot parse native reponse for ad response: "+t.adm)}if(n&&n.native&&n.native.assets&&n.native.assets.length>0){t.mediaType=I.B5;for(var i=0,a=n.native.assets.length;i<a;i++)switch(n.native.assets[i].id){case gd.TITLE.ID:t.native.title=n.native.assets[i].title&&n.native.assets[i].title.text;break;case gd.IMAGE.ID:t.native.image={url:n.native.assets[i].img&&n.native.assets[i].img.url,height:n.native.assets[i].img&&n.native.assets[i].img.h,width:n.native.assets[i].img&&n.native.assets[i].img.w};break;case gd.ICON.ID:t.native.icon={url:n.native.assets[i].img&&n.native.assets[i].img.url,height:n.native.assets[i].img&&n.native.assets[i].img.h,width:n.native.assets[i].img&&n.native.assets[i].img.w};break;case gd.SPONSOREDBY.ID:case gd.BODY.ID:case gd.LIKES.ID:case gd.DOWNLOADS.ID:case gd.PRICE:case gd.SALEPRICE.ID:case gd.PHONE.ID:case gd.ADDRESS.ID:case gd.DESC2.ID:case gd.CTA.ID:case gd.RATING.ID:case gd.DISPLAYURL.ID:t.native[wd[n.native.assets[i].id]]=n.native.assets[i].data&&n.native.assets[i].data.value}t.native.clickUrl=n.native.link&&n.native.link.url,t.native.clickTrackers=n.native.link&&n.native.link.clicktrackers||[],t.native.impressionTrackers=n.native.imptrackers||[],t.native.jstracker=n.native.jstracker||[],t.width||(t.width=0),t.height||(t.height=0)}}}(s,d)}})),s.ext&&s.ext.deal_channel&&(d.dealChannel=vd[s.ext.deal_channel]||null),d.meta={},s.ext&&s.ext.dspid&&(d.meta.networkId=s.ext.dspid),s.ext&&s.ext.advid&&(d.meta.buyerId=s.ext.advid),s.adomain&&s.adomain.length>0&&(d.meta.advertiserDomains=s.adomain,d.meta.clickUrl=s.adomain[0]),e.ext&&e.ext.buyid&&(d.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),s.ext&&s.ext.marketplace&&(d.bidderCode=s.ext.marketplace),n.push(d)}))})))}catch(e){(0,r.H)(e)}return n},getUserSyncs:function(e,t,n,i){var r=""+_d;return n&&(r+="&gdpr="+(n.gdprApplies?1:0),r+="&gdpr_consent="+encodeURIComponent(n.consentString||"")),i&&(r+="&us_privacy="+encodeURIComponent(i)),!0===p.vc.getConfig("coppa")&&(r+="&coppa=1"),e.iframeEnabled?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+r}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+r}]},transformBidParams:function(e,t,n,i){return xd(e,n.bids[0],!0),(0,r.uh)({publisherId:"string",adSlot:"string"},e)}};(0,Ue.dX)(Ld),window.pbjs.installedModules.push("pubmaticBidAdapter");var Md={name:"pubProvidedId",decode:function(e){var t=e?{pubProvidedId:e}:void 0;return(0,r.PN)("PubProvidedId: Decoded value "+JSON.stringify(t)),t},getId:function(e){var t=e&&e.params||{},n=[];return(0,r.kJ)(t.eids)&&(n=n.concat(t.eids)),"function"==typeof t.eidsFunction&&(n=n.concat(t.eidsFunction())),{id:n}}};(0,C.Bx)("userId",Md),window.pbjs.installedModules.push("pubProvidedIdSystem");var Ud="__qca",jd=864e5,Nd="p-KceJUEvXN48CE",Bd="https://pixel.quantserve.com/pixel",Fd=["1","10"],qd=["1"],Vd=["1"],Hd=le.rp.getConsentData(),zd=le.nX.getConsentData(),Wd=(0,de.df)();function $d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:392;if(!window._qevents&&e&&""!=e){var n,i,a=Wd.getCookie(Ud),o="0",s=Gd.findRootDomain(),d=new Date,l="";if(!a){var u=d.getTime(),c=new Date(u+t*jd).toGMTString(),p=Math.round(2147483647*Math.random());a="B0-".concat(p,"-").concat(u),o="1",Wd.setCookie(Ud,a,c,"/",s,null)}n="&fpan=".concat(o,"&fpa=").concat(a),i="&gdpr=0",Hd&&"boolean"==typeof Hd.gdprApplies&&Hd.gdprApplies&&(i="gdpr=1&gdpr_consent=".concat(Hd.consentString)),zd&&"string"==typeof zd&&(l="&us_privacy=".concat(zd));var h=Bd+"?d="+s+"&client_id="+e+"&a="+Nd+l+i+n;(0,r.hq)(h)}}var Gd={name:"quantcastId",gvlid:"11",decode:function(e){return e},getId:function(e){var t,n=Wd.getCookie(Ud);if(le.VP.getCoppa()||(t=zd)&&"string"==typeof t&&4==t.length&&"Y"==t.charAt(1)&&"Y"==t.charAt(2)||!function(e){if(e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies){if(!e.vendorData)return!1;if(1===e.apiVersion)return!1;if(2===e.apiVersion)return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fd,n=e.gdprApplies,i=e.purpose,r=e.vendor,a=r&&r.consents&&r.consents[11],o=r&&r.legitimateInterests&&r.legitimateInterests[11],s=e.publisher?e.publisher.restrictions:{};return!n||t.map((function(e){var t=!!i.consents&&i.consents[e],n=!!i.legitimateInterests&&i.legitimateInterests[e],r=s&&s[e]?s[e][11]:null;return!(0===r||(!a||!t||2===r||-1==qd.indexOf(e)&&1!==r)&&(1===r||!o||!n||-1!=Vd.indexOf(e)||-1!=qd.indexOf(e)&&2!==r))})).reduce((function(e,t){return e&&t}),!0)}(e.vendorData)}return!0}(Hd)){var i=new Date(0).toUTCString(),a=Gd.findRootDomain();return(0,r.PN)("QuantcastId: Necessary consent not present for Id, exiting QuantcastId"),void Wd.setCookie(Ud,"",i,"/",a,null)}var o=e&&e.params||{},s=e&&e.storage||{},d=o.clientId||"",l=s.expires||392;return"complete"===document.readyState?$d(d,l):window.addEventListener("load",(function(){$d(d,l)})),{id:n?{quantcastId:n}:void 0}}};(0,C.Bx)("userId",Gd),window.pbjs.installedModules.push("quantcastIdSystem");var Kd=new function(){this.code="rhythmone",this.supportedMediaTypes=[I.pX,I.Mk],this.gvlid=36;var e=[2,3,5,6],t=["video/mp4"],n=[1,2,3,4],i=[1],o=[1,2,5],s={},d=this;function l(e,t){var n,i=[],r=0;if(t&&t.refererInfo&&t.refererInfo.stack.length){var o=document.createElement("a");o.href=t.refererInfo.stack[0],r="https:"==o.protocol?1:0}for(var d=0;d<e.length;d++){s[e[d].adUnitCode]=e[d];var l={};if(l.id=e[d].adUnitCode,l.bidfloor=0,l.secure=r,(0,a.Z)(e[d],"mediaTypes.banner")||"banner"===(0,a.Z)(e[d],"mediaType")){var u=p(e[d]);u&&(l.banner=u)}((0,a.Z)(e[d],"mediaTypes.video")||"video"===(0,a.Z)(e[d],"mediaType"))&&(l.video=h(e[d])),(l.banner||l.video)&&(l.ext={bidder:{placementId:(n=e[d]).params.placementId,zone:n.params&&n.params.zone?n.params.zone:"1r",path:n.params&&n.params.path?n.params.path:"mvo"}},i.push(l))}return i}function u(e){var t={domain:"",page:"",ref:""};if(e&&e.refererInfo){var n=e.refererInfo;if(t.ref=n.referer,n.stack.length){t.page=n.stack[n.stack.length-1];var i=document.createElement("a");i.href=n.stack[0],t.domain=i.hostname}}return t}function c(e){var t=parseInt(e[0]),n=parseInt(e[1]);return t==t&&n==n&&[t,n]}function p(e){var t=e.sizes;e.mediaTypes&&e.mediaTypes.banner&&(t=e.mediaTypes.banner.sizes);var n=(0,r.sF)(t),i=[];return n.forEach((function(e){if(e){var t=c(e.split("x"));t&&i.push({w:t[0],h:t[1]})}})),!!i.length&&{format:i}}function h(s){var d=[];if((0,a.Z)(s,"mediaTypes.video.playerSize")){var l=s.mediaTypes.video.playerSize;(0,r.kJ)(s.mediaTypes.video.playerSize[0])&&(l=s.mediaTypes.video.playerSize[0]);var u=c(l);u&&(d=u)}return{mimes:(0,a.Z)(s,"mediaTypes.video.mimes")||t,protocols:(0,a.Z)(s,"mediaTypes.video.protocols")||e,w:d[0],h:d[1],startdelay:(0,a.Z)(s,"mediaTypes.video.startdelay")||0,skip:(0,a.Z)(s,"mediaTypes.video.skip")||0,playbackmethod:(0,a.Z)(s,"mediaTypes.video.playbackmethod")||n,delivery:(0,a.Z)(s,"mediaTypes.video.delivery")||i,api:(0,a.Z)(s,"mediaTypes.video.api")||o}}function f(e,t){for(var n=0;n<t.length;n++)if(t[n].params&&t[n].params[e])return t[n].params[e]}this.isBidRequestValid=function(e){return!(!e.params||!e.params.placementId)},this.getUserSyncs=function(e,t,n){return[]},this.buildRequests=function(e,t){var n=f("placementId",e);if(void 0===n||e.length<1)return[];var i=f("endpoint",e)||"https://tag.1rx.io/rmp/{placementId}/0/{path}?z={zone}",o=f("zone",e)||"1r",s=f("path",e)||"mvo";i=(i=(i=i.replace(/\{placementId\}/i,n)).replace(/\{zone\}/i,o)).replace(/\{path\}/i,s);var d=/(^v|(\.0)+$)/gi;i+="&hbv="+"6.24.1".replace(d,"")+","+"2.1".replace(d,"");var c=function(e,t){var n={id:e[0].bidderRequestId,imp:l(e,t),site:u(t),device:{ua:navigator.userAgent,ip:"",dnt:(0,r.oV)()?1:0},user:{ext:{consent:(0,a.Z)(t,"gdprConsent.gdprApplies")?t.gdprConsent.consentString:""}},at:1,tmax:1e3,regs:{ext:{gdpr:!!(0,a.Z)(t,"gdprConsent.gdprApplies")&&Boolean(1&t.gdprConsent.gdprApplies)}}};return e[0].schain&&(n.source={ext:{schain:e[0].schain}}),n}(e,t);return c.imp.length?{method:"POST",url:i,data:JSON.stringify(c)}:{}},this.interpretResponse=function(e){var t=e.body||[],n=[],i=0;if(t.seatbid){var r=[];for(i=0;i<t.seatbid.length;i++)for(var a=0;a<t.seatbid[i].bid.length;a++)r.push(t.seatbid[i].bid[a]);t=r}for(i=0;i<t.length;i++){var o=t[i],l=s[o.impid],u={requestId:l.bidId,bidderCode:d.code,cpm:parseFloat(o.price),width:o.w,height:o.h,meta:{advertiserDomains:o.adomain},creativeId:o.crid,currency:"USD",netRevenue:!0,ttl:350};l.mediaTypes&&l.mediaTypes.video?(u.vastUrl=o.nurl,u.mediaType="video",u.ttl=600):u.ad=o.adm,n.push(u)}return n}};function Xd(e){return Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xd(e)}function Zd(){return Zd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Zd.apply(this,arguments)}function Yd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jd(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Qd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Ue.dX)(Kd),window.pbjs.installedModules.push("rhythmoneBidAdapter");var el,tl,nl,il=[],rl=[],al=[],ol=(nl=!1,function(){var e;nl||(Object.entries((e={},Qd(e,d.FP.AUCTION_INIT,["onAuctionInitEvent"]),Qd(e,d.FP.AUCTION_END,["onAuctionEndEvent",ul]),Qd(e,d.FP.BID_RESPONSE,["onBidResponseEvent"]),Qd(e,d.FP.BID_REQUESTED,["onBidRequestEvent"]),e)).forEach((function(e){var t=Yd(e,2),n=t[0],i=Yd(t[1],2),a=i[0],s=i[1];o.on(n,(function(e){s&&s(e),rl.forEach((function(t){try{t[a]&&t[a](e,t.config,tl)}catch(e){(0,r.H)("RTD provider '".concat(t.name,"': error in '").concat(a,"':"),e)}}))}))})),nl=!0)});function sl(){return{gdpr:le.rp.getConsentData(),usp:le.nX.getConsentData(),coppa:!!p.vc.getConfig("coppa")}}function dl(){tl=sl();var e=[];al.forEach((function(t){var n=(0,u.sE)(il,(function(e){return e.name===t.name}));n&&n.init&&n.init(t,tl)&&e.push(Zd(n,{config:t}))})),rl=e,(0,r.PN)("Real time data module enabled, using submodules: ".concat(rl.map((function(e){return e.name})).join(", ")))}function ll(e,t){tl=sl();var n=[],i=[];rl.forEach((function(e){if("function"==typeof e.getBidRequestData){n.push(e);var t=e.config;t&&t.waitForIt&&i.push(e)}}));var r,a=i.length&&el.auctionDelay&&el.auctionDelay>0,o=i.length,s=!1;if(!n.length)return l();function d(){s||(this.config&&this.config.waitForIt&&o--,0===o&&setTimeout(l,0))}function l(){s||(s=!0,clearTimeout(r),e.call(this,t))}r=setTimeout(l,a?el.auctionDelay:0),n.forEach((function(e){e.getBidRequestData(t,d.bind(e),e.config,tl)}))}function ul(e){var t,n=rl.filter((function(e){return"function"==typeof e.getTargetingData}));if(n.length){var i=e.adUnitCodes;if(i){for(var a=[],o=n.length-1;o>=0;o--){var s=n[o].getTargetingData(i,n[o].config,tl,e);s&&"object"===Xd(s)?a.push(s):(0,r.yN)("invalid getTargetingData response for sub module",n[o].name)}var l=(t=a,Array.isArray(t)&&t.length?t.reduce((function(e,t){for(var n in t)if(t.hasOwnProperty(n))if(e.hasOwnProperty(n)){var i=t[n];for(var r in i)i.hasOwnProperty(r)&&(e[n][r]=i[r])}else e[n]=t[n];return e}),{}):{});return e.adUnits.forEach((function(e){var t=e.code&&l[e.code];t&&((0,r.PN)("RTD set ad unit targeting of",t,"for",e),e[d.k2.xn]=Zd(e[d.k2.xn]||{},t))})),e.adUnits}}}function cl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cl(Object(n),!0).forEach((function(t){ml(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hl(){return hl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},hl.apply(this,arguments)}function fl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return gl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gl(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ml(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vl(e){return vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vl(e)}(0,C.bA)("realTimeData",(function(e){return il.push(e),function(){var t=il.indexOf(e);t>=0&&(il.splice(t,1),dl())}})),function(e){var t=e.getConfig("realTimeData",(function(e){var n=e.realTimeData;n.dataProviders?(t(),el=n,al=n.dataProviders,ol(),(0,i.R)().requestBids.before(ll,40),dl()):(0,r.H)("missing parameters for real time module")}))}(p.vc),window.pbjs.installedModules.push("rtdModule");var yl={};p.vc.getConfig("rubicon",(function(e){(0,r.Ee)(yl,e.rubicon)}));var bl={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656"};(0,r.yi)(bl,(function(e,t){return bl[e]=t}));var _l={code:"rubicon",gvlid:52,supportedMediaTypes:[I.Mk,I.pX],isBidRequestValid:function(e){if("object"!==vl(e.params))return!1;for(var t=0,n=["accountId","siteId","zoneId"];t<n.length;t++)if(e.params[n[t]]=parseInt(e.params[n[t]]),isNaN(e.params[n[t]]))return(0,r.H)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=El(e,!0);return!!i&&("video"!==i||function(e){var t=!0,n=Object.prototype.toString.call([]),i={mimes:n,protocols:n,linearity:Object.prototype.toString.call(0),api:n};return Object.keys(i).forEach((function(n){Object.prototype.toString.call((0,a.Z)(e,"mediaTypes.video."+n))!==i[n]&&(t=!1,(0,r.H)("Rubicon: mediaTypes.video."+n+" is required and must be of type: "+i[n]))})),t}(e))},buildRequests:function(e,t){var n=[],o=e.filter((function(e){return"video"===El(e)})).map((function(e){e.startTime=(new Date).getTime();var n={id:e.transactionId,test:p.vc.getConfig("debug")?1:0,cur:["USD"],source:{tid:e.transactionId},tmax:t.timeout,imp:[{exp:p.vc.getConfig("s2sConfig.defaultTtl"),id:e.adUnitCode,secure:1,ext:ml({},e.bidder,e.params),video:(0,a.Z)(e,"mediaTypes.video")||{}}],ext:{prebid:{channel:{name:"pbjs",version:pbjs.version},cache:{vastxml:{returnCreative:!0===yl.returnVast}},targeting:{includewinners:!0,includebidderkeys:!1,pricegranularity:Al(p.vc)},bidders:{rubicon:{integration:yl.int_type||"pbjs"}}}}};"rubicon"!==e.bidder&&(n.ext.prebid.aliases=ml({},e.bidder,"rubicon"));var o,s,d,l,u=(0,i.R)().installedModules;if(!u||u.length&&-1===u.indexOf("rubiconAnalyticsAdapter")||rt(n,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),"function"!=typeof e.getFloor||yl.disableFloors)o=parseFloat((0,a.Z)(e,"params.floor"));else{var c;try{c=e.getFloor({currency:"USD",mediaType:"video",size:Sl(e,"video")})}catch(e){(0,r.H)("Rubicon: getFloor threw an error: ",e)}o="object"!==vl(c)||"USD"!==c.currency||isNaN(parseInt(c.floor))?void 0:parseFloat(c.floor)}isNaN(o)||(n.imp[0].bidfloor=o),"object"===vl(e.floorData)&&(n.ext.prebid.floors={enabled:!1}),n.imp[0].ext[e.bidder].video.size_id=(d=e,l=parseInt((0,a.Z)(d,"params.video.size_id")),isNaN(l)?"outstream"===(0,a.Z)(d,"mediaTypes.".concat(I.pX,".context"))?203:201:l),function(e,t,n){e&&("object"===vl(p.vc.getConfig("app"))?e.app=p.vc.getConfig("app"):e.site={page:Tl(t,n)},"object"===vl(p.vc.getConfig("device"))&&(e.device=p.vc.getConfig("device")),t.params.video.language&&["site","device"].forEach((function(n){e[n]&&("site"===n?e[n].content=hl({language:t.params.video.language},e[n].content):e[n]=hl({language:t.params.video.language},e[n]))})))}(n,e,t),function(e,t){"object"===vl(e.imp[0].video)&&void 0===e.imp[0].video.skip&&(e.imp[0].video.skip=t.params.video.skip),"object"===vl(e.imp[0].video)&&void 0===e.imp[0].video.skipafter&&(e.imp[0].video.skipafter=t.params.video.skipdelay),"object"===vl(e.imp[0].video)&&void 0===e.imp[0].video.pos&&("atf"===t.params.position?e.imp[0].video.pos=1:"btf"===t.params.position&&(e.imp[0].video.pos=3));var n=Sl(t,"video");e.imp[0].video.w=n[0],e.imp[0].video.h=n[1]}(n,e),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(s=t.gdprConsent.gdprApplies?1:0),rt(n,"regs.ext.gdpr",s),rt(n,"user.ext.consent",t.gdprConsent.consentString)),t.uspConsent&&rt(n,"regs.ext.us_privacy",t.uspConsent);var h=(0,a.Z)(t,"bids.0.userIdAsEids");h&&h.length&&rt(n,"user.ext.eids",h);var f=p.vc.getConfig("user.id");f&&rt(n,"user.id",f),!0===p.vc.getConfig("coppa")&&rt(n,"regs.coppa",1),e.schain&&Pl(e.schain)&&rt(n,"source.ext.schain",e.schain);var g=p.vc.getConfig("multibid");return g&&rt(n,"ext.prebid.multibid",g.reduce((function(e,t){var n={};return Object.keys(t).forEach((function(e){n[e.toLowerCase()]=t[e]})),e.push(n),e}),[])),kl(e,I.pX,n),e.storedAuctionResponse&&rt(n.imp[0],"ext.prebid.storedauctionresponse.id",e.storedAuctionResponse.toString()),rt(n.imp[0],"ext.prebid.auctiontimestamp",t.auctionStart),{method:"POST",url:"https://".concat(yl.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:n,bidRequest:e}}));if(!0!==yl.singleRequest)n=o.concat(e.filter((function(e){return"banner"===El(e)})).map((function(e){var n=_l.createSlotParams(e,t);return{method:"GET",url:"https://".concat(yl.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:_l.getOrderedParams(n).reduce((function(e,t){var i=n[t];return(0,r.d8)(i)&&""!==i||(0,r.hj)(i)?"".concat(e).concat(xl(t,i),"&"):e}),"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}})));else{var s=e.filter((function(e){return"banner"===El(e)})).reduce((function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e}),{});n=o.concat(Object.keys(s).reduce((function(e,n){var i;return(i=s[n],10,i.map((function(e,t){return t%10==0?i.slice(t,t+10):null})).filter((function(e){return e}))).forEach((function(n){var i=_l.combineSlotUrlParams(n.map((function(e){return _l.createSlotParams(e,t)})));e.push({method:"GET",url:"https://".concat(yl.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:_l.getOrderedParams(i).reduce((function(e,t){var n=i[t];return(0,r.d8)(n)&&""!==n||(0,r.hj)(n)?"".concat(e).concat(xl(t,n),"&"):e}),"")+"slots=".concat(n.length,"&rand=").concat(Math.random()),bidRequest:n})})),e}),[]))}return n},getOrderedParams:function(e){var t=/^tg_v/,n=/^tg_i/,i=/^eid_|^tpid_/,r=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","rp_schain"].concat(Object.keys(e).filter((function(e){return i.test(e)}))).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter((function(e){return t.test(e)}))).concat(Object.keys(e).filter((function(e){return n.test(e)}))).concat(["tk_flint","x_source.tid","l_pb_bid_id","x_source.pchain","p_screen_res","rp_floor","rp_secure","tk_user_key"]);return r.concat(Object.keys(e).filter((function(e){return-1===r.indexOf(e)})))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce((function(t,n,i){return Object.keys(n).forEach((function(r){t.hasOwnProperty(r)||(t[r]=new Array(e.length)),t[r].splice(i,1,n[r])})),t}),{}),n=new RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach((function(e){var i=t[e].join(";"),r=i.match(n);t[e]=r?r[1]:i})),t},createSlotParams:function(e,t){e.startTime=(new Date).getTime();var n=e.params,i=Sl(e,"banner"),o=fl(n.latLong||[],2),s=o[0],d=o[1],l={account_id:n.accountId,site_id:n.siteId,zone_id:n.zoneId,size_id:i[0],alt_size_ids:i.slice(1).join(",")||void 0,rp_floor:(n.floor=parseFloat(n.floor))>=.01?n.floor:void 0,rp_secure:"1",tk_flint:"".concat(yl.int_type||"pbjs_lite","_v6.24.1"),"x_source.tid":e.transactionId,l_pb_bid_id:e.bidId,"x_source.pchain":n.pchain,p_screen_res:[window.screen.width,window.screen.height].join("x"),tk_user_key:n.userId,"p_geo.latitude":isNaN(parseFloat(s))?void 0:parseFloat(s).toFixed(4),"p_geo.longitude":isNaN(parseFloat(d))?void 0:parseFloat(d).toFixed(4),"tg_fl.eid":e.code,rf:Tl(e,t)};if("function"==typeof e.getFloor&&!yl.disableFloors){var c;try{c=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,r.H)("Rubicon: getFloor threw an error: ",e)}l.rp_hard_floor="object"!==vl(c)||"USD"!==c.currency||isNaN(parseInt(c.floor))?void 0:c.floor}var h={1:"atf",3:"btf"}[(0,a.Z)(e,"mediaTypes.banner.pos")]||"";l.p_pos="atf"===n.position||"btf"===n.position?n.position:h;var f=p.vc.getConfig("user.id");return f&&(l.ppuid=f),e.userIdAsEids&&e.userIdAsEids.forEach((function(e){try{if("adserver.org"===e.source?(l.tpid_tdid=e.uids[0].id,l["eid_adserver.org"]=e.uids[0].id):"liveintent.com"===e.source?(l["tpid_liveintent.com"]=e.uids[0].id,l["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(l["tg_v.LIseg"]=e.ext.segments.join(","))):"liveramp.com"===e.source?l.x_liverampidl=e.uids[0].id:"id5-sync.com"===e.source?l["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||""):l["eid_".concat(e.source)]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype||""),!l.ppuid){var t=(0,u.sE)(e.uids,(function(e){return e.ext&&"ppuid"===e.ext.stype}));t&&t.id&&(l.ppuid=t.id)}}catch(t){(0,r.yN)("Rubicon: error reading eid:",e,t)}})),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(l.gdpr=Number(t.gdprConsent.gdprApplies)),l.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(l.us_privacy=encodeURIComponent(t.uspConsent)),l.rp_maxbids=t.bidLimit||1,kl(e,I.Mk,l),!0===p.vc.getConfig("coppa")&&(l.coppa=1),e.schain&&Pl(e.schain)&&(l.rp_schain=_l.serializeSupplyChain(e.schain)),l},serializeSupplyChain:function(e){if(!Pl(e))return"";var t=e.ver,n=e.complete,i=e.nodes;return"".concat(t,",").concat(n,"!").concat(_l.serializeSupplyChainNodes(i))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map((function(e){return t.map((function(t){return encodeURIComponent(e[t]||"")})).join(",")})).join("!")},interpretResponse:function(e,t){var n=t.bidRequest;if(!(e=e.body)||"object"!==vl(e))return[];if(e.seatbid){var i=(0,a.Z)(e,"ext.errors.rubicon");Array.isArray(i)&&i.length>0&&(0,r.yN)("Rubicon: Error in video response");var o=[];return e.seatbid.forEach((function(t){(t.bid||[]).forEach((function(i){var s={requestId:n.bidId,currency:e.cur||"USD",creativeId:i.crid,cpm:i.price||0,bidderCode:t.seat,ttl:300,netRevenue:!1!==yl.netRevenue,width:i.w||(0,a.Z)(n,"mediaTypes.video.w")||(0,a.Z)(n,"params.video.playerWidth"),height:i.h||(0,a.Z)(n,"mediaTypes.video.h")||(0,a.Z)(n,"params.video.playerHeight")};i.id&&(s.seatBidId=i.id),i.dealid&&(s.dealId=i.dealid),i.adomain&&rt(s,"meta.advertiserDomains",Array.isArray(i.adomain)?i.adomain:[i.adomain]),(0,a.Z)(i,"ext.bidder.rp.advid")&&rt(s,"meta.advertiserId",i.ext.bidder.rp.advid);var d=(0,a.Z)(e,"ext.responsetimemillis.rubicon");if(n&&d&&(n.serverResponseTimeMs=d),(0,a.Z)(i,"ext.prebid.type")===I.pX){s.mediaType=I.pX,rt(s,"meta.mediaType",I.pX);var l=(0,a.Z)(i,"ext.prebid.targeting");l&&"object"===vl(l)&&(s.adserverTargeting=l),i.ext.prebid.cache&&"object"===vl(i.ext.prebid.cache.vastXml)&&i.ext.prebid.cache.vastXml.cacheId&&i.ext.prebid.cache.vastXml.url?(s.videoCacheKey=i.ext.prebid.cache.vastXml.cacheId,s.vastUrl=i.ext.prebid.cache.vastXml.url):l&&l.hb_uuid&&l.hb_cache_host&&l.hb_cache_path&&(s.videoCacheKey=l.hb_uuid,s.vastUrl="https://".concat(l.hb_cache_host).concat(l.hb_cache_path,"?uuid=").concat(l.hb_uuid)),i.adm&&(s.vastXml=i.adm),i.nurl&&(s.vastUrl=i.nurl),!s.vastUrl&&i.nurl&&(s.vastUrl=i.nurl),"outstream"===(0,a.Z)(n,"mediaTypes.video.context").toLowerCase()&&(s.renderer=function(e){var t=c.Th.install({id:e.adId,url:yl.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:yl.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(wl)}catch(e){(0,r.yN)("Prebid Error calling setRender on renderer",e)}return t}(s))}else(0,r.yN)("Rubicon: video response received non-video media type");o.push(s)}))})),o}var s,d=e.ads,l=0;return"object"!==vl(n)||Array.isArray(n)||"video"!==El(n)||"object"!==vl(d)||(d=d[n.adUnitCode]),!Array.isArray(d)||d.length<1?[]:d.reduce((function(t,i,a){if(i.impression_id&&s===i.impression_id?l++:s=i.impression_id,"ok"!==i.status)return t;var o,d,u=Array.isArray(n)?n[a-l]:n;if(u&&"object"===vl(u)){var c={requestId:u.bidId,currency:"USD",creativeId:i.creative_id||"".concat(i.network||"","-").concat(i.advertiser||""),cpm:i.cpm||0,dealId:i.deal,ttl:300,netRevenue:!1!==yl.netRevenue,rubicon:{advertiserId:i.advertiser,networkId:i.network},meta:{advertiserId:i.advertiser,networkId:i.network,mediaType:I.Mk}};if(i.creative_type&&(c.mediaType=i.creative_type),i.adomain&&(c.meta.advertiserDomains=Array.isArray(i.adomain)?i.adomain:[i.adomain]),i.creative_type===I.pX)c.width=u.params.video.playerWidth,c.height=u.params.video.playerHeight,c.vastUrl=i.creative_depot_url,c.impression_id=i.impression_id,c.videoCacheKey=i.impression_id;else{c.ad=(o=i.script,d=i.impression_id,"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(d,"'>\n<script type='text/javascript'>").concat(o,"<\/script>\n</div>\n</body>\n</html>"));var p=fl(bl[i.size_id].split("x").map((function(e){return Number(e)})),2);c.width=p[0],c.height=p[1]}c.rubiconTargeting=(Array.isArray(i.targeting)?i.targeting:[]).reduce((function(e,t){return e[t.key]=t.values[0],e}),{rpfl_elemid:u.adUnitCode}),t.push(c)}else(0,r.H)("Rubicon: bidRequest undefined at index position:".concat(a),n,e);return t}),[]).sort((function(e,t){return(t.cpm||0)-(e.cpm||0)}))},getUserSyncs:function(e,t,n,i){if(!Ol&&e.iframeEnabled){var a={};return n&&("boolean"==typeof n.gdprApplies&&(a.gdpr=Number(n.gdprApplies)),"string"==typeof n.consentString&&(a.gdpr_consent=n.consentString)),i&&(a.us_privacy=encodeURIComponent(i)),a=Object.keys(a).length?"?".concat((0,r.Yp)(a)):"",Ol=!0,{type:"iframe",url:"https://".concat(yl.syncHost||"eus",".rubiconproject.com/usync.html")+a}}},transformBidParams:function(e,t){return(0,r.uh)({accountId:"number",siteId:"number",zoneId:"number"},e)}};function Tl(e,t){var n=p.vc.getConfig("pageUrl");return e.params.referrer?n=e.params.referrer:n||(n=t.refererInfo.referer),e.params.secure?n.replace(/^http:/i,"https:"):n}function wl(e){var t,n=document.getElementById(e.adUnitCode);(t=n.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),function(e){var t=e.querySelector("script[id^='sas_script']"),n=t&&t.nextSibling;n&&"iframe"===n.localName&&n.style.setProperty("display","none")}(n);var i=e.renderer.getConfig();e.renderer.push((function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:n,align:i.align||"center",position:i.position||"append"},closeButton:i.closeButton||!1,label:i.label||void 0,collapse:i.collapse||!0})}))}function Sl(e,t){var n=e.params;if("video"===t){var i=[];return n.video&&n.video.playerWidth&&n.video.playerHeight?i=[n.video.playerWidth,n.video.playerHeight]:Array.isArray((0,a.Z)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?i=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(i=e.sizes[0]),i}var o=[];return Array.isArray(n.sizes)?o=n.sizes:void 0!==(0,a.Z)(e,"mediaTypes.banner.sizes")?o=Il(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?o=Il(e.sizes):(0,r.yN)("Rubicon: no sizes are setup or found"),function(e){var t=[15,2,9];return e.sort((function(e,n){var i=t.indexOf(e),r=t.indexOf(n);return i>-1||r>-1?-1===i?1:-1===r?-1:i-r:e-n}))}(o)}function kl(e,t,n){var i={user:{ext:{data:pl({},e.params.visitor)}},site:{ext:{data:pl({},e.params.inventory)}}};e.params.keywords&&(i.site.keywords=(0,r.kJ)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var o=(0,r.Ee)({},p.vc.getConfig("ortb2")||{},i),s=(0,a.Z)(e.ortb2Imp,"ext.data")||{},d=(0,a.Z)(e,"ortb2Imp.ext.gpid"),l={user:[4],site:[1,2,5,6]},u={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},c=function(e,t,n){if("data"===t&&Array.isArray(e))return e.filter((function(e){return e.segment&&(0,a.Z)(e,"ext.segtax")&&l[n]&&-1!==l[n].indexOf((0,a.Z)(e,"ext.segtax"))})).map((function(e){var t=e.segment.filter((function(e){return e.id})).reduce((function(e,t){return e.push(t.id),e}),[]);if(t.length>0)return t.toString()})).toString();if("object"!==vl(e)||Array.isArray(e)){if(void 0!==e)return Array.isArray(e)?e.filter((function(e){if("object"!==vl(e)&&void 0!==e)return e.toString();(0,r.yN)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")})).toString():e.toString()}else(0,r.yN)("Rubicon: Filtered FPD key: ",t,": Expected value to be string, integer, or an array of strings/ints")},h=function(e,t,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=c(e,i,t),o=u[i]&&r?"".concat(u[i]):"data"===i?"".concat(u[t],"iab"):"".concat(u[t]).concat(i);n[o]=n[o]?n[o].concat(",",a):a};t===I.Mk?(["site","user"].forEach((function(e){Object.keys(o[e]).forEach((function(t){"site"===e&&"content"===t&&o[e][t].data?h(o[e][t].data,e,"data"):"ext"!==t?h(o[e][t],e,t):o[e][t].data&&Object.keys(o[e].ext.data).forEach((function(t){h(o[e].ext.data[t],e,t,!1)}))}))})),Object.keys(s).forEach((function(e){"adserver"!==e?h(s[e],"site",e):"gam"===s[e].name&&h(s[e].adslot,name,e)})),d&&(n.p_gpid=d),n["tg_i.pbadslot"]&&delete n["tg_i.dfp_ad_unit_code"]):(Object.keys(s).length&&(0,r.Ee)(n.imp[0].ext,{data:s}),d&&(n.imp[0].ext.gpid=d),(0,r.Ee)(n,o))}function Il(e){return(0,r.sF)(e).reduce((function(e,t){var n=parseInt(bl[t],10);return n&&e.push(n),e}),[])}function Cl(e){return"object"===vl((0,a.Z)(e,"params.video"))&&void 0!==(0,a.Z)(e,"mediaTypes.".concat(I.pX))}function El(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Cl(e)?-1===["outstream","instream"].indexOf((0,a.Z)(e,"mediaTypes.".concat(I.pX,".context")))?void(t&&(0,r.H)("Rubicon: mediaTypes.video.context must be outstream or instream")):Sl(e,"video").length<2?void(t&&(0,r.H)("Rubicon: could not determine the playerSize of the video")):(t&&(0,r.ji)("Rubicon: making video request for adUnit",e.adUnitCode),"video"):0===Sl(e,"banner").length?void(t&&(0,r.H)("Rubicon: could not determine the sizes for banner request")):(t&&(0,r.ji)("Rubicon: making banner request for adUnit",e.adUnitCode),"banner")}function Al(e){return{ranges:{low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets}[e.getConfig("priceGranularity")]}}function Pl(e){var t=!1,n=["asi","sid","hp"];return e.nodes?((t=e.nodes.reduce((function(e,t){return e?n.every((function(e){return t.hasOwnProperty(e)})):e}),!0))||(0,r.H)("Rubicon: required schain params missing"),t):t}function xl(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var Ol=!1;function Dl(e){return Dl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dl(e)}(0,Ue.dX)(_l),window.pbjs.installedModules.push("rubiconBidAdapter");var Rl=(0,de.df)({gvlid:887,moduleName:"pubCommonId"}),Ll="cookie",Ml="html5",Ul="_pubcid_optout",jl="PublisherCommonId";function Nl(e,t){if(t===Ll)return Rl.getCookie(e);if(t===Ml&&Rl.hasLocalStorage()){var n=Rl.getDataFromLocalStorage("".concat(e,"_exp"));if(!n)return Rl.getDataFromLocalStorage(e);if(new Date(n).getTime()-Date.now()>0)return Rl.getDataFromLocalStorage(e)}}function Bl(e,t){return function(n){"function"==typeof t&&t(),n(e)}}function Fl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e){var n=(0,r.en)(e);n.search.id=encodeURIComponent("pubcid:"+t);var i=(0,r.Q2)(n);return function(){(0,r.hq)(i)}}}function ql(){return!!(Rl.cookiesAreEnabled()&&Nl(Ul,Ll)||Rl.hasLocalStorage()&&Nl(Ul,Ml))}var Vl={name:"sharedId",aliasName:"pubCommonId",gvlid:887,decode:function(e,t){if(!ql())return(0,r.PN)(" Decoded value PubCommonId "+e),{pubcid:e};(0,r.PN)("PubCommonId decode: Has opted-out")},getId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(ql())(0,r.PN)("PubCommonId: Has opted-out");else{var n=le.VP.getCoppa();if(!n){var i=e.params,a=(i=void 0===i?{}:i).create,o=void 0===a||a,s=i.pixelUrl,d=t;if(!d){try{"object"===Dl(window[jl])&&(d=window[jl].getId())}catch(e){}d||(d=o&&(0,r.wn)()?(0,r.DO)():void 0)}var l=Fl(s,d);return{id:d,callback:Bl(d,l)}}(0,r.PN)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId")}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>2?arguments[2]:void 0;if(ql())return(0,r.PN)("PubCommonId: Has opted-out"),{id:void 0};var n=le.VP.getCoppa();if(n)(0,r.PN)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");else{var i=e.params,a=(i=void 0===i?{}:i).extend,o=void 0!==a&&a,s=i.pixelUrl;if(o){if(s){var d=Fl(s,t);return{callback:d}}return{id:t}}}},domainOverride:function(){for(var e,t,n=document.domain.split("."),i="_gd".concat(Date.now()),r=0;r<n.length;r++){var a=n.slice(r).join(".");if(Rl.setCookie(i,"1",void 0,void 0,a),t=Rl.getCookie(i),Rl.setCookie(i,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,a),"1"!==t)return e;e=a}}};function Hl(e){return Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hl(e)}function zl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function $l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wl(Object(n),!0).forEach((function(t){Gl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,C.Bx)("userId",Vl),window.pbjs.installedModules.push("sharedIdSystem");var Kl="sharethrough",Xl="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),Zl=function(){return window.location.protocol},Yl={code:Kl,supportedMediaTypes:[I.pX,I.Mk],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey&&e.bidder===Kl},buildRequests:function(e,t){var n,i,o,s=p.vc.getConfig("bidderTimeout"),d=p.vc.getConfig("ortb2")||{},l=Zl().indexOf("http")<0||Zl().indexOf("https")>-1,u={id:(0,r.DO)(),at:1,cur:["USD"],tmax:s,site:$l({domain:window.location.hostname,page:window.location.href,ref:(0,a.Z)(t,"refererInfo.referer")},d.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width},regs:{coppa:!0===p.vc.getConfig("coppa")?1:0,ext:{}},source:{ext:{version:"6.24.1",str:"4.1.0",schain:e[0].schain}},bcat:e[0].params.bcat||[],badv:e[0].params.badv||[],test:0};if(u.user=Ql(d.user,{}),u.user.ext||(u.user.ext={}),u.user.ext.eids=(n=e[0],i=vt((0,a.Z)(n,"userId"))||[],(o=(0,a.Z)(n,"userId.flocId"))&&o.id&&o.version&&i.push({source:"chrome.com",uids:[{id:o.id,atype:1,ext:{ver:o.version}}]}),i),t.gdprConsent){var c=!0===t.gdprConsent.gdprApplies;u.regs.ext.gdpr=c?1:0,c&&(u.user.ext.consent=t.gdprConsent.consentString)}return t.uspConsent&&(u.regs.ext.us_privacy=t.uspConsent),e.map((function(e){var t={},n=(0,a.Z)(e,"ortb2Imp.ext.data.pbadslot");n&&(t.ext={gpid:n});var i,o,s,d,u,c,p=(0,a.Z)(e,"mediaTypes.video");if(p){var h=640,f=360;if(p.playerSize&&p.playerSize[0]&&p.playerSize[1]){var g=(u=p.playerSize,c=2,function(e){if(Array.isArray(e))return e}(u)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(a.push(i.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==n.return||n.return()}finally{if(s)throw r}}return a}}(u,c)||function(e,t){if(e){if("string"==typeof e)return zl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zl(e,t):void 0}}(u,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());h=g[0],f=g[1]}t.video={pos:Ql(p.pos,0),topframe:(0,r.yL)()?0:1,skip:Ql(p.skip,0),linearity:Ql(p.linearity,1),minduration:Ql(p.minduration,5),maxduration:Ql(p.maxduration,60),playbackmethod:p.playbackmethod||[2],api:(s=p,d=s.api,d&&Array.isArray(d)&&d.length>0?d:[2]),mimes:p.mimes||["video/mp4"],protocols:(i=p,o=i.protocols,o&&Array.isArray(o)&&o.length>0?o:[2,3,5,6,7,8]),w:h,h:f,startdelay:Ql(p.startdelay,0),skipmin:Ql(p.skipmin,0),skipafter:Ql(p.skipafter,0),placement:"instream"===p.context?1:+(0,a.Z)(p,"placement",4)},p.delivery&&(t.video.delivery=p.delivery),p.companiontype&&(t.video.companiontype=p.companiontype),p.companionad&&(t.video.companionad=p.companionad)}else t.banner={pos:(0,a.Z)(e,"mediaTypes.banner.pos",0),topframe:(0,r.yL)()?0:1,format:e.sizes.map((function(e){return{w:+e[0],h:+e[1]}}))};return $l({id:e.bidId,tagid:String(e.params.pkey),secure:l?1:0,bidfloor:Jl(e)},t)})).filter((function(e){return!!e})).map((function(e){return{method:"POST",url:Xl,data:$l($l({},u),{},{imp:[e]})}}))},interpretResponse:function(e,t){var n=e.body;return n&&n.seatbid&&0!==n.seatbid.length&&n.seatbid[0].bid&&0!==n.seatbid[0].bid.length?n.seatbid[0].bid.map((function(e){var i={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?I.pX:I.Mk,currency:n.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[]}};return i.mediaType===I.pX&&(i.ttl=3600,i.vastXml=e.adm),i})):[]},getUserSyncs:function(e,t,n,i){var r=i?"&us_privacy=".concat(i):"",a=[];return e.pixelEnabled&&t.length>0&&t[0].body&&t[0].body.cookieSyncUrls&&t[0].body.cookieSyncUrls.forEach((function(e){a.push({type:"image",url:e+r})})),a},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function Jl(e){var t=null;if("function"==typeof e.getFloor){var n=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map((function(e){return{w:e[0],h:e[1]}}))});"object"!==Hl(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}return null!==t?t:e.params.floor}function Ql(e,t){return null==e?t:e}(0,Ue.dX)(Yl),window.pbjs.installedModules.push("sharethroughBidAdapter");var eu={code:"smartadserver",gvlid:45,aliases:["smart"],supportedMediaTypes:[I.Mk,I.pX],isBidRequestValid:function(e){return!!(e.params&&e.params.siteId&&e.params.pageId&&e.params.formatId)},serializeSupplyChain:function(e){if(!e||!e.nodes)return null;var t=["asi","sid","hp","rid","name","domain"];return"".concat(e.ver,",").concat(e.complete,"!")+e.nodes.map((function(e){return t.map((function(t){return e[t]?encodeURIComponent(e[t]):""})).join(",")})).join("!")},adaptBannerSizes:function(e){return e.map((function(e){return{w:e[0],h:e[1]}}))},fillPayloadForVideoBidRequest:function(e,t,n){var i=t.playerSize[0];e.isVideo="instream"===t.context,e.mediaType=I.pX,e.videoData={videoProtocol:this.getProtocolForVideoBidRequest(t,n),playerWidth:i[0],playerHeight:i[1],adBreak:this.getStartDelayForVideoBidRequest(t,n)}},getProtocolForVideoBidRequest:function(e,t){return void 0!==t&&t.protocol?t.protocol:void 0!==e&&Array.isArray(e.protocols)?Math.max.apply(Math,e.protocols):null},getStartDelayForVideoBidRequest:function(e,t){if(void 0!==t&&t.startDelay)return t.startDelay;if(void 0!==e){if(0==e.startdelay)return 1;if(-1==e.startdelay)return 2;if(-2==e.startdelay)return 3}return 2},createServerRequest:function(e,t){return{method:"POST",url:(void 0!==t?t:"https://prg.smartadserver.com")+"/prebid/v1",data:JSON.stringify(e)}},buildRequests:function(e,t){var n=p.vc.getConfig("currency.adServerCurrency");return e.reduce((function(e,i){var o={siteid:i.params.siteId,pageid:i.params.pageId,formatid:i.params.formatId,currencyCode:n,bidfloor:i.params.bidfloor||eu.getBidFloor(i,n),targeting:i.params.target&&""!==i.params.target?i.params.target:void 0,buid:i.params.buId&&""!==i.params.buId?i.params.buId:void 0,appname:i.params.appName&&""!==i.params.appName?i.params.appName:void 0,ckid:i.params.ckId||0,tagId:i.adUnitCode,pageDomain:t&&t.refererInfo&&t.refererInfo.referer?t.refererInfo.referer:void 0,transactionId:i.transactionId,timeout:p.vc.getConfig("bidderTimeout"),bidId:i.bidId,prebidVersion:"6.24.1",schain:eu.serializeSupplyChain(i.schain)};t&&t.gdprConsent&&(o.addtl_consent=t.gdprConsent.addtlConsent,o.gdpr_consent=t.gdprConsent.consentString,o.gdpr=t.gdprConsent.gdprApplies),i&&i.userId&&(o.eids=vt(i.userId)),t&&t.uspConsent&&(o.us_privacy=t.uspConsent);var s=(0,a.Z)(i,"mediaTypes.video"),d=(0,a.Z)(i,"mediaTypes.banner"),l=s&&("instream"===s.context||"outstream"===s.context);if(!l&&d)o.sizes=eu.adaptBannerSizes(d.sizes),e.push(eu.createServerRequest(o,i.params.domain));else if(l&&!d)eu.fillPayloadForVideoBidRequest(o,s,i.params.video),e.push(eu.createServerRequest(o,i.params.domain));else if(l&&d){var u=(0,r.I8)(o);eu.fillPayloadForVideoBidRequest(u,s,i.params.video),e.push(eu.createServerRequest(u,i.params.domain)),o.sizes=eu.adaptBannerSizes(d.sizes),e.push(eu.createServerRequest(o,i.params.domain))}else e.push({});return e}),[])},interpretResponse:function(e,t){var n=[],i=e.body;try{if(i&&!i.isNoAd){var a=JSON.parse(t.data),o={requestId:a.bidId,cpm:i.cpm,width:i.width,height:i.height,creativeId:i.creativeId,dealId:i.dealId,currency:i.currency,netRevenue:i.isNetCpm,ttl:i.ttl,dspPixels:i.dspPixels,meta:{advertiserDomains:i.adomain?i.adomain:[]}};a.mediaType===I.pX?(o.mediaType=I.pX,o.vastUrl=i.adUrl,o.vastXml=i.ad,o.content=i.ad):(o.adUrl=i.adUrl,o.ad=i.ad),n.push(o)}}catch(e){(0,r.H)("Error while parsing smart server response",e)}return n},getBidFloor:function(e,t){if(!(0,r.LQ)(e.getFloor))return 0;var n=e.getFloor({currency:t||"USD",mediaType:"*",size:"*"});return(0,r.PO)(n)&&!isNaN(n.floor)?n.floor:0},getUserSyncs:function(e,t){var n=[];return e.iframeEnabled&&t.length>0&&null!=t[0].body.cSyncUrl?n.push({type:"iframe",url:t[0].body.cSyncUrl}):e.pixelEnabled&&t.length>0&&void 0!==t[0].body.dspPixels&&t[0].body.dspPixels.forEach((function(e){n.push({type:"image",url:e})})),n}};function tu(e){return tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tu(e)}(0,Ue.dX)(eu),window.pbjs.installedModules.push("smartadserverBidAdapter");var nu={consented_providers:["3","7","11","12","15","20","22","35","43","46","48","55","57","61","62","66","70","80","83","85","86","89","93","108","122","124","125","126","131","134","135","136","143","144","147","149","153","154","159","161","162","165","167","171","178","184","188","192","195","196","202","209","211","218","221","228","229","230","236","239","241","253","255","259","266","271","272","274","286","291","294","303","308","310","311","313","314","316","317","322","323","327","336","338","340","348","350","358","359","363","367","370","371","384","385","389","393","394","397","398","407","414","415","424","429","430","432","436","438","440","442","443","445","448","449","453","459","479","482","486","491","492","494","495","503","505","510","522","523","528","537","540","550","559","560","568","571","574","575","576","584","585","587","588","590","591","592","595","609","621","624","723","725","733","737","776","780","782","787","797","798","802","803","814","817","820","821","827","829","839","853","864","867","874","899","904","922","926","931","932","933","938","955","973","976","979","981","985","987","991","1003","1024","1025","1027","1028","1029","1033","1034","1040","1047","1048","1051","1052","1053","1054","1062","1063","1067","1072","1085","1092","1095","1097","1099","1100","1107","1126","1127","1143","1149","1152","1162","1166","1167","1170","1171","1172","1188","1192","1199","1201","1204","1205","1211","1212","1215","1220","1225","1226","1227","1230","1232","1236","1241","1248","1250","1252","1268","1275","1276","1284","1286","1298","1301","1307","1312","1313","1317","1329","1336","1344","1345","1356","1362","1365","1375","1403","1409","1411","1415","1416","1419","1423","1440","1442","1449","1451","1455","1456","1468","1496","1503","1509","1512","1514","1517","1520","1525","1540","1547","1548","1555","1558","1570","1575","1577","1579","1583","1584","1591","1598","1603","1608","1613","1616","1626","1631","1633","1638","1642","1648","1651","1652","1653","1660","1665","1667","1669","1671","1674","1677","1678","1682","1684","1697","1703","1705","1716","1720","1721","1722","1725","1732","1733","1735","1739","1741","1745","1750","1753","1760","1765","1769","1776","1780","1782","1786","1791","1794","1799","1800","1801","1810","1827","1831","1832","1834","1837","1840","1843","1844","1845","1858","1859","1863","1866","1870","1872","1875","1878","1880","1882","1883","1889","1892","1896","1898","1899","1902","1905","1911","1922","1928","1929","1934","1942","1943","1944","1945","1958","1960","1962","1963","1964","1967","1968","1978","1985","1986","1987","1998","2003","2007","2012","2013","2027","2035","2038","2039","2044","2047","2052","2056","2059","2062","2064","2068","2070","2072","2078","2079","2084","2088","2090","2095","2100","2103","2107","2109","2113","2115","2121","2127","2130","2133","2137","2140","2141","2145","2147","2150","2156","2166","2170","2171","2176","2177","2179","2183","2186","2192","2198","2202","2205","2214","2216","2219","2220","2222","2223","2224","2225","2227","2228","2234","2238","2247","2251","2253","2262","2264","2271","2276","2278","2279","2282","2290","2292","2295","2299","2305","2306","2310","2311","2312","2315","2320","2325","2328","2331","2334","2335","2336","2337","2343","2346","2354","2357","2358","2359","2366","2370","2373","2376","2377","2380","2382","2387","2389","2392","2394","2400","2403","2405","2406","2407","2410","2411","2413","2414","2415","2416","2418","2422","2425","2427","2435","2437","2440","2441","2447","2453","2459","2461","2462","2464","2467","2468","2472","2477","2481","2484","2486","2492","2493","2496","2497","2498","2499","2504","2506","2510","2511","2512","2517","2526","2527","2531","2532","2534","2542","2544","2552","2555","2559","2563","2564","2567","2568","2569","2571","2572","2573","2575","2577","2579","2583","2584","2586","2589","2595","2596","2597","2601","2604","2605","2609","2610","2612","2614","2621","2622","2624","2628","2629","2632","2634","2636","2639","2643","2645","2646","2647","2649","2650","2651","2652","2656","2657","2658","2660","2661","2662","2663","2664","2669","2670","2673","2676","2677","2678","2681","2682","2684","2685","2686","2689","2690","2691","2695","2698","2699","2702","2704","2705","2706","2707","2709","2710","2713","2714","2727","2729","2739","2758","2765","2766","2767","2768","2770","2771","2772","2776","2777","2778","2779","2780","2783","2784","2786","2787","2791","2792","2793","2797","2798","2801","2802","2803","2805","2808","2809","2810","2811","2812","2813","2814","2817","2818","2824","2826","2827","2829","2830","2831","2832","2834","2836","2838","2840","2842","2843","2844","2850","2851","2852","2854","2858","2860","2862","2864","2865","2866","2867","2868","2869","2871"]},iu={code:"spotx",gvlid:52,supportedMediaTypes:[I.pX],isBidRequestValid:function(e){if(e&&"object"!==tu(e.params))return(0,r.H)("spotx: params is not defined or is incorrect in the bidder settings."),!1;if(!(0,a.Z)(e,"mediaTypes.video"))return(0,r.H)("spotx: mediaTypes.video is not present in the bidder settings."),!1;var t=(0,a.Z)(e,"mediaTypes.video.playerSize");if(!t||!(0,r.kJ)(t))return(0,r.H)("spotx: mediaTypes.video.playerSize is not defined in the bidder settings."),!1;if(!(0,r.An)("channel_id",e.params))return(0,r.H)("spotx: channel_id is not present in bidder params"),!1;if(("outstream"==(0,a.Z)(e,"mediaTypes.video.context")||"outstream"==(0,a.Z)(e,"params.ad_unit"))&&!(0,r.An)("outstream_function",e.params)){if(!(0,r.An)("outstream_options",e.params))return(0,r.H)("spotx: please define outstream_options parameter or override the default SpotX outstream rendering by defining your own Outstream function using field outstream_function."),!1;if(!(0,r.An)("slot",e.params.outstream_options))return(0,r.H)("spotx: please define parameter slot in outstream_options object in the configuration."),!1}return!0},buildRequests:function(e,t){var n=t.refererInfo.referer,i=!!n.match(/^https:/);return e.map((function(e){var o;o=(0,r.An)("page",e.params)?(0,r.An)("page",e.params):p.vc.getConfig("pageUrl")?p.vc.getConfig("pageUrl"):n;var s=(0,r.An)("channel_id",e.params),d=null,l=(0,a.Z)(e,"mediaTypes.video.playerSize"),u=l[0][0],c=l[0][1],h=i||((0,r.An)("secure",e.params)?1:0),f={sdk_name:"Prebid 1+",versionOrtb:"2.3"};if(""!=(0,r.An)("hide_skin",e.params)&&(f.hide_skin=+!!(0,r.An)("hide_skin",e.params)),""!=(0,r.An)("ad_volume",e.params)&&(f.ad_volume=(0,r.An)("ad_volume",e.params)),""!=(0,r.An)("ad_unit",e.params)&&(f.ad_unit=(0,r.An)("ad_unit",e.params)),""!=(0,r.An)("outstream_options",e.params)&&(f.outstream_options=(0,r.An)("outstream_options",e.params)),""!=(0,r.An)("outstream_function",e.params)&&(f.outstream_function=(0,r.An)("outstream_function",e.params)),""!=(0,r.An)("custom",e.params)&&(f.custom=(0,r.An)("custom",e.params)),""!=(0,r.An)("pre_market_bids",e.params)&&(0,r.kJ)((0,r.An)("pre_market_bids",e.params))){var g=(0,r.An)("pre_market_bids",e.params);for(var m in f.pre_market_bids=[],g){var v=g[m],y="";v.vast_url?y='<?xml version="1.0" encoding="utf-8"?><VAST version="2.0"><Ad><Wrapper><VASTAdTagURI>'+v.vast_url+"</VASTAdTagURI></Wrapper></Ad></VAST>":v.vast_string&&(y=v.vast_string),f.pre_market_bids.push({id:v.deal_id,seatbid:[{bid:[{impid:Date.now(),dealid:v.deal_id,price:v.price,adm:y}]}],cur:v.currency,ext:{event_log:[{}]}})}}var b=(0,r.An)("mimes",e.params)||["application/javascript","video/mp4","video/webm"],_={id:e.bidId,secure:h,video:{w:u,h:c,ext:f,mimes:b}};if((0,r.LQ)(e.getFloor)){var T=e.getFloor({currency:"USD",mediaType:"video",size:"*"});"USD"===T.currency&&(_.bidfloor=T.floor)}else""!=(0,r.An)("price_floor",e.params)&&(_.bidfloor=(0,r.An)("price_floor",e.params));""!=(0,r.An)("start_delay",e.params)&&(_.video.startdelay=0+Boolean((0,r.An)("start_delay",e.params))),""!=(0,r.An)("min_duration",e.params)&&(_.video.minduration=(0,r.An)("min_duration",e.params)),""!=(0,r.An)("max_duration",e.params)&&(_.video.maxduration=(0,r.An)("max_duration",e.params)),""!=(0,r.An)("placement_type",e.params)&&(_.video.ext.placement=(0,r.An)("placement_type",e.params)),""!=(0,r.An)("position",e.params)&&(_.video.ext.pos=(0,r.An)("position",e.params)),e.crumbs&&e.crumbs.pubcid&&(d=e.crumbs.pubcid);var w=navigator.language?"language":"userLanguage",S={id:s,imp:_,site:{id:"",page:o,content:"content"},device:{h:screen.height,w:screen.width,dnt:(0,r.oV)()?1:0,language:navigator[w].split("-")[0],make:navigator.vendor?navigator.vendor:"",ua:navigator.userAgent},ext:{wrap_response:1}};p.vc.getConfig("cache")&&p.vc.getConfig("cache.url")&&!0===p.vc.getConfig("cache.ignoreBidderCacheKey")&&(S.ext.wrap_response=0),(0,r.An)("number_of_ads",e.params)&&(S.ext.number_of_ads=(0,r.An)("number_of_ads",e.params));var k={};return 1==(0,r.An)("spotx_all_google_consent",e.params)&&(k.consented_providers_settings=nu),t&&t.gdprConsent&&(k.consent=t.gdprConsent.consentString,void 0!==t.gdprConsent.gdprApplies&&rt(S,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&rt(S,"regs.ext.us_privacy",t.uspConsent),(0,a.Z)(e,"userId.id5id.uid")&&(k.eids=k.eids||[],k.eids.push({source:"id5-sync.com",uids:[{id:e.userId.id5id.uid,ext:e.userId.id5id.ext||{}}]})),d&&(k.fpc=d),e&&e.schain&&(S.source={ext:{schain:e.schain}}),e&&e.userId&&e.userId.tdid&&(k.eids=k.eids||[],k.eids.push({source:"adserver.org",uids:[{id:e.userId.tdid,ext:{rtiPartner:"TDID"}}]})),(0,r.xb)(k)||(S.user={ext:k}),{method:"POST",url:"https://search.spotxchange.com/openrtb/2.3/dados/"+s+"?src_sys=prebid",data:S,bidRequest:t}}))},interpretResponse:function(e,t){var n=[],i=e.body;return i&&(0,r.kJ)(i.seatbid)&&(0,r.yi)(i.seatbid,(function(e){(0,r.yi)(e.bid,(function(e){var o={};for(var s in t.bidRequest.bids)e.impid==t.bidRequest.bids[s].bidId&&(o=t.bidRequest.bids[s]);(0,r.yi)(o.params.pre_market_bids,(function(t){t.deal_id==e.id&&(e.price=t.price,i.cur=t.currency)}));var d={requestId:o.bidId,currency:i.cur||"USD",cpm:e.price,creativeId:e.crid||"",dealId:e.dealid||"",ttl:360,netRevenue:!0,channel_id:i.id,mediaType:I.pX,width:e.w,height:e.h};p.vc.getConfig("cache")&&p.vc.getConfig("cache.url")&&!0===p.vc.getConfig("cache.ignoreBidderCacheKey")?d.vastXml=e.adm:(d.cache_key=e.ext.cache_key,d.vastUrl="https://search.spotxchange.com/ad/vast.html?key="+e.ext.cache_key,d.videoCacheKey=e.ext.cache_key),d.meta=d.meta||{},e&&e.adomain&&e.adomain.length>0&&(d.meta.advertiserDomains=e.adomain);var l=(0,a.Z)(o,"mediaTypes.video.context"),u=(0,a.Z)(o,"params.ad_unit");if("outstream"==l||"outstream"==u){var h=(0,a.Z)(o,"mediaTypes.video.playerSize"),f=c.Th.install({id:0,url:"/",config:{adText:"SpotX Outstream Video Ad via Prebid.js",player_width:h[0][0],player_height:h[0][1],content_page_url:(0,a.Z)(t,"data.site.page"),ad_mute:+!!(0,a.Z)(o,"params.ad_mute"),hide_skin:+!!(0,a.Z)(o,"params.hide_skin"),outstream_options:(0,a.Z)(o,"params.outstream_options"),outstream_function:(0,a.Z)(o,"params.outstream_function")}});try{f.setRender(ru),f.setEventHandlers({impression:function(){return(0,r.ji)("SpotX outstream video impression event")},loaded:function(){return(0,r.ji)("SpotX outstream video loaded event")},ended:function(){(0,r.ji)("SpotX outstream renderer video event")}})}catch(e){(0,r.yN)("Prebid Error calling setRender or setEventHandlers on renderer",e)}d.renderer=f}n.push(d)}))})),n}};function ru(e){var t=function(e){var t=(0,r.An)("slot",e.renderer.config.outstream_options);(0,r.ji)("[SPOTX][renderer] Handle SpotX outstream renderer");var n=window.document.createElement("script");n.type="text/javascript",n.src="https://js.spotx.tv/easi/v1/"+e.channel_id+".js";var i={};i["data-spotx_channel_id"]=""+e.channel_id,i["data-spotx_vast_url"]=""+e.vastUrl,i["data-spotx_content_page_url"]=e.renderer.config.content_page_url,i["data-spotx_ad_unit"]="incontent",(0,r.ji)("[SPOTX][renderer] Default behavior"),(0,r.An)("ad_mute",e.renderer.config.outstream_options)&&(i["data-spotx_ad_mute"]="1"),i["data-spotx_collapse"]="0",i["data-spotx_autoplay"]="1",i["data-spotx_blocked_autoplay_override_mode"]="1",i["data-spotx_video_slot_can_autoplay"]="1";var a=(0,r.An)("playersize_auto_adapt",e.renderer.config.outstream_options);if(a&&(0,r.jn)(a)&&!0===a){var o=e.width&&(0,r.hj)(e.width)&&e.height&&(0,r.hj)(e.height)?e.width/e.height:4/3,s=window.document.getElementById(t).clientWidth,d=e.renderer.config.player_width,l=e.renderer.config.player_height,u=0,c=0;s<d&&(l=(d=s)/o),o<=1?(u=Math.round(l*o),c=l):(u=d,c=Math.round(d/o)),i["data-spotx_content_width"]=""+u,i["data-spotx_content_height"]=""+c}var p=(0,r.An)("custom_override",e.renderer.config.outstream_options);if(p&&(0,r.PO)(p))for(var h in(0,r.ji)("[SPOTX][renderer] Custom behavior."),p)p.hasOwnProperty(h)&&("channel_id"===h||"vast_url"===h||"content_page_url"===h||"ad_unit"===h?(0,r.yN)("[SPOTX][renderer] Custom behavior: following option cannot be overridden: "+h):i["data-spotx_"+h]=p[h]);for(var f in i)i.hasOwnProperty(f)&&n.setAttribute(f,i[f]);return n}(e);if(null!=e.renderer.config.outstream_function&&"function"==typeof e.renderer.config.outstream_function)e.renderer.config.outstream_function(e,t);else try{var n=(0,r.An)("in_iframe",e.renderer.config.outstream_options);if(n&&"IFRAME"==window.document.getElementById(n).nodeName){var i=window.document.getElementById(n),a=i.contentDocument;!a&&i.contentWindow&&(a=i.contentWindow.document),a.body.appendChild(t)}else{var o=(0,r.An)("slot",e.renderer.config.outstream_options);o&&window.document.getElementById(o)?window.document.getElementById(o).appendChild(t):window.document.getElementsByTagName("head")[0].appendChild(t)}}catch(e){(0,r.H)("[SPOTX][renderer] Error:"+e.message)}}function au(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ou(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?au(Object(n),!0).forEach((function(t){su(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):au(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function su(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}(0,Ue.dX)(iu),window.pbjs.installedModules.push("spotxBidAdapter");var du="teads",lu=(0,de.df)({gvlid:132,bidderCode:du}),uu={code:du,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){var t=!1;if(void 0!==e.params){var n=fu((0,r.NA)(e.params,"placementId")),i=fu((0,r.NA)(e.params,"pageId"));t=n&&i}return t||(0,r.H)("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var n,i,r=e.map(hu),o=ou(ou(ou({referrer:cu(t),pageReferrer:document.referrer,networkBandwidth:(i=window.navigator,i&&i.connection&&i.connection.downlink>=0?i.connection.downlink.toString():""),timeToFirstByte:pu(window),data:r,deviceWidth:screen.width,hb_version:"6.24.1"},function(e){if(!e)return{};var t=e.id?{cohortId:e.id}:{},n=e.version?{cohortVersion:e.version}:{};return ou(ou({},t),n)}((0,a.Z)(e,"0.userId.flocId"))),(n=(0,a.Z)(e,"0.userId.uid2"))?{unifiedId2:n.id}:{}),function(){if(!lu.cookiesAreEnabled())return{};var e=lu.getCookie("_tfpvi");return e?{firstPartyCookieTeadsId:e}:{}}());e[0].schain&&(o.schain=e[0].schain);var s=t.gdprConsent;if(t&&s){var d="boolean"==typeof s.gdprApplies,l="string"==typeof s.consentString,u=d?function(e,t,n){var i=12;return e?function(e,t){return e&&1===t?e.hasGlobalScope||e.hasGlobalConsent:!(!e||2!==t||e.isServiceSpecific)}(t,n)&&(i=11):i=0,i}(s.gdprApplies,s.vendorData,s.apiVersion):22;o.gdpr_iab={consent:l?s.consentString:"",status:u,apiVersion:s.apiVersion}}return t&&t.uspConsent&&(o.us_privacy=t.uspConsent),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(o)}},interpretResponse:function(e,t){var n=[];return(e=e.body).responses&&e.responses.forEach((function(e){var t={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};e.dealId&&(t.dealId=e.dealId),n.push(t)})),n}};function cu(e){var t="";return e&&e.refererInfo&&e.refererInfo.referer&&(t=e.refererInfo.referer),t}function pu(e){var t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,n=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(n)return n.toString();var i=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return i?i.toString():""}function hu(e){var t={},n=(0,r.NA)(e.params,"placementId"),i=(0,r.NA)(e.params,"pageId"),o=(0,a.Z)(e,"ortb2Imp.ext.gpid");return t.sizes=function(e){return(0,r.sF)(function(e){var t=(0,a.Z)(e,"mediaTypes.video.playerSize"),n=(0,a.Z)(e,"mediaTypes.video.sizes"),i=(0,a.Z)(e,"mediaTypes.banner.sizes");return(0,r.kJ)(i)||(0,r.kJ)(t)||(0,r.kJ)(n)?[i,n,t].reduce((function(e,t){return(0,r.kJ)(t)&&((0,r.kJ)(t[0])?t.forEach((function(t){e.push(t)})):e.push(t)),e}),[]):e.sizes}(e))}(e),t.bidId=(0,r.An)("bidId",e),t.bidderRequestId=(0,r.An)("bidderRequestId",e),t.placementId=parseInt(n,10),t.pageId=parseInt(i,10),t.adUnitCode=(0,r.An)("adUnitCode",e),t.auctionId=(0,r.An)("auctionId",e),t.transactionId=(0,r.An)("transactionId",e),o&&(t.gpid=o),t}function fu(e){return parseInt(e)>0}function gu(e){return gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gu(e)}function mu(){return mu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},mu.apply(this,arguments)}(0,Ue.dX)(uu),window.pbjs.installedModules.push("teadsBidAdapter");var vu="tremorhub.com",yu="ads.".concat(vu,"/ad/tag"),bu="events.".concat(vu,"/diag"),_u={code:"telaria",gvlid:52,aliases:[{code:"tremor",gvlid:52},{code:"tremorvideo",gvlid:52}],supportedMediaTypes:[I.pX],isBidRequestValid:function(e){return!!(e&&e.params&&e.params.adCode&&e.params.supplyCode)},buildRequests:function(e,t){var n=[];return e.forEach((function(e){var i=function(e,t){var n,i,o=(0,a.Z)(e,"mediaTypes.video.playerSize");o||(0,r.yN)("Although player size isn't required it is highly recommended"),o&&(!(0,r.kJ)(o)||2!==o.length||isNaN(o[0])||isNaN(o[1])?"object"===gu(o)&&(n=o[0][0],i=o[0][1]):(n=o[0],i=o[1]));var s=(0,a.Z)(e,"params.supplyCode"),d=(0,a.Z)(e,"params.adCode");if(s&&d){var l="https://".concat(s,".").concat(yu,"?adCode=").concat(d);n&&(l+="&playerWidth=".concat(n)),i&&(l+="&playerHeight=".concat(i));var u=mu({srcPageUrl:Tu()},e.params);return delete u.adCode,l+="".concat(Su(u,e.schain)),l+="&transactionId=".concat(e.transactionId),t&&(t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(l+="&gdpr=".concat(t.gdprConsent.gdprApplies?1:0)),t.gdprConsent.consentString&&(l+="&gdpr_consent=".concat(t.gdprConsent.consentString))),t.refererInfo&&t.refererInfo.referer&&(l+="&referrer=".concat(encodeURIComponent(t.refererInfo.referer)))),l+"&hb=1&fmt=json"}}(e,t);i&&n.push({method:"GET",url:i,bidId:e.bidId,vastUrl:i.split("&fmt=json")[0]})})),n},interpretResponse:function(e,t){var n,i,a,o=[];try{n=e.body,t.url.split("&").forEach((function(e){var t=e.toLowerCase();t.indexOf("player")>-1&&(t.indexOf("width")>-1?i=e.split("=")[1]:t.indexOf("height")>-1&&(a=e.split("=")[1]))}))}catch(e){(0,r.H)(e),i=0,a=0}if(!n||n.error){var s="in response for ".concat(t.bidderCode," adapter");n&&n.error&&(s+=": ".concat(n.error)),(0,r.H)(s)}else(0,r.xb)(n.seatbid)||n.seatbid[0].bid.forEach((function(e){e&&o.push(function(e,t,n,i){var r={requestId:e.bidId,cpm:t.price,creativeId:t.crid||"-1",vastXml:t.adm,vastUrl:e.vastUrl,mediaType:"video",width:n,height:i,currency:"USD",netRevenue:!0,ttl:300,ad:t.adm,meta:{}};return t.adomain&&t.adomain.length>0&&(r.meta.advertiserDomains=t.adomain),r}(t,e,i,a))}));return o},getUserSyncs:function(e,t){var n=[];return e.pixelEnabled&&t.length&&((0,a.Z)(t,"0.body.ext.telaria.userSync")||[]).forEach((function(e){return n.push({type:"image",url:e})})),n},onTimeout:function(e){var t=ku(e);t&&(0,r.hq)(t)}};function Tu(){return encodeURIComponent(document.location.href)}function wu(e){return""!==e&&void 0!==e?encodeURIComponent(e):""}function Su(e,t){var n="";if(!(0,r.xb)(e)){for(var i in e)"schain"!==i&&e.hasOwnProperty(i)&&!(0,r.xb)(e[i])&&(n+="&".concat(i,"=").concat(e[i]));n+=function(e){if((0,r.xb)(e))return"";var t="&schain=".concat(e.ver,",").concat(e.complete);return e.nodes.forEach((function(e){t+="!",t+="".concat(wu(e.asi),","),t+="".concat(wu(e.sid),","),t+="".concat(wu(e.hp),","),t+="".concat(wu(e.rid),","),t+="".concat(wu(e.name),","),t+="".concat(wu(e.domain))})),t}((0,r.xb)(t)?e.schain:t)}return n}var ku=function(e){var t=(0,a.Z)(e,"0.params.0");if(!(0,r.xb)(t)){var n="https://".concat(bu);return t=mu({srcPageUrl:Tu()},t),(n+="".concat(Su(t)))+"&hb=1&evt=TO"}};function Iu(){return Iu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Iu.apply(this,arguments)}function Cu(e){return Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cu(e)}function Eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eu(Object(n),!0).forEach((function(t){Pu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xu(e){return function(e){if(Array.isArray(e))return Ou(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ou(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ou(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ou(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}(0,Ue.dX)(_u),window.pbjs.installedModules.push("telariaBidAdapter");var Du=!0,Ru=null,Lu={gvlid:28,code:"triplelift",supportedMediaTypes:[I.Mk,I.pX],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var n="https://tlx.3lift.com/header/auction?",i=function(e){var t,n,i,a,o,s,d={},l=e[0].schain,u=(t={},n={},i={},a=p.vc.getConfig("ortb2")||{},o=Iu({},a.site),s=Iu({},a.user),ju(n,o),ju(i,s),(0,r.xb)(n)||(t.context=n),(0,r.xb)(i)||(t.user=i),t);d.imp=e.map((function(e,t){var n,i={id:t,tagid:e.params.inventoryCode,floor:Uu(e)};return Mu(e)?i.video=function(e){var t=Au(Au({},e.params.video),e.mediaTypes.video);return t.w||(t.w=t.playerSize[0][0]),t.h||(t.h=t.playerSize[0][1]),"instream"===t.context&&(t.placement=1),delete t.playerSize,t}(e):e.mediaTypes.banner&&(i.banner={format:(n=e.sizes,n.filter(Fu).map((function(e){return{w:e[0],h:e[1]}})))}),(0,r.xb)(e.ortb2Imp)||(i.fpd=function(e){var t={},n={};return ju(n,e.ext),(0,r.xb)(n)||(t.context=n),t}(e.ortb2Imp)),i}));var c=[].concat(xu(Nu([e[0]],"tdid","adserver.org","TDID")),xu(function(e){return Nu(e,"idl_env","liveramp.com","idl")}([e[0]])),xu(function(e){return Nu(e,"criteoId","criteo.com","criteoId")}([e[0]])),xu(function(e){return Nu(e,"pubcid","pubcid.org","pubcid")}([e[0]])));c.length>0&&(d.user={ext:{eids:c}});var h=function(e,t){var n={};return(0,r.xb)(e)||(n.schain=Au({},e)),(0,r.xb)(t)||(n.fpd=Au({},t)),n}(l,u);return(0,r.xb)(h)||(d.ext=h),d}(e);if(n=(0,r.t0)(n,"lib","prebid"),n=(0,r.t0)(n,"v","6.24.1"),t&&t.refererInfo){var a=t.refererInfo.referer;n=(0,r.t0)(n,"referrer",a)}return t&&t.timeout&&(n=(0,r.t0)(n,"tmax",t.timeout)),t&&t.gdprConsent&&(void 0!==t.gdprConsent.gdprApplies&&(Du=t.gdprConsent.gdprApplies,n=(0,r.t0)(n,"gdpr",Du.toString())),void 0!==t.gdprConsent.consentString&&(Ru=t.gdprConsent.consentString,n=(0,r.t0)(n,"cmp_cs",Ru))),t&&t.uspConsent&&(n=(0,r.t0)(n,"us_privacy",t.uspConsent)),!0===p.vc.getConfig("coppa")&&(n=(0,r.t0)(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),(0,r.ji)("tlCall request built: "+n),{method:"POST",url:n,data:i,bidderRequest:t}},interpretResponse:function(e,t){var n=t.bidderRequest;return(e.body.bids||[]).map((function(e){return function(e,t){var n={},i=t.width||1,r=t.height||1,a=t.deal_id||"",o=t.crid||"",s=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(n={requestId:s.bidId,cpm:t.cpm,width:i,height:r,netRevenue:!0,ad:t.ad,creativeId:o,dealId:a,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},Mu(s)&&(n.vastXml=t.ad,n.mediaType="video",n.ttl=3600),t.advertiser_name&&(n.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(n.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(n.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(n.meta.mediaType="native")),n}(n,e)}))},getUserSyncs:function(e,t,n,i){var a=function(e){if(e)return e.iframeEnabled?"iframe":e.pixelEnabled?"image":void 0}(e);if(a){var o="https://eb2.3lift.com/sync?";return"image"===a&&(o=(0,r.t0)(o,"px",1),o=(0,r.t0)(o,"src","prebid")),null!==Ru&&(o=(0,r.t0)(o,"gdpr",Du),o=(0,r.t0)(o,"cmp_cs",Ru)),i&&(o=(0,r.t0)(o,"us_privacy",i)),[{type:a,url:o}]}}};function Mu(e){return!!e.mediaTypes.video&&!!e.mediaTypes.video.context&&"instream"===e.mediaTypes.video.context.toLowerCase()}function Uu(e){var t=null;if("function"==typeof e.getFloor)try{var n=e.getFloor({currency:"USD",mediaType:Mu(e)?"video":"banner",size:"*"});"object"!==Cu(n)||"USD"!==n.currency||isNaN(parseFloat(n.floor))||(t=parseFloat(n.floor))}catch(e){(0,r.H)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}function ju(e,t){(0,r.xb)(t)||Object.keys(t).forEach((function(n){null!=t[n]&&(e[n]=t[n])}))}function Nu(e,t,n,i){return e.map(function(e){return function(t){return t&&t.userId&&t.userId[e]}}(t)).filter(Bu(t)).map(function(e,t){return function(n){return{source:e,uids:[{id:n.id?n.id:n,ext:{rtiPartner:t}}]}}}(n,i))}var Bu=function(e){return function(t,n,i){var a=!!t&&((0,r.d8)(t)?!!t:(0,r.PO)(t)&&!(0,r.kJ)(t)&&!(0,r.xb)(t)&&t.id&&(0,r.d8)(t.id)&&!!t.id);return a||void 0===i[0]||(0,r.yN)("Triplelift: invalid ".concat(e," userId format")),a}};function Fu(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,Ue.dX)(Lu),window.pbjs.installedModules.push("tripleliftBidAdapter");var qu="unifiedId",Vu={name:qu,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(t&&("string"==typeof t.partner||"string"==typeof t.url)){var n=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){var t={success:function(t){var n;if(t)try{n=JSON.parse(t)}catch(e){(0,r.H)(e)}e(n)},error:function(t){(0,r.H)("".concat(qu,": ID fetch encountered an error"),t),e()}};(0,fi.h)(n,t,void 0,{method:"GET",withCredentials:!0})}}}(0,r.H)("User ID - unifiedId submodule requires either partner or url to be defined")}};(0,C.Bx)("userId",Vu),window.pbjs.installedModules.push("unifiedIdSystem");var Hu=(0,C.z3)("sync",(function(){}));function zu(e){return zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zu(e)}var Wu,$u,Gu,Ku,Xu,Zu="User ID",Yu="cookie",Ju="html5",Qu="_pbjs_userid_consent_data",ec="_pbjs_id_optout",tc=(0,de.eA)("userid"),nc=[],ic=!1,rc=[],ac=[],oc=[];function sc(e,t){var n=e.config.storage,i="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null;try{var a=(0,r.PO)(t)?JSON.stringify(t):t,o=new Date(Date.now()+864e5*n.expires).toUTCString();n.type===Yu?(tc.setCookie(n.name,a,o,"Lax",i),"number"==typeof n.refreshInSeconds&&tc.setCookie("".concat(n.name,"_last"),(new Date).toUTCString(),o,"Lax",i)):n.type===Ju&&(tc.setDataInLocalStorage("".concat(n.name,"_exp"),o),tc.setDataInLocalStorage(n.name,encodeURIComponent(a)),"number"==typeof n.refreshInSeconds&&tc.setDataInLocalStorage("".concat(n.name,"_last"),(new Date).toUTCString()))}catch(e){(0,r.H)(e)}}function dc(e){var t=(0,r.EE)().setEidPermissions;"function"==typeof t&&(0,r.kJ)(e)&&t(function(e){var t=[];return e.filter((function(e){return(0,r.PO)(e.idObj)&&Object.keys(e.idObj).length})).forEach((function(e){Object.keys(e.idObj).forEach((function(n){(0,a.Z)(e,"config.bidders")&&Array.isArray(e.config.bidders)&&(0,a.Z)(gt,n+".source")&&t.push({source:gt[n].source,bidders:e.config.bidders})}))})),t}(e))}function lc(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=n?"".concat(e.name,"_").concat(n):e.name;try{if(e.type===Yu)t=tc.getCookie(i);else if(e.type===Ju){var a=tc.getDataFromLocalStorage("".concat(e.name,"_exp"));""===a?t=tc.getDataFromLocalStorage(i):a&&new Date(a).getTime()-Date.now()>0&&(t=decodeURIComponent(tc.getDataFromLocalStorage(i)))}"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){(0,r.H)(e)}return t}function uc(e){var t={consentString:"",gdprApplies:!1,apiVersion:0};return e&&(t.consentString=e.consentString,t.gdprApplies=e.gdprApplies,t.apiVersion=e.apiVersion),(0,r._R)(JSON.stringify(t))}function cc(e){try{var t=new Date(Date.now()+2592e6).toUTCString();tc.setCookie(Qu,uc(e),t,"Lax")}catch(e){(0,r.H)(e)}}function pc(){try{return tc.getCookie(Qu)}catch(e){(0,r.H)(e)}}function hc(e){if(e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies){if(!e.consentString)return!1;if(1===e.apiVersion&&!1===(0,a.Z)(e,"vendorData.purposeConsents.1"))return!1;if(2===e.apiVersion&&!1===(0,a.Z)(e,"vendorData.purpose.consents.1"))return!1}return!0}function fc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.hostname;if(!tc.cookiesAreEnabled())return e;var t,n,i=e.split(".");if(2==i.length)return e;var a=-2,o="_rdc".concat(Date.now()),s="writeable";do{t=i.slice(a).join(".");var d=new Date((0,r.AB)()+1e4).toUTCString();tc.setCookie(o,s,d,"Lax",t,void 0);var l=tc.getCookie(o,void 0);l===s?(n=!1,tc.setCookie(o,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,t,void 0)):(a+=-1,n=Math.abs(a)<=i.length)}while(n);return t}function gc(e,t){var n=function(){};t&&(n=(0,r.yx)((function(){clearTimeout(void 0),t()}),e.length)),e.forEach((function(e){try{e.callback((function(t){t?(e.config.storage&&sc(e,t),e.idObj=e.submodule.decode(t,e.config)):(0,r.PN)("".concat(Zu,": ").concat(e.submodule.name," - request id responded with an empty value")),n()}))}catch(t){(0,r.H)("Error in userID module '".concat(e.submodule.name,"':"),t),n()}e.callback=void 0}))}function mc(e,t){[e].some((function(e){return!Array.isArray(e)||!e.length}))||e.forEach((function(e){e.bids&&(0,r.kJ)(e.bids)&&e.bids.forEach((function(e){var n=function(e,t){return Array.isArray(e)&&e.length&&t?e.filter((function(e){return!e.config.bidders||!(0,r.kJ)(e.config.bidders)||(0,u.q9)(e.config.bidders,t)})).filter((function(e){return(0,r.PO)(e.idObj)&&Object.keys(e.idObj).length})).reduce((function(e,t){return Object.keys(t.idObj).forEach((function(n){e[n]=t.idObj[n]})),e}),{}):{}}(t,e.bidder);Object.keys(n).length&&(e.userId=n,e.userIdAsEids=vt(n))}))}))}function vc(e){return new Promise((function(t){return setTimeout(t,e)}))}var yc,bc={};function _c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delay,n=void 0===t?vc:t;function i(){var e={};function t(t){return function(n){null!=e[t]?e[t](n):(e[t]=!0,e[2]=n)}}return{promise:new Promise((function(t,n){null!=e[0]?t(e[2]):null!=e[1]?n(e[2]):(e[0]=t,e[1]=n)})),resolve:t(0),reject:t(1)}}var a,s=i(),l=i(),u=!1;function c(e){return null!=a&&a.reject(bc),a=i(),Promise.race([e,a.promise])}var p=Wu,h=rc;function f(e){return function(){if(p===Wu&&h===rc)return e.apply(void 0,arguments)}}var g=c(s.promise.then((function(){return le.rp.promise})).then(f((function(e){Rc(p,h,e)}))).then((function(){return l.promise})).then(f((function(){var e=p.filter((function(e){return(0,r.LQ)(e.callback)}));if(e.length)return new Promise((function(t){return gc(e,t)}))}))));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,i=void 0!==t&&t,r=e.submoduleNames,a=void 0===r?null:r,m=e.ready,v=void 0!==m&&m;return v&&!u&&(u=!0,s.resolve(),Gu>0?l.resolve():o.on(d.FP.AUCTION_END,(function e(){o.S1(d.FP.AUCTION_END,e),n($u).then(l.resolve)}))),i&&(g=c(g.catch((function(){return null})).then((function(){return le.rp.promise})).then(f((function(e){var t=Rc(p,h.filter((function(e){return null==a||a.includes(e.submodule.name)})),e,!0).filter((function(e){return null!=e.callback}));if(t.length)return new Promise((function(e){return gc(t,e)}))}))))),g}}function Tc(){var e=Ku&&(kc()||[]).find((function(e){return e.source===Ku}));if(e&&"string"==typeof(0,a.Z)(e,"uids.0.id")){var t=e.uids[0].id.replace(/[\W_]/g,"");if(t.length>=32&&t.length<=150)return t;(0,r.yN)("User ID - Googletag Publisher Provided ID for ".concat(Ku," is not between 32 and 150 characters - ").concat(t))}}function wc(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.delay,s=void 0===o?vc:o;Promise.race([xc(),s(Gu)]).then((function(){mc(t.adUnits||(0,i.R)().adUnits,Wu);var a=Tc();a&&((0,r.T9)()?window.googletag.pubads().setPublisherProvidedId(a):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push((function(){window.googletag.pubads().setPublisherProvidedId(a)})))),e.call(n,t)}))}function Sc(){return function(e){return Array.isArray(e)&&e.length?e.filter((function(e){return(0,r.PO)(e.idObj)&&Object.keys(e.idObj).length})).reduce((function(e,t){return Object.keys(t.idObj).forEach((function(n){e[n]=t.idObj[n]})),e}),{}):{}}(Wu)}function kc(){return vt(Sc())}function Ic(e){return vt(function(e,t){if(!Array.isArray(e)||!e.length)return{};var n=e.filter((function(e){var n;return(0,r.PO)(e.idObj)&&Object.keys(e.idObj).length&&(null===(n=gt[Object.keys(e.idObj)[0]])||void 0===n?void 0:n.source)===t}));return(0,r.xb)(n)?[]:n[0].idObj}(Wu,e))[0]}function Cc(e,t,n){return yc().then((function(){var i={};if((0,r.LQ)(n)){(0,r.PN)("".concat(Zu," - Getting encrypted signal from custom function : ").concat(n.name," & source : ").concat(e," "));var a=n(e);i[e]=a?Ec(a):null}else{var o=Ic(e);(0,r.PN)("".concat(Zu," - Getting encrypted signal for eids :").concat(JSON.stringify(o))),(0,r.xb)(o)||(i[o.source]=!0===t?Ec(o):o.uids[0].id)}return(0,r.PN)("".concat(Zu," - Fetching encrypted eids: ").concat(i[e])),i[e]}))}function Ec(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n="";return 1===t&&(n="object"===zu(e)?window.btoa(JSON.stringify(e)):window.btoa(e)),"".concat(t,"||").concat(n)}function Ac(){if((0,r.T9)()){window.googletag.encryptedSignalProviders=window.googletag.encryptedSignalProviders||[];var e=p.vc.getConfig("userSync.encryptedSignalSources");if(e){var t=e.registerDelay||0;setTimeout((function(){e.sources&&e.sources.forEach((function(e){var t=e.source,n=e.encrypt,i=e.customFunc;t.forEach((function(e){window.googletag.encryptedSignalProviders.push({id:e,collectorFunction:function(){return Cc(e,n,i)}})}))}))}),t)}else(0,r.yN)("".concat(Zu," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function Pc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.submoduleNames,n=arguments.length>1?arguments[1]:void 0;return yc({refresh:!0,submoduleNames:t}).then((function(){return n&&(0,r.LQ)(n)&&n(),Sc()}))}function xc(){return yc().then((function(){return Sc()}),(function(e){return e===bc?xc():Promise.reject(e)}))}var Oc=(0,C.z3)("sync",(function(e,t){return{userIdModules:e,hasValidated:t&&t.hasValidated}}),"validateGdprEnforcement");function Dc(e,t,n,i){if(e.config.storage){var a,o=lc(e.config.storage),s=!1;if("number"==typeof e.config.storage.refreshInSeconds){var d=new Date(lc(e.config.storage,"last"));s=d&&Date.now()-d.getTime()>1e3*e.config.storage.refreshInSeconds}!o||s||i||!function(e,t){return null!=e&&e===uc(t)}(n,t)?a=e.submodule.getId(e.config,t,o):"function"==typeof e.submodule.extendId&&(a=e.submodule.extendId(e.config,t,o)),(0,r.PO)(a)&&(a.id&&(sc(e,a.id),o=a.id),"function"==typeof a.callback&&(e.callback=a.callback)),o&&(e.idObj=e.submodule.decode(o,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var l=e.submodule.getId(e.config,t,void 0);(0,r.PO)(l)&&("function"==typeof l.callback&&(e.callback=l.callback),l.id&&(e.idObj=e.submodule.decode(l.id,e.config)))}}function Rc(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=Oc(t,n),o=a.userIdModules,s=a.hasValidated;if(!s&&!hc(n))return(0,r.yN)("".concat(Zu," - gdpr permission not valid for local storage or cookies, exit module")),[];var d=pc();cc(n);var l=o.reduce((function(e,t){try{Dc(t,n,d,i),e.push(t)}catch(e){(0,r.H)("Error in userID module '".concat(t.submodule.name,"':"),e)}return e}),[]);return l.length&&dc(l),l.forEach(Lc.bind(null,e)),l}function Lc(e,t){for(var n=!1,i=0;i<e.length;i++)if(t.config.name.toLowerCase()===e[i].config.name.toLowerCase()){n=!0,e[i]=t;break}n||e.push(t)}function Mc(){var e=function(e,t,n){return Array.isArray(e)?e.reduce((function(e,t){return!t||(0,r.jH)(t.name)||(!t.storage||(0,r.jH)(t.storage.type)||(0,r.jH)(t.storage.name)||-1===n.indexOf(t.storage.type)?(0,r.PO)(t.value)?e.push(t):t.storage||t.value||e.push(t):e.push(t)),e}),[]):[]}(ac,0,nc);if(e.length){var t=oc.filter((function(e){return!(0,u.sE)(rc,(function(t){return t.name===e.name}))}));rc.splice(0,rc.length),t.map((function(t){var n=(0,u.sE)(e,(function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())}));return n&&t.name!==n.name&&(n.name=t.name),t.findRootDomain=fc,n?{submodule:t,config:n,callback:void 0,idObj:void 0}:null})).filter((function(e){return null!==e})).forEach((function(e){return rc.push(e)})),!ic&&rc.length&&((0,i.R)().requestBids.before(wc,40),Hu.after((function(e){return e(Tc())})),(0,r.PN)("".concat(Zu," - usersync config updated for ").concat(rc.length," submodules: "),rc.map((function(e){return e.submodule.name}))),ic=!0)}}function Uc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function jc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.delay,a=void 0===n?vc:n;Ku=void 0,rc=[],ac=[],ic=!1,Wu=[],yc=_c({delay:a}),null!=Xu&&Xu(),oc=[],-1!==(nc=[tc.localStorageIsEnabled()?Ju:null,tc.cookiesAreEnabled()?Yu:null].filter((function(e){return null!==e}))).indexOf(Yu)&&tc.getCookie(ec)?(0,r.PN)("".concat(Zu," - opt-out cookie found, exit module")):-1!==nc.indexOf(Ju)&&tc.getDataFromLocalStorage(ec)?(0,r.PN)("".concat(Zu," - opt-out localStorage found, exit module")):(Xu=e.getConfig("userSync",(function(e){var t=e.userSync;Ku=t.ppid,t&&t.userIds&&(ac=t.userIds,$u=(0,r.hj)(t.syncDelay)?t.syncDelay:500,Gu=(0,r.hj)(t.auctionDelay)?t.auctionDelay:0,Mc(),yc({ready:!0}))})),(0,i.R)().getUserIds=Sc,(0,i.R)().getUserIdsAsEids=kc,(0,i.R)().getEncryptedEidsForSource=Cc,(0,i.R)().registerSignalSources=Ac,(0,i.R)().refreshUserIds=Pc,(0,i.R)().getUserIdsAsync=xc,(0,i.R)().getUserIdsAsEidBySource=Ic)}(p.vc),(0,C.bA)("userId",(function(e){(0,u.sE)(oc,(function(t){return t.name===e.name}))||(oc.push(e),Mc())})),window.pbjs.installedModules.push("userId");var Nc="6.24.1",Bc="USD",Fc=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxrtb.com","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","parrable.com","pubcid.org","quantcast.com","quantcast.com","tapad.com","uidapi.com","verizonmedia.com","yahoo.com","zeotap.com"];function qc(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function Vc(e){return(0,r.kJ)(e)&&2===e.length&&!(0,r.kJ)(e[0])?[qc(e)]:e.map(qc)}function Hc(e){return(0,r.kJ)((0,a.Z)(e,"userIdAsEids"))?e.userIdAsEids.filter((function(e){return-1!==Fc.indexOf(e.source)})):[]}function zc(e){return(0,a.Z)(e,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0}function Wc(e){var t;return(0,a.Z)(e,"params.pubId")?t=!0:(0,a.Z)(e,"params.dcn")&&(0,a.Z)(e,"params.pos")&&(t=!1),t}function $c(){var e=p.vc.getConfig("yahoossp.mode");return void 0===(e=e?e.toLowerCase():void 0)||e===I.Mk?I.Mk:e===I.pX?I.pX:"all"===e?"*":void 0}function Gc(e){var t=$c(),n={currency:(0,a.Z)(e,"params.bidOverride.cur")||Bc,mediaType:t,size:"*"};return!!(0,r.LQ)(e.getFloor)&&e.getFloor(n)}function Kc(e,t,n,i){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uc(Object(n),!0).forEach((function(t){jc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i);for(var o in n)switch(e){case"string":-1!==t.indexOf(o)&&(0,r.d8)(n[o])&&(a[o]=n[o]);break;case"number":-1!==t.indexOf(o)&&(0,r.hj)(n[o])&&(a[o]=n[o]);break;case"array":-1!==t.indexOf(o)&&(0,r.kJ)(n[o])&&(a[o]=n[o]);break;case"object":-1!==t.indexOf(o)&&(0,r.PO)(n[o])&&(a[o]=n[o]);break;case"objectAllKeys":(0,r.PO)(n)&&(a[o]=n[o])}return a}function Xc(e){var t,n=p.vc.getConfig("yahoossp.ttl");return t=n||(0,a.Z)(e,"params.ttl"),(0,r.hj)(t)&&t>0&&t<3600?t:300}function Zc(e){return(0,r.d8)(e)&&e.length>0}function Yc(e,t){if(e){var n={id:(0,r.DO)(),cur:[Gc(e).currency||(0,a.Z)(t,"params.bidOverride.cur")||Bc],imp:[],site:{page:(0,a.Z)(e,"refererInfo.referer")},device:{dnt:0,ua:navigator.userAgent,ip:(0,a.Z)(t,"params.bidOverride.device.ip")||(0,a.Z)(t,"params.ext.ip")||void 0},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0}},source:{ext:{hb:1,adapterver:"1.0.2",prebidver:Nc,integration:{name:"prebid.js",ver:Nc}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:Hc(t)}}};return!0===Wc(t)?(n.site.publisher={id:t.params.pubId},((0,a.Z)(t,"params.bidOverride.site.id")||(0,a.Z)(t,"params.siteId"))&&(n.site.id=(0,a.Z)(t,"params.bidOverride.site.id")||t.params.siteId)):n.site.id=t.params.dcn,p.vc.getConfig("ortb2")&&(n=function(e,t){var n=p.vc.getConfig("ortb2"),i=(0,a.Z)(n,"site")||void 0,o=(0,a.Z)(i,"content")||void 0,s=(0,a.Z)(i,"content.data")||void 0,d=(0,a.Z)(n,"app.content")||void 0,l=(0,a.Z)(n,"app.content.data")||void 0,u=(0,a.Z)(n,"user")||void 0;if(i&&(0,r.PO)(i)){e.site=Kc("string",["name","domain","page","ref","keywords","search"],i,e.site),e.site=Kc("array",["cat","sectioncat","pagecat"],i,e.site),e.site=Kc("object",["ext"],i,e.site)}if(o&&(0,r.PO)(o)){e.site.content=Kc("string",["id","title","series","season","genre","contentrating","language"],o,e.site.content),e.site.content=Kc("number",["episode","prodq","context","livestream","len"],o,e.site.content),e.site.content=Kc("array",["cat"],o,e.site.content),e.site.content=Kc("object",["ext"],o,e.site.content),s&&(0,r.kJ)(s)&&s.every((function(t){var n={};n=Kc("string",["id","name"],t,n),n=Kc("array",["segment"],t,n),n=Kc("object",["ext"],t,n),e.site.content.data=[],e.site.content.data.push(n)}))}if(d&&(0,r.PO)(d)&&l&&(0,r.kJ)(l)&&l.every((function(t){var n={};n=Kc("string",["id","name"],t,n),n=Kc("array",["segment"],t,n),n=Kc("object",["ext"],t,n),e.app={content:{data:[]}},e.app.content.data.push(n)})),u&&(0,r.PO)(u)){e.user=Kc("string",["id","buyeruid","gender","keywords","customdata"],u,e.user),e.user=Kc("number",["yob"],u,e.user),e.user=Kc("array",["data"],u,e.user),e.user.ext=Kc("object",["ext"],u,e.user.ext)}return e}(n)),(0,a.Z)(t,"schain")&&(n.source.ext.schain=t.schain,n.source.ext.schain.nodes[0].rid=n.id),n}}function Jc(e,t){var n=$c();if(t&&e){var i={id:e.bidId,secure:zc(e),bidfloor:Gc(e).floor||(0,a.Z)(e,"params.bidOverride.imp.bidfloor")};if(!e.mediaTypes.banner||void 0!==n&&n!==I.Mk&&"*"!==n||(i.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:Vc(e.sizes)},e.mediaTypes.banner.pos&&(i.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(n===I.pX||"*"===n)){var o=Vc(e.mediaTypes.video.playerSize);i.video={mimes:(0,a.Z)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:(0,a.Z)(e,"params.bidOverride.imp.video.w")||o[0].w,h:(0,a.Z)(e,"params.bidOverride.imp.video.h")||o[0].h,maxbitrate:(0,a.Z)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:(0,a.Z)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:(0,a.Z)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:(0,a.Z)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:(0,a.Z)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:(0,a.Z)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:(0,a.Z)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:(0,a.Z)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,linearity:(0,a.Z)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:(0,a.Z)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:(0,a.Z)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:(0,a.Z)(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(i.ext={dfp_ad_unit_code:e.adUnitCode},(0,a.Z)(e,"params.kvp")&&(0,r.PO)(e.params.kvp))for(var s in i.ext.kvs={},e.params.kvp)if((0,r.d8)(e.params.kvp[s])||(0,r.hj)(e.params.kvp[s]))i.ext.kvs[s]=e.params.kvp[s];else if((0,r.kJ)(e.params.kvp[s])){var d=e.params.kvp[s];(d.every((function(e){return(0,r.d8)(e)}))||d.every((function(e){return(0,r.hj)(e)})))&&(i.ext.kvs[s]=e.params.kvp[s])}(0,a.Z)(e,"ortb2Imp.ext.data")&&(0,r.PO)(e.ortb2Imp.ext.data)&&(i.ext.data=e.ortb2Imp.ext.data),(0,a.Z)(e,"ortb2Imp.instl")&&(0,r.hj)(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(i.instl=e.ortb2Imp.instl),!1===Wc(e)?(i.tagid=e.params.pos,i.ext.pos=e.params.pos):(0,a.Z)(e,"params.placementId")&&(i.tagid=e.params.placementId),t.imp.push(i)}}function Qc(e){var t=e.payload,n=e.requestOptions,i=e.bidderRequest,o=Wc(i),s=p.vc.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===o&&(s=p.vc.getConfig("yahoossp.endpoint")||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===(0,a.Z)(i,"params.testing.e2etest"))if((0,r.PN)("yahoossp adapter e2etest mode is active"),n.withCredentials=!1,!0===o)t.site.id="1234567";else{var d=$c();t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach((function(e){e.ext.e2eTestMode=!0,d===I.Mk?e.tagid="8a969978017a7aaabab4ab0bc01a0009":d===I.pX?e.tagid="8a96958a017a7a57ac375d50c0c700cc":((0,r.yN)('yahoossp adapter e2etest mode does not support yahoossp.mode="all". \n Please specify either "banner" or "video"'),(0,r.yN)("yahoossp adapter e2etest mode: Please make sure your adUnit matches the yahoossp.mode video or banner"))}))}return{url:s,method:"POST",data:t,options:n,bidderRequest:i}}var ep={code:"yahoossp",gvlid:25,aliases:[],supportedMediaTypes:[I.Mk,I.pX],isBidRequestValid:function(e){var t=e.params;return!0===(0,a.Z)(t,"testing.e2etest")||!(!(0,r.PO)(t)||!(Zc(t.pubId)||Zc(t.dcn)&&Zc(t.pos)))||((0,r.yN)("yahoossp bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,t){if(!(0,r.xb)(e)&&!(0,r.xb)(t)){var n={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};n.withCredentials=function(e){return!(e&&e.gdprConsent&&e.gdprConsent.gdprApplies&&2===e.gdprConsent.apiVersion)||!0===(0,a.Z)(e.gdprConsent,"vendorData.purpose.consents.1")}(t);var i=function(e){var t=$c(),n=[];return t===I.Mk?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===I.Mk}))})):t===I.pX?n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===I.pX}))})):"*"===t&&(n=e.filter((function(e){return Object.keys(e.mediaTypes).some((function(e){return e===I.Mk||e===I.pX}))}))),n}(e);if(!0===p.vc.getConfig("yahoossp.singleRequestMode")){var o=Yc(t,i[0]);return i.forEach((function(e){Jc(e,o)})),Qc({payload:o,requestOptions:n,bidderRequest:t})}return i.map((function(e){var i=Yc(t,e);return Jc(e,i),Qc({payload:i,requestOptions:n,bidderRequest:e})}))}(0,r.yN)('yahoossp Adapter: buildRequests called with either empty "validBidRequests" or "bidderRequest"')},interpretResponse:function(e,t){t.data;var n=t.bidderRequest,i=[];return e.body&&Array.isArray(e.body.seatbid)?(e.body.seatbid.forEach((function(e){var t;try{t=e.bid[0]}catch(e){return i}var o=t.ext&&t.ext.encp?t.ext.encp:t.price,s={adId:(0,a.Z)(t,"adId")?t.adId:t.impid||t.crid,adUnitCode:n.adUnitCode,requestId:t.impid,cpm:o,width:t.w,height:t.h,creativeId:t.crid||0,currency:t.cur||Bc,dealId:t.dealid?t.dealid:null,netRevenue:!0,ttl:Xc(n),meta:{advertiserDomains:t.adomain}},d=function(e){var t=e.adm;return-1!==t.indexOf("o2playerSettings")||-1!==t.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==t.indexOf("AdPlacement")?I.Mk:-1!==t.indexOf("VAST")?I.pX:void 0}(t);d===I.Mk?(s.mediaType=I.Mk,s.ad=t.adm,s.meta.mediaType=I.Mk):d===I.pX&&(s.mediaType=I.pX,s.meta.mediaType=I.pX,s.vastXml=t.adm,t.nurl&&(s.vastUrl=t.nurl)),"outstream"!==(0,a.Z)(n,"mediaTypes.video.context")||n.renderer||(s.renderer=function(e,t){var n=c.Th.install({url:"https://cdn.vidible.tv/prod/hb-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{n.setRender((function(t){setTimeout((function(){o2PlayerRender(t)}),(0,a.Z)(e,"params.testing.renderer.setTimeout")||700)}))}catch(e){(0,r.yN)("yahoossp renderer error: setRender() failed",e)}return n}(n)||void 0),i.push(s)})),i):i},getUserSyncs:function(e,t,n,i){var a=!(0,r.xb)(t)&&t[0].body;return a&&a.ext&&a.ext.pixels?function(e,t){var n=/\w*(?=\s)/,i=/src=("|')(.*?)\1/,r=[];if(t){var a=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);a&&a.forEach((function(t){var a=t.match(n)[0],o=t.match(i)[2];if(a&&o){var s="img"===a.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===s||!e.pixelEnabled&&"image"===s)return;r.push({type:s,url:o})}}))}return r}(e,a.ext.pixels):[]}};(0,Ue.dX)(ep),window.pbjs.installedModules.push("yahoosspBidAdapter"),Me.processQueue();const tp=Me},9796:e=>{"use strict";e.exports=DM.molFeClientLogger},4760:()=>{},7044:()=>{},462:()=>{},6029:()=>{},7926:e=>{"use strict";e.exports=JSON.parse('{"k2":{"xn":"adserverTargeting","zF":"standard"},"f":"pbjs_debug","Q_":{"Q":1,"H":2},"FP":{"AUCTION_INIT":"auctionInit","AUCTION_END":"auctionEnd","BID_ADJUSTMENT":"bidAdjustment","BID_TIMEOUT":"bidTimeout","BID_REQUESTED":"bidRequested","BID_RESPONSE":"bidResponse","NO_BID":"noBid","BID_WON":"bidWon","BIDDER_DONE":"bidderDone","BIDDER_ERROR":"bidderError","SET_TARGETING":"setTargeting","BEFORE_REQUEST_BIDS":"beforeRequestBids","BEFORE_BIDDER_HTTP":"beforeBidderHttp","REQUEST_BIDS":"requestBids","ADD_AD_UNITS":"addAdUnits","AD_RENDER_FAILED":"adRenderFailed","AD_RENDER_SUCCEEDED":"adRenderSucceeded","TCF2_ENFORCEMENT":"tcf2Enforcement","AUCTION_DEBUG":"auctionDebug","BID_VIEWABLE":"bidViewable","STALE_RENDER":"staleRender","BILLABLE_EVENT":"billableEvent"},"q_":{"PREVENT_WRITING_ON_MAIN_DOCUMENT":"preventWritingOnMainDocument","NO_AD":"noAd","EXCEPTION":"exception","CANNOT_FIND_AD":"cannotFindAd","MISSING_DOC_OR_ADID":"missingDocOrAdid"},"aI":{"bidWon":"adUnitCode"},"Ql":{"yE":"low","M2":"medium","lj":"high","B7":"auto","uN":"dense","qN":"custom"},"TD":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","SOURCE":"hb_source","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_ID":"hb_cache_id","CACHE_HOST":"hb_cache_host","ADOMAIN":"hb_adomain"},"kF":{"BIDDER":"hb_bidder","AD_ID":"hb_adid","PRICE_BUCKET":"hb_pb","SIZE":"hb_size","DEAL":"hb_deal","FORMAT":"hb_format","UUID":"hb_uuid","CACHE_HOST":"hb_cache_host"},"FY":{"title":"hb_native_title","body":"hb_native_body","body2":"hb_native_body2","privacyLink":"hb_native_privacy","privacyIcon":"hb_native_privicon","sponsoredBy":"hb_native_brand","image":"hb_native_image","icon":"hb_native_icon","clickUrl":"hb_native_linkurl","displayUrl":"hb_native_displayurl","cta":"hb_native_cta","rating":"hb_native_rating","address":"hb_native_address","downloads":"hb_native_downloads","likes":"hb_native_likes","phone":"hb_native_phone","price":"hb_native_price","salePrice":"hb_native_saleprice","rendererUrl":"hb_renderer_url","adTemplate":"hb_adTemplate"},"os":{"YZ":"s2s"},"UE":{"CK":"targetingSet","fe":"rendered"}}')}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.loaded=!0,n.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__={};(()=>{"use strict";__webpack_require__(7861),__webpack_require__(4264),__webpack_require__(9978),(0,__webpack_require__(6212).t8)("cwv.barriers.global",!1),__webpack_require__(6372)})()})();